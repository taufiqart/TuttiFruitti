function getRandomInt(e, t) {
    return Math.floor(Math.random() * (t - e + 1)) + e
}

function cutHex(e) {
    return "#" == e.charAt(0) ? e.substring(1, 7) : e
}

function getStyle(e, t) {
    var n = "";
    return document.defaultView && document.defaultView.getComputedStyle ? n = document.defaultView.getComputedStyle(e, "").getPropertyValue(t) : e.currentStyle && (t = t.replace(/\-(\w)/g, function (e, t) {
        return t.toUpperCase()
    }), n = e.currentStyle[t]), n
}

function onCreateElementNsReady(e) {
    void 0 != document.createElementNS ? e() : setTimeout(function () {
        onCreateElementNsReady(e)
    }, 100)
}

function initTooltip(e) {
    function t(e, t) {
        return $(t).data("placement") ? $(t).data("placement") : "auto bottom"
    }

    function n(e) {
        return e.data("delay") ? e.data("delay") : {}
    }

    function i(e) {
        var t = e.data("container");
        return t ? "self" === t ? e : t : null
    }
    var r = is_touch_device() ? $(".a-tooltip", e).not("button, input, [href], .js-tablet-menu-trigger, .is-org .nav-sidebar .sidebar-link").add(".a-tooltip[href^='#']") : $(".a-tooltip", e).not(".is-org .nav-sidebar .sidebar-link");
    r.each(function () {
        var e = $(this),
            r = e.closest(".modal"),
            a = !!r.length,
            o = {
                placement: t,
                delay: n(e),
                trigger: "hover"
            };
        e.data("seen", !1);
        var s = i(e),
            l = s && !a ? s : a ? r.get(0) : "body",
            c = $.extend({}, o, {
                container: l
            });
        e.tooltip(c)
    }), r.on("click", function (e) {
        var t = $(this),
            n = t.data("seen"),
            i = t.hasClass("persistent-tooltip");
        i || (t.closest(".dropdown").find("[data-toggle=dropdown]").length && t.hasClass("disabled") && e.stopPropagation(), t.data("bs.tooltip").$tip && t.data("bs.tooltip").$tip.is(":visible") && n ? t.tooltip("hide") : t.tooltip("show"), $(this).data("seen", !0))
    }).on("show.bs.tooltip", function (e) {
        var t = $(this);
        $("body").addClass("tooltip-open");
        var n = t.data("bs.tooltip").$tip;
        n && n.addClass(t.data("tipclass"))
    }).on("hide.bs.tooltip", function (e) {
        $("body").removeClass("tooltip-open")
    })
}

function DelayedPopover(e, t, n) {
    e.popover(n).delay(t, "popover").queue("popover", function (e) {
        $(this).popover("show"), e()
    }).dequeue("popover")
}

function AchievementSetting(e) {
    this.settings_panel = e, this.checkboxes = this.settings_panel.find(".toggle-switch-wrapper"), this.input_goals = this.settings_panel.find("input.ind-goal"), this.apply_btn = this.settings_panel.find("a.apply_to_all"), this.nestedInput = function (e, t) {
        e.prop("disabled", 0 == t)
    }, this.undoInputChange = function (e, t) {
        var n = 0 === Number(t) ? 1 : 0;
        e.prop("checked", n)
    }, this.updateSetting = function (e, t, n) {
        var i = this;
        $.ajax(t.url, {
            type: "POST",
            dataType: "json",
            data: {
                _method: "post",
                setting: t.name,
                value: n
            }
        }).done(function (t) {
            var r = e.data("reload");
            t.success ? ($.jGrowl("Setting changed!"), e.data("nested") && i.nestedInput($("#" + e.data("nested")), n), r && window.location.reload(!0)) : (e.is(":checkbox") && i.undoInputChange(e, n), alert(t.error))
        }).fail(function (t) {
            ajaxFailAlert(t), i.undoInputChange(e, n)
        })
    }, this.settingChange = function (e) {
        var t = $(e.target),
            n = t.data("settingConfig");
        if (t.is(":checkbox")) var i = t.prop("checked") ? 1 : 0;
        else if (t.is("input")) var i = t.val();
        else if (t.is("a")) var i = $("input." + n.selector).val();
        n.confirm ? confirm(n.confirm) ? this.updateSetting(t, n, i) : this.undoInputChange(t, i) : this.updateSetting(t, n, i)
    }, this.bind = function () {
        var e = this,
            t = !1;
        this.checkboxes.on("change", function (t) {
            e.settingChange(t)
        }), this.input_goals.on("change", function () {
            t = !0
        }), this.input_goals.on("blur", function (n) {
            t && (e.settingChange(n), t = !1)
        }), this.apply_btn.on("click", function (t) {
            $(t.target).attr("disabled") || (e.settingChange(t), t.stopImmediatePropagation(), t.preventDefault())
        })
    }, this.bind()
}

function View(e, t) {
    function n(e) {
        var t = '[src="' + e + '"],[data-src="' + e + '"]';
        return $i = m.find(t).add(m.filter(t)).eq(0)
    }

    function i(e) {
        y.each(t.keys, function (t, n) {
            for (var i = 0; i < n.length; ++i) e.keyCode == n[i] && w[t]()
        })
    }

    function r(e) {
        e.preventDefault(), $t = y(e.target), g.find("li").length <= 1 && w.close(), $t.is("img") ? $t.parents("li").is(".current") ? window.open($t[0].src) : w.show($t) : $t.is("li>div,li") ? $t.parents("li").is(".next") || $t.is(".next") ? w.next() : $t.parents("li").is(".previous") || $t.is(".previous") ? w.prev() : w.close() : w.close()
    }

    function a() {
        var e = y("<style />");
        y("head").prepend(e);
        var n = document.styleSheets[0];
        for (r in t.css) {
            var i = "";
            for (name in t.css[r]) i += name + ":" + t.css[r][name] + ";";
            for (var r, a = r.split(","), o = 0; r = a[o]; ++o) n.insertRule ? n.insertRule(r + "{" + i + "}", n.cssRules.length) : n.addRule(r, i)
        }
    }

    function o(e, t) {
        s(e.find("img")), e.nextAll().slice(0, t).add(e.prevAll().slice(0, t)).find("img").each(function (e, t) {
            s(t)
        })
    }

    function s(e) {
        e.src || (y.isFunction(t.onError) && y(e).error(t.onError), y(e).attr("src", y(e).attr("data-src")))
    }

    function l() {
        if (y.isArray(b))
            for (var e, t = 0; e = b[t]; ++t) {
                var n = null,
                    i = y('<li class="loading"/>');
                "object" == typeof e && e.src ? n = e.src : "string" == typeof e && (n = e);
                var r = new Image;
                r.onload = function () {
                    w.sync(), y(this).css({
                        visibility: "visible"
                    }).parents("li").removeClass("loading")
                }, y(r).css({
                    visibility: "hidden"
                }), y(r).attr("data-src", n), e.caption && i.addClass("has-caption").append(y('<span class="caption" />').text(e.caption)), 0 == t && i.addClass("first"), t == b.length - 1 && i.addClass("last"), g.append(i.append(y("<div/>").append(y("<span/>").append(r))))
            }
    }

    function c(e) {
        e.preventDefault(), w.show(this.href), w.open()
    }

    function u(e) {
        return /\.(jpeg|jpg|gif|png)(\?|#)?(.*)?$/gi.test(e)
    }

    function d() {
        "object" == typeof e && e.jquery ? e.filter("a[href]").each(function () {
            (u(this.href) || !t.validateUrls) && b.push({
                src: this.href,
                caption: this.title
            }), y(this).unbind("click.view").bind("click.view", c)
        }) : y.isArray(e) && (b = e)
    }

    function h() {
        p.unbind("click.view").bind("click.view", r)
    }

    function f() {
        d(), l(), m = p.find("img"), y("body").append(p), View._cssified || a(), View._cssified = !0, h(), w.sync(), w.close(), t.preload && w.show(m.eq(0)), w._ie7 = navigator.userAgent.indexOf("MSIE 7") > -1, y(window).resize(function () {
            w.sync()
        })
    }
    var p, m, g, v, y = jQuery,
        b = [],
        w = this,
        _ = y("body");
    p = y('<div class="viewer"><ul></ul><a href="#" class="close" title="Close this viewer">&times;</a></div>').hide(), g = p.find("ul");
    var t = y.extend({
        css: {
            "body.viewing": {
                overflow: "hidden"
            },
            ".viewer *, .viewer": {
                margin: 0,
                padding: 0,
                border: 0
            },
            ".viewer": {
                "background-color": "#222",
                filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#D8000000,endColorstr=#D8000000)",
                "background-color": "rgba(0,0,0,0.85)",
                position: "fixed",
                right: 0,
                top: 0,
                left: 0,
                bottom: 0,
                display: "block",
                overflow: "hidden",
                "z-index": Math.ceil((new Date).getTime() / 1e7),
                height: "100%",
                width: "100%"
            },
            ".viewer li.current + .loading": {
                "background-position": "0 center"
            },
            ".viewer ul": {
                display: "block",
                height: "100%",
                width: "100%",
                "white-space": "nowrap"
            },
            ".viewer li": {
                height: "100%",
                width: "0%",
                overflow: "hidden",
                display: "none",
                "float": "left",
                "text-align": "center",
                position: "relative"
            },
            ".viewer li.previous, .viewer li.next": {
                cursor: "pointer",
                display: "block"
            },
            ".viewer li>div": {
                left: "10px",
                right: "10px",
                bottom: "10px",
                top: "10px",
                display: "block",
                "text-align": "center",
                position: "absolute"
            },
            ".viewer li.has-caption>div": {
                bottom: "5em"
            },
            ".viewer li.loading>div": {
                background: "url(data:image/gif;base64,R0lGODlhDAAMAPIGAFxcXE5OTlZWVkpKSkZGRkJCQgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFHgAGACwAAAAADAAMAAADLmhaIRJFSQHEGFRMQKQhlVFwngIyWqk8lqpgrYs1rvGMXXnapASmPAsm5EHdJAkAIfkEBR4AAQAsBgABAAMABQAAAgaEbwISHAUAIfkEBR4AAQAsBgADAAUAAwAAAgOEj1kAIfkEBR4AAgAsBgAGAAUAAwAAAgYMDmInegUAIfkEBR4AAQAsBgAGAAMABQAAAgOEj1kAIfkEBR4AAgAsAwAGAAMABQAAAgaUchDAzQUAIfkEBR4AAQAsAQAGAAUAAwAAAgOEj1kAIfkEBR4AAgAsAQADAAUAAwAAAgYEImKnGwUAIfkEBR4AAQAsAwABAAMABQAAAgOEj1kAOw%3D%3D) center center no-repeat"
            },
            ".viewer li.loading.next>div": {
                "background-position": "0 center"
            },
            ".viewer li.loading.previous>div": {
                "background-position": "right center"
            },
            ".viewer .close": {
                color: "#fff",
                "text-decoration": "none",
                "font-weight": "bold",
                "font-size": "20px",
                position: "absolute",
                right: "15px",
                top: "15px",
                cursor: "pointer",
                display: "block",
                opacity: .6
            },
            ".viewer .close:hover": {
                opacity: 1
            },
            ".viewer img": {
                "max-width": "100%",
                "max-height": "100%",
                cursor: "pointer",
                position: "relative",
                height: "auto",
                width: "auto",
                "vertical-align": "middle",
                "-ms-interpolation-mode": "bicubic"
            },
            ".viewer .caption": {
                color: "#aaa",
                "text-shadow": "0 1px 2px rgba(0,0,0,0.8)",
                "line-height": "5em",
                position: "absolute",
                bottom: "0",
                left: "0",
                right: "0",
                visibility: "hidden"
            },
            ".viewer li.current .caption": {
                visibility: "visible"
            },
            ".viewer li.previous": {
                width: "10%"
            },
            ".viewer li.current": {
                width: "80%",
                display: "block"
            },
            ".viewer li.first.current": {
                "margin-left": "10%"
            },
            ".viewer li.last.current": {
                "margin-right": "10%"
            },
            ".viewer li.next": {
                width: "10%"
            },
            ".viewer li.previous>div": {
                left: "-50%",
                right: "50%"
            },
            ".viewer li.next>div": {
                right: "-50%",
                left: "50%"
            },
            ".viewer .next img, .viewer .previous img, .viewer .current img": {
                "-webkit-transform": "translateZ(0)"
            }
        },
        keys: {
            close: [27],
            prev: [37, 188],
            next: [39, 190]
        },
        loadAhead: 1,
        preload: !1,
        validateUrls: !0,
        onError: !1
    }, t);
    this.next = function () {
        this.show(v.next().find("img"))
    }, this.prev = function () {
        this.show(v.prev().find("img"))
    }, this.close = function () {
        p.hide(), y(document).unbind("keyup.view"), _.removeClass("viewing")
    }, this.open = function () {
        p.show(), y(document).unbind("keyup.view").bind("keyup.view", i), _.addClass("viewing"), this.sync()
    }, this.show = function (e) {
        "string" == typeof e && (e = n(e)), e.constructor == y && e.length > 0 && (p.find("li").removeClass("current next previous").removeAttr("title"), v = $parent = e.parents("li").addClass("current"), v.next().addClass("next").attr("title", "Next"), v.prev().addClass("previous").attr("title", "Previous"), this.sync(), o(v, t.loadAhead))
    }, this.sync = function () {
        var e = g.find("li.current>div").height(),
            t = e + "px";
        g.find("li>div>span").each(function () {
            y(this).css({
                "line-height": t
            })
        }), w._ie7 && (m.css({
            "max-height": t
        }), m.each(function () {
            var t = y(this);
            t.css({
                top: (e - t.height()) / 2 + "px"
            })
        }))
    }, this.next = function () {
        w.show(v.next().find("img"))
    }, this.prev = function () {
        w.show(v.prev().find("img"))
    }, f()
}

function goto_date(e) {
    var e = TimeUtils.parse_internal_date(e);
    return $("#date").val(TimeUtils.format_internal_date(e)), $("#filters").submit(), !1
}

function goto_date_range(e, t) {
    var e = TimeUtils.parse_internal_date(e),
        t = TimeUtils.parse_internal_date(t);
    return $("#date").val(TimeUtils.format_internal_date(e)), $("#date_end").val(TimeUtils.format_internal_date(t)), $("#filters").submit(), !1
}

function goto_week(e, t) {
    e = TimeUtils.parse_internal_date(e);
    var n, i;
    return void 0 === t ? (n = TimeUtils.format_internal_date(e.startOf("isoWeek")), i = TimeUtils.format_internal_date(e.endOf("isoWeek"))) : (t = toMomentIsoWeekday(t), n = TimeUtils.format_internal_date(e.startOfIsoWeek(t)), i = TimeUtils.format_internal_date(e.endOfIsoWeek(t))), $("#date").val(n), $("#date_end").val(i), $("#filters").submit(), !1
}

function setupDatePickers(e, t) {
    t = t || {};
    var n = [];
    return e.find(".datepicker > input").each(function () {
        var i, r = $(this),
            a = r.data("daterangepicker"),
            o = e.find(r.data("target")),
            s = o.length > 0,
            l = toMomentWeekday(r.data("startWeekOn")),
            c = [];
        a && a.remove(), i = s ? o.val() : r.data("date"), i || (i = r.data("default-date"));
        var u = r.closest(".modal .form-group, .modal, body");
        void 0 !== r.data("time-data-dates") && (c = r.data("time-data-dates").split(","));
        var d = {
            singleDatePicker: !0,
            opens: t.opens,
            startDate: TimeUtils.parse_internal_date(i),
            isCustomDate: function (e) {
                var t = moment(e._d).format("YYYY-MM-DD");
                return !c.includes(t) && Date.parse(t) <= Date.parse(f) ? "no-time-data" : void 0
            },
            locale: {
                format: TimeUtils.format_for("date"),
                firstDay: l
            },
            parentEl: u
        };
        r.is(".optional") && (d.autoUpdateInput = !1, r.on("apply.daterangepicker", function (e, t) {
            $(this).val(TimeUtils.format_date(t.startDate))
        }), r.on("cancel.daterangepicker", function (e, t) {
            $(this).val(""), o.val("")
        }), r.data("noClear") || (d.locale.cancelLabel = "Clear", d.template = '<div class="daterangepicker dropdown-menu"><div class="ranges"><div class="range_inputs"><button class="cancelBtn" type="button"></button></div></div><div class="calendar left"><div class="daterangepicker_input"><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div></div>', r.on("show.daterangepicker", function (e, t) {
            t.container.find(".ranges").show()
        })));
        var h = t.minDate || r.data("minDate");
        h && (d.minDate = TimeUtils.parse_internal_date(h));
        var f = t.maxDate || r.data("maxDate");
        f && (d.maxDate = TimeUtils.parse_internal_date(f)), r.daterangepicker(d, function (e, n, i) {
            s && o.val(TimeUtils.format_internal_date(e)).trigger("change"), $.isFunction(t.onchange) && t.onchange(r, e, n)
        }), n.push(r)
    }), $(".activities-index").length > 0 && $(".daterangepicker").addClass("activities-header-datepicker"), $(".daterangepicker").on("click", function (e) {
        e.preventDefault(), e.stopPropagation()
    }), n
}

function setupDateRangePickers(e, t) {
    t = t || {}, e.find(".hs_daterange_picker > input").each(function () {
        var n, i, r = $(this),
            a = e.find(r.data("target-start")),
            o = e.find(r.data("target-stop")),
            s = a.length > 0,
            l = o.length > 0,
            c = r.closest(".modal .form-group, .modal, body"),
            u = toMomentIsoWeekday(r.data("startWeekOn")),
            d = toMomentWeekday(r.data("startWeekOn")),
            h = {
                alwaysShowCalendars: !0,
                locale: {
                    format: TimeUtils.format_for("date"),
                    firstDay: d
                },
                linkedCalendars: !1,
                parentEl: c,
                template: '<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div><input class="input-mini" disabled="disabled" type="text" name="daterangepicker_start" value="" /></div><div class="calendar right"><div class="daterangepicker_input"><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div><input class="input-mini" disabled="disabled" type="text" name="daterangepicker_end" value="" /></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'
            };
        n = s ? a.val() : r.data("date"), n && (h.startDate = TimeUtils.parse_internal_date(n)), i = l ? o.val() : r.data("date"), i && (h.endDate = TimeUtils.parse_internal_date(i)), r.is(".optional") && (h.autoUpdateInput = !1, r.on("apply.daterangepicker", function (e, t) {
            $(this).val(TimeUtils.format_date(t.startDate) + " - " + TimeUtils.format_date(t.endDate)), s && !a.val() && a.val(TimeUtils.format_internal_date(t.startDate)), l && !o.val() && o.val(TimeUtils.format_internal_date(t.endDate))
        }), r.on("cancel.daterangepicker", function (e, t) {
            $(this).val(""), a.val(""), o.val("")
        }));
        var f = {
            Today: [moment(), moment()],
            Yesterday: [moment().subtract(1, "days"), moment().subtract(1, "days")],
            "Last 7 Days": [moment().subtract(6, "days"), moment()]
        };
        f["Last week"] = [moment().subtract(1, "weeks").startOfIsoWeek(u), moment().subtract(1, "weeks").endOfIsoWeek(u)];
        var p = r.data("excludeBiweeklyRange");
        p || (f["Last 2 weeks"] = [moment().subtract(2, "weeks").startOfIsoWeek(u), moment().subtract(1, "weeks").endOfIsoWeek(u)]);
        var m = r.data("excludeMonthlyRanges");
        m || (f["This Month"] = [moment().startOf("month"), moment().endOf("month")], f["Last Month"] = [moment().subtract(1, "month").startOf("month"), moment().subtract(1, "month").endOf("month")]), h.ranges = f;
        var g = r.data("minDate");
        g && (h.minDate = TimeUtils.parse_internal_date(g));
        var v = r.data("maxDate");
        v && (h.maxDate = TimeUtils.parse_internal_date(v));
        var y = r.data("dateLimit");
        y && (h.dateLimit = {
            days: y - 1
        }), r.daterangepicker(h, function (e, n, i) {
            s && a.val(TimeUtils.format_internal_date(e)).trigger("change"), l && o.val(TimeUtils.format_internal_date(n)).trigger("change"), $.isFunction(t.onchange) && t.onchange(r, e, n)
        })
    })
}

function setupTimeDuration(e, t) {
    t = t || {}, e.find(".duration_editor > input, .duration_editor > .field_with_errors > input").each(function () {
        var n, i = $(this),
            r = i.data("mounted"),
            a = e.find(i.data("target")),
            o = i.data("target-format") || "s",
            s = i.data("with-seconds"),
            l = a.length > 0;
        switch (r ? i.off("focus").off("change").off("keydown") : i.data("pristine", !0), n = l ? a.val() : i.data("duration"), n = parseFloat(n), o) {
            case "dh":
                n = moment.duration(n, "hours");
                break;
            case "m":
                n = moment.duration(n, "minutes");
                break;
            case "s":
            default:
                n = moment.duration(n, "seconds")
        }
        i.val(TimeUtils.format_duration(n, s)), i.on("keydown", function () {
            $(this).data("pristine", !1)
        }).on("focus", function () {
            $(this).select(), $.isFunction(t.onfocus) && t.onfocus(i)
        }).on("change", function () {
            var e = TimeInput.parse_duration(i.val());
            if (e) {
                var n;
                switch (o) {
                    case "h":
                        e.subtract(e.seconds(), "s"), e.subtract(e.minutes(), "m"), n = "asHours";
                        break;
                    case "dh":
                        n = "asHours";
                        break;
                    case "m":
                        e.subtract(e.seconds(), "s"), n = "asMinutes";
                        break;
                    case "s":
                    default:
                        n = "asSeconds"
                }
                a.val(e[n]()), i.val(TimeUtils.format_duration(e, s))
            } else a.val("");
            $.isFunction(t.onchange) && t.onchange(i, e)
        }), i.data("mounted", !0)
    })
}

function AddSelect2Events(e) {
    e.on("select2:unselecting", function (e) {
        $(this).data("unselecting", !0)
    }).on("select2:open", function (e) {
        $(this).data("unselecting") && $(this).select2("close").removeData("unselecting")
    }).on("select2:select", function (e) {
        if ($(this).data("select2").options.options.multiple) {
            var t = $(this).data("select2").selection.$search;
            t.val() && t.val(null).trigger("input")
        }
    })
}

function setupForms(e, t) {
    t = t || {};
    var n = $.extend({
        width: "100%"
    }, t.select2),
        i = $(".select2", e).each(function () {
            var e = $(this),
                t = {},
                i = e.data("select2Callbacks");
            if (i)
                for (var r in i) t[r] = select2Callbacks.find(i[r]);
            var a = $.extend({}, n, t);
            a.hasOwnProperty("closeOnSelect") || e.data("close-on-select") || !a.multiple && !e.attr("multiple") || (a.closeOnSelect = !1), !a.multiple && !e.attr("multiple") || e.data("placeholder") && e.attr("placeholder") || (a.placeholder = ""), e.select2(a)
        });
    AddSelect2Events(i), $("button.clipboard, a.clipboard", e).clipboard()
}

function setupTimeEditor(e, t) {
    t = t || {}, e.find(".time_editor > input").each(function () {
        var n, i = $(this),
            r = i.data("mounted"),
            a = e.find(i.data("target")),
            o = i.data("with-seconds"),
            s = a.length > 0;
        r && i.off("focus").off("change"), n = s ? a.val() : i.data("duration"), n = TimeUtils.parse_internal_time(n), i.val(TimeUtils.format_time(n, o)), i.on("focus", function () {
            $(this).select()
        }).on("change", function (e) {
            var n = TimeInput.parse_time(i.val());
            a.val(TimeUtils.format_internal_time(n)), i.val(TimeUtils.format_time(n, o)), $.isFunction(t.onchange) && t.onchange(i, n, e)
        }), i.data("mounted", !0)
    })
}

function dismissFormInputError(e) {
    e.closest(".form-group").removeClass("has-error");
    var t = e.siblings(".help-block");
    t.length && t.remove()
}

function addFormInputError(e, t) {
    e.closest(".form-group").addClass("has-error");
    var n = e.siblings(".help-block");
    n.length || e.parent().append('<span class="help-block text-danger">' + t + "</span>")
}

function setupSelect2AddRemoveLinks(e) {
    e.on("click", ".select-all", function () {
        var e = $(this).data("target");
        return $(e).find("option").prop("selected", !0).end().trigger("change"), !1
    }), e.on("click", ".select-none", function () {
        var e = $(this).data("target");
        return $(e).find("option").prop("selected", !1).end().trigger("change"), !1
    })
}

function setupLinkedSelect2Fields(e, t) {
    e.on("change", t, function () {
        var n = this,
            i = $(n).val() || [],
            r = e.find(t);
        r.each(function (e) {
            var t, r = $(this);
            if (this !== n && (t = r.val())) {
                var a = t.filter(function (e) {
                    return i.indexOf(e) < 0
                });
                a.length !== t.length && r.val(a).trigger("change")
            }
        })
    })
}

function selectAllCheckboxes(e) {
    var t = e.find(".select-all");
    t.on("click", function (t) {
        t.stopPropagation();
        var n = ($(this), $(this).data("target")),
            i = e.find(n),
            r = i.filter(":not(:checked)").length;
        r > 0 ? i.prop("checked", !0).trigger("change") : i.prop("checked", !1).trigger("change")
    }), $.each(t, function (t, n) {
        var i = $(n),
            r = i.data("target"),
            a = e.find(r);
        a.on("click", function (e) {
            e.stopPropagation();
            var t = a.filter(":checked").length,
                n = a.filter(":not(:checked)").length;
            0 == t ? i.prop("checked", !1).prop("indeterminate", !1) : 0 == n ? i.prop("checked", !0).prop("indeterminate", !1) : i.prop("checked", !1).prop("indeterminate", !0)
        })
    })
}

function taskLoader(e, t, n) {
    var i = e.find(n),
        r = i.val(),
        a = e.find(t),
        o = i.data("selectText") || "Select a to-do",
        s = i.data("selectBlockedText") || "To-dos are not enabled for this project",
        l = i.data("noTaskText") || "No to-do",
        c = i.data("tooltipText") || "Please select a project first",
        u = {
            allowClear: !0,
            language: {
                noResults: function () {
                    return l
                }
            },
            templateResult: this.formatOption,
            ajax: {
                url: "/tasks/search",
                data: function (t) {
                    return {
                        project_id: a.val(),
                        user_id: e.data("user-id"),
                        task_id: r,
                        q: t.term,
                        page: t.page
                    }
                },
                processResults: function (e) {
                    var t = e.results.map(function (e) {
                        return {
                            id: e.id,
                            text: e.text
                        }
                    });
                    return e.integrated || e.pagination.more || !e.allow_add_button || (t.push({
                        id: "new_task",
                        text: '<div class="dropdown-new-item">+ Add a to-do</div>'
                    }), TimeEntryUtils.addNewTasksToSelection("#time_entry_task_id")), {
                        results: t,
                        pagination: e.pagination
                    }
                },
                dataType: "json",
                delay: 250
            }
        };
    a.val() && !a.find(":selected").data().data.tasks_enabled && (i.data("placeholder", s), i.prop("disabled", !0)), i.select2(u);
    var d = i.next(".select2-container");
    a.val() || (d.tooltip({
        title: c
    }), i.prop("disabled", !0)), a.on("select2:select", function (e) {
        var t = e.params.data.selected,
            n = e.params.data.tasks_enabled;
        i.data("placeholder", t && !n ? s : o), i.select2(u), i.prop("disabled", !(t && n)), i.val("").trigger("change.select2"), d = i.next(".select2-container"), t ? d.tooltip("destroy") : d.tooltip({
            title: c
        })
    })
}

function formatOption(e) {
    return "new_task" === e.id ? $(e.text) : e.text
}

function ToggleCheckboxes(e, t) {
    var n = $(t),
        i = $(e + " input[type=checkbox]:enabled");
    n.is(":checked") ? i.each(function () {
        $(this).prop("checked", !0)
    }) : i.each(function () {
        $(this).prop("checked", !1)
    })
}

function ajaxFailAlert(e) {
    var t = e.responseJSON;
    t && t.alert && alert(t.alert)
}

function is_touch_device() {
    return "ontouchstart" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0
}

function toMomentWeekday(e) {
    var t = toMomentWeekday.invertServerWeekdays[e || 0];
    return void 0 !== t ? t : 1
}

function toMomentIsoWeekday(e) {
    var t = toMomentIsoWeekday.invertServerWeekdays[e || 0];
    return t || 1
}

function _classCallCheck(e, t) {
    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
}

function __confirmHolidaySubmit(e) {
    var t = $("#new-holiday-form"),
        n = t.find('input[type=hidden][name="holiday[remove_shifts]"]'),
        i = $(".holiday-warning-step-btn:not(.step-back)");
    i.attr("disabled", !0), e === !0 ? (n.val(1), i.eq(0).html("Saving...")) : (n.val(0), i.eq(1).html("Saving...")), t.submit()
}

function __closeHolidayConfirmationStep() {
    $(".overlap-content").addClass("hidden"), $(".default-content").removeClass("hidden")
}

function LeadToggleForm(e) {
    this.form = e, this.checkbox = e.find("input:checkbox"), this.member_id = e.attr("id"), this.role_select = e.closest("table").find("tr#" + this.member_id + " select"), this.manager_role = e.data("manager-role"), this.lead_tooltip = this.role_select.data("lead-tooltip"), this.undoToggle = function (e) {
        e.prop("checked", !e.prop("checked"))
    }, this.submitToggleForm = function () {
        this.form.submit()
    }, this.disableRoleSelect = function () {
        this.role_select.attr("disabled", !0), this.role_select.parent().attr("data-original-title", this.lead_tooltip)
    }, this.enableRoleSelect = function () {
        this.role_select.attr("disabled", !1), this.role_select.parent().attr("data-original-title", "")
    }, this.selectManagerRole = function () {
        this.role_select.val(this.manager_role).trigger("change.select2"), this.animateRoleSelect()
    }, this.animateRoleSelect = function () {
        var e = this.role_select.parent(),
            t = $(e.find("span.select2"));
        t.addClass("select2-container--focus"), setTimeout(function () {
            t.removeClass("select2-container--focus")
        }, 1e3)
    }, this.bind = function () {
        var e = this;
        this.checkbox.on("change", function (t) {
            e.submitToggleForm(t)
        }), this.form.submit(function (t) {
            t.preventDefault();
            var n = e.form.attr("action"),
                i = e.form.attr("method"),
                r = e.checkbox.prop("checked") ? 1 : 0;
            $.ajax(n, {
                type: i,
                dataType: "json",
                data: {
                    "team_member[lead]": r
                }
            }).done(function (t) {
                t.success ? t.role_changed ? (e.disableRoleSelect(), e.selectManagerRole()) : e.enableRoleSelect() : ($.jGrowl("There was an error, please try again later."), e.undoToggle(e.checkbox))
            }).fail(function (t) {
                $.jGrowl("There was an error, please try again later."), e.undoToggle(e.checkbox)
            })
        })
    }, this.bind()
}

function timesheet_toggle_column(e, t) {
    e.preventDefault();
    var n = $("form#filters"),
        i = $("input#filters_show_" + t);
    i.size() > 0 ? i.remove() : n.append('<input type="hidden" name="filters[show_' + t + ']" id="filters_show_' + t + '" value="true">'), n.submit()
}

function __confirmTimeOffRequestSubmit(e) {
    var t = $("#time-off-request-form");
    t.length || (t = $("#status-time-off-request-form"));
    var n = t.find('input[name="time_off_request[remove_shifts]"]'),
        i = $(".time-off-request-warning-step-btn:not(.step-back)");
    i.attr("disabled", !0), e === !0 ? (n.val(1), i.eq(0).html("Saving...")) : (n.val(0), i.eq(1).html("Saving...")), $.ajax({
        url: t.attr("action"),
        method: t.attr("method"),
        data: t.serialize(),
        dataType: "json"
    }).success(function (e) {
        "reload" === e.action ? document.location.reload() : onError(e, i)
    }).error(function (e) {
        onError(e, i)
    })
}

function __closeTimeOffRequestConfirmationStep() {
    var e = $(".modal > .modal-dialog");
    e.addClass(e.data("modal-size")), $(".overlap-content").addClass("hidden"), $(".default-content").removeClass("hidden")
}

function resetUpload(e) {
    var t = e.data("target"),
        n = e.data("imgbase"),
        i = e.data("currentimg");
    $("#help-" + t).text(""), $("#" + t).val(""), $("#" + n).attr("src", i)
}

function setupFileUpload(e) {
    var t = $("[type=file]", e);
    if (void 0 === t.data("currentimg")) {
        var n = $("#" + t.data("imgbase")).attr("src");
        t.data("currentimg", n)
    }
    var i = $(document);
    t.data("dropzone") && (i = $("#" + t.data("dropzone")), i.addClass("fileupload_dropzone")), t.fileupload({
        dropZone: i,
        add: function (t, n) {
            var i = $(this).data("progressbar"),
                r = $("#" + i).removeClass("hidden"),
                a = /^image\/(jpe?g|png)$/i;
            if (n.originalFiles[0].type.length && !a.test(n.originalFiles[0].type)) resetUpload($(this)), r.addClass("hidden"), AjaxDialog.displayNotifications({
                alert: "Please upload only images (jpg or png files only)."
            }, e);
            else {
                var o = $(this).data("url");
                $.getJSON(o, function (t) {
                    n.formData = t.fields, n.url = t.url, n.getUrl = t.get_url, n.submit(), $(e).find(".notification-area").removeClass("show")
                })
            }
        },
        progress: function (e, t) {
            var n = $(this).data("progressbar"),
                i = $("#" + n);
            if (0 !== i.length) {
                var r = parseInt(t.loaded / t.total * 100, 10);
                i.find(".progress-bar").css("width", r.toString() + "%").attr("aria-valuenow", r)
            }
        },
        always: function (e, t) {
            var n = $(this).data("progressbar");
            $("#" + n).addClass("hidden")
        },
        done: function (t, n) {
            var i = n.formData.key.match(/\w+$/)[0],
                r = {
                    id: i,
                    storage: "cache",
                    metadata: {
                        size: n.files[0].size,
                        filename: n.files[0].name,
                        mime_type: n.files[0].type
                    }
                };
            if (r.metadata.size > 1048576) resetUpload($(this)), AjaxDialog.displayNotifications({
                alert: "Please upload images smaller than 1MB."
            }, e);
            else {
                var a = $(this).data("target"),
                    o = $(this).data("imgbase");
                if (o) {
                    var s = $("#" + o),
                        l = s.attr("src"),
                        c = n.getUrl;
                    c || (c = n.url + "/" + n.formData.key), s.attr("src", c), s.on("error", function () {
                        resetUpload(s.attr({
                            "data-target": a,
                            "data-currentimg": l,
                            "data-imgbase": o
                        })), AjaxDialog.displayNotifications({
                            alert: "The image file is invalid."
                        }, e), s.off()
                    })
                }
                $("#" + a).val(JSON.stringify(r)), $("#help-" + a).text(n.files[0].name), $(this).data("triggerChange") && $("#" + a).trigger("change")
            }
        }
    }), $(document).on("drop", function (e) {
        e.preventDefault()
    }), $(document).on("dragover", function (e) {
        e.preventDefault();
        var t = $(".fileupload_dropzone"),
            n = window.dropZoneTimeout;
        n ? clearTimeout(n) : t.addClass("in");
        var i = $(e.target).closest(t);
        t.not(i).removeClass("hover"), i.addClass("hover"), window.dropZoneTimeout = setTimeout(function () {
            window.dropZoneTimeout = null, t.removeClass("in hover")
        }, 100)
    }), $(".clear-upload", e).on("click", function () {
        var e = t.data("target"),
            n = t.data("imgbase"),
            i = $("#" + n);
        $("#" + e).val("delete"), $("#help-" + e).empty(), i.data("blankImage") && $(i).attr("src", i.data("blankImage"))
    })
}

function setupDismissWelcomeMatLinks(e) {
    $(e).on("click", ".btn-dismiss-welcome-mats-setup", function (e) {
        e.stopImmediatePropagation(), e.preventDefault();
        var t = $(this),
            n = t.data("url"),
            i = t.data("dialogUrl");
        n && $.ajax({
            url: n,
            method: "POST",
            dataType: "json"
        }).done(function (e) {
            i ? (t.closest(".modal").modal("hide"), AjaxDialog.run(i)) : window.location.reload(!0)
        })
    })
}

function setupEnableSettingAlertLinks(e) {
    $(e).on("click", ".btn-enable-setting-alert-link", function (e) {
        e.preventDefault();
        var t = $(this).data("url");
        t && $.ajax({
            url: t,
            method: "POST",
            dataType: "json"
        }).done(function (e) {
            window.location.reload(!0)
        })
    })
} ! function (e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e)
    } : t(e)
}("undefined" != typeof window ? window : this, function (e, t) {
    function n(e) {
        var t = !!e && "length" in e && e.length,
            n = ae.type(e);
        return "function" === n || ae.isWindow(e) ? !1 : "array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
    }

    function i(e, t, n) {
        if (ae.isFunction(t)) return ae.grep(e, function (e, i) {
            return !!t.call(e, i, e) !== n
        });
        if (t.nodeType) return ae.grep(e, function (e) {
            return e === t !== n
        });
        if ("string" == typeof t) {
            if (me.test(t)) return ae.filter(t, e, n);
            t = ae.filter(t, e)
        }
        return ae.grep(e, function (e) {
            return J.call(t, e) > -1 !== n
        })
    }

    function r(e, t) {
        for (;
            (e = e[t]) && 1 !== e.nodeType;);
        return e
    }

    function a(e) {
        var t = {};
        return ae.each(e.match(_e) || [], function (e, n) {
            t[n] = !0
        }), t
    }

    function o() {
        X.removeEventListener("DOMContentLoaded", o), e.removeEventListener("load", o), ae.ready()
    }

    function s() {
        this.expando = ae.expando + s.uid++
    }

    function l(e, t, n) {
        var i;
        if (void 0 === n && 1 === e.nodeType)
            if (i = "data-" + t.replace(Ee, "-$&").toLowerCase(), n = e.getAttribute(i), "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : Te.test(n) ? ae.parseJSON(n) : n
                } catch (r) { }
                Ae.set(e, t, n)
            } else n = void 0;
        return n
    }

    function c(e, t, n, i) {
        var r, a = 1,
            o = 20,
            s = i ? function () {
                return i.cur()
            } : function () {
                return ae.css(e, t, "")
            },
            l = s(),
            c = n && n[3] || (ae.cssNumber[t] ? "" : "px"),
            u = (ae.cssNumber[t] || "px" !== c && +l) && $e.exec(ae.css(e, t));
        if (u && u[3] !== c) {
            c = c || u[3], n = n || [], u = +l || 1;
            do a = a || ".5", u /= a, ae.style(e, t, u + c); while (a !== (a = s() / l) && 1 !== a && --o)
        }
        return n && (u = +u || +l || 0, r = n[1] ? u + (n[1] + 1) * n[2] : +n[2], i && (i.unit = c, i.start = u, i.end = r)), r
    }

    function u(e, t) {
        var n = "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName(t || "*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
        return void 0 === t || t && ae.nodeName(e, t) ? ae.merge([e], n) : n
    }

    function d(e, t) {
        for (var n = 0, i = e.length; i > n; n++) Se.set(e[n], "globalEval", !t || Se.get(t[n], "globalEval"))
    }

    function h(e, t, n, i, r) {
        for (var a, o, s, l, c, h, f = t.createDocumentFragment(), p = [], m = 0, g = e.length; g > m; m++)
            if (a = e[m], a || 0 === a)
                if ("object" === ae.type(a)) ae.merge(p, a.nodeType ? [a] : a);
                else if (je.test(a)) {
                    for (o = o || f.appendChild(t.createElement("div")), s = (Pe.exec(a) || ["", ""])[1].toLowerCase(), l = Oe[s] || Oe._default, o.innerHTML = l[1] + ae.htmlPrefilter(a) + l[2], h = l[0]; h--;) o = o.lastChild;
                    ae.merge(p, o.childNodes), o = f.firstChild, o.textContent = ""
                } else p.push(t.createTextNode(a));
        for (f.textContent = "", m = 0; a = p[m++];)
            if (i && ae.inArray(a, i) > -1) r && r.push(a);
            else if (c = ae.contains(a.ownerDocument, a), o = u(f.appendChild(a), "script"), c && d(o), n)
                for (h = 0; a = o[h++];) He.test(a.type || "") && n.push(a);
        return f
    }

    function f() {
        return !0
    }

    function p() {
        return !1
    }

    function m() {
        try {
            return X.activeElement
        } catch (e) { }
    }

    function g(e, t, n, i, r, a) {
        var o, s;
        if ("object" == typeof t) {
            "string" != typeof n && (i = i || n, n = void 0);
            for (s in t) g(e, s, n, i, t[s], a);
            return e
        }
        if (null == i && null == r ? (r = n, i = n = void 0) : null == r && ("string" == typeof n ? (r = i, i = void 0) : (r = i, i = n, n = void 0)), r === !1) r = p;
        else if (!r) return e;
        return 1 === a && (o = r, r = function (e) {
            return ae().off(e), o.apply(this, arguments)
        }, r.guid = o.guid || (o.guid = ae.guid++)), e.each(function () {
            ae.event.add(this, t, r, i, n)
        })
    }

    function v(e, t) {
        return ae.nodeName(e, "table") && ae.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
    }

    function y(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
    }

    function b(e) {
        var t = Ue.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }

    function w(e, t) {
        var n, i, r, a, o, s, l, c;
        if (1 === t.nodeType) {
            if (Se.hasData(e) && (a = Se.access(e), o = Se.set(t, a), c = a.events)) {
                delete o.handle, o.events = {};
                for (r in c)
                    for (n = 0, i = c[r].length; i > n; n++) ae.event.add(t, r, c[r][n])
            }
            Ae.hasData(e) && (s = Ae.access(e), l = ae.extend({}, s), Ae.set(t, l))
        }
    }

    function _(e, t) {
        var n = t.nodeName.toLowerCase();
        "input" === n && Ie.test(e.type) ? t.checked = e.checked : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
    }

    function x(e, t, n, i) {
        t = Z.apply([], t);
        var r, a, o, s, l, c, d = 0,
            f = e.length,
            p = f - 1,
            m = t[0],
            g = ae.isFunction(m);
        if (g || f > 1 && "string" == typeof m && !ie.checkClone && We.test(m)) return e.each(function (r) {
            var a = e.eq(r);
            g && (t[0] = m.call(this, r, a.html())), x(a, t, n, i)
        });
        if (f && (r = h(t, e[0].ownerDocument, !1, e, i), a = r.firstChild, 1 === r.childNodes.length && (r = a), a || i)) {
            for (o = ae.map(u(r, "script"), y), s = o.length; f > d; d++) l = r, d !== p && (l = ae.clone(l, !0, !0), s && ae.merge(o, u(l, "script"))), n.call(e[d], l, d);
            if (s)
                for (c = o[o.length - 1].ownerDocument, ae.map(o, b), d = 0; s > d; d++) l = o[d], He.test(l.type || "") && !Se.access(l, "globalEval") && ae.contains(c, l) && (l.src ? ae._evalUrl && ae._evalUrl(l.src) : ae.globalEval(l.textContent.replace(qe, "")))
        }
        return e
    }

    function k(e, t, n) {
        for (var i, r = t ? ae.filter(t, e) : e, a = 0; null != (i = r[a]); a++) n || 1 !== i.nodeType || ae.cleanData(u(i)), i.parentNode && (n && ae.contains(i.ownerDocument, i) && d(u(i, "script")), i.parentNode.removeChild(i));
        return e
    }

    function C(e, t) {
        var n = ae(t.createElement(e)).appendTo(t.body),
            i = ae.css(n[0], "display");
        return n.detach(), i
    }

    function S(e) {
        var t = X,
            n = Ye[e];
        return n || (n = C(e, t), "none" !== n && n || (Ge = (Ge || ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = Ge[0].contentDocument, t.write(), t.close(), n = C(e, t), Ge.detach()), Ye[e] = n), n
    }

    function A(e, t, n) {
        var i, r, a, o, s = e.style;
        return n = n || Ke(e), o = n ? n.getPropertyValue(t) || n[t] : void 0, "" !== o && void 0 !== o || ae.contains(e.ownerDocument, e) || (o = ae.style(e, t)), n && !ie.pixelMarginRight() && Xe.test(o) && Ve.test(t) && (i = s.width, r = s.minWidth, a = s.maxWidth, s.minWidth = s.maxWidth = s.width = o, o = n.width, s.width = i, s.minWidth = r, s.maxWidth = a), void 0 !== o ? o + "" : o
    }

    function T(e, t) {
        return {
            get: function () {
                return e() ? void delete this.get : (this.get = t).apply(this, arguments)
            }
        }
    }

    function E(e) {
        if (e in it) return e;
        for (var t = e[0].toUpperCase() + e.slice(1), n = nt.length; n--;)
            if (e = nt[n] + t, e in it) return e
    }

    function D(e, t, n) {
        var i = $e.exec(t);
        return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : t
    }

    function $(e, t, n, i, r) {
        for (var a = n === (i ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; 4 > a; a += 2) "margin" === n && (o += ae.css(e, n + Me[a], !0, r)), i ? ("content" === n && (o -= ae.css(e, "padding" + Me[a], !0, r)), "margin" !== n && (o -= ae.css(e, "border" + Me[a] + "Width", !0, r))) : (o += ae.css(e, "padding" + Me[a], !0, r), "padding" !== n && (o += ae.css(e, "border" + Me[a] + "Width", !0, r)));
        return o
    }

    function M(e, t, n) {
        var i = !0,
            r = "width" === t ? e.offsetWidth : e.offsetHeight,
            a = Ke(e),
            o = "border-box" === ae.css(e, "boxSizing", !1, a);
        if (0 >= r || null == r) {
            if (r = A(e, t, a), (0 > r || null == r) && (r = e.style[t]), Xe.test(r)) return r;
            i = o && (ie.boxSizingReliable() || r === e.style[t]), r = parseFloat(r) || 0
        }
        return r + $(e, t, n || (o ? "border" : "content"), i, a) + "px"
    }

    function R(e, t) {
        for (var n, i, r, a = [], o = 0, s = e.length; s > o; o++) i = e[o], i.style && (a[o] = Se.get(i, "olddisplay"), n = i.style.display, t ? (a[o] || "none" !== n || (i.style.display = ""), "" === i.style.display && Re(i) && (a[o] = Se.access(i, "olddisplay", S(i.nodeName)))) : (r = Re(i), "none" === n && r || Se.set(i, "olddisplay", r ? n : ae.css(i, "display"))));
        for (o = 0; s > o; o++) i = e[o], i.style && (t && "none" !== i.style.display && "" !== i.style.display || (i.style.display = t ? a[o] || "" : "none"));
        return e
    }

    function I(e, t, n, i, r) {
        return new I.prototype.init(e, t, n, i, r)
    }

    function P() {
        return e.setTimeout(function () {
            rt = void 0
        }), rt = ae.now()
    }

    function H(e, t) {
        var n, i = 0,
            r = {
                height: e
            };
        for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = Me[i], r["margin" + n] = r["padding" + n] = e;
        return t && (r.opacity = r.width = e), r
    }

    function O(e, t, n) {
        for (var i, r = (z.tweeners[t] || []).concat(z.tweeners["*"]), a = 0, o = r.length; o > a; a++)
            if (i = r[a].call(n, t, e)) return i
    }

    function j(e, t, n) {
        var i, r, a, o, s, l, c, u, d = this,
            h = {},
            f = e.style,
            p = e.nodeType && Re(e),
            m = Se.get(e, "fxshow");
        n.queue || (s = ae._queueHooks(e, "fx"), null == s.unqueued && (s.unqueued = 0, l = s.empty.fire, s.empty.fire = function () {
            s.unqueued || l()
        }), s.unqueued++, d.always(function () {
            d.always(function () {
                s.unqueued--, ae.queue(e, "fx").length || s.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [f.overflow, f.overflowX, f.overflowY], c = ae.css(e, "display"), u = "none" === c ? Se.get(e, "olddisplay") || S(e.nodeName) : c, "inline" === u && "none" === ae.css(e, "float") && (f.display = "inline-block")), n.overflow && (f.overflow = "hidden", d.always(function () {
            f.overflow = n.overflow[0], f.overflowX = n.overflow[1], f.overflowY = n.overflow[2]
        }));
        for (i in t)
            if (r = t[i], ot.exec(r)) {
                if (delete t[i], a = a || "toggle" === r, r === (p ? "hide" : "show")) {
                    if ("show" !== r || !m || void 0 === m[i]) continue;
                    p = !0
                }
                h[i] = m && m[i] || ae.style(e, i)
            } else c = void 0;
        if (ae.isEmptyObject(h)) "inline" === ("none" === c ? S(e.nodeName) : c) && (f.display = c);
        else {
            m ? "hidden" in m && (p = m.hidden) : m = Se.access(e, "fxshow", {}), a && (m.hidden = !p), p ? ae(e).show() : d.done(function () {
                ae(e).hide()
            }), d.done(function () {
                var t;
                Se.remove(e, "fxshow");
                for (t in h) ae.style(e, t, h[t])
            });
            for (i in h) o = O(p ? m[i] : 0, i, d), i in m || (m[i] = o.start, p && (o.end = o.start, o.start = "width" === i || "height" === i ? 1 : 0))
        }
    }

    function N(e, t) {
        var n, i, r, a, o;
        for (n in e)
            if (i = ae.camelCase(n), r = t[i], a = e[n], ae.isArray(a) && (r = a[1], a = e[n] = a[0]), n !== i && (e[i] = a, delete e[n]), o = ae.cssHooks[i], o && "expand" in o) {
                a = o.expand(a), delete e[i];
                for (n in a) n in e || (e[n] = a[n], t[n] = r)
            } else t[i] = r
    }

    function z(e, t, n) {
        var i, r, a = 0,
            o = z.prefilters.length,
            s = ae.Deferred().always(function () {
                delete l.elem
            }),
            l = function () {
                if (r) return !1;
                for (var t = rt || P(), n = Math.max(0, c.startTime + c.duration - t), i = n / c.duration || 0, a = 1 - i, o = 0, l = c.tweens.length; l > o; o++) c.tweens[o].run(a);
                return s.notifyWith(e, [c, a, n]), 1 > a && l ? n : (s.resolveWith(e, [c]), !1)
            },
            c = s.promise({
                elem: e,
                props: ae.extend({}, t),
                opts: ae.extend(!0, {
                    specialEasing: {},
                    easing: ae.easing._default
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: rt || P(),
                duration: n.duration,
                tweens: [],
                createTween: function (t, n) {
                    var i = ae.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                    return c.tweens.push(i), i
                },
                stop: function (t) {
                    var n = 0,
                        i = t ? c.tweens.length : 0;
                    if (r) return this;
                    for (r = !0; i > n; n++) c.tweens[n].run(1);
                    return t ? (s.notifyWith(e, [c, 1, 0]), s.resolveWith(e, [c, t])) : s.rejectWith(e, [c, t]), this
                }
            }),
            u = c.props;
        for (N(u, c.opts.specialEasing); o > a; a++)
            if (i = z.prefilters[a].call(c, e, u, c.opts)) return ae.isFunction(i.stop) && (ae._queueHooks(c.elem, c.opts.queue).stop = ae.proxy(i.stop, i)), i;
        return ae.map(u, O, c), ae.isFunction(c.opts.start) && c.opts.start.call(e, c), ae.fx.timer(ae.extend(l, {
            elem: e,
            anim: c,
            queue: c.opts.queue
        })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
    }

    function L(e) {
        return e.getAttribute && e.getAttribute("class") || ""
    }

    function F(e) {
        return function (t, n) {
            "string" != typeof t && (n = t, t = "*");
            var i, r = 0,
                a = t.toLowerCase().match(_e) || [];
            if (ae.isFunction(n))
                for (; i = a[r++];) "+" === i[0] ? (i = i.slice(1) || "*", (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n)
        }
    }

    function B(e, t, n, i) {
        function r(s) {
            var l;
            return a[s] = !0, ae.each(e[s] || [], function (e, s) {
                var c = s(t, n, i);
                return "string" != typeof c || o || a[c] ? o ? !(l = c) : void 0 : (t.dataTypes.unshift(c), r(c), !1)
            }), l
        }
        var a = {},
            o = e === At;
        return r(t.dataTypes[0]) || !a["*"] && r("*")
    }

    function W(e, t) {
        var n, i, r = ae.ajaxSettings.flatOptions || {};
        for (n in t) void 0 !== t[n] && ((r[n] ? e : i || (i = {}))[n] = t[n]);
        return i && ae.extend(!0, e, i), e
    }

    function U(e, t, n) {
        for (var i, r, a, o, s = e.contents, l = e.dataTypes;
            "*" === l[0];) l.shift(), void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
        if (i)
            for (r in s)
                if (s[r] && s[r].test(i)) {
                    l.unshift(r);
                    break
                } if (l[0] in n) a = l[0];
        else {
            for (r in n) {
                if (!l[0] || e.converters[r + " " + l[0]]) {
                    a = r;
                    break
                }
                o || (o = r)
            }
            a = a || o
        }
        return a ? (a !== l[0] && l.unshift(a), n[a]) : void 0
    }

    function q(e, t, n, i) {
        var r, a, o, s, l, c = {},
            u = e.dataTypes.slice();
        if (u[1])
            for (o in e.converters) c[o.toLowerCase()] = e.converters[o];
        for (a = u.shift(); a;)
            if (e.responseFields[a] && (n[e.responseFields[a]] = t), !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = a, a = u.shift())
                if ("*" === a) a = l;
                else if ("*" !== l && l !== a) {
                    if (o = c[l + " " + a] || c["* " + a], !o)
                        for (r in c)
                            if (s = r.split(" "), s[1] === a && (o = c[l + " " + s[0]] || c["* " + s[0]])) {
                                o === !0 ? o = c[r] : c[r] !== !0 && (a = s[0], u.unshift(s[1]));
                                break
                            } if (o !== !0)
                        if (o && e["throws"]) t = o(t);
                        else try {
                            t = o(t)
                        } catch (d) {
                            return {
                                state: "parsererror",
                                error: o ? d : "No conversion from " + l + " to " + a
                            }
                        }
                }
        return {
            state: "success",
            data: t
        }
    }

    function G(e, t, n, i) {
        var r;
        if (ae.isArray(t)) ae.each(t, function (t, r) {
            n || $t.test(e) ? i(e, r) : G(e + "[" + ("object" == typeof r && null != r ? t : "") + "]", r, n, i)
        });
        else if (n || "object" !== ae.type(t)) i(e, t);
        else
            for (r in t) G(e + "[" + r + "]", t[r], n, i)
    }

    function Y(e) {
        return ae.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
    }
    var V = [],
        X = e.document,
        K = V.slice,
        Z = V.concat,
        Q = V.push,
        J = V.indexOf,
        ee = {},
        te = ee.toString,
        ne = ee.hasOwnProperty,
        ie = {},
        re = "2.2.4",
        ae = function (e, t) {
            return new ae.fn.init(e, t)
        },
        oe = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        se = /^-ms-/,
        le = /-([\da-z])/gi,
        ce = function (e, t) {
            return t.toUpperCase()
        };
    ae.fn = ae.prototype = {
        jquery: re,
        constructor: ae,
        selector: "",
        length: 0,
        toArray: function () {
            return K.call(this)
        },
        get: function (e) {
            return null != e ? 0 > e ? this[e + this.length] : this[e] : K.call(this)
        },
        pushStack: function (e) {
            var t = ae.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        },
        each: function (e) {
            return ae.each(this, e)
        },
        map: function (e) {
            return this.pushStack(ae.map(this, function (t, n) {
                return e.call(t, n, t)
            }))
        },
        slice: function () {
            return this.pushStack(K.apply(this, arguments))
        },
        first: function () {
            return this.eq(0)
        },
        last: function () {
            return this.eq(-1)
        },
        eq: function (e) {
            var t = this.length,
                n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
        },
        end: function () {
            return this.prevObject || this.constructor()
        },
        push: Q,
        sort: V.sort,
        splice: V.splice
    }, ae.extend = ae.fn.extend = function () {
        var e, t, n, i, r, a, o = arguments[0] || {},
            s = 1,
            l = arguments.length,
            c = !1;
        for ("boolean" == typeof o && (c = o, o = arguments[s] || {}, s++), "object" == typeof o || ae.isFunction(o) || (o = {}), s === l && (o = this, s--); l > s; s++)
            if (null != (e = arguments[s]))
                for (t in e) n = o[t], i = e[t], o !== i && (c && i && (ae.isPlainObject(i) || (r = ae.isArray(i))) ? (r ? (r = !1, a = n && ae.isArray(n) ? n : []) : a = n && ae.isPlainObject(n) ? n : {}, o[t] = ae.extend(c, a, i)) : void 0 !== i && (o[t] = i));
        return o
    }, ae.extend({
        expando: "jQuery" + (re + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function (e) {
            throw new Error(e)
        },
        noop: function () { },
        isFunction: function (e) {
            return "function" === ae.type(e)
        },
        isArray: Array.isArray,
        isWindow: function (e) {
            return null != e && e === e.window
        },
        isNumeric: function (e) {
            var t = e && e.toString();
            return !ae.isArray(e) && t - parseFloat(t) + 1 >= 0
        },
        isPlainObject: function (e) {
            var t;
            if ("object" !== ae.type(e) || e.nodeType || ae.isWindow(e)) return !1;
            if (e.constructor && !ne.call(e, "constructor") && !ne.call(e.constructor.prototype || {}, "isPrototypeOf")) return !1;
            for (t in e);
            return void 0 === t || ne.call(e, t)
        },
        isEmptyObject: function (e) {
            var t;
            for (t in e) return !1;
            return !0
        },
        type: function (e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? ee[te.call(e)] || "object" : typeof e
        },
        globalEval: function (e) {
            var t, n = eval;
            e = ae.trim(e), e && (1 === e.indexOf("use strict") ? (t = X.createElement("script"), t.text = e, X.head.appendChild(t).parentNode.removeChild(t)) : n(e))
        },
        camelCase: function (e) {
            return e.replace(se, "ms-").replace(le, ce)
        },
        nodeName: function (e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function (e, t) {
            var i, r = 0;
            if (n(e))
                for (i = e.length; i > r && t.call(e[r], r, e[r]) !== !1; r++);
            else
                for (r in e)
                    if (t.call(e[r], r, e[r]) === !1) break;
            return e
        },
        trim: function (e) {
            return null == e ? "" : (e + "").replace(oe, "")
        },
        makeArray: function (e, t) {
            var i = t || [];
            return null != e && (n(Object(e)) ? ae.merge(i, "string" == typeof e ? [e] : e) : Q.call(i, e)), i
        },
        inArray: function (e, t, n) {
            return null == t ? -1 : J.call(t, e, n)
        },
        merge: function (e, t) {
            for (var n = +t.length, i = 0, r = e.length; n > i; i++) e[r++] = t[i];
            return e.length = r, e
        },
        grep: function (e, t, n) {
            for (var i, r = [], a = 0, o = e.length, s = !n; o > a; a++) i = !t(e[a], a), i !== s && r.push(e[a]);
            return r
        },
        map: function (e, t, i) {
            var r, a, o = 0,
                s = [];
            if (n(e))
                for (r = e.length; r > o; o++) a = t(e[o], o, i), null != a && s.push(a);
            else
                for (o in e) a = t(e[o], o, i), null != a && s.push(a);
            return Z.apply([], s)
        },
        guid: 1,
        proxy: function (e, t) {
            var n, i, r;
            return "string" == typeof t && (n = e[t], t = e, e = n), ae.isFunction(e) ? (i = K.call(arguments, 2), r = function () {
                return e.apply(t || this, i.concat(K.call(arguments)))
            }, r.guid = e.guid = e.guid || ae.guid++, r) : void 0
        },
        now: Date.now,
        support: ie
    }), "function" == typeof Symbol && (ae.fn[Symbol.iterator] = V[Symbol.iterator]), ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) {
        ee["[object " + t + "]"] = t.toLowerCase()
    });
    var ue = function (e) {
        function t(e, t, n, i) {
            var r, a, o, s, l, c, d, f, p = t && t.ownerDocument,
                m = t ? t.nodeType : 9;
            if (n = n || [], "string" != typeof e || !e || 1 !== m && 9 !== m && 11 !== m) return n;
            if (!i && ((t ? t.ownerDocument || t : L) !== R && M(t), t = t || R, P)) {
                if (11 !== m && (c = ve.exec(e)))
                    if (r = c[1]) {
                        if (9 === m) {
                            if (!(o = t.getElementById(r))) return n;
                            if (o.id === r) return n.push(o), n
                        } else if (p && (o = p.getElementById(r)) && N(t, o) && o.id === r) return n.push(o), n
                    } else {
                        if (c[2]) return Q.apply(n, t.getElementsByTagName(e)), n;
                        if ((r = c[3]) && _.getElementsByClassName && t.getElementsByClassName) return Q.apply(n, t.getElementsByClassName(r)), n
                    } if (_.qsa && !q[e + " "] && (!H || !H.test(e))) {
                        if (1 !== m) p = t, f = e;
                        else if ("object" !== t.nodeName.toLowerCase()) {
                            for ((s = t.getAttribute("id")) ? s = s.replace(be, "\\$&") : t.setAttribute("id", s = z), d = S(e), a = d.length, l = he.test(s) ? "#" + s : "[id='" + s + "']"; a--;) d[a] = l + " " + h(d[a]);
                            f = d.join(","), p = ye.test(e) && u(t.parentNode) || t
                        }
                        if (f) try {
                            return Q.apply(n, p.querySelectorAll(f)), n
                        } catch (g) { } finally {
                                s === z && t.removeAttribute("id")
                            }
                    }
            }
            return T(e.replace(se, "$1"), t, n, i)
        }

        function n() {
            function e(n, i) {
                return t.push(n + " ") > x.cacheLength && delete e[t.shift()], e[n + " "] = i
            }
            var t = [];
            return e
        }

        function i(e) {
            return e[z] = !0, e
        }

        function r(e) {
            var t = R.createElement("div");
            try {
                return !!e(t)
            } catch (n) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null
            }
        }

        function a(e, t) {
            for (var n = e.split("|"), i = n.length; i--;) x.attrHandle[n[i]] = t
        }

        function o(e, t) {
            var n = t && e,
                i = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || Y) - (~e.sourceIndex || Y);
            if (i) return i;
            if (n)
                for (; n = n.nextSibling;)
                    if (n === t) return -1;
            return e ? 1 : -1
        }

        function s(e) {
            return function (t) {
                var n = t.nodeName.toLowerCase();
                return "input" === n && t.type === e
            }
        }

        function l(e) {
            return function (t) {
                var n = t.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && t.type === e
            }
        }

        function c(e) {
            return i(function (t) {
                return t = +t, i(function (n, i) {
                    for (var r, a = e([], n.length, t), o = a.length; o--;) n[r = a[o]] && (n[r] = !(i[r] = n[r]))
                })
            })
        }

        function u(e) {
            return e && "undefined" != typeof e.getElementsByTagName && e
        }

        function d() { }

        function h(e) {
            for (var t = 0, n = e.length, i = ""; n > t; t++) i += e[t].value;
            return i
        }

        function f(e, t, n) {
            var i = t.dir,
                r = n && "parentNode" === i,
                a = B++;
            return t.first ? function (t, n, a) {
                for (; t = t[i];)
                    if (1 === t.nodeType || r) return e(t, n, a)
            } : function (t, n, o) {
                var s, l, c, u = [F, a];
                if (o) {
                    for (; t = t[i];)
                        if ((1 === t.nodeType || r) && e(t, n, o)) return !0
                } else
                    for (; t = t[i];)
                        if (1 === t.nodeType || r) {
                            if (c = t[z] || (t[z] = {}), l = c[t.uniqueID] || (c[t.uniqueID] = {}), (s = l[i]) && s[0] === F && s[1] === a) return u[2] = s[2];
                            if (l[i] = u, u[2] = e(t, n, o)) return !0
                        }
            }
        }

        function p(e) {
            return e.length > 1 ? function (t, n, i) {
                for (var r = e.length; r--;)
                    if (!e[r](t, n, i)) return !1;
                return !0
            } : e[0]
        }

        function m(e, n, i) {
            for (var r = 0, a = n.length; a > r; r++) t(e, n[r], i);
            return i
        }

        function g(e, t, n, i, r) {
            for (var a, o = [], s = 0, l = e.length, c = null != t; l > s; s++)(a = e[s]) && (!n || n(a, i, r)) && (o.push(a), c && t.push(s));
            return o
        }

        function v(e, t, n, r, a, o) {
            return r && !r[z] && (r = v(r)), a && !a[z] && (a = v(a, o)), i(function (i, o, s, l) {
                var c, u, d, h = [],
                    f = [],
                    p = o.length,
                    v = i || m(t || "*", s.nodeType ? [s] : s, []),
                    y = !e || !i && t ? v : g(v, h, e, s, l),
                    b = n ? a || (i ? e : p || r) ? [] : o : y;
                if (n && n(y, b, s, l), r)
                    for (c = g(b, f), r(c, [], s, l), u = c.length; u--;)(d = c[u]) && (b[f[u]] = !(y[f[u]] = d));
                if (i) {
                    if (a || e) {
                        if (a) {
                            for (c = [], u = b.length; u--;)(d = b[u]) && c.push(y[u] = d);
                            a(null, b = [], c, l)
                        }
                        for (u = b.length; u--;)(d = b[u]) && (c = a ? ee(i, d) : h[u]) > -1 && (i[c] = !(o[c] = d))
                    }
                } else b = g(b === o ? b.splice(p, b.length) : b), a ? a(null, o, b, l) : Q.apply(o, b)
            })
        }

        function y(e) {
            for (var t, n, i, r = e.length, a = x.relative[e[0].type], o = a || x.relative[" "], s = a ? 1 : 0, l = f(function (e) {
                return e === t
            }, o, !0), c = f(function (e) {
                return ee(t, e) > -1
            }, o, !0), u = [function (e, n, i) {
                var r = !a && (i || n !== E) || ((t = n).nodeType ? l(e, n, i) : c(e, n, i));
                return t = null, r
            }]; r > s; s++)
                if (n = x.relative[e[s].type]) u = [f(p(u), n)];
                else {
                    if (n = x.filter[e[s].type].apply(null, e[s].matches), n[z]) {
                        for (i = ++s; r > i && !x.relative[e[i].type]; i++);
                        return v(s > 1 && p(u), s > 1 && h(e.slice(0, s - 1).concat({
                            value: " " === e[s - 2].type ? "*" : ""
                        })).replace(se, "$1"), n, i > s && y(e.slice(s, i)), r > i && y(e = e.slice(i)), r > i && h(e))
                    }
                    u.push(n)
                } return p(u)
        }

        function b(e, n) {
            var r = n.length > 0,
                a = e.length > 0,
                o = function (i, o, s, l, c) {
                    var u, d, h, f = 0,
                        p = "0",
                        m = i && [],
                        v = [],
                        y = E,
                        b = i || a && x.find.TAG("*", c),
                        w = F += null == y ? 1 : Math.random() || .1,
                        _ = b.length;
                    for (c && (E = o === R || o || c); p !== _ && null != (u = b[p]); p++) {
                        if (a && u) {
                            for (d = 0, o || u.ownerDocument === R || (M(u), s = !P); h = e[d++];)
                                if (h(u, o || R, s)) {
                                    l.push(u);
                                    break
                                } c && (F = w)
                        }
                        r && ((u = !h && u) && f--, i && m.push(u))
                    }
                    if (f += p, r && p !== f) {
                        for (d = 0; h = n[d++];) h(m, v, o, s);
                        if (i) {
                            if (f > 0)
                                for (; p--;) m[p] || v[p] || (v[p] = K.call(l));
                            v = g(v)
                        }
                        Q.apply(l, v), c && !i && v.length > 0 && f + n.length > 1 && t.uniqueSort(l)
                    }
                    return c && (F = w, E = y), m
                };
            return r ? i(o) : o
        }
        var w, _, x, k, C, S, A, T, E, D, $, M, R, I, P, H, O, j, N, z = "sizzle" + 1 * new Date,
            L = e.document,
            F = 0,
            B = 0,
            W = n(),
            U = n(),
            q = n(),
            G = function (e, t) {
                return e === t && ($ = !0), 0
            },
            Y = 1 << 31,
            V = {}.hasOwnProperty,
            X = [],
            K = X.pop,
            Z = X.push,
            Q = X.push,
            J = X.slice,
            ee = function (e, t) {
                for (var n = 0, i = e.length; i > n; n++)
                    if (e[n] === t) return n;
                return -1
            },
            te = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            ne = "[\\x20\\t\\r\\n\\f]",
            ie = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            re = "\\[" + ne + "*(" + ie + ")(?:" + ne + "*([*^$|!~]?=)" + ne + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ie + "))|)" + ne + "*\\]",
            ae = ":(" + ie + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + re + ")*)|.*)\\)|)",
            oe = new RegExp(ne + "+", "g"),
            se = new RegExp("^" + ne + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ne + "+$", "g"),
            le = new RegExp("^" + ne + "*," + ne + "*"),
            ce = new RegExp("^" + ne + "*([>+~]|" + ne + ")" + ne + "*"),
            ue = new RegExp("=" + ne + "*([^\\]'\"]*?)" + ne + "*\\]", "g"),
            de = new RegExp(ae),
            he = new RegExp("^" + ie + "$"),
            fe = {
                ID: new RegExp("^#(" + ie + ")"),
                CLASS: new RegExp("^\\.(" + ie + ")"),
                TAG: new RegExp("^(" + ie + "|[*])"),
                ATTR: new RegExp("^" + re),
                PSEUDO: new RegExp("^" + ae),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ne + "*(even|odd|(([+-]|)(\\d*)n|)" + ne + "*(?:([+-]|)" + ne + "*(\\d+)|))" + ne + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + te + ")$", "i"),
                needsContext: new RegExp("^" + ne + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ne + "*((?:-\\d)?\\d*)" + ne + "*\\)|)(?=[^-]|$)", "i")
            },
            pe = /^(?:input|select|textarea|button)$/i,
            me = /^h\d$/i,
            ge = /^[^{]+\{\s*\[native \w/,
            ve = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            ye = /[+~]/,
            be = /'|\\/g,
            we = new RegExp("\\\\([\\da-f]{1,6}" + ne + "?|(" + ne + ")|.)", "ig"),
            _e = function (e, t, n) {
                var i = "0x" + t - 65536;
                return i !== i || n ? t : 0 > i ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320)
            },
            xe = function () {
                M()
            };
        try {
            Q.apply(X = J.call(L.childNodes), L.childNodes), X[L.childNodes.length].nodeType
        } catch (ke) {
            Q = {
                apply: X.length ? function (e, t) {
                    Z.apply(e, J.call(t))
                } : function (e, t) {
                    for (var n = e.length, i = 0; e[n++] = t[i++];);
                    e.length = n - 1
                }
            }
        }
        _ = t.support = {}, C = t.isXML = function (e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        }, M = t.setDocument = function (e) {
            var t, n, i = e ? e.ownerDocument || e : L;
            return i !== R && 9 === i.nodeType && i.documentElement ? (R = i, I = R.documentElement, P = !C(R), (n = R.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", xe, !1) : n.attachEvent && n.attachEvent("onunload", xe)), _.attributes = r(function (e) {
                return e.className = "i", !e.getAttribute("className")
            }), _.getElementsByTagName = r(function (e) {
                return e.appendChild(R.createComment("")), !e.getElementsByTagName("*").length
            }), _.getElementsByClassName = ge.test(R.getElementsByClassName), _.getById = r(function (e) {
                return I.appendChild(e).id = z, !R.getElementsByName || !R.getElementsByName(z).length
            }), _.getById ? (x.find.ID = function (e, t) {
                if ("undefined" != typeof t.getElementById && P) {
                    var n = t.getElementById(e);
                    return n ? [n] : []
                }
            }, x.filter.ID = function (e) {
                var t = e.replace(we, _e);
                return function (e) {
                    return e.getAttribute("id") === t
                }
            }) : (delete x.find.ID, x.filter.ID = function (e) {
                var t = e.replace(we, _e);
                return function (e) {
                    var n = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                    return n && n.value === t
                }
            }), x.find.TAG = _.getElementsByTagName ? function (e, t) {
                return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : _.qsa ? t.querySelectorAll(e) : void 0
            } : function (e, t) {
                var n, i = [],
                    r = 0,
                    a = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (; n = a[r++];) 1 === n.nodeType && i.push(n);
                    return i
                }
                return a
            }, x.find.CLASS = _.getElementsByClassName && function (e, t) {
                return "undefined" != typeof t.getElementsByClassName && P ? t.getElementsByClassName(e) : void 0
            }, O = [], H = [], (_.qsa = ge.test(R.querySelectorAll)) && (r(function (e) {
                I.appendChild(e).innerHTML = "<a id='" + z + "'></a><select id='" + z + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && H.push("[*^$]=" + ne + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || H.push("\\[" + ne + "*(?:value|" + te + ")"), e.querySelectorAll("[id~=" + z + "-]").length || H.push("~="), e.querySelectorAll(":checked").length || H.push(":checked"), e.querySelectorAll("a#" + z + "+*").length || H.push(".#.+[+~]")
            }), r(function (e) {
                var t = R.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && H.push("name" + ne + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || H.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), H.push(",.*:")
            })), (_.matchesSelector = ge.test(j = I.matches || I.webkitMatchesSelector || I.mozMatchesSelector || I.oMatchesSelector || I.msMatchesSelector)) && r(function (e) {
                _.disconnectedMatch = j.call(e, "div"), j.call(e, "[s!='']:x"), O.push("!=", ae)
            }), H = H.length && new RegExp(H.join("|")), O = O.length && new RegExp(O.join("|")), t = ge.test(I.compareDocumentPosition), N = t || ge.test(I.contains) ? function (e, t) {
                var n = 9 === e.nodeType ? e.documentElement : e,
                    i = t && t.parentNode;
                return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i)))
            } : function (e, t) {
                if (t)
                    for (; t = t.parentNode;)
                        if (t === e) return !0;
                return !1
            }, G = t ? function (e, t) {
                if (e === t) return $ = !0, 0;
                var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return n ? n : (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & n || !_.sortDetached && t.compareDocumentPosition(e) === n ? e === R || e.ownerDocument === L && N(L, e) ? -1 : t === R || t.ownerDocument === L && N(L, t) ? 1 : D ? ee(D, e) - ee(D, t) : 0 : 4 & n ? -1 : 1)
            } : function (e, t) {
                if (e === t) return $ = !0, 0;
                var n, i = 0,
                    r = e.parentNode,
                    a = t.parentNode,
                    s = [e],
                    l = [t];
                if (!r || !a) return e === R ? -1 : t === R ? 1 : r ? -1 : a ? 1 : D ? ee(D, e) - ee(D, t) : 0;
                if (r === a) return o(e, t);
                for (n = e; n = n.parentNode;) s.unshift(n);
                for (n = t; n = n.parentNode;) l.unshift(n);
                for (; s[i] === l[i];) i++;
                return i ? o(s[i], l[i]) : s[i] === L ? -1 : l[i] === L ? 1 : 0
            }, R) : R
        }, t.matches = function (e, n) {
            return t(e, null, null, n)
        }, t.matchesSelector = function (e, n) {
            if ((e.ownerDocument || e) !== R && M(e), n = n.replace(ue, "='$1']"), _.matchesSelector && P && !q[n + " "] && (!O || !O.test(n)) && (!H || !H.test(n))) try {
                var i = j.call(e, n);
                if (i || _.disconnectedMatch || e.document && 11 !== e.document.nodeType) return i
            } catch (r) { }
            return t(n, R, null, [e]).length > 0
        }, t.contains = function (e, t) {
            return (e.ownerDocument || e) !== R && M(e), N(e, t)
        }, t.attr = function (e, t) {
            (e.ownerDocument || e) !== R && M(e);
            var n = x.attrHandle[t.toLowerCase()],
                i = n && V.call(x.attrHandle, t.toLowerCase()) ? n(e, t, !P) : void 0;
            return void 0 !== i ? i : _.attributes || !P ? e.getAttribute(t) : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
        }, t.error = function (e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        }, t.uniqueSort = function (e) {
            var t, n = [],
                i = 0,
                r = 0;
            if ($ = !_.detectDuplicates, D = !_.sortStable && e.slice(0), e.sort(G), $) {
                for (; t = e[r++];) t === e[r] && (i = n.push(r));
                for (; i--;) e.splice(n[i], 1)
            }
            return D = null, e
        }, k = t.getText = function (e) {
            var t, n = "",
                i = 0,
                r = e.nodeType;
            if (r) {
                if (1 === r || 9 === r || 11 === r) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) n += k(e)
                } else if (3 === r || 4 === r) return e.nodeValue
            } else
                for (; t = e[i++];) n += k(t);
            return n
        }, x = t.selectors = {
            cacheLength: 50,
            createPseudo: i,
            match: fe,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function (e) {
                    return e[1] = e[1].replace(we, _e), e[3] = (e[3] || e[4] || e[5] || "").replace(we, _e), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                },
                CHILD: function (e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), e
                },
                PSEUDO: function (e) {
                    var t, n = !e[6] && e[2];
                    return fe.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && de.test(n) && (t = S(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                }
            },
            filter: {
                TAG: function (e) {
                    var t = e.replace(we, _e).toLowerCase();
                    return "*" === e ? function () {
                        return !0
                    } : function (e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t
                    }
                },
                CLASS: function (e) {
                    var t = W[e + " "];
                    return t || (t = new RegExp("(^|" + ne + ")" + e + "(" + ne + "|$)")) && W(e, function (e) {
                        return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                    })
                },
                ATTR: function (e, n, i) {
                    return function (r) {
                        var a = t.attr(r, e);
                        return null == a ? "!=" === n : n ? (a += "", "=" === n ? a === i : "!=" === n ? a !== i : "^=" === n ? i && 0 === a.indexOf(i) : "*=" === n ? i && a.indexOf(i) > -1 : "$=" === n ? i && a.slice(-i.length) === i : "~=" === n ? (" " + a.replace(oe, " ") + " ").indexOf(i) > -1 : "|=" === n ? a === i || a.slice(0, i.length + 1) === i + "-" : !1) : !0
                    }
                },
                CHILD: function (e, t, n, i, r) {
                    var a = "nth" !== e.slice(0, 3),
                        o = "last" !== e.slice(-4),
                        s = "of-type" === t;
                    return 1 === i && 0 === r ? function (e) {
                        return !!e.parentNode
                    } : function (t, n, l) {
                        var c, u, d, h, f, p, m = a !== o ? "nextSibling" : "previousSibling",
                            g = t.parentNode,
                            v = s && t.nodeName.toLowerCase(),
                            y = !l && !s,
                            b = !1;
                        if (g) {
                            if (a) {
                                for (; m;) {
                                    for (h = t; h = h[m];)
                                        if (s ? h.nodeName.toLowerCase() === v : 1 === h.nodeType) return !1;
                                    p = m = "only" === e && !p && "nextSibling"
                                }
                                return !0
                            }
                            if (p = [o ? g.firstChild : g.lastChild], o && y) {
                                for (h = g, d = h[z] || (h[z] = {}), u = d[h.uniqueID] || (d[h.uniqueID] = {}), c = u[e] || [], f = c[0] === F && c[1], b = f && c[2], h = f && g.childNodes[f]; h = ++f && h && h[m] || (b = f = 0) || p.pop();)
                                    if (1 === h.nodeType && ++b && h === t) {
                                        u[e] = [F, f, b];
                                        break
                                    }
                            } else if (y && (h = t, d = h[z] || (h[z] = {}), u = d[h.uniqueID] || (d[h.uniqueID] = {}), c = u[e] || [], f = c[0] === F && c[1], b = f), b === !1)
                                for (;
                                    (h = ++f && h && h[m] || (b = f = 0) || p.pop()) && ((s ? h.nodeName.toLowerCase() !== v : 1 !== h.nodeType) || !++b || (y && (d = h[z] || (h[z] = {}), u = d[h.uniqueID] || (d[h.uniqueID] = {}), u[e] = [F, b]), h !== t)););
                            return b -= r, b === i || b % i === 0 && b / i >= 0
                        }
                    }
                },
                PSEUDO: function (e, n) {
                    var r, a = x.pseudos[e] || x.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                    return a[z] ? a(n) : a.length > 1 ? (r = [e, e, "", n], x.setFilters.hasOwnProperty(e.toLowerCase()) ? i(function (e, t) {
                        for (var i, r = a(e, n), o = r.length; o--;) i = ee(e, r[o]), e[i] = !(t[i] = r[o])
                    }) : function (e) {
                        return a(e, 0, r)
                    }) : a
                }
            },
            pseudos: {
                not: i(function (e) {
                    var t = [],
                        n = [],
                        r = A(e.replace(se, "$1"));
                    return r[z] ? i(function (e, t, n, i) {
                        for (var a, o = r(e, null, i, []), s = e.length; s--;)(a = o[s]) && (e[s] = !(t[s] = a))
                    }) : function (e, i, a) {
                        return t[0] = e, r(t, null, a, n), t[0] = null, !n.pop()
                    }
                }),
                has: i(function (e) {
                    return function (n) {
                        return t(e, n).length > 0
                    }
                }),
                contains: i(function (e) {
                    return e = e.replace(we, _e),
                        function (t) {
                            return (t.textContent || t.innerText || k(t)).indexOf(e) > -1
                        }
                }),
                lang: i(function (e) {
                    return he.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(we, _e).toLowerCase(),
                        function (t) {
                            var n;
                            do
                                if (n = P ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-"); while ((t = t.parentNode) && 1 === t.nodeType);
                            return !1
                        }
                }),
                target: function (t) {
                    var n = e.location && e.location.hash;
                    return n && n.slice(1) === t.id
                },
                root: function (e) {
                    return e === I
                },
                focus: function (e) {
                    return e === R.activeElement && (!R.hasFocus || R.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                },
                enabled: function (e) {
                    return e.disabled === !1
                },
                disabled: function (e) {
                    return e.disabled === !0
                },
                checked: function (e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected
                },
                selected: function (e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                },
                empty: function (e) {
                    for (e = e.firstChild; e; e = e.nextSibling)
                        if (e.nodeType < 6) return !1;
                    return !0
                },
                parent: function (e) {
                    return !x.pseudos.empty(e)
                },
                header: function (e) {
                    return me.test(e.nodeName)
                },
                input: function (e) {
                    return pe.test(e.nodeName)
                },
                button: function (e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t
                },
                text: function (e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                },
                first: c(function () {
                    return [0]
                }),
                last: c(function (e, t) {
                    return [t - 1]
                }),
                eq: c(function (e, t, n) {
                    return [0 > n ? n + t : n]
                }),
                even: c(function (e, t) {
                    for (var n = 0; t > n; n += 2) e.push(n);
                    return e
                }),
                odd: c(function (e, t) {
                    for (var n = 1; t > n; n += 2) e.push(n);
                    return e
                }),
                lt: c(function (e, t, n) {
                    for (var i = 0 > n ? n + t : n; --i >= 0;) e.push(i);
                    return e
                }),
                gt: c(function (e, t, n) {
                    for (var i = 0 > n ? n + t : n; ++i < t;) e.push(i);
                    return e
                })
            }
        }, x.pseudos.nth = x.pseudos.eq;
        for (w in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) x.pseudos[w] = s(w);
        for (w in {
            submit: !0,
            reset: !0
        }) x.pseudos[w] = l(w);
        return d.prototype = x.filters = x.pseudos, x.setFilters = new d, S = t.tokenize = function (e, n) {
            var i, r, a, o, s, l, c, u = U[e + " "];
            if (u) return n ? 0 : u.slice(0);
            for (s = e, l = [], c = x.preFilter; s;) {
                (!i || (r = le.exec(s))) && (r && (s = s.slice(r[0].length) || s), l.push(a = [])), i = !1, (r = ce.exec(s)) && (i = r.shift(), a.push({
                    value: i,
                    type: r[0].replace(se, " ")
                }), s = s.slice(i.length));
                for (o in x.filter) !(r = fe[o].exec(s)) || c[o] && !(r = c[o](r)) || (i = r.shift(), a.push({
                    value: i,
                    type: o,
                    matches: r
                }), s = s.slice(i.length));
                if (!i) break
            }
            return n ? s.length : s ? t.error(e) : U(e, l).slice(0)
        }, A = t.compile = function (e, t) {
            var n, i = [],
                r = [],
                a = q[e + " "];
            if (!a) {
                for (t || (t = S(e)), n = t.length; n--;) a = y(t[n]), a[z] ? i.push(a) : r.push(a);
                a = q(e, b(r, i)), a.selector = e
            }
            return a
        }, T = t.select = function (e, t, n, i) {
            var r, a, o, s, l, c = "function" == typeof e && e,
                d = !i && S(e = c.selector || e);
            if (n = n || [], 1 === d.length) {
                if (a = d[0] = d[0].slice(0), a.length > 2 && "ID" === (o = a[0]).type && _.getById && 9 === t.nodeType && P && x.relative[a[1].type]) {
                    if (t = (x.find.ID(o.matches[0].replace(we, _e), t) || [])[0], !t) return n;
                    c && (t = t.parentNode), e = e.slice(a.shift().value.length)
                }
                for (r = fe.needsContext.test(e) ? 0 : a.length; r-- && (o = a[r], !x.relative[s = o.type]);)
                    if ((l = x.find[s]) && (i = l(o.matches[0].replace(we, _e), ye.test(a[0].type) && u(t.parentNode) || t))) {
                        if (a.splice(r, 1), e = i.length && h(a), !e) return Q.apply(n, i), n;
                        break
                    }
            }
            return (c || A(e, d))(i, t, !P, n, !t || ye.test(e) && u(t.parentNode) || t), n
        }, _.sortStable = z.split("").sort(G).join("") === z, _.detectDuplicates = !!$, M(), _.sortDetached = r(function (e) {
            return 1 & e.compareDocumentPosition(R.createElement("div"))
        }), r(function (e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
        }) || a("type|href|height|width", function (e, t, n) {
            return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }), _.attributes && r(function (e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
        }) || a("value", function (e, t, n) {
            return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
        }), r(function (e) {
            return null == e.getAttribute("disabled")
        }) || a(te, function (e, t, n) {
            var i;
            return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
        }), t
    }(e);
    ae.find = ue, ae.expr = ue.selectors, ae.expr[":"] = ae.expr.pseudos, ae.uniqueSort = ae.unique = ue.uniqueSort, ae.text = ue.getText, ae.isXMLDoc = ue.isXML, ae.contains = ue.contains;
    var de = function (e, t, n) {
        for (var i = [], r = void 0 !== n;
            (e = e[t]) && 9 !== e.nodeType;)
            if (1 === e.nodeType) {
                if (r && ae(e).is(n)) break;
                i.push(e)
            } return i
    },
        he = function (e, t) {
            for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
            return n
        },
        fe = ae.expr.match.needsContext,
        pe = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
        me = /^.[^:#\[\.,]*$/;
    ae.filter = function (e, t, n) {
        var i = t[0];
        return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === i.nodeType ? ae.find.matchesSelector(i, e) ? [i] : [] : ae.find.matches(e, ae.grep(t, function (e) {
            return 1 === e.nodeType
        }))
    }, ae.fn.extend({
        find: function (e) {
            var t, n = this.length,
                i = [],
                r = this;
            if ("string" != typeof e) return this.pushStack(ae(e).filter(function () {
                for (t = 0; n > t; t++)
                    if (ae.contains(r[t], this)) return !0
            }));
            for (t = 0; n > t; t++) ae.find(e, r[t], i);
            return i = this.pushStack(n > 1 ? ae.unique(i) : i), i.selector = this.selector ? this.selector + " " + e : e, i
        },
        filter: function (e) {
            return this.pushStack(i(this, e || [], !1))
        },
        not: function (e) {
            return this.pushStack(i(this, e || [], !0))
        },
        is: function (e) {
            return !!i(this, "string" == typeof e && fe.test(e) ? ae(e) : e || [], !1).length
        }
    });
    var ge, ve = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        ye = ae.fn.init = function (e, t, n) {
            var i, r;
            if (!e) return this;
            if (n = n || ge, "string" == typeof e) {
                if (i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : ve.exec(e), !i || !i[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (i[1]) {
                    if (t = t instanceof ae ? t[0] : t, ae.merge(this, ae.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : X, !0)), pe.test(i[1]) && ae.isPlainObject(t))
                        for (i in t) ae.isFunction(this[i]) ? this[i](t[i]) : this.attr(i, t[i]);
                    return this
                }
                return r = X.getElementById(i[2]), r && r.parentNode && (this.length = 1, this[0] = r), this.context = X, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : ae.isFunction(e) ? void 0 !== n.ready ? n.ready(e) : e(ae) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), ae.makeArray(e, this))
        };
    ye.prototype = ae.fn, ge = ae(X);
    var be = /^(?:parents|prev(?:Until|All))/,
        we = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    ae.fn.extend({
        has: function (e) {
            var t = ae(e, this),
                n = t.length;
            return this.filter(function () {
                for (var e = 0; n > e; e++)
                    if (ae.contains(this, t[e])) return !0
            })
        },
        closest: function (e, t) {
            for (var n, i = 0, r = this.length, a = [], o = fe.test(e) || "string" != typeof e ? ae(e, t || this.context) : 0; r > i; i++)
                for (n = this[i]; n && n !== t; n = n.parentNode)
                    if (n.nodeType < 11 && (o ? o.index(n) > -1 : 1 === n.nodeType && ae.find.matchesSelector(n, e))) {
                        a.push(n);
                        break
                    } return this.pushStack(a.length > 1 ? ae.uniqueSort(a) : a)
        },
        index: function (e) {
            return e ? "string" == typeof e ? J.call(ae(e), this[0]) : J.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function (e, t) {
            return this.pushStack(ae.uniqueSort(ae.merge(this.get(), ae(e, t))))
        },
        addBack: function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), ae.each({
        parent: function (e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function (e) {
            return de(e, "parentNode")
        },
        parentsUntil: function (e, t, n) {
            return de(e, "parentNode", n)
        },
        next: function (e) {
            return r(e, "nextSibling")
        },
        prev: function (e) {
            return r(e, "previousSibling")
        },
        nextAll: function (e) {
            return de(e, "nextSibling")
        },
        prevAll: function (e) {
            return de(e, "previousSibling")
        },
        nextUntil: function (e, t, n) {
            return de(e, "nextSibling", n)
        },
        prevUntil: function (e, t, n) {
            return de(e, "previousSibling", n)
        },
        siblings: function (e) {
            return he((e.parentNode || {}).firstChild, e)
        },
        children: function (e) {
            return he(e.firstChild);
        },
        contents: function (e) {
            return e.contentDocument || ae.merge([], e.childNodes)
        }
    }, function (e, t) {
        ae.fn[e] = function (n, i) {
            var r = ae.map(this, t, n);
            return "Until" !== e.slice(-5) && (i = n), i && "string" == typeof i && (r = ae.filter(i, r)), this.length > 1 && (we[e] || ae.uniqueSort(r), be.test(e) && r.reverse()), this.pushStack(r)
        }
    });
    var _e = /\S+/g;
    ae.Callbacks = function (e) {
        e = "string" == typeof e ? a(e) : ae.extend({}, e);
        var t, n, i, r, o = [],
            s = [],
            l = -1,
            c = function () {
                for (r = e.once, i = t = !0; s.length; l = -1)
                    for (n = s.shift(); ++l < o.length;) o[l].apply(n[0], n[1]) === !1 && e.stopOnFalse && (l = o.length, n = !1);
                e.memory || (n = !1), t = !1, r && (o = n ? [] : "")
            },
            u = {
                add: function () {
                    return o && (n && !t && (l = o.length - 1, s.push(n)), function i(t) {
                        ae.each(t, function (t, n) {
                            ae.isFunction(n) ? e.unique && u.has(n) || o.push(n) : n && n.length && "string" !== ae.type(n) && i(n)
                        })
                    }(arguments), n && !t && c()), this
                },
                remove: function () {
                    return ae.each(arguments, function (e, t) {
                        for (var n;
                            (n = ae.inArray(t, o, n)) > -1;) o.splice(n, 1), l >= n && l--
                    }), this
                },
                has: function (e) {
                    return e ? ae.inArray(e, o) > -1 : o.length > 0
                },
                empty: function () {
                    return o && (o = []), this
                },
                disable: function () {
                    return r = s = [], o = n = "", this
                },
                disabled: function () {
                    return !o
                },
                lock: function () {
                    return r = s = [], n || (o = n = ""), this
                },
                locked: function () {
                    return !!r
                },
                fireWith: function (e, n) {
                    return r || (n = n || [], n = [e, n.slice ? n.slice() : n], s.push(n), t || c()), this
                },
                fire: function () {
                    return u.fireWith(this, arguments), this
                },
                fired: function () {
                    return !!i
                }
            };
        return u
    }, ae.extend({
        Deferred: function (e) {
            var t = [
                ["resolve", "done", ae.Callbacks("once memory"), "resolved"],
                ["reject", "fail", ae.Callbacks("once memory"), "rejected"],
                ["notify", "progress", ae.Callbacks("memory")]
            ],
                n = "pending",
                i = {
                    state: function () {
                        return n
                    },
                    always: function () {
                        return r.done(arguments).fail(arguments), this
                    },
                    then: function () {
                        var e = arguments;
                        return ae.Deferred(function (n) {
                            ae.each(t, function (t, a) {
                                var o = ae.isFunction(e[t]) && e[t];
                                r[a[1]](function () {
                                    var e = o && o.apply(this, arguments);
                                    e && ae.isFunction(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[a[0] + "With"](this === i ? n.promise() : this, o ? [e] : arguments)
                                })
                            }), e = null
                        }).promise()
                    },
                    promise: function (e) {
                        return null != e ? ae.extend(e, i) : i
                    }
                },
                r = {};
            return i.pipe = i.then, ae.each(t, function (e, a) {
                var o = a[2],
                    s = a[3];
                i[a[1]] = o.add, s && o.add(function () {
                    n = s
                }, t[1 ^ e][2].disable, t[2][2].lock), r[a[0]] = function () {
                    return r[a[0] + "With"](this === r ? i : this, arguments), this
                }, r[a[0] + "With"] = o.fireWith
            }), i.promise(r), e && e.call(r, r), r
        },
        when: function (e) {
            var t, n, i, r = 0,
                a = K.call(arguments),
                o = a.length,
                s = 1 !== o || e && ae.isFunction(e.promise) ? o : 0,
                l = 1 === s ? e : ae.Deferred(),
                c = function (e, n, i) {
                    return function (r) {
                        n[e] = this, i[e] = arguments.length > 1 ? K.call(arguments) : r, i === t ? l.notifyWith(n, i) : --s || l.resolveWith(n, i)
                    }
                };
            if (o > 1)
                for (t = new Array(o), n = new Array(o), i = new Array(o); o > r; r++) a[r] && ae.isFunction(a[r].promise) ? a[r].promise().progress(c(r, n, t)).done(c(r, i, a)).fail(l.reject) : --s;
            return s || l.resolveWith(i, a), l.promise()
        }
    });
    var xe;
    ae.fn.ready = function (e) {
        return ae.ready.promise().done(e), this
    }, ae.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function (e) {
            e ? ae.readyWait++ : ae.ready(!0)
        },
        ready: function (e) {
            (e === !0 ? --ae.readyWait : ae.isReady) || (ae.isReady = !0, e !== !0 && --ae.readyWait > 0 || (xe.resolveWith(X, [ae]), ae.fn.triggerHandler && (ae(X).triggerHandler("ready"), ae(X).off("ready"))))
        }
    }), ae.ready.promise = function (t) {
        return xe || (xe = ae.Deferred(), "complete" === X.readyState || "loading" !== X.readyState && !X.documentElement.doScroll ? e.setTimeout(ae.ready) : (X.addEventListener("DOMContentLoaded", o), e.addEventListener("load", o))), xe.promise(t)
    }, ae.ready.promise();
    var ke = function (e, t, n, i, r, a, o) {
        var s = 0,
            l = e.length,
            c = null == n;
        if ("object" === ae.type(n)) {
            r = !0;
            for (s in n) ke(e, t, s, n[s], !0, a, o)
        } else if (void 0 !== i && (r = !0, ae.isFunction(i) || (o = !0), c && (o ? (t.call(e, i), t = null) : (c = t, t = function (e, t, n) {
            return c.call(ae(e), n)
        })), t))
            for (; l > s; s++) t(e[s], n, o ? i : i.call(e[s], s, t(e[s], n)));
        return r ? e : c ? t.call(e) : l ? t(e[0], n) : a
    },
        Ce = function (e) {
            return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
        };
    s.uid = 1, s.prototype = {
        register: function (e, t) {
            var n = t || {};
            return e.nodeType ? e[this.expando] = n : Object.defineProperty(e, this.expando, {
                value: n,
                writable: !0,
                configurable: !0
            }), e[this.expando]
        },
        cache: function (e) {
            if (!Ce(e)) return {};
            var t = e[this.expando];
            return t || (t = {}, Ce(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                value: t,
                configurable: !0
            }))), t
        },
        set: function (e, t, n) {
            var i, r = this.cache(e);
            if ("string" == typeof t) r[t] = n;
            else
                for (i in t) r[i] = t[i];
            return r
        },
        get: function (e, t) {
            return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
        },
        access: function (e, t, n) {
            var i;
            return void 0 === t || t && "string" == typeof t && void 0 === n ? (i = this.get(e, t), void 0 !== i ? i : this.get(e, ae.camelCase(t))) : (this.set(e, t, n), void 0 !== n ? n : t)
        },
        remove: function (e, t) {
            var n, i, r, a = e[this.expando];
            if (void 0 !== a) {
                if (void 0 === t) this.register(e);
                else {
                    ae.isArray(t) ? i = t.concat(t.map(ae.camelCase)) : (r = ae.camelCase(t), t in a ? i = [t, r] : (i = r, i = i in a ? [i] : i.match(_e) || [])), n = i.length;
                    for (; n--;) delete a[i[n]]
                } (void 0 === t || ae.isEmptyObject(a)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
            }
        },
        hasData: function (e) {
            var t = e[this.expando];
            return void 0 !== t && !ae.isEmptyObject(t)
        }
    };
    var Se = new s,
        Ae = new s,
        Te = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        Ee = /[A-Z]/g;
    ae.extend({
        hasData: function (e) {
            return Ae.hasData(e) || Se.hasData(e)
        },
        data: function (e, t, n) {
            return Ae.access(e, t, n)
        },
        removeData: function (e, t) {
            Ae.remove(e, t)
        },
        _data: function (e, t, n) {
            return Se.access(e, t, n)
        },
        _removeData: function (e, t) {
            Se.remove(e, t)
        }
    }), ae.fn.extend({
        data: function (e, t) {
            var n, i, r, a = this[0],
                o = a && a.attributes;
            if (void 0 === e) {
                if (this.length && (r = Ae.get(a), 1 === a.nodeType && !Se.get(a, "hasDataAttrs"))) {
                    for (n = o.length; n--;) o[n] && (i = o[n].name, 0 === i.indexOf("data-") && (i = ae.camelCase(i.slice(5)), l(a, i, r[i])));
                    Se.set(a, "hasDataAttrs", !0)
                }
                return r
            }
            return "object" == typeof e ? this.each(function () {
                Ae.set(this, e)
            }) : ke(this, function (t) {
                var n, i;
                if (a && void 0 === t) {
                    if (n = Ae.get(a, e) || Ae.get(a, e.replace(Ee, "-$&").toLowerCase()), void 0 !== n) return n;
                    if (i = ae.camelCase(e), n = Ae.get(a, i), void 0 !== n) return n;
                    if (n = l(a, i, void 0), void 0 !== n) return n
                } else i = ae.camelCase(e), this.each(function () {
                    var n = Ae.get(this, i);
                    Ae.set(this, i, t), e.indexOf("-") > -1 && void 0 !== n && Ae.set(this, e, t)
                })
            }, null, t, arguments.length > 1, null, !0)
        },
        removeData: function (e) {
            return this.each(function () {
                Ae.remove(this, e)
            })
        }
    }), ae.extend({
        queue: function (e, t, n) {
            var i;
            return e ? (t = (t || "fx") + "queue", i = Se.get(e, t), n && (!i || ae.isArray(n) ? i = Se.access(e, t, ae.makeArray(n)) : i.push(n)), i || []) : void 0
        },
        dequeue: function (e, t) {
            t = t || "fx";
            var n = ae.queue(e, t),
                i = n.length,
                r = n.shift(),
                a = ae._queueHooks(e, t),
                o = function () {
                    ae.dequeue(e, t)
                };
            "inprogress" === r && (r = n.shift(), i--), r && ("fx" === t && n.unshift("inprogress"), delete a.stop, r.call(e, o, a)), !i && a && a.empty.fire()
        },
        _queueHooks: function (e, t) {
            var n = t + "queueHooks";
            return Se.get(e, n) || Se.access(e, n, {
                empty: ae.Callbacks("once memory").add(function () {
                    Se.remove(e, [t + "queue", n])
                })
            })
        }
    }), ae.fn.extend({
        queue: function (e, t) {
            var n = 2;
            return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? ae.queue(this[0], e) : void 0 === t ? this : this.each(function () {
                var n = ae.queue(this, e, t);
                ae._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && ae.dequeue(this, e)
            })
        },
        dequeue: function (e) {
            return this.each(function () {
                ae.dequeue(this, e)
            })
        },
        clearQueue: function (e) {
            return this.queue(e || "fx", [])
        },
        promise: function (e, t) {
            var n, i = 1,
                r = ae.Deferred(),
                a = this,
                o = this.length,
                s = function () {
                    --i || r.resolveWith(a, [a])
                };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; o--;) n = Se.get(a[o], e + "queueHooks"), n && n.empty && (i++, n.empty.add(s));
            return s(), r.promise(t)
        }
    });
    var De = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        $e = new RegExp("^(?:([+-])=|)(" + De + ")([a-z%]*)$", "i"),
        Me = ["Top", "Right", "Bottom", "Left"],
        Re = function (e, t) {
            return e = t || e, "none" === ae.css(e, "display") || !ae.contains(e.ownerDocument, e)
        },
        Ie = /^(?:checkbox|radio)$/i,
        Pe = /<([\w:-]+)/,
        He = /^$|\/(?:java|ecma)script/i,
        Oe = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    Oe.optgroup = Oe.option, Oe.tbody = Oe.tfoot = Oe.colgroup = Oe.caption = Oe.thead, Oe.th = Oe.td;
    var je = /<|&#?\w+;/;
    ! function () {
        var e = X.createDocumentFragment(),
            t = e.appendChild(X.createElement("div")),
            n = X.createElement("input");
        n.setAttribute("type", "radio"), n.setAttribute("checked", "checked"), n.setAttribute("name", "t"), t.appendChild(n), ie.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, t.innerHTML = "<textarea>x</textarea>", ie.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
    }();
    var Ne = /^key/,
        ze = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        Le = /^([^.]*)(?:\.(.+)|)/;
    ae.event = {
        global: {},
        add: function (e, t, n, i, r) {
            var a, o, s, l, c, u, d, h, f, p, m, g = Se.get(e);
            if (g)
                for (n.handler && (a = n, n = a.handler, r = a.selector), n.guid || (n.guid = ae.guid++), (l = g.events) || (l = g.events = {}), (o = g.handle) || (o = g.handle = function (t) {
                    return "undefined" != typeof ae && ae.event.triggered !== t.type ? ae.event.dispatch.apply(e, arguments) : void 0
                }), t = (t || "").match(_e) || [""], c = t.length; c--;) s = Le.exec(t[c]) || [], f = m = s[1], p = (s[2] || "").split(".").sort(), f && (d = ae.event.special[f] || {}, f = (r ? d.delegateType : d.bindType) || f, d = ae.event.special[f] || {}, u = ae.extend({
                    type: f,
                    origType: m,
                    data: i,
                    handler: n,
                    guid: n.guid,
                    selector: r,
                    needsContext: r && ae.expr.match.needsContext.test(r),
                    namespace: p.join(".")
                }, a), (h = l[f]) || (h = l[f] = [], h.delegateCount = 0, d.setup && d.setup.call(e, i, p, o) !== !1 || e.addEventListener && e.addEventListener(f, o)), d.add && (d.add.call(e, u), u.handler.guid || (u.handler.guid = n.guid)), r ? h.splice(h.delegateCount++, 0, u) : h.push(u), ae.event.global[f] = !0)
        },
        remove: function (e, t, n, i, r) {
            var a, o, s, l, c, u, d, h, f, p, m, g = Se.hasData(e) && Se.get(e);
            if (g && (l = g.events)) {
                for (t = (t || "").match(_e) || [""], c = t.length; c--;)
                    if (s = Le.exec(t[c]) || [], f = m = s[1], p = (s[2] || "").split(".").sort(), f) {
                        for (d = ae.event.special[f] || {}, f = (i ? d.delegateType : d.bindType) || f, h = l[f] || [], s = s[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), o = a = h.length; a--;) u = h[a], !r && m !== u.origType || n && n.guid !== u.guid || s && !s.test(u.namespace) || i && i !== u.selector && ("**" !== i || !u.selector) || (h.splice(a, 1), u.selector && h.delegateCount--, d.remove && d.remove.call(e, u));
                        o && !h.length && (d.teardown && d.teardown.call(e, p, g.handle) !== !1 || ae.removeEvent(e, f, g.handle), delete l[f])
                    } else
                        for (f in l) ae.event.remove(e, f + t[c], n, i, !0);
                ae.isEmptyObject(l) && Se.remove(e, "handle events")
            }
        },
        dispatch: function (e) {
            e = ae.event.fix(e);
            var t, n, i, r, a, o = [],
                s = K.call(arguments),
                l = (Se.get(this, "events") || {})[e.type] || [],
                c = ae.event.special[e.type] || {};
            if (s[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                for (o = ae.event.handlers.call(this, e, l), t = 0;
                    (r = o[t++]) && !e.isPropagationStopped();)
                    for (e.currentTarget = r.elem, n = 0;
                        (a = r.handlers[n++]) && !e.isImmediatePropagationStopped();)(!e.rnamespace || e.rnamespace.test(a.namespace)) && (e.handleObj = a, e.data = a.data, i = ((ae.event.special[a.origType] || {}).handle || a.handler).apply(r.elem, s), void 0 !== i && (e.result = i) === !1 && (e.preventDefault(), e.stopPropagation()));
                return c.postDispatch && c.postDispatch.call(this, e), e.result
            }
        },
        handlers: function (e, t) {
            var n, i, r, a, o = [],
                s = t.delegateCount,
                l = e.target;
            if (s && l.nodeType && ("click" !== e.type || isNaN(e.button) || e.button < 1))
                for (; l !== this; l = l.parentNode || this)
                    if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) {
                        for (i = [], n = 0; s > n; n++) a = t[n], r = a.selector + " ", void 0 === i[r] && (i[r] = a.needsContext ? ae(r, this).index(l) > -1 : ae.find(r, this, null, [l]).length), i[r] && i.push(a);
                        i.length && o.push({
                            elem: l,
                            handlers: i
                        })
                    } return s < t.length && o.push({
                        elem: this,
                        handlers: t.slice(s)
                    }), o
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function (e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (e, t) {
                var n, i, r, a = t.button;
                return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || X, i = n.documentElement, r = n.body, e.pageX = t.clientX + (i && i.scrollLeft || r && r.scrollLeft || 0) - (i && i.clientLeft || r && r.clientLeft || 0), e.pageY = t.clientY + (i && i.scrollTop || r && r.scrollTop || 0) - (i && i.clientTop || r && r.clientTop || 0)), e.which || void 0 === a || (e.which = 1 & a ? 1 : 2 & a ? 3 : 4 & a ? 2 : 0), e
            }
        },
        fix: function (e) {
            if (e[ae.expando]) return e;
            var t, n, i, r = e.type,
                a = e,
                o = this.fixHooks[r];
            for (o || (this.fixHooks[r] = o = ze.test(r) ? this.mouseHooks : Ne.test(r) ? this.keyHooks : {}), i = o.props ? this.props.concat(o.props) : this.props, e = new ae.Event(a), t = i.length; t--;) n = i[t], e[n] = a[n];
            return e.target || (e.target = X), 3 === e.target.nodeType && (e.target = e.target.parentNode), o.filter ? o.filter(e, a) : e
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function () {
                    return this !== m() && this.focus ? (this.focus(), !1) : void 0
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function () {
                    return this === m() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function () {
                    return "checkbox" === this.type && this.click && ae.nodeName(this, "input") ? (this.click(), !1) : void 0
                },
                _default: function (e) {
                    return ae.nodeName(e.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function (e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        }
    }, ae.removeEvent = function (e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n)
    }, ae.Event = function (e, t) {
        return this instanceof ae.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? f : p) : this.type = e, t && ae.extend(this, t), this.timeStamp = e && e.timeStamp || ae.now(), void (this[ae.expando] = !0)) : new ae.Event(e, t)
    }, ae.Event.prototype = {
        constructor: ae.Event,
        isDefaultPrevented: p,
        isPropagationStopped: p,
        isImmediatePropagationStopped: p,
        isSimulated: !1,
        preventDefault: function () {
            var e = this.originalEvent;
            this.isDefaultPrevented = f, e && !this.isSimulated && e.preventDefault()
        },
        stopPropagation: function () {
            var e = this.originalEvent;
            this.isPropagationStopped = f, e && !this.isSimulated && e.stopPropagation()
        },
        stopImmediatePropagation: function () {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = f, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation()
        }
    }, ae.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function (e, t) {
        ae.event.special[e] = {
            delegateType: t,
            bindType: t,
            handle: function (e) {
                var n, i = this,
                    r = e.relatedTarget,
                    a = e.handleObj;
                return (!r || r !== i && !ae.contains(i, r)) && (e.type = a.origType, n = a.handler.apply(this, arguments), e.type = t), n
            }
        }
    }), ae.fn.extend({
        on: function (e, t, n, i) {
            return g(this, e, t, n, i)
        },
        one: function (e, t, n, i) {
            return g(this, e, t, n, i, 1)
        },
        off: function (e, t, n) {
            var i, r;
            if (e && e.preventDefault && e.handleObj) return i = e.handleObj, ae(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
            if ("object" == typeof e) {
                for (r in e) this.off(r, t, e[r]);
                return this
            }
            return (t === !1 || "function" == typeof t) && (n = t, t = void 0), n === !1 && (n = p), this.each(function () {
                ae.event.remove(this, e, n, t)
            })
        }
    });
    var Fe = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
        Be = /<script|<style|<link/i,
        We = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Ue = /^true\/(.*)/,
        qe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    ae.extend({
        htmlPrefilter: function (e) {
            return e.replace(Fe, "<$1></$2>")
        },
        clone: function (e, t, n) {
            var i, r, a, o, s = e.cloneNode(!0),
                l = ae.contains(e.ownerDocument, e);
            if (!(ie.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ae.isXMLDoc(e)))
                for (o = u(s), a = u(e), i = 0, r = a.length; r > i; i++) _(a[i], o[i]);
            if (t)
                if (n)
                    for (a = a || u(e), o = o || u(s), i = 0, r = a.length; r > i; i++) w(a[i], o[i]);
                else w(e, s);
            return o = u(s, "script"), o.length > 0 && d(o, !l && u(e, "script")), s
        },
        cleanData: function (e) {
            for (var t, n, i, r = ae.event.special, a = 0; void 0 !== (n = e[a]); a++)
                if (Ce(n)) {
                    if (t = n[Se.expando]) {
                        if (t.events)
                            for (i in t.events) r[i] ? ae.event.remove(n, i) : ae.removeEvent(n, i, t.handle);
                        n[Se.expando] = void 0
                    }
                    n[Ae.expando] && (n[Ae.expando] = void 0)
                }
        }
    }), ae.fn.extend({
        domManip: x,
        detach: function (e) {
            return k(this, e, !0)
        },
        remove: function (e) {
            return k(this, e)
        },
        text: function (e) {
            return ke(this, function (e) {
                return void 0 === e ? ae.text(this) : this.empty().each(function () {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = e)
                })
            }, null, e, arguments.length)
        },
        append: function () {
            return x(this, arguments, function (e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = v(this, e);
                    t.appendChild(e)
                }
            })
        },
        prepend: function () {
            return x(this, arguments, function (e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = v(this, e);
                    t.insertBefore(e, t.firstChild)
                }
            })
        },
        before: function () {
            return x(this, arguments, function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        },
        after: function () {
            return x(this, arguments, function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        },
        empty: function () {
            for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (ae.cleanData(u(e, !1)), e.textContent = "");
            return this
        },
        clone: function (e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function () {
                return ae.clone(this, e, t)
            })
        },
        html: function (e) {
            return ke(this, function (e) {
                var t = this[0] || {},
                    n = 0,
                    i = this.length;
                if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof e && !Be.test(e) && !Oe[(Pe.exec(e) || ["", ""])[1].toLowerCase()]) {
                    e = ae.htmlPrefilter(e);
                    try {
                        for (; i > n; n++) t = this[n] || {}, 1 === t.nodeType && (ae.cleanData(u(t, !1)), t.innerHTML = e);
                        t = 0
                    } catch (r) { }
                }
                t && this.empty().append(e)
            }, null, e, arguments.length)
        },
        replaceWith: function () {
            var e = [];
            return x(this, arguments, function (t) {
                var n = this.parentNode;
                ae.inArray(this, e) < 0 && (ae.cleanData(u(this)), n && n.replaceChild(t, this))
            }, e)
        }
    }), ae.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function (e, t) {
        ae.fn[e] = function (e) {
            for (var n, i = [], r = ae(e), a = r.length - 1, o = 0; a >= o; o++) n = o === a ? this : this.clone(!0), ae(r[o])[t](n), Q.apply(i, n.get());
            return this.pushStack(i)
        }
    });
    var Ge, Ye = {
        HTML: "block",
        BODY: "block"
    },
        Ve = /^margin/,
        Xe = new RegExp("^(" + De + ")(?!px)[a-z%]+$", "i"),
        Ke = function (t) {
            var n = t.ownerDocument.defaultView;
            return n && n.opener || (n = e), n.getComputedStyle(t)
        },
        Ze = function (e, t, n, i) {
            var r, a, o = {};
            for (a in t) o[a] = e.style[a], e.style[a] = t[a];
            r = n.apply(e, i || []);
            for (a in t) e.style[a] = o[a];
            return r
        },
        Qe = X.documentElement;
    ! function () {
        function t() {
            s.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", s.innerHTML = "", Qe.appendChild(o);
            var t = e.getComputedStyle(s);
            n = "1%" !== t.top, a = "2px" === t.marginLeft, i = "4px" === t.width, s.style.marginRight = "50%", r = "4px" === t.marginRight, Qe.removeChild(o)
        }
        var n, i, r, a, o = X.createElement("div"),
            s = X.createElement("div");
        s.style && (s.style.backgroundClip = "content-box", s.cloneNode(!0).style.backgroundClip = "", ie.clearCloneStyle = "content-box" === s.style.backgroundClip, o.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", o.appendChild(s), ae.extend(ie, {
            pixelPosition: function () {
                return t(), n
            },
            boxSizingReliable: function () {
                return null == i && t(), i
            },
            pixelMarginRight: function () {
                return null == i && t(), r
            },
            reliableMarginLeft: function () {
                return null == i && t(), a
            },
            reliableMarginRight: function () {
                var t, n = s.appendChild(X.createElement("div"));
                return n.style.cssText = s.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", n.style.marginRight = n.style.width = "0", s.style.width = "1px", Qe.appendChild(o), t = !parseFloat(e.getComputedStyle(n).marginRight), Qe.removeChild(o), s.removeChild(n), t
            }
        }))
    }();
    var Je = /^(none|table(?!-c[ea]).+)/,
        et = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        tt = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        nt = ["Webkit", "O", "Moz", "ms"],
        it = X.createElement("div").style;
    ae.extend({
        cssHooks: {
            opacity: {
                get: function (e, t) {
                    if (t) {
                        var n = A(e, "opacity");
                        return "" === n ? "1" : n
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function (e, t, n, i) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var r, a, o, s = ae.camelCase(t),
                    l = e.style;
                return t = ae.cssProps[s] || (ae.cssProps[s] = E(s) || s), o = ae.cssHooks[t] || ae.cssHooks[s], void 0 === n ? o && "get" in o && void 0 !== (r = o.get(e, !1, i)) ? r : l[t] : (a = typeof n, "string" === a && (r = $e.exec(n)) && r[1] && (n = c(e, t, r), a = "number"), null != n && n === n && ("number" === a && (n += r && r[3] || (ae.cssNumber[s] ? "" : "px")), ie.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), o && "set" in o && void 0 === (n = o.set(e, n, i)) || (l[t] = n)), void 0)
            }
        },
        css: function (e, t, n, i) {
            var r, a, o, s = ae.camelCase(t);
            return t = ae.cssProps[s] || (ae.cssProps[s] = E(s) || s), o = ae.cssHooks[t] || ae.cssHooks[s], o && "get" in o && (r = o.get(e, !0, n)), void 0 === r && (r = A(e, t, i)), "normal" === r && t in tt && (r = tt[t]), "" === n || n ? (a = parseFloat(r), n === !0 || isFinite(a) ? a || 0 : r) : r
        }
    }), ae.each(["height", "width"], function (e, t) {
        ae.cssHooks[t] = {
            get: function (e, n, i) {
                return n ? Je.test(ae.css(e, "display")) && 0 === e.offsetWidth ? Ze(e, et, function () {
                    return M(e, t, i)
                }) : M(e, t, i) : void 0
            },
            set: function (e, n, i) {
                var r, a = i && Ke(e),
                    o = i && $(e, t, i, "border-box" === ae.css(e, "boxSizing", !1, a), a);
                return o && (r = $e.exec(n)) && "px" !== (r[3] || "px") && (e.style[t] = n, n = ae.css(e, t)), D(e, n, o)
            }
        }
    }), ae.cssHooks.marginLeft = T(ie.reliableMarginLeft, function (e, t) {
        return t ? (parseFloat(A(e, "marginLeft")) || e.getBoundingClientRect().left - Ze(e, {
            marginLeft: 0
        }, function () {
            return e.getBoundingClientRect().left
        })) + "px" : void 0
    }), ae.cssHooks.marginRight = T(ie.reliableMarginRight, function (e, t) {
        return t ? Ze(e, {
            display: "inline-block"
        }, A, [e, "marginRight"]) : void 0
    }), ae.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function (e, t) {
        ae.cssHooks[e + t] = {
            expand: function (n) {
                for (var i = 0, r = {}, a = "string" == typeof n ? n.split(" ") : [n]; 4 > i; i++) r[e + Me[i] + t] = a[i] || a[i - 2] || a[0];
                return r
            }
        }, Ve.test(e) || (ae.cssHooks[e + t].set = D)
    }), ae.fn.extend({
        css: function (e, t) {
            return ke(this, function (e, t, n) {
                var i, r, a = {},
                    o = 0;
                if (ae.isArray(t)) {
                    for (i = Ke(e), r = t.length; r > o; o++) a[t[o]] = ae.css(e, t[o], !1, i);
                    return a
                }
                return void 0 !== n ? ae.style(e, t, n) : ae.css(e, t)
            }, e, t, arguments.length > 1)
        },
        show: function () {
            return R(this, !0)
        },
        hide: function () {
            return R(this)
        },
        toggle: function (e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () {
                Re(this) ? ae(this).show() : ae(this).hide()
            })
        }
    }), ae.Tween = I, I.prototype = {
        constructor: I,
        init: function (e, t, n, i, r, a) {
            this.elem = e, this.prop = n, this.easing = r || ae.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = i, this.unit = a || (ae.cssNumber[n] ? "" : "px")
        },
        cur: function () {
            var e = I.propHooks[this.prop];
            return e && e.get ? e.get(this) : I.propHooks._default.get(this)
        },
        run: function (e) {
            var t, n = I.propHooks[this.prop];
            return this.options.duration ? this.pos = t = ae.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : I.propHooks._default.set(this), this
        }
    }, I.prototype.init.prototype = I.prototype, I.propHooks = {
        _default: {
            get: function (e) {
                var t;
                return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = ae.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0)
            },
            set: function (e) {
                ae.fx.step[e.prop] ? ae.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[ae.cssProps[e.prop]] && !ae.cssHooks[e.prop] ? e.elem[e.prop] = e.now : ae.style(e.elem, e.prop, e.now + e.unit)
            }
        }
    }, I.propHooks.scrollTop = I.propHooks.scrollLeft = {
        set: function (e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, ae.easing = {
        linear: function (e) {
            return e
        },
        swing: function (e) {
            return .5 - Math.cos(e * Math.PI) / 2
        },
        _default: "swing"
    }, ae.fx = I.prototype.init, ae.fx.step = {};
    var rt, at, ot = /^(?:toggle|show|hide)$/,
        st = /queueHooks$/;
    ae.Animation = ae.extend(z, {
        tweeners: {
            "*": [function (e, t) {
                var n = this.createTween(e, t);
                return c(n.elem, e, $e.exec(t), n), n
            }]
        },
        tweener: function (e, t) {
            ae.isFunction(e) ? (t = e, e = ["*"]) : e = e.match(_e);
            for (var n, i = 0, r = e.length; r > i; i++) n = e[i], z.tweeners[n] = z.tweeners[n] || [], z.tweeners[n].unshift(t)
        },
        prefilters: [j],
        prefilter: function (e, t) {
            t ? z.prefilters.unshift(e) : z.prefilters.push(e)
        }
    }), ae.speed = function (e, t, n) {
        var i = e && "object" == typeof e ? ae.extend({}, e) : {
            complete: n || !n && t || ae.isFunction(e) && e,
            duration: e,
            easing: n && t || t && !ae.isFunction(t) && t
        };
        return i.duration = ae.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in ae.fx.speeds ? ae.fx.speeds[i.duration] : ae.fx.speeds._default, (null == i.queue || i.queue === !0) && (i.queue = "fx"), i.old = i.complete, i.complete = function () {
            ae.isFunction(i.old) && i.old.call(this), i.queue && ae.dequeue(this, i.queue)
        }, i
    }, ae.fn.extend({
        fadeTo: function (e, t, n, i) {
            return this.filter(Re).css("opacity", 0).show().end().animate({
                opacity: t
            }, e, n, i)
        },
        animate: function (e, t, n, i) {
            var r = ae.isEmptyObject(e),
                a = ae.speed(t, n, i),
                o = function () {
                    var t = z(this, ae.extend({}, e), a);
                    (r || Se.get(this, "finish")) && t.stop(!0)
                };
            return o.finish = o, r || a.queue === !1 ? this.each(o) : this.queue(a.queue, o)
        },
        stop: function (e, t, n) {
            var i = function (e) {
                var t = e.stop;
                delete e.stop, t(n)
            };
            return "string" != typeof e && (n = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), this.each(function () {
                var t = !0,
                    r = null != e && e + "queueHooks",
                    a = ae.timers,
                    o = Se.get(this);
                if (r) o[r] && o[r].stop && i(o[r]);
                else
                    for (r in o) o[r] && o[r].stop && st.test(r) && i(o[r]);
                for (r = a.length; r--;) a[r].elem !== this || null != e && a[r].queue !== e || (a[r].anim.stop(n), t = !1, a.splice(r, 1));
                (t || !n) && ae.dequeue(this, e)
            })
        },
        finish: function (e) {
            return e !== !1 && (e = e || "fx"), this.each(function () {
                var t, n = Se.get(this),
                    i = n[e + "queue"],
                    r = n[e + "queueHooks"],
                    a = ae.timers,
                    o = i ? i.length : 0;
                for (n.finish = !0, ae.queue(this, e, []), r && r.stop && r.stop.call(this, !0), t = a.length; t--;) a[t].elem === this && a[t].queue === e && (a[t].anim.stop(!0), a.splice(t, 1));
                for (t = 0; o > t; t++) i[t] && i[t].finish && i[t].finish.call(this);
                delete n.finish
            })
        }
    }), ae.each(["toggle", "show", "hide"], function (e, t) {
        var n = ae.fn[t];
        ae.fn[t] = function (e, i, r) {
            return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(H(t, !0), e, i, r)
        }
    }), ae.each({
        slideDown: H("show"),
        slideUp: H("hide"),
        slideToggle: H("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function (e, t) {
        ae.fn[e] = function (e, n, i) {
            return this.animate(t, e, n, i)
        }
    }), ae.timers = [], ae.fx.tick = function () {
        var e, t = 0,
            n = ae.timers;
        for (rt = ae.now(); t < n.length; t++) e = n[t], e() || n[t] !== e || n.splice(t--, 1);
        n.length || ae.fx.stop(), rt = void 0
    }, ae.fx.timer = function (e) {
        ae.timers.push(e), e() ? ae.fx.start() : ae.timers.pop()
    }, ae.fx.interval = 13, ae.fx.start = function () {
        at || (at = e.setInterval(ae.fx.tick, ae.fx.interval))
    }, ae.fx.stop = function () {
        e.clearInterval(at), at = null
    }, ae.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, ae.fn.delay = function (t, n) {
        return t = ae.fx ? ae.fx.speeds[t] || t : t, n = n || "fx", this.queue(n, function (n, i) {
            var r = e.setTimeout(n, t);
            i.stop = function () {
                e.clearTimeout(r)
            }
        })
    },
        function () {
            var e = X.createElement("input"),
                t = X.createElement("select"),
                n = t.appendChild(X.createElement("option"));
            e.type = "checkbox", ie.checkOn = "" !== e.value, ie.optSelected = n.selected, t.disabled = !0, ie.optDisabled = !n.disabled, e = X.createElement("input"), e.value = "t", e.type = "radio", ie.radioValue = "t" === e.value
        }();
    var lt, ct = ae.expr.attrHandle;
    ae.fn.extend({
        attr: function (e, t) {
            return ke(this, ae.attr, e, t, arguments.length > 1)
        },
        removeAttr: function (e) {
            return this.each(function () {
                ae.removeAttr(this, e)
            })
        }
    }), ae.extend({
        attr: function (e, t, n) {
            var i, r, a = e.nodeType;
            if (3 !== a && 8 !== a && 2 !== a) return "undefined" == typeof e.getAttribute ? ae.prop(e, t, n) : (1 === a && ae.isXMLDoc(e) || (t = t.toLowerCase(), r = ae.attrHooks[t] || (ae.expr.match.bool.test(t) ? lt : void 0)), void 0 !== n ? null === n ? void ae.removeAttr(e, t) : r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""), n) : r && "get" in r && null !== (i = r.get(e, t)) ? i : (i = ae.find.attr(e, t), null == i ? void 0 : i))
        },
        attrHooks: {
            type: {
                set: function (e, t) {
                    if (!ie.radioValue && "radio" === t && ae.nodeName(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t), n && (e.value = n), t
                    }
                }
            }
        },
        removeAttr: function (e, t) {
            var n, i, r = 0,
                a = t && t.match(_e);
            if (a && 1 === e.nodeType)
                for (; n = a[r++];) i = ae.propFix[n] || n, ae.expr.match.bool.test(n) && (e[i] = !1), e.removeAttribute(n)
        }
    }), lt = {
        set: function (e, t, n) {
            return t === !1 ? ae.removeAttr(e, n) : e.setAttribute(n, n), n
        }
    }, ae.each(ae.expr.match.bool.source.match(/\w+/g), function (e, t) {
        var n = ct[t] || ae.find.attr;
        ct[t] = function (e, t, i) {
            var r, a;
            return i || (a = ct[t], ct[t] = r, r = null != n(e, t, i) ? t.toLowerCase() : null, ct[t] = a), r
        }
    });
    var ut = /^(?:input|select|textarea|button)$/i,
        dt = /^(?:a|area)$/i;
    ae.fn.extend({
        prop: function (e, t) {
            return ke(this, ae.prop, e, t, arguments.length > 1)
        },
        removeProp: function (e) {
            return this.each(function () {
                delete this[ae.propFix[e] || e]
            })
        }
    }), ae.extend({
        prop: function (e, t, n) {
            var i, r, a = e.nodeType;
            if (3 !== a && 8 !== a && 2 !== a) return 1 === a && ae.isXMLDoc(e) || (t = ae.propFix[t] || t, r = ae.propHooks[t]), void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get" in r && null !== (i = r.get(e, t)) ? i : e[t]
        },
        propHooks: {
            tabIndex: {
                get: function (e) {
                    var t = ae.find.attr(e, "tabindex");
                    return t ? parseInt(t, 10) : ut.test(e.nodeName) || dt.test(e.nodeName) && e.href ? 0 : -1
                }
            }
        },
        propFix: {
            "for": "htmlFor",
            "class": "className"
        }
    }), ie.optSelected || (ae.propHooks.selected = {
        get: function (e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null
        },
        set: function (e) {
            var t = e.parentNode;
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
        }
    }), ae.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
        ae.propFix[this.toLowerCase()] = this
    });
    var ht = /[\t\r\n\f]/g;
    ae.fn.extend({
        addClass: function (e) {
            var t, n, i, r, a, o, s, l = 0;
            if (ae.isFunction(e)) return this.each(function (t) {
                ae(this).addClass(e.call(this, t, L(this)))
            });
            if ("string" == typeof e && e)
                for (t = e.match(_e) || []; n = this[l++];)
                    if (r = L(n), i = 1 === n.nodeType && (" " + r + " ").replace(ht, " ")) {
                        for (o = 0; a = t[o++];) i.indexOf(" " + a + " ") < 0 && (i += a + " ");
                        s = ae.trim(i), r !== s && n.setAttribute("class", s)
                    } return this
        },
        removeClass: function (e) {
            var t, n, i, r, a, o, s, l = 0;
            if (ae.isFunction(e)) return this.each(function (t) {
                ae(this).removeClass(e.call(this, t, L(this)))
            });
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof e && e)
                for (t = e.match(_e) || []; n = this[l++];)
                    if (r = L(n), i = 1 === n.nodeType && (" " + r + " ").replace(ht, " ")) {
                        for (o = 0; a = t[o++];)
                            for (; i.indexOf(" " + a + " ") > -1;) i = i.replace(" " + a + " ", " ");
                        s = ae.trim(i), r !== s && n.setAttribute("class", s)
                    } return this
        },
        toggleClass: function (e, t) {
            var n = typeof e;
            return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : ae.isFunction(e) ? this.each(function (n) {
                ae(this).toggleClass(e.call(this, n, L(this), t), t)
            }) : this.each(function () {
                var t, i, r, a;
                if ("string" === n)
                    for (i = 0, r = ae(this), a = e.match(_e) || []; t = a[i++];) r.hasClass(t) ? r.removeClass(t) : r.addClass(t);
                else (void 0 === e || "boolean" === n) && (t = L(this), t && Se.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || e === !1 ? "" : Se.get(this, "__className__") || ""))
            })
        },
        hasClass: function (e) {
            var t, n, i = 0;
            for (t = " " + e + " "; n = this[i++];)
                if (1 === n.nodeType && (" " + L(n) + " ").replace(ht, " ").indexOf(t) > -1) return !0;
            return !1
        }
    });
    var ft = /\r/g,
        pt = /[\x20\t\r\n\f]+/g;
    ae.fn.extend({
        val: function (e) {
            var t, n, i, r = this[0]; {
                if (arguments.length) return i = ae.isFunction(e), this.each(function (n) {
                    var r;
                    1 === this.nodeType && (r = i ? e.call(this, n, ae(this).val()) : e, null == r ? r = "" : "number" == typeof r ? r += "" : ae.isArray(r) && (r = ae.map(r, function (e) {
                        return null == e ? "" : e + ""
                    })), t = ae.valHooks[this.type] || ae.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r))
                });
                if (r) return t = ae.valHooks[r.type] || ae.valHooks[r.nodeName.toLowerCase()], t && "get" in t && void 0 !== (n = t.get(r, "value")) ? n : (n = r.value, "string" == typeof n ? n.replace(ft, "") : null == n ? "" : n)
            }
        }
    }), ae.extend({
        valHooks: {
            option: {
                get: function (e) {
                    var t = ae.find.attr(e, "value");
                    return null != t ? t : ae.trim(ae.text(e)).replace(pt, " ")
                }
            },
            select: {
                get: function (e) {
                    for (var t, n, i = e.options, r = e.selectedIndex, a = "select-one" === e.type || 0 > r, o = a ? null : [], s = a ? r + 1 : i.length, l = 0 > r ? s : a ? r : 0; s > l; l++)
                        if (n = i[l], (n.selected || l === r) && (ie.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !ae.nodeName(n.parentNode, "optgroup"))) {
                            if (t = ae(n).val(), a) return t;
                            o.push(t)
                        } return o
                },
                set: function (e, t) {
                    for (var n, i, r = e.options, a = ae.makeArray(t), o = r.length; o--;) i = r[o], (i.selected = ae.inArray(ae.valHooks.option.get(i), a) > -1) && (n = !0);
                    return n || (e.selectedIndex = -1), a
                }
            }
        }
    }), ae.each(["radio", "checkbox"], function () {
        ae.valHooks[this] = {
            set: function (e, t) {
                return ae.isArray(t) ? e.checked = ae.inArray(ae(e).val(), t) > -1 : void 0
            }
        }, ie.checkOn || (ae.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value
        })
    });
    var mt = /^(?:focusinfocus|focusoutblur)$/;
    ae.extend(ae.event, {
        trigger: function (t, n, i, r) {
            var a, o, s, l, c, u, d, h = [i || X],
                f = ne.call(t, "type") ? t.type : t,
                p = ne.call(t, "namespace") ? t.namespace.split(".") : [];
            if (o = s = i = i || X, 3 !== i.nodeType && 8 !== i.nodeType && !mt.test(f + ae.event.triggered) && (f.indexOf(".") > -1 && (p = f.split("."), f = p.shift(), p.sort()), c = f.indexOf(":") < 0 && "on" + f, t = t[ae.expando] ? t : new ae.Event(f, "object" == typeof t && t), t.isTrigger = r ? 2 : 3, t.namespace = p.join("."), t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = i),
                n = null == n ? [t] : ae.makeArray(n, [t]), d = ae.event.special[f] || {}, r || !d.trigger || d.trigger.apply(i, n) !== !1)) {
                if (!r && !d.noBubble && !ae.isWindow(i)) {
                    for (l = d.delegateType || f, mt.test(l + f) || (o = o.parentNode); o; o = o.parentNode) h.push(o), s = o;
                    s === (i.ownerDocument || X) && h.push(s.defaultView || s.parentWindow || e)
                }
                for (a = 0;
                    (o = h[a++]) && !t.isPropagationStopped();) t.type = a > 1 ? l : d.bindType || f, u = (Se.get(o, "events") || {})[t.type] && Se.get(o, "handle"), u && u.apply(o, n), u = c && o[c], u && u.apply && Ce(o) && (t.result = u.apply(o, n), t.result === !1 && t.preventDefault());
                return t.type = f, r || t.isDefaultPrevented() || d._default && d._default.apply(h.pop(), n) !== !1 || !Ce(i) || c && ae.isFunction(i[f]) && !ae.isWindow(i) && (s = i[c], s && (i[c] = null), ae.event.triggered = f, i[f](), ae.event.triggered = void 0, s && (i[c] = s)), t.result
            }
        },
        simulate: function (e, t, n) {
            var i = ae.extend(new ae.Event, n, {
                type: e,
                isSimulated: !0
            });
            ae.event.trigger(i, null, t)
        }
    }), ae.fn.extend({
        trigger: function (e, t) {
            return this.each(function () {
                ae.event.trigger(e, t, this)
            })
        },
        triggerHandler: function (e, t) {
            var n = this[0];
            return n ? ae.event.trigger(e, t, n, !0) : void 0
        }
    }), ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function (e, t) {
        ae.fn[t] = function (e, n) {
            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
        }
    }), ae.fn.extend({
        hover: function (e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        }
    }), ie.focusin = "onfocusin" in e, ie.focusin || ae.each({
        focus: "focusin",
        blur: "focusout"
    }, function (e, t) {
        var n = function (e) {
            ae.event.simulate(t, e.target, ae.event.fix(e))
        };
        ae.event.special[t] = {
            setup: function () {
                var i = this.ownerDocument || this,
                    r = Se.access(i, t);
                r || i.addEventListener(e, n, !0), Se.access(i, t, (r || 0) + 1)
            },
            teardown: function () {
                var i = this.ownerDocument || this,
                    r = Se.access(i, t) - 1;
                r ? Se.access(i, t, r) : (i.removeEventListener(e, n, !0), Se.remove(i, t))
            }
        }
    });
    var gt = e.location,
        vt = ae.now(),
        yt = /\?/;
    ae.parseJSON = function (e) {
        return JSON.parse(e + "")
    }, ae.parseXML = function (t) {
        var n;
        if (!t || "string" != typeof t) return null;
        try {
            n = (new e.DOMParser).parseFromString(t, "text/xml")
        } catch (i) {
            n = void 0
        }
        return (!n || n.getElementsByTagName("parsererror").length) && ae.error("Invalid XML: " + t), n
    };
    var bt = /#.*$/,
        wt = /([?&])_=[^&]*/,
        _t = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        xt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        kt = /^(?:GET|HEAD)$/,
        Ct = /^\/\//,
        St = {},
        At = {},
        Tt = "*/".concat("*"),
        Et = X.createElement("a");
    Et.href = gt.href, ae.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: gt.href,
            type: "GET",
            isLocal: xt.test(gt.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": Tt,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": ae.parseJSON,
                "text xml": ae.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function (e, t) {
            return t ? W(W(e, ae.ajaxSettings), t) : W(ae.ajaxSettings, e)
        },
        ajaxPrefilter: F(St),
        ajaxTransport: F(At),
        ajax: function (t, n) {
            function i(t, n, i, s) {
                var c, d, y, b, _, k = n;
                2 !== w && (w = 2, l && e.clearTimeout(l), r = void 0, o = s || "", x.readyState = t > 0 ? 4 : 0, c = t >= 200 && 300 > t || 304 === t, i && (b = U(h, x, i)), b = q(h, b, x, c), c ? (h.ifModified && (_ = x.getResponseHeader("Last-Modified"), _ && (ae.lastModified[a] = _), _ = x.getResponseHeader("etag"), _ && (ae.etag[a] = _)), 204 === t || "HEAD" === h.type ? k = "nocontent" : 304 === t ? k = "notmodified" : (k = b.state, d = b.data, y = b.error, c = !y)) : (y = k, (t || !k) && (k = "error", 0 > t && (t = 0))), x.status = t, x.statusText = (n || k) + "", c ? m.resolveWith(f, [d, k, x]) : m.rejectWith(f, [x, k, y]), x.statusCode(v), v = void 0, u && p.trigger(c ? "ajaxSuccess" : "ajaxError", [x, h, c ? d : y]), g.fireWith(f, [x, k]), u && (p.trigger("ajaxComplete", [x, h]), --ae.active || ae.event.trigger("ajaxStop")))
            }
            "object" == typeof t && (n = t, t = void 0), n = n || {};
            var r, a, o, s, l, c, u, d, h = ae.ajaxSetup({}, n),
                f = h.context || h,
                p = h.context && (f.nodeType || f.jquery) ? ae(f) : ae.event,
                m = ae.Deferred(),
                g = ae.Callbacks("once memory"),
                v = h.statusCode || {},
                y = {},
                b = {},
                w = 0,
                _ = "canceled",
                x = {
                    readyState: 0,
                    getResponseHeader: function (e) {
                        var t;
                        if (2 === w) {
                            if (!s)
                                for (s = {}; t = _t.exec(o);) s[t[1].toLowerCase()] = t[2];
                            t = s[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function () {
                        return 2 === w ? o : null
                    },
                    setRequestHeader: function (e, t) {
                        var n = e.toLowerCase();
                        return w || (e = b[n] = b[n] || e, y[e] = t), this
                    },
                    overrideMimeType: function (e) {
                        return w || (h.mimeType = e), this
                    },
                    statusCode: function (e) {
                        var t;
                        if (e)
                            if (2 > w)
                                for (t in e) v[t] = [v[t], e[t]];
                            else x.always(e[x.status]);
                        return this
                    },
                    abort: function (e) {
                        var t = e || _;
                        return r && r.abort(t), i(0, t), this
                    }
                };
            if (m.promise(x).complete = g.add, x.success = x.done, x.error = x.fail, h.url = ((t || h.url || gt.href) + "").replace(bt, "").replace(Ct, gt.protocol + "//"), h.type = n.method || n.type || h.method || h.type, h.dataTypes = ae.trim(h.dataType || "*").toLowerCase().match(_e) || [""], null == h.crossDomain) {
                c = X.createElement("a");
                try {
                    c.href = h.url, c.href = c.href, h.crossDomain = Et.protocol + "//" + Et.host != c.protocol + "//" + c.host
                } catch (k) {
                    h.crossDomain = !0
                }
            }
            if (h.data && h.processData && "string" != typeof h.data && (h.data = ae.param(h.data, h.traditional)), B(St, h, n, x), 2 === w) return x;
            u = ae.event && h.global, u && 0 === ae.active++ && ae.event.trigger("ajaxStart"), h.type = h.type.toUpperCase(), h.hasContent = !kt.test(h.type), a = h.url, h.hasContent || (h.data && (a = h.url += (yt.test(a) ? "&" : "?") + h.data, delete h.data), h.cache === !1 && (h.url = wt.test(a) ? a.replace(wt, "$1_=" + vt++) : a + (yt.test(a) ? "&" : "?") + "_=" + vt++)), h.ifModified && (ae.lastModified[a] && x.setRequestHeader("If-Modified-Since", ae.lastModified[a]), ae.etag[a] && x.setRequestHeader("If-None-Match", ae.etag[a])), (h.data && h.hasContent && h.contentType !== !1 || n.contentType) && x.setRequestHeader("Content-Type", h.contentType), x.setRequestHeader("Accept", h.dataTypes[0] && h.accepts[h.dataTypes[0]] ? h.accepts[h.dataTypes[0]] + ("*" !== h.dataTypes[0] ? ", " + Tt + "; q=0.01" : "") : h.accepts["*"]);
            for (d in h.headers) x.setRequestHeader(d, h.headers[d]);
            if (h.beforeSend && (h.beforeSend.call(f, x, h) === !1 || 2 === w)) return x.abort();
            _ = "abort";
            for (d in {
                success: 1,
                error: 1,
                complete: 1
            }) x[d](h[d]);
            if (r = B(At, h, n, x)) {
                if (x.readyState = 1, u && p.trigger("ajaxSend", [x, h]), 2 === w) return x;
                h.async && h.timeout > 0 && (l = e.setTimeout(function () {
                    x.abort("timeout")
                }, h.timeout));
                try {
                    w = 1, r.send(y, i)
                } catch (k) {
                    if (!(2 > w)) throw k;
                    i(-1, k)
                }
            } else i(-1, "No Transport");
            return x
        },
        getJSON: function (e, t, n) {
            return ae.get(e, t, n, "json")
        },
        getScript: function (e, t) {
            return ae.get(e, void 0, t, "script")
        }
    }), ae.each(["get", "post"], function (e, t) {
        ae[t] = function (e, n, i, r) {
            return ae.isFunction(n) && (r = r || i, i = n, n = void 0), ae.ajax(ae.extend({
                url: e,
                type: t,
                dataType: r,
                data: n,
                success: i
            }, ae.isPlainObject(e) && e))
        }
    }), ae._evalUrl = function (e) {
        return ae.ajax({
            url: e,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }, ae.fn.extend({
        wrapAll: function (e) {
            var t;
            return ae.isFunction(e) ? this.each(function (t) {
                ae(this).wrapAll(e.call(this, t))
            }) : (this[0] && (t = ae(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () {
                for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                return e
            }).append(this)), this)
        },
        wrapInner: function (e) {
            return ae.isFunction(e) ? this.each(function (t) {
                ae(this).wrapInner(e.call(this, t))
            }) : this.each(function () {
                var t = ae(this),
                    n = t.contents();
                n.length ? n.wrapAll(e) : t.append(e)
            })
        },
        wrap: function (e) {
            var t = ae.isFunction(e);
            return this.each(function (n) {
                ae(this).wrapAll(t ? e.call(this, n) : e)
            })
        },
        unwrap: function () {
            return this.parent().each(function () {
                ae.nodeName(this, "body") || ae(this).replaceWith(this.childNodes)
            }).end()
        }
    }), ae.expr.filters.hidden = function (e) {
        return !ae.expr.filters.visible(e)
    }, ae.expr.filters.visible = function (e) {
        return e.offsetWidth > 0 || e.offsetHeight > 0 || e.getClientRects().length > 0
    };
    var Dt = /%20/g,
        $t = /\[\]$/,
        Mt = /\r?\n/g,
        Rt = /^(?:submit|button|image|reset|file)$/i,
        It = /^(?:input|select|textarea|keygen)/i;
    ae.param = function (e, t) {
        var n, i = [],
            r = function (e, t) {
                t = ae.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
        if (void 0 === t && (t = ae.ajaxSettings && ae.ajaxSettings.traditional), ae.isArray(e) || e.jquery && !ae.isPlainObject(e)) ae.each(e, function () {
            r(this.name, this.value)
        });
        else
            for (n in e) G(n, e[n], t, r);
        return i.join("&").replace(Dt, "+")
    }, ae.fn.extend({
        serialize: function () {
            return ae.param(this.serializeArray())
        },
        serializeArray: function () {
            return this.map(function () {
                var e = ae.prop(this, "elements");
                return e ? ae.makeArray(e) : this
            }).filter(function () {
                var e = this.type;
                return this.name && !ae(this).is(":disabled") && It.test(this.nodeName) && !Rt.test(e) && (this.checked || !Ie.test(e))
            }).map(function (e, t) {
                var n = ae(this).val();
                return null == n ? null : ae.isArray(n) ? ae.map(n, function (e) {
                    return {
                        name: t.name,
                        value: e.replace(Mt, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: n.replace(Mt, "\r\n")
                }
            }).get()
        }
    }), ae.ajaxSettings.xhr = function () {
        try {
            return new e.XMLHttpRequest
        } catch (t) { }
    };
    var Pt = {
        0: 200,
        1223: 204
    },
        Ht = ae.ajaxSettings.xhr();
    ie.cors = !!Ht && "withCredentials" in Ht, ie.ajax = Ht = !!Ht, ae.ajaxTransport(function (t) {
        var n, i;
        return ie.cors || Ht && !t.crossDomain ? {
            send: function (r, a) {
                var o, s = t.xhr();
                if (s.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields)
                    for (o in t.xhrFields) s[o] = t.xhrFields[o];
                t.mimeType && s.overrideMimeType && s.overrideMimeType(t.mimeType), t.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest");
                for (o in r) s.setRequestHeader(o, r[o]);
                n = function (e) {
                    return function () {
                        n && (n = i = s.onload = s.onerror = s.onabort = s.onreadystatechange = null, "abort" === e ? s.abort() : "error" === e ? "number" != typeof s.status ? a(0, "error") : a(s.status, s.statusText) : a(Pt[s.status] || s.status, s.statusText, "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? {
                            binary: s.response
                        } : {
                            text: s.responseText
                        }, s.getAllResponseHeaders()))
                    }
                }, s.onload = n(), i = s.onerror = n("error"), void 0 !== s.onabort ? s.onabort = i : s.onreadystatechange = function () {
                    4 === s.readyState && e.setTimeout(function () {
                        n && i()
                    })
                }, n = n("abort");
                try {
                    s.send(t.hasContent && t.data || null)
                } catch (l) {
                    if (n) throw l
                }
            },
            abort: function () {
                n && n()
            }
        } : void 0
    }), ae.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function (e) {
                return ae.globalEval(e), e
            }
        }
    }), ae.ajaxPrefilter("script", function (e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
    }), ae.ajaxTransport("script", function (e) {
        if (e.crossDomain) {
            var t, n;
            return {
                send: function (i, r) {
                    t = ae("<script>").prop({
                        charset: e.scriptCharset,
                        src: e.url
                    }).on("load error", n = function (e) {
                        t.remove(), n = null, e && r("error" === e.type ? 404 : 200, e.type)
                    }), X.head.appendChild(t[0])
                },
                abort: function () {
                    n && n()
                }
            }
        }
    });
    var Ot = [],
        jt = /(=)\?(?=&|$)|\?\?/;
    ae.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function () {
            var e = Ot.pop() || ae.expando + "_" + vt++;
            return this[e] = !0, e
        }
    }), ae.ajaxPrefilter("json jsonp", function (t, n, i) {
        var r, a, o, s = t.jsonp !== !1 && (jt.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && jt.test(t.data) && "data");
        return s || "jsonp" === t.dataTypes[0] ? (r = t.jsonpCallback = ae.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(jt, "$1" + r) : t.jsonp !== !1 && (t.url += (yt.test(t.url) ? "&" : "?") + t.jsonp + "=" + r), t.converters["script json"] = function () {
            return o || ae.error(r + " was not called"), o[0]
        }, t.dataTypes[0] = "json", a = e[r], e[r] = function () {
            o = arguments
        }, i.always(function () {
            void 0 === a ? ae(e).removeProp(r) : e[r] = a, t[r] && (t.jsonpCallback = n.jsonpCallback, Ot.push(r)), o && ae.isFunction(a) && a(o[0]), o = a = void 0
        }), "script") : void 0
    }), ae.parseHTML = function (e, t, n) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (n = t, t = !1), t = t || X;
        var i = pe.exec(e),
            r = !n && [];
        return i ? [t.createElement(i[1])] : (i = h([e], t, r), r && r.length && ae(r).remove(), ae.merge([], i.childNodes))
    };
    var Nt = ae.fn.load;
    ae.fn.load = function (e, t, n) {
        if ("string" != typeof e && Nt) return Nt.apply(this, arguments);
        var i, r, a, o = this,
            s = e.indexOf(" ");
        return s > -1 && (i = ae.trim(e.slice(s)), e = e.slice(0, s)), ae.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (r = "POST"), o.length > 0 && ae.ajax({
            url: e,
            type: r || "GET",
            dataType: "html",
            data: t
        }).done(function (e) {
            a = arguments, o.html(i ? ae("<div>").append(ae.parseHTML(e)).find(i) : e)
        }).always(n && function (e, t) {
            o.each(function () {
                n.apply(this, a || [e.responseText, t, e])
            })
        }), this
    }, ae.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) {
        ae.fn[t] = function (e) {
            return this.on(t, e)
        }
    }), ae.expr.filters.animated = function (e) {
        return ae.grep(ae.timers, function (t) {
            return e === t.elem
        }).length
    }, ae.offset = {
        setOffset: function (e, t, n) {
            var i, r, a, o, s, l, c, u = ae.css(e, "position"),
                d = ae(e),
                h = {};
            "static" === u && (e.style.position = "relative"), s = d.offset(), a = ae.css(e, "top"), l = ae.css(e, "left"), c = ("absolute" === u || "fixed" === u) && (a + l).indexOf("auto") > -1, c ? (i = d.position(), o = i.top, r = i.left) : (o = parseFloat(a) || 0, r = parseFloat(l) || 0), ae.isFunction(t) && (t = t.call(e, n, ae.extend({}, s))), null != t.top && (h.top = t.top - s.top + o), null != t.left && (h.left = t.left - s.left + r), "using" in t ? t.using.call(e, h) : d.css(h)
        }
    }, ae.fn.extend({
        offset: function (e) {
            if (arguments.length) return void 0 === e ? this : this.each(function (t) {
                ae.offset.setOffset(this, e, t)
            });
            var t, n, i = this[0],
                r = {
                    top: 0,
                    left: 0
                },
                a = i && i.ownerDocument;
            if (a) return t = a.documentElement, ae.contains(t, i) ? (r = i.getBoundingClientRect(), n = Y(a), {
                top: r.top + n.pageYOffset - t.clientTop,
                left: r.left + n.pageXOffset - t.clientLeft
            }) : r
        },
        position: function () {
            if (this[0]) {
                var e, t, n = this[0],
                    i = {
                        top: 0,
                        left: 0
                    };
                return "fixed" === ae.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), ae.nodeName(e[0], "html") || (i = e.offset()), i.top += ae.css(e[0], "borderTopWidth", !0), i.left += ae.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - i.top - ae.css(n, "marginTop", !0),
                    left: t.left - i.left - ae.css(n, "marginLeft", !0)
                }
            }
        },
        offsetParent: function () {
            return this.map(function () {
                for (var e = this.offsetParent; e && "static" === ae.css(e, "position");) e = e.offsetParent;
                return e || Qe
            })
        }
    }), ae.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function (e, t) {
        var n = "pageYOffset" === t;
        ae.fn[e] = function (i) {
            return ke(this, function (e, i, r) {
                var a = Y(e);
                return void 0 === r ? a ? a[t] : e[i] : void (a ? a.scrollTo(n ? a.pageXOffset : r, n ? r : a.pageYOffset) : e[i] = r)
            }, e, i, arguments.length)
        }
    }), ae.each(["top", "left"], function (e, t) {
        ae.cssHooks[t] = T(ie.pixelPosition, function (e, n) {
            return n ? (n = A(e, t), Xe.test(n) ? ae(e).position()[t] + "px" : n) : void 0
        })
    }), ae.each({
        Height: "height",
        Width: "width"
    }, function (e, t) {
        ae.each({
            padding: "inner" + e,
            content: t,
            "": "outer" + e
        }, function (n, i) {
            ae.fn[i] = function (i, r) {
                var a = arguments.length && (n || "boolean" != typeof i),
                    o = n || (i === !0 || r === !0 ? "margin" : "border");
                return ke(this, function (t, n, i) {
                    var r;
                    return ae.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (r = t.documentElement, Math.max(t.body["scroll" + e], r["scroll" + e], t.body["offset" + e], r["offset" + e], r["client" + e])) : void 0 === i ? ae.css(t, n, o) : ae.style(t, n, i, o)
                }, t, a ? i : void 0, a, null)
            }
        })
    }), ae.fn.extend({
        bind: function (e, t, n) {
            return this.on(e, null, t, n)
        },
        unbind: function (e, t) {
            return this.off(e, null, t)
        },
        delegate: function (e, t, n, i) {
            return this.on(t, e, n, i)
        },
        undelegate: function (e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
        },
        size: function () {
            return this.length
        }
    }), ae.fn.andSelf = ae.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function () {
        return ae
    });
    var zt = e.jQuery,
        Lt = e.$;
    return ae.noConflict = function (t) {
        return e.$ === ae && (e.$ = Lt), t && e.jQuery === ae && (e.jQuery = zt), ae
    }, t || (e.jQuery = e.$ = ae), ae
}),
    function (e, t) {
        "use strict";
        e.rails !== t && e.error("jquery-ujs has already been loaded!");
        var n, i = e(document);
        e.rails = n = {
            linkClickSelector: "a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",
            buttonClickSelector: "button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",
            inputChangeSelector: "select[data-remote], input[data-remote], textarea[data-remote]",
            formSubmitSelector: "form",
            formInputClickSelector: "form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",
            disableSelector: "input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
            enableSelector: "input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",
            requiredInputSelector: "input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",
            fileInputSelector: "input[name][type=file]:not([disabled])",
            linkDisableSelector: "a[data-disable-with], a[data-disable]",
            buttonDisableSelector: "button[data-remote][data-disable-with], button[data-remote][data-disable]",
            csrfToken: function () {
                return e("meta[name=csrf-token]").attr("content")
            },
            csrfParam: function () {
                return e("meta[name=csrf-param]").attr("content")
            },
            CSRFProtection: function (e) {
                var t = n.csrfToken();
                t && e.setRequestHeader("X-CSRF-Token", t)
            },
            refreshCSRFTokens: function () {
                e('form input[name="' + n.csrfParam() + '"]').val(n.csrfToken())
            },
            fire: function (t, n, i) {
                var r = e.Event(n);
                return t.trigger(r, i), r.result !== !1
            },
            confirm: function (e) {
                return confirm(e)
            },
            ajax: function (t) {
                return e.ajax(t)
            },
            href: function (e) {
                return e[0].href
            },
            isRemote: function (e) {
                return e.data("remote") !== t && e.data("remote") !== !1
            },
            handleRemote: function (i) {
                var r, a, o, s, l, c;
                if (n.fire(i, "ajax:before")) {
                    if (s = i.data("with-credentials") || null, l = i.data("type") || e.ajaxSettings && e.ajaxSettings.dataType, i.is("form")) {
                        r = i.data("ujs:submit-button-formmethod") || i.attr("method"), a = i.data("ujs:submit-button-formaction") || i.attr("action"), o = e(i[0]).serializeArray();
                        var u = i.data("ujs:submit-button");
                        u && (o.push(u), i.data("ujs:submit-button", null)), i.data("ujs:submit-button-formmethod", null), i.data("ujs:submit-button-formaction", null)
                    } else i.is(n.inputChangeSelector) ? (r = i.data("method"), a = i.data("url"), o = i.serialize(), i.data("params") && (o = o + "&" + i.data("params"))) : i.is(n.buttonClickSelector) ? (r = i.data("method") || "get", a = i.data("url"), o = i.serialize(), i.data("params") && (o = o + "&" + i.data("params"))) : (r = i.data("method"), a = n.href(i), o = i.data("params") || null);
                    return c = {
                        type: r || "GET",
                        data: o,
                        dataType: l,
                        beforeSend: function (e, r) {
                            return r.dataType === t && e.setRequestHeader("accept", "*/*;q=0.5, " + r.accepts.script), n.fire(i, "ajax:beforeSend", [e, r]) ? void i.trigger("ajax:send", e) : !1
                        },
                        success: function (e, t, n) {
                            i.trigger("ajax:success", [e, t, n])
                        },
                        complete: function (e, t) {
                            i.trigger("ajax:complete", [e, t])
                        },
                        error: function (e, t, n) {
                            i.trigger("ajax:error", [e, t, n])
                        },
                        crossDomain: n.isCrossDomain(a)
                    }, s && (c.xhrFields = {
                        withCredentials: s
                    }), a && (c.url = a), n.ajax(c)
                }
                return !1
            },
            isCrossDomain: function (e) {
                var t = document.createElement("a");
                t.href = location.href;
                var n = document.createElement("a");
                try {
                    return n.href = e, n.href = n.href, !((!n.protocol || ":" === n.protocol) && !n.host || t.protocol + "//" + t.host == n.protocol + "//" + n.host)
                } catch (i) {
                    return !0
                }
            },
            handleMethod: function (i) {
                var r = n.href(i),
                    a = i.data("method"),
                    o = i.attr("target"),
                    s = n.csrfToken(),
                    l = n.csrfParam(),
                    c = e('<form method="post" action="' + r + '"></form>'),
                    u = '<input name="_method" value="' + a + '" type="hidden" />';
                l === t || s === t || n.isCrossDomain(r) || (u += '<input name="' + l + '" value="' + s + '" type="hidden" />'), o && c.attr("target", o), c.hide().append(u).appendTo("body"), c.submit()
            },
            formElements: function (t, n) {
                return t.is("form") ? e(t[0].elements).filter(n) : t.find(n)
            },
            disableFormElements: function (t) {
                n.formElements(t, n.disableSelector).each(function () {
                    n.disableFormElement(e(this))
                })
            },
            disableFormElement: function (e) {
                var n, i;
                n = e.is("button") ? "html" : "val", i = e.data("disable-with"), i !== t && (e.data("ujs:enable-with", e[n]()), e[n](i)), e.prop("disabled", !0), e.data("ujs:disabled", !0)
            },
            enableFormElements: function (t) {
                n.formElements(t, n.enableSelector).each(function () {
                    n.enableFormElement(e(this))
                })
            },
            enableFormElement: function (e) {
                var n = e.is("button") ? "html" : "val";
                e.data("ujs:enable-with") !== t && (e[n](e.data("ujs:enable-with")), e.removeData("ujs:enable-with")), e.prop("disabled", !1), e.removeData("ujs:disabled")
            },
            allowAction: function (e) {
                var t, i = e.data("confirm"),
                    r = !1;
                if (!i) return !0;
                if (n.fire(e, "confirm")) {
                    try {
                        r = n.confirm(i)
                    } catch (a) {
                        (console.error || console.log).call(console, a.stack || a)
                    }
                    t = n.fire(e, "confirm:complete", [r])
                }
                return r && t
            },
            blankInputs: function (t, n, i) {
                var r, a, o, s, l = e(),
                    c = n || "input,textarea",
                    u = t.find(c),
                    d = {};
                return u.each(function () {
                    r = e(this), r.is("input[type=radio]") ? (s = r.attr("name"), d[s] || (0 === t.find('input[type=radio]:checked[name="' + s + '"]').length && (o = t.find('input[type=radio][name="' + s + '"]'), l = l.add(o)), d[s] = s)) : (a = r.is("input[type=checkbox],input[type=radio]") ? r.is(":checked") : !!r.val(), a === i && (l = l.add(r)))
                }), l.length ? l : !1
            },
            nonBlankInputs: function (e, t) {
                return n.blankInputs(e, t, !0)
            },
            stopEverything: function (t) {
                return e(t.target).trigger("ujs:everythingStopped"), t.stopImmediatePropagation(), !1
            },
            disableElement: function (e) {
                var i = e.data("disable-with");
                i !== t && (e.data("ujs:enable-with", e.html()), e.html(i)), e.bind("click.railsDisable", function (e) {
                    return n.stopEverything(e)
                }), e.data("ujs:disabled", !0)
            },
            enableElement: function (e) {
                e.data("ujs:enable-with") !== t && (e.html(e.data("ujs:enable-with")), e.removeData("ujs:enable-with")), e.unbind("click.railsDisable"), e.removeData("ujs:disabled")
            }
        }, n.fire(i, "rails:attachBindings") && (e.ajaxPrefilter(function (e, t, i) {
            e.crossDomain || n.CSRFProtection(i)
        }), e(window).on("pageshow.rails", function () {
            e(e.rails.enableSelector).each(function () {
                var t = e(this);
                t.data("ujs:disabled") && e.rails.enableFormElement(t)
            }), e(e.rails.linkDisableSelector).each(function () {
                var t = e(this);
                t.data("ujs:disabled") && e.rails.enableElement(t)
            })
        }), i.on("ajax:complete", n.linkDisableSelector, function () {
            n.enableElement(e(this))
        }), i.on("ajax:complete", n.buttonDisableSelector, function () {
            n.enableFormElement(e(this))
        }), i.on("click.rails", n.linkClickSelector, function (t) {
            var i = e(this),
                r = i.data("method"),
                a = i.data("params"),
                o = t.metaKey || t.ctrlKey;
            if (!n.allowAction(i)) return n.stopEverything(t);
            if (!o && i.is(n.linkDisableSelector) && n.disableElement(i), n.isRemote(i)) {
                if (o && (!r || "GET" === r) && !a) return !0;
                var s = n.handleRemote(i);
                return s === !1 ? n.enableElement(i) : s.fail(function () {
                    n.enableElement(i)
                }), !1
            }
            return r ? (n.handleMethod(i), !1) : void 0
        }), i.on("click.rails", n.buttonClickSelector, function (t) {
            var i = e(this);
            if (!n.allowAction(i) || !n.isRemote(i)) return n.stopEverything(t);
            i.is(n.buttonDisableSelector) && n.disableFormElement(i);
            var r = n.handleRemote(i);
            return r === !1 ? n.enableFormElement(i) : r.fail(function () {
                n.enableFormElement(i)
            }), !1
        }), i.on("change.rails", n.inputChangeSelector, function (t) {
            var i = e(this);
            return n.allowAction(i) && n.isRemote(i) ? (n.handleRemote(i), !1) : n.stopEverything(t)
        }), i.on("submit.rails", n.formSubmitSelector, function (i) {
            var r, a, o = e(this),
                s = n.isRemote(o);
            if (!n.allowAction(o)) return n.stopEverything(i);
            if (o.attr("novalidate") === t)
                if (o.data("ujs:formnovalidate-button") === t) {
                    if (r = n.blankInputs(o, n.requiredInputSelector, !1), r && n.fire(o, "ajax:aborted:required", [r])) return n.stopEverything(i)
                } else o.data("ujs:formnovalidate-button", t);
            if (s) {
                if (a = n.nonBlankInputs(o, n.fileInputSelector)) {
                    setTimeout(function () {
                        n.disableFormElements(o)
                    }, 13);
                    var l = n.fire(o, "ajax:aborted:file", [a]);
                    return l || setTimeout(function () {
                        n.enableFormElements(o)
                    }, 13), l
                }
                return n.handleRemote(o), !1
            }
            setTimeout(function () {
                n.disableFormElements(o)
            }, 13)
        }), i.on("click.rails", n.formInputClickSelector, function (t) {
            var i = e(this);
            if (!n.allowAction(i)) return n.stopEverything(t);
            var r = i.attr("name"),
                a = r ? {
                    name: r,
                    value: i.val()
                } : null,
                o = i.closest("form");
            0 === o.length && (o = e("#" + i.attr("form"))), o.data("ujs:submit-button", a), o.data("ujs:formnovalidate-button", i.attr("formnovalidate")), o.data("ujs:submit-button-formaction", i.attr("formaction")), o.data("ujs:submit-button-formmethod", i.attr("formmethod"))
        }), i.on("ajax:send.rails", n.formSubmitSelector, function (t) {
            this === t.target && n.disableFormElements(e(this))
        }), i.on("ajax:complete.rails", n.formSubmitSelector, function (t) {
            this === t.target && n.enableFormElements(e(this))
        }), e(function () {
            n.refreshCSRFTokens()
        }))
    }(jQuery),
    function () {
        var e = $.rails.allowAction;
        $.rails.allowAction = function (t) {
            return t.is("[disabled]") ? !1 : e(t)
        }
    }(),
    function (e) {
        var t = function () {
            return !1 === e.support.boxModel && e.support.objectAll && e.support.leadingWhitespace
        }();
        e.jGrowl = function (t, n) {
            0 === e("#jGrowl").size() && e('<div id="jGrowl"></div>').addClass(n && n.position ? n.position : e.jGrowl.defaults.position).appendTo("body"), e("#jGrowl").jGrowl(t, n)
        }, e.fn.jGrowl = function (t, n) {
            if (e.isFunction(this.each)) {
                var i = arguments;
                return this.each(function () {
                    void 0 === e(this).data("jGrowl.instance") && (e(this).data("jGrowl.instance", e.extend(new e.fn.jGrowl, {
                        notifications: [],
                        element: null,
                        interval: null
                    })), e(this).data("jGrowl.instance").startup(this)), e.isFunction(e(this).data("jGrowl.instance")[t]) ? e(this).data("jGrowl.instance")[t].apply(e(this).data("jGrowl.instance"), e.makeArray(i).slice(1)) : e(this).data("jGrowl.instance").create(t, n)
                })
            }
        }, e.extend(e.fn.jGrowl.prototype, {
            defaults: {
                pool: 0,
                header: "",
                group: "",
                sticky: !1,
                position: "top-right",
                glue: "after",
                theme: "default",
                themeState: "highlight",
                corners: "10px",
                check: 250,
                life: 3e3,
                closeDuration: "normal",
                openDuration: "normal",
                easing: "swing",
                closer: !0,
                closeTemplate: "&times;",
                closerTemplate: "<div>[ close all ]</div>",
                log: function () { },
                beforeOpen: function () { },
                afterOpen: function () { },
                open: function () { },
                beforeClose: function () { },
                close: function () { },
                animateOpen: {
                    opacity: "show"
                },
                animateClose: {
                    opacity: "hide"
                }
            },
            notifications: [],
            element: null,
            interval: null,
            create: function (t, n) {
                var i = e.extend({}, this.defaults, n);
                "undefined" != typeof i.speed && (i.openDuration = i.speed, i.closeDuration = i.speed), this.notifications.push({
                    message: t,
                    options: i
                }), i.log.apply(this.element, [this.element, t, i])
            },
            render: function (t) {
                var n = this,
                    i = t.message,
                    r = t.options;
                r.themeState = "" === r.themeState ? "" : "ui-state-" + r.themeState;
                var a = e("<div/>").addClass("jGrowl-notification " + r.themeState + " ui-corner-all" + (void 0 !== r.group && "" !== r.group ? " " + r.group : "")).append(e("<div/>").addClass("jGrowl-close").html(r.closeTemplate)).append(e("<div/>").addClass("jGrowl-header").html(r.header)).append(e("<div/>").addClass("jGrowl-message").html(i)).data("jGrowl", r).addClass(r.theme).children("div.jGrowl-close").bind("click.jGrowl", function () {
                    e(this).parent().trigger("jGrowl.beforeClose")
                }).parent();
                e(a).bind("mouseover.jGrowl", function () {
                    e("div.jGrowl-notification", n.element).data("jGrowl.pause", !0)
                }).bind("mouseout.jGrowl", function () {
                    e("div.jGrowl-notification", n.element).data("jGrowl.pause", !1)
                }).bind("jGrowl.beforeOpen", function () {
                    r.beforeOpen.apply(a, [a, i, r, n.element]) !== !1 && e(this).trigger("jGrowl.open")
                }).bind("jGrowl.open", function () {
                    r.open.apply(a, [a, i, r, n.element]) !== !1 && ("after" == r.glue ? e("div.jGrowl-notification:last", n.element).after(a) : e("div.jGrowl-notification:first", n.element).before(a), e(this).animate(r.animateOpen, r.openDuration, r.easing, function () {
                        e.support.opacity === !1 && this.style.removeAttribute("filter"), null !== e(this).data("jGrowl") && (e(this).data("jGrowl").created = new Date), e(this).trigger("jGrowl.afterOpen")
                    }))
                }).bind("jGrowl.afterOpen", function () {
                    r.afterOpen.apply(a, [a, i, r, n.element])
                }).bind("jGrowl.beforeClose", function () {
                    r.beforeClose.apply(a, [a, i, r, n.element]) !== !1 && e(this).trigger("jGrowl.close")
                }).bind("jGrowl.close", function () {
                    e(this).data("jGrowl.pause", !0), e(this).animate(r.animateClose, r.closeDuration, r.easing, function () {
                        e.isFunction(r.close) ? r.close.apply(a, [a, i, r, n.element]) !== !1 && e(this).remove() : e(this).remove()
                    })
                }).trigger("jGrowl.beforeOpen"), "" !== r.corners && void 0 !== e.fn.corner && e(a).corner(r.corners), e("div.jGrowl-notification:parent", n.element).size() > 1 && 0 === e("div.jGrowl-closer", n.element).size() && this.defaults.closer !== !1 && e(this.defaults.closerTemplate).addClass("jGrowl-closer " + this.defaults.themeState + " ui-corner-all").addClass(this.defaults.theme).appendTo(n.element).animate(this.defaults.animateOpen, this.defaults.speed, this.defaults.easing).bind("click.jGrowl", function () {
                    e(this).siblings().trigger("jGrowl.beforeClose"), e.isFunction(n.defaults.closer) && n.defaults.closer.apply(e(this).parent()[0], [e(this).parent()[0]])
                })
            },
            update: function () {
                e(this.element).find("div.jGrowl-notification:parent").each(function () {
                    void 0 !== e(this).data("jGrowl") && void 0 !== e(this).data("jGrowl").created && e(this).data("jGrowl").created.getTime() + parseInt(e(this).data("jGrowl").life, 10) < (new Date).getTime() && e(this).data("jGrowl").sticky !== !0 && (void 0 === e(this).data("jGrowl.pause") || e(this).data("jGrowl.pause") !== !0) && e(this).trigger("jGrowl.beforeClose")
                }), this.notifications.length > 0 && (0 === this.defaults.pool || e(this.element).find("div.jGrowl-notification:parent").size() < this.defaults.pool) && this.render(this.notifications.shift()), e(this.element).find("div.jGrowl-notification:parent").size() < 2 && e(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose, this.defaults.speed, this.defaults.easing, function () {
                    e(this).remove()
                })
            },
            startup: function (n) {
                this.element = e(n).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'), this.interval = setInterval(function () {
                    e(n).data("jGrowl.instance").update()
                }, parseInt(this.defaults.check, 10)), t && e(this.element).addClass("ie6")
            },
            shutdown: function () {
                e(this.element).removeClass("jGrowl").find("div.jGrowl-notification").trigger("jGrowl.close").parent().empty(), clearInterval(this.interval)
            },
            close: function () {
                e(this.element).find("div.jGrowl-notification").each(function () {
                    e(this).trigger("jGrowl.beforeClose")
                })
            }
        }), e.jGrowl.defaults = e.fn.jGrowl.prototype.defaults
    }(jQuery),
    function (e) {
        function t() {
            var t = n(this);
            return isNaN(t.datetime) || e(this).text(i(t.datetime)), this
        }

        function n(t) {
            if (t = e(t), !t.data("timeago")) {
                t.data("timeago", {
                    datetime: a.datetime(t)
                });
                var n = e.trim(t.text());
                !(n.length > 0) || a.isTime(t) && t.attr("title") || t.attr("title", n)
            }
            return t.data("timeago")
        }

        function i(e) {
            return a.inWords(r(e))
        }

        function r(e) {
            return (new Date).getTime() - e.getTime()
        }
        e.timeago = function (t) {
            return i(t instanceof Date ? t : "string" == typeof t ? e.timeago.parse(t) : "number" == typeof t ? new Date(t) : e.timeago.datetime(t))
        };
        var a = e.timeago;
        e.extend(e.timeago, {
            settings: {
                refreshMillis: 6e4,
                allowFuture: !1,
                strings: {
                    prefixAgo: null,
                    prefixFromNow: null,
                    suffixAgo: "ago",
                    suffixFromNow: "from now",
                    seconds: "less than a minute",
                    minute: "about a minute",
                    minutes: "%d minutes",
                    hour: "about an hour",
                    hours: "about %d hours",
                    day: "a day",
                    days: "%d days",
                    month: "about a month",
                    months: "%d months",
                    year: "about a year",
                    years: "%d years",
                    wordSeparator: " ",
                    numbers: []
                }
            },
            inWords: function (t) {
                function n(n, r) {
                    var a = e.isFunction(n) ? n(r, t) : n,
                        o = i.numbers && i.numbers[r] || r;
                    return a.replace(/%d/i, o)
                }
                var i = this.settings.strings,
                    r = i.prefixAgo,
                    a = i.suffixAgo;
                this.settings.allowFuture && 0 > t && (r = i.prefixFromNow, a = i.suffixFromNow);
                var o = Math.abs(t) / 1e3,
                    s = o / 60,
                    l = s / 60,
                    c = l / 24,
                    u = c / 365,
                    d = 45 > o && n(i.seconds, Math.round(o)) || 90 > o && n(i.minute, 1) || 45 > s && n(i.minutes, Math.round(s)) || 90 > s && n(i.hour, 1) || 24 > l && n(i.hours, Math.round(l)) || 42 > l && n(i.day, 1) || 30 > c && n(i.days, Math.round(c)) || 45 > c && n(i.month, 1) || 365 > c && n(i.months, Math.round(c / 30)) || 1.5 > u && n(i.year, 1) || n(i.years, Math.round(u)),
                    h = void 0 === i.wordSeparator ? " " : i.wordSeparator;
                return e.trim([r, d, a].join(h))
            },
            parse: function (t) {
                var n = e.trim(t);
                return n = n.replace(/\.\d+/, ""), n = n.replace(/-/, "/").replace(/-/, "/"), n = n.replace(/T/, " ").replace(/Z/, " UTC"), n = n.replace(/([\+\-]\d\d)\:?(\d\d)/, " $1$2"), new Date(n)
            },
            datetime: function (t) {
                var n = a.isTime(t) ? e(t).attr("datetime") : e(t).attr("title");
                return a.parse(n)
            },
            isTime: function (t) {
                return "time" === e(t).get(0).tagName.toLowerCase()
            }
        }), e.fn.timeago = function () {
            var e = this;
            e.each(t);
            var n = a.settings;
            return n.refreshMillis > 0 && setInterval(function () {
                e.each(t)
            }, n.refreshMillis), e
        }, document.createElement("abbr"), document.createElement("time")
    }(jQuery),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : e("object" == typeof exports ? require("jquery") : jQuery)
    }(function (e) {
        function t(e) {
            return s.raw ? e : encodeURIComponent(e)
        }

        function n(e) {
            return s.raw ? e : decodeURIComponent(e)
        }

        function i(e) {
            return t(s.json ? JSON.stringify(e) : String(e))
        }

        function r(e) {
            0 === e.indexOf('"') && (e = e.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
            try {
                return e = decodeURIComponent(e.replace(o, " ")), s.json ? JSON.parse(e) : e
            } catch (t) { }
        }

        function a(t, n) {
            var i = s.raw ? t : r(t);
            return e.isFunction(n) ? n(i) : i
        }
        var o = /\+/g,
            s = e.cookie = function (r, o, l) {
                if (arguments.length > 1 && !e.isFunction(o)) {
                    if (l = e.extend({}, s.defaults, l), "number" == typeof l.expires) {
                        var c = l.expires,
                            u = l.expires = new Date;
                        u.setTime(+u + 864e5 * c)
                    }
                    return document.cookie = [t(r), "=", i(o), l.expires ? "; expires=" + l.expires.toUTCString() : "", l.path ? "; path=" + l.path : "", l.domain ? "; domain=" + l.domain : "", l.SameSite ? "; SameSite=" + l.SameSite : "", l.secure ? "; secure" : ""].join("")
                }
                for (var d = r ? void 0 : {}, h = document.cookie ? document.cookie.split("; ") : [], f = 0, p = h.length; p > f; f++) {
                    var m = h[f].split("="),
                        g = n(m.shift()),
                        v = m.join("=");
                    if (r && r === g) {
                        d = a(v, o);
                        break
                    }
                    r || void 0 === (v = a(v)) || (d[g] = v)
                }
                return d
            };
        s.defaults = {}, e.removeCookie = function (t, n) {
            return void 0 === e.cookie(t) ? !1 : (e.cookie(t, "", e.extend({}, n, {
                expires: -1
            })), !e.cookie(t))
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
    }(function (e) {
        return e.ui = e.ui || {}, e.ui.version = "1.12.1"
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        var t = 0,
            n = Array.prototype.slice;
        return e.cleanData = function (t) {
            return function (n) {
                var i, r, a;
                for (a = 0; null != (r = n[a]); a++) try {
                    i = e._data(r, "events"), i && i.remove && e(r).triggerHandler("remove")
                } catch (o) { }
                t(n)
            }
        }(e.cleanData), e.widget = function (t, n, i) {
            var r, a, o, s = {},
                l = t.split(".")[0];
            t = t.split(".")[1];
            var c = l + "-" + t;
            return i || (i = n, n = e.Widget), e.isArray(i) && (i = e.extend.apply(null, [{}].concat(i))), e.expr[":"][c.toLowerCase()] = function (t) {
                return !!e.data(t, c)
            }, e[l] = e[l] || {}, r = e[l][t], a = e[l][t] = function (e, t) {
                return this._createWidget ? void (arguments.length && this._createWidget(e, t)) : new a(e, t)
            }, e.extend(a, r, {
                version: i.version,
                _proto: e.extend({}, i),
                _childConstructors: []
            }), o = new n, o.options = e.widget.extend({}, o.options), e.each(i, function (t, i) {
                return e.isFunction(i) ? void (s[t] = function () {
                    function e() {
                        return n.prototype[t].apply(this, arguments)
                    }

                    function r(e) {
                        return n.prototype[t].apply(this, e)
                    }
                    return function () {
                        var t, n = this._super,
                            a = this._superApply;
                        return this._super = e, this._superApply = r, t = i.apply(this, arguments), this._super = n, this._superApply = a, t
                    }
                }()) : void (s[t] = i)
            }), a.prototype = e.widget.extend(o, {
                widgetEventPrefix: r ? o.widgetEventPrefix || t : t
            }, s, {
                constructor: a,
                namespace: l,
                widgetName: t,
                widgetFullName: c
            }), r ? (e.each(r._childConstructors, function (t, n) {
                var i = n.prototype;
                e.widget(i.namespace + "." + i.widgetName, a, n._proto)
            }), delete r._childConstructors) : n._childConstructors.push(a), e.widget.bridge(t, a), a
        }, e.widget.extend = function (t) {
            for (var i, r, a = n.call(arguments, 1), o = 0, s = a.length; s > o; o++)
                for (i in a[o]) r = a[o][i], a[o].hasOwnProperty(i) && void 0 !== r && (e.isPlainObject(r) ? t[i] = e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], r) : e.widget.extend({}, r) : t[i] = r);
            return t
        }, e.widget.bridge = function (t, i) {
            var r = i.prototype.widgetFullName || t;
            e.fn[t] = function (a) {
                var o = "string" == typeof a,
                    s = n.call(arguments, 1),
                    l = this;
                return o ? this.length || "instance" !== a ? this.each(function () {
                    var n, i = e.data(this, r);
                    return "instance" === a ? (l = i, !1) : i ? e.isFunction(i[a]) && "_" !== a.charAt(0) ? (n = i[a].apply(i, s), n !== i && void 0 !== n ? (l = n && n.jquery ? l.pushStack(n.get()) : n, !1) : void 0) : e.error("no such method '" + a + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + a + "'")
                }) : l = void 0 : (s.length && (a = e.widget.extend.apply(null, [a].concat(s))), this.each(function () {
                    var t = e.data(this, r);
                    t ? (t.option(a || {}), t._init && t._init()) : e.data(this, r, new i(a, this))
                })), l
            }
        }, e.Widget = function () { }, e.Widget._childConstructors = [], e.Widget.prototype = {
            widgetName: "widget",
            widgetEventPrefix: "",
            defaultElement: "<div>",
            options: {
                classes: {},
                disabled: !1,
                create: null
            },
            _createWidget: function (n, i) {
                i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = t++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), this.focusable = e(), this.classesElementLookup = {}, i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                    remove: function (e) {
                        e.target === i && this.destroy()
                    }
                }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this.options = e.widget.extend({}, this.options, this._getCreateOptions(), n), this._create(), this.options.disabled && this._setOptionDisabled(this.options.disabled), this._trigger("create", null, this._getCreateEventData()), this._init()
            },
            _getCreateOptions: function () {
                return {}
            },
            _getCreateEventData: e.noop,
            _create: e.noop,
            _init: e.noop,
            destroy: function () {
                var t = this;
                this._destroy(), e.each(this.classesElementLookup, function (e, n) {
                    t._removeClass(n, e)
                }), this.element.off(this.eventNamespace).removeData(this.widgetFullName), this.widget().off(this.eventNamespace).removeAttr("aria-disabled"), this.bindings.off(this.eventNamespace)
            },
            _destroy: e.noop,
            widget: function () {
                return this.element
            },
            option: function (t, n) {
                var i, r, a, o = t;
                if (0 === arguments.length) return e.widget.extend({}, this.options);
                if ("string" == typeof t)
                    if (o = {}, i = t.split("."), t = i.shift(), i.length) {
                        for (r = o[t] = e.widget.extend({}, this.options[t]), a = 0; a < i.length - 1; a++) r[i[a]] = r[i[a]] || {}, r = r[i[a]];
                        if (t = i.pop(), 1 === arguments.length) return void 0 === r[t] ? null : r[t];
                        r[t] = n
                    } else {
                        if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                        o[t] = n
                    } return this._setOptions(o), this
            },
            _setOptions: function (e) {
                var t;
                for (t in e) this._setOption(t, e[t]);
                return this
            },
            _setOption: function (e, t) {
                return "classes" === e && this._setOptionClasses(t), this.options[e] = t, "disabled" === e && this._setOptionDisabled(t), this
            },
            _setOptionClasses: function (t) {
                var n, i, r;
                for (n in t) r = this.classesElementLookup[n], t[n] !== this.options.classes[n] && r && r.length && (i = e(r.get()), this._removeClass(r, n), i.addClass(this._classes({
                    element: i,
                    keys: n,
                    classes: t,
                    add: !0
                })))
            },
            _setOptionDisabled: function (e) {
                this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, !!e), e && (this._removeClass(this.hoverable, null, "ui-state-hover"), this._removeClass(this.focusable, null, "ui-state-focus"))
            },
            enable: function () {
                return this._setOptions({
                    disabled: !1
                })
            },
            disable: function () {
                return this._setOptions({
                    disabled: !0
                })
            },
            _classes: function (t) {
                function n(n, a) {
                    var o, s;
                    for (s = 0; s < n.length; s++) o = r.classesElementLookup[n[s]] || e(), o = e(t.add ? e.unique(o.get().concat(t.element.get())) : o.not(t.element).get()), r.classesElementLookup[n[s]] = o, i.push(n[s]), a && t.classes[n[s]] && i.push(t.classes[n[s]])
                }
                var i = [],
                    r = this;
                return t = e.extend({
                    element: this.element,
                    classes: this.options.classes || {}
                }, t), this._on(t.element, {
                    remove: "_untrackClassesElement"
                }), t.keys && n(t.keys.match(/\S+/g) || [], !0), t.extra && n(t.extra.match(/\S+/g) || []), i.join(" ")
            },
            _untrackClassesElement: function (t) {
                var n = this;
                e.each(n.classesElementLookup, function (i, r) {
                    -1 !== e.inArray(t.target, r) && (n.classesElementLookup[i] = e(r.not(t.target).get()))
                })
            },
            _removeClass: function (e, t, n) {
                return this._toggleClass(e, t, n, !1)
            },
            _addClass: function (e, t, n) {
                return this._toggleClass(e, t, n, !0)
            },
            _toggleClass: function (e, t, n, i) {
                i = "boolean" == typeof i ? i : n;
                var r = "string" == typeof e || null === e,
                    a = {
                        extra: r ? t : n,
                        keys: r ? e : t,
                        element: r ? this.element : e,
                        add: i
                    };
                return a.element.toggleClass(this._classes(a), i), this
            },
            _on: function (t, n, i) {
                var r, a = this;
                "boolean" != typeof t && (i = n, n = t, t = !1), i ? (n = r = e(n), this.bindings = this.bindings.add(n)) : (i = n, n = this.element, r = this.widget()), e.each(i, function (i, o) {
                    function s() {
                        return t || a.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof o ? a[o] : o).apply(a, arguments) : void 0
                    }
                    "string" != typeof o && (s.guid = o.guid = o.guid || s.guid || e.guid++);
                    var l = i.match(/^([\w:-]*)\s*(.*)$/),
                        c = l[1] + a.eventNamespace,
                        u = l[2];
                    u ? r.on(c, u, s) : n.on(c, s)
                })
            },
            _off: function (t, n) {
                n = (n || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.off(n).off(n), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), this.hoverable = e(this.hoverable.not(t).get())
            },
            _delay: function (e, t) {
                function n() {
                    return ("string" == typeof e ? i[e] : e).apply(i, arguments)
                }
                var i = this;
                return setTimeout(n, t || 0)
            },
            _hoverable: function (t) {
                this.hoverable = this.hoverable.add(t), this._on(t, {
                    mouseenter: function (t) {
                        this._addClass(e(t.currentTarget), null, "ui-state-hover")
                    },
                    mouseleave: function (t) {
                        this._removeClass(e(t.currentTarget), null, "ui-state-hover")
                    }
                })
            },
            _focusable: function (t) {
                this.focusable = this.focusable.add(t), this._on(t, {
                    focusin: function (t) {
                        this._addClass(e(t.currentTarget), null, "ui-state-focus")
                    },
                    focusout: function (t) {
                        this._removeClass(e(t.currentTarget), null, "ui-state-focus")
                    }
                })
            },
            _trigger: function (t, n, i) {
                var r, a, o = this.options[t];
                if (i = i || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], a = n.originalEvent)
                    for (r in a) r in n || (n[r] = a[r]);
                return this.element.trigger(n, i), !(e.isFunction(o) && o.apply(this.element[0], [n].concat(i)) === !1 || n.isDefaultPrevented())
            }
        }, e.each({
            show: "fadeIn",
            hide: "fadeOut"
        }, function (t, n) {
            e.Widget.prototype["_" + t] = function (i, r, a) {
                "string" == typeof r && (r = {
                    effect: r
                });
                var o, s = r ? r === !0 || "number" == typeof r ? n : r.effect || n : t;
                r = r || {}, "number" == typeof r && (r = {
                    duration: r
                }), o = !e.isEmptyObject(r), r.complete = a, r.delay && i.delay(r.delay), o && e.effects && e.effects.effect[s] ? i[t](r) : s !== t && i[s] ? i[s](r.duration, r.easing, a) : i.queue(function (n) {
                    e(this)[t](), a && a.call(i[0]), n()
                })
            }
        }), e.widget
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "../ie", "../version", "../widget"], e) : e(jQuery)
    }(function (e) {
        var t = !1;
        return e(document).on("mouseup", function () {
            t = !1
        }), e.widget("ui.mouse", {
            version: "1.12.1",
            options: {
                cancel: "input, textarea, button, select, option",
                distance: 1,
                delay: 0
            },
            _mouseInit: function () {
                var t = this;
                this.element.on("mousedown." + this.widgetName, function (e) {
                    return t._mouseDown(e)
                }).on("click." + this.widgetName, function (n) {
                    return !0 === e.data(n.target, t.widgetName + ".preventClickEvent") ? (e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1) : void 0
                }), this.started = !1
            },
            _mouseDestroy: function () {
                this.element.off("." + this.widgetName), this._mouseMoveDelegate && this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate)
            },
            _mouseDown: function (n) {
                if (!t) {
                    this._mouseMoved = !1, this._mouseStarted && this._mouseUp(n), this._mouseDownEvent = n;
                    var i = this,
                        r = 1 === n.which,
                        a = "string" == typeof this.options.cancel && n.target.nodeName ? e(n.target).closest(this.options.cancel).length : !1;
                    return r && !a && this._mouseCapture(n) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                        i.mouseDelayMet = !0
                    }, this.options.delay)), this._mouseDistanceMet(n) && this._mouseDelayMet(n) && (this._mouseStarted = this._mouseStart(n) !== !1, !this._mouseStarted) ? (n.preventDefault(), !0) : (!0 === e.data(n.target, this.widgetName + ".preventClickEvent") && e.removeData(n.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                        return i._mouseMove(e)
                    }, this._mouseUpDelegate = function (e) {
                        return i._mouseUp(e)
                    }, this.document.on("mousemove." + this.widgetName, this._mouseMoveDelegate).on("mouseup." + this.widgetName, this._mouseUpDelegate), n.preventDefault(), t = !0, !0)) : !0
                }
            },
            _mouseMove: function (t) {
                if (this._mouseMoved) {
                    if (e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button) return this._mouseUp(t);
                    if (!t.which)
                        if (t.originalEvent.altKey || t.originalEvent.ctrlKey || t.originalEvent.metaKey || t.originalEvent.shiftKey) this.ignoreMissingWhich = !0;
                        else if (!this.ignoreMissingWhich) return this._mouseUp(t)
                }
                return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
            },
            _mouseUp: function (n) {
                this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, n.target === this._mouseDownEvent.target && e.data(n.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(n)), this._mouseDelayTimer && (clearTimeout(this._mouseDelayTimer), delete this._mouseDelayTimer), this.ignoreMissingWhich = !1, t = !1, n.preventDefault()
            },
            _mouseDistanceMet: function (e) {
                return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
            },
            _mouseDelayMet: function () {
                return this.mouseDelayMet
            },
            _mouseStart: function () { },
            _mouseDrag: function () { },
            _mouseStop: function () { },
            _mouseCapture: function () {
                return !0
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.extend(e.expr[":"], {
            data: e.expr.createPseudo ? e.expr.createPseudo(function (t) {
                return function (n) {
                    return !!e.data(n, t)
                }
            }) : function (t, n, i) {
                return !!e.data(t, i[3])
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.fn.scrollParent = function (t) {
            var n = this.css("position"),
                i = "absolute" === n,
                r = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                a = this.parents().filter(function () {
                    var t = e(this);
                    return i && "static" === t.css("position") ? !1 : r.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                }).eq(0);
            return "fixed" !== n && a.length ? a : e(this[0].ownerDocument || document)
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../data", "../ie", "../scroll-parent", "../version", "../widget"], e) : e(jQuery)
    }(function (e) {
        return e.widget("ui.sortable", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "sort",
            ready: !1,
            options: {
                appendTo: "parent",
                axis: !1,
                connectWith: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                dropOnEmpty: !0,
                forcePlaceholderSize: !1,
                forceHelperSize: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                items: "> *",
                opacity: !1,
                placeholder: !1,
                revert: !1,
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                scope: "default",
                tolerance: "intersect",
                zIndex: 1e3,
                activate: null,
                beforeStop: null,
                change: null,
                deactivate: null,
                out: null,
                over: null,
                receive: null,
                remove: null,
                sort: null,
                start: null,
                stop: null,
                update: null
            },
            _isOverAxis: function (e, t, n) {
                return e >= t && t + n > e
            },
            _isFloating: function (e) {
                return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
            },
            _create: function () {
                this.containerCache = {}, this._addClass("ui-sortable"), this.refresh(), this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0
            },
            _setOption: function (e, t) {
                this._super(e, t), "handle" === e && this._setHandleClassName()
            },
            _setHandleClassName: function () {
                var t = this;
                this._removeClass(this.element.find(".ui-sortable-handle"), "ui-sortable-handle"), e.each(this.items, function () {
                    t._addClass(this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item, "ui-sortable-handle")
                })
            },
            _destroy: function () {
                this._mouseDestroy();
                for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
                return this
            },
            _mouseCapture: function (t, n) {
                var i = null,
                    r = !1,
                    a = this;
                return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(t), e(t.target).parents().each(function () {
                    return e.data(this, a.widgetName + "-item") === a ? (i = e(this), !1) : void 0
                }), e.data(t.target, a.widgetName + "-item") === a && (i = e(t.target)), i && (!this.options.handle || n || (e(this.options.handle, i).find("*").addBack().each(function () {
                    this === t.target && (r = !0)
                }), r)) ? (this.currentItem = i, this._removeCurrentsFromItems(), !0) : !1)
            },
            _mouseStart: function (t, n, i) {
                var r, a, o = this.options;
                if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                    top: this.offset.top - this.margins.top,
                    left: this.offset.left - this.margins.left
                }, e.extend(this.offset, {
                    click: {
                        left: t.pageX - this.offset.left,
                        top: t.pageY - this.offset.top
                    },
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), this.domPosition = {
                    prev: this.currentItem.prev()[0],
                    parent: this.currentItem.parent()[0]
                }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), o.containment && this._setContainment(), o.cursor && "auto" !== o.cursor && (a = this.document.find("body"), this.storedCursor = a.css("cursor"), a.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(a)), o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !i)
                    for (r = this.containers.length - 1; r >= 0; r--) this.containers[r]._trigger("activate", t, this._uiHash(this));
                return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this._addClass(this.helper, "ui-sortable-helper"), this._mouseDrag(t), !0
            },
            _mouseDrag: function (t) {
                var n, i, r, a, o = this.options,
                    s = !1;
                for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = s = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = s = this.scrollParent[0].scrollTop - o.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = s = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = s = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - this.document.scrollTop() < o.scrollSensitivity ? s = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed) : this.window.height() - (t.pageY - this.document.scrollTop()) < o.scrollSensitivity && (s = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed)), t.pageX - this.document.scrollLeft() < o.scrollSensitivity ? s = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed) : this.window.width() - (t.pageX - this.document.scrollLeft()) < o.scrollSensitivity && (s = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed))), s !== !1 && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), n = this.items.length - 1; n >= 0; n--)
                    if (i = this.items[n], r = i.item[0], a = this._intersectsWithPointer(i), a && i.instance === this.currentContainer && r !== this.currentItem[0] && this.placeholder[1 === a ? "next" : "prev"]()[0] !== r && !e.contains(this.placeholder[0], r) && ("semi-dynamic" === this.options.type ? !e.contains(this.element[0], r) : !0)) {
                        if (this.direction = 1 === a ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(i)) break;
                        this._rearrange(t, i), this._trigger("change", t, this._uiHash());
                        break
                    } return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
            },
            _mouseStop: function (t, n) {
                if (t) {
                    if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), this.options.revert) {
                        var i = this,
                            r = this.placeholder.offset(),
                            a = this.options.axis,
                            o = {};
                        a && "x" !== a || (o.left = r.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)), a && "y" !== a || (o.top = r.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, function () {
                            i._clear(t)
                        })
                    } else this._clear(t, n);
                    return !1
                }
            },
            cancel: function () {
                if (this.dragging) {
                    this._mouseUp(new e.Event("mouseup", {
                        target: null
                    })), "original" === this.options.helper ? (this.currentItem.css(this._storedCSS), this._removeClass(this.currentItem, "ui-sortable-helper")) : this.currentItem.show();
                    for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
                }
                return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                    helper: null,
                    dragging: !1,
                    reverting: !1,
                    _noFinalSort: null
                }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
            },
            serialize: function (t) {
                var n = this._getItemsAsjQuery(t && t.connected),
                    i = [];
                return t = t || {}, e(n).each(function () {
                    var n = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                    n && i.push((t.key || n[1] + "[]") + "=" + (t.key && t.expression ? n[1] : n[2]))
                }), !i.length && t.key && i.push(t.key + "="), i.join("&")
            },
            toArray: function (t) {
                var n = this._getItemsAsjQuery(t && t.connected),
                    i = [];
                return t = t || {}, n.each(function () {
                    i.push(e(t.item || this).attr(t.attribute || "id") || "")
                }), i
            },
            _intersectsWith: function (e) {
                var t = this.positionAbs.left,
                    n = t + this.helperProportions.width,
                    i = this.positionAbs.top,
                    r = i + this.helperProportions.height,
                    a = e.left,
                    o = a + e.width,
                    s = e.top,
                    l = s + e.height,
                    c = this.offset.click.top,
                    u = this.offset.click.left,
                    d = "x" === this.options.axis || i + c > s && l > i + c,
                    h = "y" === this.options.axis || t + u > a && o > t + u,
                    f = d && h;
                return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? f : a < t + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < o && s < i + this.helperProportions.height / 2 && r - this.helperProportions.height / 2 < l
            },
            _intersectsWithPointer: function (e) {
                var t, n, i = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                    r = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                    a = i && r;
                return a ? (t = this._getDragVerticalDirection(), n = this._getDragHorizontalDirection(), this.floating ? "right" === n || "down" === t ? 2 : 1 : t && ("down" === t ? 2 : 1)) : !1
            },
            _intersectsWithSides: function (e) {
                var t = this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                    n = this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                    i = this._getDragVerticalDirection(),
                    r = this._getDragHorizontalDirection();
                return this.floating && r ? "right" === r && n || "left" === r && !n : i && ("down" === i && t || "up" === i && !t)
            },
            _getDragVerticalDirection: function () {
                var e = this.positionAbs.top - this.lastPositionAbs.top;
                return 0 !== e && (e > 0 ? "down" : "up")
            },
            _getDragHorizontalDirection: function () {
                var e = this.positionAbs.left - this.lastPositionAbs.left;
                return 0 !== e && (e > 0 ? "right" : "left")
            },
            refresh: function (e) {
                return this._refreshItems(e), this._setHandleClassName(), this.refreshPositions(), this
            },
            _connectWith: function () {
                var e = this.options;
                return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
            },
            _getItemsAsjQuery: function (t) {
                function n() {
                    s.push(this)
                }
                var i, r, a, o, s = [],
                    l = [],
                    c = this._connectWith();
                if (c && t)
                    for (i = c.length - 1; i >= 0; i--)
                        for (a = e(c[i], this.document[0]), r = a.length - 1; r >= 0; r--) o = e.data(a[r], this.widgetFullName), o && o !== this && !o.options.disabled && l.push([e.isFunction(o.options.items) ? o.options.items.call(o.element) : e(o.options.items, o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), o]);
                for (l.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                    options: this.options,
                    item: this.currentItem
                }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), i = l.length - 1; i >= 0; i--) l[i][0].each(n);
                return e(s)
            },
            _removeCurrentsFromItems: function () {
                var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
                this.items = e.grep(this.items, function (e) {
                    for (var n = 0; n < t.length; n++)
                        if (t[n] === e.item[0]) return !1;
                    return !0
                })
            },
            _refreshItems: function (t) {
                this.items = [], this.containers = [this];
                var n, i, r, a, o, s, l, c, u = this.items,
                    d = [
                        [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                            item: this.currentItem
                        }) : e(this.options.items, this.element), this]
                    ],
                    h = this._connectWith();
                if (h && this.ready)
                    for (n = h.length - 1; n >= 0; n--)
                        for (r = e(h[n], this.document[0]), i = r.length - 1; i >= 0; i--) a = e.data(r[i], this.widgetFullName), a && a !== this && !a.options.disabled && (d.push([e.isFunction(a.options.items) ? a.options.items.call(a.element[0], t, {
                            item: this.currentItem
                        }) : e(a.options.items, a.element), a]), this.containers.push(a));
                for (n = d.length - 1; n >= 0; n--)
                    for (o = d[n][1], s = d[n][0], i = 0, c = s.length; c > i; i++) l = e(s[i]), l.data(this.widgetName + "-item", o), u.push({
                        item: l,
                        instance: o,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
            },
            refreshPositions: function (t) {
                this.floating = this.items.length ? "x" === this.options.axis || this._isFloating(this.items[0].item) : !1, this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                var n, i, r, a;
                for (n = this.items.length - 1; n >= 0; n--) i = this.items[n], i.instance !== this.currentContainer && this.currentContainer && i.item[0] !== this.currentItem[0] || (r = this.options.toleranceElement ? e(this.options.toleranceElement, i.item) : i.item, t || (i.width = r.outerWidth(), i.height = r.outerHeight()), a = r.offset(), i.left = a.left, i.top = a.top);
                if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                else
                    for (n = this.containers.length - 1; n >= 0; n--) a = this.containers[n].element.offset(), this.containers[n].containerCache.left = a.left, this.containers[n].containerCache.top = a.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight();
                return this
            },
            _createPlaceholder: function (t) {
                t = t || this;
                var n, i = t.options;
                i.placeholder && i.placeholder.constructor !== String || (n = i.placeholder, i.placeholder = {
                    element: function () {
                        var i = t.currentItem[0].nodeName.toLowerCase(),
                            r = e("<" + i + ">", t.document[0]);
                        return t._addClass(r, "ui-sortable-placeholder", n || t.currentItem[0].className)._removeClass(r, "ui-sortable-helper"), "tbody" === i ? t._createTrPlaceholder(t.currentItem.find("tr").eq(0), e("<tr>", t.document[0]).appendTo(r)) : "tr" === i ? t._createTrPlaceholder(t.currentItem, r) : "img" === i && r.attr("src", t.currentItem.attr("src")), n || r.css("visibility", "hidden"), r
                    },
                    update: function (e, r) {
                        (!n || i.forcePlaceholderSize) && (r.height() || r.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), r.width() || r.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)))
                    }
                }), t.placeholder = e(i.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), i.placeholder.update(t, t.placeholder)
            },
            _createTrPlaceholder: function (t, n) {
                var i = this;
                t.children().each(function () {
                    e("<td>&#160;</td>", i.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(n)
                })
            },
            _contactContainers: function (t) {
                var n, i, r, a, o, s, l, c, u, d, h = null,
                    f = null;
                for (n = this.containers.length - 1; n >= 0; n--)
                    if (!e.contains(this.currentItem[0], this.containers[n].element[0]))
                        if (this._intersectsWith(this.containers[n].containerCache)) {
                            if (h && e.contains(this.containers[n].element[0], h.element[0])) continue;
                            h = this.containers[n], f = n
                        } else this.containers[n].containerCache.over && (this.containers[n]._trigger("out", t, this._uiHash(this)), this.containers[n].containerCache.over = 0);
                if (h)
                    if (1 === this.containers.length) this.containers[f].containerCache.over || (this.containers[f]._trigger("over", t, this._uiHash(this)), this.containers[f].containerCache.over = 1);
                    else {
                        for (r = 1e4, a = null, u = h.floating || this._isFloating(this.currentItem), o = u ? "left" : "top", s = u ? "width" : "height", d = u ? "pageX" : "pageY", i = this.items.length - 1; i >= 0; i--) e.contains(this.containers[f].element[0], this.items[i].item[0]) && this.items[i].item[0] !== this.currentItem[0] && (l = this.items[i].item.offset()[o], c = !1, t[d] - l > this.items[i][s] / 2 && (c = !0), Math.abs(t[d] - l) < r && (r = Math.abs(t[d] - l), a = this.items[i], this.direction = c ? "up" : "down"));
                        if (!a && !this.options.dropOnEmpty) return;
                        if (this.currentContainer === this.containers[f]) return void (this.currentContainer.containerCache.over || (this.containers[f]._trigger("over", t, this._uiHash()), this.currentContainer.containerCache.over = 1));
                        a ? this._rearrange(t, a, null, !0) : this._rearrange(t, null, this.containers[f].element, !0), this._trigger("change", t, this._uiHash()), this.containers[f]._trigger("change", t, this._uiHash(this)), this.currentContainer = this.containers[f], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[f]._trigger("over", t, this._uiHash(this)), this.containers[f].containerCache.over = 1
                    }
            },
            _createHelper: function (t) {
                var n = this.options,
                    i = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t, this.currentItem])) : "clone" === n.helper ? this.currentItem.clone() : this.currentItem;
                return i.parents("body").length || e("parent" !== n.appendTo ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(i[0]), i[0] === this.currentItem[0] && (this._storedCSS = {
                    width: this.currentItem[0].style.width,
                    height: this.currentItem[0].style.height,
                    position: this.currentItem.css("position"),
                    top: this.currentItem.css("top"),
                    left: this.currentItem.css("left")
                }), (!i[0].style.width || n.forceHelperSize) && i.width(this.currentItem.width()), (!i[0].style.height || n.forceHelperSize) && i.height(this.currentItem.height()), i
            },
            _adjustOffsetFromHelper: function (t) {
                "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                    left: +t[0],
                    top: +t[1] || 0
                }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
            },
            _getParentOffset: function () {
                this.offsetParent = this.helper.offsetParent();
                var t = this.offsetParent.offset();
                return "absolute" === this.cssPosition && this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                    top: 0,
                    left: 0
                }), {
                    top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function () {
                if ("relative" === this.cssPosition) {
                    var e = this.currentItem.position();
                    return {
                        top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                        left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                    }
                }
                return {
                    top: 0,
                    left: 0
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                    top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var t, n, i, r = this.options;
                "parent" === r.containment && (r.containment = this.helper[0].parentNode), ("document" === r.containment || "window" === r.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, "document" === r.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left, ("document" === r.containment ? this.document.height() || document.body.parentNode.scrollHeight : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(r.containment) || (t = e(r.containment)[0], n = e(r.containment).offset(), i = "hidden" !== e(t).css("overflow"), this.containment = [n.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, n.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, n.left + (i ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, n.top + (i ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
            },
            _convertPositionTo: function (t, n) {
                n || (n = this.position);
                var i = "absolute" === t ? 1 : -1,
                    r = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    a = /(html|body)/i.test(r[0].tagName);
                return {
                    top: n.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : r.scrollTop()) * i,
                    left: n.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : r.scrollLeft()) * i
                }
            },
            _generatePosition: function (t) {
                var n, i, r = this.options,
                    a = t.pageX,
                    o = t.pageY,
                    s = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    l = /(html|body)/i.test(s[0].tagName);
                return "relative" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (a = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (a = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), r.grid && (n = this.originalPageY + Math.round((o - this.originalPageY) / r.grid[1]) * r.grid[1], o = this.containment ? n - this.offset.click.top >= this.containment[1] && n - this.offset.click.top <= this.containment[3] ? n : n - this.offset.click.top >= this.containment[1] ? n - r.grid[1] : n + r.grid[1] : n, i = this.originalPageX + Math.round((a - this.originalPageX) / r.grid[0]) * r.grid[0], a = this.containment ? i - this.offset.click.left >= this.containment[0] && i - this.offset.click.left <= this.containment[2] ? i : i - this.offset.click.left >= this.containment[0] ? i - r.grid[0] : i + r.grid[0] : i)), {
                    top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : s.scrollTop()),
                    left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : s.scrollLeft())
                }
            },
            _rearrange: function (e, t, n, i) {
                n ? n[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                var r = this.counter;
                this._delay(function () {
                    r === this.counter && this.refreshPositions(!i)
                })
            },
            _clear: function (e, t) {
                function n(e, t, n) {
                    return function (i) {
                        n._trigger(e, i, t._uiHash(t))
                    }
                }
                this.reverting = !1;
                var i, r = [];
                if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                    for (i in this._storedCSS) ("auto" === this._storedCSS[i] || "static" === this._storedCSS[i]) && (this._storedCSS[i] = "");
                    this.currentItem.css(this._storedCSS), this._removeClass(this.currentItem, "ui-sortable-helper")
                } else this.currentItem.show();
                for (this.fromOutside && !t && r.push(function (e) {
                    this._trigger("receive", e, this._uiHash(this.fromOutside))
                }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || r.push(function (e) {
                    this._trigger("update", e, this._uiHash())
                }), this !== this.currentContainer && (t || (r.push(function (e) {
                    this._trigger("remove", e, this._uiHash())
                }), r.push(function (e) {
                    return function (t) {
                        e._trigger("receive", t, this._uiHash(this))
                    }
                }.call(this, this.currentContainer)), r.push(function (e) {
                    return function (t) {
                        e._trigger("update", t, this._uiHash(this))
                    }
                }.call(this, this.currentContainer)))), i = this.containers.length - 1; i >= 0; i--) t || r.push(n("deactivate", this, this.containers[i])), this.containers[i].containerCache.over && (r.push(n("out", this, this.containers[i])), this.containers[i].containerCache.over = 0);
                if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !t) {
                    for (i = 0; i < r.length; i++) r[i].call(this, e);
                    this._trigger("stop", e, this._uiHash())
                }
                return this.fromOutside = !1, !this.cancelHelperRemoval
            },
            _trigger: function () {
                e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
            },
            _uiHash: function (t) {
                var n = t || this;
                return {
                    helper: n.helper,
                    placeholder: n.placeholder || e([]),
                    position: n.position,
                    originalPosition: n.originalPosition,
                    offset: n.positionAbs,
                    item: n.currentItem,
                    sender: t ? t.element : null
                }
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.ui.keyCode = {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../keycode", "../version", "../widget"], e) : e(jQuery)
    }(function (e) {
        return e.widget("ui.slider", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "slide",
            options: {
                animate: !1,
                classes: {
                    "ui-slider": "ui-corner-all",
                    "ui-slider-handle": "ui-corner-all",
                    "ui-slider-range": "ui-corner-all ui-widget-header"
                },
                distance: 0,
                max: 100,
                min: 0,
                orientation: "horizontal",
                range: !1,
                step: 1,
                value: 0,
                values: null,
                change: null,
                slide: null,
                start: null,
                stop: null
            },
            numPages: 5,
            _create: function () {
                this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this._addClass("ui-slider ui-slider-" + this.orientation, "ui-widget ui-widget-content"), this._refresh(), this._animateOff = !1
            },
            _refresh: function () {
                this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
            },
            _createHandles: function () {
                var t, n, i = this.options,
                    r = this.element.find(".ui-slider-handle"),
                    a = "<span tabindex='0'></span>",
                    o = [];
                for (n = i.values && i.values.length || 1, r.length > n && (r.slice(n).remove(), r = r.slice(0, n)), t = r.length; n > t; t++) o.push(a);
                this.handles = r.add(e(o.join("")).appendTo(this.element)), this._addClass(this.handles, "ui-slider-handle", "ui-state-default"), this.handle = this.handles.eq(0), this.handles.each(function (t) {
                    e(this).data("ui-slider-handle-index", t).attr("tabIndex", 0)
                })
            },
            _createRange: function () {
                var t = this.options;
                t.range ? (t.range === !0 && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? (this._removeClass(this.range, "ui-slider-range-min ui-slider-range-max"), this.range.css({
                    left: "",
                    bottom: ""
                })) : (this.range = e("<div>").appendTo(this.element), this._addClass(this.range, "ui-slider-range")), ("min" === t.range || "max" === t.range) && this._addClass(this.range, "ui-slider-range-" + t.range)) : (this.range && this.range.remove(), this.range = null)
            },
            _setupEvents: function () {
                this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles)
            },
            _destroy: function () {
                this.handles.remove(), this.range && this.range.remove(), this._mouseDestroy()
            },
            _mouseCapture: function (t) {
                var n, i, r, a, o, s, l, c, u = this,
                    d = this.options;
                return d.disabled ? !1 : (this.elementSize = {
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight()
                }, this.elementOffset = this.element.offset(), n = {
                    x: t.pageX,
                    y: t.pageY
                }, i = this._normValueFromMouse(n), r = this._valueMax() - this._valueMin() + 1, this.handles.each(function (t) {
                    var n = Math.abs(i - u.values(t));
                    (r > n || r === n && (t === u._lastChangedValue || u.values(t) === d.min)) && (r = n, a = e(this), o = t)
                }), s = this._start(t, o), s === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = o, this._addClass(a, null, "ui-state-active"), a.trigger("focus"), l = a.offset(), c = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = c ? {
                    left: 0,
                    top: 0
                } : {
                    left: t.pageX - l.left - a.width() / 2,
                    top: t.pageY - l.top - a.height() / 2 - (parseInt(a.css("borderTopWidth"), 10) || 0) - (parseInt(a.css("borderBottomWidth"), 10) || 0) + (parseInt(a.css("marginTop"), 10) || 0)
                }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, i), this._animateOff = !0, !0))
            },
            _mouseStart: function () {
                return !0
            },
            _mouseDrag: function (e) {
                var t = {
                    x: e.pageX,
                    y: e.pageY
                },
                    n = this._normValueFromMouse(t);
                return this._slide(e, this._handleIndex, n), !1
            },
            _mouseStop: function (e) {
                return this._removeClass(this.handles, null, "ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
            },
            _detectOrientation: function () {
                this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
            },
            _normValueFromMouse: function (e) {
                var t, n, i, r, a;
                return "horizontal" === this.orientation ? (t = this.elementSize.width, n = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, n = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), i = n / t, i > 1 && (i = 1), 0 > i && (i = 0), "vertical" === this.orientation && (i = 1 - i), r = this._valueMax() - this._valueMin(), a = this._valueMin() + i * r, this._trimAlignValue(a)
            },
            _uiHash: function (e, t, n) {
                var i = {
                    handle: this.handles[e],
                    handleIndex: e,
                    value: void 0 !== t ? t : this.value()
                };
                return this._hasMultipleValues() && (i.value = void 0 !== t ? t : this.values(e), i.values = n || this.values()), i
            },
            _hasMultipleValues: function () {
                return this.options.values && this.options.values.length
            },
            _start: function (e, t) {
                return this._trigger("start", e, this._uiHash(t))
            },
            _slide: function (e, t, n) {
                var i, r, a = this.value(),
                    o = this.values();
                this._hasMultipleValues() && (r = this.values(t ? 0 : 1), a = this.values(t), 2 === this.options.values.length && this.options.range === !0 && (n = 0 === t ? Math.min(r, n) : Math.max(r, n)), o[t] = n), n !== a && (i = this._trigger("slide", e, this._uiHash(t, n, o)), i !== !1 && (this._hasMultipleValues() ? this.values(t, n) : this.value(n)))
            },
            _stop: function (e, t) {
                this._trigger("stop", e, this._uiHash(t))
            },
            _change: function (e, t) {
                this._keySliding || this._mouseSliding || (this._lastChangedValue = t, this._trigger("change", e, this._uiHash(t)))
            },
            value: function (e) {
                return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), void this._change(null, 0)) : this._value()
            },
            values: function (t, n) {
                var i, r, a;
                if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(n), this._refreshValue(), void this._change(null, t);
                if (!arguments.length) return this._values();
                if (!e.isArray(arguments[0])) return this._hasMultipleValues() ? this._values(t) : this.value();
                for (i = this.options.values, r = arguments[0], a = 0; a < i.length; a += 1) i[a] = this._trimAlignValue(r[a]), this._change(null, a);
                this._refreshValue()
            },
            _setOption: function (t, n) {
                var i, r = 0;
                switch ("range" === t && this.options.range === !0 && ("min" === n ? (this.options.value = this._values(0), this.options.values = null) : "max" === n && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (r = this.options.values.length), this._super(t, n), t) {
                    case "orientation":
                        this._detectOrientation(), this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-" + this.orientation), this._refreshValue(), this.options.range && this._refreshRange(n), this.handles.css("horizontal" === n ? "bottom" : "left", "");
                        break;
                    case "value":
                        this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                        break;
                    case "values":
                        for (this._animateOff = !0, this._refreshValue(), i = r - 1; i >= 0; i--) this._change(null, i);
                        this._animateOff = !1;
                        break;
                    case "step":
                    case "min":
                    case "max":
                        this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1;
                        break;
                    case "range":
                        this._animateOff = !0, this._refresh(), this._animateOff = !1
                }
            },
            _setOptionDisabled: function (e) {
                this._super(e), this._toggleClass(null, "ui-state-disabled", !!e)
            },
            _value: function () {
                var e = this.options.value;
                return e = this._trimAlignValue(e)
            },
            _values: function (e) {
                var t, n, i;
                if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
                if (this._hasMultipleValues()) {
                    for (n = this.options.values.slice(), i = 0; i < n.length; i += 1) n[i] = this._trimAlignValue(n[i]);
                    return n
                }
                return []
            },
            _trimAlignValue: function (e) {
                if (e <= this._valueMin()) return this._valueMin();
                if (e >= this._valueMax()) return this._valueMax();
                var t = this.options.step > 0 ? this.options.step : 1,
                    n = (e - this._valueMin()) % t,
                    i = e - n;
                return 2 * Math.abs(n) >= t && (i += n > 0 ? t : -t), parseFloat(i.toFixed(5))
            },
            _calculateNewMax: function () {
                var e = this.options.max,
                    t = this._valueMin(),
                    n = this.options.step,
                    i = Math.round((e - t) / n) * n;
                e = i + t, e > this.options.max && (e -= n), this.max = parseFloat(e.toFixed(this._precision()))
            },
            _precision: function () {
                var e = this._precisionOf(this.options.step);
                return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e
            },
            _precisionOf: function (e) {
                var t = e.toString(),
                    n = t.indexOf(".");
                return -1 === n ? 0 : t.length - n - 1
            },
            _valueMin: function () {
                return this.options.min
            },
            _valueMax: function () {
                return this.max
            },
            _refreshRange: function (e) {
                "vertical" === e && this.range.css({
                    width: "",
                    left: ""
                }), "horizontal" === e && this.range.css({
                    height: "",
                    bottom: ""
                })
            },
            _refreshValue: function () {
                var t, n, i, r, a, o = this.options.range,
                    s = this.options,
                    l = this,
                    c = this._animateOff ? !1 : s.animate,
                    u = {};
                this._hasMultipleValues() ? this.handles.each(function (i) {
                    n = (l.values(i) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, u["horizontal" === l.orientation ? "left" : "bottom"] = n + "%", e(this).stop(1, 1)[c ? "animate" : "css"](u, s.animate), l.options.range === !0 && ("horizontal" === l.orientation ? (0 === i && l.range.stop(1, 1)[c ? "animate" : "css"]({
                        left: n + "%"
                    }, s.animate), 1 === i && l.range[c ? "animate" : "css"]({
                        width: n - t + "%"
                    }, {
                        queue: !1,
                        duration: s.animate
                    })) : (0 === i && l.range.stop(1, 1)[c ? "animate" : "css"]({
                        bottom: n + "%"
                    }, s.animate), 1 === i && l.range[c ? "animate" : "css"]({
                        height: n - t + "%"
                    }, {
                        queue: !1,
                        duration: s.animate
                    }))), t = n
                }) : (i = this.value(), r = this._valueMin(), a = this._valueMax(), n = a !== r ? (i - r) / (a - r) * 100 : 0, u["horizontal" === this.orientation ? "left" : "bottom"] = n + "%", this.handle.stop(1, 1)[c ? "animate" : "css"](u, s.animate), "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    width: n + "%"
                }, s.animate), "max" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    width: 100 - n + "%"
                }, s.animate), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    height: n + "%"
                }, s.animate), "max" === o && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    height: 100 - n + "%"
                }, s.animate))
            },
            _handleEvents: {
                keydown: function (t) {
                    var n, i, r, a, o = e(t.target).data("ui-slider-handle-index");
                    switch (t.keyCode) {
                        case e.ui.keyCode.HOME:
                        case e.ui.keyCode.END:
                        case e.ui.keyCode.PAGE_UP:
                        case e.ui.keyCode.PAGE_DOWN:
                        case e.ui.keyCode.UP:
                        case e.ui.keyCode.RIGHT:
                        case e.ui.keyCode.DOWN:
                        case e.ui.keyCode.LEFT:
                            if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, this._addClass(e(t.target), null, "ui-state-active"), n = this._start(t, o), n === !1)) return
                    }
                    switch (a = this.options.step, i = r = this._hasMultipleValues() ? this.values(o) : this.value(), t.keyCode) {
                        case e.ui.keyCode.HOME:
                            r = this._valueMin();
                            break;
                        case e.ui.keyCode.END:
                            r = this._valueMax();
                            break;
                        case e.ui.keyCode.PAGE_UP:
                            r = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / this.numPages);
                            break;
                        case e.ui.keyCode.PAGE_DOWN:
                            r = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / this.numPages);
                            break;
                        case e.ui.keyCode.UP:
                        case e.ui.keyCode.RIGHT:
                            if (i === this._valueMax()) return;
                            r = this._trimAlignValue(i + a);
                            break;
                        case e.ui.keyCode.DOWN:
                        case e.ui.keyCode.LEFT:
                            if (i === this._valueMin()) return;
                            r = this._trimAlignValue(i - a)
                    }
                    this._slide(t, o, r)
                },
                keyup: function (t) {
                    var n = e(t.target).data("ui-slider-handle-index");
                    this._keySliding && (this._keySliding = !1, this._stop(t, n), this._change(t, n), this._removeClass(e(t.target), null, "ui-state-active"))
                }
            }
        })
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.ui.plugin = {
            add: function (t, n, i) {
                var r, a = e.ui[t].prototype;
                for (r in i) a.plugins[r] = a.plugins[r] || [], a.plugins[r].push([n, i[r]])
            },
            call: function (e, t, n, i) {
                var r, a = e.plugins[t];
                if (a && (i || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType))
                    for (r = 0; r < a.length; r++) e.options[a[r][0]] && a[r][1].apply(e.element, n)
            }
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.ui.safeActiveElement = function (e) {
            var t;
            try {
                t = e.activeElement
            } catch (n) {
                t = e.body
            }
            return t || (t = e.body), t.nodeName || (t = e.body), t
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./version"], e) : e(jQuery)
    }(function (e) {
        return e.ui.safeBlur = function (t) {
            t && "body" !== t.nodeName.toLowerCase() && e(t).trigger("blur")
        }
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "./mouse", "../data", "../plugin", "../safe-active-element", "../safe-blur", "../scroll-parent", "../version", "../widget"], e) : e(jQuery)
    }(function (e) {
        return e.widget("ui.draggable", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "drag",
            options: {
                addClasses: !0,
                appendTo: "parent",
                axis: !1,
                connectToSortable: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                iframeFix: !1,
                opacity: !1,
                refreshPositions: !1,
                revert: !1,
                revertDuration: 500,
                scope: "default",
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                snap: !1,
                snapMode: "both",
                snapTolerance: 20,
                stack: !1,
                zIndex: !1,
                drag: null,
                start: null,
                stop: null
            },
            _create: function () {
                "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this._addClass("ui-draggable"), this._setHandleClassName(), this._mouseInit()
            },
            _setOption: function (e, t) {
                this._super(e, t), "handle" === e && (this._removeHandleClassName(), this._setHandleClassName())
            },
            _destroy: function () {
                return (this.helper || this.element).is(".ui-draggable-dragging") ? void (this.destroyOnClear = !0) : (this._removeHandleClassName(), void this._mouseDestroy())
            },
            _mouseCapture: function (t) {
                var n = this.options;
                return this.helper || n.disabled || e(t.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(t), this.handle ? (this._blurActiveElement(t), this._blockFrames(n.iframeFix === !0 ? "iframe" : n.iframeFix), !0) : !1)
            },
            _blockFrames: function (t) {
                this.iframeBlocks = this.document.find(t).map(function () {
                    var t = e(this);
                    return e("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]
                })
            },
            _unblockFrames: function () {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _blurActiveElement: function (t) {
                var n = e.ui.safeActiveElement(this.document[0]),
                    i = e(t.target);
                i.closest(n).length || e.ui.safeBlur(n)
            },
            _mouseStart: function (t) {
                var n = this.options;
                return this.helper = this._createHelper(t), this._addClass(this.helper, "ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function () {
                    return "fixed" === e(this).css("position")
                }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, n.cursorAt && this._adjustOffsetFromHelper(n.cursorAt), this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
            },
            _refreshOffsets: function (e) {
                this.offset = {
                    top: this.positionAbs.top - this.margins.top,
                    left: this.positionAbs.left - this.margins.left,
                    scroll: !1,
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                }, this.offset.click = {
                    left: e.pageX - this.offset.left,
                    top: e.pageY - this.offset.top
                }
            },
            _mouseDrag: function (t, n) {
                if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !n) {
                    var i = this._uiHash();
                    if (this._trigger("drag", t, i) === !1) return this._mouseUp(new e.Event("mouseup", t)), !1;
                    this.position = i.position
                }
                return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
            },
            _mouseStop: function (t) {
                var n = this,
                    i = !1;
                return e.ui.ddmanager && !this.options.dropBehaviour && (i = e.ui.ddmanager.drop(this, t)), this.dropped && (i = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !i || "valid" === this.options.revert && i || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, i) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
                    n._trigger("stop", t) !== !1 && n._clear()
                }) : this._trigger("stop", t) !== !1 && this._clear(), !1
            },
            _mouseUp: function (t) {
                return this._unblockFrames(), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.trigger("focus"), e.ui.mouse.prototype._mouseUp.call(this, t)
            },
            cancel: function () {
                return this.helper.is(".ui-draggable-dragging") ? this._mouseUp(new e.Event("mouseup", {
                    target: this.element[0]
                })) : this._clear(), this
            },
            _getHandle: function (t) {
                return this.options.handle ? !!e(t.target).closest(this.element.find(this.options.handle)).length : !0
            },
            _setHandleClassName: function () {
                this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this._addClass(this.handleElement, "ui-draggable-handle")
            },
            _removeHandleClassName: function () {
                this._removeClass(this.handleElement, "ui-draggable-handle")
            },
            _createHelper: function (t) {
                var n = this.options,
                    i = e.isFunction(n.helper),
                    r = i ? e(n.helper.apply(this.element[0], [t])) : "clone" === n.helper ? this.element.clone().removeAttr("id") : this.element;
                return r.parents("body").length || r.appendTo("parent" === n.appendTo ? this.element[0].parentNode : n.appendTo), i && r[0] === this.element[0] && this._setPositionRelative(), r[0] === this.element[0] || /(fixed|absolute)/.test(r.css("position")) || r.css("position", "absolute"), r
            },
            _setPositionRelative: function () {
                /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
            },
            _adjustOffsetFromHelper: function (t) {
                "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                    left: +t[0],
                    top: +t[1] || 0
                }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
            },
            _isRootNode: function (e) {
                return /(html|body)/i.test(e.tagName) || e === this.document[0]
            },
            _getParentOffset: function () {
                var t = this.offsetParent.offset(),
                    n = this.document[0];
                return "absolute" === this.cssPosition && this.scrollParent[0] !== n && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = {
                    top: 0,
                    left: 0
                }), {
                    top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function () {
                if ("relative" !== this.cssPosition) return {
                    top: 0,
                    left: 0
                };
                var e = this.element.position(),
                    t = this._isRootNode(this.scrollParent[0]);
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft())
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.element.css("marginLeft"), 10) || 0,
                    top: parseInt(this.element.css("marginTop"), 10) || 0,
                    right: parseInt(this.element.css("marginRight"), 10) || 0,
                    bottom: parseInt(this.element.css("marginBottom"), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var t, n, i, r = this.options,
                    a = this.document[0];
                return this.relativeContainer = null, r.containment ? "window" === r.containment ? void (this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : "document" === r.containment ? void (this.containment = [0, 0, e(a).width() - this.helperProportions.width - this.margins.left, (e(a).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : r.containment.constructor === Array ? void (this.containment = r.containment) : ("parent" === r.containment && (r.containment = this.helper[0].parentNode), n = e(r.containment), i = n[0], void (i && (t = /(scroll|auto)/.test(n.css("overflow")), this.containment = [(parseInt(n.css("borderLeftWidth"), 10) || 0) + (parseInt(n.css("paddingLeft"), 10) || 0), (parseInt(n.css("borderTopWidth"), 10) || 0) + (parseInt(n.css("paddingTop"), 10) || 0), (t ? Math.max(i.scrollWidth, i.offsetWidth) : i.offsetWidth) - (parseInt(n.css("borderRightWidth"), 10) || 0) - (parseInt(n.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(i.scrollHeight, i.offsetHeight) : i.offsetHeight) - (parseInt(n.css("borderBottomWidth"), 10) || 0) - (parseInt(n.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = n))) : void (this.containment = null)
            },
            _convertPositionTo: function (e, t) {
                t || (t = this.position);
                var n = "absolute" === e ? 1 : -1,
                    i = this._isRootNode(this.scrollParent[0]);
                return {
                    top: t.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.offset.scroll.top : i ? 0 : this.offset.scroll.top) * n,
                    left: t.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.offset.scroll.left : i ? 0 : this.offset.scroll.left) * n
                }
            },
            _generatePosition: function (e, t) {
                var n, i, r, a, o = this.options,
                    s = this._isRootNode(this.scrollParent[0]),
                    l = e.pageX,
                    c = e.pageY;
                return s && this.offset.scroll || (this.offset.scroll = {
                    top: this.scrollParent.scrollTop(),
                    left: this.scrollParent.scrollLeft()
                }), t && (this.containment && (this.relativeContainer ? (i = this.relativeContainer.offset(), n = [this.containment[0] + i.left, this.containment[1] + i.top, this.containment[2] + i.left, this.containment[3] + i.top]) : n = this.containment, e.pageX - this.offset.click.left < n[0] && (l = n[0] + this.offset.click.left), e.pageY - this.offset.click.top < n[1] && (c = n[1] + this.offset.click.top), e.pageX - this.offset.click.left > n[2] && (l = n[2] + this.offset.click.left), e.pageY - this.offset.click.top > n[3] && (c = n[3] + this.offset.click.top)), o.grid && (r = o.grid[1] ? this.originalPageY + Math.round((c - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, c = n ? r - this.offset.click.top >= n[1] || r - this.offset.click.top > n[3] ? r : r - this.offset.click.top >= n[1] ? r - o.grid[1] : r + o.grid[1] : r, a = o.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, l = n ? a - this.offset.click.left >= n[0] || a - this.offset.click.left > n[2] ? a : a - this.offset.click.left >= n[0] ? a - o.grid[0] : a + o.grid[0] : a), "y" === o.axis && (l = this.originalPageX), "x" === o.axis && (c = this.originalPageY)), {
                    top: c - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top),
                    left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left)
                }
            },
            _clear: function () {
                this._removeClass(this.helper, "ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy()
            },
            _trigger: function (t, n, i) {
                return i = i || this._uiHash(), e.ui.plugin.call(this, t, [n, i, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), i.offset = this.positionAbs), e.Widget.prototype._trigger.call(this, t, n, i)
            },
            plugins: {},
            _uiHash: function () {
                return {
                    helper: this.helper,
                    position: this.position,
                    originalPosition: this.originalPosition,
                    offset: this.positionAbs
                }
            }
        }), e.ui.plugin.add("draggable", "connectToSortable", {
            start: function (t, n, i) {
                var r = e.extend({}, n, {
                    item: i.element
                });
                i.sortables = [], e(i.options.connectToSortable).each(function () {
                    var n = e(this).sortable("instance");
                    n && !n.options.disabled && (i.sortables.push(n), n.refreshPositions(), n._trigger("activate", t, r))
                })
            },
            stop: function (t, n, i) {
                var r = e.extend({}, n, {
                    item: i.element
                });
                i.cancelHelperRemoval = !1, e.each(i.sortables, function () {
                    var e = this;
                    e.isOver ? (e.isOver = 0, i.cancelHelperRemoval = !0, e.cancelHelperRemoval = !1, e._storedCSS = {
                        position: e.placeholder.css("position"),
                        top: e.placeholder.css("top"),
                        left: e.placeholder.css("left")
                    }, e._mouseStop(t), e.options.helper = e.options._helper) : (e.cancelHelperRemoval = !0, e._trigger("deactivate", t, r))
                })
            },
            drag: function (t, n, i) {
                e.each(i.sortables, function () {
                    var r = !1,
                        a = this;
                    a.positionAbs = i.positionAbs, a.helperProportions = i.helperProportions, a.offset.click = i.offset.click, a._intersectsWith(a.containerCache) && (r = !0, e.each(i.sortables, function () {
                        return this.positionAbs = i.positionAbs, this.helperProportions = i.helperProportions, this.offset.click = i.offset.click, this !== a && this._intersectsWith(this.containerCache) && e.contains(a.element[0], this.element[0]) && (r = !1), r
                    })), r ? (a.isOver || (a.isOver = 1, i._parent = n.helper.parent(), a.currentItem = n.helper.appendTo(a.element).data("ui-sortable-item", !0), a.options._helper = a.options.helper, a.options.helper = function () {
                        return n.helper[0]
                    }, t.target = a.currentItem[0], a._mouseCapture(t, !0), a._mouseStart(t, !0, !0), a.offset.click.top = i.offset.click.top, a.offset.click.left = i.offset.click.left, a.offset.parent.left -= i.offset.parent.left - a.offset.parent.left, a.offset.parent.top -= i.offset.parent.top - a.offset.parent.top, i._trigger("toSortable", t), i.dropped = a.element, e.each(i.sortables, function () {
                        this.refreshPositions()
                    }), i.currentItem = i.element, a.fromOutside = i), a.currentItem && (a._mouseDrag(t), n.position = a.position)) : a.isOver && (a.isOver = 0, a.cancelHelperRemoval = !0, a.options._revert = a.options.revert, a.options.revert = !1, a._trigger("out", t, a._uiHash(a)), a._mouseStop(t, !0), a.options.revert = a.options._revert, a.options.helper = a.options._helper, a.placeholder && a.placeholder.remove(), n.helper.appendTo(i._parent), i._refreshOffsets(t), n.position = i._generatePosition(t, !0), i._trigger("fromSortable", t), i.dropped = !1, e.each(i.sortables, function () {
                        this.refreshPositions()
                    }))
                })
            }
        }), e.ui.plugin.add("draggable", "cursor", {
            start: function (t, n, i) {
                var r = e("body"),
                    a = i.options;
                r.css("cursor") && (a._cursor = r.css("cursor")), r.css("cursor", a.cursor)
            },
            stop: function (t, n, i) {
                var r = i.options;
                r._cursor && e("body").css("cursor", r._cursor)
            }
        }), e.ui.plugin.add("draggable", "opacity", {
            start: function (t, n, i) {
                var r = e(n.helper),
                    a = i.options;
                r.css("opacity") && (a._opacity = r.css("opacity")), r.css("opacity", a.opacity)
            },
            stop: function (t, n, i) {
                var r = i.options;
                r._opacity && e(n.helper).css("opacity", r._opacity)
            }
        }), e.ui.plugin.add("draggable", "scroll", {
            start: function (e, t, n) {
                n.scrollParentNotHidden || (n.scrollParentNotHidden = n.helper.scrollParent(!1)), n.scrollParentNotHidden[0] !== n.document[0] && "HTML" !== n.scrollParentNotHidden[0].tagName && (n.overflowOffset = n.scrollParentNotHidden.offset())
            },
            drag: function (t, n, i) {
                var r = i.options,
                    a = !1,
                    o = i.scrollParentNotHidden[0],
                    s = i.document[0];
                o !== s && "HTML" !== o.tagName ? (r.axis && "x" === r.axis || (i.overflowOffset.top + o.offsetHeight - t.pageY < r.scrollSensitivity ? o.scrollTop = a = o.scrollTop + r.scrollSpeed : t.pageY - i.overflowOffset.top < r.scrollSensitivity && (o.scrollTop = a = o.scrollTop - r.scrollSpeed)), r.axis && "y" === r.axis || (i.overflowOffset.left + o.offsetWidth - t.pageX < r.scrollSensitivity ? o.scrollLeft = a = o.scrollLeft + r.scrollSpeed : t.pageX - i.overflowOffset.left < r.scrollSensitivity && (o.scrollLeft = a = o.scrollLeft - r.scrollSpeed))) : (r.axis && "x" === r.axis || (t.pageY - e(s).scrollTop() < r.scrollSensitivity ? a = e(s).scrollTop(e(s).scrollTop() - r.scrollSpeed) : e(window).height() - (t.pageY - e(s).scrollTop()) < r.scrollSensitivity && (a = e(s).scrollTop(e(s).scrollTop() + r.scrollSpeed))), r.axis && "y" === r.axis || (t.pageX - e(s).scrollLeft() < r.scrollSensitivity ? a = e(s).scrollLeft(e(s).scrollLeft() - r.scrollSpeed) : e(window).width() - (t.pageX - e(s).scrollLeft()) < r.scrollSensitivity && (a = e(s).scrollLeft(e(s).scrollLeft() + r.scrollSpeed)))), a !== !1 && e.ui.ddmanager && !r.dropBehaviour && e.ui.ddmanager.prepareOffsets(i, t)
            }
        }), e.ui.plugin.add("draggable", "snap", {
            start: function (t, n, i) {
                var r = i.options;
                i.snapElements = [], e(r.snap.constructor !== String ? r.snap.items || ":data(ui-draggable)" : r.snap).each(function () {
                    var t = e(this),
                        n = t.offset();
                    this !== i.element[0] && i.snapElements.push({
                        item: this,
                        width: t.outerWidth(),
                        height: t.outerHeight(),
                        top: n.top,
                        left: n.left
                    })
                })
            },
            drag: function (t, n, i) {
                var r, a, o, s, l, c, u, d, h, f, p = i.options,
                    m = p.snapTolerance,
                    g = n.offset.left,
                    v = g + i.helperProportions.width,
                    y = n.offset.top,
                    b = y + i.helperProportions.height;
                for (h = i.snapElements.length - 1; h >= 0; h--) l = i.snapElements[h].left - i.margins.left, c = l + i.snapElements[h].width, u = i.snapElements[h].top - i.margins.top, d = u + i.snapElements[h].height, l - m > v || g > c + m || u - m > b || y > d + m || !e.contains(i.snapElements[h].item.ownerDocument, i.snapElements[h].item) ? (i.snapElements[h].snapping && i.options.snap.release && i.options.snap.release.call(i.element, t, e.extend(i._uiHash(), {
                    snapItem: i.snapElements[h].item
                })), i.snapElements[h].snapping = !1) : ("inner" !== p.snapMode && (r = Math.abs(u - b) <= m, a = Math.abs(d - y) <= m, o = Math.abs(l - v) <= m, s = Math.abs(c - g) <= m, r && (n.position.top = i._convertPositionTo("relative", {
                    top: u - i.helperProportions.height,
                    left: 0
                }).top), a && (n.position.top = i._convertPositionTo("relative", {
                    top: d,
                    left: 0
                }).top), o && (n.position.left = i._convertPositionTo("relative", {
                    top: 0,
                    left: l - i.helperProportions.width
                }).left), s && (n.position.left = i._convertPositionTo("relative", {
                    top: 0,
                    left: c
                }).left)), f = r || a || o || s, "outer" !== p.snapMode && (r = Math.abs(u - y) <= m, a = Math.abs(d - b) <= m, o = Math.abs(l - g) <= m, s = Math.abs(c - v) <= m, r && (n.position.top = i._convertPositionTo("relative", {
                    top: u,
                    left: 0
                }).top), a && (n.position.top = i._convertPositionTo("relative", {
                    top: d - i.helperProportions.height,
                    left: 0
                }).top), o && (n.position.left = i._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left), s && (n.position.left = i._convertPositionTo("relative", {
                    top: 0,
                    left: c - i.helperProportions.width
                }).left)), !i.snapElements[h].snapping && (r || a || o || s || f) && i.options.snap.snap && i.options.snap.snap.call(i.element, t, e.extend(i._uiHash(), {
                    snapItem: i.snapElements[h].item
                })), i.snapElements[h].snapping = r || a || o || s || f)
            }
        }), e.ui.plugin.add("draggable", "stack", {
            start: function (t, n, i) {
                var r, a = i.options,
                    o = e.makeArray(e(a.stack)).sort(function (t, n) {
                        return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(n).css("zIndex"), 10) || 0)
                    });
                o.length && (r = parseInt(e(o[0]).css("zIndex"), 10) || 0, e(o).each(function (t) {
                    e(this).css("zIndex", r + t)
                }), this.css("zIndex", r + o.length))
            }
        }), e.ui.plugin.add("draggable", "zIndex", {
            start: function (t, n, i) {
                var r = e(n.helper),
                    a = i.options;
                r.css("zIndex") && (a._zIndex = r.css("zIndex")), r.css("zIndex", a.zIndex)
            },
            stop: function (t, n, i) {
                var r = i.options;
                r._zIndex && e(n.helper).css("zIndex", r._zIndex)
            }
        }), e.ui.draggable
    }),
    function (e) {
        function t(e, t) {
            if (!(e.originalEvent.touches.length > 1)) {
                e.preventDefault();
                var n = e.originalEvent.changedTouches[0],
                    i = document.createEvent("MouseEvents");
                i.initMouseEvent(t, !0, !0, window, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), e.target.dispatchEvent(i)
            }
        }
        if (e.support.touch = "ontouchend" in document, e.support.touch) {
            var n, i = e.ui.mouse.prototype,
                r = i._mouseInit,
                a = i._mouseDestroy;
            i._touchStart = function (e) {
                var i = this;
                !n && i._mouseCapture(e.originalEvent.changedTouches[0]) && (n = !0, i._touchMoved = !1, t(e, "mouseover"), t(e, "mousemove"), t(e, "mousedown"))
            }, i._touchMove = function (e) {
                n && (this._touchMoved = !0, t(e, "mousemove"))
            }, i._touchEnd = function (e) {
                n && (t(e, "mouseup"), t(e, "mouseout"), this._touchMoved || t(e, "click"), n = !1)
            }, i._mouseInit = function () {
                var t = this;
                t.element.bind({
                    touchstart: e.proxy(t, "_touchStart"),
                    touchmove: e.proxy(t, "_touchMove"),
                    touchend: e.proxy(t, "_touchEnd")
                }), r.call(t)
            }, i._mouseDestroy = function () {
                var t = this;
                t.element.unbind({
                    touchstart: e.proxy(t, "_touchStart"),
                    touchmove: e.proxy(t, "_touchMove"),
                    touchend: e.proxy(t, "_touchEnd")
                }), a.call(t)
            }
        }
    }(jQuery),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery", "jquery.ui.widget"], e) : "object" == typeof exports ? e(require("jquery"), require("./vendor/jquery.ui.widget")) : e(window.jQuery)
    }(function (e) {
        "use strict";

        function t(t) {
            var n = "dragover" === t;
            return function (i) {
                i.dataTransfer = i.originalEvent && i.originalEvent.dataTransfer;
                var r = i.dataTransfer;
                r && -1 !== e.inArray("Files", r.types) && this._trigger(t, e.Event(t, {
                    delegatedEvent: i
                })) !== !1 && (i.preventDefault(), n && (r.dropEffect = "copy"))
            }
        }
        e.support.fileInput = !(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent) || e('<input type="file">').prop("disabled")), e.support.xhrFileUpload = !(!window.ProgressEvent || !window.FileReader), e.support.xhrFormDataFileUpload = !!window.FormData, e.support.blobSlice = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice), e.widget("blueimp.fileupload", {
            options: {
                dropZone: e(document),
                pasteZone: void 0,
                fileInput: void 0,
                replaceFileInput: !0,
                paramName: void 0,
                singleFileUploads: !0,
                limitMultiFileUploads: void 0,
                limitMultiFileUploadSize: void 0,
                limitMultiFileUploadSizeOverhead: 512,
                sequentialUploads: !1,
                limitConcurrentUploads: void 0,
                forceIframeTransport: !1,
                redirect: void 0,
                redirectParamName: void 0,
                postMessage: void 0,
                multipart: !0,
                maxChunkSize: void 0,
                uploadedBytes: void 0,
                recalculateProgress: !0,
                progressInterval: 100,
                bitrateInterval: 500,
                autoUpload: !0,
                messages: {
                    uploadedBytes: "Uploaded bytes exceed file size"
                },
                i18n: function (t, n) {
                    return t = this.messages[t] || t.toString(), n && e.each(n, function (e, n) {
                        t = t.replace("{" + e + "}", n)
                    }), t
                },
                formData: function (e) {
                    return e.serializeArray()
                },
                add: function (t, n) {
                    return t.isDefaultPrevented() ? !1 : void ((n.autoUpload || n.autoUpload !== !1 && e(this).fileupload("option", "autoUpload")) && n.process().done(function () {
                        n.submit()
                    }))
                },
                processData: !1,
                contentType: !1,
                cache: !1,
                timeout: 0
            },
            _specialOptions: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"],
            _blobSlice: e.support.blobSlice && function () {
                var e = this.slice || this.webkitSlice || this.mozSlice;
                return e.apply(this, arguments)
            },
            _BitrateTimer: function () {
                this.timestamp = Date.now ? Date.now() : (new Date).getTime(), this.loaded = 0, this.bitrate = 0, this.getBitrate = function (e, t, n) {
                    var i = e - this.timestamp;
                    return (!this.bitrate || !n || i > n) && (this.bitrate = (t - this.loaded) * (1e3 / i) * 8, this.loaded = t, this.timestamp = e), this.bitrate
                }
            },
            _isXHRUpload: function (t) {
                return !t.forceIframeTransport && (!t.multipart && e.support.xhrFileUpload || e.support.xhrFormDataFileUpload)
            },
            _getFormData: function (t) {
                var n;
                return "function" === e.type(t.formData) ? t.formData(t.form) : e.isArray(t.formData) ? t.formData : "object" === e.type(t.formData) ? (n = [], e.each(t.formData, function (e, t) {
                    n.push({
                        name: e,
                        value: t
                    })
                }), n) : []
            },
            _getTotal: function (t) {
                var n = 0;
                return e.each(t, function (e, t) {
                    n += t.size || 1
                }), n
            },
            _initProgressObject: function (t) {
                var n = {
                    loaded: 0,
                    total: 0,
                    bitrate: 0
                };
                t._progress ? e.extend(t._progress, n) : t._progress = n
            },
            _initResponseObject: function (e) {
                var t;
                if (e._response)
                    for (t in e._response) e._response.hasOwnProperty(t) && delete e._response[t];
                else e._response = {}
            },
            _onProgress: function (t, n) {
                if (t.lengthComputable) {
                    var i, r = Date.now ? Date.now() : (new Date).getTime();
                    if (n._time && n.progressInterval && r - n._time < n.progressInterval && t.loaded !== t.total) return;
                    n._time = r, i = Math.floor(t.loaded / t.total * (n.chunkSize || n._progress.total)) + (n.uploadedBytes || 0), this._progress.loaded += i - n._progress.loaded, this._progress.bitrate = this._bitrateTimer.getBitrate(r, this._progress.loaded, n.bitrateInterval), n._progress.loaded = n.loaded = i, n._progress.bitrate = n.bitrate = n._bitrateTimer.getBitrate(r, i, n.bitrateInterval), this._trigger("progress", e.Event("progress", {
                        delegatedEvent: t
                    }), n), this._trigger("progressall", e.Event("progressall", {
                        delegatedEvent: t
                    }), this._progress)
                }
            },
            _initProgressListener: function (t) {
                var n = this,
                    i = t.xhr ? t.xhr() : e.ajaxSettings.xhr();
                i.upload && (e(i.upload).bind("progress", function (e) {
                    var i = e.originalEvent;
                    e.lengthComputable = i.lengthComputable, e.loaded = i.loaded, e.total = i.total, n._onProgress(e, t)
                }), t.xhr = function () {
                    return i
                })
            },
            _isInstanceOf: function (e, t) {
                return Object.prototype.toString.call(t) === "[object " + e + "]"
            },
            _initXHRData: function (t) {
                var n, i = this,
                    r = t.files[0],
                    a = t.multipart || !e.support.xhrFileUpload,
                    o = "array" === e.type(t.paramName) ? t.paramName[0] : t.paramName;
                t.headers = e.extend({}, t.headers), t.contentRange && (t.headers["Content-Range"] = t.contentRange), a && !t.blob && this._isInstanceOf("File", r) || (t.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(r.name) + '"'), a ? e.support.xhrFormDataFileUpload && (t.postMessage ? (n = this._getFormData(t), t.blob ? n.push({
                    name: o,
                    value: t.blob
                }) : e.each(t.files, function (i, r) {
                    n.push({
                        name: "array" === e.type(t.paramName) && t.paramName[i] || o,
                        value: r
                    })
                })) : (i._isInstanceOf("FormData", t.formData) ? n = t.formData : (n = new FormData, e.each(this._getFormData(t), function (e, t) {
                    n.append(t.name, t.value)
                })), t.blob ? n.append(o, t.blob, r.name) : e.each(t.files, function (r, a) {
                    (i._isInstanceOf("File", a) || i._isInstanceOf("Blob", a)) && n.append("array" === e.type(t.paramName) && t.paramName[r] || o, a, a.uploadName || a.name)
                })), t.data = n) : (t.contentType = r.type || "application/octet-stream", t.data = t.blob || r), t.blob = null
            },
            _initIframeSettings: function (t) {
                var n = e("<a></a>").prop("href", t.url).prop("host");
                t.dataType = "iframe " + (t.dataType || ""), t.formData = this._getFormData(t), t.redirect && n && n !== location.host && t.formData.push({
                    name: t.redirectParamName || "redirect",
                    value: t.redirect
                })
            },
            _initDataSettings: function (e) {
                this._isXHRUpload(e) ? (this._chunkedUpload(e, !0) || (e.data || this._initXHRData(e), this._initProgressListener(e)), e.postMessage && (e.dataType = "postmessage " + (e.dataType || ""))) : this._initIframeSettings(e)
            },
            _getParamName: function (t) {
                var n = e(t.fileInput),
                    i = t.paramName;
                return i ? e.isArray(i) || (i = [i]) : (i = [], n.each(function () {
                    for (var t = e(this), n = t.prop("name") || "files[]", r = (t.prop("files") || [1]).length; r;) i.push(n), r -= 1
                }), i.length || (i = [n.prop("name") || "files[]"])), i
            },
            _initFormSettings: function (t) {
                t.form && t.form.length || (t.form = e(t.fileInput.prop("form")), t.form.length || (t.form = e(this.options.fileInput.prop("form")))), t.paramName = this._getParamName(t), t.url || (t.url = t.form.prop("action") || location.href), t.type = (t.type || "string" === e.type(t.form.prop("method")) && t.form.prop("method") || "").toUpperCase(), "POST" !== t.type && "PUT" !== t.type && "PATCH" !== t.type && (t.type = "POST"), t.formAcceptCharset || (t.formAcceptCharset = t.form.attr("accept-charset"))
            },
            _getAJAXSettings: function (t) {
                var n = e.extend({}, this.options, t);
                return this._initFormSettings(n), this._initDataSettings(n), n
            },
            _getDeferredState: function (e) {
                return e.state ? e.state() : e.isResolved() ? "resolved" : e.isRejected() ? "rejected" : "pending"
            },
            _enhancePromise: function (e) {
                return e.success = e.done, e.error = e.fail, e.complete = e.always, e
            },
            _getXHRPromise: function (t, n, i) {
                var r = e.Deferred(),
                    a = r.promise();
                return n = n || this.options.context || a, t === !0 ? r.resolveWith(n, i) : t === !1 && r.rejectWith(n, i), a.abort = r.promise, this._enhancePromise(a)
            },
            _addConvenienceMethods: function (t, n) {
                var i = this,
                    r = function (t) {
                        return e.Deferred().resolveWith(i, t).promise()
                    };
                n.process = function (t, a) {
                    return (t || a) && (n._processQueue = this._processQueue = (this._processQueue || r([this])).then(function () {
                        return n.errorThrown ? e.Deferred().rejectWith(i, [n]).promise() : r(arguments)
                    }).then(t, a)), this._processQueue || r([this])
                }, n.submit = function () {
                    return "pending" !== this.state() && (n.jqXHR = this.jqXHR = i._trigger("submit", e.Event("submit", {
                        delegatedEvent: t
                    }), this) !== !1 && i._onSend(t, this)), this.jqXHR || i._getXHRPromise()
                }, n.abort = function () {
                    return this.jqXHR ? this.jqXHR.abort() : (this.errorThrown = "abort", i._trigger("fail", null, this), i._getXHRPromise(!1))
                }, n.state = function () {
                    return this.jqXHR ? i._getDeferredState(this.jqXHR) : this._processQueue ? i._getDeferredState(this._processQueue) : void 0
                }, n.processing = function () {
                    return !this.jqXHR && this._processQueue && "pending" === i._getDeferredState(this._processQueue)
                }, n.progress = function () {
                    return this._progress
                }, n.response = function () {
                    return this._response
                }
            },
            _getUploadedBytes: function (e) {
                var t = e.getResponseHeader("Range"),
                    n = t && t.split("-"),
                    i = n && n.length > 1 && parseInt(n[1], 10);
                return i && i + 1
            },
            _chunkedUpload: function (t, n) {
                t.uploadedBytes = t.uploadedBytes || 0;
                var i, r, a = this,
                    o = t.files[0],
                    s = o.size,
                    l = t.uploadedBytes,
                    c = t.maxChunkSize || s,
                    u = this._blobSlice,
                    d = e.Deferred(),
                    h = d.promise();
                return this._isXHRUpload(t) && u && (l || s > c) && !t.data ? n ? !0 : l >= s ? (o.error = t.i18n("uploadedBytes"), this._getXHRPromise(!1, t.context, [null, "error", o.error])) : (r = function () {
                    var n = e.extend({}, t),
                        h = n._progress.loaded;
                    n.blob = u.call(o, l, l + c, o.type), n.chunkSize = n.blob.size, n.contentRange = "bytes " + l + "-" + (l + n.chunkSize - 1) + "/" + s, a._initXHRData(n), a._initProgressListener(n), i = (a._trigger("chunksend", null, n) !== !1 && e.ajax(n) || a._getXHRPromise(!1, n.context)).done(function (i, o, c) {
                        l = a._getUploadedBytes(c) || l + n.chunkSize, h + n.chunkSize - n._progress.loaded && a._onProgress(e.Event("progress", {
                            lengthComputable: !0,
                            loaded: l - n.uploadedBytes,
                            total: l - n.uploadedBytes
                        }), n), t.uploadedBytes = n.uploadedBytes = l, n.result = i, n.textStatus = o, n.jqXHR = c, a._trigger("chunkdone", null, n), a._trigger("chunkalways", null, n), s > l ? r() : d.resolveWith(n.context, [i, o, c])
                    }).fail(function (e, t, i) {
                        n.jqXHR = e, n.textStatus = t, n.errorThrown = i, a._trigger("chunkfail", null, n), a._trigger("chunkalways", null, n), d.rejectWith(n.context, [e, t, i])
                    })
                }, this._enhancePromise(h), h.abort = function () {
                    return i.abort()
                }, r(), h) : !1
            },
            _beforeSend: function (e, t) {
                0 === this._active && (this._trigger("start"), this._bitrateTimer = new this._BitrateTimer, this._progress.loaded = this._progress.total = 0, this._progress.bitrate = 0), this._initResponseObject(t), this._initProgressObject(t), t._progress.loaded = t.loaded = t.uploadedBytes || 0, t._progress.total = t.total = this._getTotal(t.files) || 1, t._progress.bitrate = t.bitrate = 0, this._active += 1, this._progress.loaded += t.loaded, this._progress.total += t.total
            },
            _onDone: function (t, n, i, r) {
                var a = r._progress.total,
                    o = r._response;
                r._progress.loaded < a && this._onProgress(e.Event("progress", {
                    lengthComputable: !0,
                    loaded: a,
                    total: a
                }), r), o.result = r.result = t, o.textStatus = r.textStatus = n, o.jqXHR = r.jqXHR = i, this._trigger("done", null, r)
            },
            _onFail: function (e, t, n, i) {
                var r = i._response;
                i.recalculateProgress && (this._progress.loaded -= i._progress.loaded, this._progress.total -= i._progress.total), r.jqXHR = i.jqXHR = e, r.textStatus = i.textStatus = t, r.errorThrown = i.errorThrown = n, this._trigger("fail", null, i)
            },
            _onAlways: function (e, t, n, i) {
                this._trigger("always", null, i)
            },
            _onSend: function (t, n) {
                n.submit || this._addConvenienceMethods(t, n);
                var i, r, a, o, s = this,
                    l = s._getAJAXSettings(n),
                    c = function () {
                        return s._sending += 1, l._bitrateTimer = new s._BitrateTimer, i = i || ((r || s._trigger("send", e.Event("send", {
                            delegatedEvent: t
                        }), l) === !1) && s._getXHRPromise(!1, l.context, r) || s._chunkedUpload(l) || e.ajax(l)).done(function (e, t, n) {
                            s._onDone(e, t, n, l)
                        }).fail(function (e, t, n) {
                            s._onFail(e, t, n, l)
                        }).always(function (e, t, n) {
                            if (s._onAlways(e, t, n, l), s._sending -= 1, s._active -= 1, l.limitConcurrentUploads && l.limitConcurrentUploads > s._sending)
                                for (var i = s._slots.shift(); i;) {
                                    if ("pending" === s._getDeferredState(i)) {
                                        i.resolve();
                                        break
                                    }
                                    i = s._slots.shift()
                                }
                            0 === s._active && s._trigger("stop")
                        })
                    };
                return this._beforeSend(t, l), this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending ? (this.options.limitConcurrentUploads > 1 ? (a = e.Deferred(), this._slots.push(a), o = a.then(c)) : (this._sequence = this._sequence.then(c, c), o = this._sequence), o.abort = function () {
                    return r = [void 0, "abort", "abort"], i ? i.abort() : (a && a.rejectWith(l.context, r), c())
                }, this._enhancePromise(o)) : c()
            },
            _onAdd: function (t, n) {
                var i, r, a, o, s = this,
                    l = !0,
                    c = e.extend({}, this.options, n),
                    u = n.files,
                    d = u.length,
                    h = c.limitMultiFileUploads,
                    f = c.limitMultiFileUploadSize,
                    p = c.limitMultiFileUploadSizeOverhead,
                    m = 0,
                    g = this._getParamName(c),
                    v = 0;
                if (!d) return !1;
                if (f && void 0 === u[0].size && (f = void 0), (c.singleFileUploads || h || f) && this._isXHRUpload(c))
                    if (c.singleFileUploads || f || !h)
                        if (!c.singleFileUploads && f)
                            for (a = [], i = [], o = 0; d > o; o += 1) m += u[o].size + p, (o + 1 === d || m + u[o + 1].size + p > f || h && o + 1 - v >= h) && (a.push(u.slice(v, o + 1)), r = g.slice(v, o + 1), r.length || (r = g), i.push(r), v = o + 1, m = 0);
                        else i = g;
                    else
                        for (a = [], i = [], o = 0; d > o; o += h) a.push(u.slice(o, o + h)), r = g.slice(o, o + h), r.length || (r = g), i.push(r);
                else a = [u], i = [g];
                return n.originalFiles = u, e.each(a || u, function (r, o) {
                    var c = e.extend({}, n);
                    return c.files = a ? o : [o], c.paramName = i[r], s._initResponseObject(c), s._initProgressObject(c), s._addConvenienceMethods(t, c), l = s._trigger("add", e.Event("add", {
                        delegatedEvent: t
                    }), c)
                }), l
            },
            _replaceFileInput: function (t) {
                var n = t.fileInput,
                    i = n.clone(!0),
                    r = n.is(document.activeElement);
                t.fileInputClone = i, e("<form></form>").append(i)[0].reset(), n.after(i).detach(), r && i.focus(), e.cleanData(n.unbind("remove")), this.options.fileInput = this.options.fileInput.map(function (e, t) {
                    return t === n[0] ? i[0] : t
                }), n[0] === this.element[0] && (this.element = i)
            },
            _handleFileTreeEntry: function (t, n) {
                var i, r = this,
                    a = e.Deferred(),
                    o = [],
                    s = function (e) {
                        e && !e.entry && (e.entry = t), a.resolve([e])
                    },
                    l = function (e) {
                        r._handleFileTreeEntries(e, n + t.name + "/").done(function (e) {
                            a.resolve(e)
                        }).fail(s)
                    },
                    c = function () {
                        i.readEntries(function (e) {
                            e.length ? (o = o.concat(e), c()) : l(o)
                        }, s)
                    };
                return n = n || "", t.isFile ? t._file ? (t._file.relativePath = n, a.resolve(t._file)) : t.file(function (e) {
                    e.relativePath = n, a.resolve(e)
                }, s) : t.isDirectory ? (i = t.createReader(), c()) : a.resolve([]), a.promise()
            },
            _handleFileTreeEntries: function (t, n) {
                var i = this;
                return e.when.apply(e, e.map(t, function (e) {
                    return i._handleFileTreeEntry(e, n)
                })).then(function () {
                    return Array.prototype.concat.apply([], arguments)
                })
            },
            _getDroppedFiles: function (t) {
                t = t || {};
                var n = t.items;
                return n && n.length && (n[0].webkitGetAsEntry || n[0].getAsEntry) ? this._handleFileTreeEntries(e.map(n, function (e) {
                    var t;
                    return e.webkitGetAsEntry ? (t = e.webkitGetAsEntry(), t && (t._file = e.getAsFile()), t) : e.getAsEntry()
                })) : e.Deferred().resolve(e.makeArray(t.files)).promise()
            },
            _getSingleFileInputFiles: function (t) {
                t = e(t);
                var n, i, r = t.prop("webkitEntries") || t.prop("entries");
                if (r && r.length) return this._handleFileTreeEntries(r);
                if (n = e.makeArray(t.prop("files")), n.length) void 0 === n[0].name && n[0].fileName && e.each(n, function (e, t) {
                    t.name = t.fileName, t.size = t.fileSize
                });
                else {
                    if (i = t.prop("value"), !i) return e.Deferred().resolve([]).promise();
                    n = [{
                        name: i.replace(/^.*\\/, "")
                    }]
                }
                return e.Deferred().resolve(n).promise()
            },
            _getFileInputFiles: function (t) {
                return t instanceof e && 1 !== t.length ? e.when.apply(e, e.map(t, this._getSingleFileInputFiles)).then(function () {
                    return Array.prototype.concat.apply([], arguments)
                }) : this._getSingleFileInputFiles(t)
            },
            _onChange: function (t) {
                var n = this,
                    i = {
                        fileInput: e(t.target),
                        form: e(t.target.form)
                    };
                this._getFileInputFiles(i.fileInput).always(function (r) {
                    i.files = r, n.options.replaceFileInput && n._replaceFileInput(i), n._trigger("change", e.Event("change", {
                        delegatedEvent: t
                    }), i) !== !1 && n._onAdd(t, i)
                })
            },
            _onPaste: function (t) {
                var n = t.originalEvent && t.originalEvent.clipboardData && t.originalEvent.clipboardData.items,
                    i = {
                        files: []
                    };
                n && n.length && (e.each(n, function (e, t) {
                    var n = t.getAsFile && t.getAsFile();
                    n && i.files.push(n)
                }), this._trigger("paste", e.Event("paste", {
                    delegatedEvent: t
                }), i) !== !1 && this._onAdd(t, i))
            },
            _onDrop: function (t) {
                t.dataTransfer = t.originalEvent && t.originalEvent.dataTransfer;
                var n = this,
                    i = t.dataTransfer,
                    r = {};
                i && i.files && i.files.length && (t.preventDefault(), this._getDroppedFiles(i).always(function (i) {
                    r.files = i, n._trigger("drop", e.Event("drop", {
                        delegatedEvent: t
                    }), r) !== !1 && n._onAdd(t, r)
                }))
            },
            _onDragOver: t("dragover"),
            _onDragEnter: t("dragenter"),
            _onDragLeave: t("dragleave"),
            _initEventHandlers: function () {
                this._isXHRUpload(this.options) && (this._on(this.options.dropZone, {
                    dragover: this._onDragOver,
                    drop: this._onDrop,
                    dragenter: this._onDragEnter,
                    dragleave: this._onDragLeave
                }), this._on(this.options.pasteZone, {
                    paste: this._onPaste
                })), e.support.fileInput && this._on(this.options.fileInput, {
                    change: this._onChange
                })
            },
            _destroyEventHandlers: function () {
                this._off(this.options.dropZone, "dragenter dragleave dragover drop"), this._off(this.options.pasteZone, "paste"), this._off(this.options.fileInput, "change")
            },
            _destroy: function () {
                this._destroyEventHandlers()
            },
            _setOption: function (t, n) {
                var i = -1 !== e.inArray(t, this._specialOptions);
                i && this._destroyEventHandlers(), this._super(t, n), i && (this._initSpecialOptions(), this._initEventHandlers())
            },
            _initSpecialOptions: function () {
                var t = this.options;
                void 0 === t.fileInput ? t.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]') : t.fileInput instanceof e || (t.fileInput = e(t.fileInput)), t.dropZone instanceof e || (t.dropZone = e(t.dropZone)), t.pasteZone instanceof e || (t.pasteZone = e(t.pasteZone))
            },
            _getRegExp: function (e) {
                var t = e.split("/"),
                    n = t.pop();
                return t.shift(), new RegExp(t.join("/"), n)
            },
            _isRegExpOption: function (t, n) {
                return "url" !== t && "string" === e.type(n) && /^\/.*\/[igm]{0,3}$/.test(n)
            },
            _initDataAttributes: function () {
                var t = this,
                    n = this.options,
                    i = this.element.data();
                e.each(this.element[0].attributes, function (e, r) {
                    var a, o = r.name.toLowerCase();
                    /^data-/.test(o) && (o = o.slice(5).replace(/-[a-z]/g, function (e) {
                        return e.charAt(1).toUpperCase()
                    }), a = i[o], t._isRegExpOption(o, a) && (a = t._getRegExp(a)), n[o] = a)
                })
            },
            _create: function () {
                this._initDataAttributes(), this._initSpecialOptions(), this._slots = [], this._sequence = this._getXHRPromise(!0), this._sending = this._active = 0, this._initProgressObject(this), this._initEventHandlers()
            },
            active: function () {
                return this._active
            },
            progress: function () {
                return this._progress
            },
            add: function (t) {
                var n = this;
                t && !this.options.disabled && (t.fileInput && !t.files ? this._getFileInputFiles(t.fileInput).always(function (e) {
                    t.files = e, n._onAdd(null, t)
                }) : (t.files = e.makeArray(t.files), this._onAdd(null, t)))
            },
            send: function (t) {
                if (t && !this.options.disabled) {
                    if (t.fileInput && !t.files) {
                        var n, i, r = this,
                            a = e.Deferred(),
                            o = a.promise();
                        return o.abort = function () {
                            return i = !0, n ? n.abort() : (a.reject(null, "abort", "abort"), o)
                        }, this._getFileInputFiles(t.fileInput).always(function (e) {
                            if (!i) {
                                if (!e.length) return void a.reject();
                                t.files = e, n = r._onSend(null, t), n.then(function (e, t, n) {
                                    a.resolve(e, t, n)
                                }, function (e, t, n) {
                                    a.reject(e, t, n)
                                })
                            }
                        }), this._enhancePromise(o)
                    }
                    if (t.files = e.makeArray(t.files), t.files.length) return this._onSend(null, t)
                }
                return this._getXHRPromise(!1, t && t.context)
            }
        })
    }), Array.prototype.flat || (Array.prototype.flat = function () {
        var e = arguments[0];
        return e = void 0 === e ? 1 : Math.floor(e), 1 > e ? Array.prototype.slice.call(this) : function t(e, n) {
            for (var i = e.length >>> 0, r = [], a = 0; i > a;) {
                if (a in e) {
                    var o = e[a];
                    Array.isArray(o) && n > 0 ? r = r.concat(t(o, n - 1)) : r.push(o)
                }
                a++
            }
            return r
        }(this, e)
    }), Element.prototype.closest || (Element.prototype.matches || (Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector), Element.prototype.closest = function (e) {
        var t = this,
            n = this;
        if (!document.documentElement.contains(t)) return null;
        do {
            if (n.matches(e)) return n;
            n = n.parentElement
        } while (null !== n);
        return null
    }),
    function (e) {
        e.forEach(function (e) {
            e.hasOwnProperty("remove") || Object.defineProperty(e, "remove", {
                configurable: !0,
                enumerable: !0,
                writable: !0,
                value: function () {
                    null !== this.parentNode && this.parentNode.removeChild(this)
                }
            })
        })
    }([Element.prototype, CharacterData.prototype, DocumentType.prototype]), String.prototype.startsWith || Object.defineProperty(String.prototype, "startsWith", {
        value: function (e, t) {
            var n = t > 0 ? 0 | t : 0;
            return this.substring(n, n + e.length) === e
        },
        writable: !0,
        configurable: !0
    }), Models = {
        UserOrganization: {
            Roles: {
                owner: "1",
                manager: "2",
                user: "0",
                unassigned: "3"
            },
            RoleDetails: {
                owner: {
                    label: "Owner",
                    description: "Can do everything"
                },
                manager: {
                    label: "Manager",
                    description: "Can do everything, except view and manage financials"
                },
                user: {
                    label: "User",
                    description: "Project roles determine what they can do"
                },
                unassigned: {
                    label: "No role",
                    description: "User currently has no role assigned"
                }
            },
            SingleRoles: {
                organization_owner: "1-2",
                organization_manager: "2-2",
                project_manager: "0-2",
                project_user: "0-0",
                project_viewer: "0-3",
                by_project: "0--1",
                unassigned: "3--1"
            },
            SingleRoleDetails: {
                organization_owner: {
                    label: "Organization owner",
                    description: "Can do everything"
                },
                organization_manager: {
                    label: "Organization manager",
                    description: "Can do everything, except view and manage financials"
                },
                project_manager: {
                    label: "Project manager",
                    description: "Can manage, track, and view reports for any projects they\u2019re added to"
                },
                project_user: {
                    label: "User",
                    description: "Can track and view their time for any project/work order they\u2019re added to"
                },
                project_viewer: {
                    label: "Project viewer",
                    description: "Can view reports for any project they\u2019re added to (viewers are free)"
                },
                by_project: {
                    label: "Multiple project roles",
                    description: "Can be a manager on some projects and a user on others"
                },
                unassigned: {
                    label: "No role",
                    description: "The user has no role assigned yet, and is not charged"
                }
            }
        },
        UserProject: {
            Roles: {
                manager: "2",
                user: "0",
                viewer: "3"
            },
            RoleDetails: {
                manager: {
                    label: "Manager",
                    description: " Can manage, track, and view reports"
                },
                user: {
                    label: "User",
                    description: " Can track and view their time"
                },
                viewer: {
                    label: "Viewer",
                    description: " Can view reports"
                }
            }
        },
        RolePickers: {}
    }, Models.RolePickers[Models.UserOrganization.SingleRoles.organization_owner] = {
        project_label: "Projects",
        project_description: "Track time to these projects",
        project_role: "manager",
        project_clear: !0
    }, Models.RolePickers[Models.UserOrganization.SingleRoles.organization_manager] = {
        project_label: "Projects",
        project_description: "Track time to these projects",
        project_role: "manager",
        project_clear: !0
    }, Models.RolePickers[Models.UserOrganization.SingleRoles.project_manager] = {
        project_label: "Projects",
        project_description: "Manage these projects",
        project_role: "manager",
        project_clear: !0
    }, Models.RolePickers[Models.UserOrganization.SingleRoles.project_user] = {
        project_label: "Projects",
        project_description: "Track time to these projects",
        project_role: "user",
        project_clear: !0
    }, Models.RolePickers[Models.UserOrganization.SingleRoles.project_viewer] = {
        project_label: "Projects",
        project_description: "View these projects",
        project_role: "viewer",
        project_clear: !0
    }, Models.RolePickers[Models.UserProject.Roles.manager] = {
        project_label: Models.UserProject.RoleDetails.manager.label,
        project_description: "Manage these projects",
        project_role: "manager"
    }, Models.RolePickers[Models.UserProject.Roles.user] = {
        project_label: Models.UserProject.RoleDetails.user.label,
        project_description: "Track time to these projects",
        project_role: "user"
    }, Models.RolePickers[Models.UserProject.Roles.viewer] = {
        project_label: Models.UserProject.RoleDetails.viewer.label,
        project_description: "View these projects",
        project_role: "viewer"
    };
const ERRORS = {
    members: {
        blank: "You must select at least one member"
    }
};
! function (e) {
    var t, n, i = "0.3.4",
        r = "hasOwnProperty",
        a = /[\.\/]/,
        o = "*",
        s = function () { },
        l = function (e, t) {
            return e - t
        },
        c = {
            n: {}
        },
        u = function (e, i) {
            var r, a = n,
                o = Array.prototype.slice.call(arguments, 2),
                s = u.listeners(e),
                c = 0,
                d = [],
                h = {},
                f = [],
                p = t;
            t = e, n = 0;
            for (var m = 0, g = s.length; g > m; m++) "zIndex" in s[m] && (d.push(s[m].zIndex), s[m].zIndex < 0 && (h[s[m].zIndex] = s[m]));
            for (d.sort(l); d[c] < 0;)
                if (r = h[d[c++]], f.push(r.apply(i, o)), n) return n = a, f;
            for (m = 0; g > m; m++)
                if (r = s[m], "zIndex" in r)
                    if (r.zIndex == d[c]) {
                        if (f.push(r.apply(i, o)), n) break;
                        do
                            if (c++, r = h[d[c]], r && f.push(r.apply(i, o)), n) break; while (r)
                    } else h[r.zIndex] = r;
                else if (f.push(r.apply(i, o)), n) break;
            return n = a, t = p, f.length ? f : null
        };
    u.listeners = function (e) {
        var t, n, i, r, s, l, u, d, h = e.split(a),
            f = c,
            p = [f],
            m = [];
        for (r = 0, s = h.length; s > r; r++) {
            for (d = [], l = 0, u = p.length; u > l; l++)
                for (f = p[l].n, n = [f[h[r]], f[o]], i = 2; i--;) t = n[i], t && (d.push(t), m = m.concat(t.f || []));
            p = d
        }
        return m
    }, u.on = function (e, t) {
        for (var n = e.split(a), i = c, r = 0, o = n.length; o > r; r++) i = i.n, !i[n[r]] && (i[n[r]] = {
            n: {}
        }), i = i[n[r]];
        for (i.f = i.f || [], r = 0, o = i.f.length; o > r; r++)
            if (i.f[r] == t) return s;
        return i.f.push(t),
            function (e) {
                +e == +e && (t.zIndex = +e)
            }
    }, u.stop = function () {
        n = 1
    }, u.nt = function (e) {
        return e ? new RegExp("(?:\\.|\\/|^)" + e + "(?:\\.|\\/|$)").test(t) : t
    }, u.off = u.unbind = function (e, t) {
        var n, i, s, l, u, d, h, f = e.split(a),
            p = [c];
        for (l = 0, u = f.length; u > l; l++)
            for (d = 0; d < p.length; d += s.length - 2) {
                if (s = [d, 1], n = p[d].n, f[l] != o) n[f[l]] && s.push(n[f[l]]);
                else
                    for (i in n) n[r](i) && s.push(n[i]);
                p.splice.apply(p, s)
            }
        for (l = 0, u = p.length; u > l; l++)
            for (n = p[l]; n.n;) {
                if (t) {
                    if (n.f) {
                        for (d = 0, h = n.f.length; h > d; d++)
                            if (n.f[d] == t) {
                                n.f.splice(d, 1);
                                break
                            } !n.f.length && delete n.f
                    }
                    for (i in n.n)
                        if (n.n[r](i) && n.n[i].f) {
                            var m = n.n[i].f;
                            for (d = 0, h = m.length; h > d; d++)
                                if (m[d] == t) {
                                    m.splice(d, 1);
                                    break
                                } !m.length && delete n.n[i].f
                        }
                } else {
                    delete n.f;
                    for (i in n.n) n.n[r](i) && n.n[i].f && delete n.n[i].f
                }
                n = n.n
            }
    }, u.once = function (e, t) {
        var n = function () {
            var i = t.apply(this, arguments);
            return u.unbind(e, n), i
        };
        return u.on(e, n)
    }, u.version = i, u.toString = function () {
        return "You are running Eve " + i
    }, "undefined" != typeof module && module.exports ? module.exports = u : "undefined" != typeof define ? define("eve", [], function () {
        return u
    }) : e.eve = u
}(this),
    function () {
        function e(t) {
            if (e.is(t, "function")) return y ? t() : eve.on("raphael.DOMload", t);
            if (e.is(t, q)) return e._engine.create[T](e, t.splice(0, 3 + e.is(t[0], W))).add(t);
            var n = Array.prototype.slice.call(arguments, 0);
            if (e.is(n[n.length - 1], "function")) {
                var i = n.pop();
                return y ? i.call(e._engine.create[T](e, n)) : eve.on("raphael.DOMload", function () {
                    i.call(e._engine.create[T](e, n))
                })
            }
            return e._engine.create[T](e, arguments)
        }

        function t(e) {
            if (Object(e) !== e) return e;
            var n = new e.constructor;
            for (var i in e) e[k](i) && (n[i] = t(e[i]));
            return n
        }

        function n(e, t) {
            for (var n = 0, i = e.length; i > n; n++)
                if (e[n] === t) return e.push(e.splice(n, 1)[0])
        }

        function i(e, t, i) {
            function r() {
                var a = Array.prototype.slice.call(arguments, 0),
                    o = a.join("\u2400"),
                    s = r.cache = r.cache || {},
                    l = r.count = r.count || [];
                return s[k](o) ? (n(l, o), i ? i(s[o]) : s[o]) : (l.length >= 1e3 && delete s[l.shift()], l.push(o), s[o] = e[T](t, a), i ? i(s[o]) : s[o])
            }
            return r
        }

        function r() {
            return this.hex
        }

        function a(e, t) {
            for (var n = [], i = 0, r = e.length; r - 2 * !t > i; i += 2) {
                var a = [{
                    x: +e[i - 2],
                    y: +e[i - 1]
                }, {
                    x: +e[i],
                    y: +e[i + 1]
                }, {
                    x: +e[i + 2],
                    y: +e[i + 3]
                }, {
                    x: +e[i + 4],
                    y: +e[i + 5]
                }];
                t ? i ? r - 4 == i ? a[3] = {
                    x: +e[0],
                    y: +e[1]
                } : r - 2 == i && (a[2] = {
                    x: +e[0],
                    y: +e[1]
                }, a[3] = {
                    x: +e[2],
                    y: +e[3]
                }) : a[0] = {
                    x: +e[r - 2],
                    y: +e[r - 1]
                } : r - 4 == i ? a[3] = a[2] : i || (a[0] = {
                    x: +e[i],
                    y: +e[i + 1]
                }), n.push(["C", (-a[0].x + 6 * a[1].x + a[2].x) / 6, (-a[0].y + 6 * a[1].y + a[2].y) / 6, (a[1].x + 6 * a[2].x - a[3].x) / 6, (a[1].y + 6 * a[2].y - a[3].y) / 6, a[2].x, a[2].y])
            }
            return n
        }

        function o(e, t, n, i, r) {
            var a = -3 * t + 9 * n - 9 * i + 3 * r,
                o = e * a + 6 * t - 12 * n + 6 * i;
            return e * o - 3 * t + 3 * n
        }

        function s(e, t, n, i, r, a, s, l, c) {
            null == c && (c = 1), c = c > 1 ? 1 : 0 > c ? 0 : c;
            for (var u = c / 2, d = 12, h = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], f = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], p = 0, m = 0; d > m; m++) {
                var g = u * h[m] + u,
                    v = o(g, e, n, r, s),
                    y = o(g, t, i, a, l),
                    b = v * v + y * y;
                p += f[m] * j.sqrt(b)
            }
            return u * p
        }

        function l(e, t, n, i, r, a, o, l, c) {
            if (!(0 > c || s(e, t, n, i, r, a, o, l) < c)) {
                var u, d = 1,
                    h = d / 2,
                    f = d - h,
                    p = .01;
                for (u = s(e, t, n, i, r, a, o, l, f); L(u - c) > p;) h /= 2, f += (c > u ? 1 : -1) * h, u = s(e, t, n, i, r, a, o, l, f);
                return f
            }
        }

        function c(e, t, n, i, r, a, o, s) {
            if (!(N(e, n) < z(r, o) || z(e, n) > N(r, o) || N(t, i) < z(a, s) || z(t, i) > N(a, s))) {
                var l = (e * i - t * n) * (r - o) - (e - n) * (r * s - a * o),
                    c = (e * i - t * n) * (a - s) - (t - i) * (r * s - a * o),
                    u = (e - n) * (a - s) - (t - i) * (r - o);
                if (u) {
                    var d = l / u,
                        h = c / u,
                        f = +d.toFixed(2),
                        p = +h.toFixed(2);
                    if (!(f < +z(e, n).toFixed(2) || f > +N(e, n).toFixed(2) || f < +z(r, o).toFixed(2) || f > +N(r, o).toFixed(2) || p < +z(t, i).toFixed(2) || p > +N(t, i).toFixed(2) || p < +z(a, s).toFixed(2) || p > +N(a, s).toFixed(2))) return {
                        x: d,
                        y: h
                    }
                }
            }
        }

        function u(t, n, i) {
            var r = e.bezierBBox(t),
                a = e.bezierBBox(n);
            if (!e.isBBoxIntersect(r, a)) return i ? 0 : [];
            for (var o = s.apply(0, t), l = s.apply(0, n), u = ~~(o / 5), d = ~~(l / 5), h = [], f = [], p = {}, m = i ? 0 : [], g = 0; u + 1 > g; g++) {
                var v = e.findDotsAtSegment.apply(e, t.concat(g / u));
                h.push({
                    x: v.x,
                    y: v.y,
                    t: g / u
                })
            }
            for (g = 0; d + 1 > g; g++) v = e.findDotsAtSegment.apply(e, n.concat(g / d)), f.push({
                x: v.x,
                y: v.y,
                t: g / d
            });
            for (g = 0; u > g; g++)
                for (var y = 0; d > y; y++) {
                    var b = h[g],
                        w = h[g + 1],
                        _ = f[y],
                        x = f[y + 1],
                        k = L(w.x - b.x) < .001 ? "y" : "x",
                        C = L(x.x - _.x) < .001 ? "y" : "x",
                        S = c(b.x, b.y, w.x, w.y, _.x, _.y, x.x, x.y);
                    if (S) {
                        if (p[S.x.toFixed(4)] == S.y.toFixed(4)) continue;
                        p[S.x.toFixed(4)] = S.y.toFixed(4);
                        var A = b.t + L((S[k] - b[k]) / (w[k] - b[k])) * (w.t - b.t),
                            T = _.t + L((S[C] - _[C]) / (x[C] - _[C])) * (x.t - _.t);
                        A >= 0 && 1 >= A && T >= 0 && 1 >= T && (i ? m++ : m.push({
                            x: S.x,
                            y: S.y,
                            t1: A,
                            t2: T
                        }))
                    }
                }
            return m
        }

        function d(t, n, i) {
            t = e._path2curve(t), n = e._path2curve(n);
            for (var r, a, o, s, l, c, d, h, f, p, m = i ? 0 : [], g = 0, v = t.length; v > g; g++) {
                var y = t[g];
                if ("M" == y[0]) r = l = y[1], a = c = y[2];
                else {
                    "C" == y[0] ? (f = [r, a].concat(y.slice(1)), r = f[6], a = f[7]) : (f = [r, a, r, a, l, c, l, c], r = l, a = c);
                    for (var b = 0, w = n.length; w > b; b++) {
                        var _ = n[b];
                        if ("M" == _[0]) o = d = _[1], s = h = _[2];
                        else {
                            "C" == _[0] ? (p = [o, s].concat(_.slice(1)), o = p[6], s = p[7]) : (p = [o, s, o, s, d, h, d, h], o = d, s = h);
                            var x = u(f, p, i);
                            if (i) m += x;
                            else {
                                for (var k = 0, C = x.length; C > k; k++) x[k].segment1 = g, x[k].segment2 = b, x[k].bez1 = f, x[k].bez2 = p;
                                m = m.concat(x)
                            }
                        }
                    }
                }
            }
            return m
        }

        function h(e, t, n, i, r, a) {
            null != e ? (this.a = +e, this.b = +t, this.c = +n, this.d = +i, this.e = +r, this.f = +a) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0)
        }

        function f() {
            return this.x + M + this.y + M + this.width + " \xd7 " + this.height
        }

        function p(e, t, n, i, r, a) {
            function o(e) {
                return ((d * e + u) * e + c) * e
            }

            function s(e, t) {
                var n = l(e, t);
                return ((p * n + f) * n + h) * n
            }

            function l(e, t) {
                var n, i, r, a, s, l;
                for (r = e, l = 0; 8 > l; l++) {
                    if (a = o(r) - e, L(a) < t) return r;
                    if (s = (3 * d * r + 2 * u) * r + c, L(s) < 1e-6) break;
                    r -= a / s
                }
                if (n = 0, i = 1, r = e, n > r) return n;
                if (r > i) return i;
                for (; i > n;) {
                    if (a = o(r), L(a - e) < t) return r;
                    e > a ? n = r : i = r, r = (i - n) / 2 + n
                }
                return r
            }
            var c = 3 * t,
                u = 3 * (i - t) - c,
                d = 1 - c - u,
                h = 3 * n,
                f = 3 * (r - n) - h,
                p = 1 - h - f;
            return s(e, 1 / (200 * a))
        }

        function m(e, t) {
            var n = [],
                i = {};
            if (this.ms = t, this.times = 1, e) {
                for (var r in e) e[k](r) && (i[Z(r)] = e[r], n.push(Z(r)));
                n.sort(ce)
            }
            this.anim = i, this.top = n[n.length - 1], this.percents = n
        }

        function g(t, n, i, r, a, o) {
            i = Z(i);
            var s, l, c, u, d, f, m = t.ms,
                g = {},
                v = {},
                y = {};
            if (r)
                for (_ = 0, x = at.length; x > _; _++) {
                    var b = at[_];
                    if (b.el.id == n.id && b.anim == t) {
                        b.percent != i ? (at.splice(_, 1), c = 1) : l = b, n.attr(b.totalOrigin);
                        break
                    }
                } else r = +v;
            for (var _ = 0, x = t.percents.length; x > _; _++) {
                if (t.percents[_] == i || t.percents[_] > r * t.top) {
                    i = t.percents[_], d = t.percents[_ - 1] || 0, m = m / t.top * (i - d), u = t.percents[_ + 1], s = t.anim[i];
                    break
                }
                r && n.attr(t.anim[t.percents[_]])
            }
            if (s) {
                if (l) l.initstatus = r, l.start = new Date - l.ms * r;
                else {
                    for (var C in s)
                        if (s[k](C) && (te[k](C) || n.paper.customAttributes[k](C))) switch (g[C] = n.attr(C), null == g[C] && (g[C] = ee[C]), v[C] = s[C], te[C]) {
                            case W:
                                y[C] = (v[C] - g[C]) / m;
                                break;
                            case "colour":
                                g[C] = e.getRGB(g[C]);
                                var S = e.getRGB(v[C]);
                                y[C] = {
                                    r: (S.r - g[C].r) / m,
                                    g: (S.g - g[C].g) / m,
                                    b: (S.b - g[C].b) / m
                                };
                                break;
                            case "path":
                                var A = Pe(g[C], v[C]),
                                    T = A[1];
                                for (g[C] = A[0], y[C] = [],
                                    _ = 0, x = g[C].length; x > _; _++) {
                                    y[C][_] = [0];
                                    for (var D = 1, $ = g[C][_].length; $ > D; D++) y[C][_][D] = (T[_][D] - g[C][_][D]) / m
                                }
                                break;
                            case "transform":
                                var M = n._,
                                    P = ze(M[C], v[C]);
                                if (P)
                                    for (g[C] = P.from, v[C] = P.to, y[C] = [], y[C].real = !0, _ = 0, x = g[C].length; x > _; _++)
                                        for (y[C][_] = [g[C][_][0]], D = 1, $ = g[C][_].length; $ > D; D++) y[C][_][D] = (v[C][_][D] - g[C][_][D]) / m;
                                else {
                                    var H = n.matrix || new h,
                                        O = {
                                            _: {
                                                transform: M.transform
                                            },
                                            getBBox: function () {
                                                return n.getBBox(1)
                                            }
                                        };
                                    g[C] = [H.a, H.b, H.c, H.d, H.e, H.f], je(O, v[C]), v[C] = O._.transform, y[C] = [(O.matrix.a - H.a) / m, (O.matrix.b - H.b) / m, (O.matrix.c - H.c) / m, (O.matrix.d - H.d) / m, (O.matrix.e - H.e) / m, (O.matrix.f - H.f) / m]
                                }
                                break;
                            case "csv":
                                var j = R(s[C])[I](w),
                                    N = R(g[C])[I](w);
                                if ("clip-rect" == C)
                                    for (g[C] = N, y[C] = [], _ = N.length; _--;) y[C][_] = (j[_] - g[C][_]) / m;
                                v[C] = j;
                                break;
                            default:
                                for (j = [][E](s[C]), N = [][E](g[C]), y[C] = [], _ = n.paper.customAttributes[C].length; _--;) y[C][_] = ((j[_] || 0) - (N[_] || 0)) / m
                        }
                    var z = s.easing,
                        L = e.easing_formulas[z];
                    if (!L)
                        if (L = R(z).match(X), L && 5 == L.length) {
                            var F = L;
                            L = function (e) {
                                return p(e, +F[1], +F[2], +F[3], +F[4], m)
                            }
                        } else L = de;
                    if (f = s.start || t.start || +new Date, b = {
                        anim: t,
                        percent: i,
                        timestamp: f,
                        start: f + (t.del || 0),
                        status: 0,
                        initstatus: r || 0,
                        stop: !1,
                        ms: m,
                        easing: L,
                        from: g,
                        diff: y,
                        to: v,
                        el: n,
                        callback: s.callback,
                        prev: d,
                        next: u,
                        repeat: o || t.times,
                        origin: n.attr(),
                        totalOrigin: a
                    }, at.push(b), r && !l && !c && (b.stop = !0, b.start = new Date - m * r, 1 == at.length)) return st();
                    c && (b.start = new Date - b.ms * r), 1 == at.length && ot(st)
                }
                eve("raphael.anim.start." + n.id, n, t)
            }
        }

        function v(e) {
            for (var t = 0; t < at.length; t++) at[t].el.paper == e && at.splice(t--, 1)
        }
        e.version = "2.1.0", e.eve = eve;
        var y, b, w = /[, ]+/,
            _ = {
                circle: 1,
                rect: 1,
                path: 1,
                ellipse: 1,
                text: 1,
                image: 1
            },
            x = /\{(\d+)\}/g,
            k = "hasOwnProperty",
            C = {
                doc: document,
                win: window
            },
            S = {
                was: Object.prototype[k].call(C.win, "Raphael"),
                is: C.win.Raphael
            },
            A = function () {
                this.ca = this.customAttributes = {}
            },
            T = "apply",
            E = "concat",
            D = "createTouch" in C.doc,
            $ = "",
            M = " ",
            R = String,
            I = "split",
            P = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[I](M),
            H = {
                mousedown: "touchstart",
                mousemove: "touchmove",
                mouseup: "touchend"
            },
            O = R.prototype.toLowerCase,
            j = Math,
            N = j.max,
            z = j.min,
            L = j.abs,
            F = j.pow,
            B = j.PI,
            W = "number",
            U = "string",
            q = "array",
            G = Object.prototype.toString,
            Y = (e._ISURL = /^url\(['"]?([^\)]+?)['"]?\)$/i, /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),
            V = {
                NaN: 1,
                Infinity: 1,
                "-Infinity": 1
            },
            X = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,
            K = j.round,
            Z = parseFloat,
            Q = parseInt,
            J = R.prototype.toUpperCase,
            ee = e._availableAttrs = {
                "arrow-end": "none",
                "arrow-start": "none",
                blur: 0,
                "clip-rect": "0 0 1e9 1e9",
                cursor: "default",
                cx: 0,
                cy: 0,
                fill: "#fff",
                "fill-opacity": 1,
                font: '10px "Arial"',
                "font-family": '"Arial"',
                "font-size": "10",
                "font-style": "normal",
                "font-weight": 400,
                gradient: 0,
                height: 0,
                href: "http://raphaeljs.com/",
                "letter-spacing": 0,
                opacity: 1,
                path: "M0,0",
                r: 0,
                rx: 0,
                ry: 0,
                src: "",
                stroke: "#000",
                "stroke-dasharray": "",
                "stroke-linecap": "butt",
                "stroke-linejoin": "butt",
                "stroke-miterlimit": 0,
                "stroke-opacity": 1,
                "stroke-width": 1,
                target: "_blank",
                "text-anchor": "middle",
                title: "Raphael",
                transform: "",
                width: 0,
                x: 0,
                y: 0
            },
            te = e._availableAnimAttrs = {
                blur: W,
                "clip-rect": "csv",
                cx: W,
                cy: W,
                fill: "colour",
                "fill-opacity": W,
                "font-size": W,
                height: W,
                opacity: W,
                path: "path",
                r: W,
                rx: W,
                ry: W,
                stroke: "colour",
                "stroke-opacity": W,
                "stroke-width": W,
                transform: "transform",
                width: W,
                x: W,
                y: W
            },
            ne = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
            ie = {
                hs: 1,
                rg: 1
            },
            re = /,?([achlmqrstvxz]),?/gi,
            ae = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
            oe = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,
            se = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,
            le = (e._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, {}),
            ce = function (e, t) {
                return Z(e) - Z(t)
            },
            ue = function () { },
            de = function (e) {
                return e
            },
            he = e._rectPath = function (e, t, n, i, r) {
                return r ? [
                    ["M", e + r, t],
                    ["l", n - 2 * r, 0],
                    ["a", r, r, 0, 0, 1, r, r],
                    ["l", 0, i - 2 * r],
                    ["a", r, r, 0, 0, 1, -r, r],
                    ["l", 2 * r - n, 0],
                    ["a", r, r, 0, 0, 1, -r, -r],
                    ["l", 0, 2 * r - i],
                    ["a", r, r, 0, 0, 1, r, -r],
                    ["z"]
                ] : [
                    ["M", e, t],
                    ["l", n, 0],
                    ["l", 0, i],
                    ["l", -n, 0],
                    ["z"]
                ]
            },
            fe = function (e, t, n, i) {
                return null == i && (i = n), [
                    ["M", e, t],
                    ["m", 0, -i],
                    ["a", n, i, 0, 1, 1, 0, 2 * i],
                    ["a", n, i, 0, 1, 1, 0, -2 * i],
                    ["z"]
                ]
            },
            pe = e._getPath = {
                path: function (e) {
                    return e.attr("path")
                },
                circle: function (e) {
                    var t = e.attrs;
                    return fe(t.cx, t.cy, t.r)
                },
                ellipse: function (e) {
                    var t = e.attrs;
                    return fe(t.cx, t.cy, t.rx, t.ry)
                },
                rect: function (e) {
                    var t = e.attrs;
                    return he(t.x, t.y, t.width, t.height, t.r)
                },
                image: function (e) {
                    var t = e.attrs;
                    return he(t.x, t.y, t.width, t.height)
                },
                text: function (e) {
                    var t = e._getBBox();
                    return he(t.x, t.y, t.width, t.height)
                }
            },
            me = e.mapPath = function (e, t) {
                if (!t) return e;
                var n, i, r, a, o, s, l;
                for (e = Pe(e), r = 0, o = e.length; o > r; r++)
                    for (l = e[r], a = 1, s = l.length; s > a; a += 2) n = t.x(l[a], l[a + 1]), i = t.y(l[a], l[a + 1]), l[a] = n, l[a + 1] = i;
                return e
            };
        if (e._g = C, e.type = C.win.SVGAngle || C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == e.type) {
            var ge, ve = C.doc.createElement("div");
            if (ve.innerHTML = '<v:shape adj="1"/>', ge = ve.firstChild, ge.style.behavior = "url(#default#VML)", !ge || "object" != typeof ge.adj) return e.type = $;
            ve = null
        }
        e.svg = !(e.vml = "VML" == e.type), e._Paper = A, e.fn = b = A.prototype = e.prototype, e._id = 0, e._oid = 0, e.is = function (e, t) {
            return t = O.call(t), "finite" == t ? !V[k](+e) : "array" == t ? e instanceof Array : "null" == t && null === e || t == typeof e && null !== e || "object" == t && e === Object(e) || "array" == t && Array.isArray && Array.isArray(e) || G.call(e).slice(8, -1).toLowerCase() == t
        }, e.angle = function (t, n, i, r, a, o) {
            if (null == a) {
                var s = t - i,
                    l = n - r;
                return s || l ? (180 + 180 * j.atan2(-l, -s) / B + 360) % 360 : 0
            }
            return e.angle(t, n, a, o) - e.angle(i, r, a, o)
        }, e.rad = function (e) {
            return e % 360 * B / 180
        }, e.deg = function (e) {
            return 180 * e / B % 360
        }, e.snapTo = function (t, n, i) {
            if (i = e.is(i, "finite") ? i : 10, e.is(t, q)) {
                for (var r = t.length; r--;)
                    if (L(t[r] - n) <= i) return t[r]
            } else {
                t = +t;
                var a = n % t;
                if (i > a) return n - a;
                if (a > t - i) return n - a + t
            }
            return n
        };
        e.createUUID = function (e, t) {
            return function () {
                return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e, t).toUpperCase()
            }
        }(/[xy]/g, function (e) {
            var t = 16 * j.random() | 0,
                n = "x" == e ? t : 3 & t | 8;
            return n.toString(16)
        });
        e.setWindow = function (t) {
            eve("raphael.setWindow", e, C.win, t), C.win = t, C.doc = C.win.document, e._engine.initWin && e._engine.initWin(C.win)
        };
        var ye = function (t) {
            if (e.vml) {
                var n, r = /^\s+|\s+$/g;
                try {
                    var a = new ActiveXObject("htmlfile");
                    a.write("<body>"), a.close(), n = a.body
                } catch (o) {
                    n = createPopup().document.body
                }
                var s = n.createTextRange();
                ye = i(function (e) {
                    try {
                        n.style.color = R(e).replace(r, $);
                        var t = s.queryCommandValue("ForeColor");
                        return t = (255 & t) << 16 | 65280 & t | (16711680 & t) >>> 16, "#" + ("000000" + t.toString(16)).slice(-6)
                    } catch (i) {
                        return "none"
                    }
                })
            } else {
                var l = C.doc.createElement("i");
                l.title = "Rapha\xebl Colour Picker", l.style.display = "none", C.doc.body.appendChild(l), ye = i(function (e) {
                    return l.style.color = e, C.doc.defaultView.getComputedStyle(l, $).getPropertyValue("color")
                })
            }
            return ye(t)
        },
            be = function () {
                return "hsb(" + [this.h, this.s, this.b] + ")"
            },
            we = function () {
                return "hsl(" + [this.h, this.s, this.l] + ")"
            },
            _e = function () {
                return this.hex
            },
            xe = function (t, n, i) {
                if (null == n && e.is(t, "object") && "r" in t && "g" in t && "b" in t && (i = t.b, n = t.g, t = t.r), null == n && e.is(t, U)) {
                    var r = e.getRGB(t);
                    t = r.r, n = r.g, i = r.b
                }
                return (t > 1 || n > 1 || i > 1) && (t /= 255, n /= 255, i /= 255), [t, n, i]
            },
            ke = function (t, n, i, r) {
                t *= 255, n *= 255, i *= 255;
                var a = {
                    r: t,
                    g: n,
                    b: i,
                    hex: e.rgb(t, n, i),
                    toString: _e
                };
                return e.is(r, "finite") && (a.opacity = r), a
            };
        e.color = function (t) {
            var n;
            return e.is(t, "object") && "h" in t && "s" in t && "b" in t ? (n = e.hsb2rgb(t), t.r = n.r, t.g = n.g, t.b = n.b, t.hex = n.hex) : e.is(t, "object") && "h" in t && "s" in t && "l" in t ? (n = e.hsl2rgb(t), t.r = n.r, t.g = n.g, t.b = n.b, t.hex = n.hex) : (e.is(t, "string") && (t = e.getRGB(t)), e.is(t, "object") && "r" in t && "g" in t && "b" in t ? (n = e.rgb2hsl(t), t.h = n.h, t.s = n.s, t.l = n.l, n = e.rgb2hsb(t), t.v = n.b) : (t = {
                hex: "none"
            }, t.r = t.g = t.b = t.h = t.s = t.v = t.l = -1)), t.toString = _e, t
        }, e.hsb2rgb = function (e, t, n, i) {
            this.is(e, "object") && "h" in e && "s" in e && "b" in e && (n = e.b, t = e.s, e = e.h, i = e.o), e *= 360;
            var r, a, o, s, l;
            return e = e % 360 / 60, l = n * t, s = l * (1 - L(e % 2 - 1)), r = a = o = n - l, e = ~~e, r += [l, s, 0, 0, s, l][e], a += [s, l, l, s, 0, 0][e], o += [0, 0, s, l, l, s][e], ke(r, a, o, i)
        }, e.hsl2rgb = function (e, t, n, i) {
            this.is(e, "object") && "h" in e && "s" in e && "l" in e && (n = e.l, t = e.s, e = e.h), (e > 1 || t > 1 || n > 1) && (e /= 360, t /= 100, n /= 100), e *= 360;
            var r, a, o, s, l;
            return e = e % 360 / 60, l = 2 * t * (.5 > n ? n : 1 - n), s = l * (1 - L(e % 2 - 1)), r = a = o = n - l / 2, e = ~~e, r += [l, s, 0, 0, s, l][e], a += [s, l, l, s, 0, 0][e], o += [0, 0, s, l, l, s][e], ke(r, a, o, i)
        }, e.rgb2hsb = function (e, t, n) {
            n = xe(e, t, n), e = n[0], t = n[1], n = n[2];
            var i, r, a, o;
            return a = N(e, t, n), o = a - z(e, t, n), i = 0 == o ? null : a == e ? (t - n) / o : a == t ? (n - e) / o + 2 : (e - t) / o + 4, i = (i + 360) % 6 * 60 / 360, r = 0 == o ? 0 : o / a, {
                h: i,
                s: r,
                b: a,
                toString: be
            }
        }, e.rgb2hsl = function (e, t, n) {
            n = xe(e, t, n), e = n[0], t = n[1], n = n[2];
            var i, r, a, o, s, l;
            return o = N(e, t, n), s = z(e, t, n), l = o - s, i = 0 == l ? null : o == e ? (t - n) / l : o == t ? (n - e) / l + 2 : (e - t) / l + 4, i = (i + 360) % 6 * 60 / 360, a = (o + s) / 2, r = 0 == l ? 0 : .5 > a ? l / (2 * a) : l / (2 - 2 * a), {
                h: i,
                s: r,
                l: a,
                toString: we
            }
        }, e._path2string = function () {
            return this.join(",").replace(re, "$1")
        };
        e._preload = function (e, t) {
            var n = C.doc.createElement("img");
            n.style.cssText = "position:absolute;left:-9999em;top:-9999em", n.onload = function () {
                t.call(this), this.onload = null, C.doc.body.removeChild(this)
            }, n.onerror = function () {
                C.doc.body.removeChild(this)
            }, C.doc.body.appendChild(n), n.src = e
        };
        e.getRGB = i(function (t) {
            if (!t || (t = R(t)).indexOf("-") + 1) return {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                error: 1,
                toString: r
            };
            if ("none" == t) return {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                toString: r
            };
            !(ie[k](t.toLowerCase().substring(0, 2)) || "#" == t.charAt()) && (t = ye(t));
            var n, i, a, o, s, l, c = t.match(Y);
            return c ? (c[2] && (a = Q(c[2].substring(5), 16), i = Q(c[2].substring(3, 5), 16), n = Q(c[2].substring(1, 3), 16)), c[3] && (a = Q((s = c[3].charAt(3)) + s, 16), i = Q((s = c[3].charAt(2)) + s, 16), n = Q((s = c[3].charAt(1)) + s, 16)), c[4] && (l = c[4][I](ne), n = Z(l[0]), "%" == l[0].slice(-1) && (n *= 2.55), i = Z(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), a = Z(l[2]), "%" == l[2].slice(-1) && (a *= 2.55), "rgba" == c[1].toLowerCase().slice(0, 4) && (o = Z(l[3])), l[3] && "%" == l[3].slice(-1) && (o /= 100)), c[5] ? (l = c[5][I](ne), n = Z(l[0]), "%" == l[0].slice(-1) && (n *= 2.55), i = Z(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), a = Z(l[2]), "%" == l[2].slice(-1) && (a *= 2.55), ("deg" == l[0].slice(-3) || "\xb0" == l[0].slice(-1)) && (n /= 360), "hsba" == c[1].toLowerCase().slice(0, 4) && (o = Z(l[3])), l[3] && "%" == l[3].slice(-1) && (o /= 100), e.hsb2rgb(n, i, a, o)) : c[6] ? (l = c[6][I](ne), n = Z(l[0]), "%" == l[0].slice(-1) && (n *= 2.55), i = Z(l[1]), "%" == l[1].slice(-1) && (i *= 2.55), a = Z(l[2]), "%" == l[2].slice(-1) && (a *= 2.55), ("deg" == l[0].slice(-3) || "\xb0" == l[0].slice(-1)) && (n /= 360), "hsla" == c[1].toLowerCase().slice(0, 4) && (o = Z(l[3])), l[3] && "%" == l[3].slice(-1) && (o /= 100), e.hsl2rgb(n, i, a, o)) : (c = {
                r: n,
                g: i,
                b: a,
                toString: r
            }, c.hex = "#" + (16777216 | a | i << 8 | n << 16).toString(16).slice(1), e.is(o, "finite") && (c.opacity = o), c)) : {
                r: -1,
                g: -1,
                b: -1,
                hex: "none",
                error: 1,
                toString: r
            }
        }, e), e.hsb = i(function (t, n, i) {
            return e.hsb2rgb(t, n, i).hex
        }), e.hsl = i(function (t, n, i) {
            return e.hsl2rgb(t, n, i).hex
        }), e.rgb = i(function (e, t, n) {
            return "#" + (16777216 | n | t << 8 | e << 16).toString(16).slice(1)
        }), e.getColor = function (e) {
            var t = this.getColor.start = this.getColor.start || {
                h: 0,
                s: 1,
                b: e || .75
            },
                n = this.hsb2rgb(t.h, t.s, t.b);
            return t.h += .075, t.h > 1 && (t.h = 0, t.s -= .2, t.s <= 0 && (this.getColor.start = {
                h: 0,
                s: 1,
                b: t.b
            })), n.hex
        }, e.getColor.reset = function () {
            delete this.start
        }, e.parsePathString = function (t) {
            if (!t) return null;
            var n = Ce(t);
            if (n.arr) return Ae(n.arr);
            var i = {
                a: 7,
                c: 6,
                h: 1,
                l: 2,
                m: 2,
                r: 4,
                q: 4,
                s: 4,
                t: 2,
                v: 1,
                z: 0
            },
                r = [];
            return e.is(t, q) && e.is(t[0], q) && (r = Ae(t)), r.length || R(t).replace(ae, function (e, t, n) {
                var a = [],
                    o = t.toLowerCase();
                if (n.replace(se, function (e, t) {
                    t && a.push(+t)
                }), "m" == o && a.length > 2 && (r.push([t][E](a.splice(0, 2))), o = "l", t = "m" == t ? "l" : "L"), "r" == o) r.push([t][E](a));
                else
                    for (; a.length >= i[o] && (r.push([t][E](a.splice(0, i[o]))), i[o]););
            }), r.toString = e._path2string, n.arr = Ae(r), r
        }, e.parseTransformString = i(function (t) {
            if (!t) return null;
            var n = [];
            return e.is(t, q) && e.is(t[0], q) && (n = Ae(t)), n.length || R(t).replace(oe, function (e, t, i) {
                var r = [];
                O.call(t);
                i.replace(se, function (e, t) {
                    t && r.push(+t)
                }), n.push([t][E](r))
            }), n.toString = e._path2string, n
        });
        var Ce = function (e) {
            var t = Ce.ps = Ce.ps || {};
            return t[e] ? t[e].sleep = 100 : t[e] = {
                sleep: 100
            }, setTimeout(function () {
                for (var n in t) t[k](n) && n != e && (t[n].sleep--, !t[n].sleep && delete t[n])
            }), t[e]
        };
        e.findDotsAtSegment = function (e, t, n, i, r, a, o, s, l) {
            var c = 1 - l,
                u = F(c, 3),
                d = F(c, 2),
                h = l * l,
                f = h * l,
                p = u * e + 3 * d * l * n + 3 * c * l * l * r + f * o,
                m = u * t + 3 * d * l * i + 3 * c * l * l * a + f * s,
                g = e + 2 * l * (n - e) + h * (r - 2 * n + e),
                v = t + 2 * l * (i - t) + h * (a - 2 * i + t),
                y = n + 2 * l * (r - n) + h * (o - 2 * r + n),
                b = i + 2 * l * (a - i) + h * (s - 2 * a + i),
                w = c * e + l * n,
                _ = c * t + l * i,
                x = c * r + l * o,
                k = c * a + l * s,
                C = 90 - 180 * j.atan2(g - y, v - b) / B;
            return (g > y || b > v) && (C += 180), {
                x: p,
                y: m,
                m: {
                    x: g,
                    y: v
                },
                n: {
                    x: y,
                    y: b
                },
                start: {
                    x: w,
                    y: _
                },
                end: {
                    x: x,
                    y: k
                },
                alpha: C
            }
        }, e.bezierBBox = function (t, n, i, r, a, o, s, l) {
            e.is(t, "array") || (t = [t, n, i, r, a, o, s, l]);
            var c = Ie.apply(null, t);
            return {
                x: c.min.x,
                y: c.min.y,
                x2: c.max.x,
                y2: c.max.y,
                width: c.max.x - c.min.x,
                height: c.max.y - c.min.y
            }
        }, e.isPointInsideBBox = function (e, t, n) {
            return t >= e.x && t <= e.x2 && n >= e.y && n <= e.y2
        }, e.isBBoxIntersect = function (t, n) {
            var i = e.isPointInsideBBox;
            return i(n, t.x, t.y) || i(n, t.x2, t.y) || i(n, t.x, t.y2) || i(n, t.x2, t.y2) || i(t, n.x, n.y) || i(t, n.x2, n.y) || i(t, n.x, n.y2) || i(t, n.x2, n.y2) || (t.x < n.x2 && t.x > n.x || n.x < t.x2 && n.x > t.x) && (t.y < n.y2 && t.y > n.y || n.y < t.y2 && n.y > t.y)
        }, e.pathIntersection = function (e, t) {
            return d(e, t)
        }, e.pathIntersectionNumber = function (e, t) {
            return d(e, t, 1)
        }, e.isPointInsidePath = function (t, n, i) {
            var r = e.pathBBox(t);
            return e.isPointInsideBBox(r, n, i) && d(t, [
                ["M", n, i],
                ["H", r.x2 + 10]
            ], 1) % 2 == 1
        }, e._removedFactory = function (e) {
            return function () {
                eve("raphael.log", null, "Rapha\xebl: you are calling to method \u201c" + e + "\u201d of removed object", e)
            }
        };
        var Se = e.pathBBox = function (e) {
            var n = Ce(e);
            if (n.bbox) return n.bbox;
            if (!e) return {
                x: 0,
                y: 0,
                width: 0,
                height: 0,
                x2: 0,
                y2: 0
            };
            e = Pe(e);
            for (var i, r = 0, a = 0, o = [], s = [], l = 0, c = e.length; c > l; l++)
                if (i = e[l], "M" == i[0]) r = i[1], a = i[2], o.push(r), s.push(a);
                else {
                    var u = Ie(r, a, i[1], i[2], i[3], i[4], i[5], i[6]);
                    o = o[E](u.min.x, u.max.x), s = s[E](u.min.y, u.max.y), r = i[5], a = i[6]
                } var d = z[T](0, o),
                    h = z[T](0, s),
                    f = N[T](0, o),
                    p = N[T](0, s),
                    m = {
                        x: d,
                        y: h,
                        x2: f,
                        y2: p,
                        width: f - d,
                        height: p - h
                    };
            return n.bbox = t(m), m
        },
            Ae = function (n) {
                var i = t(n);
                return i.toString = e._path2string, i
            },
            Te = e._pathToRelative = function (t) {
                var n = Ce(t);
                if (n.rel) return Ae(n.rel);
                e.is(t, q) && e.is(t && t[0], q) || (t = e.parsePathString(t));
                var i = [],
                    r = 0,
                    a = 0,
                    o = 0,
                    s = 0,
                    l = 0;
                "M" == t[0][0] && (r = t[0][1], a = t[0][2], o = r, s = a, l++, i.push(["M", r, a]));
                for (var c = l, u = t.length; u > c; c++) {
                    var d = i[c] = [],
                        h = t[c];
                    if (h[0] != O.call(h[0])) switch (d[0] = O.call(h[0]), d[0]) {
                        case "a":
                            d[1] = h[1], d[2] = h[2], d[3] = h[3], d[4] = h[4], d[5] = h[5], d[6] = +(h[6] - r).toFixed(3), d[7] = +(h[7] - a).toFixed(3);
                            break;
                        case "v":
                            d[1] = +(h[1] - a).toFixed(3);
                            break;
                        case "m":
                            o = h[1], s = h[2];
                        default:
                            for (var f = 1, p = h.length; p > f; f++) d[f] = +(h[f] - (f % 2 ? r : a)).toFixed(3)
                    } else {
                        d = i[c] = [], "m" == h[0] && (o = h[1] + r, s = h[2] + a);
                        for (var m = 0, g = h.length; g > m; m++) i[c][m] = h[m]
                    }
                    var v = i[c].length;
                    switch (i[c][0]) {
                        case "z":
                            r = o, a = s;
                            break;
                        case "h":
                            r += +i[c][v - 1];
                            break;
                        case "v":
                            a += +i[c][v - 1];
                            break;
                        default:
                            r += +i[c][v - 2], a += +i[c][v - 1]
                    }
                }
                return i.toString = e._path2string, n.rel = Ae(i), i
            },
            Ee = e._pathToAbsolute = function (t) {
                var n = Ce(t);
                if (n.abs) return Ae(n.abs);
                if (e.is(t, q) && e.is(t && t[0], q) || (t = e.parsePathString(t)), !t || !t.length) return [
                    ["M", 0, 0]
                ];
                var i = [],
                    r = 0,
                    o = 0,
                    s = 0,
                    l = 0,
                    c = 0;
                "M" == t[0][0] && (r = +t[0][1], o = +t[0][2], s = r, l = o, c++, i[0] = ["M", r, o]);
                for (var u, d, h = 3 == t.length && "M" == t[0][0] && "R" == t[1][0].toUpperCase() && "Z" == t[2][0].toUpperCase(), f = c, p = t.length; p > f; f++) {
                    if (i.push(u = []), d = t[f], d[0] != J.call(d[0])) switch (u[0] = J.call(d[0]), u[0]) {
                        case "A":
                            u[1] = d[1], u[2] = d[2], u[3] = d[3], u[4] = d[4], u[5] = d[5], u[6] = +(d[6] + r), u[7] = +(d[7] + o);
                            break;
                        case "V":
                            u[1] = +d[1] + o;
                            break;
                        case "H":
                            u[1] = +d[1] + r;
                            break;
                        case "R":
                            for (var m = [r, o][E](d.slice(1)), g = 2, v = m.length; v > g; g++) m[g] = +m[g] + r, m[++g] = +m[g] + o;
                            i.pop(), i = i[E](a(m, h));
                            break;
                        case "M":
                            s = +d[1] + r, l = +d[2] + o;
                        default:
                            for (g = 1, v = d.length; v > g; g++) u[g] = +d[g] + (g % 2 ? r : o)
                    } else if ("R" == d[0]) m = [r, o][E](d.slice(1)), i.pop(), i = i[E](a(m, h)), u = ["R"][E](d.slice(-2));
                    else
                        for (var y = 0, b = d.length; b > y; y++) u[y] = d[y];
                    switch (u[0]) {
                        case "Z":
                            r = s, o = l;
                            break;
                        case "H":
                            r = u[1];
                            break;
                        case "V":
                            o = u[1];
                            break;
                        case "M":
                            s = u[u.length - 2], l = u[u.length - 1];
                        default:
                            r = u[u.length - 2], o = u[u.length - 1]
                    }
                }
                return i.toString = e._path2string, n.abs = Ae(i), i
            },
            De = function (e, t, n, i) {
                return [e, t, n, i, n, i]
            },
            $e = function (e, t, n, i, r, a) {
                var o = 1 / 3,
                    s = 2 / 3;
                return [o * e + s * n, o * t + s * i, o * r + s * n, o * a + s * i, r, a]
            },
            Me = function (e, t, n, r, a, o, s, l, c, u) {
                var d, h = 120 * B / 180,
                    f = B / 180 * (+a || 0),
                    p = [],
                    m = i(function (e, t, n) {
                        var i = e * j.cos(n) - t * j.sin(n),
                            r = e * j.sin(n) + t * j.cos(n);
                        return {
                            x: i,
                            y: r
                        }
                    });
                if (u) C = u[0], S = u[1], x = u[2], k = u[3];
                else {
                    d = m(e, t, -f), e = d.x, t = d.y, d = m(l, c, -f), l = d.x, c = d.y;
                    var g = (j.cos(B / 180 * a), j.sin(B / 180 * a), (e - l) / 2),
                        v = (t - c) / 2,
                        y = g * g / (n * n) + v * v / (r * r);
                    y > 1 && (y = j.sqrt(y), n = y * n, r = y * r);
                    var b = n * n,
                        w = r * r,
                        _ = (o == s ? -1 : 1) * j.sqrt(L((b * w - b * v * v - w * g * g) / (b * v * v + w * g * g))),
                        x = _ * n * v / r + (e + l) / 2,
                        k = _ * -r * g / n + (t + c) / 2,
                        C = j.asin(((t - k) / r).toFixed(9)),
                        S = j.asin(((c - k) / r).toFixed(9));
                    C = x > e ? B - C : C, S = x > l ? B - S : S, 0 > C && (C = 2 * B + C), 0 > S && (S = 2 * B + S), s && C > S && (C -= 2 * B), !s && S > C && (S -= 2 * B)
                }
                var A = S - C;
                if (L(A) > h) {
                    var T = S,
                        D = l,
                        $ = c;
                    S = C + h * (s && S > C ? 1 : -1), l = x + n * j.cos(S), c = k + r * j.sin(S), p = Me(l, c, n, r, a, 0, s, D, $, [S, T, x, k])
                }
                A = S - C;
                var M = j.cos(C),
                    R = j.sin(C),
                    P = j.cos(S),
                    H = j.sin(S),
                    O = j.tan(A / 4),
                    N = 4 / 3 * n * O,
                    z = 4 / 3 * r * O,
                    F = [e, t],
                    W = [e + N * R, t - z * M],
                    U = [l + N * H, c - z * P],
                    q = [l, c];
                if (W[0] = 2 * F[0] - W[0], W[1] = 2 * F[1] - W[1], u) return [W, U, q][E](p);
                p = [W, U, q][E](p).join()[I](",");
                for (var G = [], Y = 0, V = p.length; V > Y; Y++) G[Y] = Y % 2 ? m(p[Y - 1], p[Y], f).y : m(p[Y], p[Y + 1], f).x;
                return G
            },
            Re = function (e, t, n, i, r, a, o, s, l) {
                var c = 1 - l;
                return {
                    x: F(c, 3) * e + 3 * F(c, 2) * l * n + 3 * c * l * l * r + F(l, 3) * o,
                    y: F(c, 3) * t + 3 * F(c, 2) * l * i + 3 * c * l * l * a + F(l, 3) * s
                }
            },
            Ie = i(function (e, t, n, i, r, a, o, s) {
                var l, c = r - 2 * n + e - (o - 2 * r + n),
                    u = 2 * (n - e) - 2 * (r - n),
                    d = e - n,
                    h = (-u + j.sqrt(u * u - 4 * c * d)) / 2 / c,
                    f = (-u - j.sqrt(u * u - 4 * c * d)) / 2 / c,
                    p = [t, s],
                    m = [e, o];
                return L(h) > "1e12" && (h = .5), L(f) > "1e12" && (f = .5), h > 0 && 1 > h && (l = Re(e, t, n, i, r, a, o, s, h), m.push(l.x), p.push(l.y)), f > 0 && 1 > f && (l = Re(e, t, n, i, r, a, o, s, f), m.push(l.x), p.push(l.y)), c = a - 2 * i + t - (s - 2 * a + i), u = 2 * (i - t) - 2 * (a - i), d = t - i, h = (-u + j.sqrt(u * u - 4 * c * d)) / 2 / c, f = (-u - j.sqrt(u * u - 4 * c * d)) / 2 / c, L(h) > "1e12" && (h = .5), L(f) > "1e12" && (f = .5), h > 0 && 1 > h && (l = Re(e, t, n, i, r, a, o, s, h), m.push(l.x), p.push(l.y)), f > 0 && 1 > f && (l = Re(e, t, n, i, r, a, o, s, f), m.push(l.x), p.push(l.y)), {
                    min: {
                        x: z[T](0, m),
                        y: z[T](0, p)
                    },
                    max: {
                        x: N[T](0, m),
                        y: N[T](0, p)
                    }
                }
            }),
            Pe = e._path2curve = i(function (e, t) {
                var n = !t && Ce(e);
                if (!t && n.curve) return Ae(n.curve);
                for (var i = Ee(e), r = t && Ee(t), a = {
                    x: 0,
                    y: 0,
                    bx: 0,
                    by: 0,
                    X: 0,
                    Y: 0,
                    qx: null,
                    qy: null
                }, o = {
                    x: 0,
                    y: 0,
                    bx: 0,
                    by: 0,
                    X: 0,
                    Y: 0,
                    qx: null,
                    qy: null
                }, s = (function (e, t) {
                    var n, i;
                    if (!e) return ["C", t.x, t.y, t.x, t.y, t.x, t.y];
                    switch (!(e[0] in {
                        T: 1,
                        Q: 1
                    }) && (t.qx = t.qy = null), e[0]) {
                        case "M":
                            t.X = e[1], t.Y = e[2];
                            break;
                        case "A":
                            e = ["C"][E](Me[T](0, [t.x, t.y][E](e.slice(1))));
                            break;
                        case "S":
                            n = t.x + (t.x - (t.bx || t.x)), i = t.y + (t.y - (t.by || t.y)), e = ["C", n, i][E](e.slice(1));
                            break;
                        case "T":
                            t.qx = t.x + (t.x - (t.qx || t.x)), t.qy = t.y + (t.y - (t.qy || t.y)), e = ["C"][E]($e(t.x, t.y, t.qx, t.qy, e[1], e[2]));
                            break;
                        case "Q":
                            t.qx = e[1], t.qy = e[2], e = ["C"][E]($e(t.x, t.y, e[1], e[2], e[3], e[4]));
                            break;
                        case "L":
                            e = ["C"][E](De(t.x, t.y, e[1], e[2]));
                            break;
                        case "H":
                            e = ["C"][E](De(t.x, t.y, e[1], t.y));
                            break;
                        case "V":
                            e = ["C"][E](De(t.x, t.y, t.x, e[1]));
                            break;
                        case "Z":
                            e = ["C"][E](De(t.x, t.y, t.X, t.Y))
                    }
                    return e
                }), l = function (e, t) {
                    if (e[t].length > 7) {
                        e[t].shift();
                        for (var n = e[t]; n.length;) e.splice(t++, 0, ["C"][E](n.splice(0, 6)));
                        e.splice(t, 1), d = N(i.length, r && r.length || 0)
                    }
                }, c = function (e, t, n, a, o) {
                    e && t && "M" == e[o][0] && "M" != t[o][0] && (t.splice(o, 0, ["M", a.x, a.y]), n.bx = 0, n.by = 0, n.x = e[o][1], n.y = e[o][2], d = N(i.length, r && r.length || 0))
                }, u = 0, d = N(i.length, r && r.length || 0); d > u; u++) {
                    i[u] = s(i[u], a), l(i, u), r && (r[u] = s(r[u], o)), r && l(r, u), c(i, r, a, o, u), c(r, i, o, a, u);
                    var h = i[u],
                        f = r && r[u],
                        p = h.length,
                        m = r && f.length;
                    a.x = h[p - 2], a.y = h[p - 1], a.bx = Z(h[p - 4]) || a.x, a.by = Z(h[p - 3]) || a.y, o.bx = r && (Z(f[m - 4]) || o.x), o.by = r && (Z(f[m - 3]) || o.y), o.x = r && f[m - 2], o.y = r && f[m - 1]
                }
                return r || (n.curve = Ae(i)), r ? [i, r] : i
            }, null, Ae),
            He = (e._parseDots = i(function (t) {
                for (var n = [], i = 0, r = t.length; r > i; i++) {
                    var a = {},
                        o = t[i].match(/^([^:]*):?([\d\.]*)/);
                    if (a.color = e.getRGB(o[1]), a.color.error) return null;
                    a.color = a.color.hex, o[2] && (a.offset = o[2] + "%"), n.push(a)
                }
                for (i = 1, r = n.length - 1; r > i; i++)
                    if (!n[i].offset) {
                        for (var s = Z(n[i - 1].offset || 0), l = 0, c = i + 1; r > c; c++)
                            if (n[c].offset) {
                                l = n[c].offset;
                                break
                            } l || (l = 100, c = r), l = Z(l);
                        for (var u = (l - s) / (c - i + 1); c > i; i++) s += u, n[i].offset = s + "%"
                    } return n
            }), e._tear = function (e, t) {
                e == t.top && (t.top = e.prev), e == t.bottom && (t.bottom = e.next), e.next && (e.next.prev = e.prev), e.prev && (e.prev.next = e.next)
            }),
            Oe = (e._tofront = function (e, t) {
                t.top !== e && (He(e, t), e.next = null, e.prev = t.top, t.top.next = e, t.top = e)
            }, e._toback = function (e, t) {
                t.bottom !== e && (He(e, t), e.next = t.bottom, e.prev = null, t.bottom.prev = e, t.bottom = e)
            }, e._insertafter = function (e, t, n) {
                He(e, n), t == n.top && (n.top = e), t.next && (t.next.prev = e), e.next = t.next, e.prev = t, t.next = e
            }, e._insertbefore = function (e, t, n) {
                He(e, n), t == n.bottom && (n.bottom = e), t.prev && (t.prev.next = e), e.prev = t.prev, t.prev = e, e.next = t
            }, e.toMatrix = function (e, t) {
                var n = Se(e),
                    i = {
                        _: {
                            transform: $
                        },
                        getBBox: function () {
                            return n
                        }
                    };
                return je(i, t), i.matrix
            }),
            je = (e.transformPath = function (e, t) {
                return me(e, Oe(e, t))
            }, e._extractTransform = function (t, n) {
                if (null == n) return t._.transform;
                n = R(n).replace(/\.{3}|\u2026/g, t._.transform || $);
                var i = e.parseTransformString(n),
                    r = 0,
                    a = 0,
                    o = 0,
                    s = 1,
                    l = 1,
                    c = t._,
                    u = new h;
                if (c.transform = i || [], i)
                    for (var d = 0, f = i.length; f > d; d++) {
                        var p, m, g, v, y, b = i[d],
                            w = b.length,
                            _ = R(b[0]).toLowerCase(),
                            x = b[0] != _,
                            k = x ? u.invert() : 0;
                        "t" == _ && 3 == w ? x ? (p = k.x(0, 0), m = k.y(0, 0), g = k.x(b[1], b[2]), v = k.y(b[1], b[2]), u.translate(g - p, v - m)) : u.translate(b[1], b[2]) : "r" == _ ? 2 == w ? (y = y || t.getBBox(1), u.rotate(b[1], y.x + y.width / 2, y.y + y.height / 2), r += b[1]) : 4 == w && (x ? (g = k.x(b[2], b[3]), v = k.y(b[2], b[3]), u.rotate(b[1], g, v)) : u.rotate(b[1], b[2], b[3]), r += b[1]) : "s" == _ ? 2 == w || 3 == w ? (y = y || t.getBBox(1), u.scale(b[1], b[w - 1], y.x + y.width / 2, y.y + y.height / 2), s *= b[1], l *= b[w - 1]) : 5 == w && (x ? (g = k.x(b[3], b[4]), v = k.y(b[3], b[4]), u.scale(b[1], b[2], g, v)) : u.scale(b[1], b[2], b[3], b[4]), s *= b[1], l *= b[2]) : "m" == _ && 7 == w && u.add(b[1], b[2], b[3], b[4], b[5], b[6]), c.dirtyT = 1, t.matrix = u
                    }
                t.matrix = u, c.sx = s, c.sy = l, c.deg = r, c.dx = a = u.e, c.dy = o = u.f, 1 == s && 1 == l && !r && c.bbox ? (c.bbox.x += +a, c.bbox.y += +o) : c.dirtyT = 1
            }),
            Ne = function (e) {
                var t = e[0];
                switch (t.toLowerCase()) {
                    case "t":
                        return [t, 0, 0];
                    case "m":
                        return [t, 1, 0, 0, 1, 0, 0];
                    case "r":
                        return 4 == e.length ? [t, 0, e[2], e[3]] : [t, 0];
                    case "s":
                        return 5 == e.length ? [t, 1, 1, e[3], e[4]] : 3 == e.length ? [t, 1, 1] : [t, 1]
                }
            },
            ze = e._equaliseTransform = function (t, n) {
                n = R(n).replace(/\.{3}|\u2026/g, t), t = e.parseTransformString(t) || [], n = e.parseTransformString(n) || [];
                for (var i, r, a, o, s = N(t.length, n.length), l = [], c = [], u = 0; s > u; u++) {
                    if (a = t[u] || Ne(n[u]), o = n[u] || Ne(a), a[0] != o[0] || "r" == a[0].toLowerCase() && (a[2] != o[2] || a[3] != o[3]) || "s" == a[0].toLowerCase() && (a[3] != o[3] || a[4] != o[4])) return;
                    for (l[u] = [], c[u] = [], i = 0, r = N(a.length, o.length); r > i; i++) i in a && (l[u][i] = a[i]), i in o && (c[u][i] = o[i])
                }
                return {
                    from: l,
                    to: c
                }
            };
        e._getContainer = function (t, n, i, r) {
            var a;
            return a = null != r || e.is(t, "object") ? t : C.doc.getElementById(t), null != a ? a.tagName ? null == n ? {
                container: a,
                width: a.style.pixelWidth || a.offsetWidth,
                height: a.style.pixelHeight || a.offsetHeight
            } : {
                container: a,
                width: n,
                height: i
            } : {
                container: 1,
                x: t,
                y: n,
                width: i,
                height: r
            } : void 0
        }, e.pathToRelative = Te, e._engine = {}, e.path2curve = Pe, e.matrix = function (e, t, n, i, r, a) {
            return new h(e, t, n, i, r, a)
        },
            function (t) {
                function n(e) {
                    return e[0] * e[0] + e[1] * e[1]
                }

                function i(e) {
                    var t = j.sqrt(n(e));
                    e[0] && (e[0] /= t), e[1] && (e[1] /= t)
                }
                t.add = function (e, t, n, i, r, a) {
                    var o, s, l, c, u = [
                        [],
                        [],
                        []
                    ],
                        d = [
                            [this.a, this.c, this.e],
                            [this.b, this.d, this.f],
                            [0, 0, 1]
                        ],
                        f = [
                            [e, n, r],
                            [t, i, a],
                            [0, 0, 1]
                        ];
                    for (e && e instanceof h && (f = [
                        [e.a, e.c, e.e],
                        [e.b, e.d, e.f],
                        [0, 0, 1]
                    ]), o = 0; 3 > o; o++)
                        for (s = 0; 3 > s; s++) {
                            for (c = 0, l = 0; 3 > l; l++) c += d[o][l] * f[l][s];
                            u[o][s] = c
                        }
                    this.a = u[0][0], this.b = u[1][0], this.c = u[0][1], this.d = u[1][1], this.e = u[0][2], this.f = u[1][2]
                }, t.invert = function () {
                    var e = this,
                        t = e.a * e.d - e.b * e.c;
                    return new h(e.d / t, -e.b / t, -e.c / t, e.a / t, (e.c * e.f - e.d * e.e) / t, (e.b * e.e - e.a * e.f) / t)
                }, t.clone = function () {
                    return new h(this.a, this.b, this.c, this.d, this.e, this.f)
                }, t.translate = function (e, t) {
                    this.add(1, 0, 0, 1, e, t)
                }, t.scale = function (e, t, n, i) {
                    null == t && (t = e), (n || i) && this.add(1, 0, 0, 1, n, i), this.add(e, 0, 0, t, 0, 0), (n || i) && this.add(1, 0, 0, 1, -n, -i)
                }, t.rotate = function (t, n, i) {
                    t = e.rad(t), n = n || 0, i = i || 0;
                    var r = +j.cos(t).toFixed(9),
                        a = +j.sin(t).toFixed(9);
                    this.add(r, a, -a, r, n, i), this.add(1, 0, 0, 1, -n, -i)
                }, t.x = function (e, t) {
                    return e * this.a + t * this.c + this.e
                }, t.y = function (e, t) {
                    return e * this.b + t * this.d + this.f
                }, t.get = function (e) {
                    return +this[R.fromCharCode(97 + e)].toFixed(4)
                }, t.toString = function () {
                    return e.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join()
                }, t.toFilter = function () {
                    return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')"
                }, t.offset = function () {
                    return [this.e.toFixed(4), this.f.toFixed(4)]
                }, t.split = function () {
                    var t = {};
                    t.dx = this.e, t.dy = this.f;
                    var r = [
                        [this.a, this.c],
                        [this.b, this.d]
                    ];
                    t.scalex = j.sqrt(n(r[0])), i(r[0]), t.shear = r[0][0] * r[1][0] + r[0][1] * r[1][1], r[1] = [r[1][0] - r[0][0] * t.shear, r[1][1] - r[0][1] * t.shear], t.scaley = j.sqrt(n(r[1])), i(r[1]), t.shear /= t.scaley;
                    var a = -r[0][1],
                        o = r[1][1];
                    return 0 > o ? (t.rotate = e.deg(j.acos(o)), 0 > a && (t.rotate = 360 - t.rotate)) : t.rotate = e.deg(j.asin(a)), t.isSimple = !(+t.shear.toFixed(9) || t.scalex.toFixed(9) != t.scaley.toFixed(9) && t.rotate), t.isSuperSimple = !+t.shear.toFixed(9) && t.scalex.toFixed(9) == t.scaley.toFixed(9) && !t.rotate, t.noRotation = !+t.shear.toFixed(9) && !t.rotate, t
                }, t.toTransformString = function (e) {
                    var t = e || this[I]();
                    return t.isSimple ? (t.scalex = +t.scalex.toFixed(4), t.scaley = +t.scaley.toFixed(4), t.rotate = +t.rotate.toFixed(4), (t.dx || t.dy ? "t" + [t.dx, t.dy] : $) + (1 != t.scalex || 1 != t.scaley ? "s" + [t.scalex, t.scaley, 0, 0] : $) + (t.rotate ? "r" + [t.rotate, 0, 0] : $)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)]
                }
            }(h.prototype);
        var Le = navigator.userAgent.match(/Version\/(.*?)\s/) || navigator.userAgent.match(/Chrome\/(\d+)/);
        "Apple Computer, Inc." == navigator.vendor && (Le && Le[1] < 4 || "iP" == navigator.platform.slice(0, 2)) || "Google Inc." == navigator.vendor && Le && Le[1] < 8 ? b.safari = function () {
            var e = this.rect(-99, -99, this.width + 99, this.height + 99).attr({
                stroke: "none"
            });
            setTimeout(function () {
                e.remove()
            })
        } : b.safari = ue;
        for (var Fe = function () {
            this.returnValue = !1
        }, Be = function () {
            return this.originalEvent.preventDefault()
        }, We = function () {
            this.cancelBubble = !0
        }, Ue = function () {
            return this.originalEvent.stopPropagation()
        }, qe = function () {
            return C.doc.addEventListener ? function (e, t, n, i) {
                var r = D && H[t] ? H[t] : t,
                    a = function (r) {
                        var a = C.doc.documentElement.scrollTop || C.doc.body.scrollTop,
                            o = C.doc.documentElement.scrollLeft || C.doc.body.scrollLeft,
                            s = r.clientX + o,
                            l = r.clientY + a;
                        if (D && H[k](t))
                            for (var c = 0, u = r.targetTouches && r.targetTouches.length; u > c; c++)
                                if (r.targetTouches[c].target == e) {
                                    var d = r;
                                    r = r.targetTouches[c], r.originalEvent = d, r.preventDefault = Be, r.stopPropagation = Ue;
                                    break
                                } return n.call(i, r, s, l)
                    };
                return e.addEventListener(r, a, !1),
                    function () {
                        return e.removeEventListener(r, a, !1), !0
                    }
            } : C.doc.attachEvent ? function (e, t, n, i) {
                var r = function (e) {
                    e = e || C.win.event;
                    var t = C.doc.documentElement.scrollTop || C.doc.body.scrollTop,
                        r = C.doc.documentElement.scrollLeft || C.doc.body.scrollLeft,
                        a = e.clientX + r,
                        o = e.clientY + t;
                    return e.preventDefault = e.preventDefault || Fe, e.stopPropagation = e.stopPropagation || We, n.call(i, e, a, o)
                };
                e.attachEvent("on" + t, r);
                var a = function () {
                    return e.detachEvent("on" + t, r), !0
                };
                return a
            } : void 0
        }(), Ge = [], Ye = function (e) {
            for (var t, n = e.clientX, i = e.clientY, r = C.doc.documentElement.scrollTop || C.doc.body.scrollTop, a = C.doc.documentElement.scrollLeft || C.doc.body.scrollLeft, o = Ge.length; o--;) {
                if (t = Ge[o], D) {
                    for (var s, l = e.touches.length; l--;)
                        if (s = e.touches[l], s.identifier == t.el._drag.id) {
                            n = s.clientX, i = s.clientY, (e.originalEvent ? e.originalEvent : e).preventDefault();
                            break
                        }
                } else e.preventDefault();
                var c, u = t.el.node,
                    d = u.nextSibling,
                    h = u.parentNode,
                    f = u.style.display;
                C.win.opera && h.removeChild(u), u.style.display = "none", c = t.el.paper.getElementByPoint(n, i), u.style.display = f, C.win.opera && (d ? h.insertBefore(u, d) : h.appendChild(u)), c && eve("raphael.drag.over." + t.el.id, t.el, c), n += a, i += r, eve("raphael.drag.move." + t.el.id, t.move_scope || t.el, n - t.el._drag.x, i - t.el._drag.y, n, i, e)
            }
        }, Ve = function (t) {
            e.unmousemove(Ye).unmouseup(Ve);
            for (var n, i = Ge.length; i--;) n = Ge[i], n.el._drag = {}, eve("raphael.drag.end." + n.el.id, n.end_scope || n.start_scope || n.move_scope || n.el, t);
            Ge = []
        }, Xe = e.el = {}, Ke = P.length; Ke--;) ! function (t) {
            e[t] = Xe[t] = function (n, i) {
                return e.is(n, "function") && (this.events = this.events || [], this.events.push({
                    name: t,
                    f: n,
                    unbind: qe(this.shape || this.node || C.doc, t, n, i || this)
                })), this
            }, e["un" + t] = Xe["un" + t] = function (e) {
                for (var n = this.events || [], i = n.length; i--;)
                    if (n[i].name == t && n[i].f == e) return n[i].unbind(), n.splice(i, 1), !n.length && delete this.events, this;
                return this
            }
        }(P[Ke]);
        Xe.data = function (t, n) {
            var i = le[this.id] = le[this.id] || {};
            if (1 == arguments.length) {
                if (e.is(t, "object")) {
                    for (var r in t) t[k](r) && this.data(r, t[r]);
                    return this
                }
                return eve("raphael.data.get." + this.id, this, i[t], t), i[t]
            }
            return i[t] = n, eve("raphael.data.set." + this.id, this, n, t), this
        }, Xe.removeData = function (e) {
            return null == e ? le[this.id] = {} : le[this.id] && delete le[this.id][e], this
        }, Xe.hover = function (e, t, n, i) {
            return this.mouseover(e, n).mouseout(t, i || n)
        }, Xe.unhover = function (e, t) {
            return this.unmouseover(e).unmouseout(t)
        };
        var Ze = [];
        Xe.drag = function (t, n, i, r, a, o) {
            function s(s) {
                (s.originalEvent || s).preventDefault();
                var l = C.doc.documentElement.scrollTop || C.doc.body.scrollTop,
                    c = C.doc.documentElement.scrollLeft || C.doc.body.scrollLeft;
                this._drag.x = s.clientX + c, this._drag.y = s.clientY + l, this._drag.id = s.identifier, !Ge.length && e.mousemove(Ye).mouseup(Ve), Ge.push({
                    el: this,
                    move_scope: r,
                    start_scope: a,
                    end_scope: o
                }), n && eve.on("raphael.drag.start." + this.id, n), t && eve.on("raphael.drag.move." + this.id, t), i && eve.on("raphael.drag.end." + this.id, i), eve("raphael.drag.start." + this.id, a || r || this, s.clientX + c, s.clientY + l, s)
            }
            return this._drag = {}, Ze.push({
                el: this,
                start: s
            }), this.mousedown(s), this
        }, Xe.onDragOver = function (e) {
            e ? eve.on("raphael.drag.over." + this.id, e) : eve.unbind("raphael.drag.over." + this.id)
        }, Xe.undrag = function () {
            for (var t = Ze.length; t--;) Ze[t].el == this && (this.unmousedown(Ze[t].start), Ze.splice(t, 1), eve.unbind("raphael.drag.*." + this.id));
            !Ze.length && e.unmousemove(Ye).unmouseup(Ve)
        }, b.circle = function (t, n, i) {
            var r = e._engine.circle(this, t || 0, n || 0, i || 0);
            return this.__set__ && this.__set__.push(r), r
        }, b.rect = function (t, n, i, r, a) {
            var o = e._engine.rect(this, t || 0, n || 0, i || 0, r || 0, a || 0);
            return this.__set__ && this.__set__.push(o), o
        }, b.ellipse = function (t, n, i, r) {
            var a = e._engine.ellipse(this, t || 0, n || 0, i || 0, r || 0);
            return this.__set__ && this.__set__.push(a), a
        }, b.path = function (t) {
            t && !e.is(t, U) && !e.is(t[0], q) && (t += $);
            var n = e._engine.path(e.format[T](e, arguments), this);
            return this.__set__ && this.__set__.push(n), n
        }, b.image = function (t, n, i, r, a) {
            var o = e._engine.image(this, t || "about:blank", n || 0, i || 0, r || 0, a || 0);
            return this.__set__ && this.__set__.push(o), o
        }, b.text = function (t, n, i) {
            var r = e._engine.text(this, t || 0, n || 0, R(i));
            return this.__set__ && this.__set__.push(r), r
        }, b.set = function (t) {
            !e.is(t, "array") && (t = Array.prototype.splice.call(arguments, 0, arguments.length));
            var n = new ct(t);
            return this.__set__ && this.__set__.push(n), n
        }, b.setStart = function (e) {
            this.__set__ = e || this.set()
        }, b.setFinish = function (e) {
            var t = this.__set__;
            return delete this.__set__, t
        }, b.setSize = function (t, n) {
            return e._engine.setSize.call(this, t, n)
        }, b.setViewBox = function (t, n, i, r, a) {
            return e._engine.setViewBox.call(this, t, n, i, r, a)
        }, b.top = b.bottom = null, b.raphael = e;
        var Qe = function (e) {
            var t = e.getBoundingClientRect(),
                n = e.ownerDocument,
                i = n.body,
                r = n.documentElement,
                a = r.clientTop || i.clientTop || 0,
                o = r.clientLeft || i.clientLeft || 0,
                s = t.top + (C.win.pageYOffset || r.scrollTop || i.scrollTop) - a,
                l = t.left + (C.win.pageXOffset || r.scrollLeft || i.scrollLeft) - o;
            return {
                y: s,
                x: l
            }
        };
        b.getElementByPoint = function (e, t) {
            var n = this,
                i = n.canvas,
                r = C.doc.elementFromPoint(e, t);
            if (C.win.opera && "svg" == r.tagName) {
                var a = Qe(i),
                    o = i.createSVGRect();
                o.x = e - a.x, o.y = t - a.y, o.width = o.height = 1;
                var s = i.getIntersectionList(o, null);
                s.length && (r = s[s.length - 1])
            }
            if (!r) return null;
            for (; r.parentNode && r != i.parentNode && !r.raphael;) r = r.parentNode;
            return r == n.canvas.parentNode && (r = i), r = r && r.raphael ? n.getById(r.raphaelid) : null
        }, b.getById = function (e) {
            for (var t = this.bottom; t;) {
                if (t.id == e) return t;
                t = t.next
            }
            return null
        }, b.forEach = function (e, t) {
            for (var n = this.bottom; n;) {
                if (e.call(t, n) === !1) return this;
                n = n.next
            }
            return this
        }, b.getElementsByPoint = function (e, t) {
            var n = this.set();
            return this.forEach(function (i) {
                i.isPointInside(e, t) && n.push(i)
            }), n
        }, Xe.isPointInside = function (t, n) {
            var i = this.realPath = this.realPath || pe[this.type](this);
            return e.isPointInsidePath(i, t, n)
        }, Xe.getBBox = function (e) {
            if (this.removed) return {};
            var t = this._;
            return e ? ((t.dirty || !t.bboxwt) && (this.realPath = pe[this.type](this), t.bboxwt = Se(this.realPath), t.bboxwt.toString = f, t.dirty = 0), t.bboxwt) : ((t.dirty || t.dirtyT || !t.bbox) && ((t.dirty || !this.realPath) && (t.bboxwt = 0, this.realPath = pe[this.type](this)), t.bbox = Se(me(this.realPath, this.matrix)), t.bbox.toString = f, t.dirty = t.dirtyT = 0), t.bbox)
        }, Xe.clone = function () {
            if (this.removed) return null;
            var e = this.paper[this.type]().attr(this.attr());
            return this.__set__ && this.__set__.push(e), e
        }, Xe.glow = function (e) {
            if ("text" == this.type) return null;
            e = e || {};
            var t = {
                width: (e.width || 10) + (+this.attr("stroke-width") || 1),
                fill: e.fill || !1,
                opacity: e.opacity || .5,
                offsetx: e.offsetx || 0,
                offsety: e.offsety || 0,
                color: e.color || "#000"
            },
                n = t.width / 2,
                i = this.paper,
                r = i.set(),
                a = this.realPath || pe[this.type](this);
            a = this.matrix ? me(a, this.matrix) : a;
            for (var o = 1; n + 1 > o; o++) r.push(i.path(a).attr({
                stroke: t.color,
                fill: t.fill ? t.color : "none",
                "stroke-linejoin": "round",
                "stroke-linecap": "round",
                "stroke-width": +(t.width / n * o).toFixed(3),
                opacity: +(t.opacity / n).toFixed(3)
            }));
            return r.insertBefore(this).translate(t.offsetx, t.offsety)
        };
        var Je = function (t, n, i, r, a, o, c, u, d) {
            return null == d ? s(t, n, i, r, a, o, c, u) : e.findDotsAtSegment(t, n, i, r, a, o, c, u, l(t, n, i, r, a, o, c, u, d))
        },
            et = function (t, n) {
                return function (i, r, a) {
                    i = Pe(i);
                    for (var o, s, l, c, u, d = "", h = {}, f = 0, p = 0, m = i.length; m > p; p++) {
                        if (l = i[p], "M" == l[0]) o = +l[1], s = +l[2];
                        else {
                            if (c = Je(o, s, l[1], l[2], l[3], l[4], l[5], l[6]), f + c > r) {
                                if (n && !h.start) {
                                    if (u = Je(o, s, l[1], l[2], l[3], l[4], l[5], l[6], r - f), d += ["C" + u.start.x, u.start.y, u.m.x, u.m.y, u.x, u.y], a) return d;
                                    h.start = d, d = ["M" + u.x, u.y + "C" + u.n.x, u.n.y, u.end.x, u.end.y, l[5], l[6]].join(), f += c, o = +l[5], s = +l[6];
                                    continue
                                }
                                if (!t && !n) return u = Je(o, s, l[1], l[2], l[3], l[4], l[5], l[6], r - f), {
                                    x: u.x,
                                    y: u.y,
                                    alpha: u.alpha
                                }
                            }
                            f += c, o = +l[5], s = +l[6]
                        }
                        d += l.shift() + l
                    }
                    return h.end = d, u = t ? f : n ? h : e.findDotsAtSegment(o, s, l[0], l[1], l[2], l[3], l[4], l[5], 1), u.alpha && (u = {
                        x: u.x,
                        y: u.y,
                        alpha: u.alpha
                    }), u
                }
            },
            tt = et(1),
            nt = et(),
            it = et(0, 1);
        e.getTotalLength = tt, e.getPointAtLength = nt, e.getSubpath = function (e, t, n) {
            if (this.getTotalLength(e) - n < 1e-6) return it(e, t).end;
            var i = it(e, n, 1);
            return t ? it(i, t).end : i
        }, Xe.getTotalLength = function () {
            return "path" == this.type ? this.node.getTotalLength ? this.node.getTotalLength() : tt(this.attrs.path) : void 0
        }, Xe.getPointAtLength = function (e) {
            return "path" == this.type ? nt(this.attrs.path, e) : void 0
        }, Xe.getSubpath = function (t, n) {
            return "path" == this.type ? e.getSubpath(this.attrs.path, t, n) : void 0
        };
        var rt = e.easing_formulas = {
            linear: function (e) {
                return e
            },
            "<": function (e) {
                return F(e, 1.7)
            },
            ">": function (e) {
                return F(e, .48)
            },
            "<>": function (e) {
                var t = .48 - e / 1.04,
                    n = j.sqrt(.1734 + t * t),
                    i = n - t,
                    r = F(L(i), 1 / 3) * (0 > i ? -1 : 1),
                    a = -n - t,
                    o = F(L(a), 1 / 3) * (0 > a ? -1 : 1),
                    s = r + o + .5;
                return 3 * (1 - s) * s * s + s * s * s
            },
            backIn: function (e) {
                var t = 1.70158;
                return e * e * ((t + 1) * e - t)
            },
            backOut: function (e) {
                e -= 1;
                var t = 1.70158;
                return e * e * ((t + 1) * e + t) + 1
            },
            elastic: function (e) {
                return e == !!e ? e : F(2, -10 * e) * j.sin((e - .075) * (2 * B) / .3) + 1
            },
            bounce: function (e) {
                var t, n = 7.5625,
                    i = 2.75;
                return 1 / i > e ? t = n * e * e : 2 / i > e ? (e -= 1.5 / i, t = n * e * e + .75) : 2.5 / i > e ? (e -= 2.25 / i, t = n * e * e + .9375) : (e -= 2.625 / i, t = n * e * e + .984375), t
            }
        };
        rt.easeIn = rt["ease-in"] = rt["<"], rt.easeOut = rt["ease-out"] = rt[">"], rt.easeInOut = rt["ease-in-out"] = rt["<>"], rt["back-in"] = rt.backIn, rt["back-out"] = rt.backOut;
        var at = [],
            ot = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e) {
                setTimeout(e, 16)
            },
            st = function () {
                for (var t = +new Date, n = 0; n < at.length; n++) {
                    var i = at[n];
                    if (!i.el.removed && !i.paused) {
                        var r, a, o = t - i.start,
                            s = i.ms,
                            l = i.easing,
                            c = i.from,
                            u = i.diff,
                            d = i.to,
                            h = (i.t, i.el),
                            f = {},
                            p = {};
                        if (i.initstatus ? (o = (i.initstatus * i.anim.top - i.prev) / (i.percent - i.prev) * s, i.status = i.initstatus, delete i.initstatus, i.stop && at.splice(n--, 1)) : i.status = (i.prev + (i.percent - i.prev) * (o / s)) / i.anim.top, !(0 > o))
                            if (s > o) {
                                var m = l(o / s);
                                for (var v in c)
                                    if (c[k](v)) {
                                        switch (te[v]) {
                                            case W:
                                                r = +c[v] + m * s * u[v];
                                                break;
                                            case "colour":
                                                r = "rgb(" + [lt(K(c[v].r + m * s * u[v].r)), lt(K(c[v].g + m * s * u[v].g)), lt(K(c[v].b + m * s * u[v].b))].join(",") + ")";
                                                break;
                                            case "path":
                                                r = [];
                                                for (var y = 0, b = c[v].length; b > y; y++) {
                                                    r[y] = [c[v][y][0]];
                                                    for (var w = 1, _ = c[v][y].length; _ > w; w++) r[y][w] = +c[v][y][w] + m * s * u[v][y][w];
                                                    r[y] = r[y].join(M)
                                                }
                                                r = r.join(M);
                                                break;
                                            case "transform":
                                                if (u[v].real)
                                                    for (r = [], y = 0, b = c[v].length; b > y; y++)
                                                        for (r[y] = [c[v][y][0]], w = 1, _ = c[v][y].length; _ > w; w++) r[y][w] = c[v][y][w] + m * s * u[v][y][w];
                                                else {
                                                    var x = function (e) {
                                                        return +c[v][e] + m * s * u[v][e]
                                                    };
                                                    r = [
                                                        ["m", x(0), x(1), x(2), x(3), x(4), x(5)]
                                                    ]
                                                }
                                                break;
                                            case "csv":
                                                if ("clip-rect" == v)
                                                    for (r = [], y = 4; y--;) r[y] = +c[v][y] + m * s * u[v][y];
                                                break;
                                            default:
                                                var C = [][E](c[v]);
                                                for (r = [], y = h.paper.customAttributes[v].length; y--;) r[y] = +C[y] + m * s * u[v][y]
                                        }
                                        f[v] = r
                                    } h.attr(f),
                                        function (e, t, n) {
                                            setTimeout(function () {
                                                eve("raphael.anim.frame." + e, t, n)
                                            })
                                        }(h.id, h, i.anim)
                            } else {
                                if (function (t, n, i) {
                                    setTimeout(function () {
                                        eve("raphael.anim.frame." + n.id, n, i), eve("raphael.anim.finish." + n.id, n, i), e.is(t, "function") && t.call(n)
                                    })
                                }(i.callback, h, i.anim), h.attr(d), at.splice(n--, 1), i.repeat > 1 && !i.next) {
                                    for (a in d) d[k](a) && (p[a] = i.totalOrigin[a]);
                                    i.el.attr(p), g(i.anim, i.el, i.anim.percents[0], null, i.totalOrigin, i.repeat - 1)
                                }
                                i.next && !i.stop && g(i.anim, i.el, i.next, null, i.totalOrigin, i.repeat)
                            }
                    }
                }
                e.svg && h && h.paper && h.paper.safari(), at.length && ot(st)
            },
            lt = function (e) {
                return e > 255 ? 255 : 0 > e ? 0 : e
            };
        Xe.animateWith = function (t, n, i, r, a, o) {
            var s = this;
            if (s.removed) return o && o.call(s), s;
            var l = i instanceof m ? i : e.animation(i, r, a, o);
            g(l, s, l.percents[0], null, s.attr());
            for (var c = 0, u = at.length; u > c; c++)
                if (at[c].anim == n && at[c].el == t) {
                    at[u - 1].start = at[c].start;
                    break
                } return s
        }, Xe.onAnimation = function (e) {
            return e ? eve.on("raphael.anim.frame." + this.id, e) : eve.unbind("raphael.anim.frame." + this.id), this
        }, m.prototype.delay = function (e) {
            var t = new m(this.anim, this.ms);
            return t.times = this.times, t.del = +e || 0, t
        }, m.prototype.repeat = function (e) {
            var t = new m(this.anim, this.ms);
            return t.del = this.del, t.times = j.floor(N(e, 0)) || 1, t
        }, e.animation = function (t, n, i, r) {
            if (t instanceof m) return t;
            (e.is(i, "function") || !i) && (r = r || i || null, i = null), t = Object(t), n = +n || 0;
            var a, o, s = {};
            for (o in t) t[k](o) && Z(o) != o && Z(o) + "%" != o && (a = !0, s[o] = t[o]);
            return a ? (i && (s.easing = i), r && (s.callback = r), new m({
                100: s
            }, n)) : new m(t, n)
        }, Xe.animate = function (t, n, i, r) {
            var a = this;
            if (a.removed) return r && r.call(a), a;
            var o = t instanceof m ? t : e.animation(t, n, i, r);
            return g(o, a, o.percents[0], null, a.attr()), a
        }, Xe.setTime = function (e, t) {
            return e && null != t && this.status(e, z(t, e.ms) / e.ms), this
        }, Xe.status = function (e, t) {
            var n, i, r = [],
                a = 0;
            if (null != t) return g(e, this, -1, z(t, 1)), this;
            for (n = at.length; n > a; a++)
                if (i = at[a], i.el.id == this.id && (!e || i.anim == e)) {
                    if (e) return i.status;
                    r.push({
                        anim: i.anim,
                        status: i.status
                    })
                } return e ? 0 : r
        }, Xe.pause = function (e) {
            for (var t = 0; t < at.length; t++) at[t].el.id != this.id || e && at[t].anim != e || eve("raphael.anim.pause." + this.id, this, at[t].anim) !== !1 && (at[t].paused = !0);
            return this
        }, Xe.resume = function (e) {
            for (var t = 0; t < at.length; t++)
                if (at[t].el.id == this.id && (!e || at[t].anim == e)) {
                    var n = at[t];
                    eve("raphael.anim.resume." + this.id, this, n.anim) !== !1 && (delete n.paused, this.status(n.anim, n.status))
                } return this
        }, Xe.stop = function (e) {
            for (var t = 0; t < at.length; t++) at[t].el.id != this.id || e && at[t].anim != e || eve("raphael.anim.stop." + this.id, this, at[t].anim) !== !1 && at.splice(t--, 1);
            return this
        }, eve.on("raphael.remove", v), eve.on("raphael.clear", v), Xe.toString = function () {
            return "Rapha\xebl\u2019s object"
        };
        var ct = function (e) {
            if (this.items = [], this.length = 0, this.type = "set", e)
                for (var t = 0, n = e.length; n > t; t++) !e[t] || e[t].constructor != Xe.constructor && e[t].constructor != ct || (this[this.items.length] = this.items[this.items.length] = e[t], this.length++)
        },
            ut = ct.prototype;
        ut.push = function () {
            for (var e, t, n = 0, i = arguments.length; i > n; n++) e = arguments[n], !e || e.constructor != Xe.constructor && e.constructor != ct || (t = this.items.length, this[t] = this.items[t] = e, this.length++);
            return this
        }, ut.pop = function () {
            return this.length && delete this[this.length--], this.items.pop()
        }, ut.forEach = function (e, t) {
            for (var n = 0, i = this.items.length; i > n; n++)
                if (e.call(t, this.items[n], n) === !1) return this;
            return this
        };
        for (var dt in Xe) Xe[k](dt) && (ut[dt] = function (e) {
            return function () {
                var t = arguments;
                return this.forEach(function (n) {
                    n[e][T](n, t)
                })
            }
        }(dt));
        ut.attr = function (t, n) {
            if (t && e.is(t, q) && e.is(t[0], "object"))
                for (var i = 0, r = t.length; r > i; i++) this.items[i].attr(t[i]);
            else
                for (var a = 0, o = this.items.length; o > a; a++) this.items[a].attr(t, n);
            return this
        }, ut.clear = function () {
            for (; this.length;) this.pop()
        }, ut.splice = function (e, t, n) {
            e = 0 > e ? N(this.length + e, 0) : e, t = N(0, z(this.length - e, t));
            var i, r = [],
                a = [],
                o = [];
            for (i = 2; i < arguments.length; i++) o.push(arguments[i]);
            for (i = 0; t > i; i++) a.push(this[e + i]);
            for (; i < this.length - e; i++) r.push(this[e + i]);
            var s = o.length;
            for (i = 0; i < s + r.length; i++) this.items[e + i] = this[e + i] = s > i ? o[i] : r[i - s];
            for (i = this.items.length = this.length -= t - s; this[i];) delete this[i++];
            return new ct(a)
        }, ut.exclude = function (e) {
            for (var t = 0, n = this.length; n > t; t++)
                if (this[t] == e) return this.splice(t, 1), !0
        }, ut.animate = function (t, n, i, r) {
            (e.is(i, "function") || !i) && (r = i || null);
            var a, o, s = this.items.length,
                l = s,
                c = this;
            if (!s) return this;
            r && (o = function () {
                !--s && r.call(c)
            }), i = e.is(i, U) ? i : o;
            var u = e.animation(t, n, i, o);
            for (a = this.items[--l].animate(u); l--;) this.items[l] && !this.items[l].removed && this.items[l].animateWith(a, u, u);
            return this
        }, ut.insertAfter = function (e) {
            for (var t = this.items.length; t--;) this.items[t].insertAfter(e);
            return this
        }, ut.getBBox = function () {
            for (var e = [], t = [], n = [], i = [], r = this.items.length; r--;)
                if (!this.items[r].removed) {
                    var a = this.items[r].getBBox();
                    e.push(a.x), t.push(a.y), n.push(a.x + a.width), i.push(a.y + a.height)
                } return e = z[T](0, e), t = z[T](0, t), n = N[T](0, n), i = N[T](0, i), {
                    x: e,
                    y: t,
                    x2: n,
                    y2: i,
                    width: n - e,
                    height: i - t
                }
        }, ut.clone = function (e) {
            e = new ct;
            for (var t = 0, n = this.items.length; n > t; t++) e.push(this.items[t].clone());
            return e
        }, ut.toString = function () {
            return "Rapha\xebl\u2018s set"
        }, e.registerFont = function (e) {
            if (!e.face) return e;
            this.fonts = this.fonts || {};
            var t = {
                w: e.w,
                face: {},
                glyphs: {}
            },
                n = e.face["font-family"];
            for (var i in e.face) e.face[k](i) && (t.face[i] = e.face[i]);
            if (this.fonts[n] ? this.fonts[n].push(t) : this.fonts[n] = [t], !e.svg) {
                t.face["units-per-em"] = Q(e.face["units-per-em"], 10);
                for (var r in e.glyphs)
                    if (e.glyphs[k](r)) {
                        var a = e.glyphs[r];
                        if (t.glyphs[r] = {
                            w: a.w,
                            k: {},
                            d: a.d && "M" + a.d.replace(/[mlcxtrv]/g, function (e) {
                                return {
                                    l: "L",
                                    c: "C",
                                    x: "z",
                                    t: "m",
                                    r: "l",
                                    v: "c"
                                }[e] || "M"
                            }) + "z"
                        }, a.k)
                            for (var o in a.k) a[k](o) && (t.glyphs[r].k[o] = a.k[o])
                    }
            }
            return e
        }, b.getFont = function (t, n, i, r) {
            if (r = r || "normal", i = i || "normal", n = +n || {
                normal: 400,
                bold: 700,
                lighter: 300,
                bolder: 800
            }[n] || 400, e.fonts) {
                var a = e.fonts[t];
                if (!a) {
                    var o = new RegExp("(^|\\s)" + t.replace(/[^\w\d\s+!~.:_-]/g, $) + "(\\s|$)", "i");
                    for (var s in e.fonts)
                        if (e.fonts[k](s) && o.test(s)) {
                            a = e.fonts[s];
                            break
                        }
                }
                var l;
                if (a)
                    for (var c = 0, u = a.length; u > c && (l = a[c], l.face["font-weight"] != n || l.face["font-style"] != i && l.face["font-style"] || l.face["font-stretch"] != r); c++);
                return l
            }
        }, b.print = function (t, n, i, r, a, o, s) {
            o = o || "middle", s = N(z(s || 0, 1), -1);
            var l, c = R(i)[I]($),
                u = 0,
                d = 0,
                h = $;
            if (e.is(r, i) && (r = this.getFont(r)), r) {
                l = (a || 16) / r.face["units-per-em"];
                for (var f = r.face.bbox[I](w), p = +f[0], m = f[3] - f[1], g = 0, v = +f[1] + ("baseline" == o ? m + +r.face.descent : m / 2), y = 0, b = c.length; b > y; y++) {
                    if ("\n" == c[y]) u = 0, x = 0, d = 0, g += m;
                    else {
                        var _ = d && r.glyphs[c[y - 1]] || {},
                            x = r.glyphs[c[y]];
                        u += d ? (_.w || r.w) + (_.k && _.k[c[y]] || 0) + r.w * s : 0, d = 1
                    }
                    x && x.d && (h += e.transformPath(x.d, ["t", u * l, g * l, "s", l, l, p, v, "t", (t - p) / l, (n - v) / l]))
                }
            }
            return this.path(h).attr({
                fill: "#000",
                stroke: "none"
            })
        }, b.add = function (t) {
            if (e.is(t, "array"))
                for (var n, i = this.set(), r = 0, a = t.length; a > r; r++) n = t[r] || {}, _[k](n.type) && i.push(this[n.type]().attr(n));
            return i
        }, e.format = function (t, n) {
            var i = e.is(n, q) ? [0][E](n) : arguments;
            return t && e.is(t, U) && i.length - 1 && (t = t.replace(x, function (e, t) {
                return null == i[++t] ? $ : i[t]
            })), t || $
        }, e.fullfill = function () {
            var e = /\{([^\}]+)\}/g,
                t = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,
                n = function (e, n, i) {
                    var r = i;
                    return n.replace(t, function (e, t, n, i, a) {
                        t = t || i, r && (t in r && (r = r[t]), "function" == typeof r && a && (r = r()))
                    }), r = (null == r || r == i ? e : r) + ""
                };
            return function (t, i) {
                return String(t).replace(e, function (e, t) {
                    return n(e, t, i)
                })
            }
        }(), e.ninja = function () {
            return S.was ? C.win.Raphael = S.is : delete Raphael, e
        }, e.st = ut,
            function (t, n, i) {
                function r() {
                    /in/.test(t.readyState) ? setTimeout(r, 9) : e.eve("raphael.DOMload")
                }
                null == t.readyState && t.addEventListener && (t.addEventListener(n, i = function () {
                    t.removeEventListener(n, i, !1), t.readyState = "complete"
                }, !1), t.readyState = "loading"), r()
            }(document, "DOMContentLoaded"), S.was ? C.win.Raphael = e : Raphael = e, eve.on("raphael.DOMload", function () {
                y = !0
            })
    }(), window.Raphael.svg && function (e) {
        var t = "hasOwnProperty",
            n = String,
            i = parseFloat,
            r = parseInt,
            a = Math,
            o = a.max,
            s = a.abs,
            l = a.pow,
            c = /[, ]+/,
            u = e.eve,
            d = "",
            h = " ",
            f = "http://www.w3.org/1999/xlink",
            p = {
                block: "M5,0 0,2.5 5,5z",
                classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",
                diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",
                open: "M6,1 1,3.5 6,6",
                oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"
            },
            m = {};
        e.toString = function () {
            return "Your browser supports SVG.\nYou are running Rapha\xebl " + this.version
        };
        var g = function (i, r) {
            if (r) {
                "string" == typeof i && (i = g(i));
                for (var a in r) r[t](a) && ("xlink:" == a.substring(0, 6) ? i.setAttributeNS(f, a.substring(6), n(r[a])) : i.setAttribute(a, n(r[a])))
            } else i = e._g.doc.createElementNS("http://www.w3.org/2000/svg", i), i.style && (i.style.webkitTapHighlightColor = "rgba(0,0,0,0)");
            return i
        },
            v = function (t, r) {
                var c = "linear",
                    u = t.id + r,
                    h = .5,
                    f = .5,
                    p = t.node,
                    m = t.paper,
                    v = p.style,
                    y = e._g.doc.getElementById(u);
                if (!y) {
                    if (r = n(r).replace(e._radial_gradient, function (e, t, n) {
                        if (c = "radial", t && n) {
                            h = i(t), f = i(n);
                            var r = 2 * (f > .5) - 1;
                            l(h - .5, 2) + l(f - .5, 2) > .25 && (f = a.sqrt(.25 - l(h - .5, 2)) * r + .5) && .5 != f && (f = f.toFixed(5) - 1e-5 * r)
                        }
                        return d
                    }), r = r.split(/\s*\-\s*/), "linear" == c) {
                        var b = r.shift();
                        if (b = -i(b), isNaN(b)) return null;
                        var w = [0, 0, a.cos(e.rad(b)), a.sin(e.rad(b))],
                            _ = 1 / (o(s(w[2]), s(w[3])) || 1);
                        w[2] *= _, w[3] *= _, w[2] < 0 && (w[0] = -w[2], w[2] = 0), w[3] < 0 && (w[1] = -w[3], w[3] = 0)
                    }
                    var x = e._parseDots(r);
                    if (!x) return null;
                    if (u = u.replace(/[\(\)\s,\xb0#]/g, "_"), t.gradient && u != t.gradient.id && (m.defs.removeChild(t.gradient), delete t.gradient), !t.gradient) {
                        y = g(c + "Gradient", {
                            id: u
                        }), t.gradient = y, g(y, "radial" == c ? {
                            fx: h,
                            fy: f
                        } : {
                            x1: w[0],
                            y1: w[1],
                            x2: w[2],
                            y2: w[3],
                            gradientTransform: t.matrix.invert()
                        }), m.defs.appendChild(y);
                        for (var k = 0, C = x.length; C > k; k++) y.appendChild(g("stop", {
                            offset: x[k].offset ? x[k].offset : k ? "100%" : "0%",
                            "stop-color": x[k].color || "#fff"
                        }))
                    }
                }
                return g(p, {
                    fill: "url(#" + u + ")",
                    opacity: 1,
                    "fill-opacity": 1
                }), v.fill = d, v.opacity = 1, v.fillOpacity = 1, 1
            },
            y = function (e) {
                var t = e.getBBox(1);
                g(e.pattern, {
                    patternTransform: e.matrix.invert() + " translate(" + t.x + "," + t.y + ")"
                })
            },
            b = function (i, r, a) {
                if ("path" == i.type) {
                    for (var o, s, l, c, u, h = n(r).toLowerCase().split("-"), f = i.paper, v = a ? "end" : "start", y = i.node, b = i.attrs, w = b["stroke-width"], _ = h.length, x = "classic", k = 3, C = 3, S = 5; _--;) switch (h[_]) {
                        case "block":
                        case "classic":
                        case "oval":
                        case "diamond":
                        case "open":
                        case "none":
                            x = h[_];
                            break;
                        case "wide":
                            C = 5;
                            break;
                        case "narrow":
                            C = 2;
                            break;
                        case "long":
                            k = 5;
                            break;
                        case "short":
                            k = 2
                    }
                    if ("open" == x ? (k += 2, C += 2, S += 2, l = 1, c = a ? 4 : 1, u = {
                        fill: "none",
                        stroke: b.stroke
                    }) : (c = l = k / 2, u = {
                        fill: b.stroke,
                        stroke: "none"
                    }), i._.arrows ? a ? (i._.arrows.endPath && m[i._.arrows.endPath]--, i._.arrows.endMarker && m[i._.arrows.endMarker]--) : (i._.arrows.startPath && m[i._.arrows.startPath]--, i._.arrows.startMarker && m[i._.arrows.startMarker]--) : i._.arrows = {}, "none" != x) {
                        var A = "raphael-marker-" + x,
                            T = "raphael-marker-" + v + x + k + C;
                        e._g.doc.getElementById(A) ? m[A]++ : (f.defs.appendChild(g(g("path"), {
                            "stroke-linecap": "round",
                            d: p[x],
                            id: A
                        })), m[A] = 1);
                        var E, D = e._g.doc.getElementById(T);
                        D ? (m[T]++, E = D.getElementsByTagName("use")[0]) : (D = g(g("marker"), {
                            id: T,
                            markerHeight: C,
                            markerWidth: k,
                            orient: "auto",
                            refX: c,
                            refY: C / 2
                        }), E = g(g("use"), {
                            "xlink:href": "#" + A,
                            transform: (a ? "rotate(180 " + k / 2 + " " + C / 2 + ") " : d) + "scale(" + k / S + "," + C / S + ")",
                            "stroke-width": (1 / ((k / S + C / S) / 2)).toFixed(4)
                        }), D.appendChild(E), f.defs.appendChild(D), m[T] = 1), g(E, u);
                        var $ = l * ("diamond" != x && "oval" != x);
                        a ? (o = i._.arrows.startdx * w || 0, s = e.getTotalLength(b.path) - $ * w) : (o = $ * w, s = e.getTotalLength(b.path) - (i._.arrows.enddx * w || 0)), u = {}, u["marker-" + v] = "url(#" + T + ")", (s || o) && (u.d = Raphael.getSubpath(b.path, o, s)), g(y, u), i._.arrows[v + "Path"] = A, i._.arrows[v + "Marker"] = T, i._.arrows[v + "dx"] = $, i._.arrows[v + "Type"] = x, i._.arrows[v + "String"] = r
                    } else a ? (o = i._.arrows.startdx * w || 0, s = e.getTotalLength(b.path) - o) : (o = 0, s = e.getTotalLength(b.path) - (i._.arrows.enddx * w || 0)), i._.arrows[v + "Path"] && g(y, {
                        d: Raphael.getSubpath(b.path, o, s)
                    }), delete i._.arrows[v + "Path"], delete i._.arrows[v + "Marker"], delete i._.arrows[v + "dx"], delete i._.arrows[v + "Type"], delete i._.arrows[v + "String"];
                    for (u in m)
                        if (m[t](u) && !m[u]) {
                            var M = e._g.doc.getElementById(u);
                            M && M.parentNode.removeChild(M)
                        }
                }
            },
            w = {
                "": [0],
                none: [0],
                "-": [3, 1],
                ".": [1, 1],
                "-.": [3, 1, 1, 1],
                "-..": [3, 1, 1, 1, 1, 1],
                ". ": [1, 3],
                "- ": [4, 3],
                "--": [8, 3],
                "- .": [4, 3, 1, 3],
                "--.": [8, 3, 1, 3],
                "--..": [8, 3, 1, 3, 1, 3]
            },
            _ = function (e, t, i) {
                if (t = w[n(t).toLowerCase()]) {
                    for (var r = e.attrs["stroke-width"] || "1", a = {
                        round: r,
                        square: r,
                        butt: 0
                    }[e.attrs["stroke-linecap"] || i["stroke-linecap"]] || 0, o = [], s = t.length; s--;) o[s] = t[s] * r + (s % 2 ? 1 : -1) * a;
                    g(e.node, {
                        "stroke-dasharray": o.join(",")
                    })
                }
            },
            x = function (i, a) {
                var l = i.node,
                    u = i.attrs,
                    h = l.style.visibility;
                l.style.visibility = "hidden";
                for (var p in a)
                    if (a[t](p)) {
                        if (!e._availableAttrs[t](p)) continue;
                        var m = a[p];
                        switch (u[p] = m, p) {
                            case "blur":
                                i.blur(m);
                                break;
                            case "href":
                            case "title":
                            case "target":
                                var w = l.parentNode;
                                if ("a" != w.tagName.toLowerCase()) {
                                    var x = g("a");
                                    w.insertBefore(x, l), x.appendChild(l), w = x
                                }
                                "target" == p ? w.setAttributeNS(f, "show", "blank" == m ? "new" : m) : w.setAttributeNS(f, p, m);
                                break;
                            case "cursor":
                                l.style.cursor = m;
                                break;
                            case "transform":
                                i.transform(m);
                                break;
                            case "arrow-start":
                                b(i, m);
                                break;
                            case "arrow-end":
                                b(i, m, 1);
                                break;
                            case "clip-rect":
                                var k = n(m).split(c);
                                if (4 == k.length) {
                                    i.clip && i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);
                                    var S = g("clipPath"),
                                        A = g("rect");
                                    S.id = e.createUUID(), g(A, {
                                        x: k[0],
                                        y: k[1],
                                        width: k[2],
                                        height: k[3]
                                    }), S.appendChild(A), i.paper.defs.appendChild(S), g(l, {
                                        "clip-path": "url(#" + S.id + ")"
                                    }), i.clip = A
                                }
                                if (!m) {
                                    var T = l.getAttribute("clip-path");
                                    if (T) {
                                        var E = e._g.doc.getElementById(T.replace(/(^url\(#|\)$)/g, d));
                                        E && E.parentNode.removeChild(E), g(l, {
                                            "clip-path": d
                                        }), delete i.clip
                                    }
                                }
                                break;
                            case "path":
                                "path" == i.type && (g(l, {
                                    d: m ? u.path = e._pathToAbsolute(m) : "M0,0"
                                }), i._.dirty = 1, i._.arrows && ("startString" in i._.arrows && b(i, i._.arrows.startString), "endString" in i._.arrows && b(i, i._.arrows.endString, 1)));
                                break;
                            case "width":
                                if (l.setAttribute(p, m), i._.dirty = 1, !u.fx) break;
                                p = "x", m = u.x;
                            case "x":
                                u.fx && (m = -u.x - (u.width || 0));
                            case "rx":
                                if ("rx" == p && "rect" == i.type) break;
                            case "cx":
                                l.setAttribute(p, m), i.pattern && y(i), i._.dirty = 1;
                                break;
                            case "height":
                                if (l.setAttribute(p, m), i._.dirty = 1, !u.fy) break;
                                p = "y", m = u.y;
                            case "y":
                                u.fy && (m = -u.y - (u.height || 0));
                            case "ry":
                                if ("ry" == p && "rect" == i.type) break;
                            case "cy":
                                l.setAttribute(p, m), i.pattern && y(i), i._.dirty = 1;
                                break;
                            case "r":
                                "rect" == i.type ? g(l, {
                                    rx: m,
                                    ry: m
                                }) : l.setAttribute(p, m), i._.dirty = 1;
                                break;
                            case "src":
                                "image" == i.type && l.setAttributeNS(f, "href", m);
                                break;
                            case "stroke-width":
                                (1 != i._.sx || 1 != i._.sy) && (m /= o(s(i._.sx), s(i._.sy)) || 1), i.paper._vbSize && (m *= i.paper._vbSize), l.setAttribute(p, m), u["stroke-dasharray"] && _(i, u["stroke-dasharray"], a), i._.arrows && ("startString" in i._.arrows && b(i, i._.arrows.startString), "endString" in i._.arrows && b(i, i._.arrows.endString, 1));
                                break;
                            case "stroke-dasharray":
                                _(i, m, a);
                                break;
                            case "fill":
                                var D = n(m).match(e._ISURL);
                                if (D) {
                                    S = g("pattern");
                                    var $ = g("image");
                                    S.id = e.createUUID(), g(S, {
                                        x: 0,
                                        y: 0,
                                        patternUnits: "userSpaceOnUse",
                                        height: 1,
                                        width: 1
                                    }), g($, {
                                        x: 0,
                                        y: 0,
                                        "xlink:href": D[1]
                                    }), S.appendChild($),
                                        function (t) {
                                            e._preload(D[1], function () {
                                                var e = this.offsetWidth,
                                                    n = this.offsetHeight;
                                                g(t, {
                                                    width: e,
                                                    height: n
                                                }), g($, {
                                                    width: e,
                                                    height: n
                                                }), i.paper.safari()
                                            })
                                        }(S), i.paper.defs.appendChild(S), g(l, {
                                            fill: "url(#" + S.id + ")"
                                        }), i.pattern = S, i.pattern && y(i);
                                    break
                                }
                                var M = e.getRGB(m);
                                if (M.error) {
                                    if (("circle" == i.type || "ellipse" == i.type || "r" != n(m).charAt()) && v(i, m)) {
                                        if ("opacity" in u || "fill-opacity" in u) {
                                            var R = e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, d));
                                            if (R) {
                                                var I = R.getElementsByTagName("stop");
                                                g(I[I.length - 1], {
                                                    "stop-opacity": ("opacity" in u ? u.opacity : 1) * ("fill-opacity" in u ? u["fill-opacity"] : 1)
                                                })
                                            }
                                        }
                                        u.gradient = m, u.fill = "none";
                                        break
                                    }
                                } else delete a.gradient, delete u.gradient, !e.is(u.opacity, "undefined") && e.is(a.opacity, "undefined") && g(l, {
                                    opacity: u.opacity
                                }), !e.is(u["fill-opacity"], "undefined") && e.is(a["fill-opacity"], "undefined") && g(l, {
                                    "fill-opacity": u["fill-opacity"]
                                });
                                M[t]("opacity") && g(l, {
                                    "fill-opacity": M.opacity > 1 ? M.opacity / 100 : M.opacity
                                });
                            case "stroke":
                                M = e.getRGB(m), l.setAttribute(p, M.hex), "stroke" == p && M[t]("opacity") && g(l, {
                                    "stroke-opacity": M.opacity > 1 ? M.opacity / 100 : M.opacity
                                }), "stroke" == p && i._.arrows && ("startString" in i._.arrows && b(i, i._.arrows.startString), "endString" in i._.arrows && b(i, i._.arrows.endString, 1));
                                break;
                            case "gradient":
                                ("circle" == i.type || "ellipse" == i.type || "r" != n(m).charAt()) && v(i, m);
                                break;
                            case "opacity":
                                u.gradient && !u[t]("stroke-opacity") && g(l, {
                                    "stroke-opacity": m > 1 ? m / 100 : m
                                });
                            case "fill-opacity":
                                if (u.gradient) {
                                    R = e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g, d)), R && (I = R.getElementsByTagName("stop"), g(I[I.length - 1], {
                                        "stop-opacity": m
                                    }));
                                    break
                                }
                            default:
                                "font-size" == p && (m = r(m, 10) + "px");
                                var P = p.replace(/(\-.)/g, function (e) {
                                    return e.substring(1).toUpperCase()
                                });
                                l.style[P] = m, i._.dirty = 1, l.setAttribute(p, m)
                        }
                    } C(i, a), l.style.visibility = h
            },
            k = 1.2,
            C = function (i, a) {
                if ("text" == i.type && (a[t]("text") || a[t]("font") || a[t]("font-size") || a[t]("x") || a[t]("y"))) {
                    var o = i.attrs,
                        s = i.node,
                        l = s.firstChild ? r(e._g.doc.defaultView.getComputedStyle(s.firstChild, d).getPropertyValue("font-size"), 10) : 10;
                    if (a[t]("text")) {
                        for (o.text = a.text; s.firstChild;) s.removeChild(s.firstChild);
                        for (var c, u = n(a.text).split("\n"), h = [], f = 0, p = u.length; p > f; f++) c = g("tspan"), f && g(c, {
                            dy: l * k,
                            x: o.x
                        }), c.appendChild(e._g.doc.createTextNode(u[f])), s.appendChild(c), h[f] = c
                    } else
                        for (h = s.getElementsByTagName("tspan"), f = 0, p = h.length; p > f; f++) f ? g(h[f], {
                            dy: l * k,
                            x: o.x
                        }) : g(h[0], {
                            dy: 0
                        });
                    g(s, {
                        x: o.x,
                        y: o.y
                    }), i._.dirty = 1;
                    var m = i._getBBox(),
                        v = o.y - (m.y + m.height / 2);
                    v && e.is(v, "finite") && g(h[0], {
                        dy: v
                    })
                }
            },
            S = function (t, n) {
                this[0] = this.node = t, t.raphael = !0, this.id = e._oid++, t.raphaelid = this.id, this.matrix = e.matrix(), this.realPath = null, this.paper = n, this.attrs = this.attrs || {}, this._ = {
                    transform: [],
                    sx: 1,
                    sy: 1,
                    deg: 0,
                    dx: 0,
                    dy: 0,
                    dirty: 1
                }, !n.bottom && (n.bottom = this), this.prev = n.top, n.top && (n.top.next = this), n.top = this, this.next = null
            },
            A = e.el;
        S.prototype = A, A.constructor = S, e._engine.path = function (e, t) {
            var n = g("path");
            t.canvas && t.canvas.appendChild(n);
            var i = new S(n, t);
            return i.type = "path", x(i, {
                fill: "none",
                stroke: "#000",
                path: e
            }), i
        }, A.rotate = function (e, t, r) {
            if (this.removed) return this;
            if (e = n(e).split(c), e.length - 1 && (t = i(e[1]), r = i(e[2])), e = i(e[0]), null == r && (t = r), null == t || null == r) {
                var a = this.getBBox(1);
                t = a.x + a.width / 2, r = a.y + a.height / 2
            }
            return this.transform(this._.transform.concat([
                ["r", e, t, r]
            ])), this
        }, A.scale = function (e, t, r, a) {
            if (this.removed) return this;
            if (e = n(e).split(c), e.length - 1 && (t = i(e[1]), r = i(e[2]), a = i(e[3])), e = i(e[0]), null == t && (t = e), null == a && (r = a), null == r || null == a) var o = this.getBBox(1);
            return r = null == r ? o.x + o.width / 2 : r, a = null == a ? o.y + o.height / 2 : a, this.transform(this._.transform.concat([
                ["s", e, t, r, a]
            ])), this
        }, A.translate = function (e, t) {
            return this.removed ? this : (e = n(e).split(c), e.length - 1 && (t = i(e[1])), e = i(e[0]) || 0, t = +t || 0, this.transform(this._.transform.concat([
                ["t", e, t]
            ])), this)
        }, A.transform = function (n) {
            var i = this._;
            if (null == n) return i.transform;
            if (e._extractTransform(this, n), this.clip && g(this.clip, {
                transform: this.matrix.invert()
            }), this.pattern && y(this), this.node && g(this.node, {
                transform: this.matrix
            }), 1 != i.sx || 1 != i.sy) {
                var r = this.attrs[t]("stroke-width") ? this.attrs["stroke-width"] : 1;
                this.attr({
                    "stroke-width": r
                })
            }
            return this
        }, A.hide = function () {
            return !this.removed && this.paper.safari(this.node.style.display = "none"), this
        }, A.show = function () {
            return !this.removed && this.paper.safari(this.node.style.display = ""), this
        }, A.remove = function () {
            if (!this.removed && this.node.parentNode) {
                var t = this.paper;
                t.__set__ && t.__set__.exclude(this), u.unbind("raphael.*.*." + this.id), this.gradient && t.defs.removeChild(this.gradient), e._tear(this, t), "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.removeChild(this.node.parentNode) : this.node.parentNode.removeChild(this.node);
                for (var n in this) this[n] = "function" == typeof this[n] ? e._removedFactory(n) : null;
                this.removed = !0
            }
        }, A._getBBox = function () {
            if ("none" == this.node.style.display) {
                this.show();
                var e = !0
            }
            var t = {};
            try {
                t = this.node.getBBox()
            } catch (n) { } finally {
                t = t || {}
            }
            return e && this.hide(), t
        }, A.attr = function (n, i) {
            if (this.removed) return this;
            if (null == n) {
                var r = {};
                for (var a in this.attrs) this.attrs[t](a) && (r[a] = this.attrs[a]);
                return r.gradient && "none" == r.fill && (r.fill = r.gradient) && delete r.gradient, r.transform = this._.transform, r
            }
            if (null == i && e.is(n, "string")) {
                if ("fill" == n && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient;
                if ("transform" == n) return this._.transform;
                for (var o = n.split(c), s = {}, l = 0, d = o.length; d > l; l++) n = o[l], n in this.attrs ? s[n] = this.attrs[n] : e.is(this.paper.customAttributes[n], "function") ? s[n] = this.paper.customAttributes[n].def : s[n] = e._availableAttrs[n];
                return d - 1 ? s : s[o[0]]
            }
            if (null == i && e.is(n, "array")) {
                for (s = {}, l = 0, d = n.length; d > l; l++) s[n[l]] = this.attr(n[l]);
                return s
            }
            if (null != i) {
                var h = {};
                h[n] = i
            } else null != n && e.is(n, "object") && (h = n);
            for (var f in h) u("raphael.attr." + f + "." + this.id, this, h[f]);
            for (f in this.paper.customAttributes)
                if (this.paper.customAttributes[t](f) && h[t](f) && e.is(this.paper.customAttributes[f], "function")) {
                    var p = this.paper.customAttributes[f].apply(this, [].concat(h[f]));
                    this.attrs[f] = h[f];
                    for (var m in p) p[t](m) && (h[m] = p[m])
                } return x(this, h), this
        }, A.toFront = function () {
            if (this.removed) return this;
            "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.appendChild(this.node.parentNode) : this.node.parentNode.appendChild(this.node);
            var t = this.paper;
            return t.top != this && e._tofront(this, t), this
        }, A.toBack = function () {
            if (this.removed) return this;
            var t = this.node.parentNode;
            "a" == t.tagName.toLowerCase() ? t.parentNode.insertBefore(this.node.parentNode, this.node.parentNode.parentNode.firstChild) : t.firstChild != this.node && t.insertBefore(this.node, this.node.parentNode.firstChild), e._toback(this, this.paper);
            this.paper;
            return this
        }, A.insertAfter = function (t) {
            if (this.removed) return this;
            var n = t.node || t[t.length - 1].node;
            return n.nextSibling ? n.parentNode.insertBefore(this.node, n.nextSibling) : n.parentNode.appendChild(this.node), e._insertafter(this, t, this.paper), this
        }, A.insertBefore = function (t) {
            if (this.removed) return this;
            var n = t.node || t[0].node;
            return n.parentNode.insertBefore(this.node, n), e._insertbefore(this, t, this.paper), this
        }, A.blur = function (t) {
            var n = this;
            if (0 !== +t) {
                var i = g("filter"),
                    r = g("feGaussianBlur");
                n.attrs.blur = t, i.id = e.createUUID(), g(r, {
                    stdDeviation: +t || 1.5
                }), i.appendChild(r), n.paper.defs.appendChild(i), n._blur = i, g(n.node, {
                    filter: "url(#" + i.id + ")"
                })
            } else n._blur && (n._blur.parentNode.removeChild(n._blur), delete n._blur, delete n.attrs.blur), n.node.removeAttribute("filter")
        }, e._engine.circle = function (e, t, n, i) {
            var r = g("circle");
            e.canvas && e.canvas.appendChild(r);
            var a = new S(r, e);
            return a.attrs = {
                cx: t,
                cy: n,
                r: i,
                fill: "none",
                stroke: "#000"
            }, a.type = "circle", g(r, a.attrs), a
        }, e._engine.rect = function (e, t, n, i, r, a) {
            var o = g("rect");
            e.canvas && e.canvas.appendChild(o);
            var s = new S(o, e);
            return s.attrs = {
                x: t,
                y: n,
                width: i,
                height: r,
                r: a || 0,
                rx: a || 0,
                ry: a || 0,
                fill: "none",
                stroke: "#000"
            }, s.type = "rect", g(o, s.attrs), s
        }, e._engine.ellipse = function (e, t, n, i, r) {
            var a = g("ellipse");
            e.canvas && e.canvas.appendChild(a);
            var o = new S(a, e);
            return o.attrs = {
                cx: t,
                cy: n,
                rx: i,
                ry: r,
                fill: "none",
                stroke: "#000"
            }, o.type = "ellipse", g(a, o.attrs), o
        }, e._engine.image = function (e, t, n, i, r, a) {
            var o = g("image");
            g(o, {
                x: n,
                y: i,
                width: r,
                height: a,
                preserveAspectRatio: "none"
            }), o.setAttributeNS(f, "href", t), e.canvas && e.canvas.appendChild(o);
            var s = new S(o, e);
            return s.attrs = {
                x: n,
                y: i,
                width: r,
                height: a,
                src: t
            }, s.type = "image", s
        }, e._engine.text = function (t, n, i, r) {
            var a = g("text");
            t.canvas && t.canvas.appendChild(a);
            var o = new S(a, t);
            return o.attrs = {
                x: n,
                y: i,
                "text-anchor": "middle",
                text: r,
                font: e._availableAttrs.font,
                stroke: "none",
                fill: "#000"
            }, o.type = "text", x(o, o.attrs), o
        }, e._engine.setSize = function (e, t) {
            return this.width = e || this.width, this.height = t || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this
        }, e._engine.create = function () {
            var t = e._getContainer.apply(0, arguments),
                n = t && t.container,
                i = t.x,
                r = t.y,
                a = t.width,
                o = t.height;
            if (!n) throw new Error("SVG container not found.");
            var s, l = g("svg"),
                c = "overflow:hidden;";
            return i = i || 0, r = r || 0, a = a || 512, o = o || 342, g(l, {
                height: o,
                version: 1.1,
                width: a,
                xmlns: "http://www.w3.org/2000/svg"
            }), 1 == n ? (l.style.cssText = c + "position:absolute;left:" + i + "px;top:" + r + "px", e._g.doc.body.appendChild(l), s = 1) : (l.style.cssText = c + "position:relative", n.firstChild ? n.insertBefore(l, n.firstChild) : n.appendChild(l)), n = new e._Paper, n.width = a, n.height = o, n.canvas = l, n.clear(), n._left = n._top = 0, s && (n.renderfix = function () { }), n.renderfix(), n
        }, e._engine.setViewBox = function (e, t, n, i, r) {
            u("raphael.setViewBox", this, this._viewBox, [e, t, n, i, r]);
            var a, s, l = o(n / this.width, i / this.height),
                c = this.top,
                d = r ? "meet" : "xMinYMin";
            for (null == e ? (this._vbSize && (l = 1), delete this._vbSize, a = "0 0 " + this.width + h + this.height) : (this._vbSize = l, a = e + h + t + h + n + h + i), g(this.canvas, {
                viewBox: a,
                preserveAspectRatio: d
            }); l && c;) s = "stroke-width" in c.attrs ? c.attrs["stroke-width"] : 1, c.attr({
                "stroke-width": s
            }), c._.dirty = 1, c._.dirtyT = 1, c = c.prev;
            return this._viewBox = [e, t, n, i, !!r], this
        }, e.prototype.renderfix = function () {
            var e, t = this.canvas,
                n = t.style;
            try {
                e = t.getScreenCTM() || t.createSVGMatrix()
            } catch (i) {
                e = t.createSVGMatrix()
            }
            var r = -e.e % 1,
                a = -e.f % 1;
            (r || a) && (r && (this._left = (this._left + r) % 1, n.left = this._left + "px"), a && (this._top = (this._top + a) % 1, n.top = this._top + "px"))
        }, e.prototype.clear = function () {
            e.eve("raphael.clear", this);
            for (var t = this.canvas; t.firstChild;) t.removeChild(t.firstChild);
            this.bottom = this.top = null, (this.desc = g("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\xebl " + e.version)), t.appendChild(this.desc), t.appendChild(this.defs = g("defs"))
        }, e.prototype.remove = function () {
            u("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);
            for (var t in this) this[t] = "function" == typeof this[t] ? e._removedFactory(t) : null
        };
        var T = e.st;
        for (var E in A) A[t](E) && !T[t](E) && (T[E] = function (e) {
            return function () {
                var t = arguments;
                return this.forEach(function (n) {
                    n[e].apply(n, t)
                })
            }
        }(E))
    }(window.Raphael), window.Raphael.vml && function (e) {
        var t = "hasOwnProperty",
            n = String,
            i = parseFloat,
            r = Math,
            a = r.round,
            o = r.max,
            s = r.min,
            l = r.abs,
            c = "fill",
            u = /[, ]+/,
            d = e.eve,
            h = " progid:DXImageTransform.Microsoft",
            f = " ",
            p = "",
            m = {
                M: "m",
                L: "l",
                C: "c",
                Z: "x",
                m: "t",
                l: "r",
                c: "v",
                z: "x"
            },
            g = /([clmz]),?([^clmz]*)/gi,
            v = / progid:\S+Blur\([^\)]+\)/g,
            y = /-?[^,\s-]+/g,
            b = "position:absolute;left:0;top:0;width:1px;height:1px",
            w = 21600,
            _ = {
                path: 1,
                rect: 1,
                image: 1
            },
            x = {
                circle: 1,
                ellipse: 1
            },
            k = function (t) {
                var i = /[ahqstv]/gi,
                    r = e._pathToAbsolute;
                if (n(t).match(i) && (r = e._path2curve), i = /[clmz]/g, r == e._pathToAbsolute && !n(t).match(i)) {
                    var o = n(t).replace(g, function (e, t, n) {
                        var i = [],
                            r = "m" == t.toLowerCase(),
                            o = m[t];
                        return n.replace(y, function (e) {
                            r && 2 == i.length && (o += i + m["m" == t ? "l" : "L"], i = []), i.push(a(e * w))
                        }), o + i
                    });
                    return o
                }
                var s, l, c = r(t);
                o = [];
                for (var u = 0, d = c.length; d > u; u++) {
                    s = c[u], l = c[u][0].toLowerCase(), "z" == l && (l = "x");
                    for (var h = 1, v = s.length; v > h; h++) l += a(s[h] * w) + (h != v - 1 ? "," : p);
                    o.push(l)
                }
                return o.join(f)
            },
            C = function (t, n, i) {
                var r = e.matrix();
                return r.rotate(-t, .5, .5), {
                    dx: r.x(n, i),
                    dy: r.y(n, i)
                }
            },
            S = function (e, t, n, i, r, a) {
                var o = e._,
                    s = e.matrix,
                    u = o.fillpos,
                    d = e.node,
                    h = d.style,
                    p = 1,
                    m = "",
                    g = w / t,
                    v = w / n;
                if (h.visibility = "hidden", t && n) {
                    if (d.coordsize = l(g) + f + l(v), h.rotation = a * (0 > t * n ? -1 : 1), a) {
                        var y = C(a, i, r);
                        i = y.dx, r = y.dy
                    }
                    if (0 > t && (m += "x"), 0 > n && (m += " y") && (p = -1), h.flip = m, d.coordorigin = i * -g + f + r * -v, u || o.fillsize) {
                        var b = d.getElementsByTagName(c);
                        b = b && b[0], d.removeChild(b), u && (y = C(a, s.x(u[0], u[1]), s.y(u[0], u[1])), b.position = y.dx * p + f + y.dy * p), o.fillsize && (b.size = o.fillsize[0] * l(t) + f + o.fillsize[1] * l(n)), d.appendChild(b)
                    }
                    h.visibility = "visible"
                }
            };
        e.toString = function () {
            return "Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl " + this.version
        };
        var A = function (e, t, i) {
            for (var r = n(t).toLowerCase().split("-"), a = i ? "end" : "start", o = r.length, s = "classic", l = "medium", c = "medium"; o--;) switch (r[o]) {
                case "block":
                case "classic":
                case "oval":
                case "diamond":
                case "open":
                case "none":
                    s = r[o];
                    break;
                case "wide":
                case "narrow":
                    c = r[o];
                    break;
                case "long":
                case "short":
                    l = r[o]
            }
            var u = e.node.getElementsByTagName("stroke")[0];
            u[a + "arrow"] = s, u[a + "arrowlength"] = l, u[a + "arrowwidth"] = c
        },
            T = function (r, l) {
                r.attrs = r.attrs || {};
                var d = r.node,
                    h = r.attrs,
                    m = d.style,
                    g = _[r.type] && (l.x != h.x || l.y != h.y || l.width != h.width || l.height != h.height || l.cx != h.cx || l.cy != h.cy || l.rx != h.rx || l.ry != h.ry || l.r != h.r),
                    v = x[r.type] && (h.cx != l.cx || h.cy != l.cy || h.r != l.r || h.rx != l.rx || h.ry != l.ry),
                    y = r;
                for (var b in l) l[t](b) && (h[b] = l[b]);
                if (g && (h.path = e._getPath[r.type](r), r._.dirty = 1), l.href && (d.href = l.href), l.title && (d.title = l.title), l.target && (d.target = l.target), l.cursor && (m.cursor = l.cursor), "blur" in l && r.blur(l.blur), (l.path && "path" == r.type || g) && (d.path = k(~n(h.path).toLowerCase().indexOf("r") ? e._pathToAbsolute(h.path) : h.path), "image" == r.type && (r._.fillpos = [h.x, h.y], r._.fillsize = [h.width, h.height], S(r, 1, 1, 0, 0, 0))), "transform" in l && r.transform(l.transform), v) {
                    var C = +h.cx,
                        T = +h.cy,
                        D = +h.rx || +h.r || 0,
                        $ = +h.ry || +h.r || 0;
                    d.path = e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", a((C - D) * w), a((T - $) * w), a((C + D) * w), a((T + $) * w), a(C * w))
                }
                if ("clip-rect" in l) {
                    var R = n(l["clip-rect"]).split(u);
                    if (4 == R.length) {
                        R[2] = +R[2] + +R[0], R[3] = +R[3] + +R[1];
                        var I = d.clipRect || e._g.doc.createElement("div"),
                            P = I.style;
                        P.clip = e.format("rect({1}px {2}px {3}px {0}px)", R), d.clipRect || (P.position = "absolute", P.top = 0, P.left = 0, P.width = r.paper.width + "px", P.height = r.paper.height + "px", d.parentNode.insertBefore(I, d), I.appendChild(d), d.clipRect = I)
                    }
                    l["clip-rect"] || d.clipRect && (d.clipRect.style.clip = "auto")
                }
                if (r.textpath) {
                    var H = r.textpath.style;
                    l.font && (H.font = l.font), l["font-family"] && (H.fontFamily = '"' + l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, p) + '"'), l["font-size"] && (H.fontSize = l["font-size"]), l["font-weight"] && (H.fontWeight = l["font-weight"]), l["font-style"] && (H.fontStyle = l["font-style"])
                }
                if ("arrow-start" in l && A(y, l["arrow-start"]), "arrow-end" in l && A(y, l["arrow-end"], 1), null != l.opacity || null != l["stroke-width"] || null != l.fill || null != l.src || null != l.stroke || null != l["stroke-width"] || null != l["stroke-opacity"] || null != l["fill-opacity"] || null != l["stroke-dasharray"] || null != l["stroke-miterlimit"] || null != l["stroke-linejoin"] || null != l["stroke-linecap"]) {
                    var O = d.getElementsByTagName(c),
                        j = !1;
                    if (O = O && O[0], !O && (j = O = M(c)), "image" == r.type && l.src && (O.src = l.src), l.fill && (O.on = !0), (null == O.on || "none" == l.fill || null === l.fill) && (O.on = !1), O.on && l.fill) {
                        var N = n(l.fill).match(e._ISURL);
                        if (N) {
                            O.parentNode == d && d.removeChild(O), O.rotate = !0, O.src = N[1], O.type = "tile";
                            var z = r.getBBox(1);
                            O.position = z.x + f + z.y, r._.fillpos = [z.x, z.y], e._preload(N[1], function () {
                                r._.fillsize = [this.offsetWidth, this.offsetHeight]
                            })
                        } else O.color = e.getRGB(l.fill).hex, O.src = p, O.type = "solid", e.getRGB(l.fill).error && (y.type in {
                            circle: 1,
                            ellipse: 1
                        } || "r" != n(l.fill).charAt()) && E(y, l.fill, O) && (h.fill = "none", h.gradient = l.fill, O.rotate = !1)
                    }
                    if ("fill-opacity" in l || "opacity" in l) {
                        var L = ((+h["fill-opacity"] + 1 || 2) - 1) * ((+h.opacity + 1 || 2) - 1) * ((+e.getRGB(l.fill).o + 1 || 2) - 1);
                        L = s(o(L, 0), 1), O.opacity = L, O.src && (O.color = "none")
                    }
                    d.appendChild(O);
                    var F = d.getElementsByTagName("stroke") && d.getElementsByTagName("stroke")[0],
                        B = !1;
                    !F && (B = F = M("stroke")), (l.stroke && "none" != l.stroke || l["stroke-width"] || null != l["stroke-opacity"] || l["stroke-dasharray"] || l["stroke-miterlimit"] || l["stroke-linejoin"] || l["stroke-linecap"]) && (F.on = !0), ("none" == l.stroke || null === l.stroke || null == F.on || 0 == l.stroke || 0 == l["stroke-width"]) && (F.on = !1);
                    var W = e.getRGB(l.stroke);
                    F.on && l.stroke && (F.color = W.hex), L = ((+h["stroke-opacity"] + 1 || 2) - 1) * ((+h.opacity + 1 || 2) - 1) * ((+W.o + 1 || 2) - 1);
                    var U = .75 * (i(l["stroke-width"]) || 1);
                    if (L = s(o(L, 0), 1), null == l["stroke-width"] && (U = h["stroke-width"]), l["stroke-width"] && (F.weight = U), U && 1 > U && (L *= U) && (F.weight = 1), F.opacity = L, l["stroke-linejoin"] && (F.joinstyle = l["stroke-linejoin"] || "miter"), F.miterlimit = l["stroke-miterlimit"] || 8, l["stroke-linecap"] && (F.endcap = "butt" == l["stroke-linecap"] ? "flat" : "square" == l["stroke-linecap"] ? "square" : "round"), l["stroke-dasharray"]) {
                        var q = {
                            "-": "shortdash",
                            ".": "shortdot",
                            "-.": "shortdashdot",
                            "-..": "shortdashdotdot",
                            ". ": "dot",
                            "- ": "dash",
                            "--": "longdash",
                            "- .": "dashdot",
                            "--.": "longdashdot",
                            "--..": "longdashdotdot"
                        };
                        F.dashstyle = q[t](l["stroke-dasharray"]) ? q[l["stroke-dasharray"]] : p
                    }
                    B && d.appendChild(F)
                }
                if ("text" == y.type) {
                    y.paper.canvas.style.display = p;
                    var G = y.paper.span,
                        Y = 100,
                        V = h.font && h.font.match(/\d+(?:\.\d*)?(?=px)/);
                    m = G.style, h.font && (m.font = h.font), h["font-family"] && (m.fontFamily = h["font-family"]), h["font-weight"] && (m.fontWeight = h["font-weight"]), h["font-style"] && (m.fontStyle = h["font-style"]), V = i(h["font-size"] || V && V[0]) || 10, m.fontSize = V * Y + "px", y.textpath.string && (G.innerHTML = n(y.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>"));
                    var X = G.getBoundingClientRect();
                    y.W = h.w = (X.right - X.left) / Y, y.H = h.h = (X.bottom - X.top) / Y, y.X = h.x, y.Y = h.y + y.H / 2, ("x" in l || "y" in l) && (y.path.v = e.format("m{0},{1}l{2},{1}", a(h.x * w), a(h.y * w), a(h.x * w) + 1));
                    for (var K = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], Z = 0, Q = K.length; Q > Z; Z++)
                        if (K[Z] in l) {
                            y._.dirty = 1;
                            break
                        } switch (h["text-anchor"]) {
                            case "start":
                                y.textpath.style["v-text-align"] = "left", y.bbx = y.W / 2;
                                break;
                            case "end":
                                y.textpath.style["v-text-align"] = "right", y.bbx = -y.W / 2;
                                break;
                            default:
                                y.textpath.style["v-text-align"] = "center", y.bbx = 0
                        }
                    y.textpath.style["v-text-kern"] = !0
                }
            },
            E = function (t, a, o) {
                t.attrs = t.attrs || {};
                var s = (t.attrs, Math.pow),
                    l = "linear",
                    c = ".5 .5";
                if (t.attrs.gradient = a, a = n(a).replace(e._radial_gradient, function (e, t, n) {
                    return l = "radial", t && n && (t = i(t), n = i(n), s(t - .5, 2) + s(n - .5, 2) > .25 && (n = r.sqrt(.25 - s(t - .5, 2)) * (2 * (n > .5) - 1) + .5), c = t + f + n), p
                }), a = a.split(/\s*\-\s*/), "linear" == l) {
                    var u = a.shift();
                    if (u = -i(u), isNaN(u)) return null
                }
                var d = e._parseDots(a);
                if (!d) return null;
                if (t = t.shape || t.node, d.length) {
                    t.removeChild(o), o.on = !0, o.method = "none", o.color = d[0].color, o.color2 = d[d.length - 1].color;
                    for (var h = [], m = 0, g = d.length; g > m; m++) d[m].offset && h.push(d[m].offset + f + d[m].color);
                    o.colors = h.length ? h.join() : "0% " + o.color, "radial" == l ? (o.type = "gradientTitle", o.focus = "100%", o.focussize = "0 0", o.focusposition = c, o.angle = 0) : (o.type = "gradient", o.angle = (270 - u) % 360), t.appendChild(o)
                }
                return 1
            },
            D = function (t, n) {
                this[0] = this.node = t, t.raphael = !0, this.id = e._oid++, t.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = n, this.matrix = e.matrix(), this._ = {
                    transform: [],
                    sx: 1,
                    sy: 1,
                    dx: 0,
                    dy: 0,
                    deg: 0,
                    dirty: 1,
                    dirtyT: 1
                }, !n.bottom && (n.bottom = this), this.prev = n.top, n.top && (n.top.next = this), n.top = this, this.next = null
            },
            $ = e.el;
        D.prototype = $, $.constructor = D, $.transform = function (t) {
            if (null == t) return this._.transform;
            var i, r = this.paper._viewBoxShift,
                a = r ? "s" + [r.scale, r.scale] + "-1-1t" + [r.dx, r.dy] : p;
            r && (i = t = n(t).replace(/\.{3}|\u2026/g, this._.transform || p)), e._extractTransform(this, a + t);
            var o, s = this.matrix.clone(),
                l = this.skew,
                c = this.node,
                u = ~n(this.attrs.fill).indexOf("-"),
                d = !n(this.attrs.fill).indexOf("url(");
            if (s.translate(-.5, -.5), d || u || "image" == this.type)
                if (l.matrix = "1 0 0 1", l.offset = "0 0", o = s.split(), u && o.noRotation || !o.isSimple) {
                    c.style.filter = s.toFilter();
                    var h = this.getBBox(),
                        m = this.getBBox(1),
                        g = h.x - m.x,
                        v = h.y - m.y;
                    c.coordorigin = g * -w + f + v * -w, S(this, 1, 1, g, v, 0)
                } else c.style.filter = p, S(this, o.scalex, o.scaley, o.dx, o.dy, o.rotate);
            else c.style.filter = p, l.matrix = n(s), l.offset = s.offset();
            return i && (this._.transform = i), this
        }, $.rotate = function (e, t, r) {
            if (this.removed) return this;
            if (null != e) {
                if (e = n(e).split(u), e.length - 1 && (t = i(e[1]), r = i(e[2])), e = i(e[0]), null == r && (t = r), null == t || null == r) {
                    var a = this.getBBox(1);
                    t = a.x + a.width / 2, r = a.y + a.height / 2
                }
                return this._.dirtyT = 1, this.transform(this._.transform.concat([
                    ["r", e, t, r]
                ])), this
            }
        }, $.translate = function (e, t) {
            return this.removed ? this : (e = n(e).split(u), e.length - 1 && (t = i(e[1])), e = i(e[0]) || 0, t = +t || 0, this._.bbox && (this._.bbox.x += e, this._.bbox.y += t), this.transform(this._.transform.concat([
                ["t", e, t]
            ])), this)
        }, $.scale = function (e, t, r, a) {
            if (this.removed) return this;
            if (e = n(e).split(u), e.length - 1 && (t = i(e[1]), r = i(e[2]), a = i(e[3]), isNaN(r) && (r = null), isNaN(a) && (a = null)), e = i(e[0]), null == t && (t = e), null == a && (r = a), null == r || null == a) var o = this.getBBox(1);
            return r = null == r ? o.x + o.width / 2 : r, a = null == a ? o.y + o.height / 2 : a, this.transform(this._.transform.concat([
                ["s", e, t, r, a]
            ])), this._.dirtyT = 1, this
        }, $.hide = function () {
            return !this.removed && (this.node.style.display = "none"), this
        }, $.show = function () {
            return !this.removed && (this.node.style.display = p), this
        }, $._getBBox = function () {
            return this.removed ? {} : {
                x: this.X + (this.bbx || 0) - this.W / 2,
                y: this.Y - this.H,
                width: this.W,
                height: this.H
            }
        }, $.remove = function () {
            if (!this.removed && this.node.parentNode) {
                this.paper.__set__ && this.paper.__set__.exclude(this), e.eve.unbind("raphael.*.*." + this.id), e._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape);
                for (var t in this) this[t] = "function" == typeof this[t] ? e._removedFactory(t) : null;
                this.removed = !0
            }
        }, $.attr = function (n, i) {
            if (this.removed) return this;
            if (null == n) {
                var r = {};
                for (var a in this.attrs) this.attrs[t](a) && (r[a] = this.attrs[a]);
                return r.gradient && "none" == r.fill && (r.fill = r.gradient) && delete r.gradient, r.transform = this._.transform, r
            }
            if (null == i && e.is(n, "string")) {
                if (n == c && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient;
                for (var o = n.split(u), s = {}, l = 0, h = o.length; h > l; l++) n = o[l], n in this.attrs ? s[n] = this.attrs[n] : e.is(this.paper.customAttributes[n], "function") ? s[n] = this.paper.customAttributes[n].def : s[n] = e._availableAttrs[n];
                return h - 1 ? s : s[o[0]]
            }
            if (this.attrs && null == i && e.is(n, "array")) {
                for (s = {}, l = 0, h = n.length; h > l; l++) s[n[l]] = this.attr(n[l]);
                return s
            }
            var f;
            null != i && (f = {}, f[n] = i), null == i && e.is(n, "object") && (f = n);
            for (var p in f) d("raphael.attr." + p + "." + this.id, this, f[p]);
            if (f) {
                for (p in this.paper.customAttributes)
                    if (this.paper.customAttributes[t](p) && f[t](p) && e.is(this.paper.customAttributes[p], "function")) {
                        var m = this.paper.customAttributes[p].apply(this, [].concat(f[p]));
                        this.attrs[p] = f[p];
                        for (var g in m) m[t](g) && (f[g] = m[g])
                    } f.text && "text" == this.type && (this.textpath.string = f.text), T(this, f)
            }
            return this
        }, $.toFront = function () {
            return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && e._tofront(this, this.paper), this
        }, $.toBack = function () {
            return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), e._toback(this, this.paper)), this)
        }, $.insertAfter = function (t) {
            return this.removed ? this : (t.constructor == e.st.constructor && (t = t[t.length - 1]), t.node.nextSibling ? t.node.parentNode.insertBefore(this.node, t.node.nextSibling) : t.node.parentNode.appendChild(this.node), e._insertafter(this, t, this.paper), this)
        }, $.insertBefore = function (t) {
            return this.removed ? this : (t.constructor == e.st.constructor && (t = t[0]), t.node.parentNode.insertBefore(this.node, t.node), e._insertbefore(this, t, this.paper), this)
        }, $.blur = function (t) {
            var n = this.node.runtimeStyle,
                i = n.filter;
            i = i.replace(v, p), 0 !== +t ? (this.attrs.blur = t, n.filter = i + f + h + ".Blur(pixelradius=" + (+t || 1.5) + ")", n.margin = e.format("-{0}px 0 0 -{0}px", a(+t || 1.5))) : (n.filter = i, n.margin = 0, delete this.attrs.blur)
        }, e._engine.path = function (e, t) {
            var n = M("shape");
            n.style.cssText = b, n.coordsize = w + f + w, n.coordorigin = t.coordorigin;
            var i = new D(n, t),
                r = {
                    fill: "none",
                    stroke: "#000"
                };
            e && (r.path = e), i.type = "path", i.path = [], i.Path = p, T(i, r), t.canvas.appendChild(n);
            var a = M("skew");
            return a.on = !0, n.appendChild(a), i.skew = a, i.transform(p), i
        }, e._engine.rect = function (t, n, i, r, a, o) {
            var s = e._rectPath(n, i, r, a, o),
                l = t.path(s),
                c = l.attrs;
            return l.X = c.x = n, l.Y = c.y = i, l.W = c.width = r, l.H = c.height = a, c.r = o, c.path = s, l.type = "rect", l
        }, e._engine.ellipse = function (e, t, n, i, r) {
            var a = e.path();
            a.attrs;
            return a.X = t - i, a.Y = n - r, a.W = 2 * i, a.H = 2 * r, a.type = "ellipse", T(a, {
                cx: t,
                cy: n,
                rx: i,
                ry: r
            }), a
        }, e._engine.circle = function (e, t, n, i) {
            var r = e.path();
            r.attrs;
            return r.X = t - i, r.Y = n - i, r.W = r.H = 2 * i, r.type = "circle", T(r, {
                cx: t,
                cy: n,
                r: i
            }), r
        }, e._engine.image = function (t, n, i, r, a, o) {
            var s = e._rectPath(i, r, a, o),
                l = t.path(s).attr({
                    stroke: "none"
                }),
                u = l.attrs,
                d = l.node,
                h = d.getElementsByTagName(c)[0];
            return u.src = n, l.X = u.x = i, l.Y = u.y = r, l.W = u.width = a, l.H = u.height = o, u.path = s, l.type = "image", h.parentNode == d && d.removeChild(h), h.rotate = !0, h.src = n, h.type = "tile", l._.fillpos = [i, r], l._.fillsize = [a, o], d.appendChild(h), S(l, 1, 1, 0, 0, 0), l
        }, e._engine.text = function (t, i, r, o) {
            var s = M("shape"),
                l = M("path"),
                c = M("textpath");
            i = i || 0, r = r || 0, o = o || "", l.v = e.format("m{0},{1}l{2},{1}", a(i * w), a(r * w), a(i * w) + 1), l.textpathok = !0, c.string = n(o), c.on = !0, s.style.cssText = b, s.coordsize = w + f + w, s.coordorigin = "0 0";
            var u = new D(s, t),
                d = {
                    fill: "#000",
                    stroke: "none",
                    font: e._availableAttrs.font,
                    text: o
                };
            u.shape = s, u.path = l, u.textpath = c, u.type = "text", u.attrs.text = n(o), u.attrs.x = i, u.attrs.y = r, u.attrs.w = 1, u.attrs.h = 1, T(u, d), s.appendChild(c), s.appendChild(l), t.canvas.appendChild(s);
            var h = M("skew");
            return h.on = !0, s.appendChild(h), u.skew = h, u.transform(p), u
        }, e._engine.setSize = function (t, n) {
            var i = this.canvas.style;
            return this.width = t, this.height = n, t == +t && (t += "px"), n == +n && (n += "px"), i.width = t, i.height = n, i.clip = "rect(0 " + t + " " + n + " 0)", this._viewBox && e._engine.setViewBox.apply(this, this._viewBox), this
        }, e._engine.setViewBox = function (t, n, i, r, a) {
            e.eve("raphael.setViewBox", this, this._viewBox, [t, n, i, r, a]);
            var s, l, c = this.width,
                u = this.height,
                d = 1 / o(i / c, r / u);
            return a && (s = u / r, l = c / i, c > i * s && (t -= (c - i * s) / 2 / s), u > r * l && (n -= (u - r * l) / 2 / l)), this._viewBox = [t, n, i, r, !!a], this._viewBoxShift = {
                dx: -t,
                dy: -n,
                scale: d
            }, this.forEach(function (e) {
                e.transform("...")
            }), this
        };
        var M;
        e._engine.initWin = function (e) {
            var t = e.document;
            t.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
            try {
                !t.namespaces.rvml && t.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), M = function (e) {
                    return t.createElement("<rvml:" + e + ' class="rvml">')
                }
            } catch (n) {
                M = function (e) {
                    return t.createElement("<" + e + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
                }
            }
        }, e._engine.initWin(e._g.win), e._engine.create = function () {
            var t = e._getContainer.apply(0, arguments),
                n = t.container,
                i = t.height,
                r = t.width,
                a = t.x,
                o = t.y;
            if (!n) throw new Error("VML container not found.");
            var s = new e._Paper,
                l = s.canvas = e._g.doc.createElement("div"),
                c = l.style;
            return a = a || 0, o = o || 0, r = r || 512, i = i || 342, s.width = r, s.height = i, r == +r && (r += "px"), i == +i && (i += "px"), s.coordsize = 1e3 * w + f + 1e3 * w, s.coordorigin = "0 0", s.span = e._g.doc.createElement("span"), s.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", l.appendChild(s.span), c.cssText = e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", r, i), 1 == n ? (e._g.doc.body.appendChild(l), c.left = a + "px", c.top = o + "px", c.position = "absolute") : n.firstChild ? n.insertBefore(l, n.firstChild) : n.appendChild(l), s.renderfix = function () { }, s
        }, e.prototype.clear = function () {
            e.eve("raphael.clear", this), this.canvas.innerHTML = p, this.span = e._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null
        }, e.prototype.remove = function () {
            e.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas);
            for (var t in this) this[t] = "function" == typeof this[t] ? e._removedFactory(t) : null;
            return !0
        };
        var R = e.st;
        for (var I in $) $[t](I) && !R[t](I) && (R[I] = function (e) {
            return function () {
                var t = arguments;
                return this.forEach(function (n) {
                    n[e].apply(n, t)
                })
            }
        }(I))
    }(window.Raphael), JustGage = function (e) {
        if (!e.id) return alert("Missing id parameter for gauge!"), !1;
        if (!document.getElementById(e.id)) return alert('No element with id: "' + e.id + '" found!'), !1;
        this.config = {
            id: e.id,
            title: e.title ? e.title : "Title",
            titleFontColor: e.titleFontColor ? e.titleFontColor : "#999999",
            value: e.value ? e.value : 0,
            valueFontColor: e.valueFontColor ? e.valueFontColor : "#010101",
            min: e.min ? e.min : 0,
            max: e.max ? e.max : 100,
            showMinMax: null != e.showMinMax ? e.showMinMax : !0,
            gaugeWidthScale: e.gaugeWidthScale ? e.gaugeWidthScale : 1,
            gaugeColor: e.gaugeColor ? e.gaugeColor : "#edebeb",
            label: e.label ? e.label : "",
            showInnerShadow: null != e.showInnerShadow ? e.showInnerShadow : !0,
            shadowOpacity: e.shadowOpacity ? e.shadowOpacity : .2,
            shadowSize: e.shadowSize ? e.shadowSize : 5,
            shadowVerticalOffset: e.shadowVerticalOffset ? e.shadowVerticalOffset : 3,
            levelColors: e.levelColors ? e.levelColors : percentColors,
            levelColorsGradient: null != e.levelColorsGradient ? e.levelColorsGradient : !0,
            labelFontColor: e.labelFontColor ? e.labelFontColor : "#b3b3b3",
            startAnimationTime: e.startAnimationTime ? e.startAnimationTime : 700,
            startAnimationType: e.startAnimationType ? e.startAnimationType : ">",
            refreshAnimationTime: e.refreshAnimationTime ? e.refreshAnimationTime : 700,
            refreshAnimationType: e.refreshAnimationType ? e.refreshAnimationType : ">"
        }, e.value > this.config.max && (this.config.value = this.config.max), e.value < this.config.min && (this.config.value = this.config.min), this.originalValue = e.value, this.canvas = Raphael(this.config.id, "100%", "100%");
        var t, n, i = 1 * getStyle(document.getElementById(this.config.id), "width").slice(0, -2),
            r = 1 * getStyle(document.getElementById(this.config.id), "height").slice(0, -2);
        i / r > 1.25 ? (t = 1.25 * r, n = r) : (t = i, n = i / 1.25);
        var a = (i - t) / 2,
            o = (r - n) / 2,
            s = n / 8 > 10 ? n / 10 : 10,
            l = a + t / 2,
            c = o + n / 6.5,
            u = n / 6.4 > 16 ? n / 6.4 : 16,
            d = a + t / 2,
            h = o + n / 1.4,
            f = n / 16 > 10 ? n / 16 : 10,
            p = a + t / 2,
            m = h + u / 2 + 6,
            g = n / 16 > 10 ? n / 16 : 10,
            v = a + t / 10 + t / 6.666666666666667 * this.config.gaugeWidthScale / 2,
            y = o + n / 1.126760563380282,
            b = n / 16 > 10 ? n / 16 : 10,
            w = a + t - t / 10 - t / 6.666666666666667 * this.config.gaugeWidthScale / 2,
            _ = o + n / 1.126760563380282;
        this.params = {
            canvasW: i,
            canvasH: r,
            widgetW: t,
            widgetH: n,
            dx: a,
            dy: o,
            titleFontSize: s,
            titleX: l,
            titleY: c,
            valueFontSize: u,
            valueX: d,
            valueY: h,
            labelFontSize: f,
            labelX: p,
            labelY: m,
            minFontSize: g,
            minX: v,
            minY: y,
            maxFontSize: b,
            maxX: w,
            maxY: _
        }, this.canvas.customAttributes.pki = function (e, t, n, i, r, a, o, s) {
            var l, c = (1 - (e - t) / (n - t)) * Math.PI,
                u = i / 2 - i / 10,
                d = u - i / 6.666666666666667 * s,
                h = i / 2 + a,
                f = r / 1.25 + o,
                p = i / 2 + a + u * Math.cos(c),
                m = r - (r - f) + o - u * Math.sin(c),
                g = i / 2 + a + d * Math.cos(c),
                v = r - (r - f) + o - d * Math.sin(c);
            return l += "M" + (h - d) + "," + f + " ", l += "L" + (h - u) + "," + f + " ", l += "A" + u + "," + u + " 0 0,1 " + p + "," + m + " ", l += "L" + g + "," + v + " ", l += "A" + d + "," + d + " 0 0,0 " + (h - d) + "," + f + " ", l += "z ", {
                path: l
            }
        }, this.gauge = this.canvas.path().attr({
            stroke: "none",
            fill: this.config.gaugeColor,
            pki: [this.config.max, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH, this.params.dx, this.params.dy, this.config.gaugeWidthScale]
        }), this.gauge.id = this.config.id + "-gauge", this.level = this.canvas.path().attr({
            stroke: "none",
            fill: getColorForPercentage((this.config.value - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient),
            pki: [this.config.min, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH, this.params.dx, this.params.dy, this.config.gaugeWidthScale]
        }), this.level.id = this.config.id + "-level", this.txtTitle = this.canvas.text(this.params.titleX, this.params.titleY, this.config.title), this.txtTitle.attr({
            "font-size": this.params.titleFontSize,
            "font-weight": "bold",
            "font-family": "Arial",
            fill: this.config.titleFontColor,
            "fill-opacity": "1"
        }), this.txtTitle.id = this.config.id + "-txttitle", this.txtValue = this.canvas.text(this.params.valueX, this.params.valueY, this.originalValue), this.txtValue.attr({
            "font-size": this.params.valueFontSize,
            "font-weight": "bold",
            "font-family": "Arial",
            fill: this.config.valueFontColor,
            "fill-opacity": "0"
        }), this.txtValue.id = this.config.id + "-txtvalue", this.txtLabel = this.canvas.text(this.params.labelX, this.params.labelY, this.config.label), this.txtLabel.attr({
            "font-size": this.params.labelFontSize,
            "font-weight": "normal",
            "font-family": "Arial",
            fill: this.config.labelFontColor,
            "fill-opacity": "0"
        }), this.txtLabel.id = this.config.id + "-txtlabel", this.txtMin = this.canvas.text(this.params.minX, this.params.minY, this.config.min), this.txtMin.attr({
            "font-size": this.params.minFontSize,
            "font-weight": "normal",
            "font-family": "Arial",
            fill: this.config.labelFontColor,
            "fill-opacity": 1 == this.config.showMinMax ? "1" : "0"
        }), this.txtMin.id = this.config.id + "-txtmin", this.txtMax = this.canvas.text(this.params.maxX, this.params.maxY, this.config.max), this.txtMax.attr({
            "font-size": this.params.maxFontSize,
            "font-weight": "normal",
            "font-family": "Arial",
            fill: this.config.labelFontColor,
            "fill-opacity": 1 == this.config.showMinMax ? "1" : "0"
        }), this.txtMax.id = this.config.id + "-txtmax";
        var x = this.canvas.canvas.childNodes[1],
            k = "http://www.w3.org/2000/svg";
        9 > ie ? onCreateElementNsReady(function () {
            this.generateShadow()
        }) : this.generateShadow(k, x), this.level.animate({
            pki: [this.config.value, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH, this.params.dx, this.params.dy, this.config.gaugeWidthScale]
        }, this.config.startAnimationTime, this.config.startAnimationType), this.txtValue.animate({
            "fill-opacity": "1"
        }, this.config.startAnimationTime, this.config.startAnimationType), this.txtLabel.animate({
            "fill-opacity": "1"
        }, this.config.startAnimationTime, this.config.startAnimationType)
    }, JustGage.prototype.refresh = function (e) {
        originalVal = e, e > this.config.max && (e = this.config.max), e < this.config.min && (e = this.config.min);
        var t = getColorForPercentage((e - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient);
        this.canvas.getById(this.config.id + "-txtvalue").attr({
            text: originalVal
        }), this.canvas.getById(this.config.id + "-level").animate({
            pki: [e, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH, this.params.dx, this.params.dy, this.config.gaugeWidthScale],
            fill: t
        }, this.config.refreshAnimationTime, this.config.refreshAnimationType)
    };
var percentColors = ["#a9d70b", "#f9c802", "#ff0000"];
JustGage.prototype.generateShadow = function (e, t) {
    var n = document.createElementNS(e, "filter");
    n.setAttribute("id", this.config.id + "-inner-shadow"), t.appendChild(n);
    var i = document.createElementNS(e, "feOffset");
    i.setAttribute("dx", 0), i.setAttribute("dy", this.config.shadowVerticalOffset), n.appendChild(i);
    var r = document.createElementNS(e, "feGaussianBlur");
    r.setAttribute("result", "offset-blur"), r.setAttribute("stdDeviation", this.config.shadowSize), n.appendChild(r);
    var a = document.createElementNS(e, "feComposite");
    a.setAttribute("operator", "out"), a.setAttribute("in", "SourceGraphic"), a.setAttribute("in2", "offset-blur"), a.setAttribute("result", "inverse"), n.appendChild(a);
    var o = document.createElementNS(e, "feFlood");
    o.setAttribute("flood-color", "black"), o.setAttribute("flood-opacity", this.config.shadowOpacity), o.setAttribute("result", "color"), n.appendChild(o);
    var s = document.createElementNS(e, "feComposite");
    s.setAttribute("operator", "in"), s.setAttribute("in", "color"), s.setAttribute("in2", "inverse"), s.setAttribute("result", "shadow"), n.appendChild(s);
    var l = document.createElementNS(e, "feComposite");
    l.setAttribute("operator", "over"), l.setAttribute("in", "shadow"), l.setAttribute("in2", "SourceGraphic"), n.appendChild(l), 1 == this.config.showInnerShadow && (this.canvas.canvas.childNodes[2].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)"), this.canvas.canvas.childNodes[3].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)"))
};
var getColorForPercentage = function (e, t, n) {
    var i = t.length;
    if (1 === i) return t[0];
    for (var r = n ? 1 / (i - 1) : 1 / i, a = new Array, o = 0; o < t.length; o++) {
        var s = n ? r * o : r * (o + 1),
            l = parseInt(cutHex(t[o]).substring(0, 2), 16),
            c = parseInt(cutHex(t[o]).substring(2, 4), 16),
            u = parseInt(cutHex(t[o]).substring(4, 6), 16);
        a[o] = {
            pct: s,
            color: {
                r: l,
                g: c,
                b: u
            }
        }
    }
    if (0 == e) return "rgb(" + [a[0].color.r, a[0].color.g, a[0].color.b].join(",") + ")";
    for (var o = 0; o < a.length; o++)
        if (e <= a[o].pct) {
            if (1 == n) {
                var d = a[o - 1],
                    h = a[o],
                    f = h.pct - d.pct,
                    p = (e - d.pct) / f,
                    m = 1 - p,
                    g = p,
                    v = {
                        r: Math.floor(d.color.r * m + h.color.r * g),
                        g: Math.floor(d.color.g * m + h.color.g * g),
                        b: Math.floor(d.color.b * m + h.color.b * g)
                    };
                return "rgb(" + [v.r, v.g, v.b].join(",") + ")"
            }
            return "rgb(" + [a[o].color.r, a[o].color.g, a[o].color.b].join(",") + ")"
        }
},
    ie = function () {
        for (var e, t = 3, n = document.createElement("div"), i = n.getElementsByTagName("i"); n.innerHTML = "<!--[if gt IE " + ++t + "]><i></i><![endif]-->", i[0];);
        return t > 4 ? t : e
    }();
! function () {
    function e(e, t) {
        try {
            for (var n in t) Object.defineProperty(e.prototype, n, {
                value: t[n],
                enumerable: !1
            })
        } catch (i) {
            e.prototype = t
        }
    }

    function t(e) {
        for (var t = -1, n = e.length, i = []; ++t < n;) i.push(e[t]);
        return i
    }

    function n(e) {
        return Array.prototype.slice.call(e)
    }

    function i() { }

    function r(e) {
        return e
    }

    function a() {
        return this
    }

    function o() {
        return !0
    }

    function s(e) {
        return "function" == typeof e ? e : function () {
            return e
        }
    }

    function l(e, t, n) {
        return function () {
            var i = n.apply(t, arguments);
            return arguments.length ? e : i
        }
    }

    function c(e) {
        return null != e && !isNaN(e)
    }

    function u(e) {
        return e.length
    }

    function d(e) {
        return null == e
    }

    function h(e) {
        return e.trim().replace(/\s+/g, " ")
    }

    function f(e) {
        for (var t = 1; e * t % 1;) t *= 10;
        return t
    }

    function p() { }

    function m(e) {
        function t() {
            for (var t, i = n, r = -1, a = i.length; ++r < a;)(t = i[r].on) && t.apply(this, arguments);
            return e
        }
        var n = [],
            r = new i;
        return t.on = function (t, i) {
            var a, o = r.get(t);
            return arguments.length < 2 ? o && o.on : (o && (o.on = null, n = n.slice(0, a = n.indexOf(o)).concat(n.slice(a + 1)), r.remove(t)), i && n.push(r.set(t, {
                on: i
            })), e)
        }, t
    }

    function g(e, t) {
        return t - (e ? 1 + Math.floor(Math.log(e + Math.pow(10, 1 + Math.floor(Math.log(e) / Math.LN10) - t)) / Math.LN10) : 1)
    }

    function v(e) {
        return e + ""
    }

    function y(e) {
        for (var t = e.lastIndexOf("."), n = t >= 0 ? e.substring(t) : (t = e.length, ""), i = []; t > 0;) i.push(e.substring(t -= 3, t + 3));
        return i.reverse().join(",") + n
    }

    function b(e, t) {
        var n = Math.pow(10, 3 * Math.abs(8 - t));
        return {
            scale: t > 8 ? function (e) {
                return e / n
            } : function (e) {
                return e * n
            },
            symbol: e
        }
    }

    function w(e) {
        return function (t) {
            return 0 >= t ? 0 : t >= 1 ? 1 : e(t)
        }
    }

    function _(e) {
        return function (t) {
            return 1 - e(1 - t)
        }
    }

    function x(e) {
        return function (t) {
            return .5 * (.5 > t ? e(2 * t) : 2 - e(2 - 2 * t))
        }
    }

    function k(e) {
        return e
    }

    function C(e) {
        return function (t) {
            return Math.pow(t, e)
        }
    }

    function S(e) {
        return 1 - Math.cos(e * Math.PI / 2)
    }

    function A(e) {
        return Math.pow(2, 10 * (e - 1))
    }

    function T(e) {
        return 1 - Math.sqrt(1 - e * e)
    }

    function E(e, t) {
        var n;
        return arguments.length < 2 && (t = .45), arguments.length < 1 ? (e = 1, n = t / 4) : n = t / (2 * Math.PI) * Math.asin(1 / e),
            function (i) {
                return 1 + e * Math.pow(2, 10 * -i) * Math.sin(2 * (i - n) * Math.PI / t)
            }
    }

    function D(e) {
        return e || (e = 1.70158),
            function (t) {
                return t * t * ((e + 1) * t - e)
            }
    }

    function $(e) {
        return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
    }

    function M() {
        d3.event.stopPropagation(), d3.event.preventDefault()
    }

    function R() {
        for (var e, t = d3.event; e = t.sourceEvent;) t = e;
        return t
    }

    function I(e) {
        for (var t = new p, n = 0, i = arguments.length; ++n < i;) t[arguments[n]] = m(t);
        return t.of = function (n, i) {
            return function (r) {
                try {
                    var a = r.sourceEvent = d3.event;
                    r.target = e, d3.event = r, t[r.type].apply(n, i)
                } finally {
                    d3.event = a
                }
            }
        }, t
    }

    function P(e) {
        var t = [e.a, e.b],
            n = [e.c, e.d],
            i = O(t),
            r = H(t, n),
            a = O(j(n, t, -r)) || 0;
        t[0] * n[1] < n[0] * t[1] && (t[0] *= -1, t[1] *= -1, i *= -1, r *= -1), this.rotate = (i ? Math.atan2(t[1], t[0]) : Math.atan2(-n[0], n[1])) * sr, this.translate = [e.e, e.f], this.scale = [i, a], this.skew = a ? Math.atan2(r, a) * sr : 0
    }

    function H(e, t) {
        return e[0] * t[0] + e[1] * t[1]
    }

    function O(e) {
        var t = Math.sqrt(H(e, e));
        return t && (e[0] /= t, e[1] /= t), t
    }

    function j(e, t, n) {
        return e[0] += n * t[0], e[1] += n * t[1], e
    }

    function N(e) {
        return "transform" == e ? d3.interpolateTransform : d3.interpolate
    }

    function z(e, t) {
        return t = t - (e = +e) ? 1 / (t - e) : 0,
            function (n) {
                return (n - e) * t
            }
    }

    function L(e, t) {
        return t = t - (e = +e) ? 1 / (t - e) : 0,
            function (n) {
                return Math.max(0, Math.min(1, (n - e) * t))
            }
    }

    function F() { }

    function B(e, t, n) {
        return new W(e, t, n)
    }

    function W(e, t, n) {
        this.r = e, this.g = t, this.b = n
    }

    function U(e) {
        return 16 > e ? "0" + Math.max(0, e).toString(16) : Math.min(255, e).toString(16)
    }

    function q(e, t, n) {
        var i, r, a, o = 0,
            s = 0,
            l = 0;
        if (i = /([a-z]+)\((.*)\)/i.exec(e)) switch (r = i[2].split(","), i[1]) {
            case "hsl":
                return n(parseFloat(r[0]), parseFloat(r[1]) / 100, parseFloat(r[2]) / 100);
            case "rgb":
                return t(X(r[0]), X(r[1]), X(r[2]))
        }
        return (a = dr.get(e)) ? t(a.r, a.g, a.b) : (null != e && "#" === e.charAt(0) && (4 === e.length ? (o = e.charAt(1), o += o, s = e.charAt(2), s += s, l = e.charAt(3), l += l) : 7 === e.length && (o = e.substring(1, 3), s = e.substring(3, 5), l = e.substring(5, 7)), o = parseInt(o, 16), s = parseInt(s, 16), l = parseInt(l, 16)), t(o, s, l))
    }

    function G(e, t, n) {
        var i, r, a = Math.min(e /= 255, t /= 255, n /= 255),
            o = Math.max(e, t, n),
            s = o - a,
            l = (o + a) / 2;
        return s ? (r = .5 > l ? s / (o + a) : s / (2 - o - a), i = e == o ? (t - n) / s + (n > t ? 6 : 0) : t == o ? (n - e) / s + 2 : (e - t) / s + 4, i *= 60) : r = i = 0, K(i, r, l)
    }

    function Y(e, t, n) {
        e = V(e), t = V(t), n = V(n);
        var i = se((.4124564 * e + .3575761 * t + .1804375 * n) / mr),
            r = se((.2126729 * e + .7151522 * t + .072175 * n) / gr),
            a = se((.0193339 * e + .119192 * t + .9503041 * n) / vr);
        return ne(116 * r - 16, 500 * (i - r), 200 * (r - a))
    }

    function V(e) {
        return (e /= 255) <= .04045 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4)
    }

    function X(e) {
        var t = parseFloat(e);
        return "%" === e.charAt(e.length - 1) ? Math.round(2.55 * t) : t
    }

    function K(e, t, n) {
        return new Z(e, t, n)
    }

    function Z(e, t, n) {
        this.h = e, this.s = t, this.l = n
    }

    function Q(e, t, n) {
        function i(e) {
            return e > 360 ? e -= 360 : 0 > e && (e += 360), 60 > e ? a + (o - a) * e / 60 : 180 > e ? o : 240 > e ? a + (o - a) * (240 - e) / 60 : a
        }

        function r(e) {
            return Math.round(255 * i(e))
        }
        var a, o;
        return e %= 360, 0 > e && (e += 360), t = 0 > t ? 0 : t > 1 ? 1 : t, n = 0 > n ? 0 : n > 1 ? 1 : n, o = .5 >= n ? n * (1 + t) : n + t - n * t, a = 2 * n - o, B(r(e + 120), r(e), r(e - 120))
    }

    function J(e, t, n) {
        return new ee(e, t, n)
    }

    function ee(e, t, n) {
        this.h = e, this.c = t, this.l = n
    }

    function te(e, t, n) {
        return ne(n, Math.cos(e *= Math.PI / 180) * t, Math.sin(e) * t)
    }

    function ne(e, t, n) {
        return new ie(e, t, n)
    }

    function ie(e, t, n) {
        this.l = e, this.a = t, this.b = n
    }

    function re(e, t, n) {
        var i = (e + 16) / 116,
            r = i + t / 500,
            a = i - n / 200;
        return r = oe(r) * mr, i = oe(i) * gr, a = oe(a) * vr, B(le(3.2404542 * r - 1.5371385 * i - .4985314 * a), le(-.969266 * r + 1.8760108 * i + .041556 * a), le(.0556434 * r - .2040259 * i + 1.0572252 * a))
    }

    function ae(e, t, n) {
        return J(Math.atan2(n, t) / Math.PI * 180, Math.sqrt(t * t + n * n), e)
    }

    function oe(e) {
        return e > .206893034 ? e * e * e : (e - 4 / 29) / 7.787037
    }

    function se(e) {
        return e > .008856 ? Math.pow(e, 1 / 3) : 7.787037 * e + 4 / 29
    }

    function le(e) {
        return Math.round(255 * (.00304 >= e ? 12.92 * e : 1.055 * Math.pow(e, 1 / 2.4) - .055))
    }

    function ce(e) {
        return Yi(e, Cr), e
    }

    function ue(e) {
        return function () {
            return br(e, this)
        }
    }

    function de(e) {
        return function () {
            return wr(e, this)
        }
    }

    function he(e, t) {
        function n() {
            this.removeAttribute(e)
        }

        function i() {
            this.removeAttributeNS(e.space, e.local)
        }

        function r() {
            this.setAttribute(e, t)
        }

        function a() {
            this.setAttributeNS(e.space, e.local, t)
        }

        function o() {
            var n = t.apply(this, arguments);
            null == n ? this.removeAttribute(e) : this.setAttribute(e, n)
        }

        function s() {
            var n = t.apply(this, arguments);
            null == n ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, n)
        }
        return e = d3.ns.qualify(e), null == t ? e.local ? i : n : "function" == typeof t ? e.local ? s : o : e.local ? a : r
    }

    function fe(e) {
        return new RegExp("(?:^|\\s+)" + d3.requote(e) + "(?:\\s+|$)", "g")
    }

    function pe(e, t) {
        function n() {
            for (var n = -1; ++n < r;) e[n](this, t)
        }

        function i() {
            for (var n = -1, i = t.apply(this, arguments); ++n < r;) e[n](this, i)
        }
        e = e.trim().split(/\s+/).map(me);
        var r = e.length;
        return "function" == typeof t ? i : n
    }

    function me(e) {
        var t = fe(e);
        return function (n, i) {
            if (r = n.classList) return i ? r.add(e) : r.remove(e);
            var r = n.className,
                a = null != r.baseVal,
                o = a ? r.baseVal : r;
            i ? (t.lastIndex = 0, t.test(o) || (o = h(o + " " + e), a ? r.baseVal = o : n.className = o)) : o && (o = h(o.replace(t, " ")), a ? r.baseVal = o : n.className = o)
        }
    }

    function ge(e, t, n) {
        function i() {
            this.style.removeProperty(e)
        }

        function r() {
            this.style.setProperty(e, t, n)
        }

        function a() {
            var i = t.apply(this, arguments);
            null == i ? this.style.removeProperty(e) : this.style.setProperty(e, i, n)
        }
        return null == t ? i : "function" == typeof t ? a : r
    }

    function ve(e, t) {
        function n() {
            delete this[e]
        }

        function i() {
            this[e] = t
        }

        function r() {
            var n = t.apply(this, arguments);
            null == n ? delete this[e] : this[e] = n
        }
        return null == t ? n : "function" == typeof t ? r : i
    }

    function ye(e) {
        return {
            __data__: e
        }
    }

    function be(e) {
        return function () {
            return kr(this, e)
        }
    }

    function we(e) {
        return arguments.length || (e = d3.ascending),
            function (t, n) {
                return e(t && t.__data__, n && n.__data__)
            }
    }

    function _e(e, t, n) {
        function i() {
            var t = this[a];
            t && (this.removeEventListener(e, t, t.$), delete this[a])
        }

        function r() {
            function r(e) {
                var n = d3.event;
                d3.event = e, s[0] = o.__data__;
                try {
                    t.apply(o, s)
                } finally {
                    d3.event = n
                }
            }
            var o = this,
                s = arguments;
            i.call(this), this.addEventListener(e, this[a] = r, r.$ = n), r._ = t
        }
        var a = "__on" + e,
            o = e.indexOf(".");
        return o > 0 && (e = e.substring(0, o)), t ? r : i
    }

    function xe(e, t) {
        for (var n = 0, i = e.length; i > n; n++)
            for (var r, a = e[n], o = 0, s = a.length; s > o; o++)(r = a[o]) && t(r, o, n);
        return e
    }

    function ke(e) {
        return Yi(e, Ar), e
    }

    function Ce(e, t, n) {
        Yi(e, Tr);
        var r = new i,
            a = d3.dispatch("start", "end"),
            o = Hr;
        return e.id = t, e.time = n, e.tween = function (t, n) {
            return arguments.length < 2 ? r.get(t) : (null == n ? r.remove(t) : r.set(t, n), e)
        }, e.ease = function (t) {
            return arguments.length ? (o = "function" == typeof t ? t : d3.ease.apply(d3, arguments), e) : o
        }, e.each = function (t, n) {
            return arguments.length < 2 ? Se.call(e, t) : (a.on(t, n), e)
        }, d3.timer(function (i) {
            return xe(e, function (e, s, l) {
                function c(i) {
                    return m.active > t ? d() : (m.active = t, r.forEach(function (t, n) {
                        (n = n.call(e, g, s)) && h.push(n)
                    }), a.start.call(e, g, s), u(i) || d3.timer(u, 0, n), 1)
                }

                function u(n) {
                    if (m.active !== t) return d();
                    for (var i = (n - f) / p, r = o(i), l = h.length; l > 0;) h[--l].call(e, r);
                    return i >= 1 ? (d(), Dr = t, a.end.call(e, g, s), Dr = 0, 1) : void 0
                }

                function d() {
                    return --m.count || delete e.__transition__, 1
                }
                var h = [],
                    f = e.delay,
                    p = e.duration,
                    m = (e = e.node).__transition__ || (e.__transition__ = {
                        active: 0,
                        count: 0
                    }),
                    g = e.__data__;
                ++m.count, i >= f ? c(i) : d3.timer(c, f, n)
            })
        }, 0, n), e
    }

    function Se(e) {
        var t = Dr,
            n = Hr,
            i = Ir,
            r = Pr;
        return Dr = this.id, Hr = this.ease(), xe(this, function (t, n, i) {
            Ir = t.delay, Pr = t.duration, e.call(t = t.node, t.__data__, n, i)
        }), Dr = t, Hr = n, Ir = i, Pr = r, this
    }

    function Ae(e, t, n) {
        return "" != n && Nr;
    }

    function Te(e, t) {
        return d3.tween(e, N(t))
    }

    function Ee() {
        for (var e, t = Date.now(), n = Fr; n;) e = t - n.then, e >= n.delay && (n.flush = n.callback(e)), n = n.next;
        var i = De() - t;
        i > 24 ? (isFinite(i) && (clearTimeout(jr), jr = setTimeout(Ee, i)), Or = 0) : (Or = 1, Br(Ee))
    }

    function De() {
        for (var e = null, t = Fr, n = 1 / 0; t;) t.flush ? (delete Lr[t.callback.id], t = e ? e.next = t.next : Fr = t.next) : (n = Math.min(n, t.then + t.delay), t = (e = t).next);
        return n
    }

    function $e(e, t) {
        var n = e.ownerSVGElement || e;
        if (n.createSVGPoint) {
            var i = n.createSVGPoint();
            if (0 > Wr && (window.scrollX || window.scrollY)) {
                n = d3.select(document.body).append("svg").style("position", "absolute").style("top", 0).style("left", 0);
                var r = n[0][0].getScreenCTM();
                Wr = !(r.f || r.e), n.remove()
            }
            return Wr ? (i.x = t.pageX, i.y = t.pageY) : (i.x = t.clientX, i.y = t.clientY), i = i.matrixTransform(e.getScreenCTM().inverse()), [i.x, i.y]
        }
        var a = e.getBoundingClientRect();
        return [t.clientX - a.left - e.clientLeft, t.clientY - a.top - e.clientTop]
    }

    function Me(e) {
        var t = e[0],
            n = e[e.length - 1];
        return n > t ? [t, n] : [n, t]
    }

    function Re(e) {
        return e.rangeExtent ? e.rangeExtent() : Me(e.range())
    }

    function Ie(e, t) {
        var n, i = 0,
            r = e.length - 1,
            a = e[i],
            o = e[r];
        return a > o && (n = i, i = r, r = n, n = a, a = o, o = n), (t = t(o - a)) && (e[i] = t.floor(a), e[r] = t.ceil(o)), e
    }

    function Pe() {
        return Math
    }

    function He(e, t, n, i) {
        function r() {
            var r = Math.min(e.length, t.length) > 2 ? Be : Fe,
                l = i ? L : z;
            return o = r(e, t, l, n), s = r(t, e, l, d3.interpolate), a
        }

        function a(e) {
            return o(e)
        }
        var o, s;
        return a.invert = function (e) {
            return s(e)
        }, a.domain = function (t) {
            return arguments.length ? (e = t.map(Number), r()) : e
        }, a.range = function (e) {
            return arguments.length ? (t = e, r()) : t
        }, a.rangeRound = function (e) {
            return a.range(e).interpolate(d3.interpolateRound)
        }, a.clamp = function (e) {
            return arguments.length ? (i = e, r()) : i
        }, a.interpolate = function (e) {
            return arguments.length ? (n = e, r()) : n
        }, a.ticks = function (t) {
            return ze(e, t)
        }, a.tickFormat = function (t) {
            return Le(e, t)
        }, a.nice = function () {
            return Ie(e, je), r()
        }, a.copy = function () {
            return He(e, t, n, i)
        }, r()
    }

    function Oe(e, t) {
        return d3.rebind(e, t, "range", "rangeRound", "interpolate", "clamp")
    }

    function je(e) {
        return e = Math.pow(10, Math.round(Math.log(e) / Math.LN10) - 1), e && {
            floor: function (t) {
                return Math.floor(t / e) * e
            },
            ceil: function (t) {
                return Math.ceil(t / e) * e
            }
        }
    }

    function Ne(e, t) {
        var n = Me(e),
            i = n[1] - n[0],
            r = Math.pow(10, Math.floor(Math.log(i / t) / Math.LN10)),
            a = t / i * r;
        return .15 >= a ? r *= 10 : .35 >= a ? r *= 5 : .75 >= a && (r *= 2), n[0] = Math.ceil(n[0] / r) * r, n[1] = Math.floor(n[1] / r) * r + .5 * r, n[2] = r, n
    }

    function ze(e, t) {
        return d3.range.apply(d3, Ne(e, t))
    }

    function Le(e, t) {
        return d3.format(",." + Math.max(0, -Math.floor(Math.log(Ne(e, t)[2]) / Math.LN10 + .01)) + "f")
    }

    function Fe(e, t, n, i) {
        var r = n(e[0], e[1]),
            a = i(t[0], t[1]);
        return function (e) {
            return a(r(e))
        }
    }

    function Be(e, t, n, i) {
        var r = [],
            a = [],
            o = 0,
            s = Math.min(e.length, t.length) - 1;
        for (e[s] < e[0] && (e = e.slice().reverse(), t = t.slice().reverse()); ++o <= s;) r.push(n(e[o - 1], e[o])), a.push(i(t[o - 1], t[o]));
        return function (t) {
            var n = d3.bisect(e, t, 1, s) - 1;
            return a[n](r[n](t))
        }
    }

    function We(e, t) {
        function n(n) {
            return e(t(n))
        }
        var i = t.pow;
        return n.invert = function (t) {
            return i(e.invert(t))
        }, n.domain = function (r) {
            return arguments.length ? (t = r[0] < 0 ? qe : Ue, i = t.pow, e.domain(r.map(t)), n) : e.domain().map(i)
        }, n.nice = function () {
            return e.domain(Ie(e.domain(), Pe)), n
        }, n.ticks = function () {
            var n = Me(e.domain()),
                r = [];
            if (n.every(isFinite)) {
                var a = Math.floor(n[0]),
                    o = Math.ceil(n[1]),
                    s = i(n[0]),
                    l = i(n[1]);
                if (t === qe)
                    for (r.push(i(a)); a++ < o;)
                        for (var c = 9; c > 0; c--) r.push(i(a) * c);
                else {
                    for (; o > a; a++)
                        for (var c = 1; 10 > c; c++) r.push(i(a) * c);
                    r.push(i(a))
                }
                for (a = 0; r[a] < s; a++);
                for (o = r.length; r[o - 1] > l; o--);
                r = r.slice(a, o)
            }
            return r
        }, n.tickFormat = function (e, r) {
            if (arguments.length < 2 && (r = Ur), arguments.length < 1) return r;
            var a, o = Math.max(.1, e / n.ticks().length),
                s = t === qe ? (a = -1e-12, Math.floor) : (a = 1e-12, Math.ceil);
            return function (e) {
                return e / i(s(t(e) + a)) <= o ? r(e) : ""
            }
        }, n.copy = function () {
            return We(e.copy(), t)
        }, Oe(n, e)
    }

    function Ue(e) {
        return Math.log(0 > e ? 0 : e) / Math.LN10
    }

    function qe(e) {
        return -Math.log(e > 0 ? 0 : -e) / Math.LN10
    }

    function Ge(e, t) {
        function n(t) {
            return e(i(t))
        }
        var i = Ye(t),
            r = Ye(1 / t);
        return n.invert = function (t) {
            return r(e.invert(t))
        }, n.domain = function (t) {
            return arguments.length ? (e.domain(t.map(i)), n) : e.domain().map(r)
        }, n.ticks = function (e) {
            return ze(n.domain(), e)
        }, n.tickFormat = function (e) {
            return Le(n.domain(), e)
        }, n.nice = function () {
            return n.domain(Ie(n.domain(), je))
        }, n.exponent = function (e) {
            if (!arguments.length) return t;
            var a = n.domain();
            return i = Ye(t = e), r = Ye(1 / t), n.domain(a)
        }, n.copy = function () {
            return Ge(e.copy(), t)
        }, Oe(n, e)
    }

    function Ye(e) {
        return function (t) {
            return 0 > t ? -Math.pow(-t, e) : Math.pow(t, e)
        }
    }

    function Ve(e, t) {
        function n(t) {
            return o[((a.get(t) || a.set(t, e.push(t))) - 1) % o.length]
        }

        function r(t, n) {
            return d3.range(e.length).map(function (e) {
                return t + n * e
            })
        }
        var a, o, s;
        return n.domain = function (r) {
            if (!arguments.length) return e;
            e = [], a = new i;
            for (var o, s = -1, l = r.length; ++s < l;) a.has(o = r[s]) || a.set(o, e.push(o));
            return n[t.t].apply(n, t.a)
        }, n.range = function (e) {
            return arguments.length ? (o = e, s = 0, t = {
                t: "range",
                a: arguments
            }, n) : o
        }, n.rangePoints = function (i, a) {
            arguments.length < 2 && (a = 0);
            var l = i[0],
                c = i[1],
                u = (c - l) / (Math.max(1, e.length - 1) + a);
            return o = r(e.length < 2 ? (l + c) / 2 : l + u * a / 2, u), s = 0, t = {
                t: "rangePoints",
                a: arguments
            }, n
        }, n.rangeBands = function (i, a, l) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (l = a);
            var c = i[1] < i[0],
                u = i[c - 0],
                d = i[1 - c],
                h = (d - u) / (e.length - a + 2 * l);
            return o = r(u + h * l, h), c && o.reverse(), s = h * (1 - a), t = {
                t: "rangeBands",
                a: arguments
            }, n
        }, n.rangeRoundBands = function (i, a, l) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (l = a);
            var c = i[1] < i[0],
                u = i[c - 0],
                d = i[1 - c],
                h = Math.floor((d - u) / (e.length - a + 2 * l)),
                f = d - u - (e.length - a) * h;
            return o = r(u + Math.round(f / 2), h), c && o.reverse(), s = Math.round(h * (1 - a)), t = {
                t: "rangeRoundBands",
                a: arguments
            }, n
        }, n.rangeBand = function () {
            return s
        }, n.rangeExtent = function () {
            return Me(t.a[0])
        }, n.copy = function () {
            return Ve(e, t)
        }, n.domain(e)
    }

    function Xe(e, t) {
        function n() {
            var n = 0,
                a = (e.length, t.length);
            for (r = []; ++n < a;) r[n - 1] = d3.quantile(e, n / a);
            return i
        }

        function i(e) {
            return isNaN(e = +e) ? NaN : t[d3.bisect(r, e)]
        }
        var r;
        return i.domain = function (t) {
            return arguments.length ? (e = t.filter(function (e) {
                return !isNaN(e)
            }).sort(d3.ascending), n()) : e
        }, i.range = function (e) {
            return arguments.length ? (t = e, n()) : t
        }, i.quantiles = function () {
            return r
        }, i.copy = function () {
            return Xe(e, t)
        }, n()
    }

    function Ke(e, t, n) {
        function i(t) {
            return n[Math.max(0, Math.min(o, Math.floor(a * (t - e))))]
        }

        function r() {
            return a = n.length / (t - e), o = n.length - 1, i
        }
        var a, o;
        return i.domain = function (n) {
            return arguments.length ? (e = +n[0], t = +n[n.length - 1], r()) : [e, t]
        }, i.range = function (e) {
            return arguments.length ? (n = e, r()) : n
        }, i.copy = function () {
            return Ke(e, t, n)
        }, r()
    }

    function Ze(e, t) {
        function n(n) {
            return t[d3.bisect(e, n)]
        }
        return n.domain = function (t) {
            return arguments.length ? (e = t, n) : e
        }, n.range = function (e) {
            return arguments.length ? (t = e, n) : t
        }, n.copy = function () {
            return Ze(e, t)
        }, n
    }

    function Qe(e) {
        function t(e) {
            return +e
        }
        return t.invert = t, t.domain = t.range = function (n) {
            return arguments.length ? (e = n.map(t), t) : e
        }, t.ticks = function (t) {
            return ze(e, t)
        }, t.tickFormat = function (t) {
            return Le(e, t)
        }, t.copy = function () {
            return Qe(e)
        }, t
    }

    function Je(e) {
        return e.innerRadius
    }

    function et(e) {
        return e.outerRadius
    }

    function tt(e) {
        return e.startAngle
    }

    function nt(e) {
        return e.endAngle
    }

    function it(e) {
        function t(t) {
            function o() {
                u.push("M", a(e(d), c))
            }
            for (var l, u = [], d = [], h = -1, f = t.length, p = s(n), m = s(i); ++h < f;) r.call(this, l = t[h], h) ? d.push([+p.call(this, l, h), +m.call(this, l, h)]) : d.length && (o(), d = []);
            return d.length && o(), u.length ? u.join("") : null
        }
        var n = rt,
            i = at,
            r = o,
            a = ot,
            l = a.key,
            c = .7;
        return t.x = function (e) {
            return arguments.length ? (n = e, t) : n
        }, t.y = function (e) {
            return arguments.length ? (i = e, t) : i
        }, t.defined = function (e) {
            return arguments.length ? (r = e, t) : r
        }, t.interpolate = function (e) {
            return arguments.length ? (l = "function" == typeof e ? a = e : (a = Zr.get(e) || ot).key, t) : l
        }, t.tension = function (e) {
            return arguments.length ? (c = e, t) : c
        }, t
    }

    function rt(e) {
        return e[0]
    }

    function at(e) {
        return e[1]
    }

    function ot(e) {
        return e.join("L")
    }

    function st(e) {
        return ot(e) + "Z"
    }

    function lt(e) {
        for (var t = 0, n = e.length, i = e[0], r = [i[0], ",", i[1]]; ++t < n;) r.push("V", (i = e[t])[1], "H", i[0]);
        return r.join("")
    }

    function ct(e) {
        for (var t = 0, n = e.length, i = e[0], r = [i[0], ",", i[1]]; ++t < n;) r.push("H", (i = e[t])[0], "V", i[1]);
        return r.join("")
    }

    function ut(e, t) {
        return e.length < 4 ? ot(e) : e[1] + ft(e.slice(1, e.length - 1), pt(e, t))
    }

    function dt(e, t) {
        return e.length < 3 ? ot(e) : e[0] + ft((e.push(e[0]), e), pt([e[e.length - 2]].concat(e, [e[1]]), t))
    }

    function ht(e, t, n) {
        return e.length < 3 ? ot(e) : e[0] + ft(e, pt(e, t))
    }

    function ft(e, t) {
        if (t.length < 1 || e.length != t.length && e.length != t.length + 2) return ot(e);
        var n = e.length != t.length,
            i = "",
            r = e[0],
            a = e[1],
            o = t[0],
            s = o,
            l = 1;
        if (n && (i += "Q" + (a[0] - 2 * o[0] / 3) + "," + (a[1] - 2 * o[1] / 3) + "," + a[0] + "," + a[1], r = e[1], l = 2), t.length > 1) {
            s = t[1], a = e[l], l++, i += "C" + (r[0] + o[0]) + "," + (r[1] + o[1]) + "," + (a[0] - s[0]) + "," + (a[1] - s[1]) + "," + a[0] + "," + a[1];
            for (var c = 2; c < t.length; c++, l++) a = e[l], s = t[c], i += "S" + (a[0] - s[0]) + "," + (a[1] - s[1]) + "," + a[0] + "," + a[1]
        }
        if (n) {
            var u = e[l];
            i += "Q" + (a[0] + 2 * s[0] / 3) + "," + (a[1] + 2 * s[1] / 3) + "," + u[0] + "," + u[1]
        }
        return i
    }

    function pt(e, t) {
        for (var n, i = [], r = (1 - t) / 2, a = e[0], o = e[1], s = 1, l = e.length; ++s < l;) n = a, a = o, o = e[s], i.push([r * (o[0] - n[0]), r * (o[1] - n[1])]);
        return i
    }

    function mt(e) {
        if (e.length < 3) return ot(e);
        var t = 1,
            n = e.length,
            i = e[0],
            r = i[0],
            a = i[1],
            o = [r, r, r, (i = e[1])[0]],
            s = [a, a, a, i[1]],
            l = [r, ",", a];
        for (wt(l, o, s); ++t < n;) i = e[t], o.shift(), o.push(i[0]), s.shift(), s.push(i[1]), wt(l, o, s);
        for (t = -1; ++t < 2;) o.shift(), o.push(i[0]), s.shift(), s.push(i[1]), wt(l, o, s);
        return l.join("")
    }

    function gt(e) {
        if (e.length < 4) return ot(e);
        for (var t, n = [], i = -1, r = e.length, a = [0], o = [0]; ++i < 3;) t = e[i], a.push(t[0]), o.push(t[1]);
        for (n.push(bt(ea, a) + "," + bt(ea, o)), --i; ++i < r;) t = e[i], a.shift(), a.push(t[0]), o.shift(), o.push(t[1]), wt(n, a, o);
        return n.join("")
    }

    function vt(e) {
        for (var t, n, i = -1, r = e.length, a = r + 4, o = [], s = []; ++i < 4;) n = e[i % r], o.push(n[0]), s.push(n[1]);
        for (t = [bt(ea, o), ",", bt(ea, s)], --i; ++i < a;) n = e[i % r], o.shift(), o.push(n[0]), s.shift(), s.push(n[1]), wt(t, o, s);
        return t.join("")
    }

    function yt(e, t) {
        var n = e.length - 1;
        if (n)
            for (var i, r, a = e[0][0], o = e[0][1], s = e[n][0] - a, l = e[n][1] - o, c = -1; ++c <= n;) i = e[c], r = c / n, i[0] = t * i[0] + (1 - t) * (a + r * s), i[1] = t * i[1] + (1 - t) * (o + r * l);
        return mt(e)
    }

    function bt(e, t) {
        return e[0] * t[0] + e[1] * t[1] + e[2] * t[2] + e[3] * t[3]
    }

    function wt(e, t, n) {
        e.push("C", bt(Qr, t), ",", bt(Qr, n), ",", bt(Jr, t), ",", bt(Jr, n), ",", bt(ea, t), ",", bt(ea, n))
    }

    function _t(e, t) {
        return (t[1] - e[1]) / (t[0] - e[0])
    }

    function xt(e) {
        for (var t = 0, n = e.length - 1, i = [], r = e[0], a = e[1], o = i[0] = _t(r, a); ++t < n;) i[t] = (o + (o = _t(r = a, a = e[t + 1]))) / 2;
        return i[t] = o, i
    }

    function kt(e) {
        for (var t, n, i, r, a = [], o = xt(e), s = -1, l = e.length - 1; ++s < l;) t = _t(e[s], e[s + 1]), Math.abs(t) < 1e-6 ? o[s] = o[s + 1] = 0 : (n = o[s] / t, i = o[s + 1] / t, r = n * n + i * i, r > 9 && (r = 3 * t / Math.sqrt(r), o[s] = r * n, o[s + 1] = r * i));
        for (s = -1; ++s <= l;) r = (e[Math.min(l, s + 1)][0] - e[Math.max(0, s - 1)][0]) / (6 * (1 + o[s] * o[s])), a.push([r || 0, o[s] * r || 0]);
        return a
    }

    function Ct(e) {
        return e.length < 3 ? ot(e) : e[0] + ft(e, kt(e))
    }

    function St(e) {
        for (var t, n, i, r = -1, a = e.length; ++r < a;) t = e[r], n = t[0], i = t[1] + Xr, t[0] = n * Math.cos(i), t[1] = n * Math.sin(i);
        return e
    }

    function At(e) {
        function t(t) {
            function o() {
                g.push("M", c(e(y), f), h, d(e(v.reverse()), f), "Z")
            }
            for (var u, p, m, g = [], v = [], y = [], b = -1, w = t.length, _ = s(n), x = s(r), k = n === i ? function () {
                return p
            } : s(i), C = r === a ? function () {
                return m
            } : s(a); ++b < w;) l.call(this, u = t[b], b) ? (v.push([p = +_.call(this, u, b), m = +x.call(this, u, b)]), y.push([+k.call(this, u, b), +C.call(this, u, b)])) : v.length && (o(), v = [], y = []);
            return v.length && o(), g.length ? g.join("") : null
        }
        var n = rt,
            i = rt,
            r = 0,
            a = at,
            l = o,
            c = ot,
            u = c.key,
            d = c,
            h = "L",
            f = .7;
        return t.x = function (e) {
            return arguments.length ? (n = i = e, t) : i
        }, t.x0 = function (e) {
            return arguments.length ? (n = e, t) : n
        }, t.x1 = function (e) {
            return arguments.length ? (i = e, t) : i
        }, t.y = function (e) {
            return arguments.length ? (r = a = e, t) : a
        }, t.y0 = function (e) {
            return arguments.length ? (r = e, t) : r
        }, t.y1 = function (e) {
            return arguments.length ? (a = e, t) : a
        }, t.defined = function (e) {
            return arguments.length ? (l = e, t) : l
        }, t.interpolate = function (e) {
            return arguments.length ? (u = "function" == typeof e ? c = e : (c = Zr.get(e) || ot).key, d = c.reverse || c, h = c.closed ? "M" : "L", t) : u
        }, t.tension = function (e) {
            return arguments.length ? (f = e, t) : f
        }, t
    }

    function Tt(e) {
        return e.source
    }

    function Et(e) {
        return e.target
    }

    function Dt(e) {
        return e.radius
    }

    function $t(e) {
        return [e.x, e.y]
    }

    function Mt(e) {
        return function () {
            var t = e.apply(this, arguments),
                n = t[0],
                i = t[1] + Xr;
            return [n * Math.cos(i), n * Math.sin(i)]
        }
    }

    function Rt() {
        return 64
    }

    function It() {
        return "circle"
    }

    function Pt(e) {
        var t = Math.sqrt(e / Math.PI);
        return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z"
    }

    function Ht(e, t) {
        e.attr("transform", function (e) {
            return "translate(" + t(e) + ",0)"
        })
    }

    function Ot(e, t) {
        e.attr("transform", function (e) {
            return "translate(0," + t(e) + ")"
        })
    }

    function jt(e, t, n) {
        if (i = [], n && t.length > 1) {
            for (var i, r, a, o = Me(e.domain()), s = -1, l = t.length, c = (t[1] - t[0]) / ++n; ++s < l;)
                for (r = n; --r > 0;)(a = +t[s] - r * c) >= o[0] && i.push(a);
            for (--s, r = 0; ++r < n && (a = +t[s] + r * c) < o[1];) i.push(a)
        }
        return i
    }

    function Nt() {
        oa || (oa = d3.select("body").append("div").style("visibility", "hidden").style("top", 0).style("height", 0).style("width", 0).style("overflow-y", "scroll").append("div").style("height", "2000px").node().parentNode);
        var e, t = d3.event;
        try {
            oa.scrollTop = 1e3, oa.dispatchEvent(t), e = 1e3 - oa.scrollTop
        } catch (n) {
            e = t.wheelDelta || 5 * -t.detail
        }
        return e
    }

    function zt(e) {
        for (var t = e.source, n = e.target, i = Ft(t, n), r = [t]; t !== i;) t = t.parent, r.push(t);
        for (var a = r.length; n !== i;) r.splice(a, 0, n), n = n.parent;
        return r
    }

    function Lt(e) {
        for (var t = [], n = e.parent; null != n;) t.push(e), e = n, n = n.parent;
        return t.push(e), t
    }

    function Ft(e, t) {
        if (e === t) return e;
        for (var n = Lt(e), i = Lt(t), r = n.pop(), a = i.pop(), o = null; r === a;) o = r, r = n.pop(), a = i.pop();
        return o
    }

    function Bt(e) {
        e.fixed |= 2
    }

    function Wt(e) {
        e.fixed &= 1
    }

    function Ut(e) {
        e.fixed |= 4
    }

    function qt(e) {
        e.fixed &= 3
    }

    function Gt(e, t, n) {
        var i = 0,
            r = 0;
        if (e.charge = 0, !e.leaf)
            for (var a, o = e.nodes, s = o.length, l = -1; ++l < s;) a = o[l], null != a && (Gt(a, t, n), e.charge += a.charge, i += a.charge * a.cx, r += a.charge * a.cy);
        if (e.point) {
            e.leaf || (e.point.x += Math.random() - .5, e.point.y += Math.random() - .5);
            var c = t * n[e.point.index];
            e.charge += e.pointCharge = c, i += c * e.point.x, r += c * e.point.y
        }
        e.cx = i / e.charge, e.cy = r / e.charge
    }

    function Yt(e) {
        return 20
    }

    function Vt(e) {
        return 1
    }

    function Xt(e) {
        return e.x
    }

    function Kt(e) {
        return e.y
    }

    function Zt(e, t, n) {
        e.y0 = t, e.y = n
    }

    function Qt(e) {
        return d3.range(e.length)
    }

    function Jt(e) {
        for (var t = -1, n = e[0].length, i = []; ++t < n;) i[t] = 0;
        return i
    }

    function en(e) {
        for (var t, n = 1, i = 0, r = e[0][1], a = e.length; a > n; ++n)(t = e[n][1]) > r && (i = n, r = t);
        return i
    }

    function tn(e) {
        return e.reduce(nn, 0)
    }

    function nn(e, t) {
        return e + t[1]
    }

    function rn(e, t) {
        return an(e, Math.ceil(Math.log(t.length) / Math.LN2 + 1))
    }

    function an(e, t) {
        for (var n = -1, i = +e[0], r = (e[1] - i) / t, a = []; ++n <= t;) a[n] = r * n + i;
        return a
    }

    function on(e) {
        return [d3.min(e), d3.max(e)]
    }

    function sn(e, t) {
        return d3.rebind(e, t, "sort", "children", "value"), e.links = dn, e.nodes = function (t) {
            return da = !0, (e.nodes = e)(t)
        }, e
    }

    function ln(e) {
        return e.children
    }

    function cn(e) {
        return e.value
    }

    function un(e, t) {
        return t.value - e.value
    }

    function dn(e) {
        return d3.merge(e.map(function (e) {
            return (e.children || []).map(function (t) {
                return {
                    source: e,
                    target: t
                }
            })
        }))
    }

    function hn(e, t) {
        return e.value - t.value
    }

    function fn(e, t) {
        var n = e._pack_next;
        e._pack_next = t, t._pack_prev = e, t._pack_next = n, n._pack_prev = t
    }

    function pn(e, t) {
        e._pack_next = t, t._pack_prev = e
    }

    function mn(e, t) {
        var n = t.x - e.x,
            i = t.y - e.y,
            r = e.r + t.r;
        return r * r - n * n - i * i > .001
    }

    function gn(e) {
        function t(e) {
            u = Math.min(e.x - e.r, u), d = Math.max(e.x + e.r, d), h = Math.min(e.y - e.r, h), f = Math.max(e.y + e.r, f)
        }
        if ((n = e.children) && (c = n.length)) {
            var n, i, r, a, o, s, l, c, u = 1 / 0,
                d = -(1 / 0),
                h = 1 / 0,
                f = -(1 / 0);
            if (n.forEach(vn), i = n[0], i.x = -i.r, i.y = 0, t(i), c > 1 && (r = n[1], r.x = r.r, r.y = 0, t(r), c > 2))
                for (a = n[2], wn(i, r, a), t(a), fn(i, a), i._pack_prev = a, fn(a, r), r = i._pack_next, o = 3; c > o; o++) {
                    wn(i, r, a = n[o]);
                    var p = 0,
                        m = 1,
                        g = 1;
                    for (s = r._pack_next; s !== r; s = s._pack_next, m++)
                        if (mn(s, a)) {
                            p = 1;
                            break
                        } if (1 == p)
                        for (l = i._pack_prev; l !== s._pack_prev && !mn(l, a); l = l._pack_prev, g++);
                    p ? (g > m || m == g && r.r < i.r ? pn(i, r = s) : pn(i = l, r), o--) : (fn(i, a), r = a, t(a))
                }
            var v = (u + d) / 2,
                y = (h + f) / 2,
                b = 0;
            for (o = 0; c > o; o++) a = n[o], a.x -= v, a.y -= y, b = Math.max(b, a.r + Math.sqrt(a.x * a.x + a.y * a.y));
            e.r = b, n.forEach(yn)
        }
    }

    function vn(e) {
        e._pack_next = e._pack_prev = e
    }

    function yn(e) {
        delete e._pack_next, delete e._pack_prev
    }

    function bn(e, t, n, i) {
        var r = e.children;
        if (e.x = t += i * e.x, e.y = n += i * e.y, e.r *= i, r)
            for (var a = -1, o = r.length; ++a < o;) bn(r[a], t, n, i)
    }

    function wn(e, t, n) {
        var i = e.r + n.r,
            r = t.x - e.x,
            a = t.y - e.y;
        if (i && (r || a)) {
            var o = t.r + n.r,
                s = r * r + a * a;
            o *= o, i *= i;
            var l = .5 + (i - o) / (2 * s),
                c = Math.sqrt(Math.max(0, 2 * o * (i + s) - (i -= s) * i - o * o)) / (2 * s);
            n.x = e.x + l * r + c * a, n.y = e.y + l * a - c * r
        } else n.x = e.x + i, n.y = e.y
    }

    function _n(e) {
        return 1 + d3.max(e, function (e) {
            return e.y
        })
    }

    function xn(e) {
        return e.reduce(function (e, t) {
            return e + t.x
        }, 0) / e.length
    }

    function kn(e) {
        var t = e.children;
        return t && t.length ? kn(t[0]) : e
    }

    function Cn(e) {
        var t, n = e.children;
        return n && (t = n.length) ? Cn(n[t - 1]) : e
    }

    function Sn(e, t) {
        return e.parent == t.parent ? 1 : 2
    }

    function An(e) {
        var t = e.children;
        return t && t.length ? t[0] : e._tree.thread
    }

    function Tn(e) {
        var t, n = e.children;
        return n && (t = n.length) ? n[t - 1] : e._tree.thread
    }

    function En(e, t) {
        var n = e.children;
        if (n && (r = n.length))
            for (var i, r, a = -1; ++a < r;) t(i = En(n[a], t), e) > 0 && (e = i);
        return e
    }

    function Dn(e, t) {
        return e.x - t.x
    }

    function $n(e, t) {
        return t.x - e.x
    }

    function Mn(e, t) {
        return e.depth - t.depth
    }

    function Rn(e, t) {
        function n(e, i) {
            var r = e.children;
            if (r && (o = r.length))
                for (var a, o, s = null, l = -1; ++l < o;) a = r[l], n(a, s), s = a;
            t(e, i)
        }
        n(e, null)
    }

    function In(e) {
        for (var t, n = 0, i = 0, r = e.children, a = r.length; --a >= 0;) t = r[a]._tree, t.prelim += n, t.mod += n, n += t.shift + (i += t.change)
    }

    function Pn(e, t, n) {
        e = e._tree, t = t._tree;
        var i = n / (t.number - e.number);
        e.change += i, t.change -= i, t.shift += n, t.prelim += n, t.mod += n
    }

    function Hn(e, t, n) {
        return e._tree.ancestor.parent == t.parent ? e._tree.ancestor : n
    }

    function On(e) {
        return {
            x: e.x,
            y: e.y,
            dx: e.dx,
            dy: e.dy
        }
    }

    function jn(e, t) {
        var n = e.x + t[3],
            i = e.y + t[0],
            r = e.dx - t[1] - t[3],
            a = e.dy - t[0] - t[2];
        return 0 > r && (n += r / 2, r = 0), 0 > a && (i += a / 2, a = 0), {
            x: n,
            y: i,
            dx: r,
            dy: a
        }
    }

    function Nn(e, t) {
        function n(e, i) {
            d3.text(e, t, function (e) {
                i(e && n.parse(e))
            })
        }

        function i(t) {
            return t.map(r).join(e)
        }

        function r(e) {
            return o.test(e) ? '"' + e.replace(/\"/g, '""') + '"' : e
        }
        var a = new RegExp("\r\n|[" + e + "\r\n]", "g"),
            o = new RegExp('["' + e + "\n]"),
            s = e.charCodeAt(0);
        return n.parse = function (e) {
            var t;
            return n.parseRows(e, function (e, n) {
                if (n) {
                    for (var i = {}, r = -1, a = t.length; ++r < a;) i[t[r]] = e[r];
                    return i
                }
                return t = e, null
            })
        }, n.parseRows = function (e, t) {
            function n() {
                if (a.lastIndex >= e.length) return l;
                if (r) return r = !1, o;
                var t = a.lastIndex;
                if (34 === e.charCodeAt(t)) {
                    for (var n = t; n++ < e.length;)
                        if (34 === e.charCodeAt(n)) {
                            if (34 !== e.charCodeAt(n + 1)) break;
                            n++
                        } a.lastIndex = n + 2;
                    var i = e.charCodeAt(n + 1);
                    return 13 === i ? (r = !0, 10 === e.charCodeAt(n + 2) && a.lastIndex++) : 10 === i && (r = !0), e.substring(t + 1, n).replace(/""/g, '"')
                }
                var c = a.exec(e);
                return c ? (r = c[0].charCodeAt(0) !== s, e.substring(t, c.index)) : (a.lastIndex = e.length, e.substring(t))
            }
            var i, r, o = {},
                l = {},
                c = [],
                u = 0;
            for (a.lastIndex = 0;
                (i = n()) !== l;) {
                for (var d = []; i !== o && i !== l;) d.push(i), i = n();
                (!t || (d = t(d, u++))) && c.push(d)
            }
            return c
        }, n.format = function (e) {
            return e.map(i).join("\n")
        }, n
    }

    function zn(e, t) {
        return function (n) {
            return n && e.hasOwnProperty(n.type) ? e[n.type](n) : t
        }
    }

    function Ln(e) {
        return "m0," + e + "a" + e + "," + e + " 0 1,1 0," + -2 * e + "a" + e + "," + e + " 0 1,1 0," + 2 * e + "z"
    }

    function Fn(e, t) {
        fa.hasOwnProperty(e.type) && fa[e.type](e, t)
    }

    function Bn(e, t) {
        Fn(e.geometry, t)
    }

    function Wn(e, t) {
        for (var n = e.features, i = 0, r = n.length; r > i; i++) Fn(n[i].geometry, t)
    }

    function Un(e, t) {
        for (var n = e.geometries, i = 0, r = n.length; r > i; i++) Fn(n[i], t)
    }

    function qn(e, t) {
        for (var n = e.coordinates, i = 0, r = n.length; r > i; i++) t.apply(null, n[i])
    }

    function Gn(e, t) {
        for (var n = e.coordinates, i = 0, r = n.length; r > i; i++)
            for (var a = n[i], o = 0, s = a.length; s > o; o++) t.apply(null, a[o])
    }

    function Yn(e, t) {
        for (var n = e.coordinates, i = 0, r = n.length; r > i; i++)
            for (var a = n[i][0], o = 0, s = a.length; s > o; o++) t.apply(null, a[o])
    }

    function Vn(e, t) {
        t.apply(null, e.coordinates)
    }

    function Xn(e, t) {
        for (var n = e.coordinates[0], i = 0, r = n.length; r > i; i++) t.apply(null, n[i])
    }

    function Kn(e) {
        return e.source
    }

    function Zn(e) {
        return e.target
    }

    function Qn() {
        function e(e) {
            var t = Math.sin(e *= f) * p,
                n = Math.sin(f - e) * p,
                i = n * a + t * d,
                s = n * o + t * h,
                l = n * r + t * u;
            return [Math.atan2(s, i) / ha, Math.atan2(l, Math.sqrt(i * i + s * s)) / ha]
        }
        var t, n, i, r, a, o, s, l, c, u, d, h, f, p;
        return e.distance = function () {
            return null == f && (p = 1 / Math.sin(f = Math.acos(Math.max(-1, Math.min(1, r * u + i * c * Math.cos(s - t)))))), f
        }, e.source = function (s) {
            var l = Math.cos(t = s[0] * ha),
                c = Math.sin(t);
            return i = Math.cos(n = s[1] * ha), r = Math.sin(n), a = i * l, o = i * c, f = null, e
        }, e.target = function (t) {
            var n = Math.cos(s = t[0] * ha),
                i = Math.sin(s);
            return c = Math.cos(l = t[1] * ha), u = Math.sin(l), d = c * n, h = c * i, f = null, e
        }, e
    }

    function Jn(e, t) {
        var n = Qn().source(e).target(t);
        return n.distance(), n
    }

    function ei(e) {
        for (var t = 0, n = 0; ;) {
            if (e(t, n)) return [t, n];
            0 === t ? (t = n + 1, n = 0) : (t -= 1, n += 1)
        }
    }

    function ti(e, t, n, i) {
        var r, a, o, s, l, c, u;
        return r = i[e], a = r[0], o = r[1], r = i[t], s = r[0], l = r[1], r = i[n], c = r[0], u = r[1], (u - o) * (s - a) - (l - o) * (c - a) > 0
    }

    function ni(e, t, n) {
        return (n[0] - t[0]) * (e[1] - t[1]) < (n[1] - t[1]) * (e[0] - t[0])
    }

    function ii(e, t, n, i) {
        var r = e[0],
            a = t[0],
            o = n[0],
            s = i[0],
            l = e[1],
            c = t[1],
            u = n[1],
            d = i[1],
            h = r - o,
            f = a - r,
            p = s - o,
            m = l - u,
            g = c - l,
            v = d - u,
            y = (p * m - v * h) / (v * f - p * g);
        return [r + y * f, l + y * g]
    }

    function ri(e, t) {
        var n = {
            list: e.map(function (e, t) {
                return {
                    index: t,
                    x: e[0],
                    y: e[1]
                }
            }).sort(function (e, t) {
                return e.y < t.y ? -1 : e.y > t.y ? 1 : e.x < t.x ? -1 : e.x > t.x ? 1 : 0
            }),
            bottomSite: null
        },
            i = {
                list: [],
                leftEnd: null,
                rightEnd: null,
                init: function () {
                    i.leftEnd = i.createHalfEdge(null, "l"), i.rightEnd = i.createHalfEdge(null, "l"), i.leftEnd.r = i.rightEnd, i.rightEnd.l = i.leftEnd, i.list.unshift(i.leftEnd, i.rightEnd)
                },
                createHalfEdge: function (e, t) {
                    return {
                        edge: e,
                        side: t,
                        vertex: null,
                        l: null,
                        r: null
                    }
                },
                insert: function (e, t) {
                    t.l = e, t.r = e.r, e.r.l = t, e.r = t
                },
                leftBound: function (e) {
                    var t = i.leftEnd;
                    do t = t.r; while (t != i.rightEnd && r.rightOf(t, e));
                    return t = t.l
                },
                del: function (e) {
                    e.l.r = e.r, e.r.l = e.l, e.edge = null
                },
                right: function (e) {
                    return e.r
                },
                left: function (e) {
                    return e.l
                },
                leftRegion: function (e) {
                    return null == e.edge ? n.bottomSite : e.edge.region[e.side]
                },
                rightRegion: function (e) {
                    return null == e.edge ? n.bottomSite : e.edge.region[ga[e.side]]
                }
            },
            r = {
                bisect: function (e, t) {
                    var n = {
                        region: {
                            l: e,
                            r: t
                        },
                        ep: {
                            l: null,
                            r: null
                        }
                    },
                        i = t.x - e.x,
                        r = t.y - e.y,
                        a = i > 0 ? i : -i,
                        o = r > 0 ? r : -r;
                    return n.c = e.x * i + e.y * r + .5 * (i * i + r * r), a > o ? (n.a = 1, n.b = r / i, n.c /= i) : (n.b = 1, n.a = i / r, n.c /= r), n
                },
                intersect: function (e, t) {
                    var n = e.edge,
                        i = t.edge;
                    if (!n || !i || n.region.r == i.region.r) return null;
                    var r = n.a * i.b - n.b * i.a;
                    if (Math.abs(r) < 1e-10) return null;
                    var a, o, s = (n.c * i.b - i.c * n.b) / r,
                        l = (i.c * n.a - n.c * i.a) / r,
                        c = n.region.r,
                        u = i.region.r;
                    c.y < u.y || c.y == u.y && c.x < u.x ? (a = e, o = n) : (a = t, o = i);
                    var d = s >= o.region.r.x;
                    return d && "l" === a.side || !d && "r" === a.side ? null : {
                        x: s,
                        y: l
                    }
                },
                rightOf: function (e, t) {
                    var n = e.edge,
                        i = n.region.r,
                        r = t.x > i.x;
                    if (r && "l" === e.side) return 1;
                    if (!r && "r" === e.side) return 0;
                    if (1 === n.a) {
                        var a = t.y - i.y,
                            o = t.x - i.x,
                            s = 0,
                            l = 0;
                        if (!r && n.b < 0 || r && n.b >= 0 ? l = s = a >= n.b * o : (l = t.x + t.y * n.b > n.c, n.b < 0 && (l = !l), l || (s = 1)), !s) {
                            var c = i.x - n.region.l.x;
                            l = n.b * (o * o - a * a) < c * a * (1 + 2 * o / c + n.b * n.b), n.b < 0 && (l = !l)
                        }
                    } else {
                        var u = n.c - n.a * t.x,
                            d = t.y - u,
                            h = t.x - i.x,
                            f = u - i.y;
                        l = d * d > h * h + f * f
                    }
                    return "l" === e.side ? l : !l
                },
                endPoint: function (e, n, i) {
                    e.ep[n] = i, e.ep[ga[n]] && t(e)
                },
                distance: function (e, t) {
                    var n = e.x - t.x,
                        i = e.y - t.y;
                    return Math.sqrt(n * n + i * i)
                }
            },
            a = {
                list: [],
                insert: function (e, t, n) {
                    e.vertex = t, e.ystar = t.y + n;
                    for (var i = 0, r = a.list, o = r.length; o > i; i++) {
                        var s = r[i];
                        if (!(e.ystar > s.ystar || e.ystar == s.ystar && t.x > s.vertex.x)) break
                    }
                    r.splice(i, 0, e)
                },
                del: function (e) {
                    for (var t = 0, n = a.list, i = n.length; i > t && n[t] != e; ++t);
                    n.splice(t, 1)
                },
                empty: function () {
                    return 0 === a.list.length
                },
                nextEvent: function (e) {
                    for (var t = 0, n = a.list, i = n.length; i > t; ++t)
                        if (n[t] == e) return n[t + 1];
                    return null
                },
                min: function () {
                    var e = a.list[0];
                    return {
                        x: e.vertex.x,
                        y: e.ystar
                    }
                },
                extractMin: function () {
                    return a.list.shift()
                }
            };
        i.init(), n.bottomSite = n.list.shift();
        for (var o, s, l, c, u, d, h, f, p, m, g, v, y, b = n.list.shift(); ;)
            if (a.empty() || (o = a.min()), b && (a.empty() || b.y < o.y || b.y == o.y && b.x < o.x)) s = i.leftBound(b), l = i.right(s), h = i.rightRegion(s), v = r.bisect(h, b), d = i.createHalfEdge(v, "l"), i.insert(s, d), m = r.intersect(s, d), m && (a.del(s), a.insert(s, m, r.distance(m, b))), s = d, d = i.createHalfEdge(v, "r"), i.insert(s, d), m = r.intersect(d, l), m && a.insert(d, m, r.distance(m, b)), b = n.list.shift();
            else {
                if (a.empty()) break;
                s = a.extractMin(), c = i.left(s), l = i.right(s), u = i.right(l), h = i.leftRegion(s), f = i.rightRegion(l), g = s.vertex, r.endPoint(s.edge, s.side, g), r.endPoint(l.edge, l.side, g), i.del(s), a.del(l), i.del(l), y = "l", h.y > f.y && (p = h, h = f, f = p, y = "r"), v = r.bisect(h, f), d = i.createHalfEdge(v, y), i.insert(c, d), r.endPoint(v, ga[y], g), m = r.intersect(c, d), m && (a.del(c), a.insert(c, m, r.distance(m, h))), m = r.intersect(d, u), m && a.insert(d, m, r.distance(m, h))
            } for (s = i.right(i.leftEnd); s != i.rightEnd; s = i.right(s)) t(s.edge)
    }

    function ai() {
        return {
            leaf: !0,
            nodes: [],
            point: null
        }
    }

    function oi(e, t, n, i, r, a) {
        if (!e(t, n, i, r, a)) {
            var o = .5 * (n + r),
                s = .5 * (i + a),
                l = t.nodes;
            l[0] && oi(e, l[0], n, i, o, s), l[1] && oi(e, l[1], o, i, r, s), l[2] && oi(e, l[2], n, s, o, a), l[3] && oi(e, l[3], o, s, r, a)
        }
    }

    function si(e) {
        return {
            x: e[0],
            y: e[1]
        }
    }

    function li() {
        this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
    }

    function ci(e) {
        return e.substring(0, 3)
    }

    function ui(e, t, n, i) {
        for (var r, a, o = 0, s = t.length, l = n.length; s > o;) {
            if (i >= l) return -1;
            if (r = t.charCodeAt(o++), 37 == r) {
                if (a = Na[t.charAt(o++)], !a || (i = a(e, n, i)) < 0) return -1
            } else if (r != n.charCodeAt(i++)) return -1
        }
        return i
    }

    function di(e) {
        return new RegExp("^(?:" + e.map(d3.requote).join("|") + ")", "i")
    }

    function hi(e) {
        for (var t = new i, n = -1, r = e.length; ++n < r;) t.set(e[n].toLowerCase(), n);
        return t
    }

    function fi(e, t, n) {
        Ra.lastIndex = 0;
        var i = Ra.exec(t.substring(n));
        return i ? n += i[0].length : -1
    }

    function pi(e, t, n) {
        Ma.lastIndex = 0;
        var i = Ma.exec(t.substring(n));
        return i ? n += i[0].length : -1
    }

    function mi(e, t, n) {
        Ha.lastIndex = 0;
        var i = Ha.exec(t.substring(n));
        return i ? (e.m = Oa.get(i[0].toLowerCase()), n += i[0].length) : -1
    }

    function gi(e, t, n) {
        Ia.lastIndex = 0;
        var i = Ia.exec(t.substring(n));
        return i ? (e.m = Pa.get(i[0].toLowerCase()), n += i[0].length) : -1
    }

    function vi(e, t, n) {
        return ui(e, ja.c.toString(), t, n)
    }

    function yi(e, t, n) {
        return ui(e, ja.x.toString(), t, n)
    }

    function bi(e, t, n) {
        return ui(e, ja.X.toString(), t, n)
    }

    function wi(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 4));
        return i ? (e.y = +i[0], n += i[0].length) : -1
    }

    function _i(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.y = xi(+i[0]), n += i[0].length) : -1
    }

    function xi(e) {
        return e + (e > 68 ? 1900 : 2e3)
    }

    function ki(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.m = i[0] - 1, n += i[0].length) : -1
    }

    function Ci(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.d = +i[0], n += i[0].length) : -1
    }

    function Si(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.H = +i[0], n += i[0].length) : -1
    }

    function Ai(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.M = +i[0], n += i[0].length) : -1
    }

    function Ti(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 2));
        return i ? (e.S = +i[0], n += i[0].length) : -1
    }

    function Ei(e, t, n) {
        za.lastIndex = 0;
        var i = za.exec(t.substring(n, n + 3));
        return i ? (e.L = +i[0], n += i[0].length) : -1
    }

    function Di(e, t, n) {
        var i = La.get(t.substring(n, n += 2).toLowerCase());
        return null == i ? -1 : (e.p = i, n)
    }

    function $i(e) {
        var t = e.getTimezoneOffset(),
            n = t > 0 ? "-" : "+",
            i = ~~(Math.abs(t) / 60),
            r = Math.abs(t) % 60;
        return n + Ta(i) + Ta(r)
    }

    function Mi(e) {
        return e.toISOString()
    }

    function Ri(e, t, n) {
        function i(t) {
            var n = e(t),
                i = a(n, 1);
            return i - t > t - n ? n : i
        }

        function r(n) {
            return t(n = e(new va(n - 1)), 1), n
        }

        function a(e, n) {
            return t(e = new va(+e), n), e
        }

        function o(e, i, a) {
            var o = r(e),
                s = [];
            if (a > 1)
                for (; i > o;) n(o) % a || s.push(new Date(+o)), t(o, 1);
            else
                for (; i > o;) s.push(new Date(+o)), t(o, 1);
            return s
        }

        function s(e, t, n) {
            try {
                va = li;
                var i = new li;
                return i._ = e, o(i, t, n)
            } finally {
                va = Date
            }
        }
        e.floor = e, e.round = i, e.ceil = r, e.offset = a, e.range = o;
        var l = e.utc = Ii(e);
        return l.floor = l, l.round = Ii(i), l.ceil = Ii(r), l.offset = Ii(a), l.range = s, e
    }

    function Ii(e) {
        return function (t, n) {
            try {
                va = li;
                var i = new li;
                return i._ = t, e(i, n)._
            } finally {
                va = Date
            }
        }
    }

    function Pi(e, t, n) {
        function i(t) {
            return e(t)
        }
        return i.invert = function (t) {
            return Oi(e.invert(t))
        }, i.domain = function (t) {
            return arguments.length ? (e.domain(t), i) : e.domain().map(Oi)
        }, i.nice = function (e) {
            return i.domain(Ie(i.domain(), function () {
                return e
            }))
        }, i.ticks = function (n, r) {
            var a = Hi(i.domain());
            if ("function" != typeof n) {
                var o = a[1] - a[0],
                    s = o / n,
                    l = d3.bisect(Ba, s);
                if (l == Ba.length) return t.year(a, n);
                if (!l) return e.ticks(n).map(Oi);
                Math.log(s / Ba[l - 1]) < Math.log(Ba[l] / s) && --l, n = t[l], r = n[1], n = n[0].range
            }
            return n(a[0], new Date(+a[1] + 1), r)
        }, i.tickFormat = function () {
            return n
        }, i.copy = function () {
            return Pi(e.copy(), t, n)
        }, d3.rebind(i, e, "range", "rangeRound", "interpolate", "clamp")
    }

    function Hi(e) {
        var t = e[0],
            n = e[e.length - 1];
        return n > t ? [t, n] : [n, t]
    }

    function Oi(e) {
        return new Date(e)
    }

    function ji(e) {
        return function (t) {
            for (var n = e.length - 1, i = e[n]; !i[1](t);) i = e[--n];
            return i[0](t)
        }
    }

    function Ni(e) {
        var t = new Date(e, 0, 1);
        return t.setFullYear(e), t
    }

    function zi(e) {
        var t = e.getFullYear(),
            n = Ni(t),
            i = Ni(t + 1);
        return t + (e - n) / (i - n)
    }

    function Li(e) {
        var t = new Date(Date.UTC(e, 0, 1));
        return t.setUTCFullYear(e), t
    }

    function Fi(e) {
        var t = e.getUTCFullYear(),
            n = Li(t),
            i = Li(t + 1);
        return t + (e - n) / (i - n)
    }
    Date.now || (Date.now = function () {
        return +new Date
    });
    try {
        document.createElement("div").style.setProperty("opacity", 0, "")
    } catch (Bi) {
        var Wi = CSSStyleDeclaration.prototype,
            Ui = Wi.setProperty;
        Wi.setProperty = function (e, t, n) {
            Ui.call(this, e, t + "", n)
        }
    }
    d3 = {
        version: "2.10.3"
    };
    var qi = n;
    try {
        qi(document.documentElement.childNodes)[0].nodeType
    } catch (Gi) {
        qi = t
    }
    var Yi = [].__proto__ ? function (e, t) {
        e.__proto__ = t
    } : function (e, t) {
        for (var n in t) e[n] = t[n]
    };
    d3.map = function (e) {
        var t = new i;
        for (var n in e) t.set(n, e[n]);
        return t
    }, e(i, {
        has: function (e) {
            return Vi + e in this
        },
        get: function (e) {
            return this[Vi + e]
        },
        set: function (e, t) {
            return this[Vi + e] = t
        },
        remove: function (e) {
            return e = Vi + e, e in this && delete this[e]
        },
        keys: function () {
            var e = [];
            return this.forEach(function (t) {
                e.push(t)
            }), e
        },
        values: function () {
            var e = [];
            return this.forEach(function (t, n) {
                e.push(n)
            }), e
        },
        entries: function () {
            var e = [];
            return this.forEach(function (t, n) {
                e.push({
                    key: t,
                    value: n
                })
            }), e
        },
        forEach: function (e) {
            for (var t in this) t.charCodeAt(0) === Xi && e.call(this, t.substring(1), this[t])
        }
    });
    var Vi = "\x00",
        Xi = Vi.charCodeAt(0);
    d3.functor = s, d3.rebind = function (e, t) {
        for (var n, i = 1, r = arguments.length; ++i < r;) e[n = arguments[i]] = l(e, t, t[n]);
        return e
    }, d3.ascending = function (e, t) {
        return t > e ? -1 : e > t ? 1 : e >= t ? 0 : NaN
    }, d3.descending = function (e, t) {
        return e > t ? -1 : t > e ? 1 : t >= e ? 0 : NaN
    }, d3.mean = function (e, t) {
        var n, i = e.length,
            r = 0,
            a = -1,
            o = 0;
        if (1 === arguments.length)
            for (; ++a < i;) c(n = e[a]) && (r += (n - r) / ++o);
        else
            for (; ++a < i;) c(n = t.call(e, e[a], a)) && (r += (n - r) / ++o);
        return o ? r : void 0
    }, d3.median = function (e, t) {
        return arguments.length > 1 && (e = e.map(t)), e = e.filter(c), e.length ? d3.quantile(e.sort(d3.ascending), .5) : void 0
    }, d3.min = function (e, t) {
        var n, i, r = -1,
            a = e.length;
        if (1 === arguments.length) {
            for (; ++r < a && (null == (n = e[r]) || n != n);) n = void 0;
            for (; ++r < a;) null != (i = e[r]) && n > i && (n = i)
        } else {
            for (; ++r < a && (null == (n = t.call(e, e[r], r)) || n != n);) n = void 0;
            for (; ++r < a;) null != (i = t.call(e, e[r], r)) && n > i && (n = i)
        }
        return n
    }, d3.max = function (e, t) {
        var n, i, r = -1,
            a = e.length;
        if (1 === arguments.length) {
            for (; ++r < a && (null == (n = e[r]) || n != n);) n = void 0;
            for (; ++r < a;) null != (i = e[r]) && i > n && (n = i)
        } else {
            for (; ++r < a && (null == (n = t.call(e, e[r], r)) || n != n);) n = void 0;
            for (; ++r < a;) null != (i = t.call(e, e[r], r)) && i > n && (n = i)
        }
        return n
    }, d3.extent = function (e, t) {
        var n, i, r, a = -1,
            o = e.length;
        if (1 === arguments.length) {
            for (; ++a < o && (null == (n = r = e[a]) || n != n);) n = r = void 0;
            for (; ++a < o;) null != (i = e[a]) && (n > i && (n = i), i > r && (r = i))
        } else {
            for (; ++a < o && (null == (n = r = t.call(e, e[a], a)) || n != n);) n = void 0;
            for (; ++a < o;) null != (i = t.call(e, e[a], a)) && (n > i && (n = i), i > r && (r = i))
        }
        return [n, r]
    }, d3.random = {
        normal: function (e, t) {
            var n = arguments.length;
            return 2 > n && (t = 1), 1 > n && (e = 0),
                function () {
                    var n, i, r;
                    do n = 2 * Math.random() - 1, i = 2 * Math.random() - 1, r = n * n + i * i; while (!r || r > 1);
                    return e + t * n * Math.sqrt(-2 * Math.log(r) / r)
                }
        },
        logNormal: function (e, t) {
            var n = arguments.length;
            2 > n && (t = 1), 1 > n && (e = 0);
            var i = d3.random.normal();
            return function () {
                return Math.exp(e + t * i())
            }
        },
        irwinHall: function (e) {
            return function () {
                for (var t = 0, n = 0; e > n; n++) t += Math.random();
                return t / e
            }
        }
    }, d3.sum = function (e, t) {
        var n, i = 0,
            r = e.length,
            a = -1;
        if (1 === arguments.length)
            for (; ++a < r;) isNaN(n = +e[a]) || (i += n);
        else
            for (; ++a < r;) isNaN(n = +t.call(e, e[a], a)) || (i += n);
        return i
    }, d3.quantile = function (e, t) {
        var n = (e.length - 1) * t + 1,
            i = Math.floor(n),
            r = e[i - 1],
            a = n - i;
        return a ? r + a * (e[i] - r) : r
    }, d3.transpose = function (e) {
        return d3.zip.apply(d3, e)
    }, d3.zip = function () {
        if (!(i = arguments.length)) return [];
        for (var e = -1, t = d3.min(arguments, u), n = new Array(t); ++e < t;)
            for (var i, r = -1, a = n[e] = new Array(i); ++r < i;) a[r] = arguments[r][e];
        return n
    }, d3.bisector = function (e) {
        return {
            left: function (t, n, i, r) {
                for (arguments.length < 3 && (i = 0), arguments.length < 4 && (r = t.length); r > i;) {
                    var a = i + r >>> 1;
                    e.call(t, t[a], a) < n ? i = a + 1 : r = a
                }
                return i
            },
            right: function (t, n, i, r) {
                for (arguments.length < 3 && (i = 0), arguments.length < 4 && (r = t.length); r > i;) {
                    var a = i + r >>> 1;
                    n < e.call(t, t[a], a) ? r = a : i = a + 1
                }
                return i
            }
        }
    };
    var Ki = d3.bisector(function (e) {
        return e
    });
    d3.bisectLeft = Ki.left, d3.bisect = d3.bisectRight = Ki.right, d3.first = function (e, t) {
        var n, i = 0,
            r = e.length,
            a = e[0];
        for (1 === arguments.length && (t = d3.ascending); ++i < r;) t.call(e, a, n = e[i]) > 0 && (a = n);
        return a
    }, d3.last = function (e, t) {
        var n, i = 0,
            r = e.length,
            a = e[0];
        for (1 === arguments.length && (t = d3.ascending); ++i < r;) t.call(e, a, n = e[i]) <= 0 && (a = n);
        return a
    }, d3.nest = function () {
        function e(t, s) {
            if (s >= o.length) return r ? r.call(a, t) : n ? t.sort(n) : t;
            for (var l, c, u, d = -1, h = t.length, f = o[s++], p = new i, m = {}; ++d < h;)(u = p.get(l = f(c = t[d]))) ? u.push(c) : p.set(l, [c]);
            return p.forEach(function (t, n) {
                m[t] = e(n, s)
            }), m
        }

        function t(e, n) {
            if (n >= o.length) return e;
            var i, r = [],
                a = s[n++];
            for (i in e) r.push({
                key: i,
                values: t(e[i], n)
            });
            return a && r.sort(function (e, t) {
                return a(e.key, t.key)
            }), r
        }
        var n, r, a = {},
            o = [],
            s = [];
        return a.map = function (t) {
            return e(t, 0)
        }, a.entries = function (n) {
            return t(e(n, 0), 0)
        }, a.key = function (e) {
            return o.push(e), a
        }, a.sortKeys = function (e) {
            return s[o.length - 1] = e, a
        }, a.sortValues = function (e) {
            return n = e, a
        }, a.rollup = function (e) {
            return r = e, a
        }, a
    }, d3.keys = function (e) {
        var t = [];
        for (var n in e) t.push(n);
        return t
    }, d3.values = function (e) {
        var t = [];
        for (var n in e) t.push(e[n]);
        return t
    }, d3.entries = function (e) {
        var t = [];
        for (var n in e) t.push({
            key: n,
            value: e[n]
        });
        return t
    }, d3.permute = function (e, t) {
        for (var n = [], i = -1, r = t.length; ++i < r;) n[i] = e[t[i]];
        return n
    }, d3.merge = function (e) {
        return Array.prototype.concat.apply([], e)
    }, d3.split = function (e, t) {
        var n, i = [],
            r = [],
            a = -1,
            o = e.length;
        for (arguments.length < 2 && (t = d); ++a < o;) t.call(r, n = e[a], a) ? r = [] : (r.length || i.push(r), r.push(n));
        return i
    }, d3.range = function (e, t, n) {
        if (arguments.length < 3 && (n = 1, arguments.length < 2 && (t = e, e = 0)), (t - e) / n === 1 / 0) throw new Error("infinite range");
        var i, r = [],
            a = f(Math.abs(n)),
            o = -1;
        if (e *= a, t *= a, n *= a, 0 > n)
            for (;
                (i = e + n * ++o) > t;) r.push(i / a);
        else
            for (;
                (i = e + n * ++o) < t;) r.push(i / a);
        return r
    }, d3.requote = function (e) {
        return e.replace(Zi, "\\$&")
    };
    var Zi = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
    d3.round = function (e, t) {
        return t ? Math.round(e * (t = Math.pow(10, t))) / t : Math.round(e)
    }, d3.xhr = function (e, t, n) {
        var i = new XMLHttpRequest;
        arguments.length < 3 ? (n = t, t = null) : t && i.overrideMimeType && i.overrideMimeType(t), i.open("GET", e, !0), t && i.setRequestHeader("Accept", t), i.onreadystatechange = function () {
            if (4 === i.readyState) {
                var e = i.status;
                n(!e && i.response || e >= 200 && 300 > e || 304 === e ? i : null)
            }
        }, i.send(null)
    }, d3.text = function (e, t, n) {
        function i(e) {
            n(e && e.responseText)
        }
        arguments.length < 3 && (n = t, t = null), d3.xhr(e, t, i)
    }, d3.json = function (e, t) {
        d3.text(e, "application/json", function (e) {
            t(e ? JSON.parse(e) : null)
        })
    }, d3.html = function (e, t) {
        d3.text(e, "text/html", function (e) {
            if (null != e) {
                var n = document.createRange();
                n.selectNode(document.body), e = n.createContextualFragment(e)
            }
            t(e)
        })
    }, d3.xml = function (e, t, n) {
        function i(e) {
            n(e && e.responseXML)
        }
        arguments.length < 3 && (n = t, t = null), d3.xhr(e, t, i)
    };
    var Qi = {
        svg: "http://www.w3.org/2000/svg",
        xhtml: "http://www.w3.org/1999/xhtml",
        xlink: "http://www.w3.org/1999/xlink",
        xml: "http://www.w3.org/XML/1998/namespace",
        xmlns: "http://www.w3.org/2000/xmlns/"
    };
    d3.ns = {
        prefix: Qi,
        qualify: function (e) {
            var t = e.indexOf(":"),
                n = e;
            return t >= 0 && (n = e.substring(0, t), e = e.substring(t + 1)), Qi.hasOwnProperty(n) ? {
                space: Qi[n],
                local: e
            } : e
        }
    }, d3.dispatch = function () {
        for (var e = new p, t = -1, n = arguments.length; ++t < n;) e[arguments[t]] = m(e);
        return e
    }, p.prototype.on = function (e, t) {
        var n = e.indexOf("."),
            i = "";
        return n > 0 && (i = e.substring(n + 1), e = e.substring(0, n)), arguments.length < 2 ? this[e].on(i) : this[e].on(i, t)
    }, d3.format = function (e) {
        var t = Ji.exec(e),
            n = t[1] || " ",
            i = t[3] || "",
            r = t[5],
            a = +t[6],
            o = t[7],
            s = t[8],
            l = t[9],
            c = 1,
            u = "",
            d = !1;
        switch (s && (s = +s.substring(1)), r && (n = "0", o && (a -= Math.floor((a - 1) / 4))), l) {
            case "n":
                o = !0, l = "g";
                break;
            case "%":
                c = 100, u = "%", l = "f";
                break;
            case "p":
                c = 100, u = "%", l = "r";
                break;
            case "d":
                d = !0, s = 0;
                break;
            case "s":
                c = -1, l = "r"
        }
        return "r" != l || s || (l = "g"), l = er.get(l) || v,
            function (e) {
                if (d && e % 1) return "";
                var t = 0 > e && (e = -e) ? "-" : i;
                if (0 > c) {
                    var h = d3.formatPrefix(e, s);
                    e = h.scale(e), u = h.symbol
                } else e *= c;
                if (e = l(e, s), r) {
                    var f = e.length + t.length;
                    a > f && (e = new Array(a - f + 1).join(n) + e), o && (e = y(e)), e = t + e
                } else {
                    o && (e = y(e)), e = t + e;
                    var f = e.length;
                    a > f && (e = new Array(a - f + 1).join(n) + e)
                }
                return e + u
            }
    };
    var Ji = /(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,
        er = d3.map({
            g: function (e, t) {
                return e.toPrecision(t)
            },
            e: function (e, t) {
                return e.toExponential(t)
            },
            f: function (e, t) {
                return e.toFixed(t)
            },
            r: function (e, t) {
                return d3.round(e, t = g(e, t)).toFixed(Math.max(0, Math.min(20, t)))
            }
        }),
        tr = ["y", "z", "a", "f", "p", "n", "\u03bc", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(b);
    d3.formatPrefix = function (e, t) {
        var n = 0;
        return e && (0 > e && (e *= -1), t && (e = d3.round(e, g(e, t))), n = 1 + Math.floor(1e-12 + Math.log(e) / Math.LN10), n = Math.max(-24, Math.min(24, 3 * Math.floor((0 >= n ? n + 1 : n - 1) / 3)))), tr[8 + n / 3]
    };
    var nr = C(2),
        ir = C(3),
        rr = function () {
            return k
        },
        ar = d3.map({
            linear: rr,
            poly: C,
            quad: function () {
                return nr
            },
            cubic: function () {
                return ir
            },
            sin: function () {
                return S
            },
            exp: function () {
                return A
            },
            circle: function () {
                return T
            },
            elastic: E,
            back: D,
            bounce: function () {
                return $
            }
        }),
        or = d3.map({
            "in": k,
            out: _,
            "in-out": x,
            "out-in": function (e) {
                return x(_(e))
            }
        });
    d3.ease = function (e) {
        var t = e.indexOf("-"),
            n = t >= 0 ? e.substring(0, t) : e,
            i = t >= 0 ? e.substring(t + 1) : "in";
        return n = ar.get(n) || rr, i = or.get(i) || k, w(i(n.apply(null, Array.prototype.slice.call(arguments, 1))))
    }, d3.event = null, d3.transform = function (e) {
        var t = document.createElementNS(d3.ns.prefix.svg, "g");
        return (d3.transform = function (e) {
            t.setAttribute("transform", e);
            var n = t.transform.baseVal.consolidate();
            return new P(n ? n.matrix : lr)
        })(e)
    }, P.prototype.toString = function () {
        return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
    };
    var sr = 180 / Math.PI,
        lr = {
            a: 1,
            b: 0,
            c: 0,
            d: 1,
            e: 0,
            f: 0
        };
    d3.interpolate = function (e, t) {
        for (var n, i = d3.interpolators.length; --i >= 0 && !(n = d3.interpolators[i](e, t)););
        return n
    }, d3.interpolateNumber = function (e, t) {
        return t -= e,
            function (n) {
                return e + t * n
            }
    }, d3.interpolateRound = function (e, t) {
        return t -= e,
            function (n) {
                return Math.round(e + t * n)
            }
    }, d3.interpolateString = function (e, t) {
        var n, i, r, a, o, s = 0,
            l = 0,
            c = [],
            u = [];
        for (cr.lastIndex = 0, i = 0; n = cr.exec(t); ++i) n.index && c.push(t.substring(s, l = n.index)), u.push({
            i: c.length,
            x: n[0]
        }), c.push(null), s = cr.lastIndex;
        for (s < t.length && c.push(t.substring(s)), i = 0, a = u.length;
            (n = cr.exec(e)) && a > i; ++i)
            if (o = u[i], o.x == n[0]) {
                if (o.i)
                    if (null == c[o.i + 1])
                        for (c[o.i - 1] += o.x, c.splice(o.i, 1), r = i + 1; a > r; ++r) u[r].i--;
                    else
                        for (c[o.i - 1] += o.x + c[o.i + 1], c.splice(o.i, 2), r = i + 1; a > r; ++r) u[r].i -= 2;
                else if (null == c[o.i + 1]) c[o.i] = o.x;
                else
                    for (c[o.i] = o.x + c[o.i + 1], c.splice(o.i + 1, 1), r = i + 1; a > r; ++r) u[r].i--;
                u.splice(i, 1), a--, i--
            } else o.x = d3.interpolateNumber(parseFloat(n[0]), parseFloat(o.x));
        for (; a > i;) o = u.pop(), null == c[o.i + 1] ? c[o.i] = o.x : (c[o.i] = o.x + c[o.i + 1], c.splice(o.i + 1, 1)), a--;
        return 1 === c.length ? null == c[0] ? u[0].x : function () {
            return t
        } : function (e) {
            for (i = 0; a > i; ++i) c[(o = u[i]).i] = o.x(e);
            return c.join("")
        }
    }, d3.interpolateTransform = function (e, t) {
        var n, i = [],
            r = [],
            a = d3.transform(e),
            o = d3.transform(t),
            s = a.translate,
            l = o.translate,
            c = a.rotate,
            u = o.rotate,
            d = a.skew,
            h = o.skew,
            f = a.scale,
            p = o.scale;
        return s[0] != l[0] || s[1] != l[1] ? (i.push("translate(", null, ",", null, ")"), r.push({
            i: 1,
            x: d3.interpolateNumber(s[0], l[0])
        }, {
            i: 3,
            x: d3.interpolateNumber(s[1], l[1])
        })) : l[0] || l[1] ? i.push("translate(" + l + ")") : i.push(""), c != u ? (c - u > 180 ? u += 360 : u - c > 180 && (c += 360), r.push({
            i: i.push(i.pop() + "rotate(", null, ")") - 2,
            x: d3.interpolateNumber(c, u)
        })) : u && i.push(i.pop() + "rotate(" + u + ")"), d != h ? r.push({
            i: i.push(i.pop() + "skewX(", null, ")") - 2,
            x: d3.interpolateNumber(d, h)
        }) : h && i.push(i.pop() + "skewX(" + h + ")"), f[0] != p[0] || f[1] != p[1] ? (n = i.push(i.pop() + "scale(", null, ",", null, ")"), r.push({
            i: n - 4,
            x: d3.interpolateNumber(f[0], p[0])
        }, {
            i: n - 2,
            x: d3.interpolateNumber(f[1], p[1])
        })) : (1 != p[0] || 1 != p[1]) && i.push(i.pop() + "scale(" + p + ")"), n = r.length,
            function (e) {
                for (var t, a = -1; ++a < n;) i[(t = r[a]).i] = t.x(e);
                return i.join("")
            }
    }, d3.interpolateRgb = function (e, t) {
        e = d3.rgb(e), t = d3.rgb(t);
        var n = e.r,
            i = e.g,
            r = e.b,
            a = t.r - n,
            o = t.g - i,
            s = t.b - r;
        return function (e) {
            return "#" + U(Math.round(n + a * e)) + U(Math.round(i + o * e)) + U(Math.round(r + s * e))
        }
    }, d3.interpolateHsl = function (e, t) {
        e = d3.hsl(e), t = d3.hsl(t);
        var n = e.h,
            i = e.s,
            r = e.l,
            a = t.h - n,
            o = t.s - i,
            s = t.l - r;
        return a > 180 ? a -= 360 : -180 > a && (a += 360),
            function (e) {
                return Q(n + a * e, i + o * e, r + s * e) + ""
            }
    }, d3.interpolateLab = function (e, t) {
        e = d3.lab(e), t = d3.lab(t);
        var n = e.l,
            i = e.a,
            r = e.b,
            a = t.l - n,
            o = t.a - i,
            s = t.b - r;
        return function (e) {
            return re(n + a * e, i + o * e, r + s * e) + ""
        }
    }, d3.interpolateHcl = function (e, t) {
        e = d3.hcl(e), t = d3.hcl(t);
        var n = e.h,
            i = e.c,
            r = e.l,
            a = t.h - n,
            o = t.c - i,
            s = t.l - r;
        return a > 180 ? a -= 360 : -180 > a && (a += 360),
            function (e) {
                return te(n + a * e, i + o * e, r + s * e) + ""
            }
    }, d3.interpolateArray = function (e, t) {
        var n, i = [],
            r = [],
            a = e.length,
            o = t.length,
            s = Math.min(e.length, t.length);
        for (n = 0; s > n; ++n) i.push(d3.interpolate(e[n], t[n]));
        for (; a > n; ++n) r[n] = e[n];
        for (; o > n; ++n) r[n] = t[n];
        return function (e) {
            for (n = 0; s > n; ++n) r[n] = i[n](e);
            return r
        }
    }, d3.interpolateObject = function (e, t) {
        var n, i = {},
            r = {};
        for (n in e) n in t ? i[n] = N(n)(e[n], t[n]) : r[n] = e[n];
        for (n in t) n in e || (r[n] = t[n]);
        return function (e) {
            for (n in i) r[n] = i[n](e);
            return r
        }
    };
    var cr = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
    d3.interpolators = [d3.interpolateObject, function (e, t) {
        return t instanceof Array && d3.interpolateArray(e, t)
    }, function (e, t) {
        return ("string" == typeof e || "string" == typeof t) && d3.interpolateString(e + "", t + "")
    }, function (e, t) {
        return ("string" == typeof t ? dr.has(t) || /^(#|rgb\(|hsl\()/.test(t) : t instanceof F) && d3.interpolateRgb(e, t)
    }, function (e, t) {
        return !isNaN(e = +e) && !isNaN(t = +t) && d3.interpolateNumber(e, t)
    }], F.prototype.toString = function () {
        return this.rgb() + ""
    }, d3.rgb = function (e, t, n) {
        return 1 === arguments.length ? e instanceof W ? B(e.r, e.g, e.b) : q("" + e, B, Q) : B(~~e, ~~t, ~~n)
    };
    var ur = W.prototype = new F;
    ur.brighter = function (e) {
        e = Math.pow(.7, arguments.length ? e : 1);
        var t = this.r,
            n = this.g,
            i = this.b,
            r = 30;
        return t || n || i ? (t && r > t && (t = r), n && r > n && (n = r), i && r > i && (i = r), B(Math.min(255, Math.floor(t / e)), Math.min(255, Math.floor(n / e)), Math.min(255, Math.floor(i / e)))) : B(r, r, r)
    }, ur.darker = function (e) {
        return e = Math.pow(.7, arguments.length ? e : 1), B(Math.floor(e * this.r), Math.floor(e * this.g), Math.floor(e * this.b))
    }, ur.hsl = function () {
        return G(this.r, this.g, this.b)
    }, ur.toString = function () {
        return "#" + U(this.r) + U(this.g) + U(this.b)
    };
    var dr = d3.map({
        aliceblue: "#f0f8ff",
        antiquewhite: "#faebd7",
        aqua: "#00ffff",
        aquamarine: "#7fffd4",
        azure: "#f0ffff",
        beige: "#f5f5dc",
        bisque: "#ffe4c4",
        black: "#000000",
        blanchedalmond: "#ffebcd",
        blue: "#0000ff",
        blueviolet: "#8a2be2",
        brown: "#a52a2a",
        burlywood: "#deb887",
        cadetblue: "#5f9ea0",
        chartreuse: "#7fff00",
        chocolate: "#d2691e",
        coral: "#ff7f50",
        cornflowerblue: "#6495ed",
        cornsilk: "#fff8dc",
        crimson: "#dc143c",
        cyan: "#00ffff",
        darkblue: "#00008b",
        darkcyan: "#008b8b",
        darkgoldenrod: "#b8860b",
        darkgray: "#a9a9a9",
        darkgreen: "#006400",
        darkgrey: "#a9a9a9",
        darkkhaki: "#bdb76b",
        darkmagenta: "#8b008b",
        darkolivegreen: "#556b2f",
        darkorange: "#ff8c00",
        darkorchid: "#9932cc",
        darkred: "#8b0000",
        darksalmon: "#e9967a",
        darkseagreen: "#8fbc8f",
        darkslateblue: "#483d8b",
        darkslategray: "#2f4f4f",
        darkslategrey: "#2f4f4f",
        darkturquoise: "#00ced1",
        darkviolet: "#9400d3",
        deeppink: "#ff1493",
        deepskyblue: "#00bfff",
        dimgray: "#696969",
        dimgrey: "#696969",
        dodgerblue: "#1e90ff",
        firebrick: "#b22222",
        floralwhite: "#fffaf0",
        forestgreen: "#228b22",
        fuchsia: "#ff00ff",
        gainsboro: "#dcdcdc",
        ghostwhite: "#f8f8ff",
        gold: "#ffd700",
        goldenrod: "#daa520",
        gray: "#808080",
        green: "#008000",
        greenyellow: "#adff2f",
        grey: "#808080",
        honeydew: "#f0fff0",
        hotpink: "#ff69b4",
        indianred: "#cd5c5c",
        indigo: "#4b0082",
        ivory: "#fffff0",
        khaki: "#f0e68c",
        lavender: "#e6e6fa",
        lavenderblush: "#fff0f5",
        lawngreen: "#7cfc00",
        lemonchiffon: "#fffacd",
        lightblue: "#add8e6",
        lightcoral: "#f08080",
        lightcyan: "#e0ffff",
        lightgoldenrodyellow: "#fafad2",
        lightgray: "#d3d3d3",
        lightgreen: "#90ee90",
        lightgrey: "#d3d3d3",
        lightpink: "#ffb6c1",
        lightsalmon: "#ffa07a",
        lightseagreen: "#20b2aa",
        lightskyblue: "#87cefa",
        lightslategray: "#778899",
        lightslategrey: "#778899",
        lightsteelblue: "#b0c4de",
        lightyellow: "#ffffe0",
        lime: "#00ff00",
        limegreen: "#32cd32",
        linen: "#faf0e6",
        magenta: "#ff00ff",
        maroon: "#800000",
        mediumaquamarine: "#66cdaa",
        mediumblue: "#0000cd",
        mediumorchid: "#ba55d3",
        mediumpurple: "#9370db",
        mediumseagreen: "#3cb371",
        mediumslateblue: "#7b68ee",
        mediumspringgreen: "#00fa9a",
        mediumturquoise: "#48d1cc",
        mediumvioletred: "#c71585",
        midnightblue: "#191970",
        mintcream: "#f5fffa",
        mistyrose: "#ffe4e1",
        moccasin: "#ffe4b5",
        navajowhite: "#ffdead",
        navy: "#000080",
        oldlace: "#fdf5e6",
        olive: "#808000",
        olivedrab: "#6b8e23",
        orange: "#ffa500",
        orangered: "#ff4500",
        orchid: "#da70d6",
        palegoldenrod: "#eee8aa",
        palegreen: "#98fb98",
        paleturquoise: "#afeeee",
        palevioletred: "#db7093",
        papayawhip: "#ffefd5",
        peachpuff: "#ffdab9",
        peru: "#cd853f",
        pink: "#ffc0cb",
        plum: "#dda0dd",
        powderblue: "#b0e0e6",
        purple: "#800080",
        red: "#ff0000",
        rosybrown: "#bc8f8f",
        royalblue: "#4169e1",
        saddlebrown: "#8b4513",
        salmon: "#fa8072",
        sandybrown: "#f4a460",
        seagreen: "#2e8b57",
        seashell: "#fff5ee",
        sienna: "#a0522d",
        silver: "#c0c0c0",
        skyblue: "#87ceeb",
        slateblue: "#6a5acd",
        slategray: "#708090",
        slategrey: "#708090",
        snow: "#fffafa",
        springgreen: "#00ff7f",
        steelblue: "#4682b4",
        tan: "#d2b48c",
        teal: "#008080",
        thistle: "#d8bfd8",
        tomato: "#ff6347",
        turquoise: "#40e0d0",
        violet: "#ee82ee",
        wheat: "#f5deb3",
        white: "#ffffff",
        whitesmoke: "#f5f5f5",
        yellow: "#ffff00",
        yellowgreen: "#9acd32"
    });
    dr.forEach(function (e, t) {
        dr.set(e, q(t, B, Q))
    }), d3.hsl = function (e, t, n) {
        return 1 === arguments.length ? e instanceof Z ? K(e.h, e.s, e.l) : q("" + e, G, K) : K(+e, +t, +n)
    };
    var hr = Z.prototype = new F;
    hr.brighter = function (e) {
        return e = Math.pow(.7, arguments.length ? e : 1), K(this.h, this.s, this.l / e)
    }, hr.darker = function (e) {
        return e = Math.pow(.7, arguments.length ? e : 1), K(this.h, this.s, e * this.l)
    }, hr.rgb = function () {
        return Q(this.h, this.s, this.l)
    }, d3.hcl = function (e, t, n) {
        return 1 === arguments.length ? e instanceof ee ? J(e.h, e.c, e.l) : e instanceof ie ? ae(e.l, e.a, e.b) : ae((e = Y((e = d3.rgb(e)).r, e.g, e.b)).l, e.a, e.b) : J(+e, +t, +n)
    };
    var fr = ee.prototype = new F;
    fr.brighter = function (e) {
        return J(this.h, this.c, Math.min(100, this.l + pr * (arguments.length ? e : 1)))
    }, fr.darker = function (e) {
        return J(this.h, this.c, Math.max(0, this.l - pr * (arguments.length ? e : 1)))
    }, fr.rgb = function () {
        return te(this.h, this.c, this.l).rgb()
    }, d3.lab = function (e, t, n) {
        return 1 === arguments.length ? e instanceof ie ? ne(e.l, e.a, e.b) : e instanceof ee ? te(e.l, e.c, e.h) : Y((e = d3.rgb(e)).r, e.g, e.b) : ne(+e, +t, +n)
    };
    var pr = 18,
        mr = .95047,
        gr = 1,
        vr = 1.08883,
        yr = ie.prototype = new F;
    yr.brighter = function (e) {
        return ne(Math.min(100, this.l + pr * (arguments.length ? e : 1)), this.a, this.b)
    }, yr.darker = function (e) {
        return ne(Math.max(0, this.l - pr * (arguments.length ? e : 1)), this.a, this.b)
    }, yr.rgb = function () {
        return re(this.l, this.a, this.b)
    };
    var br = function (e, t) {
        return t.querySelector(e)
    },
        wr = function (e, t) {
            return t.querySelectorAll(e)
        },
        _r = document.documentElement,
        xr = _r.matchesSelector || _r.webkitMatchesSelector || _r.mozMatchesSelector || _r.msMatchesSelector || _r.oMatchesSelector,
        kr = function (e, t) {
            return xr.call(e, t)
        };
    "function" == typeof Sizzle && (br = function (e, t) {
        return Sizzle(e, t)[0] || null
    }, wr = function (e, t) {
        return Sizzle.uniqueSort(Sizzle(e, t))
    }, kr = Sizzle.matchesSelector);
    var Cr = [];
    d3.selection = function () {
        return Sr
    }, d3.selection.prototype = Cr, Cr.select = function (e) {
        var t, n, i, r, a = [];
        "function" != typeof e && (e = ue(e));
        for (var o = -1, s = this.length; ++o < s;) {
            a.push(t = []), t.parentNode = (i = this[o]).parentNode;
            for (var l = -1, c = i.length; ++l < c;)(r = i[l]) ? (t.push(n = e.call(r, r.__data__, l)), n && "__data__" in r && (n.__data__ = r.__data__)) : t.push(null)
        }
        return ce(a)
    }, Cr.selectAll = function (e) {
        var t, n, i = [];
        "function" != typeof e && (e = de(e));
        for (var r = -1, a = this.length; ++r < a;)
            for (var o = this[r], s = -1, l = o.length; ++s < l;)(n = o[s]) && (i.push(t = qi(e.call(n, n.__data__, s))), t.parentNode = n);
        return ce(i)
    }, Cr.attr = function (e, t) {
        if (arguments.length < 2) {
            if ("string" == typeof e) {
                var n = this.node();
                return e = d3.ns.qualify(e), e.local ? n.getAttributeNS(e.space, e.local) : n.getAttribute(e)
            }
            for (t in e) this.each(he(t, e[t]));
            return this
        }
        return this.each(he(e, t))
    }, Cr.classed = function (e, t) {
        if (arguments.length < 2) {
            if ("string" == typeof e) {
                var n = this.node(),
                    i = (e = e.trim().split(/^|\s+/g)).length,
                    r = -1;
                if (t = n.classList) {
                    for (; ++r < i;)
                        if (!t.contains(e[r])) return !1
                } else
                    for (t = n.className, null != t.baseVal && (t = t.baseVal); ++r < i;)
                        if (!fe(e[r]).test(t)) return !1;
                return !0
            }
            for (t in e) this.each(pe(t, e[t]));
            return this
        }
        return this.each(pe(e, t))
    }, Cr.style = function (e, t, n) {
        var i = arguments.length;
        if (3 > i) {
            if ("string" != typeof e) {
                2 > i && (t = "");
                for (n in e) this.each(ge(n, e[n], t));
                return this
            }
            if (2 > i) return window.getComputedStyle(this.node(), null).getPropertyValue(e);
            n = ""
        }
        return this.each(ge(e, t, n))
    }, Cr.property = function (e, t) {
        if (arguments.length < 2) {
            if ("string" == typeof e) return this.node()[e];
            for (t in e) this.each(ve(t, e[t]));
            return this
        }
        return this.each(ve(e, t))
    }, Cr.text = function (e) {
        return arguments.length < 1 ? this.node().textContent : this.each("function" == typeof e ? function () {
            var t = e.apply(this, arguments);
            this.textContent = null == t ? "" : t
        } : null == e ? function () {
            this.textContent = ""
        } : function () {
            this.textContent = e
        })
    }, Cr.html = function (e) {
        return arguments.length < 1 ? this.node().innerHTML : this.each("function" == typeof e ? function () {
            var t = e.apply(this, arguments);
            this.innerHTML = null == t ? "" : t
        } : null == e ? function () {
            this.innerHTML = ""
        } : function () {
            this.innerHTML = e
        })
    }, Cr.append = function (e) {
        function t() {
            return this.appendChild(document.createElementNS(this.namespaceURI, e))
        }

        function n() {
            return this.appendChild(document.createElementNS(e.space, e.local))
        }
        return e = d3.ns.qualify(e), this.select(e.local ? n : t)
    }, Cr.insert = function (e, t) {
        function n() {
            return this.insertBefore(document.createElementNS(this.namespaceURI, e), br(t, this))
        }

        function i() {
            return this.insertBefore(document.createElementNS(e.space, e.local), br(t, this))
        }
        return e = d3.ns.qualify(e), this.select(e.local ? i : n)
    }, Cr.remove = function () {
        return this.each(function () {
            var e = this.parentNode;
            e && e.removeChild(this)
        })
    }, Cr.data = function (e, t) {
        function n(e, n) {
            var r, a, o, s = e.length,
                d = n.length,
                h = Math.min(s, d),
                f = Math.max(s, d),
                p = [],
                m = [],
                g = [];
            if (t) {
                var v, y = new i,
                    b = [],
                    w = n.length;
                for (r = -1; ++r < s;) v = t.call(a = e[r], a.__data__, r), y.has(v) ? g[w++] = a : y.set(v, a), b.push(v);
                for (r = -1; ++r < d;) v = t.call(n, o = n[r], r), y.has(v) ? (p[r] = a = y.get(v), a.__data__ = o, m[r] = g[r] = null) : (m[r] = ye(o), p[r] = g[r] = null), y.remove(v);
                for (r = -1; ++r < s;) y.has(b[r]) && (g[r] = e[r])
            } else {
                for (r = -1; ++r < h;) a = e[r], o = n[r], a ? (a.__data__ = o, p[r] = a, m[r] = g[r] = null) : (m[r] = ye(o), p[r] = g[r] = null);
                for (; d > r; ++r) m[r] = ye(n[r]), p[r] = g[r] = null;
                for (; f > r; ++r) g[r] = e[r], m[r] = p[r] = null
            }
            m.update = p, m.parentNode = p.parentNode = g.parentNode = e.parentNode, l.push(m), c.push(p), u.push(g)
        }
        var r, a, o = -1,
            s = this.length;
        if (!arguments.length) {
            for (e = new Array(s = (r = this[0]).length); ++o < s;)(a = r[o]) && (e[o] = a.__data__);
            return e
        }
        var l = ke([]),
            c = ce([]),
            u = ce([]);
        if ("function" == typeof e)
            for (; ++o < s;) n(r = this[o], e.call(r, r.parentNode.__data__, o));
        else
            for (; ++o < s;) n(r = this[o], e);
        return c.enter = function () {
            return l
        }, c.exit = function () {
            return u
        }, c
    }, Cr.datum = Cr.map = function (e) {
        return arguments.length < 1 ? this.property("__data__") : this.property("__data__", e)
    }, Cr.filter = function (e) {
        var t, n, i, r = [];
        "function" != typeof e && (e = be(e));
        for (var a = 0, o = this.length; o > a; a++) {
            r.push(t = []), t.parentNode = (n = this[a]).parentNode;
            for (var s = 0, l = n.length; l > s; s++)(i = n[s]) && e.call(i, i.__data__, s) && t.push(i)
        }
        return ce(r)
    }, Cr.order = function () {
        for (var e = -1, t = this.length; ++e < t;)
            for (var n, i = this[e], r = i.length - 1, a = i[r]; --r >= 0;)(n = i[r]) && (a && a !== n.nextSibling && a.parentNode.insertBefore(n, a), a = n);
        return this
    }, Cr.sort = function (e) {
        e = we.apply(this, arguments);
        for (var t = -1, n = this.length; ++t < n;) this[t].sort(e);
        return this.order()
    }, Cr.on = function (e, t, n) {
        var i = arguments.length;
        if (3 > i) {
            if ("string" != typeof e) {
                2 > i && (t = !1);
                for (n in e) this.each(_e(n, e[n], t));
                return this
            }
            if (2 > i) return (i = this.node()["__on" + e]) && i._;
            n = !1
        }
        return this.each(_e(e, t, n))
    }, Cr.each = function (e) {
        return xe(this, function (t, n, i) {
            e.call(t, t.__data__, n, i)
        })
    }, Cr.call = function (e) {
        return e.apply(this, (arguments[0] = this, arguments)), this
    }, Cr.empty = function () {
        return !this.node()
    }, Cr.node = function (e) {
        for (var t = 0, n = this.length; n > t; t++)
            for (var i = this[t], r = 0, a = i.length; a > r; r++) {
                var o = i[r];
                if (o) return o
            }
        return null
    }, Cr.transition = function () {
        for (var e, t, n = [], i = -1, r = this.length; ++i < r;) {
            n.push(e = []);
            for (var a = this[i], o = -1, s = a.length; ++o < s;) e.push((t = a[o]) ? {
                node: t,
                delay: Ir,
                duration: Pr
            } : null)
        }
        return Ce(n, Dr || ++Er, Date.now())
    };
    var Sr = ce([
        [document]
    ]);
    Sr[0].parentNode = _r, d3.select = function (e) {
        return "string" == typeof e ? Sr.select(e) : ce([
            [e]
        ])
    }, d3.selectAll = function (e) {
        return "string" == typeof e ? Sr.selectAll(e) : ce([qi(e)])
    };
    var Ar = [];
    d3.selection.enter = ke, d3.selection.enter.prototype = Ar, Ar.append = Cr.append, Ar.insert = Cr.insert, Ar.empty = Cr.empty, Ar.node = Cr.node, Ar.select = function (e) {
        for (var t, n, i, r, a, o = [], s = -1, l = this.length; ++s < l;) {
            i = (r = this[s]).update, o.push(t = []), t.parentNode = r.parentNode;
            for (var c = -1, u = r.length; ++c < u;)(a = r[c]) ? (t.push(i[c] = n = e.call(r.parentNode, a.__data__, c)), n.__data__ = a.__data__) : t.push(null)
        }
        return ce(o)
    };
    var Tr = [],
        Er = 0,
        Dr = 0,
        $r = 0,
        Mr = 250,
        Rr = d3.ease("cubic-in-out"),
        Ir = $r,
        Pr = Mr,
        Hr = Rr;
    Tr.call = Cr.call, d3.transition = function (e) {
        return arguments.length ? Dr ? e.transition() : e : Sr.transition()
    }, d3.transition.prototype = Tr, Tr.select = function (e) {
        var t, n, i, r = [];
        "function" != typeof e && (e = ue(e));
        for (var a = -1, o = this.length; ++a < o;) {
            r.push(t = []);
            for (var s = this[a], l = -1, c = s.length; ++l < c;)(i = s[l]) && (n = e.call(i.node, i.node.__data__, l)) ? ("__data__" in i.node && (n.__data__ = i.node.__data__), t.push({
                node: n,
                delay: i.delay,
                duration: i.duration
            })) : t.push(null)
        }
        return Ce(r, this.id, this.time).ease(this.ease())
    }, Tr.selectAll = function (e) {
        var t, n, i, r = [];
        "function" != typeof e && (e = de(e));
        for (var a = -1, o = this.length; ++a < o;)
            for (var s = this[a], l = -1, c = s.length; ++l < c;)
                if (i = s[l]) {
                    n = e.call(i.node, i.node.__data__, l), r.push(t = []);
                    for (var u = -1, d = n.length; ++u < d;) t.push({
                        node: n[u],
                        delay: i.delay,
                        duration: i.duration
                    })
                } return Ce(r, this.id, this.time).ease(this.ease())
    }, Tr.filter = function (e) {
        var t, n, i, r = [];
        "function" != typeof e && (e = be(e));
        for (var a = 0, o = this.length; o > a; a++) {
            r.push(t = []);
            for (var n = this[a], s = 0, l = n.length; l > s; s++)(i = n[s]) && e.call(i.node, i.node.__data__, s) && t.push(i)
        }
        return Ce(r, this.id, this.time).ease(this.ease())
    }, Tr.attr = function (e, t) {
        if (arguments.length < 2) {
            for (t in e) this.attrTween(t, Te(e[t], t));
            return this
        }
        return this.attrTween(e, Te(t, e))
    }, Tr.attrTween = function (e, t) {
        function n(e, n) {
            var i = t.call(this, e, n, this.getAttribute(r));
            return i === Nr ? (this.removeAttribute(r), null) : i && function (e) {
                this.setAttribute(r, i(e))
            }
        }

        function i(e, n) {
            var i = t.call(this, e, n, this.getAttributeNS(r.space, r.local));
            return i === Nr ? (this.removeAttributeNS(r.space, r.local), null) : i && function (e) {
                this.setAttributeNS(r.space, r.local, i(e))
            }
        }
        var r = d3.ns.qualify(e);
        return this.tween("attr." + e, r.local ? i : n)
    }, Tr.style = function (e, t, n) {
        var i = arguments.length;
        if (3 > i) {
            if ("string" != typeof e) {
                2 > i && (t = "");
                for (n in e) this.styleTween(n, Te(e[n], n), t);
                return this
            }
            n = ""
        }
        return this.styleTween(e, Te(t, e), n)
    }, Tr.styleTween = function (e, t, n) {
        return arguments.length < 3 && (n = ""), this.tween("style." + e, function (i, r) {
            var a = t.call(this, i, r, window.getComputedStyle(this, null).getPropertyValue(e));
            return a === Nr ? (this.style.removeProperty(e), null) : a && function (t) {
                this.style.setProperty(e, a(t), n)
            }
        })
    }, Tr.text = function (e) {
        return this.tween("text", function (t, n) {
            this.textContent = "function" == typeof e ? e.call(this, t, n) : e
        })
    }, Tr.remove = function () {
        return this.each("end.transition", function () {
            var e;
            !this.__transition__ && (e = this.parentNode) && e.removeChild(this)
        })
    }, Tr.delay = function (e) {
        return xe(this, "function" == typeof e ? function (t, n, i) {
            t.delay = 0 | e.call(t = t.node, t.__data__, n, i)
        } : (e = 0 | e, function (t) {
            t.delay = e
        }))
    }, Tr.duration = function (e) {
        return xe(this, "function" == typeof e ? function (t, n, i) {
            t.duration = Math.max(1, 0 | e.call(t = t.node, t.__data__, n, i))
        } : (e = Math.max(1, 0 | e), function (t) {
            t.duration = e
        }))
    }, Tr.transition = function () {
        return this.select(a)
    }, d3.tween = function (e, t) {
        function n(n, i, r) {
            var a = e.call(this, n, i);
            return null == a ? "" != r && Nr : r != a && t(r, a + "")
        }

        function i(n, i, r) {
            return r != e && t(r, e)
        }
        return "function" == typeof e ? n : null == e ? Ae : (e += "", i)
    };
    var Or, jr, Nr = {},
        zr = 0,
        Lr = {},
        Fr = null;
    d3.timer = function (e, t, n) {
        if (arguments.length < 3) {
            if (arguments.length < 2) t = 0;
            else if (!isFinite(t)) return;
            n = Date.now()
        }
        var i = Lr[e.id];
        i && i.callback === e ? (i.then = n, i.delay = t) : Lr[e.id = ++zr] = Fr = {
            callback: e,
            then: n,
            delay: t,
            next: Fr
        }, Or || (jr = clearTimeout(jr), Or = 1, Br(Ee))
    }, d3.timer.flush = function () {
        for (var e, t = Date.now(), n = Fr; n;) e = t - n.then, n.delay || (n.flush = n.callback(e)), n = n.next;
        De()
    };
    var Br = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e) {
        setTimeout(e, 17)
    };
    d3.mouse = function (e) {
        return $e(e, R())
    };
    var Wr = /WebKit/.test(navigator.userAgent) ? -1 : 0;
    d3.touches = function (e, t) {
        return arguments.length < 2 && (t = R().touches), t ? qi(t).map(function (t) {
            var n = $e(e, t);
            return n.identifier = t.identifier, n
        }) : []
    }, d3.scale = {}, d3.scale.linear = function () {
        return He([0, 1], [0, 1], d3.interpolate, !1)
    }, d3.scale.log = function () {
        return We(d3.scale.linear(), Ue)
    };
    var Ur = d3.format(".0e");
    Ue.pow = function (e) {
        return Math.pow(10, e)
    }, qe.pow = function (e) {
        return -Math.pow(10, -e)
    }, d3.scale.pow = function () {
        return Ge(d3.scale.linear(), 1)
    }, d3.scale.sqrt = function () {
        return d3.scale.pow().exponent(.5)
    }, d3.scale.ordinal = function () {
        return Ve([], {
            t: "range",
            a: [
                []
            ]
        })
    }, d3.scale.category10 = function () {
        return d3.scale.ordinal().range(qr)
    }, d3.scale.category20 = function () {
        return d3.scale.ordinal().range(Gr)
    }, d3.scale.category20b = function () {
        return d3.scale.ordinal().range(Yr)
    }, d3.scale.category20c = function () {
        return d3.scale.ordinal().range(Vr)
    };
    var qr = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"],
        Gr = ["#1f77b4", "#aec7e8", "#ff7f0e", "#ffbb78", "#2ca02c", "#98df8a", "#d62728", "#ff9896", "#9467bd", "#c5b0d5", "#8c564b", "#c49c94", "#e377c2", "#f7b6d2", "#7f7f7f", "#c7c7c7", "#bcbd22", "#dbdb8d", "#17becf", "#9edae5"],
        Yr = ["#393b79", "#5254a3", "#6b6ecf", "#9c9ede", "#637939", "#8ca252", "#b5cf6b", "#cedb9c", "#8c6d31", "#bd9e39", "#e7ba52", "#e7cb94", "#843c39", "#ad494a", "#d6616b", "#e7969c", "#7b4173", "#a55194", "#ce6dbd", "#de9ed6"],
        Vr = ["#3182bd", "#6baed6", "#9ecae1", "#c6dbef", "#e6550d", "#fd8d3c", "#fdae6b", "#fdd0a2", "#31a354", "#74c476", "#a1d99b", "#c7e9c0", "#756bb1", "#9e9ac8", "#bcbddc", "#dadaeb", "#636363", "#969696", "#bdbdbd", "#d9d9d9"];
    d3.scale.quantile = function () {
        return Xe([], [])
    }, d3.scale.quantize = function () {
        return Ke(0, 1, [0, 1])
    }, d3.scale.threshold = function () {
        return Ze([.5], [0, 1])
    }, d3.scale.identity = function () {
        return Qe([0, 1])
    }, d3.svg = {}, d3.svg.arc = function () {
        function e() {
            var e = t.apply(this, arguments),
                a = n.apply(this, arguments),
                o = i.apply(this, arguments) + Xr,
                s = r.apply(this, arguments) + Xr,
                l = (o > s && (l = o, o = s, s = l), s - o),
                c = l < Math.PI ? "0" : "1",
                u = Math.cos(o),
                d = Math.sin(o),
                h = Math.cos(s),
                f = Math.sin(s);
            return l >= Kr ? e ? "M0," + a + "A" + a + "," + a + " 0 1,1 0," + -a + "A" + a + "," + a + " 0 1,1 0," + a + "M0," + e + "A" + e + "," + e + " 0 1,0 0," + -e + "A" + e + "," + e + " 0 1,0 0," + e + "Z" : "M0," + a + "A" + a + "," + a + " 0 1,1 0," + -a + "A" + a + "," + a + " 0 1,1 0," + a + "Z" : e ? "M" + a * u + "," + a * d + "A" + a + "," + a + " 0 " + c + ",1 " + a * h + "," + a * f + "L" + e * h + "," + e * f + "A" + e + "," + e + " 0 " + c + ",0 " + e * u + "," + e * d + "Z" : "M" + a * u + "," + a * d + "A" + a + "," + a + " 0 " + c + ",1 " + a * h + "," + a * f + "L0,0Z"
        }
        var t = Je,
            n = et,
            i = tt,
            r = nt;
        return e.innerRadius = function (n) {
            return arguments.length ? (t = s(n), e) : t
        }, e.outerRadius = function (t) {
            return arguments.length ? (n = s(t), e) : n
        }, e.startAngle = function (t) {
            return arguments.length ? (i = s(t), e) : i
        }, e.endAngle = function (t) {
            return arguments.length ? (r = s(t), e) : r
        }, e.centroid = function () {
            var e = (t.apply(this, arguments) + n.apply(this, arguments)) / 2,
                a = (i.apply(this, arguments) + r.apply(this, arguments)) / 2 + Xr;
            return [Math.cos(a) * e, Math.sin(a) * e]
        }, e
    };
    var Xr = -Math.PI / 2,
        Kr = 2 * Math.PI - 1e-6;
    d3.svg.line = function () {
        return it(r)
    };
    var Zr = d3.map({
        linear: ot,
        "linear-closed": st,
        "step-before": lt,
        "step-after": ct,
        basis: mt,
        "basis-open": gt,
        "basis-closed": vt,
        bundle: yt,
        cardinal: ht,
        "cardinal-open": ut,
        "cardinal-closed": dt,
        monotone: Ct
    });
    Zr.forEach(function (e, t) {
        t.key = e, t.closed = /-closed$/.test(e)
    });
    var Qr = [0, 2 / 3, 1 / 3, 0],
        Jr = [0, 1 / 3, 2 / 3, 0],
        ea = [0, 1 / 6, 2 / 3, 1 / 6];
    d3.svg.line.radial = function () {
        var e = it(St);
        return e.radius = e.x, delete e.x, e.angle = e.y, delete e.y, e
    }, lt.reverse = ct, ct.reverse = lt, d3.svg.area = function () {
        return At(r)
    }, d3.svg.area.radial = function () {
        var e = At(St);
        return e.radius = e.x, delete e.x, e.innerRadius = e.x0, delete e.x0, e.outerRadius = e.x1, delete e.x1, e.angle = e.y, delete e.y, e.startAngle = e.y0, delete e.y0, e.endAngle = e.y1, delete e.y1, e
    }, d3.svg.chord = function () {
        function e(e, s) {
            var l = t(this, a, e, s),
                c = t(this, o, e, s);
            return "M" + l.p0 + i(l.r, l.p1, l.a1 - l.a0) + (n(l, c) ? r(l.r, l.p1, l.r, l.p0) : r(l.r, l.p1, c.r, c.p0) + i(c.r, c.p1, c.a1 - c.a0) + r(c.r, c.p1, l.r, l.p0)) + "Z"
        }

        function t(e, t, n, i) {
            var r = t.call(e, n, i),
                a = l.call(e, r, i),
                o = c.call(e, r, i) + Xr,
                s = u.call(e, r, i) + Xr;
            return {
                r: a,
                a0: o,
                a1: s,
                p0: [a * Math.cos(o), a * Math.sin(o)],
                p1: [a * Math.cos(s), a * Math.sin(s)]
            }
        }

        function n(e, t) {
            return e.a0 == t.a0 && e.a1 == t.a1
        }

        function i(e, t, n) {
            return "A" + e + "," + e + " 0 " + +(n > Math.PI) + ",1 " + t
        }

        function r(e, t, n, i) {
            return "Q 0,0 " + i
        }
        var a = Tt,
            o = Et,
            l = Dt,
            c = tt,
            u = nt;
        return e.radius = function (t) {
            return arguments.length ? (l = s(t), e) : l
        }, e.source = function (t) {
            return arguments.length ? (a = s(t), e) : a
        }, e.target = function (t) {
            return arguments.length ? (o = s(t), e) : o
        }, e.startAngle = function (t) {
            return arguments.length ? (c = s(t), e) : c
        }, e.endAngle = function (t) {
            return arguments.length ? (u = s(t), e) : u
        }, e
    }, d3.svg.diagonal = function () {
        function e(e, r) {
            var a = t.call(this, e, r),
                o = n.call(this, e, r),
                s = (a.y + o.y) / 2,
                l = [a, {
                    x: a.x,
                    y: s
                }, {
                        x: o.x,
                        y: s
                    }, o];
            return l = l.map(i), "M" + l[0] + "C" + l[1] + " " + l[2] + " " + l[3]
        }
        var t = Tt,
            n = Et,
            i = $t;
        return e.source = function (n) {
            return arguments.length ? (t = s(n), e) : t
        }, e.target = function (t) {
            return arguments.length ? (n = s(t), e) : n
        }, e.projection = function (t) {
            return arguments.length ? (i = t, e) : i
        }, e
    }, d3.svg.diagonal.radial = function () {
        var e = d3.svg.diagonal(),
            t = $t,
            n = e.projection;
        return e.projection = function (e) {
            return arguments.length ? n(Mt(t = e)) : t
        }, e
    }, d3.svg.mouse = d3.mouse, d3.svg.touches = d3.touches, d3.svg.symbol = function () {
        function e(e, i) {
            return (ta.get(t.call(this, e, i)) || Pt)(n.call(this, e, i))
        }
        var t = It,
            n = Rt;
        return e.type = function (n) {
            return arguments.length ? (t = s(n), e) : t
        }, e.size = function (t) {
            return arguments.length ? (n = s(t), e) : n
        }, e
    };
    var ta = d3.map({
        circle: Pt,
        cross: function (e) {
            var t = Math.sqrt(e / 5) / 2;
            return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z"
        },
        diamond: function (e) {
            var t = Math.sqrt(e / (2 * ia)),
                n = t * ia;
            return "M0," + -t + "L" + n + ",0 0," + t + " " + -n + ",0Z"
        },
        square: function (e) {
            var t = Math.sqrt(e) / 2;
            return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z"
        },
        "triangle-down": function (e) {
            var t = Math.sqrt(e / na),
                n = t * na / 2;
            return "M0," + n + "L" + t + "," + -n + " " + -t + "," + -n + "Z"
        },
        "triangle-up": function (e) {
            var t = Math.sqrt(e / na),
                n = t * na / 2;
            return "M0," + -n + "L" + t + "," + n + " " + -t + "," + n + "Z"
        }
    });
    d3.svg.symbolTypes = ta.keys();
    var na = Math.sqrt(3),
        ia = Math.tan(30 * Math.PI / 180);
    d3.svg.axis = function () {
        function e(e) {
            e.each(function () {
                var e, d = d3.select(this),
                    h = null == c ? n.ticks ? n.ticks.apply(n, l) : n.domain() : c,
                    f = null == t ? n.tickFormat ? n.tickFormat.apply(n, l) : String : t,
                    p = jt(n, h, u),
                    m = d.selectAll(".minor").data(p, String),
                    g = m.enter().insert("line", "g").attr("class", "tick minor").style("opacity", 1e-6),
                    v = d3.transition(m.exit()).style("opacity", 1e-6).remove(),
                    y = d3.transition(m).style("opacity", 1),
                    b = d.selectAll("g").data(h, String),
                    w = b.enter().insert("g", "path").style("opacity", 1e-6),
                    _ = d3.transition(b.exit()).style("opacity", 1e-6).remove(),
                    x = d3.transition(b).style("opacity", 1),
                    k = Re(n),
                    C = d.selectAll(".domain").data([0]),
                    S = (C.enter().append("path").attr("class", "domain"), d3.transition(C)),
                    A = n.copy(),
                    T = this.__chart__ || A;
                this.__chart__ = A, w.append("line").attr("class", "tick"), w.append("text");
                var E = w.select("line"),
                    D = x.select("line"),
                    $ = b.select("text").text(f),
                    M = w.select("text"),
                    R = x.select("text");
                switch (i) {
                    case "bottom":
                        e = Ht, g.attr("y2", a), y.attr("x2", 0).attr("y2", a), E.attr("y2", r), M.attr("y", Math.max(r, 0) + s), D.attr("x2", 0).attr("y2", r), R.attr("x", 0).attr("y", Math.max(r, 0) + s), $.attr("dy", ".71em").attr("text-anchor", "middle"), S.attr("d", "M" + k[0] + "," + o + "V0H" + k[1] + "V" + o);
                        break;
                    case "top":
                        e = Ht, g.attr("y2", -a), y.attr("x2", 0).attr("y2", -a), E.attr("y2", -r), M.attr("y", -(Math.max(r, 0) + s)), D.attr("x2", 0).attr("y2", -r), R.attr("x", 0).attr("y", -(Math.max(r, 0) + s)), $.attr("dy", "0em").attr("text-anchor", "middle"), S.attr("d", "M" + k[0] + "," + -o + "V0H" + k[1] + "V" + -o);
                        break;
                    case "left":
                        e = Ot, g.attr("x2", -a), y.attr("x2", -a).attr("y2", 0), E.attr("x2", -r), M.attr("x", -(Math.max(r, 0) + s)), D.attr("x2", -r).attr("y2", 0), R.attr("x", -(Math.max(r, 0) + s)).attr("y", 0), $.attr("dy", ".32em").attr("text-anchor", "end"), S.attr("d", "M" + -o + "," + k[0] + "H0V" + k[1] + "H" + -o);
                        break;
                    case "right":
                        e = Ot, g.attr("x2", a), y.attr("x2", a).attr("y2", 0), E.attr("x2", r), M.attr("x", Math.max(r, 0) + s), D.attr("x2", r).attr("y2", 0), R.attr("x", Math.max(r, 0) + s).attr("y", 0), $.attr("dy", ".32em").attr("text-anchor", "start"), S.attr("d", "M" + o + "," + k[0] + "H0V" + k[1] + "H" + o)
                }
                if (n.ticks) w.call(e, T), x.call(e, A), _.call(e, A), g.call(e, T), y.call(e, A), v.call(e, A);
                else {
                    var I = A.rangeBand() / 2,
                        P = function (e) {
                            return A(e) + I
                        };
                    w.call(e, P), x.call(e, P)
                }
            })
        }
        var t, n = d3.scale.linear(),
            i = "bottom",
            r = 6,
            a = 6,
            o = 6,
            s = 3,
            l = [10],
            c = null,
            u = 0;
        return e.scale = function (t) {
            return arguments.length ? (n = t, e) : n
        }, e.orient = function (t) {
            return arguments.length ? (i = t, e) : i
        }, e.ticks = function () {
            return arguments.length ? (l = arguments, e) : l
        }, e.tickValues = function (t) {
            return arguments.length ? (c = t, e) : c
        }, e.tickFormat = function (n) {
            return arguments.length ? (t = n, e) : t
        }, e.tickSize = function (t, n, i) {
            if (!arguments.length) return r;
            var s = arguments.length - 1;
            return r = +t, a = s > 1 ? +n : r, o = s > 0 ? +arguments[s] : r, e
        }, e.tickPadding = function (t) {
            return arguments.length ? (s = +t, e) : s
        }, e.tickSubdivide = function (t) {
            return arguments.length ? (u = +t, e) : u
        }, e
    }, d3.svg.brush = function () {
        function e(a) {
            a.each(function () {
                var a, o = d3.select(this),
                    u = o.selectAll(".background").data([0]),
                    d = o.selectAll(".extent").data([0]),
                    h = o.selectAll(".resize").data(c, String);
                o.style("pointer-events", "all").on("mousedown.brush", r).on("touchstart.brush", r), u.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), d.enter().append("rect").attr("class", "extent").style("cursor", "move"), h.enter().append("g").attr("class", function (e) {
                    return "resize " + e;
                }).style("cursor", function (e) {
                    return ra[e]
                }).append("rect").attr("x", function (e) {
                    return /[ew]$/.test(e) ? -3 : null
                }).attr("y", function (e) {
                    return /^[ns]/.test(e) ? -3 : null
                }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), h.style("display", e.empty() ? "none" : null), h.exit().remove(), s && (a = Re(s), u.attr("x", a[0]).attr("width", a[1] - a[0]), n(o)), l && (a = Re(l), u.attr("y", a[0]).attr("height", a[1] - a[0]), i(o)), t(o)
            })
        }

        function t(e) {
            e.selectAll(".resize").attr("transform", function (e) {
                return "translate(" + u[+/e$/.test(e)][0] + "," + u[+/^s/.test(e)][1] + ")"
            })
        }

        function n(e) {
            e.select(".extent").attr("x", u[0][0]), e.selectAll(".extent,.n>rect,.s>rect").attr("width", u[1][0] - u[0][0])
        }

        function i(e) {
            e.select(".extent").attr("y", u[0][1]), e.selectAll(".extent,.e>rect,.w>rect").attr("height", u[1][1] - u[0][1])
        }

        function r() {
            function r() {
                var e = d3.event.changedTouches;
                return e ? d3.touches(v, e)[0] : d3.mouse(v)
            }

            function c() {
                32 == d3.event.keyCode && (C || (m = null, S[0] -= u[1][0], S[1] -= u[1][1], C = 2), M())
            }

            function d() {
                32 == d3.event.keyCode && 2 == C && (S[0] += u[1][0], S[1] += u[1][1], C = 0, M())
            }

            function h() {
                var e = r(),
                    a = !1;
                g && (e[0] += g[0], e[1] += g[1]), C || (d3.event.altKey ? (m || (m = [(u[0][0] + u[1][0]) / 2, (u[0][1] + u[1][1]) / 2]), S[0] = u[+(e[0] < m[0])][0], S[1] = u[+(e[1] < m[1])][1]) : m = null), x && f(e, s, 0) && (n(w), a = !0), k && f(e, l, 1) && (i(w), a = !0), a && (t(w), b({
                    type: "brush",
                    mode: C ? "move" : "resize"
                }))
            }

            function f(e, t, n) {
                var i, r, o = Re(t),
                    s = o[0],
                    l = o[1],
                    c = S[n],
                    d = u[1][n] - u[0][n];
                return C && (s -= c, l -= d + c), i = Math.max(s, Math.min(l, e[n])), C ? r = (i += c) + d : (m && (c = Math.max(s, Math.min(l, 2 * m[n] - i))), i > c ? (r = i, i = c) : r = c), u[0][n] !== i || u[1][n] !== r ? (a = null, u[0][n] = i, u[1][n] = r, !0) : void 0
            }

            function p() {
                h(), w.style("pointer-events", "all").selectAll(".resize").style("display", e.empty() ? "none" : null), d3.select("body").style("cursor", null), A.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), b({
                    type: "brushend"
                }), M()
            }
            var m, g, v = this,
                y = d3.select(d3.event.target),
                b = o.of(v, arguments),
                w = d3.select(v),
                _ = y.datum(),
                x = !/^(n|s)$/.test(_) && s,
                k = !/^(e|w)$/.test(_) && l,
                C = y.classed("extent"),
                S = r(),
                A = d3.select(window).on("mousemove.brush", h).on("mouseup.brush", p).on("touchmove.brush", h).on("touchend.brush", p).on("keydown.brush", c).on("keyup.brush", d);
            if (C) S[0] = u[0][0] - S[0], S[1] = u[0][1] - S[1];
            else if (_) {
                var T = +/w$/.test(_),
                    E = +/^n/.test(_);
                g = [u[1 - T][0] - S[0], u[1 - E][1] - S[1]], S[0] = u[T][0], S[1] = u[E][1]
            } else d3.event.altKey && (m = S.slice());
            w.style("pointer-events", "none").selectAll(".resize").style("display", null), d3.select("body").style("cursor", y.style("cursor")), b({
                type: "brushstart"
            }), h(), M()
        }
        var a, o = I(e, "brushstart", "brush", "brushend"),
            s = null,
            l = null,
            c = aa[0],
            u = [
                [0, 0],
                [0, 0]
            ];
        return e.x = function (t) {
            return arguments.length ? (s = t, c = aa[!s << 1 | !l], e) : s
        }, e.y = function (t) {
            return arguments.length ? (l = t, c = aa[!s << 1 | !l], e) : l
        }, e.extent = function (t) {
            var n, i, r, o, c;
            return arguments.length ? (a = [
                [0, 0],
                [0, 0]
            ], s && (n = t[0], i = t[1], l && (n = n[0], i = i[0]), a[0][0] = n, a[1][0] = i, s.invert && (n = s(n), i = s(i)), n > i && (c = n, n = i, i = c), u[0][0] = 0 | n, u[1][0] = 0 | i), l && (r = t[0], o = t[1], s && (r = r[1], o = o[1]), a[0][1] = r, a[1][1] = o, l.invert && (r = l(r), o = l(o)), r > o && (c = r, r = o, o = c), u[0][1] = 0 | r, u[1][1] = 0 | o), e) : (t = a || u, s && (n = t[0][0], i = t[1][0], a || (n = u[0][0], i = u[1][0], s.invert && (n = s.invert(n), i = s.invert(i)), n > i && (c = n, n = i, i = c))), l && (r = t[0][1], o = t[1][1], a || (r = u[0][1], o = u[1][1], l.invert && (r = l.invert(r), o = l.invert(o)), r > o && (c = r, r = o, o = c))), s && l ? [
                [n, r],
                [i, o]
            ] : s ? [n, i] : l && [r, o])
        }, e.clear = function () {
            return a = null, u[0][0] = u[0][1] = u[1][0] = u[1][1] = 0, e
        }, e.empty = function () {
            return s && u[0][0] === u[1][0] || l && u[0][1] === u[1][1]
        }, d3.rebind(e, o, "on")
    };
    var ra = {
        n: "ns-resize",
        e: "ew-resize",
        s: "ns-resize",
        w: "ew-resize",
        nw: "nwse-resize",
        ne: "nesw-resize",
        se: "nwse-resize",
        sw: "nesw-resize"
    },
        aa = [
            ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
            ["e", "w"],
            ["n", "s"],
            []
        ];
    d3.behavior = {}, d3.behavior.drag = function () {
        function e() {
            this.on("mousedown.drag", t).on("touchstart.drag", t)
        }

        function t() {
            function e() {
                var e = s.parentNode;
                return u ? d3.touches(e).filter(function (e) {
                    return e.identifier === u
                })[0] : d3.mouse(e)
            }

            function t() {
                if (!s.parentNode) return r();
                var t = e(),
                    n = t[0] - d[0],
                    i = t[1] - d[1];
                h |= n | i, d = t, M(), l({
                    type: "drag",
                    x: t[0] + o[0],
                    y: t[1] + o[1],
                    dx: n,
                    dy: i
                })
            }

            function r() {
                l({
                    type: "dragend"
                }), h && (M(), d3.event.target === c && f.on("click.drag", a, !0)), f.on(u ? "touchmove.drag-" + u : "mousemove.drag", null).on(u ? "touchend.drag-" + u : "mouseup.drag", null)
            }

            function a() {
                M(), f.on("click.drag", null)
            }
            var o, s = this,
                l = n.of(s, arguments),
                c = d3.event.target,
                u = d3.event.touches && d3.event.changedTouches[0].identifier,
                d = e(),
                h = 0,
                f = d3.select(window).on(u ? "touchmove.drag-" + u : "mousemove.drag", t).on(u ? "touchend.drag-" + u : "mouseup.drag", r, !0);
            i ? (o = i.apply(s, arguments), o = [o.x - d[0], o.y - d[1]]) : o = [0, 0], u || M(), l({
                type: "dragstart"
            })
        }
        var n = I(e, "drag", "dragstart", "dragend"),
            i = null;
        return e.origin = function (t) {
            return arguments.length ? (i = t, e) : i
        }, d3.rebind(e, n, "on")
    }, d3.behavior.zoom = function () {
        function e() {
            this.on("mousedown.zoom", o).on("mousewheel.zoom", s).on("mousemove.zoom", l).on("DOMMouseScroll.zoom", s).on("dblclick.zoom", c).on("touchstart.zoom", u).on("touchmove.zoom", d).on("touchend.zoom", u)
        }

        function t(e) {
            return [(e[0] - b[0]) / w, (e[1] - b[1]) / w]
        }

        function n(e) {
            return [e[0] * w + b[0], e[1] * w + b[1]]
        }

        function i(e) {
            w = Math.max(_[0], Math.min(_[1], e))
        }

        function r(e, t) {
            t = n(t), b[0] += e[0] - t[0], b[1] += e[1] - t[1]
        }

        function a(e) {
            m && m.domain(p.range().map(function (e) {
                return (e - b[0]) / w
            }).map(p.invert)), v && v.domain(g.range().map(function (e) {
                return (e - b[1]) / w
            }).map(g.invert)), d3.event.preventDefault(), e({
                type: "zoom",
                scale: w,
                translate: b
            })
        }

        function o() {
            function e() {
                c = 1, r(d3.mouse(o), d), a(s)
            }

            function n() {
                c && M(), u.on("mousemove.zoom", null).on("mouseup.zoom", null), c && d3.event.target === l && u.on("click.zoom", i, !0)
            }

            function i() {
                M(), u.on("click.zoom", null)
            }
            var o = this,
                s = x.of(o, arguments),
                l = d3.event.target,
                c = 0,
                u = d3.select(window).on("mousemove.zoom", e).on("mouseup.zoom", n),
                d = t(d3.mouse(o));
            window.focus(), M()
        }

        function s() {
            h || (h = t(d3.mouse(this))), i(Math.pow(2, .002 * Nt()) * w), r(d3.mouse(this), h), a(x.of(this, arguments))
        }

        function l() {
            h = null
        }

        function c() {
            var e = d3.mouse(this),
                n = t(e);
            i(d3.event.shiftKey ? w / 2 : 2 * w), r(e, n), a(x.of(this, arguments))
        }

        function u() {
            var e = d3.touches(this),
                n = Date.now();
            if (f = w, h = {}, e.forEach(function (e) {
                h[e.identifier] = t(e)
            }), M(), 1 === e.length) {
                if (500 > n - y) {
                    var o = e[0],
                        s = t(e[0]);
                    i(2 * w), r(o, s), a(x.of(this, arguments))
                }
                y = n
            }
        }

        function d() {
            var e = d3.touches(this),
                t = e[0],
                n = h[t.identifier];
            if (o = e[1]) {
                var o, s = h[o.identifier];
                t = [(t[0] + o[0]) / 2, (t[1] + o[1]) / 2], n = [(n[0] + s[0]) / 2, (n[1] + s[1]) / 2], i(d3.event.scale * f)
            }
            r(t, n), y = null, a(x.of(this, arguments))
        }
        var h, f, p, m, g, v, y, b = [0, 0],
            w = 1,
            _ = sa,
            x = I(e, "zoom");
        return e.translate = function (t) {
            return arguments.length ? (b = t.map(Number), e) : b
        }, e.scale = function (t) {
            return arguments.length ? (w = +t, e) : w
        }, e.scaleExtent = function (t) {
            return arguments.length ? (_ = null == t ? sa : t.map(Number), e) : _
        }, e.x = function (t) {
            return arguments.length ? (m = t, p = t.copy(), e) : m
        }, e.y = function (t) {
            return arguments.length ? (v = t, g = t.copy(), e) : v
        }, d3.rebind(e, x, "on")
    };
    var oa, sa = [0, 1 / 0];
    d3.layout = {}, d3.layout.bundle = function () {
        return function (e) {
            for (var t = [], n = -1, i = e.length; ++n < i;) t.push(zt(e[n]));
            return t
        }
    }, d3.layout.chord = function () {
        function e() {
            var e, c, d, h, f, p = {},
                m = [],
                g = d3.range(a),
                v = [];
            for (n = [], i = [], e = 0, h = -1; ++h < a;) {
                for (c = 0, f = -1; ++f < a;) c += r[h][f];
                m.push(c), v.push(d3.range(a)), e += c
            }
            for (o && g.sort(function (e, t) {
                return o(m[e], m[t])
            }), s && v.forEach(function (e, t) {
                e.sort(function (e, n) {
                    return s(r[t][e], r[t][n])
                })
            }), e = (2 * Math.PI - u * a) / e, c = 0, h = -1; ++h < a;) {
                for (d = c, f = -1; ++f < a;) {
                    var y = g[h],
                        b = v[y][f],
                        w = r[y][b],
                        _ = c,
                        x = c += w * e;
                    p[y + "-" + b] = {
                        index: y,
                        subindex: b,
                        startAngle: _,
                        endAngle: x,
                        value: w
                    }
                }
                i[y] = {
                    index: y,
                    startAngle: d,
                    endAngle: c,
                    value: (c - d) / e
                }, c += u
            }
            for (h = -1; ++h < a;)
                for (f = h - 1; ++f < a;) {
                    var k = p[h + "-" + f],
                        C = p[f + "-" + h];
                    (k.value || C.value) && n.push(k.value < C.value ? {
                        source: C,
                        target: k
                    } : {
                        source: k,
                        target: C
                    })
                }
            l && t()
        }

        function t() {
            n.sort(function (e, t) {
                return l((e.source.value + e.target.value) / 2, (t.source.value + t.target.value) / 2)
            })
        }
        var n, i, r, a, o, s, l, c = {},
            u = 0;
        return c.matrix = function (e) {
            return arguments.length ? (a = (r = e) && r.length, n = i = null, c) : r
        }, c.padding = function (e) {
            return arguments.length ? (u = e, n = i = null, c) : u
        }, c.sortGroups = function (e) {
            return arguments.length ? (o = e, n = i = null, c) : o
        }, c.sortSubgroups = function (e) {
            return arguments.length ? (s = e, n = null, c) : s
        }, c.sortChords = function (e) {
            return arguments.length ? (l = e, n && t(), c) : l
        }, c.chords = function () {
            return n || e(), n
        }, c.groups = function () {
            return i || e(), i
        }, c
    }, d3.layout.force = function () {
        function e(e) {
            return function (t, n, i, r, a) {
                if (t.point !== e) {
                    var o = t.cx - e.x,
                        s = t.cy - e.y,
                        l = 1 / Math.sqrt(o * o + s * s);
                    if (v > (r - n) * l) {
                        var c = t.charge * l * l;
                        return e.px -= o * c, e.py -= s * c, !0
                    }
                    if (t.point && isFinite(l)) {
                        var c = t.pointCharge * l * l;
                        e.px -= o * c, e.py -= s * c
                    }
                }
                return !t.charge
            }
        }

        function t(e) {
            e.px = d3.event.x, e.py = d3.event.y, c.resume()
        }
        var n, i, a, o, l, c = {},
            u = d3.dispatch("start", "tick", "end"),
            d = [1, 1],
            h = .9,
            f = Yt,
            p = Vt,
            m = -30,
            g = .1,
            v = .8,
            y = [],
            b = [];
        return c.tick = function () {
            if ((i *= .99) < .005) return u.end({
                type: "end",
                alpha: i = 0
            }), !0;
            var t, n, r, s, c, f, p, v, w, _ = y.length,
                x = b.length;
            for (n = 0; x > n; ++n) r = b[n], s = r.source, c = r.target, v = c.x - s.x, w = c.y - s.y, (f = v * v + w * w) && (f = i * o[n] * ((f = Math.sqrt(f)) - a[n]) / f, v *= f, w *= f, c.x -= v * (p = s.weight / (c.weight + s.weight)), c.y -= w * p, s.x += v * (p = 1 - p), s.y += w * p);
            if ((p = i * g) && (v = d[0] / 2, w = d[1] / 2, n = -1, p))
                for (; ++n < _;) r = y[n], r.x += (v - r.x) * p, r.y += (w - r.y) * p;
            if (m)
                for (Gt(t = d3.geom.quadtree(y), i, l), n = -1; ++n < _;)(r = y[n]).fixed || t.visit(e(r));
            for (n = -1; ++n < _;) r = y[n], r.fixed ? (r.x = r.px, r.y = r.py) : (r.x -= (r.px - (r.px = r.x)) * h, r.y -= (r.py - (r.py = r.y)) * h);
            u.tick({
                type: "tick",
                alpha: i
            })
        }, c.nodes = function (e) {
            return arguments.length ? (y = e, c) : y
        }, c.links = function (e) {
            return arguments.length ? (b = e, c) : b
        }, c.size = function (e) {
            return arguments.length ? (d = e, c) : d
        }, c.linkDistance = function (e) {
            return arguments.length ? (f = s(e), c) : f
        }, c.distance = c.linkDistance, c.linkStrength = function (e) {
            return arguments.length ? (p = s(e), c) : p
        }, c.friction = function (e) {
            return arguments.length ? (h = e, c) : h
        }, c.charge = function (e) {
            return arguments.length ? (m = "function" == typeof e ? e : +e, c) : m
        }, c.gravity = function (e) {
            return arguments.length ? (g = e, c) : g
        }, c.theta = function (e) {
            return arguments.length ? (v = e, c) : v
        }, c.alpha = function (e) {
            return arguments.length ? (i ? i = e > 0 ? e : 0 : e > 0 && (u.start({
                type: "start",
                alpha: i = e
            }), d3.timer(c.tick)), c) : i
        }, c.start = function () {
            function e(e, i) {
                for (var r, a = t(n), o = -1, s = a.length; ++o < s;)
                    if (!isNaN(r = a[o][e])) return r;
                return Math.random() * i
            }

            function t() {
                if (!r) {
                    for (r = [], i = 0; u > i; ++i) r[i] = [];
                    for (i = 0; h > i; ++i) {
                        var e = b[i];
                        r[e.source.index].push(e.target), r[e.target.index].push(e.source)
                    }
                }
                return r[n]
            }
            var n, i, r, s, u = y.length,
                h = b.length,
                g = d[0],
                v = d[1];
            for (n = 0; u > n; ++n)(s = y[n]).index = n, s.weight = 0;
            for (a = [], o = [], n = 0; h > n; ++n) s = b[n], "number" == typeof s.source && (s.source = y[s.source]), "number" == typeof s.target && (s.target = y[s.target]), a[n] = f.call(this, s, n), o[n] = p.call(this, s, n), ++s.source.weight, ++s.target.weight;
            for (n = 0; u > n; ++n) s = y[n], isNaN(s.x) && (s.x = e("x", g)), isNaN(s.y) && (s.y = e("y", v)), isNaN(s.px) && (s.px = s.x), isNaN(s.py) && (s.py = s.y);
            if (l = [], "function" == typeof m)
                for (n = 0; u > n; ++n) l[n] = +m.call(this, y[n], n);
            else
                for (n = 0; u > n; ++n) l[n] = m;
            return c.resume()
        }, c.resume = function () {
            return c.alpha(.1)
        }, c.stop = function () {
            return c.alpha(0)
        }, c.drag = function () {
            n || (n = d3.behavior.drag().origin(r).on("dragstart", Bt).on("drag", t).on("dragend", Wt)), this.on("mouseover.force", Ut).on("mouseout.force", qt).call(n)
        }, d3.rebind(c, u, "on")
    }, d3.layout.partition = function () {
        function e(t, n, i, r) {
            var a = t.children;
            if (t.x = n, t.y = t.depth * r, t.dx = i, t.dy = r, a && (o = a.length)) {
                var o, s, l, c = -1;
                for (i = t.value ? i / t.value : 0; ++c < o;) e(s = a[c], n, l = s.value * i, r), n += l
            }
        }

        function t(e) {
            var n = e.children,
                i = 0;
            if (n && (r = n.length))
                for (var r, a = -1; ++a < r;) i = Math.max(i, t(n[a]));
            return 1 + i
        }

        function n(n, a) {
            var o = i.call(this, n, a);
            return e(o[0], 0, r[0], r[1] / t(o[0])), o
        }
        var i = d3.layout.hierarchy(),
            r = [1, 1];
        return n.size = function (e) {
            return arguments.length ? (r = e, n) : r
        }, sn(n, i)
    }, d3.layout.pie = function () {
        function e(a, o) {
            var s = a.map(function (n, i) {
                return +t.call(e, n, i)
            }),
                l = +("function" == typeof i ? i.apply(this, arguments) : i),
                c = (("function" == typeof r ? r.apply(this, arguments) : r) - i) / d3.sum(s),
                u = d3.range(a.length);
            null != n && u.sort(n === la ? function (e, t) {
                return s[t] - s[e]
            } : function (e, t) {
                return n(a[e], a[t])
            });
            var d = [];
            return u.forEach(function (e) {
                var t;
                d[e] = {
                    data: a[e],
                    value: t = s[e],
                    startAngle: l,
                    endAngle: l += t * c
                }
            }), d
        }
        var t = Number,
            n = la,
            i = 0,
            r = 2 * Math.PI;
        return e.value = function (n) {
            return arguments.length ? (t = n, e) : t
        }, e.sort = function (t) {
            return arguments.length ? (n = t, e) : n
        }, e.startAngle = function (t) {
            return arguments.length ? (i = t, e) : i
        }, e.endAngle = function (t) {
            return arguments.length ? (r = t, e) : r
        }, e
    };
    var la = {};
    d3.layout.stack = function () {
        function e(r, l) {
            var c = r.map(function (n, i) {
                return t.call(e, n, i)
            }),
                u = c.map(function (t, n) {
                    return t.map(function (t, n) {
                        return [o.call(e, t, n), s.call(e, t, n)]
                    })
                }),
                d = n.call(e, u, l);
            c = d3.permute(c, d), u = d3.permute(u, d);
            var h, f, p, m = i.call(e, u, l),
                g = c.length,
                v = c[0].length;
            for (f = 0; v > f; ++f)
                for (a.call(e, c[0][f], p = m[f], u[0][f][1]), h = 1; g > h; ++h) a.call(e, c[h][f], p += u[h - 1][f][1], u[h][f][1]);
            return r
        }
        var t = r,
            n = Qt,
            i = Jt,
            a = Zt,
            o = Xt,
            s = Kt;
        return e.values = function (n) {
            return arguments.length ? (t = n, e) : t
        }, e.order = function (t) {
            return arguments.length ? (n = "function" == typeof t ? t : ca.get(t) || Qt, e) : n
        }, e.offset = function (t) {
            return arguments.length ? (i = "function" == typeof t ? t : ua.get(t) || Jt, e) : i
        }, e.x = function (t) {
            return arguments.length ? (o = t, e) : o
        }, e.y = function (t) {
            return arguments.length ? (s = t, e) : s
        }, e.out = function (t) {
            return arguments.length ? (a = t, e) : a
        }, e
    };
    var ca = d3.map({
        "inside-out": function (e) {
            var t, n, i = e.length,
                r = e.map(en),
                a = e.map(tn),
                o = d3.range(i).sort(function (e, t) {
                    return r[e] - r[t]
                }),
                s = 0,
                l = 0,
                c = [],
                u = [];
            for (t = 0; i > t; ++t) n = o[t], l > s ? (s += a[n], c.push(n)) : (l += a[n], u.push(n));
            return u.reverse().concat(c)
        },
        reverse: function (e) {
            return d3.range(e.length).reverse()
        },
        "default": Qt
    }),
        ua = d3.map({
            silhouette: function (e) {
                var t, n, i, r = e.length,
                    a = e[0].length,
                    o = [],
                    s = 0,
                    l = [];
                for (n = 0; a > n; ++n) {
                    for (t = 0, i = 0; r > t; t++) i += e[t][n][1];
                    i > s && (s = i), o.push(i)
                }
                for (n = 0; a > n; ++n) l[n] = (s - o[n]) / 2;
                return l
            },
            wiggle: function (e) {
                var t, n, i, r, a, o, s, l, c, u = e.length,
                    d = e[0],
                    h = d.length,
                    f = [];
                for (f[0] = l = c = 0, n = 1; h > n; ++n) {
                    for (t = 0, r = 0; u > t; ++t) r += e[t][n][1];
                    for (t = 0, a = 0, s = d[n][0] - d[n - 1][0]; u > t; ++t) {
                        for (i = 0, o = (e[t][n][1] - e[t][n - 1][1]) / (2 * s); t > i; ++i) o += (e[i][n][1] - e[i][n - 1][1]) / s;
                        a += o * e[t][n][1]
                    }
                    f[n] = l -= r ? a / r * s : 0, c > l && (c = l)
                }
                for (n = 0; h > n; ++n) f[n] -= c;
                return f
            },
            expand: function (e) {
                var t, n, i, r = e.length,
                    a = e[0].length,
                    o = 1 / r,
                    s = [];
                for (n = 0; a > n; ++n) {
                    for (t = 0, i = 0; r > t; t++) i += e[t][n][1];
                    if (i)
                        for (t = 0; r > t; t++) e[t][n][1] /= i;
                    else
                        for (t = 0; r > t; t++) e[t][n][1] = o
                }
                for (n = 0; a > n; ++n) s[n] = 0;
                return s
            },
            zero: Jt
        });
    d3.layout.histogram = function () {
        function e(e, a) {
            for (var o, s, l = [], c = e.map(n, this), u = i.call(this, c, a), d = r.call(this, u, c, a), a = -1, h = c.length, f = d.length - 1, p = t ? 1 : 1 / h; ++a < f;) o = l[a] = [], o.dx = d[a + 1] - (o.x = d[a]), o.y = 0;
            if (f > 0)
                for (a = -1; ++a < h;) s = c[a], s >= u[0] && s <= u[1] && (o = l[d3.bisect(d, s, 1, f) - 1], o.y += p, o.push(e[a]));
            return l
        }
        var t = !0,
            n = Number,
            i = on,
            r = rn;
        return e.value = function (t) {
            return arguments.length ? (n = t, e) : n
        }, e.range = function (t) {
            return arguments.length ? (i = s(t), e) : i
        }, e.bins = function (t) {
            return arguments.length ? (r = "number" == typeof t ? function (e) {
                return an(e, t)
            } : s(t), e) : r
        }, e.frequency = function (n) {
            return arguments.length ? (t = !!n, e) : t
        }, e
    }, d3.layout.hierarchy = function () {
        function e(t, o, s) {
            var l = r.call(n, t, o),
                c = da ? t : {
                    data: t
                };
            if (c.depth = o, s.push(c), l && (u = l.length)) {
                for (var u, d, h = -1, f = c.children = [], p = 0, m = o + 1; ++h < u;) d = e(l[h], m, s), d.parent = c, f.push(d), p += d.value;
                i && f.sort(i), a && (c.value = p)
            } else a && (c.value = +a.call(n, t, o) || 0);
            return c
        }

        function t(e, i) {
            var r = e.children,
                o = 0;
            if (r && (s = r.length))
                for (var s, l = -1, c = i + 1; ++l < s;) o += t(r[l], c);
            else a && (o = +a.call(n, da ? e : e.data, i) || 0);
            return a && (e.value = o), o
        }

        function n(t) {
            var n = [];
            return e(t, 0, n), n
        }
        var i = un,
            r = ln,
            a = cn;
        return n.sort = function (e) {
            return arguments.length ? (i = e, n) : i
        }, n.children = function (e) {
            return arguments.length ? (r = e, n) : r
        }, n.value = function (e) {
            return arguments.length ? (a = e, n) : a
        }, n.revalue = function (e) {
            return t(e, 0), e
        }, n
    };
    var da = !1;
    d3.layout.pack = function () {
        function e(e, r) {
            var a = t.call(this, e, r),
                o = a[0];
            o.x = 0, o.y = 0, Rn(o, function (e) {
                e.r = Math.sqrt(e.value)
            }), Rn(o, gn);
            var s = i[0],
                l = i[1],
                c = Math.max(2 * o.r / s, 2 * o.r / l);
            if (n > 0) {
                var u = n * c / 2;
                Rn(o, function (e) {
                    e.r += u
                }), Rn(o, gn), Rn(o, function (e) {
                    e.r -= u
                }), c = Math.max(2 * o.r / s, 2 * o.r / l)
            }
            return bn(o, s / 2, l / 2, 1 / c), a
        }
        var t = d3.layout.hierarchy().sort(hn),
            n = 0,
            i = [1, 1];
        return e.size = function (t) {
            return arguments.length ? (i = t, e) : i
        }, e.padding = function (t) {
            return arguments.length ? (n = +t, e) : n
        }, sn(e, t)
    }, d3.layout.cluster = function () {
        function e(e, r) {
            var a, o = t.call(this, e, r),
                s = o[0],
                l = 0;
            Rn(s, function (e) {
                var t = e.children;
                t && t.length ? (e.x = xn(t), e.y = _n(t)) : (e.x = a ? l += n(e, a) : 0, e.y = 0, a = e)
            });
            var c = kn(s),
                u = Cn(s),
                d = c.x - n(c, u) / 2,
                h = u.x + n(u, c) / 2;
            return Rn(s, function (e) {
                e.x = (e.x - d) / (h - d) * i[0], e.y = (1 - (s.y ? e.y / s.y : 1)) * i[1]
            }), o
        }
        var t = d3.layout.hierarchy().sort(null).value(null),
            n = Sn,
            i = [1, 1];
        return e.separation = function (t) {
            return arguments.length ? (n = t, e) : n
        }, e.size = function (t) {
            return arguments.length ? (i = t, e) : i
        }, sn(e, t)
    }, d3.layout.tree = function () {
        function e(e, r) {
            function a(e, t) {
                var i = e.children,
                    r = e._tree;
                if (i && (o = i.length)) {
                    for (var o, l, c, u = i[0], d = u, h = -1; ++h < o;) c = i[h], a(c, l), d = s(c, l, d), l = c;
                    In(e);
                    var f = .5 * (u._tree.prelim + c._tree.prelim);
                    t ? (r.prelim = t._tree.prelim + n(e, t), r.mod = r.prelim - f) : r.prelim = f
                } else t && (r.prelim = t._tree.prelim + n(e, t))
            }

            function o(e, t) {
                e.x = e._tree.prelim + t;
                var n = e.children;
                if (n && (i = n.length)) {
                    var i, r = -1;
                    for (t += e._tree.mod; ++r < i;) o(n[r], t)
                }
            }

            function s(e, t, i) {
                if (t) {
                    for (var r, a = e, o = e, s = t, l = e.parent.children[0], c = a._tree.mod, u = o._tree.mod, d = s._tree.mod, h = l._tree.mod; s = Tn(s), a = An(a), s && a;) l = An(l), o = Tn(o), o._tree.ancestor = e, r = s._tree.prelim + d - a._tree.prelim - c + n(s, a), r > 0 && (Pn(Hn(s, e, i), e, r), c += r, u += r), d += s._tree.mod, c += a._tree.mod, h += l._tree.mod, u += o._tree.mod;
                    s && !Tn(o) && (o._tree.thread = s, o._tree.mod += d - u), a && !An(l) && (l._tree.thread = a, l._tree.mod += c - h, i = e)
                }
                return i
            }
            var l = t.call(this, e, r),
                c = l[0];
            Rn(c, function (e, t) {
                e._tree = {
                    ancestor: e,
                    prelim: 0,
                    mod: 0,
                    change: 0,
                    shift: 0,
                    number: t ? t._tree.number + 1 : 0
                }
            }), a(c), o(c, -c._tree.prelim);
            var u = En(c, $n),
                d = En(c, Dn),
                h = En(c, Mn),
                f = u.x - n(u, d) / 2,
                p = d.x + n(d, u) / 2,
                m = h.depth || 1;
            return Rn(c, function (e) {
                e.x = (e.x - f) / (p - f) * i[0], e.y = e.depth / m * i[1], delete e._tree
            }), l
        }
        var t = d3.layout.hierarchy().sort(null).value(null),
            n = Sn,
            i = [1, 1];
        return e.separation = function (t) {
            return arguments.length ? (n = t, e) : n
        }, e.size = function (t) {
            return arguments.length ? (i = t, e) : i
        }, sn(e, t)
    }, d3.layout.treemap = function () {
        function e(e, t) {
            for (var n, i, r = -1, a = e.length; ++r < a;) i = (n = e[r]).value * (0 > t ? 0 : t), n.area = isNaN(i) || 0 >= i ? 0 : i
        }

        function t(n) {
            var a = n.children;
            if (a && a.length) {
                var o, s, l, c = d(n),
                    u = [],
                    h = a.slice(),
                    f = 1 / 0,
                    p = Math.min(c.dx, c.dy);
                for (e(h, c.dx * c.dy / n.value), u.area = 0;
                    (l = h.length) > 0;) u.push(o = h[l - 1]), u.area += o.area, (s = i(u, p)) <= f ? (h.pop(), f = s) : (u.area -= u.pop().area, r(u, p, c, !1), p = Math.min(c.dx, c.dy), u.length = u.area = 0, f = 1 / 0);
                u.length && (r(u, p, c, !0), u.length = u.area = 0), a.forEach(t)
            }
        }

        function n(t) {
            var i = t.children;
            if (i && i.length) {
                var a, o = d(t),
                    s = i.slice(),
                    l = [];
                for (e(s, o.dx * o.dy / t.value), l.area = 0; a = s.pop();) l.push(a), l.area += a.area, null != a.z && (r(l, a.z ? o.dx : o.dy, o, !s.length), l.length = l.area = 0);
                i.forEach(n)
            }
        }

        function i(e, t) {
            for (var n, i = e.area, r = 0, a = 1 / 0, o = -1, s = e.length; ++o < s;)(n = e[o].area) && (a > n && (a = n), n > r && (r = n));
            return i *= i, t *= t, i ? Math.max(t * r * f / i, i / (t * a * f)) : 1 / 0
        }

        function r(e, t, n, i) {
            var r, a = -1,
                o = e.length,
                s = n.x,
                c = n.y,
                u = t ? l(e.area / t) : 0;
            if (t == n.dx) {
                for ((i || u > n.dy) && (u = n.dy); ++a < o;) r = e[a], r.x = s, r.y = c, r.dy = u, s += r.dx = Math.min(n.x + n.dx - s, u ? l(r.area / u) : 0);
                r.z = !0, r.dx += n.x + n.dx - s, n.y += u, n.dy -= u
            } else {
                for ((i || u > n.dx) && (u = n.dx); ++a < o;) r = e[a], r.x = s, r.y = c, r.dx = u, c += r.dy = Math.min(n.y + n.dy - c, u ? l(r.area / u) : 0);
                r.z = !1, r.dy += n.y + n.dy - c, n.x += u, n.dx -= u
            }
        }

        function a(i) {
            var r = o || s(i),
                a = r[0];
            return a.x = 0, a.y = 0, a.dx = c[0], a.dy = c[1], o && s.revalue(a), e([a], a.dx * a.dy / a.value), (o ? n : t)(a), h && (o = r), r
        }
        var o, s = d3.layout.hierarchy(),
            l = Math.round,
            c = [1, 1],
            u = null,
            d = On,
            h = !1,
            f = .5 * (1 + Math.sqrt(5));
        return a.size = function (e) {
            return arguments.length ? (c = e, a) : c
        }, a.padding = function (e) {
            function t(t) {
                var n = e.call(a, t, t.depth);
                return null == n ? On(t) : jn(t, "number" == typeof n ? [n, n, n, n] : n)
            }

            function n(t) {
                return jn(t, e)
            }
            if (!arguments.length) return u;
            var i;
            return d = null == (u = e) ? On : "function" == (i = typeof e) ? t : "number" === i ? (e = [e, e, e, e], n) : n, a
        }, a.round = function (e) {
            return arguments.length ? (l = e ? Math.round : Number, a) : l != Number
        }, a.sticky = function (e) {
            return arguments.length ? (h = e, o = null, a) : h
        }, a.ratio = function (e) {
            return arguments.length ? (f = e, a) : f
        }, sn(a, s)
    }, d3.csv = Nn(",", "text/csv"), d3.tsv = Nn(" ", "text/tab-separated-values"), d3.geo = {};
    var ha = Math.PI / 180;
    d3.geo.azimuthal = function () {
        function e(e) {
            var t, i = e[0] * ha - n,
                c = e[1] * ha,
                u = Math.cos(i),
                d = Math.sin(i),
                h = Math.cos(c),
                f = Math.sin(c),
                p = "orthographic" !== o ? a * f + r * h * u : null,
                m = "stereographic" === o ? 1 / (1 + p) : "gnomonic" === o ? 1 / p : "equidistant" === o ? (t = Math.acos(p), t ? t / Math.sin(t) : 0) : "equalarea" === o ? Math.sqrt(2 / (1 + p)) : 1,
                g = m * h * d,
                v = m * (a * h * u - r * f);
            return [s * g + l[0], s * v + l[1]]
        }
        var t, n, i, r, a, o = "orthographic",
            s = 200,
            l = [480, 250];
        return e.invert = function (e) {
            var t = (e[0] - l[0]) / s,
                i = (e[1] - l[1]) / s,
                c = Math.sqrt(t * t + i * i),
                u = "stereographic" === o ? 2 * Math.atan(c) : "gnomonic" === o ? Math.atan(c) : "equidistant" === o ? c : "equalarea" === o ? 2 * Math.asin(.5 * c) : Math.asin(c),
                d = Math.sin(u),
                h = Math.cos(u);
            return [(n + Math.atan2(t * d, c * r * h + i * a * d)) / ha, Math.asin(h * a - (c ? i * d * r / c : 0)) / ha]
        }, e.mode = function (t) {
            return arguments.length ? (o = t + "", e) : o
        }, e.origin = function (o) {
            return arguments.length ? (t = o, n = t[0] * ha, i = t[1] * ha, r = Math.cos(i), a = Math.sin(i), e) : t
        }, e.scale = function (t) {
            return arguments.length ? (s = +t, e) : s
        }, e.translate = function (t) {
            return arguments.length ? (l = [+t[0], +t[1]], e) : l
        }, e.origin([0, 0])
    }, d3.geo.albers = function () {
        function e(e) {
            var t = i * (ha * e[0] - n),
                o = Math.sqrt(r - 2 * i * Math.sin(ha * e[1])) / i;
            return [l * o * Math.sin(t) + c[0], l * (o * Math.cos(t) - a) + c[1]]
        }

        function t() {
            var t = ha * s[0],
                l = ha * s[1],
                c = ha * o[1],
                u = Math.sin(t),
                d = Math.cos(t);
            return n = ha * o[0], i = .5 * (u + Math.sin(l)), r = d * d + 2 * i * u, a = Math.sqrt(r - 2 * i * Math.sin(c)) / i, e
        }
        var n, i, r, a, o = [-98, 38],
            s = [29.5, 45.5],
            l = 1e3,
            c = [480, 250];
        return e.invert = function (e) {
            var t = (e[0] - c[0]) / l,
                o = (e[1] - c[1]) / l,
                s = a + o,
                u = Math.atan2(t, s),
                d = Math.sqrt(t * t + s * s);
            return [(n + u / i) / ha, Math.asin((r - d * d * i * i) / (2 * i)) / ha]
        }, e.origin = function (e) {
            return arguments.length ? (o = [+e[0], +e[1]], t()) : o
        }, e.parallels = function (e) {
            return arguments.length ? (s = [+e[0], +e[1]], t()) : s
        }, e.scale = function (t) {
            return arguments.length ? (l = +t, e) : l
        }, e.translate = function (t) {
            return arguments.length ? (c = [+t[0], +t[1]], e) : c
        }, t()
    }, d3.geo.albersUsa = function () {
        function e(e) {
            var a = e[0],
                o = e[1];
            return (o > 50 ? n : -140 > a ? i : 21 > o ? r : t)(e)
        }
        var t = d3.geo.albers(),
            n = d3.geo.albers().origin([-160, 60]).parallels([55, 65]),
            i = d3.geo.albers().origin([-160, 20]).parallels([8, 18]),
            r = d3.geo.albers().origin([-60, 10]).parallels([8, 18]);
        return e.scale = function (a) {
            return arguments.length ? (t.scale(a), n.scale(.6 * a), i.scale(a), r.scale(1.5 * a), e.translate(t.translate())) : t.scale()
        }, e.translate = function (a) {
            if (!arguments.length) return t.translate();
            var o = t.scale() / 1e3,
                s = a[0],
                l = a[1];
            return t.translate(a), n.translate([s - 400 * o, l + 170 * o]), i.translate([s - 190 * o, l + 200 * o]), r.translate([s + 580 * o, l + 430 * o]), e
        }, e.scale(t.scale())
    }, d3.geo.bonne = function () {
        function e(e) {
            var s = e[0] * ha - t,
                l = e[1] * ha - n;
            if (i) {
                var c = r + i - l,
                    u = s * Math.cos(l) / c;
                s = c * Math.sin(u), l = c * Math.cos(u) - r
            } else s *= Math.cos(l), l *= -1;
            return [a * s + o[0], a * l + o[1]]
        }
        var t, n, i, r, a = 200,
            o = [480, 250];
        return e.invert = function (e) {
            var n = (e[0] - o[0]) / a,
                s = (e[1] - o[1]) / a;
            if (i) {
                var l = r + s,
                    c = Math.sqrt(n * n + l * l);
                s = r + i - c, n = t + c * Math.atan2(n, l) / Math.cos(s)
            } else s *= -1, n /= Math.cos(s);
            return [n / ha, s / ha]
        }, e.parallel = function (t) {
            return arguments.length ? (r = 1 / Math.tan(i = t * ha), e) : i / ha
        }, e.origin = function (i) {
            return arguments.length ? (t = i[0] * ha, n = i[1] * ha, e) : [t / ha, n / ha]
        }, e.scale = function (t) {
            return arguments.length ? (a = +t, e) : a
        }, e.translate = function (t) {
            return arguments.length ? (o = [+t[0], +t[1]], e) : o
        }, e.origin([0, 0]).parallel(45)
    }, d3.geo.equirectangular = function () {
        function e(e) {
            var i = e[0] / 360,
                r = -e[1] / 360;
            return [t * i + n[0], t * r + n[1]]
        }
        var t = 500,
            n = [480, 250];
        return e.invert = function (e) {
            var i = (e[0] - n[0]) / t,
                r = (e[1] - n[1]) / t;
            return [360 * i, -360 * r]
        }, e.scale = function (n) {
            return arguments.length ? (t = +n, e) : t
        }, e.translate = function (t) {
            return arguments.length ? (n = [+t[0], +t[1]], e) : n
        }, e
    }, d3.geo.mercator = function () {
        function e(e) {
            var i = e[0] / 360,
                r = -(Math.log(Math.tan(Math.PI / 4 + e[1] * ha / 2)) / ha) / 360;
            return [t * i + n[0], t * Math.max(-.5, Math.min(.5, r)) + n[1]]
        }
        var t = 500,
            n = [480, 250];
        return e.invert = function (e) {
            var i = (e[0] - n[0]) / t,
                r = (e[1] - n[1]) / t;
            return [360 * i, 2 * Math.atan(Math.exp(-360 * r * ha)) / ha - 90]
        }, e.scale = function (n) {
            return arguments.length ? (t = +n, e) : t
        }, e.translate = function (t) {
            return arguments.length ? (n = [+t[0], +t[1]], e) : n
        }, e
    }, d3.geo.path = function () {
        function e(e, t) {
            "function" == typeof a && (o = Ln(a.apply(this, arguments))), c(e);
            var n = l.length ? l.join("") : null;
            return l = [], n
        }

        function t(e) {
            return s(e).join(",")
        }

        function n(e) {
            for (var t = r(e[0]), n = 0, i = e.length; ++n < i;) t -= r(e[n]);
            return t
        }

        function i(e) {
            for (var t = d3.geom.polygon(e[0].map(s)), n = t.area(), i = t.centroid(0 > n ? (n *= -1, 1) : -1), r = i[0], a = i[1], o = n, l = 0, c = e.length; ++l < c;) t = d3.geom.polygon(e[l].map(s)), n = t.area(), i = t.centroid(0 > n ? (n *= -1, 1) : -1), r -= i[0], a -= i[1], o -= n;
            return [r, a, 6 * o]
        }

        function r(e) {
            return Math.abs(d3.geom.polygon(e.map(s)).area())
        }
        var a = 4.5,
            o = Ln(a),
            s = d3.geo.albersUsa(),
            l = [],
            c = zn({
                FeatureCollection: function (e) {
                    for (var t = e.features, n = -1, i = t.length; ++n < i;) l.push(c(t[n].geometry))
                },
                Feature: function (e) {
                    c(e.geometry)
                },
                Point: function (e) {
                    l.push("M", t(e.coordinates), o)
                },
                MultiPoint: function (e) {
                    for (var n = e.coordinates, i = -1, r = n.length; ++i < r;) l.push("M", t(n[i]), o)
                },
                LineString: function (e) {
                    var n = e.coordinates,
                        i = -1,
                        r = n.length;
                    for (l.push("M"); ++i < r;) l.push(t(n[i]), "L");
                    l.pop()
                },
                MultiLineString: function (e) {
                    for (var n, i, r, a = e.coordinates, o = -1, s = a.length; ++o < s;) {
                        for (n = a[o], i = -1, r = n.length, l.push("M"); ++i < r;) l.push(t(n[i]), "L");
                        l.pop()
                    }
                },
                Polygon: function (e) {
                    for (var n, i, r, a = e.coordinates, o = -1, s = a.length; ++o < s;)
                        if (n = a[o], i = -1, (r = n.length - 1) > 0) {
                            for (l.push("M"); ++i < r;) l.push(t(n[i]), "L");
                            l[l.length - 1] = "Z"
                        }
                },
                MultiPolygon: function (e) {
                    for (var n, i, r, a, o, s, c = e.coordinates, u = -1, d = c.length; ++u < d;)
                        for (n = c[u], i = -1, r = n.length; ++i < r;)
                            if (a = n[i], o = -1, (s = a.length - 1) > 0) {
                                for (l.push("M"); ++o < s;) l.push(t(a[o]), "L");
                                l[l.length - 1] = "Z"
                            }
                },
                GeometryCollection: function (e) {
                    for (var t = e.geometries, n = -1, i = t.length; ++n < i;) l.push(c(t[n]))
                }
            }),
            u = e.area = zn({
                FeatureCollection: function (e) {
                    for (var t = 0, n = e.features, i = -1, r = n.length; ++i < r;) t += u(n[i]);
                    return t
                },
                Feature: function (e) {
                    return u(e.geometry)
                },
                Polygon: function (e) {
                    return n(e.coordinates)
                },
                MultiPolygon: function (e) {
                    for (var t = 0, i = e.coordinates, r = -1, a = i.length; ++r < a;) t += n(i[r]);
                    return t
                },
                GeometryCollection: function (e) {
                    for (var t = 0, n = e.geometries, i = -1, r = n.length; ++i < r;) t += u(n[i]);
                    return t
                }
            }, 0),
            d = e.centroid = zn({
                Feature: function (e) {
                    return d(e.geometry)
                },
                Polygon: function (e) {
                    var t = i(e.coordinates);
                    return [t[0] / t[2], t[1] / t[2]]
                },
                MultiPolygon: function (e) {
                    for (var t, n = e.coordinates, r = 0, a = 0, o = 0, s = -1, l = n.length; ++s < l;) t = i(n[s]), r += t[0], a += t[1], o += t[2];
                    return [r / o, a / o]
                }
            });
        return e.projection = function (t) {
            return s = t, e
        }, e.pointRadius = function (t) {
            return "function" == typeof t ? a = t : (a = +t, o = Ln(a)), e
        }, e
    }, d3.geo.bounds = function (e) {
        var t = 1 / 0,
            n = 1 / 0,
            i = -(1 / 0),
            r = -(1 / 0);
        return Fn(e, function (e, a) {
            t > e && (t = e), e > i && (i = e), n > a && (n = a), a > r && (r = a)
        }), [
                [t, n],
                [i, r]
            ]
    };
    var fa = {
        Feature: Bn,
        FeatureCollection: Wn,
        GeometryCollection: Un,
        LineString: qn,
        MultiLineString: Gn,
        MultiPoint: qn,
        MultiPolygon: Yn,
        Point: Vn,
        Polygon: Xn
    };
    d3.geo.circle = function () {
        function e() { }

        function t(e) {
            return l.distance(e) < s
        }

        function n(e) {
            for (var t, n, r, a, o, c = -1, u = e.length, d = []; ++c < u;) o = l.distance(r = e[c]), s > o ? (n && d.push(Jn(n, r)((a - s) / (a - o))), d.push(r), t = n = null) : (n = r, !t && d.length && (d.push(Jn(d[d.length - 1], n)((s - a) / (o - a))), t = n)), a = o;
            return t = e[0], n = d[0], !n || r[0] !== t[0] || r[1] !== t[1] || r[0] === n[0] && r[1] === n[1] || d.push(n), i(d)
        }

        function i(e) {
            for (var t, n, i, r = 0, a = e.length, o = a ? [e[0]] : e, s = l.source(); ++r < a;)
                for (i = l.source(e[r - 1])(e[r]).coordinates, t = 0, n = i.length; ++t < n;) o.push(i[t]);
            return l.source(s), o
        }
        var a = [0, 0],
            o = 89.99,
            s = o * ha,
            l = d3.geo.greatArc().source(a).target(r);
        e.clip = function (e) {
            return "function" == typeof a && l.source(a.apply(this, arguments)), c(e) || null
        };
        var c = zn({
            FeatureCollection: function (e) {
                var t = e.features.map(c).filter(r);
                return t && (e = Object.create(e), e.features = t, e)
            },
            Feature: function (e) {
                var t = c(e.geometry);
                return t && (e = Object.create(e), e.geometry = t, e)
            },
            Point: function (e) {
                return t(e.coordinates) && e
            },
            MultiPoint: function (e) {
                var n = e.coordinates.filter(t);
                return n.length && {
                    type: e.type,
                    coordinates: n
                }
            },
            LineString: function (e) {
                var t = n(e.coordinates);
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            MultiLineString: function (e) {
                var t = e.coordinates.map(n).filter(function (e) {
                    return e.length
                });
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            Polygon: function (e) {
                var t = e.coordinates.map(n);
                return t[0].length && (e = Object.create(e), e.coordinates = t, e)
            },
            MultiPolygon: function (e) {
                var t = e.coordinates.map(function (e) {
                    return e.map(n)
                }).filter(function (e) {
                    return e[0].length
                });
                return t.length && (e = Object.create(e), e.coordinates = t, e)
            },
            GeometryCollection: function (e) {
                var t = e.geometries.map(c).filter(r);
                return t.length && (e = Object.create(e), e.geometries = t, e)
            }
        });
        return e.origin = function (t) {
            return arguments.length ? (a = t, "function" != typeof a && l.source(a), e) : a
        }, e.angle = function (t) {
            return arguments.length ? (s = (o = +t) * ha, e) : o
        }, d3.rebind(e, l, "precision")
    }, d3.geo.greatArc = function () {
        function e() {
            for (var i = e.distance.apply(this, arguments), r = 0, s = a / i, l = [t];
                (r += s) < 1;) l.push(o(r));
            return l.push(n), {
                type: "LineString",
                coordinates: l
            }
        }
        var t, n, i = Kn,
            r = Zn,
            a = 6 * ha,
            o = Qn();
        return e.distance = function () {
            return "function" == typeof i && o.source(t = i.apply(this, arguments)), "function" == typeof r && o.target(n = r.apply(this, arguments)), o.distance()
        }, e.source = function (n) {
            return arguments.length ? (i = n, "function" != typeof i && o.source(t = i), e) : i
        }, e.target = function (t) {
            return arguments.length ? (r = t, "function" != typeof r && o.target(n = r), e) : r
        }, e.precision = function (t) {
            return arguments.length ? (a = t * ha, e) : a / ha
        }, e
    }, d3.geo.greatCircle = d3.geo.circle, d3.geom = {}, d3.geom.contour = function (e, t) {
        var n = t || ei(e),
            i = [],
            r = n[0],
            a = n[1],
            o = 0,
            s = 0,
            l = NaN,
            c = NaN,
            u = 0;
        do u = 0, e(r - 1, a - 1) && (u += 1), e(r, a - 1) && (u += 2), e(r - 1, a) && (u += 4), e(r, a) && (u += 8), 6 === u ? (o = -1 === c ? -1 : 1, s = 0) : 9 === u ? (o = 0, s = 1 === l ? -1 : 1) : (o = pa[u], s = ma[u]), o != l && s != c && (i.push([r, a]), l = o, c = s), r += o, a += s; while (n[0] != r || n[1] != a);
        return i
    };
    var pa = [1, 0, 1, 1, -1, 0, -1, 1, 0, 0, 0, 0, -1, 0, -1, NaN],
        ma = [0, -1, 0, 0, 0, -1, 0, 0, 1, -1, 1, 1, 0, -1, 0, NaN];
    d3.geom.hull = function (e) {
        if (e.length < 3) return [];
        var t, n, i, r, a, o, s, l, c, u, d = e.length,
            h = d - 1,
            f = [],
            p = [],
            m = 0;
        for (t = 1; d > t; ++t) e[t][1] < e[m][1] ? m = t : e[t][1] == e[m][1] && (m = e[t][0] < e[m][0] ? t : m);
        for (t = 0; d > t; ++t) t !== m && (r = e[t][1] - e[m][1], i = e[t][0] - e[m][0], f.push({
            angle: Math.atan2(r, i),
            index: t
        }));
        for (f.sort(function (e, t) {
            return e.angle - t.angle
        }), c = f[0].angle, l = f[0].index, s = 0, t = 1; h > t; ++t) n = f[t].index, c == f[t].angle ? (i = e[l][0] - e[m][0], r = e[l][1] - e[m][1], a = e[n][0] - e[m][0], o = e[n][1] - e[m][1], i * i + r * r >= a * a + o * o ? f[t].index = -1 : (f[s].index = -1, c = f[t].angle, s = t, l = n)) : (c = f[t].angle, s = t, l = n);
        for (p.push(m), t = 0, n = 0; 2 > t; ++n) - 1 !== f[n].index && (p.push(f[n].index), t++);
        for (u = p.length; h > n; ++n)
            if (-1 !== f[n].index) {
                for (; !ti(p[u - 2], p[u - 1], f[n].index, e);) --u;
                p[u++] = f[n].index
            } var g = [];
        for (t = 0; u > t; ++t) g.push(e[p[t]]);
        return g
    }, d3.geom.polygon = function (e) {
        return e.area = function () {
            for (var t = 0, n = e.length, i = e[n - 1][0] * e[0][1], r = e[n - 1][1] * e[0][0]; ++t < n;) i += e[t - 1][0] * e[t][1], r += e[t - 1][1] * e[t][0];
            return .5 * (r - i)
        }, e.centroid = function (t) {
            var n, i, r = -1,
                a = e.length,
                o = 0,
                s = 0,
                l = e[a - 1];
            for (arguments.length || (t = -1 / (6 * e.area())); ++r < a;) n = l, l = e[r], i = n[0] * l[1] - l[0] * n[1], o += (n[0] + l[0]) * i, s += (n[1] + l[1]) * i;
            return [o * t, s * t]
        }, e.clip = function (t) {
            for (var n, i, r, a, o, s, l = -1, c = e.length, u = e[c - 1]; ++l < c;) {
                for (n = t.slice(), t.length = 0, a = e[l], o = n[(r = n.length) - 1], i = -1; ++i < r;) s = n[i], ni(s, u, a) ? (ni(o, u, a) || t.push(ii(o, s, u, a)), t.push(s)) : ni(o, u, a) && t.push(ii(o, s, u, a)), o = s;
                u = a
            }
            return t
        }, e
    }, d3.geom.voronoi = function (e) {
        var t = e.map(function () {
            return []
        });
        return ri(e, function (e) {
            var n, i, r, a, o, s;
            1 === e.a && e.b >= 0 ? (n = e.ep.r, i = e.ep.l) : (n = e.ep.l, i = e.ep.r), 1 === e.a ? (o = n ? n.y : -1e6, r = e.c - e.b * o, s = i ? i.y : 1e6, a = e.c - e.b * s) : (r = n ? n.x : -1e6, o = e.c - e.a * r, a = i ? i.x : 1e6, s = e.c - e.a * a);
            var l = [r, o],
                c = [a, s];
            t[e.region.l.index].push(l, c), t[e.region.r.index].push(l, c)
        }), t.map(function (t, n) {
            var i = e[n][0],
                r = e[n][1];
            return t.forEach(function (e) {
                e.angle = Math.atan2(e[0] - i, e[1] - r)
            }), t.sort(function (e, t) {
                return e.angle - t.angle
            }).filter(function (e, n) {
                return !n || e.angle - t[n - 1].angle > 1e-10
            })
        })
    };
    var ga = {
        l: "r",
        r: "l"
    };
    d3.geom.delaunay = function (e) {
        var t = e.map(function () {
            return []
        }),
            n = [];
        return ri(e, function (n) {
            t[n.region.l.index].push(e[n.region.r.index])
        }), t.forEach(function (t, i) {
            var r = e[i],
                a = r[0],
                o = r[1];
            t.forEach(function (e) {
                e.angle = Math.atan2(e[0] - a, e[1] - o)
            }), t.sort(function (e, t) {
                return e.angle - t.angle
            });
            for (var s = 0, l = t.length - 1; l > s; s++) n.push([r, t[s], t[s + 1]])
        }), n
    }, d3.geom.quadtree = function (e, t, n, i, r) {
        function a(e, t, n, i, r, a) {
            if (!isNaN(t.x) && !isNaN(t.y))
                if (e.leaf) {
                    var s = e.point;
                    s ? Math.abs(s.x - t.x) + Math.abs(s.y - t.y) < .01 ? o(e, t, n, i, r, a) : (e.point = null, o(e, s, n, i, r, a), o(e, t, n, i, r, a)) : e.point = t
                } else o(e, t, n, i, r, a)
        }

        function o(e, t, n, i, r, o) {
            var s = .5 * (n + r),
                l = .5 * (i + o),
                c = t.x >= s,
                u = t.y >= l,
                d = (u << 1) + c;
            e.leaf = !1, e = e.nodes[d] || (e.nodes[d] = ai()), c ? n = s : r = s, u ? i = l : o = l, a(e, t, n, i, r, o)
        }
        var s, l = -1,
            c = e.length;
        if (c && isNaN(e[0].x) && (e = e.map(si)), arguments.length < 5)
            if (3 === arguments.length) r = i = n, n = t;
            else {
                for (t = n = 1 / 0, i = r = -(1 / 0); ++l < c;) s = e[l], s.x < t && (t = s.x),
                    s.y < n && (n = s.y), s.x > i && (i = s.x), s.y > r && (r = s.y);
                var u = i - t,
                    d = r - n;
                u > d ? r = n + u : i = t + d
            } var h = ai();
        return h.add = function (e) {
            a(h, e, t, n, i, r)
        }, h.visit = function (e) {
            oi(e, h, t, n, i, r)
        }, e.forEach(h.add), h
    }, d3.time = {};
    var va = Date,
        ya = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    li.prototype = {
        getDate: function () {
            return this._.getUTCDate()
        },
        getDay: function () {
            return this._.getUTCDay()
        },
        getFullYear: function () {
            return this._.getUTCFullYear()
        },
        getHours: function () {
            return this._.getUTCHours()
        },
        getMilliseconds: function () {
            return this._.getUTCMilliseconds()
        },
        getMinutes: function () {
            return this._.getUTCMinutes()
        },
        getMonth: function () {
            return this._.getUTCMonth()
        },
        getSeconds: function () {
            return this._.getUTCSeconds()
        },
        getTime: function () {
            return this._.getTime()
        },
        getTimezoneOffset: function () {
            return 0
        },
        valueOf: function () {
            return this._.valueOf()
        },
        setDate: function () {
            ba.setUTCDate.apply(this._, arguments)
        },
        setDay: function () {
            ba.setUTCDay.apply(this._, arguments)
        },
        setFullYear: function () {
            ba.setUTCFullYear.apply(this._, arguments)
        },
        setHours: function () {
            ba.setUTCHours.apply(this._, arguments)
        },
        setMilliseconds: function () {
            ba.setUTCMilliseconds.apply(this._, arguments)
        },
        setMinutes: function () {
            ba.setUTCMinutes.apply(this._, arguments)
        },
        setMonth: function () {
            ba.setUTCMonth.apply(this._, arguments)
        },
        setSeconds: function () {
            ba.setUTCSeconds.apply(this._, arguments)
        },
        setTime: function () {
            ba.setTime.apply(this._, arguments)
        }
    };
    var ba = Date.prototype,
        wa = "%a %b %e %H:%M:%S %Y",
        _a = "%m/%d/%y",
        xa = "%H:%M:%S",
        ka = ya,
        Ca = ka.map(ci),
        Sa = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        Aa = Sa.map(ci);
    d3.time.format = function (e) {
        function t(t) {
            for (var i, r, a = [], o = -1, s = 0; ++o < n;) 37 == e.charCodeAt(o) && (a.push(e.substring(s, o), (r = ja[i = e.charAt(++o)]) ? r(t) : i), s = o + 1);
            return a.push(e.substring(s, o)), a.join("")
        }
        var n = e.length;
        return t.parse = function (t) {
            var n = {
                y: 1900,
                m: 0,
                d: 1,
                H: 0,
                M: 0,
                S: 0,
                L: 0
            },
                i = ui(n, e, t, 0);
            if (i != t.length) return null;
            "p" in n && (n.H = n.H % 12 + 12 * n.p);
            var r = new va;
            return r.setFullYear(n.y, n.m, n.d), r.setHours(n.H, n.M, n.S, n.L), r
        }, t.toString = function () {
            return e
        }, t
    };
    var Ta = d3.format("02d"),
        Ea = d3.format("03d"),
        Da = d3.format("04d"),
        $a = d3.format("2d"),
        Ma = di(ka),
        Ra = di(Ca),
        Ia = di(Sa),
        Pa = hi(Sa),
        Ha = di(Aa),
        Oa = hi(Aa),
        ja = {
            a: function (e) {
                return Ca[e.getDay()]
            },
            A: function (e) {
                return ka[e.getDay()]
            },
            b: function (e) {
                return Aa[e.getMonth()]
            },
            B: function (e) {
                return Sa[e.getMonth()]
            },
            c: d3.time.format(wa),
            d: function (e) {
                return Ta(e.getDate())
            },
            e: function (e) {
                return $a(e.getDate())
            },
            H: function (e) {
                return Ta(e.getHours())
            },
            I: function (e) {
                return Ta(e.getHours() % 12 || 12)
            },
            j: function (e) {
                return Ea(1 + d3.time.dayOfYear(e))
            },
            L: function (e) {
                return Ea(e.getMilliseconds())
            },
            m: function (e) {
                return Ta(e.getMonth() + 1)
            },
            M: function (e) {
                return Ta(e.getMinutes())
            },
            p: function (e) {
                return e.getHours() >= 12 ? "PM" : "AM"
            },
            S: function (e) {
                return Ta(e.getSeconds())
            },
            U: function (e) {
                return Ta(d3.time.sundayOfYear(e))
            },
            w: function (e) {
                return e.getDay()
            },
            W: function (e) {
                return Ta(d3.time.mondayOfYear(e))
            },
            x: d3.time.format(_a),
            X: d3.time.format(xa),
            y: function (e) {
                return Ta(e.getFullYear() % 100)
            },
            Y: function (e) {
                return Da(e.getFullYear() % 1e4)
            },
            Z: $i,
            "%": function (e) {
                return "%"
            }
        },
        Na = {
            a: fi,
            A: pi,
            b: mi,
            B: gi,
            c: vi,
            d: Ci,
            e: Ci,
            H: Si,
            I: Si,
            L: Ei,
            m: ki,
            M: Ai,
            p: Di,
            S: Ti,
            x: yi,
            X: bi,
            y: _i,
            Y: wi
        },
        za = /^\s*\d+/,
        La = d3.map({
            am: 0,
            pm: 1
        });
    d3.time.format.utc = function (e) {
        function t(e) {
            try {
                va = li;
                var t = new va;
                return t._ = e, n(t)
            } finally {
                va = Date
            }
        }
        var n = d3.time.format(e);
        return t.parse = function (e) {
            try {
                va = li;
                var t = n.parse(e);
                return t && t._
            } finally {
                va = Date
            }
        }, t.toString = n.toString, t
    };
    var Fa = d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
    d3.time.format.iso = Date.prototype.toISOString ? Mi : Fa, Mi.parse = function (e) {
        var t = new Date(e);
        return isNaN(t) ? null : t
    }, Mi.toString = Fa.toString, d3.time.second = Ri(function (e) {
        return new va(1e3 * Math.floor(e / 1e3))
    }, function (e, t) {
        e.setTime(e.getTime() + 1e3 * Math.floor(t))
    }, function (e) {
        return e.getSeconds()
    }), d3.time.seconds = d3.time.second.range, d3.time.seconds.utc = d3.time.second.utc.range, d3.time.minute = Ri(function (e) {
        return new va(6e4 * Math.floor(e / 6e4))
    }, function (e, t) {
        e.setTime(e.getTime() + 6e4 * Math.floor(t))
    }, function (e) {
        return e.getMinutes()
    }), d3.time.minutes = d3.time.minute.range, d3.time.minutes.utc = d3.time.minute.utc.range, d3.time.hour = Ri(function (e) {
        var t = e.getTimezoneOffset() / 60;
        return new va(36e5 * (Math.floor(e / 36e5 - t) + t))
    }, function (e, t) {
        e.setTime(e.getTime() + 36e5 * Math.floor(t))
    }, function (e) {
        return e.getHours()
    }), d3.time.hours = d3.time.hour.range, d3.time.hours.utc = d3.time.hour.utc.range, d3.time.day = Ri(function (e) {
        var t = new va(1970, 0);
        return t.setFullYear(e.getFullYear(), e.getMonth(), e.getDate()), t
    }, function (e, t) {
        e.setDate(e.getDate() + t)
    }, function (e) {
        return e.getDate() - 1
    }), d3.time.days = d3.time.day.range, d3.time.days.utc = d3.time.day.utc.range, d3.time.dayOfYear = function (e) {
        var t = d3.time.year(e);
        return Math.floor((e - t - 6e4 * (e.getTimezoneOffset() - t.getTimezoneOffset())) / 864e5)
    }, ya.forEach(function (e, t) {
        e = e.toLowerCase(), t = 7 - t;
        var n = d3.time[e] = Ri(function (e) {
            return (e = d3.time.day(e)).setDate(e.getDate() - (e.getDay() + t) % 7), e
        }, function (e, t) {
            e.setDate(e.getDate() + 7 * Math.floor(t))
        }, function (e) {
            var n = d3.time.year(e).getDay();
            return Math.floor((d3.time.dayOfYear(e) + (n + t) % 7) / 7) - (n !== t)
        });
        d3.time[e + "s"] = n.range, d3.time[e + "s"].utc = n.utc.range, d3.time[e + "OfYear"] = function (e) {
            var n = d3.time.year(e).getDay();
            return Math.floor((d3.time.dayOfYear(e) + (n + t) % 7) / 7)
        }
    }), d3.time.week = d3.time.sunday, d3.time.weeks = d3.time.sunday.range, d3.time.weeks.utc = d3.time.sunday.utc.range, d3.time.weekOfYear = d3.time.sundayOfYear, d3.time.month = Ri(function (e) {
        return e = d3.time.day(e), e.setDate(1), e
    }, function (e, t) {
        e.setMonth(e.getMonth() + t)
    }, function (e) {
        return e.getMonth()
    }), d3.time.months = d3.time.month.range, d3.time.months.utc = d3.time.month.utc.range, d3.time.year = Ri(function (e) {
        return e = d3.time.day(e), e.setMonth(0, 1), e
    }, function (e, t) {
        e.setFullYear(e.getFullYear() + t)
    }, function (e) {
        return e.getFullYear()
    }), d3.time.years = d3.time.year.range, d3.time.years.utc = d3.time.year.utc.range;
    var Ba = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
        Wa = [
            [d3.time.second, 1],
            [d3.time.second, 5],
            [d3.time.second, 15],
            [d3.time.second, 30],
            [d3.time.minute, 1],
            [d3.time.minute, 5],
            [d3.time.minute, 15],
            [d3.time.minute, 30],
            [d3.time.hour, 1],
            [d3.time.hour, 3],
            [d3.time.hour, 6],
            [d3.time.hour, 12],
            [d3.time.day, 1],
            [d3.time.day, 2],
            [d3.time.week, 1],
            [d3.time.month, 1],
            [d3.time.month, 3],
            [d3.time.year, 1]
        ],
        Ua = [
            [d3.time.format("%Y"), function (e) {
                return !0
            }],
            [d3.time.format("%B"), function (e) {
                return e.getMonth()
            }],
            [d3.time.format("%b %d"), function (e) {
                return 1 != e.getDate()
            }],
            [d3.time.format("%a %d"), function (e) {
                return e.getDay() && 1 != e.getDate()
            }],
            [d3.time.format("%I %p"), function (e) {
                return e.getHours()
            }],
            [d3.time.format("%I:%M"), function (e) {
                return e.getMinutes()
            }],
            [d3.time.format(":%S"), function (e) {
                return e.getSeconds()
            }],
            [d3.time.format(".%L"), function (e) {
                return e.getMilliseconds()
            }]
        ],
        qa = d3.scale.linear(),
        Ga = ji(Ua);
    Wa.year = function (e, t) {
        return qa.domain(e.map(zi)).ticks(t).map(Ni)
    }, d3.time.scale = function () {
        return Pi(d3.scale.linear(), Wa, Ga)
    };
    var Ya = Wa.map(function (e) {
        return [e[0].utc, e[1]]
    }),
        Va = [
            [d3.time.format.utc("%Y"), function (e) {
                return !0
            }],
            [d3.time.format.utc("%B"), function (e) {
                return e.getUTCMonth()
            }],
            [d3.time.format.utc("%b %d"), function (e) {
                return 1 != e.getUTCDate()
            }],
            [d3.time.format.utc("%a %d"), function (e) {
                return e.getUTCDay() && 1 != e.getUTCDate()
            }],
            [d3.time.format.utc("%I %p"), function (e) {
                return e.getUTCHours()
            }],
            [d3.time.format.utc("%I:%M"), function (e) {
                return e.getUTCMinutes()
            }],
            [d3.time.format.utc(":%S"), function (e) {
                return e.getUTCSeconds()
            }],
            [d3.time.format.utc(".%L"), function (e) {
                return e.getUTCMilliseconds()
            }]
        ],
        Xa = ji(Va);
    Ya.year = function (e, t) {
        return qa.domain(e.map(Fi)).ticks(t).map(Li)
    }, d3.time.scale.utc = function () {
        return Pi(d3.scale.linear(), Ya, Xa)
    }
}();
var Rickshaw = {
    namespace: function (e, t) {
        for (var n = e.split("."), i = Rickshaw, r = 1, a = n.length; a > r; r++) {
            var o = n[r];
            i[o] = i[o] || {}, i = i[o]
        }
        return i
    },
    keys: function (e) {
        var t = [];
        for (var n in e) t.push(n);
        return t
    },
    extend: function (e, t) {
        for (var n in t) e[n] = t[n];
        return e
    },
    clone: function (e) {
        return JSON.parse(JSON.stringify(e))
    }
};
if ("undefined" != typeof module && module.exports) {
    var d3 = require("d3");
    module.exports = Rickshaw
}
if (function (e) {
    function t(e) {
        return d.call(e) === y
    }

    function n(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
        return e
    }

    function i(e) {
        if (r(e) !== v) throw new TypeError;
        var t = [];
        for (var n in e) e.hasOwnProperty(n) && t.push(n);
        return t
    }

    function r(e) {
        switch (e) {
            case null:
                return h;
            case void 0:
                return f
        }
        var t = typeof e;
        switch (t) {
            case "boolean":
                return p;
            case "number":
                return m;
            case "string":
                return g
        }
        return v
    }

    function a(e) {
        return "undefined" == typeof e
    }

    function o(e) {
        var t = e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g, "").replace(/\s+/g, "").split(",");
        return 1 != t.length || t[0] ? t : []
    }

    function s(e, t) {
        var n = e;
        return function () {
            var e = l([u(n, this)], arguments);
            return t.apply(this, e)
        }
    }

    function l(e, t) {
        for (var n = e.length, i = t.length; i--;) e[n + i] = t[i];
        return e
    }

    function c(e, t) {
        return e = b.call(e, 0), l(e, t)
    }

    function u(e, t) {
        if (arguments.length < 2 && a(arguments[0])) return this;
        var n = e,
            i = b.call(arguments, 2);
        return function () {
            var e = c(i, arguments);
            return n.apply(t, e)
        }
    }
    var d = Object.prototype.toString,
        h = "Null",
        f = "Undefined",
        p = "Boolean",
        m = "Number",
        g = "String",
        v = "Object",
        y = "[object Function]",
        b = Array.prototype.slice,
        w = function () { },
        _ = function () {
            function e() { }

            function r() {
                function i() {
                    this.initialize.apply(this, arguments)
                }
                var r = null,
                    a = [].slice.apply(arguments);
                if (t(a[0]) && (r = a.shift()), n(i, _.Methods), i.superclass = r, i.subclasses = [], r) {
                    e.prototype = r.prototype, i.prototype = new e;
                    try {
                        r.subclasses.push(i)
                    } catch (o) { }
                }
                for (var s = 0, l = a.length; l > s; s++) i.addMethods(a[s]);
                return i.prototype.initialize || (i.prototype.initialize = w), i.prototype.constructor = i, i
            }

            function a(e) {
                var n = this.superclass && this.superclass.prototype,
                    r = i(e);
                l && (e.toString != Object.prototype.toString && r.push("toString"), e.valueOf != Object.prototype.valueOf && r.push("valueOf"));
                for (var a = 0, c = r.length; c > a; a++) {
                    var d = r[a],
                        h = e[d];
                    if (n && t(h) && "$super" == o(h)[0]) {
                        var f = h;
                        h = s(function (e) {
                            return function () {
                                return n[e].apply(this, arguments)
                            }
                        }(d), f), h.valueOf = u(f.valueOf, f), h.toString = u(f.toString, f)
                    }
                    this.prototype[d] = h
                }
                return this
            }
            var l = function () {
                for (var e in {
                    toString: 1
                })
                    if ("toString" === e) return !1;
                return !0
            }();
            return {
                create: r,
                Methods: {
                    addMethods: a
                }
            }
        }();
    e.exports ? e.exports.Class = _ : e.Class = _
}(Rickshaw), Rickshaw.namespace("Rickshaw.Compat.ClassList"), Rickshaw.Compat.ClassList = function () {
    "undefined" == typeof document || "classList" in document.createElement("a") || ! function (e) {
        "use strict";
        var t = "classList",
            n = "prototype",
            i = (e.HTMLElement || e.Element)[n],
            r = Object,
            a = String[n].trim || function () {
                return this.replace(/^\s+|\s+$/g, "")
            },
            o = Array[n].indexOf || function (e) {
                for (var t = 0, n = this.length; n > t; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            },
            s = function (e, t) {
                this.name = e, this.code = DOMException[e], this.message = t
            },
            l = function (e, t) {
                if ("" === t) throw new s("SYNTAX_ERR", "An invalid or illegal string was specified");
                if (/\s/.test(t)) throw new s("INVALID_CHARACTER_ERR", "String contains an invalid character");
                return o.call(e, t)
            },
            c = function (e) {
                for (var t = a.call(e.className), n = t ? t.split(/\s+/) : [], i = 0, r = n.length; r > i; i++) this.push(n[i]);
                this._updateClassName = function () {
                    e.className = this.toString()
                }
            },
            u = c[n] = [],
            d = function () {
                return new c(this)
            };
        if (s[n] = Error[n], u.item = function (e) {
            return this[e] || null
        }, u.contains = function (e) {
            return e += "", -1 !== l(this, e)
        }, u.add = function (e) {
            e += "", -1 === l(this, e) && (this.push(e), this._updateClassName())
        }, u.remove = function (e) {
            e += "";
            var t = l(this, e); - 1 !== t && (this.splice(t, 1), this._updateClassName())
        }, u.toggle = function (e) {
            e += "", -1 === l(this, e) ? this.add(e) : this.remove(e)
        }, u.toString = function () {
            return this.join(" ")
        }, r.defineProperty) {
            var h = {
                get: d,
                enumerable: !0,
                configurable: !0
            };
            try {
                r.defineProperty(i, t, h)
            } catch (f) {
                -2146823252 === f.number && (h.enumerable = !1, r.defineProperty(i, t, h))
            }
        } else r[n].__defineGetter__ && i.__defineGetter__(t, d)
    }(window)
}, ("undefined" != typeof RICKSHAW_NO_COMPAT && !RICKSHAW_NO_COMPAT || "undefined" == typeof RICKSHAW_NO_COMPAT) && new Rickshaw.Compat.ClassList, Rickshaw.namespace("Rickshaw.Graph"), Rickshaw.Graph = function (e) {
    if (!e.element) throw "Rickshaw.Graph needs a reference to an element";
    this.element = e.element, this.series = e.series, this.defaults = {
        interpolation: "cardinal",
        offset: "zero",
        min: void 0,
        max: void 0,
        preserve: !1
    }, Rickshaw.keys(this.defaults).forEach(function (t) {
        this[t] = e[t] || this.defaults[t]
    }, this), this.window = {}, this.updateCallbacks = [];
    var t = this;
    this.initialize = function (e) {
        this.validateSeries(e.series), this.series.active = function () {
            return t.series.filter(function (e) {
                return !e.disabled
            })
        }, this.setSize({
            width: e.width,
            height: e.height
        }), this.element.classList.add("rickshaw_graph"), this.vis = d3.select(this.element).append("svg:svg").attr("width", this.width).attr("height", this.height);
        for (var n in Rickshaw.Graph.Renderer)
            if (n && Rickshaw.Graph.Renderer.hasOwnProperty(n)) {
                var i = Rickshaw.Graph.Renderer[n];
                i && i.prototype && i.prototype.render && t.registerRenderer(new i({
                    graph: t
                }))
            } this.setRenderer(e.renderer || "stack", e), this.discoverRange()
    }, this.validateSeries = function (e) {
        if (!(Array.isArray(e) || e instanceof Rickshaw.Series)) {
            var t = Object.prototype.toString.apply(e);
            throw "series is not an array: " + t
        }
        e.forEach(function (e) {
            if (!(e instanceof Object)) throw "series element is not an object: " + e;
            if (!e.data) throw "series has no data: " + JSON.stringify(e);
            if (!Array.isArray(e.data)) throw "series data is not an array: " + JSON.stringify(e.data);
            var t = e.data[0].x,
                n = e.data[0].y;
            if ("number" != typeof t || "number" != typeof n && null !== n) throw "x and y properties of points should be numbers instead of " + typeof t + " and " + typeof n;
            if (e.data.length >= 3 && (e.data[2].x < e.data[1].x || e.data[1].x < e.data[0].x || e.data[e.data.length - 1].x < e.data[0].x)) throw "series data needs to be sorted on x values for series name: " + e.name
        }, this)
    }, this.dataDomain = function () {
        var e = this.series.map(function (e) {
            return e.data
        }),
            t = d3.min(e.map(function (e) {
                return e[0].x
            })),
            n = d3.max(e.map(function (e) {
                return e[e.length - 1].x
            }));
        return [t, n]
    }, this.discoverRange = function () {
        var e = this.renderer.domain();
        this.x = d3.scale.linear().domain(e.x).range([0, this.width]), this.y = d3.scale.linear().domain(e.y).range([this.height, 0]), this.y.magnitude = d3.scale.linear().domain([e.y[0] - e.y[0], e.y[1] - e.y[0]]).range([0, this.height])
    }, this.render = function () {
        this.stackData();
        this.discoverRange(), this.renderer.render(), this.updateCallbacks.forEach(function (e) {
            e()
        })
    }, this.update = this.render, this.stackData = function () {
        var e = this.series.active().map(function (e) {
            return e.data
        }).map(function (e) {
            return e.filter(function (e) {
                return this._slice(e)
            }, this)
        }, this),
            n = this.preserve;
        n || this.series.forEach(function (e) {
            e.scale && (n = !0)
        }), e = n ? Rickshaw.clone(e) : e, this.series.active().forEach(function (t, n) {
            if (t.scale) {
                var i = e[n];
                i && i.forEach(function (e) {
                    e.y = t.scale(e.y)
                })
            }
        }), this.stackData.hooks.data.forEach(function (n) {
            e = n.f.apply(t, [e])
        });
        var i;
        if (!this.renderer.unstack) {
            this._validateStackable();
            var r = d3.layout.stack();
            r.offset(t.offset), i = r(e)
        }
        i = i || e, this.stackData.hooks.after.forEach(function (n) {
            i = n.f.apply(t, [e])
        });
        var a = 0;
        return this.series.forEach(function (e) {
            e.disabled || (e.stack = i[a++])
        }), this.stackedData = i, i
    }, this._validateStackable = function () {
        var e, t = this.series;
        t.forEach(function (t) {
            if (e = e || t.data.length, e && t.data.length != e) throw "stacked series cannot have differing numbers of points: " + e + " vs " + t.data.length + "; see Rickshaw.Series.fill()"
        }, this)
    }, this.stackData.hooks = {
        data: [],
        after: []
    }, this._slice = function (e) {
        if (this.window.xMin || this.window.xMax) {
            var t = !0;
            return this.window.xMin && e.x < this.window.xMin && (t = !1), this.window.xMax && e.x > this.window.xMax && (t = !1), t
        }
        return !0
    }, this.onUpdate = function (e) {
        this.updateCallbacks.push(e)
    }, this.registerRenderer = function (e) {
        this._renderers = this._renderers || {}, this._renderers[e.name] = e
    }, this.configure = function (e) {
        (e.width || e.height) && this.setSize(e), Rickshaw.keys(this.defaults).forEach(function (t) {
            this[t] = t in e ? e[t] : t in this ? this[t] : this.defaults[t]
        }, this), this.setRenderer(e.renderer || this.renderer.name, e)
    }, this.setRenderer = function (e, n) {
        if ("function" == typeof e) this.renderer = new e({
            graph: t
        }), this.registerRenderer(this.renderer);
        else {
            if (!this._renderers[e]) throw "couldn't find renderer " + e;
            this.renderer = this._renderers[e]
        }
        "object" == typeof n && this.renderer.configure(n)
    }, this.setSize = function (e) {
        if (e = e || {}, void 0 !== typeof window) var t = window.getComputedStyle(this.element, null),
            n = parseInt(t.getPropertyValue("width"), 10),
            i = parseInt(t.getPropertyValue("height"), 10);
        this.width = e.width || n || 400, this.height = e.height || i || 250, this.vis && this.vis.attr("width", this.width).attr("height", this.height)
    }, this.initialize(e)
}, Rickshaw.namespace("Rickshaw.Fixtures.Color"), Rickshaw.Fixtures.Color = function () {
    this.schemes = {}, this.schemes.spectrum14 = ["#ecb796", "#dc8f70", "#b2a470", "#92875a", "#716c49", "#d2ed82", "#bbe468", "#a1d05d", "#e7cbe6", "#d8aad6", "#a888c2", "#9dc2d3", "#649eb9", "#387aa3"].reverse(), this.schemes.spectrum2000 = ["#57306f", "#514c76", "#646583", "#738394", "#6b9c7d", "#84b665", "#a7ca50", "#bfe746", "#e2f528", "#fff726", "#ecdd00", "#d4b11d", "#de8800", "#de4800", "#c91515", "#9a0000", "#7b0429", "#580839", "#31082b"], this.schemes.spectrum2001 = ["#2f243f", "#3c2c55", "#4a3768", "#565270", "#6b6b7c", "#72957f", "#86ad6e", "#a1bc5e", "#b8d954", "#d3e04e", "#ccad2a", "#cc8412", "#c1521d", "#ad3821", "#8a1010", "#681717", "#531e1e", "#3d1818", "#320a1b"], this.schemes.classic9 = ["#423d4f", "#4a6860", "#848f39", "#a2b73c", "#ddcb53", "#c5a32f", "#7d5836", "#963b20", "#7c2626", "#491d37", "#2f254a"].reverse(), this.schemes.httpStatus = {
        503: "#ea5029",
        502: "#d23f14",
        500: "#bf3613",
        410: "#efacea",
        409: "#e291dc",
        403: "#f457e8",
        408: "#e121d2",
        401: "#b92dae",
        405: "#f47ceb",
        404: "#a82a9f",
        400: "#b263c6",
        301: "#6fa024",
        302: "#87c32b",
        307: "#a0d84c",
        304: "#28b55c",
        200: "#1a4f74",
        206: "#27839f",
        201: "#52adc9",
        202: "#7c979f",
        203: "#a5b8bd",
        204: "#c1cdd1"
    }, this.schemes.colorwheel = ["#b5b6a9", "#858772", "#785f43", "#96557e", "#4682b4", "#65b9ac", "#73c03a", "#cb513a"].reverse(), this.schemes.cool = ["#5e9d2f", "#73c03a", "#4682b4", "#7bc3b8", "#a9884e", "#c1b266", "#a47493", "#c09fb5"], this.schemes.munin = ["#00cc00", "#0066b3", "#ff8000", "#ffcc00", "#330099", "#990099", "#ccff00", "#ff0000", "#808080", "#008f00", "#00487d", "#b35a00", "#b38f00", "#6b006b", "#8fb300", "#b30000", "#bebebe", "#80ff80", "#80c9ff", "#ffc080", "#ffe680", "#aa80ff", "#ee00cc", "#ff8080", "#666600", "#ffbfff", "#00ffcc", "#cc6699", "#999900"]
}, Rickshaw.namespace("Rickshaw.Fixtures.RandomData"), Rickshaw.Fixtures.RandomData = function (e) {
    e = e || 1;
    var t = 200,
        n = Math.floor((new Date).getTime() / 1e3);
    this.addData = function (i) {
        var r = 100 * Math.random() + 15 + t,
            a = i[0].length,
            o = 1;
        i.forEach(function (t) {
            var i = 20 * Math.random(),
                s = r / 25 + o++ + 15 * (Math.cos(a * o * 11 / 960) + 2) + 7 * (Math.cos(a / 7) + 2) + 1 * (Math.cos(a / 17) + 2);
            t.push({
                x: a * e + n,
                y: s + i
            })
        }), t = .85 * r
    }, this.removeData = function (t) {
        t.forEach(function (e) {
            e.shift()
        }), n += e
    }
}, Rickshaw.namespace("Rickshaw.Fixtures.Time"), Rickshaw.Fixtures.Time = function () {
    var e = (60 * (new Date).getTimezoneOffset(), this);
    this.months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], this.units = [{
        name: "decade",
        seconds: 315576e3,
        formatter: function (e) {
            return 10 * parseInt(e.getUTCFullYear() / 10, 10)
        }
    }, {
        name: "year",
        seconds: 31557600,
        formatter: function (e) {
            return e.getUTCFullYear()
        }
    }, {
        name: "month",
        seconds: 2635200,
        formatter: function (t) {
            return e.months[t.getUTCMonth()]
        }
    }, {
        name: "week",
        seconds: 604800,
        formatter: function (t) {
            return e.formatDate(t)
        }
    }, {
        name: "day",
        seconds: 86400,
        formatter: function (e) {
            return e.getUTCDate()
        }
    }, {
        name: "6 hour",
        seconds: 21600,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "hour",
        seconds: 3600,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "15 minute",
        seconds: 900,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "minute",
        seconds: 60,
        formatter: function (e) {
            return e.getUTCMinutes()
        }
    }, {
        name: "15 second",
        seconds: 15,
        formatter: function (e) {
            return e.getUTCSeconds() + "s"
        }
    }, {
        name: "second",
        seconds: 1,
        formatter: function (e) {
            return e.getUTCSeconds() + "s"
        }
    }, {
        name: "decisecond",
        seconds: .1,
        formatter: function (e) {
            return e.getUTCMilliseconds() + "ms"
        }
    }, {
        name: "centisecond",
        seconds: .01,
        formatter: function (e) {
            return e.getUTCMilliseconds() + "ms"
        }
    }], this.unit = function (e) {
        return this.units.filter(function (t) {
            return e == t.name
        }).shift()
    }, this.formatDate = function (e) {
        return d3.time.format("%b %e")(e)
    }, this.formatTime = function (e) {
        return e.toUTCString().match(/(\d+:\d+):/)[1]
    }, this.ceil = function (e, t) {
        var n, i;
        return "month" == t.name ? (n = new Date(1e3 * (e + t.seconds - 1)), i = new Date(0), i.setUTCFullYear(n.getUTCFullYear()), i.setUTCMonth(n.getUTCMonth()), i.setUTCDate(1), i.setUTCHours(0), i.setUTCMinutes(0), i.setUTCSeconds(0), i.setUTCMilliseconds(0), i.getTime() / 1e3) : "year" == t.name ? (n = new Date(1e3 * (e + t.seconds - 1)), i = new Date(0), i.setUTCFullYear(n.getUTCFullYear()), i.setUTCMonth(0), i.setUTCDate(1), i.setUTCHours(0), i.setUTCMinutes(0), i.setUTCSeconds(0), i.setUTCMilliseconds(0), i.getTime() / 1e3) : Math.ceil(e / t.seconds) * t.seconds
    }
}, Rickshaw.namespace("Rickshaw.Fixtures.Time.Local"), Rickshaw.Fixtures.Time.Local = function () {
    var e = (60 * (new Date).getTimezoneOffset(), this);
    this.months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], this.units = [{
        name: "decade",
        seconds: 315576e3,
        formatter: function (e) {
            return 10 * parseInt(e.getFullYear() / 10, 10)
        }
    }, {
        name: "year",
        seconds: 31557600,
        formatter: function (e) {
            return e.getFullYear()
        }
    }, {
        name: "month",
        seconds: 2635200,
        formatter: function (t) {
            return e.months[t.getMonth()]
        }
    }, {
        name: "week",
        seconds: 604800,
        formatter: function (t) {
            return e.formatDate(t)
        }
    }, {
        name: "day",
        seconds: 86400,
        formatter: function (e) {
            return e.getDate()
        }
    }, {
        name: "6 hour",
        seconds: 21600,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "hour",
        seconds: 3600,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "15 minute",
        seconds: 900,
        formatter: function (t) {
            return e.formatTime(t)
        }
    }, {
        name: "minute",
        seconds: 60,
        formatter: function (e) {
            return e.getMinutes()
        }
    }, {
        name: "15 second",
        seconds: 15,
        formatter: function (e) {
            return e.getSeconds() + "s"
        }
    }, {
        name: "second",
        seconds: 1,
        formatter: function (e) {
            return e.getSeconds() + "s"
        }
    }, {
        name: "decisecond",
        seconds: .1,
        formatter: function (e) {
            return e.getMilliseconds() + "ms"
        }
    }, {
        name: "centisecond",
        seconds: .01,
        formatter: function (e) {
            return e.getMilliseconds() + "ms"
        }
    }], this.unit = function (e) {
        return this.units.filter(function (t) {
            return e == t.name
        }).shift()
    }, this.formatDate = function (e) {
        return d3.time.format("%b %e")(e)
    }, this.formatTime = function (e) {
        return e.toString().match(/(\d+:\d+):/)[1]
    }, this.ceil = function (e, t) {
        var n, i;
        return "day" == t.name ? (n = new Date(1e3 * (e + t.seconds - 1)), i = new Date(0), i.setMilliseconds(0), i.setSeconds(0), i.setMinutes(0), i.setHours(0), i.setDate(n.getDate()), i.setMonth(n.getMonth()), i.setFullYear(n.getFullYear()), i.getTime() / 1e3) : "month" == t.name ? (n = new Date(1e3 * (e + t.seconds - 1)), i = new Date(0), i.setMilliseconds(0), i.setSeconds(0), i.setMinutes(0), i.setHours(0), i.setDate(1), i.setMonth(n.getMonth()), i.setFullYear(n.getFullYear()), i.getTime() / 1e3) : "year" == t.name ? (n = new Date(1e3 * (e + t.seconds - 1)), i = new Date(0), i.setFullYear(n.getFullYear()), i.setMilliseconds(0), i.setSeconds(0), i.setMinutes(0), i.setHours(0), i.setDate(1), i.setMonth(0), i.getTime() / 1e3) : Math.ceil(e / t.seconds) * t.seconds
    }
}, Rickshaw.namespace("Rickshaw.Fixtures.Number"), Rickshaw.Fixtures.Number.formatKMBT = function (e) {
    var t = Math.abs(e);
    return t >= 1e12 ? e / 1e12 + "T" : t >= 1e9 ? e / 1e9 + "B" : t >= 1e6 ? e / 1e6 + "M" : t >= 1e3 ? e / 1e3 + "K" : 1 > t && e > 0 ? e.toFixed(2) : 0 === t ? "" : e
}, Rickshaw.Fixtures.Number.formatBase1024KMGTP = function (e) {
    var t = Math.abs(e);
    return t >= 0x4000000000000 ? e / 0x4000000000000 + "P" : t >= 1099511627776 ? e / 1099511627776 + "T" : t >= 1073741824 ? e / 1073741824 + "G" : t >= 1048576 ? e / 1048576 + "M" : t >= 1024 ? e / 1024 + "K" : 1 > t && e > 0 ? e.toFixed(2) : 0 === t ? "" : e
}, Rickshaw.namespace("Rickshaw.Color.Palette"), Rickshaw.Color.Palette = function (e) {
    var t = new Rickshaw.Fixtures.Color;
    if (e = e || {}, this.schemes = {}, this.scheme = t.schemes[e.scheme] || e.scheme || t.schemes.colorwheel, this.runningIndex = 0, this.generatorIndex = 0, e.interpolatedStopCount) {
        var n, i, r = this.scheme.length - 1,
            a = [];
        for (n = 0; r > n; n++) {
            a.push(this.scheme[n]);
            var o = d3.interpolateHsl(this.scheme[n], this.scheme[n + 1]);
            for (i = 1; i < e.interpolatedStopCount; i++) a.push(o(1 / e.interpolatedStopCount * i))
        }
        a.push(this.scheme[this.scheme.length - 1]), this.scheme = a
    }
    this.rotateCount = this.scheme.length, this.color = function (e) {
        return this.scheme[e] || this.scheme[this.runningIndex++] || this.interpolateColor() || "#808080"
    }, this.interpolateColor = function () {
        if (Array.isArray(this.scheme)) {
            var e;
            return this.generatorIndex == 2 * this.rotateCount - 1 ? (e = d3.interpolateHsl(this.scheme[this.generatorIndex], this.scheme[0])(.5), this.generatorIndex = 0, this.rotateCount *= 2) : (e = d3.interpolateHsl(this.scheme[this.generatorIndex], this.scheme[this.generatorIndex + 1])(.5), this.generatorIndex++), this.scheme.push(e), e
        }
    }
}, Rickshaw.namespace("Rickshaw.Graph.Ajax"), Rickshaw.Graph.Ajax = Rickshaw.Class.create({
    initialize: function (e) {
        this.dataURL = e.dataURL, this.onData = e.onData || function (e) {
            return e
        }, this.onComplete = e.onComplete || function () { }, this.onError = e.onError || function () { }, this.args = e, this.request()
    },
    request: function () {
        $.ajax({
            url: this.dataURL,
            dataType: "json",
            success: this.success.bind(this),
            error: this.error.bind(this)
        })
    },
    error: function () {
        console.log("error loading dataURL: " + this.dataURL), this.onError(this)
    },
    success: function (e, t) {
        e = this.onData(e), this.args.series = this._splice({
            data: e,
            series: this.args.series
        }), this.graph = this.graph || new Rickshaw.Graph(this.args), this.graph.render(), this.onComplete(this)
    },
    _splice: function (e) {
        var t = e.data,
            n = e.series;
        return e.series ? (n.forEach(function (e) {
            var n = e.key || e.name;
            if (!n) throw "series needs a key or a name";
            t.forEach(function (t) {
                var i = t.key || t.name;
                if (!i) throw "data needs a key or a name";
                if (n == i) {
                    var r = ["color", "name", "data"];
                    r.forEach(function (n) {
                        t[n] && (e[n] = t[n])
                    })
                }
            })
        }), n) : t
    }
}), Rickshaw.namespace("Rickshaw.Graph.Annotate"), Rickshaw.Graph.Annotate = function (e) {
    this.graph = e.graph;
    this.elements = {
        timeline: e.element
    };
    var t = this;
    this.data = {}, this.elements.timeline.classList.add("rickshaw_annotation_timeline"), this.add = function (e, n, i) {
        t.data[e] = t.data[e] || {
            boxes: []
        }, t.data[e].boxes.push({
            content: n,
            end: i
        })
    }, this.update = function () {
        Rickshaw.keys(t.data).forEach(function (e) {
            var n = t.data[e],
                i = t.graph.x(e);
            if (0 > i || i > t.graph.x.range()[1]) return n.element && (n.line.classList.add("offscreen"), n.element.style.display = "none"), void n.boxes.forEach(function (e) {
                e.rangeElement && e.rangeElement.classList.add("offscreen")
            });
            if (!n.element) {
                var r = n.element = document.createElement("div");
                r.classList.add("annotation"), this.elements.timeline.appendChild(r), r.addEventListener("click", function (e) {
                    r.classList.toggle("active"), n.line.classList.toggle("active"), n.boxes.forEach(function (e) {
                        e.rangeElement && e.rangeElement.classList.toggle("active")
                    })
                }, !1)
            }
            n.element.style.left = i + "px", n.element.style.display = "block", n.boxes.forEach(function (e) {
                var r = e.element;
                if (r || (r = e.element = document.createElement("div"), r.classList.add("content"), r.innerHTML = e.content, n.element.appendChild(r), n.line = document.createElement("div"), n.line.classList.add("annotation_line"), t.graph.element.appendChild(n.line), e.end && (e.rangeElement = document.createElement("div"), e.rangeElement.classList.add("annotation_range"), t.graph.element.appendChild(e.rangeElement))), e.end) {
                    var a = i,
                        o = Math.min(t.graph.x(e.end), t.graph.x.range()[1]);
                    a > o && (o = i, a = Math.max(t.graph.x(e.end), t.graph.x.range()[0]));
                    var s = o - a;
                    e.rangeElement.style.left = a + "px", e.rangeElement.style.width = s + "px", e.rangeElement.classList.remove("offscreen")
                }
                n.line.classList.remove("offscreen"), n.line.style.left = i + "px"
            })
        }, this)
    }, this.graph.onUpdate(function () {
        t.update()
    })
}, Rickshaw.namespace("Rickshaw.Graph.Axis.Time"), Rickshaw.Graph.Axis.Time = function (e) {
    var t = this;
    this.graph = e.graph, this.elements = [], this.ticksTreatment = e.ticksTreatment || "plain", this.fixedTimeUnit = e.timeUnit;
    var n = e.timeFixture || new Rickshaw.Fixtures.Time;
    this.appropriateTimeUnit = function () {
        var e, t = n.units,
            i = this.graph.x.domain(),
            r = i[1] - i[0];
        return t.forEach(function (t) {
            Math.floor(r / t.seconds) >= 2 && (e = e || t)
        }), e || n.units[n.units.length - 1]
    }, this.tickOffsets = function () {
        for (var e = this.graph.x.domain(), t = this.fixedTimeUnit || this.appropriateTimeUnit(), i = Math.ceil((e[1] - e[0]) / t.seconds), r = e[0], a = [], o = 0; i > o; o++) {
            var s = n.ceil(r, t);
            r = s + t.seconds / 2, a.push({
                value: s,
                unit: t
            })
        }
        return a
    }, this.render = function () {
        this.elements.forEach(function (e) {
            e.parentNode.removeChild(e)
        }), this.elements = [];
        var e = this.tickOffsets();
        e.forEach(function (e) {
            if (!(t.graph.x(e.value) > t.graph.x.range()[1])) {
                var n = document.createElement("div");
                n.style.left = t.graph.x(e.value) + "px", n.classList.add("x_tick"), n.classList.add(t.ticksTreatment);
                var i = document.createElement("div");
                i.classList.add("title"), i.innerHTML = e.unit.formatter(new Date(1e3 * e.value)), n.appendChild(i), t.graph.element.appendChild(n), t.elements.push(n)
            }
        })
    }, this.graph.onUpdate(function () {
        t.render()
    })
}, Rickshaw.namespace("Rickshaw.Graph.Axis.X"), Rickshaw.Graph.Axis.X = function (e) {
    var t = this,
        n = .1;
    this.initialize = function (e) {
        this.graph = e.graph, this.orientation = e.orientation || "top", this.pixelsPerTick = e.pixelsPerTick || 75, e.ticks && (this.staticTicks = e.ticks), e.tickValues && (this.tickValues = e.tickValues), this.tickSize = e.tickSize || 4, this.ticksTreatment = e.ticksTreatment || "plain", e.element ? (this.element = e.element, this._discoverSize(e.element, e), this.vis = d3.select(e.element).append("svg:svg").attr("height", this.height).attr("width", this.width).attr("class", "rickshaw_graph x_axis_d3"), this.element = this.vis[0][0], this.element.style.position = "relative", this.setSize({
            width: e.width,
            height: e.height
        })) : this.vis = this.graph.vis, this.graph.onUpdate(function () {
            t.render()
        })
    }, this.setSize = function (e) {
        if (e = e || {}, this.element) {
            this._discoverSize(this.element.parentNode, e), this.vis.attr("height", this.height).attr("width", this.width * (1 + n));
            var t = Math.floor(this.width * n / 2);
            this.element.style.left = -1 * t + "px"
        }
    }, this.render = function () {
        void 0 !== this._renderWidth && this.graph.width !== this._renderWidth && this.setSize({
            auto: !0
        });
        var t = d3.svg.axis().scale(this.graph.x).orient(this.orientation);
        t.tickFormat(e.tickFormat || function (e) {
            return e
        }), this.tickValues && t.tickValues(this.tickValues), this.ticks = this.staticTicks || Math.floor(this.graph.width / this.pixelsPerTick);
        var i, r = Math.floor(this.width * n / 2) || 0;
        if ("top" == this.orientation) {
            var a = this.height || this.graph.height;
            i = "translate(" + r + "," + a + ")"
        } else i = "translate(" + r + ", 0)";
        this.element && this.vis.selectAll("*").remove(), this.vis.append("svg:g").attr("class", ["x_ticks_d3", this.ticksTreatment].join(" ")).attr("transform", i).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));
        var o = ("bottom" == this.orientation ? 1 : -1) * this.graph.height;
        this.graph.vis.append("svg:g").attr("class", "x_grid_d3").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(o)), this._renderHeight = this.graph.height
    }, this._discoverSize = function (e, t) {
        if ("undefined" != typeof window) {
            var i = window.getComputedStyle(e, null),
                r = parseInt(i.getPropertyValue("height"), 10);
            if (!t.auto) var a = parseInt(i.getPropertyValue("width"), 10)
        }
        this.width = (t.width || a || this.graph.width) * (1 + n), this.height = t.height || r || 40
    }, this.initialize(e)
}, Rickshaw.namespace("Rickshaw.Graph.Axis.Y"), Rickshaw.Graph.Axis.Y = Rickshaw.Class.create({
    initialize: function (e) {
        this.graph = e.graph, this.orientation = e.orientation || "right", this.pixelsPerTick = e.pixelsPerTick || 75, e.ticks && (this.staticTicks = e.ticks), e.tickValues && (this.tickValues = e.tickValues), this.tickSize = e.tickSize || 4, this.ticksTreatment = e.ticksTreatment || "plain", this.tickFormat = e.tickFormat || function (e) {
            return e
        }, this.berthRate = .1, e.element ? (this.element = e.element, this.vis = d3.select(e.element).append("svg:svg").attr("class", "rickshaw_graph y_axis"), this.element = this.vis[0][0], this.element.style.position = "relative", this.setSize({
            width: e.width,
            height: e.height
        })) : this.vis = this.graph.vis;
        var t = this;
        this.graph.onUpdate(function () {
            t.render()
        })
    },
    setSize: function (e) {
        if (e = e || {}, this.element) {
            if ("undefined" != typeof window) {
                var t = window.getComputedStyle(this.element.parentNode, null),
                    n = parseInt(t.getPropertyValue("width"), 10);
                if (!e.auto) var i = parseInt(t.getPropertyValue("height"), 10)
            }
            this.width = e.width || n || this.graph.width * this.berthRate, this.height = e.height || i || this.graph.height, this.vis.attr("width", this.width).attr("height", this.height * (1 + this.berthRate));
            var r = this.height * this.berthRate;
            "left" == this.orientation && (this.element.style.top = -1 * r + "px")
        }
    },
    render: function () {
        void 0 !== this._renderHeight && this.graph.height !== this._renderHeight && this.setSize({
            auto: !0
        }), this.ticks = this.staticTicks || Math.floor(this.graph.height / this.pixelsPerTick);
        var e = this._drawAxis(this.graph.y);
        this._drawGrid(e), this._renderHeight = this.graph.height
    },
    _drawAxis: function (e) {
        var t = d3.svg.axis().scale(e).orient(this.orientation);
        if (t.tickFormat(this.tickFormat), this.tickValues && t.tickValues(this.tickValues), "left" == this.orientation) var n = this.height * this.berthRate,
            i = "translate(" + this.width + ", " + n + ")";
        return this.element && this.vis.selectAll("*").remove(), this.vis.append("svg:g").attr("class", ["y_ticks", this.ticksTreatment].join(" ")).attr("transform", i).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),
            t
    },
    _drawGrid: function (e) {
        var t = ("right" == this.orientation ? 1 : -1) * this.graph.width;
        this.graph.vis.append("svg:g").attr("class", "y_grid").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(t))
    }
}), Rickshaw.namespace("Rickshaw.Graph.Axis.Y.Scaled"), Rickshaw.Graph.Axis.Y.Scaled = Rickshaw.Class.create(Rickshaw.Graph.Axis.Y, {
    initialize: function ($super, e) {
        if ("undefined" == typeof e.scale) throw new Error("Scaled requires scale");
        this.scale = e.scale, "undefined" == typeof e.grid ? this.grid = !0 : this.grid = e.grid, $super(e)
    },
    _drawAxis: function ($super, e) {
        var t = this.scale.domain(),
            n = this.graph.renderer.domain().y,
            i = [Math.min.apply(Math, t), Math.max.apply(Math, t)],
            r = d3.scale.linear().domain([0, 1]).range(i),
            a = [r(n[0]), r(n[1])],
            o = d3.scale.linear().domain(i).range(a),
            s = this.scale.copy().domain(t.map(o)).range(e.range());
        return $super(s)
    },
    _drawGrid: function ($super, e) {
        this.grid && $super(e)
    }
}), Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"), Rickshaw.Graph.Behavior.Series.Highlight = function (e) {
    this.graph = e.graph, this.legend = e.legend;
    var t = this,
        n = {},
        i = null,
        r = e.disabledColor || function (e) {
            return d3.interpolateRgb(e, d3.rgb("#d8d8d8"))(.8).toString()
        };
    this.addHighlightEvents = function (e) {
        e.element.addEventListener("mouseover", function (a) {
            i || (i = e, t.legend.lines.forEach(function (i) {
                if (e !== i) n[i.series.name] = n[i.series.name] || i.series.color, i.series.color = r(i.series.color);
                else if (t.graph.renderer.unstack && (i.series.renderer ? i.series.renderer.unstack : !0)) {
                    var a = t.graph.series.indexOf(i.series);
                    i.originalIndex = a;
                    var o = t.graph.series.splice(a, 1)[0];
                    t.graph.series.push(o)
                }
            }), t.graph.update())
        }, !1), e.element.addEventListener("mouseout", function (r) {
            i && (i = null, t.legend.lines.forEach(function (i) {
                if (e === i && i.hasOwnProperty("originalIndex")) {
                    var r = t.graph.series.pop();
                    t.graph.series.splice(i.originalIndex, 0, r), delete i.originalIndex
                }
                n[i.series.name] && (i.series.color = n[i.series.name])
            }), t.graph.update())
        }, !1)
    }, this.legend && this.legend.lines.forEach(function (e) {
        t.addHighlightEvents(e)
    })
}, Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"), Rickshaw.Graph.Behavior.Series.Order = function (e) {
    this.graph = e.graph, this.legend = e.legend;
    var t = this;
    if ("undefined" == typeof window.$) throw "couldn't find jQuery at window.$";
    if ("undefined" == typeof window.$.ui) throw "couldn't find jQuery UI at window.$.ui";
    $(function () {
        $(t.legend.list).sortable({
            containment: "parent",
            tolerance: "pointer",
            update: function (e, n) {
                var i = [];
                $(t.legend.list).find("li").each(function (e, t) {
                    t.series && i.push(t.series)
                });
                for (var r = t.graph.series.length - 1; r >= 0; r--) t.graph.series[r] = i.shift();
                t.graph.update()
            }
        }), $(t.legend.list).disableSelection()
    }), this.graph.onUpdate(function () {
        var e = window.getComputedStyle(t.legend.element).height;
        t.legend.element.style.height = e
    })
}, Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"), Rickshaw.Graph.Behavior.Series.Toggle = function (e) {
    this.graph = e.graph, this.legend = e.legend;
    var t = this;
    this.addAnchor = function (e) {
        var n = document.createElement("a");
        n.innerHTML = "&#10004;", n.classList.add("action"), e.element.insertBefore(n, e.element.firstChild), n.onclick = function (t) {
            if (e.series.disabled) e.series.enable(), e.element.classList.remove("disabled");
            else {
                if (this.graph.series.filter(function (e) {
                    return !e.disabled
                }).length <= 1) return;
                e.series.disable(), e.element.classList.add("disabled")
            }
        }.bind(this);
        var i = e.element.getElementsByTagName("span")[0];
        i.onclick = function (n) {
            var i = e.series.disabled;
            if (!i)
                for (var r = 0; r < t.legend.lines.length; r++) {
                    var a = t.legend.lines[r];
                    if (e.series === a.series);
                    else if (!a.series.disabled) {
                        i = !0;
                        break
                    }
                }
            i ? (e.series.enable(), e.element.classList.remove("disabled"), t.legend.lines.forEach(function (t) {
                e.series === t.series || (t.series.disable(), t.element.classList.add("disabled"))
            })) : t.legend.lines.forEach(function (e) {
                e.series.enable(), e.element.classList.remove("disabled")
            })
        }
    }, this.legend && ("undefined" != typeof $ && $(this.legend.list).sortable && $(this.legend.list).sortable({
        start: function (e, t) {
            t.item.bind("no.onclick", function (e) {
                e.preventDefault()
            })
        },
        stop: function (e, t) {
            setTimeout(function () {
                t.item.unbind("no.onclick")
            }, 250)
        }
    }), this.legend.lines.forEach(function (e) {
        t.addAnchor(e)
    })), this._addBehavior = function () {
        this.graph.series.forEach(function (e) {
            e.disable = function () {
                if (t.graph.series.length <= 1) throw "only one series left";
                e.disabled = !0, t.graph.update()
            }, e.enable = function () {
                e.disabled = !1, t.graph.update()
            }
        })
    }, this._addBehavior(), this.updateBehaviour = function () {
        this._addBehavior()
    }
}, Rickshaw.namespace("Rickshaw.Graph.HoverDetail"), Rickshaw.Graph.HoverDetail = Rickshaw.Class.create({
    initialize: function (e) {
        var t = this.graph = e.graph;
        this.xFormatter = e.xFormatter || function (e) {
            return new Date(1e3 * e).toUTCString()
        }, this.yFormatter = e.yFormatter || function (e) {
            return null === e ? e : e.toFixed(2)
        };
        var n = this.element = document.createElement("div");
        n.className = "detail", this.visible = !0, t.element.appendChild(n), this.lastEvent = null, this._addListeners(), this.onShow = e.onShow, this.onHide = e.onHide, this.onRender = e.onRender, this.formatter = e.formatter || this.formatter
    },
    formatter: function (e, t, n, i, r, a) {
        return e.name + ":&nbsp;" + r
    },
    update: function (e) {
        if (e = e || this.lastEvent, e && (this.lastEvent = e, e.target.nodeName.match(/^(path|svg|rect|circle)$/))) {
            var t, n = this.graph,
                i = e.offsetX || e.layerX,
                r = e.offsetY || e.layerY,
                a = 0,
                o = [];
            if (this.graph.series.active().forEach(function (e) {
                var s = this.graph.stackedData[a++];
                if (s.length) {
                    var l = n.x.invert(i),
                        c = d3.scale.linear().domain([s[0].x, s.slice(-1)[0].x]).range([0, s.length - 1]),
                        u = Math.round(c(l));
                    u == s.length - 1 && u--;
                    for (var d = Math.min(u || 0, s.length - 1), h = u; h < s.length - 1 && (s[h] && s[h + 1]);) {
                        if (s[h].x <= l && s[h + 1].x > l) {
                            d = Math.abs(l - s[h].x) < Math.abs(l - s[h + 1].x) ? h : h + 1;
                            break
                        }
                        s[h + 1].x <= l ? h++ : h--
                    }
                    0 > d && (d = 0);
                    var f = s[d],
                        p = Math.sqrt(Math.pow(Math.abs(n.x(f.x) - i), 2) + Math.pow(Math.abs(n.y(f.y + f.y0) - r), 2)),
                        m = e.xFormatter || this.xFormatter,
                        g = e.yFormatter || this.yFormatter,
                        v = {
                            formattedXValue: m(f.x),
                            formattedYValue: g(e.scale ? e.scale.invert(f.y) : f.y),
                            series: e,
                            value: f,
                            distance: p,
                            order: a,
                            name: e.name
                        };
                    (!t || p < t.distance) && (t = v), o.push(v)
                }
            }, this), t) {
                t.active = !0;
                var s = t.value.x,
                    l = t.formattedXValue;
                this.element.innerHTML = "", this.element.style.left = n.x(s) + "px", this.visible && this.render({
                    points: o,
                    detail: o,
                    mouseX: i,
                    mouseY: r,
                    formattedXValue: l,
                    domainX: s
                })
            }
        }
    },
    hide: function () {
        this.visible = !1, this.element.classList.add("inactive"), "function" == typeof this.onHide && this.onHide()
    },
    show: function () {
        this.visible = !0, this.element.classList.remove("inactive"), "function" == typeof this.onShow && this.onShow()
    },
    render: function (e) {
        var t = this.graph,
            n = e.points,
            i = n.filter(function (e) {
                return e.active
            }).shift();
        if (null !== i.value.y) {
            var r = i.formattedXValue,
                a = i.formattedYValue;
            this.element.innerHTML = "", this.element.style.left = t.x(i.value.x) + "px";
            var o = document.createElement("div");
            o.className = "x_label", o.innerHTML = r, this.element.appendChild(o);
            var s = document.createElement("div");
            s.className = "item";
            var l = i.series,
                c = l.scale ? l.scale.invert(i.value.y) : i.value.y;
            s.innerHTML = this.formatter(l, i.value.x, c, r, a, i), s.style.top = this.graph.y(i.value.y0 + i.value.y) + "px", this.element.appendChild(s);
            var u = document.createElement("div");
            u.className = "dot", u.style.top = s.style.top, u.style.borderColor = l.color, this.element.appendChild(u), i.active && (s.classList.add("active"), u.classList.add("active"));
            var d = [o, s];
            d.forEach(function (e) {
                e.classList.add("left")
            }), this.show();
            var h = this._calcLayoutError(d);
            if (h > 0) {
                d.forEach(function (e) {
                    e.classList.remove("left"), e.classList.add("right")
                });
                var f = this._calcLayoutError(d);
                f > h && d.forEach(function (e) {
                    e.classList.remove("right"), e.classList.add("left")
                })
            }
            "function" == typeof this.onRender && this.onRender(e)
        }
    },
    _calcLayoutError: function (e) {
        var t = this.element.parentNode.getBoundingClientRect(),
            n = 0;
        e.forEach(function (e) {
            var i = e.getBoundingClientRect();
            i.width && (i.right > t.right && (n += i.right - t.right), i.left < t.left && (n += t.left - i.left))
        });
        return n
    },
    _addListeners: function () {
        this.graph.element.addEventListener("mousemove", function (e) {
            this.visible = !0, this.update(e)
        }.bind(this), !1), this.graph.onUpdate(function () {
            this.update()
        }.bind(this)), this.graph.element.addEventListener("mouseout", function (e) {
            !e.relatedTarget || e.relatedTarget.compareDocumentPosition(this.graph.element) & Node.DOCUMENT_POSITION_CONTAINS || this.hide()
        }.bind(this), !1)
    }
}), Rickshaw.namespace("Rickshaw.Graph.JSONP"), Rickshaw.Graph.JSONP = Rickshaw.Class.create(Rickshaw.Graph.Ajax, {
    request: function () {
        $.ajax({
            url: this.dataURL,
            dataType: "jsonp",
            success: this.success.bind(this),
            error: this.error.bind(this)
        })
    }
}), Rickshaw.namespace("Rickshaw.Graph.Legend"), Rickshaw.Graph.Legend = Rickshaw.Class.create({
    className: "rickshaw_legend",
    initialize: function (e) {
        this.element = e.element, this.graph = e.graph, this.naturalOrder = e.naturalOrder, this.element.classList.add(this.className), this.list = document.createElement("ul"), this.element.appendChild(this.list), this.render(), this.graph.onUpdate(function () { })
    },
    render: function () {
        for (var e = this; this.list.firstChild;) this.list.removeChild(this.list.firstChild);
        this.lines = [];
        var t = this.graph.series.map(function (e) {
            return e
        });
        this.naturalOrder || (t = t.reverse()), t.forEach(function (t) {
            e.addLine(t)
        })
    },
    addLine: function (e) {
        var t = document.createElement("li");
        t.className = "line", e.disabled && (t.className += " disabled");
        var n = document.createElement("div");
        n.className = "swatch", n.style.backgroundColor = e.color, t.appendChild(n);
        var i = document.createElement("span");
        i.className = "label", i.innerHTML = e.name, t.appendChild(i), this.list.appendChild(t), t.series = e, e.noLegend && (t.style.display = "none");
        var r = {
            element: t,
            series: e
        };
        return this.shelving && (this.shelving.addAnchor(r), this.shelving.updateBehaviour()), this.highlighter && this.highlighter.addHighlightEvents(r), this.lines.push(r), t
    }
}), Rickshaw.namespace("Rickshaw.Graph.RangeSlider"), Rickshaw.Graph.RangeSlider = Rickshaw.Class.create({
    initialize: function (e) {
        var t = (this.element = e.element, this.graph = e.graph);
        this.build(), t.onUpdate(function () {
            this.update()
        }.bind(this))
    },
    build: function () {
        var e = this.element,
            t = this.graph,
            n = t.dataDomain();
        $(function () {
            $(e).slider({
                range: !0,
                min: n[0],
                max: n[1],
                values: [n[0], n[1]],
                slide: function (e, n) {
                    if (!(n.values[1] <= n.values[0])) {
                        t.window.xMin = n.values[0], t.window.xMax = n.values[1], t.update();
                        var i = t.dataDomain();
                        i[0] == n.values[0] && (t.window.xMin = void 0), i[1] == n.values[1] && (t.window.xMax = void 0)
                    }
                }
            })
        }), $(e)[0].style.width = t.width + "px"
    },
    update: function () {
        var e = this.element,
            t = this.graph,
            n = $(e).slider("option", "values"),
            i = t.dataDomain();
        $(e).slider("option", "min", i[0]), $(e).slider("option", "max", i[1]), null == t.window.xMin && (n[0] = i[0]), null == t.window.xMax && (n[1] = i[1]), $(e).slider("option", "values", n)
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer"), Rickshaw.Graph.Renderer = Rickshaw.Class.create({
    initialize: function (e) {
        this.graph = e.graph, this.tension = e.tension || this.tension, this.graph.unstacker = this.graph.unstacker || new Rickshaw.Graph.Unstacker({
            graph: this.graph
        }), this.configure(e)
    },
    seriesPathFactory: function () { },
    seriesStrokeFactory: function () { },
    defaults: function () {
        return {
            tension: .8,
            strokeWidth: 2,
            unstack: !0,
            padding: {
                top: .01,
                right: 0,
                bottom: .01,
                left: 0
            },
            stroke: !1,
            fill: !1
        }
    },
    domain: function (e) {
        var t = e || this.graph.stackedData || this.graph.stackData(),
            n = t[0][0];
        if (void 0 === n) return {
            x: [null, null],
            y: [null, null]
        };
        var i = n.x,
            r = n.x,
            a = n.y + n.y0,
            o = n.y + n.y0;
        return t.forEach(function (e) {
            e.forEach(function (e) {
                if (null != e.y) {
                    var t = e.y + e.y0;
                    a > t && (a = t), t > o && (o = t)
                }
            }), e.length && (e[0].x < i && (i = e[0].x), e[e.length - 1].x > r && (r = e[e.length - 1].x))
        }), i -= (r - i) * this.padding.left, r += (r - i) * this.padding.right, a = "auto" === this.graph.min ? a : this.graph.min || 0, o = void 0 === this.graph.max ? o : this.graph.max, ("auto" === this.graph.min || 0 > a) && (a -= (o - a) * this.padding.bottom), void 0 === this.graph.max && (o += (o - a) * this.padding.top), {
            x: [i, r],
            y: [a, o]
        }
    },
    render: function (e) {
        e = e || {};
        var t = this.graph,
            n = e.series || t.series,
            i = e.vis || t.vis;
        i.selectAll("*").remove();
        var r = n.filter(function (e) {
            return !e.disabled
        }).map(function (e) {
            return e.stack
        }),
            a = i.selectAll("path").data(r).enter().append("svg:path").attr("d", this.seriesPathFactory()),
            o = 0;
        n.forEach(function (e) {
            e.disabled || (e.path = a[0][o++], this._styleSeries(e))
        }, this)
    },
    _styleSeries: function (e) {
        var t = this.fill ? e.color : "none",
            n = this.stroke ? e.color : "none";
        e.path.setAttribute("fill", t), e.path.setAttribute("stroke", n), e.path.setAttribute("stroke-width", this.strokeWidth), e.path.setAttribute("class", e.className)
    },
    configure: function (e) {
        e = e || {}, Rickshaw.keys(this.defaults()).forEach(function (t) {
            return e.hasOwnProperty(t) ? void ("object" == typeof this.defaults()[t] ? Rickshaw.keys(this.defaults()[t]).forEach(function (n) {
                this[t][n] = void 0 !== e[t][n] ? e[t][n] : void 0 !== this[t][n] ? this[t][n] : this.defaults()[t][n]
            }, this) : this[t] = void 0 !== e[t] ? e[t] : void 0 !== this[t] ? this[t] : void 0 !== this.graph[t] ? this.graph[t] : this.defaults()[t]) : void (this[t] = this[t] || this.graph[t] || this.defaults()[t])
        }, this)
    },
    setStrokeWidth: function (e) {
        void 0 !== e && (this.strokeWidth = e)
    },
    setTension: function (e) {
        void 0 !== e && (this.tension = e)
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"), Rickshaw.Graph.Renderer.Line = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "line",
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            unstack: !0,
            fill: !1,
            stroke: !0
        })
    },
    seriesPathFactory: function () {
        var e = this.graph,
            t = d3.svg.line().x(function (t) {
                return e.x(t.x)
            }).y(function (t) {
                return e.y(t.y)
            }).interpolate(this.graph.interpolation).tension(this.tension);
        return t.defined && t.defined(function (e) {
            return null !== e.y
        }), t
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"), Rickshaw.Graph.Renderer.Stack = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "stack",
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            fill: !0,
            stroke: !1,
            unstack: !1
        })
    },
    seriesPathFactory: function () {
        var e = this.graph,
            t = d3.svg.area().x(function (t) {
                return e.x(t.x)
            }).y0(function (t) {
                return e.y(t.y0)
            }).y1(function (t) {
                return e.y(t.y + t.y0)
            }).interpolate(this.graph.interpolation).tension(this.tension);
        return t.defined && t.defined(function (e) {
            return null !== e.y
        }), t
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"), Rickshaw.Graph.Renderer.Bar = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "bar",
    defaults: function ($super) {
        var e = Rickshaw.extend($super(), {
            gapSize: .05,
            unstack: !1
        });
        return delete e.tension, e
    },
    initialize: function ($super, e) {
        e = e || {}, this.gapSize = e.gapSize || this.gapSize, $super(e)
    },
    domain: function ($super) {
        var e = $super(),
            t = this._frequentInterval(this.graph.stackedData.slice(-1).shift());
        return e.x[1] += Number(t.magnitude), e
    },
    barWidth: function (e) {
        var t = this._frequentInterval(e.stack),
            n = this.graph.x(e.stack[0].x + t.magnitude * (1 - this.gapSize));
        return n
    },
    render: function (e) {
        e = e || {};
        var t = this.graph,
            n = e.series || t.series,
            i = e.vis || t.vis;
        i.selectAll("*").remove();
        var r = this.barWidth(n.active()[0]),
            a = 0,
            o = n.filter(function (e) {
                return !e.disabled
            }).length,
            s = this.unstack ? r / o : r,
            l = function (e) {
                var n = [1, 0, 0, e.y < 0 ? -1 : 1, 0, e.y < 0 ? 2 * t.y.magnitude(Math.abs(e.y)) : 0];
                return "matrix(" + n.join(",") + ")"
            };
        n.forEach(function (e) {
            if (!e.disabled) {
                var n = (this.barWidth(e), i.selectAll("path").data(e.stack.filter(function (e) {
                    return null !== e.y
                })).enter().append("svg:rect").attr("x", function (e) {
                    return t.x(e.x) + a
                }).attr("y", function (e) {
                    return t.y(e.y0 + Math.abs(e.y)) * (e.y < 0 ? -1 : 1)
                }).attr("width", s).attr("height", function (e) {
                    return t.y.magnitude(Math.abs(e.y))
                }).attr("transform", l));
                Array.prototype.forEach.call(n[0], function (t) {
                    t.setAttribute("fill", e.color)
                }), this.unstack && (a += s)
            }
        }, this)
    },
    _frequentInterval: function (e) {
        for (var t = {}, n = 0; n < e.length - 1; n++) {
            var i = e[n + 1].x - e[n].x;
            t[i] = t[i] || 0, t[i]++
        }
        var r = {
            count: 0,
            magnitude: 1
        };
        return Rickshaw.keys(t).forEach(function (e) {
            r.count < t[e] && (r = {
                count: t[e],
                magnitude: e
            })
        }), r
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"), Rickshaw.Graph.Renderer.Area = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "area",
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            unstack: !1,
            fill: !1,
            stroke: !1
        })
    },
    seriesPathFactory: function () {
        var e = this.graph,
            t = d3.svg.area().x(function (t) {
                return e.x(t.x)
            }).y0(function (t) {
                return e.y(t.y0)
            }).y1(function (t) {
                return e.y(t.y + t.y0)
            }).interpolate(e.interpolation).tension(this.tension);
        return t.defined && t.defined(function (e) {
            return null !== e.y
        }), t
    },
    seriesStrokeFactory: function () {
        var e = this.graph,
            t = d3.svg.line().x(function (t) {
                return e.x(t.x)
            }).y(function (t) {
                return e.y(t.y + t.y0)
            }).interpolate(e.interpolation).tension(this.tension);
        return t.defined && t.defined(function (e) {
            return null !== e.y
        }), t
    },
    render: function (e) {
        e = e || {};
        var t = this.graph,
            n = e.series || t.series,
            i = e.vis || t.vis;
        i.selectAll("*").remove();
        var r = this.unstack ? "append" : "insert",
            a = n.filter(function (e) {
                return !e.disabled
            }).map(function (e) {
                return e.stack
            }),
            o = i.selectAll("path").data(a).enter()[r]("svg:g", "g");
        o.append("svg:path").attr("d", this.seriesPathFactory()).attr("class", "area"), this.stroke && o.append("svg:path").attr("d", this.seriesStrokeFactory()).attr("class", "line");
        var s = 0;
        n.forEach(function (e) {
            e.disabled || (e.path = o[0][s++], this._styleSeries(e))
        }, this)
    },
    _styleSeries: function (e) {
        e.path && (d3.select(e.path).select(".area").attr("fill", e.color), this.stroke && d3.select(e.path).select(".line").attr("fill", "none").attr("stroke", e.stroke || d3.interpolateRgb(e.color, "black")(.125)).attr("stroke-width", this.strokeWidth), e.className && e.path.setAttribute("class", e.className))
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"), Rickshaw.Graph.Renderer.ScatterPlot = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "scatterplot",
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            unstack: !0,
            fill: !0,
            stroke: !1,
            padding: {
                top: .01,
                right: .01,
                bottom: .01,
                left: .01
            },
            dotSize: 4
        })
    },
    initialize: function ($super, e) {
        $super(e)
    },
    render: function (e) {
        e = e || {};
        var t = this.graph,
            n = e.series || t.series,
            i = e.vis || t.vis,
            r = this.dotSize;
        i.selectAll("*").remove(), n.forEach(function (e) {
            if (!e.disabled) {
                var n = i.selectAll("path").data(e.stack.filter(function (e) {
                    return null !== e.y
                })).enter().append("svg:circle").attr("cx", function (e) {
                    return t.x(e.x)
                }).attr("cy", function (e) {
                    return t.y(e.y)
                }).attr("r", function (e) {
                    return "r" in e ? e.r : r
                });
                Array.prototype.forEach.call(n[0], function (t) {
                    t.setAttribute("fill", e.color)
                })
            }
        }, this)
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.Multi"), Rickshaw.Graph.Renderer.Multi = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "multi",
    initialize: function ($super, e) {
        $super(e)
    },
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            unstack: !0,
            fill: !1,
            stroke: !0
        })
    },
    configure: function ($super, e) {
        e = e || {}, this.config = e, $super(e)
    },
    domain: function ($super) {
        this.graph.stackData();
        var e = [],
            t = this._groups();
        this._stack(t), t.forEach(function (t) {
            var n = t.series.filter(function (e) {
                return !e.disabled
            }).map(function (e) {
                return e.stack
            });
            if (n.length) {
                var i = $super(n);
                e.push(i)
            }
        });
        var n = d3.min(e.map(function (e) {
            return e.x[0]
        })),
            i = d3.max(e.map(function (e) {
                return e.x[1]
            })),
            r = d3.min(e.map(function (e) {
                return e.y[0]
            })),
            a = d3.max(e.map(function (e) {
                return e.y[1]
            }));
        return {
            x: [n, i],
            y: [r, a]
        }
    },
    _groups: function () {
        var e = this.graph,
            t = {};
        e.series.forEach(function (n) {
            if (!n.disabled) {
                if (!t[n.renderer]) {
                    var i = "http://www.w3.org/2000/svg",
                        r = document.createElementNS(i, "g");
                    e.vis[0][0].appendChild(r);
                    var a = e._renderers[n.renderer],
                        o = {},
                        s = [this.defaults(), a.defaults(), this.config, this.graph];
                    s.forEach(function (e) {
                        Rickshaw.extend(o, e)
                    }), a.configure(o), t[n.renderer] = {
                        renderer: a,
                        series: [],
                        vis: d3.select(r)
                    }
                }
                t[n.renderer].series.push(n)
            }
        }, this);
        var n = [];
        return Object.keys(t).forEach(function (e) {
            var i = t[e];
            n.push(i)
        }), n
    },
    _stack: function (e) {
        return e.forEach(function (e) {
            var t = e.series.filter(function (e) {
                return !e.disabled
            }),
                n = t.map(function (e) {
                    return e.stack
                });
            if (!e.renderer.unstack) {
                var i = d3.layout.stack(),
                    r = Rickshaw.clone(i(n));
                t.forEach(function (e, t) {
                    e._stack = Rickshaw.clone(r[t])
                })
            }
        }, this), e
    },
    render: function () {
        this.graph.series.forEach(function (e) {
            if (!e.renderer) throw new Error("Each series needs a renderer for graph 'multi' renderer")
        }), this.graph.vis.selectAll("*").remove();
        var e = this._groups();
        e = this._stack(e), e.forEach(function (e) {
            var t = e.series.filter(function (e) {
                return !e.disabled
            });
            t.active = function () {
                return t
            }, e.renderer.render({
                series: t,
                vis: e.vis
            }), t.forEach(function (e) {
                e.stack = e._stack || e.stack || e.data
            })
        })
    }
}), Rickshaw.namespace("Rickshaw.Graph.Renderer.LinePlot"), Rickshaw.Graph.Renderer.LinePlot = Rickshaw.Class.create(Rickshaw.Graph.Renderer, {
    name: "lineplot",
    defaults: function ($super) {
        return Rickshaw.extend($super(), {
            unstack: !0,
            fill: !1,
            stroke: !0,
            padding: {
                top: .01,
                right: .01,
                bottom: .01,
                left: .01
            },
            dotSize: 3,
            strokeWidth: 2
        })
    },
    initialize: function ($super, e) {
        $super(e)
    },
    seriesPathFactory: function () {
        var e = this.graph,
            t = d3.svg.line().x(function (t) {
                return e.x(t.x)
            }).y(function (t) {
                return e.y(t.y)
            }).interpolate(this.graph.interpolation).tension(this.tension);
        return t.defined && t.defined(function (e) {
            return null !== e.y
        }), t
    },
    _renderDots: function () {
        var e = this.graph;
        e.series.forEach(function (t) {
            if (!t.disabled) {
                var n = e.vis.selectAll("x").data(t.stack.filter(function (e) {
                    return null !== e.y
                })).enter().append("svg:circle").attr("cx", function (t) {
                    return e.x(t.x)
                }).attr("cy", function (t) {
                    return e.y(t.y)
                }).attr("r", function (t) {
                    return "r" in t ? t.r : e.renderer.dotSize
                });
                Array.prototype.forEach.call(n[0], function (e) {
                    e && (e.setAttribute("data-color", t.color), e.setAttribute("fill", "white"), e.setAttribute("stroke", t.color), e.setAttribute("stroke-width", this.strokeWidth))
                }.bind(this))
            }
        }, this)
    },
    _renderLines: function () {
        var e = this.graph,
            t = e.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d", this.seriesPathFactory()),
            n = 0;
        e.series.forEach(function (e) {
            e.disabled || (e.path = t[0][n++], this._styleSeries(e))
        }, this)
    },
    render: function () {
        var e = this.graph;
        e.vis.selectAll("*").remove(), this._renderLines(), this._renderDots()
    }
}), Rickshaw.namespace("Rickshaw.Graph.Smoother"), Rickshaw.Graph.Smoother = Rickshaw.Class.create({
    initialize: function (e) {
        this.graph = e.graph, this.element = e.element, this.aggregationScale = 1, this.build(), this.graph.stackData.hooks.data.push({
            name: "smoother",
            orderPosition: 50,
            f: this.transformer.bind(this)
        })
    },
    build: function () {
        var e = this;
        this.element && $(function () {
            $(e.element).slider({
                min: 1,
                max: 100,
                slide: function (t, n) {
                    e.setScale(n.value), e.graph.update()
                }
            })
        })
    },
    setScale: function (e) {
        if (1 > e) throw "scale out of range: " + e;
        this.aggregationScale = e, this.graph.update()
    },
    transformer: function (e) {
        if (1 == this.aggregationScale) return e;
        var t = [];
        return e.forEach(function (e) {
            for (var n = []; e.length;) {
                var i = 0,
                    r = 0,
                    a = e.splice(0, this.aggregationScale);
                a.forEach(function (e) {
                    i += e.x / a.length, r += e.y / a.length
                }), n.push({
                    x: i,
                    y: r
                })
            }
            t.push(n)
        }.bind(this)), t
    }
}), Rickshaw.namespace("Rickshaw.Graph.Socketio"), Rickshaw.Graph.Socketio = Rickshaw.Class.create(Rickshaw.Graph.Ajax, {
    request: function () {
        var e = io.connect(this.dataURL);
        thisData = this, e.on("rickshaw", function (e) {
            thisData.success(e)
        })
    }
}), Rickshaw.namespace("Rickshaw.Graph.Unstacker"), Rickshaw.Graph.Unstacker = function (e) {
    this.graph = e.graph;
    var t = this;
    this.graph.stackData.hooks.after.push({
        name: "unstacker",
        f: function (e) {
            return t.graph.renderer.unstack ? (e.forEach(function (e) {
                e.forEach(function (e) {
                    e.y0 = 0
                })
            }), e) : e
        }
    })
}, Rickshaw.namespace("Rickshaw.Series"), Rickshaw.Series = Rickshaw.Class.create(Array, {
    initialize: function (e, t, n) {
        n = n || {}, this.palette = new Rickshaw.Color.Palette(t), this.timeBase = "undefined" == typeof n.timeBase ? Math.floor((new Date).getTime() / 1e3) : n.timeBase;
        var i = "undefined" == typeof n.timeInterval ? 1e3 : n.timeInterval;
        this.setTimeInterval(i), e && "object" == typeof e && Array.isArray(e) && e.forEach(function (e) {
            this.addItem(e)
        }, this)
    },
    addItem: function (e) {
        if ("undefined" == typeof e.name) throw "addItem() needs a name";
        e.color = e.color || this.palette.color(e.name), e.data = e.data || [], 0 === e.data.length && this.length && this.getIndex() > 0 ? this[0].data.forEach(function (t) {
            e.data.push({
                x: t.x,
                y: 0
            })
        }) : 0 === e.data.length && e.data.push({
            x: this.timeBase - (this.timeInterval || 0),
            y: 0
        }), this.push(e), this.legend && this.legend.addLine(this.itemByName(e.name))
    },
    addData: function (e, t) {
        var n = this.getIndex();
        Rickshaw.keys(e).forEach(function (e) {
            this.itemByName(e) || this.addItem({
                name: e
            })
        }, this), this.forEach(function (i) {
            i.data.push({
                x: t || (n * this.timeInterval || 1) + this.timeBase,
                y: e[i.name] || 0
            })
        }, this)
    },
    getIndex: function () {
        return this[0] && this[0].data && this[0].data.length ? this[0].data.length : 0
    },
    itemByName: function (e) {
        for (var t = 0; t < this.length; t++)
            if (this[t].name == e) return this[t]
    },
    setTimeInterval: function (e) {
        this.timeInterval = e / 1e3
    },
    setTimeBase: function (e) {
        this.timeBase = e
    },
    dump: function () {
        var e = {
            timeBase: this.timeBase,
            timeInterval: this.timeInterval,
            items: []
        };
        return this.forEach(function (t) {
            var n = {
                color: t.color,
                name: t.name,
                data: []
            };
            t.data.forEach(function (e) {
                n.data.push({
                    x: e.x,
                    y: e.y
                })
            }), e.items.push(n)
        }), e
    },
    load: function (e) {
        e.timeInterval && (this.timeInterval = e.timeInterval), e.timeBase && (this.timeBase = e.timeBase), e.items && e.items.forEach(function (e) {
            this.push(e), this.legend && this.legend.addLine(this.itemByName(e.name))
        }, this)
    }
}), Rickshaw.Series.zeroFill = function (e) {
    Rickshaw.Series.fill(e, 0)
}, Rickshaw.Series.fill = function (e, t) {
    for (var n, i = 0, r = e.map(function (e) {
        return e.data
    }); i < Math.max.apply(null, r.map(function (e) {
        return e.length
    }));) n = Math.min.apply(null, r.filter(function (e) {
        return e[i]
    }).map(function (e) {
        return e[i].x
    })), r.forEach(function (e) {
        e[i] && e[i].x == n || e.splice(i, 0, {
            x: n,
            y: t
        })
    }), i++
}, Rickshaw.namespace("Rickshaw.Series.FixedDuration"), Rickshaw.Series.FixedDuration = Rickshaw.Class.create(Rickshaw.Series, {
    initialize: function (e, t, n) {
        if (n = n || {}, "undefined" == typeof n.timeInterval) throw new Error("FixedDuration series requires timeInterval");
        if ("undefined" == typeof n.maxDataPoints) throw new Error("FixedDuration series requires maxDataPoints");
        if (this.palette = new Rickshaw.Color.Palette(t), this.timeBase = "undefined" == typeof n.timeBase ? Math.floor((new Date).getTime() / 1e3) : n.timeBase, this.setTimeInterval(n.timeInterval), this[0] && this[0].data && this[0].data.length ? (this.currentSize = this[0].data.length, this.currentIndex = this[0].data.length) : (this.currentSize = 0, this.currentIndex = 0), this.maxDataPoints = n.maxDataPoints, e && "object" == typeof e && Array.isArray(e) && (e.forEach(function (e) {
            this.addItem(e)
        }, this), this.currentSize += 1, this.currentIndex += 1), this.timeBase -= (this.maxDataPoints - this.currentSize) * this.timeInterval, "undefined" != typeof this.maxDataPoints && this.currentSize < this.maxDataPoints)
            for (var i = this.maxDataPoints - this.currentSize - 1; i > 1; i--) this.currentSize += 1, this.currentIndex += 1, this.forEach(function (e) {
                e.data.unshift({
                    x: ((i - 1) * this.timeInterval || 1) + this.timeBase,
                    y: 0,
                    i: i
                })
            }, this)
    },
    addData: function ($super, e, t) {
        if ($super(e, t), this.currentSize += 1, this.currentIndex += 1, void 0 !== this.maxDataPoints)
            for (; this.currentSize > this.maxDataPoints;) this.dropData()
    },
    dropData: function () {
        this.forEach(function (e) {
            e.data.splice(0, 1)
        }), this.currentSize -= 1
    },
    getIndex: function () {
        return this.currentIndex
    }
}), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery"); + function (e) {
    "use strict";
    var t = e.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1 || t[0] > 3) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")
}(jQuery), + function (e) {
    "use strict";

    function t() {
        var e = document.createElement("bootstrap"),
            t = {
                WebkitTransition: "webkitTransitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd otransitionend",
                transition: "transitionend"
            };
        for (var n in t)
            if (void 0 !== e.style[n]) return {
                end: t[n]
            };
        return !1
    }
    e.fn.emulateTransitionEnd = function (t) {
        var n = !1,
            i = this;
        e(this).one("bsTransitionEnd", function () {
            n = !0
        });
        var r = function () {
            n || e(i).trigger(e.support.transition.end)
        };
        return setTimeout(r, t), this
    }, e(function () {
        e.support.transition = t(), e.support.transition && (e.event.special.bsTransitionEnd = {
            bindType: e.support.transition.end,
            delegateType: e.support.transition.end,
            handle: function (t) {
                return e(t.target).is(this) ? t.handleObj.handler.apply(this, arguments) : void 0
            }
        })
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var n = e(this),
                r = n.data("bs.alert");
            r || n.data("bs.alert", r = new i(this)), "string" == typeof t && r[t].call(n)
        })
    }
    var n = '[data-dismiss="alert"]',
        i = function (t) {
            e(t).on("click", n, this.close)
        };
    i.VERSION = "3.4.1", i.TRANSITION_DURATION = 150, i.prototype.close = function (t) {
        function n() {
            o.detach().trigger("closed.bs.alert").remove()
        }
        var r = e(this),
            a = r.attr("data-target");
        a || (a = r.attr("href"), a = a && a.replace(/.*(?=#[^\s]*$)/, "")), a = "#" === a ? [] : a;
        var o = e(document).find(a);
        t && t.preventDefault(), o.length || (o = r.closest(".alert")), o.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (o.removeClass("in"), e.support.transition && o.hasClass("fade") ? o.one("bsTransitionEnd", n).emulateTransitionEnd(i.TRANSITION_DURATION) : n())
    };
    var r = e.fn.alert;
    e.fn.alert = t, e.fn.alert.Constructor = i, e.fn.alert.noConflict = function () {
        return e.fn.alert = r, this
    }, e(document).on("click.bs.alert.data-api", n, i.prototype.close)
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.button"),
                a = "object" == typeof t && t;
            r || i.data("bs.button", r = new n(this, a)), "toggle" == t ? r.toggle() : t && r.setState(t)
        })
    }
    var n = function (t, i) {
        this.$element = e(t), this.options = e.extend({}, n.DEFAULTS, i), this.isLoading = !1
    };
    n.VERSION = "3.4.1", n.DEFAULTS = {
        loadingText: "loading..."
    }, n.prototype.setState = function (t) {
        var n = "disabled",
            i = this.$element,
            r = i.is("input") ? "val" : "html",
            a = i.data();
        t += "Text", null == a.resetText && i.data("resetText", i[r]()), setTimeout(e.proxy(function () {
            i[r](null == a[t] ? this.options[t] : a[t]), "loadingText" == t ? (this.isLoading = !0, i.addClass(n).attr(n, n).prop(n, !0)) : this.isLoading && (this.isLoading = !1, i.removeClass(n).removeAttr(n).prop(n, !1))
        }, this), 0)
    }, n.prototype.toggle = function () {
        var e = !0,
            t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var n = this.$element.find("input");
            "radio" == n.prop("type") ? (n.prop("checked") && (e = !1), t.find(".active").removeClass("active"), this.$element.addClass("active")) : "checkbox" == n.prop("type") && (n.prop("checked") !== this.$element.hasClass("active") && (e = !1), this.$element.toggleClass("active")), n.prop("checked", this.$element.hasClass("active")), e && n.trigger("change")
        } else this.$element.attr("aria-pressed", !this.$element.hasClass("active")), this.$element.toggleClass("active")
    };
    var i = e.fn.button;
    e.fn.button = t, e.fn.button.Constructor = n, e.fn.button.noConflict = function () {
        return e.fn.button = i, this
    }, e(document).on("click.bs.button.data-api", '[data-toggle^="button"]', function (n) {
        var i = e(n.target).closest(".btn");
        t.call(i, "toggle"), e(n.target).is('input[type="radio"], input[type="checkbox"]') || (n.preventDefault(), i.is("input,button") ? i.trigger("focus") : i.find("input:visible,button:visible").first().trigger("focus"))
    }).on("focus.bs.button.data-api blur.bs.button.data-api", '[data-toggle^="button"]', function (t) {
        e(t.target).closest(".btn").toggleClass("focus", /^focus(in)?$/.test(t.type))
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.carousel"),
                a = e.extend({}, n.DEFAULTS, i.data(), "object" == typeof t && t),
                o = "string" == typeof t ? t : a.slide;
            r || i.data("bs.carousel", r = new n(this, a)), "number" == typeof t ? r.to(t) : o ? r[o]() : a.interval && r.pause().cycle()
        })
    }
    var n = function (t, n) {
        this.$element = e(t), this.$indicators = this.$element.find(".carousel-indicators"), this.options = n, this.paused = null, this.sliding = null, this.interval = null, this.$active = null, this.$items = null, this.options.keyboard && this.$element.on("keydown.bs.carousel", e.proxy(this.keydown, this)), "hover" == this.options.pause && !("ontouchstart" in document.documentElement) && this.$element.on("mouseenter.bs.carousel", e.proxy(this.pause, this)).on("mouseleave.bs.carousel", e.proxy(this.cycle, this))
    };
    n.VERSION = "3.4.1", n.TRANSITION_DURATION = 600, n.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0,
        keyboard: !0
    }, n.prototype.keydown = function (e) {
        if (!/input|textarea/i.test(e.target.tagName)) {
            switch (e.which) {
                case 37:
                    this.prev();
                    break;
                case 39:
                    this.next();
                    break;
                default:
                    return
            }
            e.preventDefault()
        }
    }, n.prototype.cycle = function (t) {
        return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), this
    }, n.prototype.getItemIndex = function (e) {
        return this.$items = e.parent().children(".item"), this.$items.index(e || this.$active)
    }, n.prototype.getItemForDirection = function (e, t) {
        var n = this.getItemIndex(t),
            i = "prev" == e && 0 === n || "next" == e && n == this.$items.length - 1;
        if (i && !this.options.wrap) return t;
        var r = "prev" == e ? -1 : 1,
            a = (n + r) % this.$items.length;
        return this.$items.eq(a)
    }, n.prototype.to = function (e) {
        var t = this,
            n = this.getItemIndex(this.$active = this.$element.find(".item.active"));
        return e > this.$items.length - 1 || 0 > e ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function () {
            t.to(e)
        }) : n == e ? this.pause().cycle() : this.slide(e > n ? "next" : "prev", this.$items.eq(e))
    }, n.prototype.pause = function (t) {
        return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end), this.cycle(!0)), this.interval = clearInterval(this.interval), this
    }, n.prototype.next = function () {
        return this.sliding ? void 0 : this.slide("next")
    }, n.prototype.prev = function () {
        return this.sliding ? void 0 : this.slide("prev")
    }, n.prototype.slide = function (t, i) {
        var r = this.$element.find(".item.active"),
            a = i || this.getItemForDirection(t, r),
            o = this.interval,
            s = "next" == t ? "left" : "right",
            l = this;
        if (a.hasClass("active")) return this.sliding = !1;
        var c = a[0],
            u = e.Event("slide.bs.carousel", {
                relatedTarget: c,
                direction: s
            });
        if (this.$element.trigger(u), !u.isDefaultPrevented()) {
            if (this.sliding = !0, o && this.pause(), this.$indicators.length) {
                this.$indicators.find(".active").removeClass("active");
                var d = e(this.$indicators.children()[this.getItemIndex(a)]);
                d && d.addClass("active")
            }
            var h = e.Event("slid.bs.carousel", {
                relatedTarget: c,
                direction: s
            });
            return e.support.transition && this.$element.hasClass("slide") ? (a.addClass(t), "object" == typeof a && a.length && a[0].offsetWidth, r.addClass(s), a.addClass(s), r.one("bsTransitionEnd", function () {
                a.removeClass([t, s].join(" ")).addClass("active"), r.removeClass(["active", s].join(" ")), l.sliding = !1, setTimeout(function () {
                    l.$element.trigger(h)
                }, 0)
            }).emulateTransitionEnd(n.TRANSITION_DURATION)) : (r.removeClass("active"), a.addClass("active"), this.sliding = !1, this.$element.trigger(h)), o && this.cycle(), this
        }
    };
    var i = e.fn.carousel;
    e.fn.carousel = t, e.fn.carousel.Constructor = n, e.fn.carousel.noConflict = function () {
        return e.fn.carousel = i, this
    };
    var r = function (n) {
        var i = e(this),
            r = i.attr("href");
        r && (r = r.replace(/.*(?=#[^\s]+$)/, ""));
        var a = i.attr("data-target") || r,
            o = e(document).find(a);
        if (o.hasClass("carousel")) {
            var s = e.extend({}, o.data(), i.data()),
                l = i.attr("data-slide-to");
            l && (s.interval = !1), t.call(o, s), l && o.data("bs.carousel").to(l), n.preventDefault()
        }
    };
    e(document).on("click.bs.carousel.data-api", "[data-slide]", r).on("click.bs.carousel.data-api", "[data-slide-to]", r), e(window).on("load", function () {
        e('[data-ride="carousel"]').each(function () {
            var n = e(this);
            t.call(n, n.data())
        })
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        var n, i = t.attr("data-target") || (n = t.attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "");
        return e(document).find(i)
    }

    function n(t) {
        return this.each(function () {
            var n = e(this),
                r = n.data("bs.collapse"),
                a = e.extend({}, i.DEFAULTS, n.data(), "object" == typeof t && t);
            !r && a.toggle && /show|hide/.test(t) && (a.toggle = !1), r || n.data("bs.collapse", r = new i(this, a)), "string" == typeof t && r[t]()
        })
    }
    var i = function (t, n) {
        this.$element = e(t), this.options = e.extend({}, i.DEFAULTS, n), this.$trigger = e('[data-toggle="collapse"][href="#' + t.id + '"],[data-toggle="collapse"][data-target="#' + t.id + '"]'), this.transitioning = null, this.options.parent ? this.$parent = this.getParent() : this.addAriaAndCollapsedClass(this.$element, this.$trigger), this.options.toggle && this.toggle()
    };
    i.VERSION = "3.4.1", i.TRANSITION_DURATION = 350, i.DEFAULTS = {
        toggle: !0
    }, i.prototype.dimension = function () {
        var e = this.$element.hasClass("width");
        return e ? "width" : "height"
    }, i.prototype.show = function () {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var t, r = this.$parent && this.$parent.children(".panel").children(".in, .collapsing");
            if (!(r && r.length && (t = r.data("bs.collapse"), t && t.transitioning))) {
                var a = e.Event("show.bs.collapse");
                if (this.$element.trigger(a), !a.isDefaultPrevented()) {
                    r && r.length && (n.call(r, "hide"), t || r.data("bs.collapse", null));
                    var o = this.dimension();
                    this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded", !0), this.$trigger.removeClass("collapsed").attr("aria-expanded", !0), this.transitioning = 1;
                    var s = function () {
                        this.$element.removeClass("collapsing").addClass("collapse in")[o](""), this.transitioning = 0, this.$element.trigger("shown.bs.collapse")
                    };
                    if (!e.support.transition) return s.call(this);
                    var l = e.camelCase(["scroll", o].join("-"));
                    this.$element.one("bsTransitionEnd", e.proxy(s, this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])
                }
            }
        }
    }, i.prototype.hide = function () {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var t = e.Event("hide.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var n = this.dimension();
                this.$element[n](this.$element[n]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded", !1), this.$trigger.addClass("collapsed").attr("aria-expanded", !1), this.transitioning = 1;
                var r = function () {
                    this.transitioning = 0, this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")
                };
                return e.support.transition ? void this.$element[n](0).one("bsTransitionEnd", e.proxy(r, this)).emulateTransitionEnd(i.TRANSITION_DURATION) : r.call(this)
            }
        }
    }, i.prototype.toggle = function () {
        this[this.$element.hasClass("in") ? "hide" : "show"]()
    }, i.prototype.getParent = function () {
        return e(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]').each(e.proxy(function (n, i) {
            var r = e(i);
            this.addAriaAndCollapsedClass(t(r), r)
        }, this)).end()
    }, i.prototype.addAriaAndCollapsedClass = function (e, t) {
        var n = e.hasClass("in");
        e.attr("aria-expanded", n), t.toggleClass("collapsed", !n).attr("aria-expanded", n)
    };
    var r = e.fn.collapse;
    e.fn.collapse = n, e.fn.collapse.Constructor = i, e.fn.collapse.noConflict = function () {
        return e.fn.collapse = r, this
    }, e(document).on("click.bs.collapse.data-api", '[data-toggle="collapse"]', function (i) {
        var r = e(this);
        r.attr("data-target") || i.preventDefault();
        var a = t(r),
            o = a.data("bs.collapse"),
            s = o ? "toggle" : r.data();
        n.call(a, s)
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        var n = t.attr("data-target");
        n || (n = t.attr("href"), n = n && /#[A-Za-z]/.test(n) && n.replace(/.*(?=#[^\s]*$)/, ""));
        var i = "#" !== n ? e(document).find(n) : null;
        return i && i.length ? i : t.parent()
    }

    function n(n) {
        n && 3 === n.which || (e(r).remove(), e(a).each(function () {
            var i = e(this),
                r = t(i),
                a = {
                    relatedTarget: this
                };
            r.hasClass("open") && (n && "click" == n.type && /input|textarea/i.test(n.target.tagName) && e.contains(r[0], n.target) || (r.trigger(n = e.Event("hide.bs.dropdown", a)), n.isDefaultPrevented() || (i.attr("aria-expanded", "false"), r.removeClass("open").trigger(e.Event("hidden.bs.dropdown", a)))))
        }))
    }

    function i(t) {
        return this.each(function () {
            var n = e(this),
                i = n.data("bs.dropdown");
            i || n.data("bs.dropdown", i = new o(this)), "string" == typeof t && i[t].call(n)
        })
    }
    var r = ".dropdown-backdrop",
        a = '[data-toggle="dropdown"]',
        o = function (t) {
            e(t).on("click.bs.dropdown", this.toggle)
        };
    o.VERSION = "3.4.1", o.prototype.toggle = function (i) {
        var r = e(this);
        if (!r.is(".disabled, :disabled")) {
            var a = t(r),
                o = a.hasClass("open");
            if (n(), !o) {
                "ontouchstart" in document.documentElement && !a.closest(".navbar-nav").length && e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click", n);
                var s = {
                    relatedTarget: this
                };
                if (a.trigger(i = e.Event("show.bs.dropdown", s)), i.isDefaultPrevented()) return;
                r.trigger("focus").attr("aria-expanded", "true"), a.toggleClass("open").trigger(e.Event("shown.bs.dropdown", s))
            }
            return !1
        }
    }, o.prototype.keydown = function (n) {
        if (/(38|40|27|32)/.test(n.which) && !/input|textarea/i.test(n.target.tagName)) {
            var i = e(this);
            if (n.preventDefault(), n.stopPropagation(), !i.is(".disabled, :disabled")) {
                var r = t(i),
                    o = r.hasClass("open");
                if (!o && 27 != n.which || o && 27 == n.which) return 27 == n.which && r.find(a).trigger("focus"), i.trigger("click");
                var s = " li:not(.disabled):visible a",
                    l = r.find(".dropdown-menu" + s);
                if (l.length) {
                    var c = l.index(n.target);
                    38 == n.which && c > 0 && c--, 40 == n.which && c < l.length - 1 && c++, ~c || (c = 0), l.eq(c).trigger("focus")
                }
            }
        }
    };
    var s = e.fn.dropdown;
    e.fn.dropdown = i, e.fn.dropdown.Constructor = o, e.fn.dropdown.noConflict = function () {
        return e.fn.dropdown = s, this
    }, e(document).on("click.bs.dropdown.data-api", n).on("click.bs.dropdown.data-api", ".dropdown form", function (e) {
        e.stopPropagation()
    }).on("click.bs.dropdown.data-api", a, o.prototype.toggle).on("keydown.bs.dropdown.data-api", a, o.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", o.prototype.keydown)
}(jQuery), + function (e) {
    "use strict";

    function t(t, i) {
        return this.each(function () {
            var r = e(this),
                a = r.data("bs.modal"),
                o = e.extend({}, n.DEFAULTS, r.data(), "object" == typeof t && t);
            a || r.data("bs.modal", a = new n(this, o)), "string" == typeof t ? a[t](i) : o.show && a.show(i)
        })
    }
    var n = function (t, n) {
        this.options = n, this.$body = e(document.body), this.$element = e(t), this.$dialog = this.$element.find(".modal-dialog"), this.$backdrop = null, this.isShown = null, this.originalBodyPad = null, this.scrollbarWidth = 0, this.ignoreBackdropClick = !1, this.fixedContent = ".navbar-fixed-top, .navbar-fixed-bottom", this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function () {
            this.$element.trigger("loaded.bs.modal")
        }, this))
    };
    n.VERSION = "3.4.1", n.TRANSITION_DURATION = 300, n.BACKDROP_TRANSITION_DURATION = 150, n.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, n.prototype.toggle = function (e) {
        return this.isShown ? this.hide() : this.show(e)
    }, n.prototype.show = function (t) {
        var i = this,
            r = e.Event("show.bs.modal", {
                relatedTarget: t
            });
        this.$element.trigger(r), this.isShown || r.isDefaultPrevented() || (this.isShown = !0, this.checkScrollbar(), this.setScrollbar(), this.$body.addClass("modal-open"), this.escape(), this.resize(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), this.$dialog.on("mousedown.dismiss.bs.modal", function () {
            i.$element.one("mouseup.dismiss.bs.modal", function (t) {
                e(t.target).is(i.$element) && (i.ignoreBackdropClick = !0)
            })
        }), this.backdrop(function () {
            var r = e.support.transition && i.$element.hasClass("fade");
            i.$element.parent().length || i.$element.appendTo(i.$body), i.$element.show().scrollTop(0), i.adjustDialog(), r && i.$element[0].offsetWidth, i.$element.addClass("in"), i.enforceFocus();
            var a = e.Event("shown.bs.modal", {
                relatedTarget: t
            });
            r ? i.$dialog.one("bsTransitionEnd", function () {
                i.$element.trigger("focus").trigger(a)
            }).emulateTransitionEnd(n.TRANSITION_DURATION) : i.$element.trigger("focus").trigger(a)
        }))
    }, n.prototype.hide = function (t) {
        t && t.preventDefault(), t = e.Event("hide.bs.modal"), this.$element.trigger(t), this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.escape(), this.resize(), e(document).off("focusin.bs.modal"), this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"), this.$dialog.off("mousedown.dismiss.bs.modal"), e.support.transition && this.$element.hasClass("fade") ? this.$element.one("bsTransitionEnd", e.proxy(this.hideModal, this)).emulateTransitionEnd(n.TRANSITION_DURATION) : this.hideModal())
    }, n.prototype.enforceFocus = function () {
        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function (e) {
            document === e.target || this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.trigger("focus")
        }, this))
    }, n.prototype.escape = function () {
        this.isShown && this.options.keyboard ? this.$element.on("keydown.dismiss.bs.modal", e.proxy(function (e) {
            27 == e.which && this.hide()
        }, this)) : this.isShown || this.$element.off("keydown.dismiss.bs.modal")
    }, n.prototype.resize = function () {
        this.isShown ? e(window).on("resize.bs.modal", e.proxy(this.handleUpdate, this)) : e(window).off("resize.bs.modal")
    }, n.prototype.hideModal = function () {
        var e = this;
        this.$element.hide(), this.backdrop(function () {
            e.$body.removeClass("modal-open"), e.resetAdjustments(), e.resetScrollbar(), e.$element.trigger("hidden.bs.modal")
        })
    }, n.prototype.removeBackdrop = function () {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
    }, n.prototype.backdrop = function (t) {
        var i = this,
            r = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var a = e.support.transition && r;
            if (this.$backdrop = e(document.createElement("div")).addClass("modal-backdrop " + r).appendTo(this.$body), this.$element.on("click.dismiss.bs.modal", e.proxy(function (e) {
                return this.ignoreBackdropClick ? void (this.ignoreBackdropClick = !1) : void (e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus() : this.hide()))
            }, this)), a && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return;
            a ? this.$backdrop.one("bsTransitionEnd", t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : t()
        } else if (!this.isShown && this.$backdrop) {
            this.$backdrop.removeClass("in");
            var o = function () {
                i.removeBackdrop(), t && t()
            };
            e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one("bsTransitionEnd", o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION) : o()
        } else t && t()
    }, n.prototype.handleUpdate = function () {
        this.adjustDialog()
    }, n.prototype.adjustDialog = function () {
        var e = this.$element[0].scrollHeight > document.documentElement.clientHeight;
        this.$element.css({
            paddingLeft: !this.bodyIsOverflowing && e ? this.scrollbarWidth : "",
            paddingRight: this.bodyIsOverflowing && !e ? this.scrollbarWidth : ""
        })
    }, n.prototype.resetAdjustments = function () {
        this.$element.css({
            paddingLeft: "",
            paddingRight: ""
        })
    }, n.prototype.checkScrollbar = function () {
        var e = window.innerWidth;
        if (!e) {
            var t = document.documentElement.getBoundingClientRect();
            e = t.right - Math.abs(t.left)
        }
        this.bodyIsOverflowing = document.body.clientWidth < e, this.scrollbarWidth = this.measureScrollbar()
    }, n.prototype.setScrollbar = function () {
        var t = parseInt(this.$body.css("padding-right") || 0, 10);
        this.originalBodyPad = document.body.style.paddingRight || "";
        var n = this.scrollbarWidth;
        this.bodyIsOverflowing && (this.$body.css("padding-right", t + n), e(this.fixedContent).each(function (t, i) {
            var r = i.style.paddingRight,
                a = e(i).css("padding-right");
            e(i).data("padding-right", r).css("padding-right", parseFloat(a) + n + "px")
        }))
    }, n.prototype.resetScrollbar = function () {
        this.$body.css("padding-right", this.originalBodyPad), e(this.fixedContent).each(function (t, n) {
            var i = e(n).data("padding-right");
            e(n).removeData("padding-right"), n.style.paddingRight = i ? i : ""
        })
    }, n.prototype.measureScrollbar = function () {
        var e = document.createElement("div");
        e.className = "modal-scrollbar-measure", this.$body.append(e);
        var t = e.offsetWidth - e.clientWidth;
        return this.$body[0].removeChild(e), t
    };
    var i = e.fn.modal;
    e.fn.modal = t, e.fn.modal.Constructor = n, e.fn.modal.noConflict = function () {
        return e.fn.modal = i, this
    }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function (n) {
        var i = e(this),
            r = i.attr("href"),
            a = i.attr("data-target") || r && r.replace(/.*(?=#[^\s]+$)/, ""),
            o = e(document).find(a),
            s = o.data("bs.modal") ? "toggle" : e.extend({
                remote: !/#/.test(r) && r
            }, o.data(), i.data());
        i.is("a") && n.preventDefault(), o.one("show.bs.modal", function (e) {
            e.isDefaultPrevented() || o.one("hidden.bs.modal", function () {
                i.is(":visible") && i.trigger("focus")
            })
        }), t.call(o, s, this)
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t, n) {
        var i = t.nodeName.toLowerCase();
        if (-1 !== e.inArray(i, n)) return -1 !== e.inArray(i, a) ? Boolean(t.nodeValue.match(l) || t.nodeValue.match(c)) : !0;
        for (var r = e(n).filter(function (e, t) {
            return t instanceof RegExp
        }), o = 0, s = r.length; s > o; o++)
            if (i.match(r[o])) return !0;
        return !1
    }

    function n(n, i, r) {
        if (0 === n.length) return n;
        if (r && "function" == typeof r) return r(n);
        if (!document.implementation || !document.implementation.createHTMLDocument) return n;
        var a = document.implementation.createHTMLDocument("sanitization");
        a.body.innerHTML = n;
        for (var o = e.map(i, function (e, t) {
            return t
        }), s = e(a.body).find("*"), l = 0, c = s.length; c > l; l++) {
            var u = s[l],
                d = u.nodeName.toLowerCase();
            if (-1 !== e.inArray(d, o))
                for (var h = e.map(u.attributes, function (e) {
                    return e
                }), f = [].concat(i["*"] || [], i[d] || []), p = 0, m = h.length; m > p; p++) t(h[p], f) || u.removeAttribute(h[p].nodeName);
            else u.parentNode.removeChild(u)
        }
        return a.body.innerHTML
    }

    function i(t) {
        return this.each(function () {
            var n = e(this),
                i = n.data("bs.tooltip"),
                r = "object" == typeof t && t;
            (i || !/destroy|hide/.test(t)) && (i || n.data("bs.tooltip", i = new u(this, r)), "string" == typeof t && i[t]())
        })
    }
    var r = ["sanitize", "whiteList", "sanitizeFn"],
        a = ["background", "cite", "href", "itemtype", "longdesc", "poster", "src", "xlink:href"],
        o = /^aria-[\w-]*$/i,
        s = {
            "*": ["class", "dir", "id", "lang", "role", o],
            a: ["target", "href", "title", "rel"],
            area: [],
            b: [],
            br: [],
            col: [],
            code: [],
            div: [],
            em: [],
            hr: [],
            h1: [],
            h2: [],
            h3: [],
            h4: [],
            h5: [],
            h6: [],
            i: [],
            img: ["src", "alt", "title", "width", "height"],
            li: [],
            ol: [],
            p: [],
            pre: [],
            s: [],
            small: [],
            span: [],
            sub: [],
            sup: [],
            strong: [],
            u: [],
            ul: []
        },
        l = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,
        c = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,
        u = function (e, t) {
            this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.inState = null, this.init("tooltip", e, t)
        };
    u.VERSION = "3.4.1", u.TRANSITION_DURATION = 150, u.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1,
        viewport: {
            selector: "body",
            padding: 0
        },
        sanitize: !0,
        sanitizeFn: null,
        whiteList: s
    }, u.prototype.init = function (t, n, i) {
        if (this.enabled = !0, this.type = t, this.$element = e(n), this.options = this.getOptions(i), this.$viewport = this.options.viewport && e(document).find(e.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = {
            click: !1,
            hover: !1,
            focus: !1
        }, this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
        for (var r = this.options.trigger.split(" "), a = r.length; a--;) {
            var o = r[a];
            if ("click" == o) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this));
            else if ("manual" != o) {
                var s = "hover" == o ? "mouseenter" : "focusin",
                    l = "hover" == o ? "mouseleave" : "focusout";
                this.$element.on(s + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle()
    }, u.prototype.getDefaults = function () {
        return u.DEFAULTS
    }, u.prototype.getOptions = function (t) {
        var i = this.$element.data();
        for (var a in i) i.hasOwnProperty(a) && -1 !== e.inArray(a, r) && delete i[a];
        return t = e.extend({}, this.getDefaults(), i, t), t.delay && "number" == typeof t.delay && (t.delay = {
            show: t.delay,
            hide: t.delay
        }), t.sanitize && (t.template = n(t.template, t.whiteList, t.sanitizeFn)), t
    }, u.prototype.getDelegateOptions = function () {
        var t = {},
            n = this.getDefaults();
        return this._options && e.each(this._options, function (e, i) {
            n[e] != i && (t[e] = i)
        }), t
    }, u.prototype.enter = function (t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n)), t instanceof e.Event && (n.inState["focusin" == t.type ? "focus" : "hover"] = !0), n.tip().hasClass("in") || "in" == n.hoverState ? void (n.hoverState = "in") : (clearTimeout(n.timeout), n.hoverState = "in", n.options.delay && n.options.delay.show ? void (n.timeout = setTimeout(function () {
            "in" == n.hoverState && n.show()
        }, n.options.delay.show)) : n.show())
    }, u.prototype.isInStateTrue = function () {
        for (var e in this.inState)
            if (this.inState[e]) return !0;
        return !1
    }, u.prototype.leave = function (t) {
        var n = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
        return n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n)), t instanceof e.Event && (n.inState["focusout" == t.type ? "focus" : "hover"] = !1), n.isInStateTrue() ? void 0 : (clearTimeout(n.timeout), n.hoverState = "out", n.options.delay && n.options.delay.hide ? void (n.timeout = setTimeout(function () {
            "out" == n.hoverState && n.hide()
        }, n.options.delay.hide)) : n.hide())
    }, u.prototype.show = function () {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            this.$element.trigger(t);
            var n = e.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
            if (t.isDefaultPrevented() || !n) return;
            var i = this,
                r = this.tip(),
                a = this.getUID(this.type);
            this.setContent(), r.attr("id", a), this.$element.attr("aria-describedby", a), this.options.animation && r.addClass("fade");
            var o = "function" == typeof this.options.placement ? this.options.placement.call(this, r[0], this.$element[0]) : this.options.placement,
                s = /\s?auto?\s?/i,
                l = s.test(o);
            l && (o = o.replace(s, "") || "top"), r.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(o).data("bs." + this.type, this), this.options.container ? r.appendTo(e(document).find(this.options.container)) : r.insertAfter(this.$element), this.$element.trigger("inserted.bs." + this.type);
            var c = this.getPosition(),
                d = r[0].offsetWidth,
                h = r[0].offsetHeight;
            if (l) {
                var f = o,
                    p = this.getPosition(this.$viewport);
                o = "bottom" == o && c.bottom + h > p.bottom ? "top" : "top" == o && c.top - h < p.top ? "bottom" : "right" == o && c.right + d > p.width ? "left" : "left" == o && c.left - d < p.left ? "right" : o, r.removeClass(f).addClass(o)
            }
            var m = this.getCalculatedOffset(o, c, d, h);
            this.applyPlacement(m, o);
            var g = function () {
                var e = i.hoverState;
                i.$element.trigger("shown.bs." + i.type), i.hoverState = null, "out" == e && i.leave(i)
            };
            e.support.transition && this.$tip.hasClass("fade") ? r.one("bsTransitionEnd", g).emulateTransitionEnd(u.TRANSITION_DURATION) : g()
        }
    }, u.prototype.applyPlacement = function (t, n) {
        var i = this.tip(),
            r = i[0].offsetWidth,
            a = i[0].offsetHeight,
            o = parseInt(i.css("margin-top"), 10),
            s = parseInt(i.css("margin-left"), 10);
        isNaN(o) && (o = 0), isNaN(s) && (s = 0), t.top += o, t.left += s, e.offset.setOffset(i[0], e.extend({
            using: function (e) {
                i.css({
                    top: Math.round(e.top),
                    left: Math.round(e.left)
                })
            }
        }, t), 0), i.addClass("in");
        var l = i[0].offsetWidth,
            c = i[0].offsetHeight;
        "top" == n && c != a && (t.top = t.top + a - c);
        var u = this.getViewportAdjustedDelta(n, t, l, c);
        u.left ? t.left += u.left : t.top += u.top;
        var d = /top|bottom/.test(n),
            h = d ? 2 * u.left - r + l : 2 * u.top - a + c,
            f = d ? "offsetWidth" : "offsetHeight";
        i.offset(t), this.replaceArrow(h, i[0][f], d)
    }, u.prototype.replaceArrow = function (e, t, n) {
        this.arrow().css(n ? "left" : "top", 50 * (1 - e / t) + "%").css(n ? "top" : "left", "")
    }, u.prototype.setContent = function () {
        var e = this.tip(),
            t = this.getTitle();
        this.options.html ? (this.options.sanitize && (t = n(t, this.options.whiteList, this.options.sanitizeFn)), e.find(".tooltip-inner").html(t)) : e.find(".tooltip-inner").text(t), e.removeClass("fade in top bottom left right")
    }, u.prototype.hide = function (t) {
        function n() {
            "in" != i.hoverState && r.detach(), i.$element && i.$element.removeAttr("aria-describedby").trigger("hidden.bs." + i.type), t && t()
        }
        var i = this,
            r = e(this.$tip),
            a = e.Event("hide.bs." + this.type);
        return this.$element.trigger(a), a.isDefaultPrevented() ? void 0 : (r.removeClass("in"), e.support.transition && r.hasClass("fade") ? r.one("bsTransitionEnd", n).emulateTransitionEnd(u.TRANSITION_DURATION) : n(), this.hoverState = null, this)
    }, u.prototype.fixTitle = function () {
        var e = this.$element;
        (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
    }, u.prototype.hasContent = function () {
        return this.getTitle()
    }, u.prototype.getPosition = function (t) {
        t = t || this.$element;
        var n = t[0],
            i = "BODY" == n.tagName,
            r = n.getBoundingClientRect();
        null == r.width && (r = e.extend({}, r, {
            width: r.right - r.left,
            height: r.bottom - r.top
        }));
        var a = window.SVGElement && n instanceof window.SVGElement,
            o = i ? {
                top: 0,
                left: 0
            } : a ? null : t.offset(),
            s = {
                scroll: i ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()
            },
            l = i ? {
                width: e(window).width(),
                height: e(window).height()
            } : null;
        return e.extend({}, r, s, l, o)
    }, u.prototype.getCalculatedOffset = function (e, t, n, i) {
        return "bottom" == e ? {
            top: t.top + t.height,
            left: t.left + t.width / 2 - n / 2
        } : "top" == e ? {
            top: t.top - i,
            left: t.left + t.width / 2 - n / 2
        } : "left" == e ? {
            top: t.top + t.height / 2 - i / 2,
            left: t.left - n
        } : {
            top: t.top + t.height / 2 - i / 2,
            left: t.left + t.width
        }
    }, u.prototype.getViewportAdjustedDelta = function (e, t, n, i) {
        var r = {
            top: 0,
            left: 0
        };
        if (!this.$viewport) return r;
        var a = this.options.viewport && this.options.viewport.padding || 0,
            o = this.getPosition(this.$viewport);
        if (/right|left/.test(e)) {
            var s = t.top - a - o.scroll,
                l = t.top + a - o.scroll + i;
            s < o.top ? r.top = o.top - s : l > o.top + o.height && (r.top = o.top + o.height - l)
        } else {
            var c = t.left - a,
                u = t.left + a + n;
            c < o.left ? r.left = o.left - c : u > o.right && (r.left = o.left + o.width - u)
        }
        return r
    }, u.prototype.getTitle = function () {
        var e, t = this.$element,
            n = this.options;
        return e = t.attr("data-original-title") || ("function" == typeof n.title ? n.title.call(t[0]) : n.title)
    }, u.prototype.getUID = function (e) {
        do e += ~~(1e6 * Math.random()); while (document.getElementById(e));
        return e
    }, u.prototype.tip = function () {
        if (!this.$tip && (this.$tip = e(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
        return this.$tip
    }, u.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
    }, u.prototype.enable = function () {
        this.enabled = !0
    }, u.prototype.disable = function () {
        this.enabled = !1
    }, u.prototype.toggleEnabled = function () {
        this.enabled = !this.enabled
    }, u.prototype.toggle = function (t) {
        var n = this;
        t && (n = e(t.currentTarget).data("bs." + this.type), n || (n = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, n))), t ? (n.inState.click = !n.inState.click, n.isInStateTrue() ? n.enter(n) : n.leave(n)) : n.tip().hasClass("in") ? n.leave(n) : n.enter(n)
    }, u.prototype.destroy = function () {
        var e = this;
        clearTimeout(this.timeout), this.hide(function () {
            e.$element.off("." + e.type).removeData("bs." + e.type), e.$tip && e.$tip.detach(), e.$tip = null, e.$arrow = null, e.$viewport = null, e.$element = null
        })
    }, u.prototype.sanitizeHtml = function (e) {
        return n(e, this.options.whiteList, this.options.sanitizeFn)
    };
    var d = e.fn.tooltip;
    e.fn.tooltip = i, e.fn.tooltip.Constructor = u, e.fn.tooltip.noConflict = function () {
        return e.fn.tooltip = d, this
    }
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.popover"),
                a = "object" == typeof t && t;
            (r || !/destroy|hide/.test(t)) && (r || i.data("bs.popover", r = new n(this, a)), "string" == typeof t && r[t]())
        })
    }
    var n = function (e, t) {
        this.init("popover", e, t)
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    n.VERSION = "3.4.1", n.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), n.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), n.prototype.constructor = n, n.prototype.getDefaults = function () {
        return n.DEFAULTS
    }, n.prototype.setContent = function () {
        var e = this.tip(),
            t = this.getTitle(),
            n = this.getContent();
        if (this.options.html) {
            var i = typeof n;
            this.options.sanitize && (t = this.sanitizeHtml(t), "string" === i && (n = this.sanitizeHtml(n))), e.find(".popover-title").html(t), e.find(".popover-content").children().detach().end()["string" === i ? "html" : "append"](n)
        } else e.find(".popover-title").text(t), e.find(".popover-content").children().detach().end().text(n);
        e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide()
    }, n.prototype.hasContent = function () {
        return this.getTitle() || this.getContent()
    }, n.prototype.getContent = function () {
        var e = this.$element,
            t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
    }, n.prototype.arrow = function () {
        return this.$arrow = this.$arrow || this.tip().find(".arrow")
    };
    var i = e.fn.popover;
    e.fn.popover = t, e.fn.popover.Constructor = n, e.fn.popover.noConflict = function () {
        return e.fn.popover = i, this
    }
}(jQuery), + function (e) {
    "use strict";

    function t(n, i) {
        this.$body = e(document.body), this.$scrollElement = e(e(n).is(document.body) ? window : n), this.options = e.extend({}, t.DEFAULTS, i), this.selector = (this.options.target || "") + " .nav li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", e.proxy(this.process, this)), this.refresh(), this.process()
    }

    function n(n) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.scrollspy"),
                a = "object" == typeof n && n;
            r || i.data("bs.scrollspy", r = new t(this, a)), "string" == typeof n && r[n]()
        })
    }
    t.VERSION = "3.4.1", t.DEFAULTS = {
        offset: 10
    }, t.prototype.getScrollHeight = function () {
        return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
    }, t.prototype.refresh = function () {
        var t = this,
            n = "offset",
            i = 0;
        this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight(), e.isWindow(this.$scrollElement[0]) || (n = "position", i = this.$scrollElement.scrollTop()), this.$body.find(this.selector).map(function () {
            var t = e(this),
                r = t.data("target") || t.attr("href"),
                a = /^#./.test(r) && e(r);
            return a && a.length && a.is(":visible") && [
                [a[n]().top + i, r]
            ] || null
        }).sort(function (e, t) {
            return e[0] - t[0]
        }).each(function () {
            t.offsets.push(this[0]), t.targets.push(this[1])
        })
    }, t.prototype.process = function () {
        var e, t = this.$scrollElement.scrollTop() + this.options.offset,
            n = this.getScrollHeight(),
            i = this.options.offset + n - this.$scrollElement.height(),
            r = this.offsets,
            a = this.targets,
            o = this.activeTarget;
        if (this.scrollHeight != n && this.refresh(), t >= i) return o != (e = a[a.length - 1]) && this.activate(e);
        if (o && t < r[0]) return this.activeTarget = null, this.clear();
        for (e = r.length; e--;) o != a[e] && t >= r[e] && (void 0 === r[e + 1] || t < r[e + 1]) && this.activate(a[e])
    }, t.prototype.activate = function (t) {
        this.activeTarget = t, this.clear();
        var n = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]',
            i = e(n).parents("li").addClass("active");
        i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active")), i.trigger("activate.bs.scrollspy")
    }, t.prototype.clear = function () {
        e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active")
    };
    var i = e.fn.scrollspy;
    e.fn.scrollspy = n, e.fn.scrollspy.Constructor = t, e.fn.scrollspy.noConflict = function () {
        return e.fn.scrollspy = i, this
    }, e(window).on("load.bs.scrollspy.data-api", function () {
        e('[data-spy="scroll"]').each(function () {
            var t = e(this);
            n.call(t, t.data())
        })
    })
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.tab");
            r || i.data("bs.tab", r = new n(this)), "string" == typeof t && r[t]()
        })
    }
    var n = function (t) {
        this.element = e(t)
    };
    n.VERSION = "3.4.1", n.TRANSITION_DURATION = 150, n.prototype.show = function () {
        var t = this.element,
            n = t.closest("ul:not(.dropdown-menu)"),
            i = t.data("target");
        if (i || (i = t.attr("href"), i = i && i.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) {
            var r = n.find(".active:last a"),
                a = e.Event("hide.bs.tab", {
                    relatedTarget: t[0]
                }),
                o = e.Event("show.bs.tab", {
                    relatedTarget: r[0]
                });
            if (r.trigger(a), t.trigger(o), !o.isDefaultPrevented() && !a.isDefaultPrevented()) {
                var s = e(document).find(i);
                this.activate(t.closest("li"), n), this.activate(s, s.parent(), function () {
                    r.trigger({
                        type: "hidden.bs.tab",
                        relatedTarget: t[0]
                    }), t.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: r[0]
                    })
                })
            }
        }
    }, n.prototype.activate = function (t, i, r) {
        function a() {
            o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !1), t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded", !0), s ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), t.parent(".dropdown-menu").length && t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded", !0), r && r()
        }
        var o = i.find("> .active"),
            s = r && e.support.transition && (o.length && o.hasClass("fade") || !!i.find("> .fade").length);
        o.length && s ? o.one("bsTransitionEnd", a).emulateTransitionEnd(n.TRANSITION_DURATION) : a(), o.removeClass("in")
    };
    var i = e.fn.tab;
    e.fn.tab = t, e.fn.tab.Constructor = n, e.fn.tab.noConflict = function () {
        return e.fn.tab = i, this
    };
    var r = function (n) {
        n.preventDefault(), t.call(e(this), "show")
    };
    e(document).on("click.bs.tab.data-api", '[data-toggle="tab"]', r).on("click.bs.tab.data-api", '[data-toggle="pill"]', r)
}(jQuery), + function (e) {
    "use strict";

    function t(t) {
        return this.each(function () {
            var i = e(this),
                r = i.data("bs.affix"),
                a = "object" == typeof t && t;
            r || i.data("bs.affix", r = new n(this, a)), "string" == typeof t && r[t]()
        })
    }
    var n = function (t, i) {
        this.options = e.extend({}, n.DEFAULTS, i);
        var r = this.options.target === n.DEFAULTS.target ? e(this.options.target) : e(document).find(this.options.target);
        this.$target = r.on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), this.$element = e(t), this.affixed = null, this.unpin = null, this.pinnedOffset = null, this.checkPosition()
    };
    n.VERSION = "3.4.1", n.RESET = "affix affix-top affix-bottom", n.DEFAULTS = {
        offset: 0,
        target: window
    }, n.prototype.getState = function (e, t, n, i) {
        var r = this.$target.scrollTop(),
            a = this.$element.offset(),
            o = this.$target.height();
        if (null != n && "top" == this.affixed) return n > r ? "top" : !1;
        if ("bottom" == this.affixed) return null != n ? r + this.unpin <= a.top ? !1 : "bottom" : e - i >= r + o ? !1 : "bottom";
        var s = null == this.affixed,
            l = s ? r : a.top,
            c = s ? o : t;
        return null != n && n >= r ? "top" : null != i && l + c >= e - i ? "bottom" : !1
    }, n.prototype.getPinnedOffset = function () {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(n.RESET).addClass("affix");
        var e = this.$target.scrollTop(),
            t = this.$element.offset();
        return this.pinnedOffset = t.top - e
    }, n.prototype.checkPositionWithEventLoop = function () {
        setTimeout(e.proxy(this.checkPosition, this), 1)
    }, n.prototype.checkPosition = function () {
        if (this.$element.is(":visible")) {
            var t = this.$element.height(),
                i = this.options.offset,
                r = i.top,
                a = i.bottom,
                o = Math.max(e(document).height(), e(document.body).height());
            "object" != typeof i && (a = r = i), "function" == typeof r && (r = i.top(this.$element)), "function" == typeof a && (a = i.bottom(this.$element));
            var s = this.getState(o, t, r, a);
            if (this.affixed != s) {
                null != this.unpin && this.$element.css("top", "");
                var l = "affix" + (s ? "-" + s : ""),
                    c = e.Event(l + ".bs.affix");
                if (this.$element.trigger(c), c.isDefaultPrevented()) return;
                this.affixed = s, this.unpin = "bottom" == s ? this.getPinnedOffset() : null,
                    this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix", "affixed") + ".bs.affix")
            }
            "bottom" == s && this.$element.offset({
                top: o - t - a
            })
        }
    };
    var i = e.fn.affix;
    e.fn.affix = t, e.fn.affix.Constructor = n, e.fn.affix.noConflict = function () {
        return e.fn.affix = i, this
    }, e(window).on("load", function () {
        e('[data-spy="affix"]').each(function () {
            var n = e(this),
                i = n.data();
            i.offset = i.offset || {}, null != i.offsetBottom && (i.offset.bottom = i.offsetBottom), null != i.offsetTop && (i.offset.top = i.offsetTop), t.call(n, i)
        })
    })
}(jQuery), $.fn.button.Constructor.prototype.setState = function (e) {
    var t = "disabled",
        n = this.$element,
        i = n.is("input") ? "val" : "html",
        r = n.data(),
        a = "loading" == e;
    if (r.disabledStates) {
        var o = r.disabledStates.split(","); - 1 !== o.indexOf(e) && (a = !0)
    }
    e += "Text", null == r.resetText && n.data("resetText", n[i]()), setTimeout($.proxy(function () {
        n[i](null == r[e] ? this.options[e] : r[e]), a ? (this.isLoading = !0, n.addClass(t).attr(t, t).prop(t, !0)) : this.isLoading && (this.isLoading = !1, n.removeClass(t).removeAttr(t).prop(t, !1))
    }, this), 0)
}, $.fn.tooltip.Constructor.prototype.reposition = function () {
    var e = this.tip();
    if (e.is(":visible")) {
        e.addClass("stop-animations");
        var t = "function" == typeof this.options.placement ? this.options.placement.call(this, e[0], this.$element[0]) : this.options.placement,
            n = /\s?auto?\s?/i,
            i = n.test(t);
        i && (t = t.replace(n, "") || "top"), e.addClass(t);
        var r = this.getPosition(),
            a = e[0].offsetWidth,
            o = e[0].offsetHeight;
        if (i) {
            var s = t,
                l = this.getPosition(this.$viewport);
            t = "bottom" == t && r.bottom + o > l.bottom ? "top" : "top" == t && r.top - o < l.top ? "bottom" : "right" == t && r.right + a > l.width ? "left" : "left" == t && r.left - a < l.left ? "right" : t, e.removeClass(s).addClass(t)
        }
        var c = this.getCalculatedOffset(t, r, a, o);
        return this.applyPlacement(c, t), e.removeClass("stop-animations"), this
    }
}, $.fn.popover && ($.fn.popover.Constructor.prototype.reposition = $.fn.tooltip.Constructor.prototype.reposition), $(function () {
    initTooltip(document), $("html").on("touchstart", ".tooltip-open", function () {
        $(".tooltip:visible").data("bs.tooltip").$element.tooltip("hide")
    })
}), $(function (e) { }), $(function () {
    function e(e, t) {
        if (void 0 !== e.data("parent")) {
            var n = e.closest(e.data("parent"));
            "show" === t ? n.addClass("popover-visible") : "hide" === t && n.removeClass("popover-visible")
        }
    }
    $('.a-popover[data-trigger="manual"]').popover({
        html: !0,
        sanitize: !1,
        animation: !1
    }).on("mouseenter", function () {
        var t = $(this);
        e(t, "show"), t.popover("show"), $(".popover").on("mouseleave", function () {
            t.popover("hide"), e(t, "hide")
        })
    }).on("mouseleave", function () {
        var t = $(this);
        e(t, "show"), setTimeout(function () {
            $(".popover:hover").length || (t.popover("hide"), e(t, "hide"))
        }, 300)
    });
    var t = null;
    $(window).resize(function () {
        t && clearTimeout(t), t = setTimeout(function () {
            $(".popover:visible:not(.vue-popover)").each(function () {
                $(this).data("bs.popover").$element.popover("reposition").popover("reposition")
            })
        }, 200)
    })
}), window.hidePopover = function (e) {
    var t = $(e).closest("div.popover").data("bs.popover");
    t.$element.is(e.target) || (t.inState.click = !1, t.hide())
},
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = function (t, n) {
            return void 0 === n && (n = "undefined" != typeof window ? require("jquery") : require("jquery")(t)), e(n), n
        } : e(jQuery)
    }(function (e) {
        var t = function () {
            if (e && e.fn && e.fn.select2 && e.fn.select2.amd) var t = e.fn.select2.amd;
            var t;
            return function () {
                if (!t || !t.requirejs) {
                    t ? n = t : t = {};
                    var e, n, i;
                    ! function (t) {
                        function r(e, t) {
                            return _.call(e, t)
                        }

                        function a(e, t) {
                            var n, i, r, a, o, s, l, c, u, d, h, f, p = t && t.split("/"),
                                m = b.map,
                                g = m && m["*"] || {};
                            if (e) {
                                for (e = e.split("/"), o = e.length - 1, b.nodeIdCompat && k.test(e[o]) && (e[o] = e[o].replace(k, "")), "." === e[0].charAt(0) && p && (f = p.slice(0, p.length - 1), e = f.concat(e)), u = 0; u < e.length; u++)
                                    if (h = e[u], "." === h) e.splice(u, 1), u -= 1;
                                    else if (".." === h) {
                                        if (0 === u || 1 === u && ".." === e[2] || ".." === e[u - 1]) continue;
                                        u > 0 && (e.splice(u - 1, 2), u -= 2)
                                    }
                                e = e.join("/")
                            }
                            if ((p || g) && m) {
                                for (n = e.split("/"), u = n.length; u > 0; u -= 1) {
                                    if (i = n.slice(0, u).join("/"), p)
                                        for (d = p.length; d > 0; d -= 1)
                                            if (r = m[p.slice(0, d).join("/")], r && (r = r[i])) {
                                                a = r, s = u;
                                                break
                                            } if (a) break;
                                    !l && g && g[i] && (l = g[i], c = u)
                                } !a && l && (a = l, s = c), a && (n.splice(0, s, a), e = n.join("/"))
                            }
                            return e
                        }

                        function o(e, n) {
                            return function () {
                                var i = x.call(arguments, 0);
                                return "string" != typeof i[0] && 1 === i.length && i.push(null), p.apply(t, i.concat([e, n]))
                            }
                        }

                        function s(e) {
                            return function (t) {
                                return a(t, e)
                            }
                        }

                        function l(e) {
                            return function (t) {
                                v[e] = t
                            }
                        }

                        function c(e) {
                            if (r(y, e)) {
                                var n = y[e];
                                delete y[e], w[e] = !0, f.apply(t, n)
                            }
                            if (!r(v, e) && !r(w, e)) throw new Error("No " + e);
                            return v[e]
                        }

                        function u(e) {
                            var t, n = e ? e.indexOf("!") : -1;
                            return n > -1 && (t = e.substring(0, n), e = e.substring(n + 1, e.length)), [t, e]
                        }

                        function d(e) {
                            return e ? u(e) : []
                        }

                        function h(e) {
                            return function () {
                                return b && b.config && b.config[e] || {}
                            }
                        }
                        var f, p, m, g, v = {},
                            y = {},
                            b = {},
                            w = {},
                            _ = Object.prototype.hasOwnProperty,
                            x = [].slice,
                            k = /\.js$/;
                        m = function (e, t) {
                            var n, i = u(e),
                                r = i[0],
                                o = t[1];
                            return e = i[1], r && (r = a(r, o), n = c(r)), r ? e = n && n.normalize ? n.normalize(e, s(o)) : a(e, o) : (e = a(e, o), i = u(e), r = i[0], e = i[1], r && (n = c(r))), {
                                f: r ? r + "!" + e : e,
                                n: e,
                                pr: r,
                                p: n
                            }
                        }, g = {
                            require: function (e) {
                                return o(e)
                            },
                            exports: function (e) {
                                var t = v[e];
                                return "undefined" != typeof t ? t : v[e] = {}
                            },
                            module: function (e) {
                                return {
                                    id: e,
                                    uri: "",
                                    exports: v[e],
                                    config: h(e)
                                }
                            }
                        }, f = function (e, n, i, a) {
                            var s, u, h, f, p, b, _, x = [],
                                k = typeof i;
                            if (a = a || e, b = d(a), "undefined" === k || "function" === k) {
                                for (n = !n.length && i.length ? ["require", "exports", "module"] : n, p = 0; p < n.length; p += 1)
                                    if (f = m(n[p], b), u = f.f, "require" === u) x[p] = g.require(e);
                                    else if ("exports" === u) x[p] = g.exports(e), _ = !0;
                                    else if ("module" === u) s = x[p] = g.module(e);
                                    else if (r(v, u) || r(y, u) || r(w, u)) x[p] = c(u);
                                    else {
                                        if (!f.p) throw new Error(e + " missing " + u);
                                        f.p.load(f.n, o(a, !0), l(u), {}), x[p] = v[u]
                                    }
                                h = i ? i.apply(v[e], x) : void 0, e && (s && s.exports !== t && s.exports !== v[e] ? v[e] = s.exports : h === t && _ || (v[e] = h))
                            } else e && (v[e] = i)
                        }, e = n = p = function (e, n, i, r, a) {
                            if ("string" == typeof e) return g[e] ? g[e](n) : c(m(e, d(n)).f);
                            if (!e.splice) {
                                if (b = e, b.deps && p(b.deps, b.callback), !n) return;
                                n.splice ? (e = n, n = i, i = null) : e = t
                            }
                            return n = n || function () { }, "function" == typeof i && (i = r, r = a), r ? f(t, e, n, i) : setTimeout(function () {
                                f(t, e, n, i)
                            }, 4), p
                        }, p.config = function (e) {
                            return p(e)
                        }, e._defined = v, i = function (e, t, n) {
                            if ("string" != typeof e) throw new Error("See almond README: incorrect module build, no module name");
                            t.splice || (n = t, t = []), r(v, e) || r(y, e) || (y[e] = [e, t, n])
                        }, i.amd = {
                            jQuery: !0
                        }
                    }(), t.requirejs = e, t.require = n, t.define = i
                }
            }(), t.define("almond", function () { }), t.define("jquery", [], function () {
                var t = e || $;
                return null == t && console && console.error && console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."), t
            }), t.define("select2/utils", ["jquery"], function (e) {
                function t(e) {
                    var t = e.prototype,
                        n = [];
                    for (var i in t) {
                        var r = t[i];
                        "function" == typeof r && "constructor" !== i && n.push(i)
                    }
                    return n
                }
                var n = {};
                n.Extend = function (e, t) {
                    function n() {
                        this.constructor = e
                    }
                    var i = {}.hasOwnProperty;
                    for (var r in t) i.call(t, r) && (e[r] = t[r]);
                    return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e
                }, n.Decorate = function (e, n) {
                    function i() {
                        var t = Array.prototype.unshift,
                            i = n.prototype.constructor.length,
                            r = e.prototype.constructor;
                        i > 0 && (t.call(arguments, e.prototype.constructor), r = n.prototype.constructor), r.apply(this, arguments)
                    }

                    function r() {
                        this.constructor = i
                    }
                    var a = t(n),
                        o = t(e);
                    n.displayName = e.displayName, i.prototype = new r;
                    for (var s = 0; s < o.length; s++) {
                        var l = o[s];
                        i.prototype[l] = e.prototype[l]
                    }
                    for (var c = (function (e) {
                        var t = function () { };
                        e in i.prototype && (t = i.prototype[e]);
                        var r = n.prototype[e];
                        return function () {
                            var e = Array.prototype.unshift;
                            return e.call(arguments, t), r.apply(this, arguments)
                        }
                    }), u = 0; u < a.length; u++) {
                        var d = a[u];
                        i.prototype[d] = c(d)
                    }
                    return i
                };
                var i = function () {
                    this.listeners = {}
                };
                return i.prototype.on = function (e, t) {
                    this.listeners = this.listeners || {}, e in this.listeners ? this.listeners[e].push(t) : this.listeners[e] = [t]
                }, i.prototype.trigger = function (e) {
                    var t = Array.prototype.slice,
                        n = t.call(arguments, 1);
                    this.listeners = this.listeners || {}, null == n && (n = []), 0 === n.length && n.push({}), n[0]._type = e, e in this.listeners && this.invoke(this.listeners[e], t.call(arguments, 1)), "*" in this.listeners && this.invoke(this.listeners["*"], arguments)
                }, i.prototype.invoke = function (e, t) {
                    for (var n = 0, i = e.length; i > n; n++) e[n].apply(this, t)
                }, n.Observable = i, n.generateChars = function (e) {
                    for (var t = "", n = 0; e > n; n++) {
                        var i = Math.floor(36 * Math.random());
                        t += i.toString(36)
                    }
                    return t
                }, n.bind = function (e, t) {
                    return function () {
                        e.apply(t, arguments)
                    }
                }, n._convertData = function (e) {
                    for (var t in e) {
                        var n = t.split("-"),
                            i = e;
                        if (1 !== n.length) {
                            for (var r = 0; r < n.length; r++) {
                                var a = n[r];
                                a = a.substring(0, 1).toLowerCase() + a.substring(1), a in i || (i[a] = {}), r == n.length - 1 && (i[a] = e[t]), i = i[a]
                            }
                            delete e[t]
                        }
                    }
                    return e
                }, n.hasScroll = function (t, n) {
                    var i = e(n),
                        r = n.style.overflowX,
                        a = n.style.overflowY;
                    return r !== a || "hidden" !== a && "visible" !== a ? "scroll" === r || "scroll" === a ? !0 : i.innerHeight() < n.scrollHeight || i.innerWidth() < n.scrollWidth : !1
                }, n.escapeMarkup = function (e) {
                    var t = {
                        "\\": "&#92;",
                        "&": "&amp;",
                        "<": "&lt;",
                        ">": "&gt;",
                        '"': "&quot;",
                        "'": "&#39;",
                        "/": "&#47;"
                    };
                    return "string" != typeof e ? e : String(e).replace(/[&<>"'\/\\]/g, function (e) {
                        return t[e]
                    })
                }, n.appendMany = function (t, n) {
                    if ("1.7" === e.fn.jquery.substr(0, 3)) {
                        var i = e();
                        e.map(n, function (e) {
                            i = i.add(e)
                        }), n = i
                    }
                    t.append(n)
                }, n
            }), t.define("select2/results", ["jquery", "./utils"], function (e, t) {
                function n(e, t, i) {
                    this.$element = e, this.data = i, this.options = t, n.__super__.constructor.call(this)
                }
                return t.Extend(n, t.Observable), n.prototype.render = function () {
                    var t = e('<ul class="select2-results__options" role="tree"></ul>');
                    return this.options.get("multiple") && t.attr("aria-multiselectable", "true"), this.$results = t, t
                }, n.prototype.clear = function () {
                    this.$results.empty()
                }, n.prototype.displayMessage = function (t) {
                    var n = this.options.get("escapeMarkup");
                    this.clear(), this.hideLoading();
                    var i = e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),
                        r = this.options.get("translations").get(t.message);
                    i.append(n(r(t.args))), i[0].className += " select2-results__message", this.$results.append(i)
                }, n.prototype.hideMessages = function () {
                    this.$results.find(".select2-results__message").remove()
                }, n.prototype.append = function (e) {
                    this.hideLoading();
                    var t = [];
                    if (null == e.results || 0 === e.results.length) return void (0 === this.$results.children().length && this.trigger("results:message", {
                        message: "noResults"
                    }));
                    e.results = this.sort(e.results);
                    for (var n = 0; n < e.results.length; n++) {
                        var i = e.results[n],
                            r = this.option(i);
                        t.push(r)
                    }
                    this.$results.append(t)
                }, n.prototype.position = function (e, t) {
                    var n = t.find(".select2-results");
                    n.append(e)
                }, n.prototype.sort = function (e) {
                    var t = this.options.get("sorter");
                    return t(e)
                }, n.prototype.highlightFirstItem = function () {
                    var e = this.$results.find(".select2-results__option[aria-selected]"),
                        t = e.filter("[aria-selected=true]");
                    t.length > 0 ? t.first().trigger("mouseenter") : e.first().trigger("mouseenter"), this.ensureHighlightVisible()
                }, n.prototype.setClasses = function () {
                    var t = this;
                    this.data.current(function (n) {
                        var i = e.map(n, function (e) {
                            return e.id.toString()
                        }),
                            r = t.$results.find(".select2-results__option[aria-selected]");
                        r.each(function () {
                            var t = e(this),
                                n = e.data(this, "data"),
                                r = "" + n.id;
                            null != n.element && n.element.selected || null == n.element && e.inArray(r, i) > -1 ? t.attr("aria-selected", "true") : t.attr("aria-selected", "false")
                        })
                    })
                }, n.prototype.showLoading = function (e) {
                    this.hideLoading();
                    var t = this.options.get("translations").get("searching"),
                        n = {
                            disabled: !0,
                            loading: !0,
                            text: t(e)
                        },
                        i = this.option(n);
                    i.className += " loading-results", this.$results.prepend(i)
                }, n.prototype.hideLoading = function () {
                    this.$results.find(".loading-results").remove()
                }, n.prototype.option = function (t) {
                    var n = document.createElement("li");
                    n.className = "select2-results__option";
                    var i = {
                        role: "treeitem",
                        "aria-selected": "false"
                    };
                    t.disabled && (delete i["aria-selected"], i["aria-disabled"] = "true"), null == t.id && delete i["aria-selected"], null != t._resultId && (n.id = t._resultId), t.title && (n.title = t.title), t.children && (i.role = "group", i["aria-label"] = t.text, delete i["aria-selected"]);
                    for (var r in i) {
                        var a = i[r];
                        n.setAttribute(r, a)
                    }
                    if (t.children) {
                        var o = e(n),
                            s = document.createElement("strong");
                        s.className = "select2-results__group";
                        e(s);
                        this.template(t, s);
                        for (var l = [], c = 0; c < t.children.length; c++) {
                            var u = t.children[c],
                                d = this.option(u);
                            l.push(d)
                        }
                        var h = e("<ul></ul>", {
                            "class": "select2-results__options select2-results__options--nested"
                        });
                        h.append(l), o.append(s), o.append(h)
                    } else this.template(t, n);
                    return e.data(n, "data", t), n
                }, n.prototype.bind = function (t, n) {
                    var i = this,
                        r = t.id + "-results";
                    this.$results.attr("id", r), t.on("results:all", function (e) {
                        i.clear(), i.append(e.data), t.isOpen() && (i.setClasses(), i.highlightFirstItem())
                    }), t.on("results:append", function (e) {
                        i.append(e.data), t.isOpen() && i.setClasses()
                    }), t.on("query", function (e) {
                        i.hideMessages(), i.showLoading(e)
                    }), t.on("select", function () {
                        t.isOpen() && (i.setClasses(), i.options.get("scrollAfterSelect") && i.highlightFirstItem())
                    }), t.on("unselect", function () {
                        t.isOpen() && (i.setClasses(), i.options.get("scrollAfterSelect") && i.highlightFirstItem())
                    }), t.on("open", function () {
                        i.$results.attr("aria-expanded", "true"), i.$results.attr("aria-hidden", "false"), i.setClasses(), i.ensureHighlightVisible()
                    }), t.on("close", function () {
                        i.$results.attr("aria-expanded", "false"), i.$results.attr("aria-hidden", "true"), i.$results.removeAttr("aria-activedescendant")
                    }), t.on("results:toggle", function () {
                        var e = i.getHighlightedResults();
                        0 !== e.length && e.trigger("mouseup")
                    }), t.on("results:select", function () {
                        var e = i.getHighlightedResults();
                        if (0 !== e.length) {
                            var t = e.data("data");
                            "true" == e.attr("aria-selected") ? i.trigger("close", {}) : i.trigger("select", {
                                data: t
                            })
                        }
                    }), t.on("results:previous", function () {
                        var e = i.getHighlightedResults(),
                            t = i.$results.find("[aria-selected]"),
                            n = t.index(e);
                        if (0 !== n) {
                            var r = n - 1;
                            0 === e.length && (r = 0);
                            var a = t.eq(r);
                            a.trigger("mouseenter");
                            var o = i.$results.offset().top,
                                s = a.offset().top,
                                l = i.$results.scrollTop() + (s - o);
                            0 === r ? i.$results.scrollTop(0) : 0 > s - o && i.$results.scrollTop(l)
                        }
                    }), t.on("results:next", function () {
                        var e = i.getHighlightedResults(),
                            t = i.$results.find("[aria-selected]"),
                            n = t.index(e),
                            r = n + 1;
                        if (!(r >= t.length)) {
                            var a = t.eq(r);
                            a.trigger("mouseenter");
                            var o = i.$results.offset().top + i.$results.outerHeight(!1),
                                s = a.offset().top + a.outerHeight(!1),
                                l = i.$results.scrollTop() + s - o;
                            0 === r ? i.$results.scrollTop(0) : s > o && i.$results.scrollTop(l)
                        }
                    }), t.on("results:focus", function (e) {
                        e.element.addClass("select2-results__option--highlighted")
                    }), t.on("results:message", function (e) {
                        i.displayMessage(e)
                    }), e.fn.mousewheel && this.$results.on("mousewheel", function (e) {
                        var t = i.$results.scrollTop(),
                            n = i.$results.get(0).scrollHeight - t + e.deltaY,
                            r = e.deltaY > 0 && t - e.deltaY <= 0,
                            a = e.deltaY < 0 && n <= i.$results.height();
                        r ? (i.$results.scrollTop(0), e.preventDefault(), e.stopPropagation()) : a && (i.$results.scrollTop(i.$results.get(0).scrollHeight - i.$results.height()), e.preventDefault(), e.stopPropagation())
                    }), this.$results.on("mouseup", ".select2-results__option[aria-selected]", function (t) {
                        var n = e(this),
                            r = n.data("data");
                        return "true" === n.attr("aria-selected") ? void (i.options.get("multiple") ? i.trigger("unselect", {
                            originalEvent: t,
                            data: r
                        }) : i.trigger("close", {})) : void i.trigger("select", {
                            originalEvent: t,
                            data: r
                        })
                    }), this.$results.on("mouseenter", ".select2-results__option[aria-selected]", function (t) {
                        var n = e(this).data("data");
                        i.getHighlightedResults().removeClass("select2-results__option--highlighted"), i.trigger("results:focus", {
                            data: n,
                            element: e(this)
                        })
                    })
                }, n.prototype.getHighlightedResults = function () {
                    var e = this.$results.find(".select2-results__option--highlighted");
                    return e
                }, n.prototype.destroy = function () {
                    this.$results.remove()
                }, n.prototype.ensureHighlightVisible = function () {
                    var e = this.getHighlightedResults();
                    if (0 !== e.length) {
                        var t = this.$results.find("[aria-selected]"),
                            n = t.index(e),
                            i = this.$results.offset().top,
                            r = e.offset().top,
                            a = this.$results.scrollTop() + (r - i),
                            o = r - i;
                        a -= 2 * e.outerHeight(!1), 2 >= n ? this.$results.scrollTop(0) : (o > this.$results.outerHeight() || 0 > o) && this.$results.scrollTop(a)
                    }
                }, n.prototype.template = function (t, n) {
                    var i = this.options.get("templateResult"),
                        r = this.options.get("escapeMarkup"),
                        a = i(t, n);
                    null == a ? n.style.display = "none" : "string" == typeof a ? n.innerHTML = r(a) : e(n).append(a)
                }, n
            }), t.define("select2/keys", [], function () {
                var e = {
                    BACKSPACE: 8,
                    TAB: 9,
                    ENTER: 13,
                    SHIFT: 16,
                    CTRL: 17,
                    ALT: 18,
                    ESC: 27,
                    SPACE: 32,
                    PAGE_UP: 33,
                    PAGE_DOWN: 34,
                    END: 35,
                    HOME: 36,
                    LEFT: 37,
                    UP: 38,
                    RIGHT: 39,
                    DOWN: 40,
                    DELETE: 46
                };
                return e
            }), t.define("select2/selection/base", ["jquery", "../utils", "../keys"], function (e, t, n) {
                function i(e, t) {
                    this.$element = e, this.options = t, i.__super__.constructor.call(this)
                }
                return t.Extend(i, t.Observable), i.prototype.render = function () {
                    var t = e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');
                    return this._tabindex = 0, null != this.$element.data("old-tabindex") ? this._tabindex = this.$element.data("old-tabindex") : null != this.$element.attr("tabindex") && (this._tabindex = this.$element.attr("tabindex")), t.attr("title", this.$element.attr("title")), t.attr("tabindex", this._tabindex), this.$selection = t, t
                }, i.prototype.bind = function (e, t) {
                    var i = this,
                        r = (e.id + "-container", e.id + "-results");
                    this.container = e, this.$selection.on("focus", function (e) {
                        i.trigger("focus", e)
                    }), this.$selection.on("blur", function (e) {
                        i._handleBlur(e)
                    }), this.$selection.on("keydown", function (e) {
                        i.trigger("keypress", e), e.which === n.SPACE && e.preventDefault()
                    }), e.on("results:focus", function (e) {
                        i.$selection.attr("aria-activedescendant", e.data._resultId)
                    }), e.on("selection:update", function (e) {
                        i.update(e.data)
                    }), e.on("open", function () {
                        i.$selection.attr("aria-expanded", "true"), i.$selection.attr("aria-owns", r), i._attachCloseHandler(e)
                    }), e.on("close", function () {
                        i.$selection.attr("aria-expanded", "false"), i.$selection.removeAttr("aria-activedescendant"), i.$selection.removeAttr("aria-owns"), i.$selection.focus(), i._detachCloseHandler(e)
                    }), e.on("enable", function () {
                        i.$selection.attr("tabindex", i._tabindex)
                    }), e.on("disable", function () {
                        i.$selection.attr("tabindex", "-1")
                    })
                }, i.prototype._handleBlur = function (t) {
                    var n = this;
                    window.setTimeout(function () {
                        document.activeElement == n.$selection[0] || e.contains(n.$selection[0], document.activeElement) || n.trigger("blur", t)
                    }, 1)
                }, i.prototype._attachCloseHandler = function (t) {
                    e(document.body).on("mousedown.select2." + t.id, function (t) {
                        var n = e(t.target),
                            i = n.closest(".select2"),
                            r = e(".select2.select2-container--open");
                        r.each(function () {
                            var t = e(this);
                            if (this != i[0]) {
                                var n = t.data("element");
                                n.select2("close")
                            }
                        })
                    })
                }, i.prototype._detachCloseHandler = function (t) {
                    e(document.body).off("mousedown.select2." + t.id)
                }, i.prototype.position = function (e, t) {
                    var n = t.find(".selection");
                    n.append(e)
                }, i.prototype.destroy = function () {
                    this._detachCloseHandler(this.container)
                }, i.prototype.update = function (e) {
                    throw new Error("The `update` method must be defined in child classes.")
                }, i
            }), t.define("select2/selection/single", ["jquery", "./base", "../utils", "../keys"], function (e, t, n, i) {
                function r() {
                    r.__super__.constructor.apply(this, arguments)
                }
                return n.Extend(r, t), r.prototype.render = function () {
                    var e = r.__super__.render.call(this);
                    return e.addClass("select2-selection--single"), e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'), e
                }, r.prototype.bind = function (e, t) {
                    var n = this;
                    r.__super__.bind.apply(this, arguments);
                    var i = e.id + "-container";
                    this.$selection.find(".select2-selection__rendered").attr("id", i), this.$selection.attr("aria-labelledby", i), this.$selection.on("mousedown", function (e) {
                        1 === e.which && n.trigger("toggle", {
                            originalEvent: e
                        })
                    }), this.$selection.on("focus", function (e) { }), this.$selection.on("blur", function (e) { }), e.on("focus", function (t) {
                        e.isOpen() || n.$selection.focus()
                    }), e.on("selection:update", function (e) {
                        n.update(e.data)
                    })
                }, r.prototype.clear = function () {
                    this.$selection.find(".select2-selection__rendered").empty()
                }, r.prototype.display = function (e, t) {
                    var n = this.options.get("templateSelection"),
                        i = this.options.get("escapeMarkup");
                    return i(n(e, t))
                }, r.prototype.selectionContainer = function () {
                    return e("<span></span>")
                }, r.prototype.update = function (e) {
                    if (0 === e.length) return void this.clear();
                    var t = e[0],
                        n = this.$selection.find(".select2-selection__rendered"),
                        i = this.display(t, n);
                    n.empty().append(i), n.prop("title", t.title || t.text)
                }, r
            }), t.define("select2/selection/multiple", ["jquery", "./base", "../utils"], function (e, t, n) {
                function i(e, t) {
                    i.__super__.constructor.apply(this, arguments)
                }
                return n.Extend(i, t), i.prototype.render = function () {
                    var e = i.__super__.render.call(this);
                    return e.addClass("select2-selection--multiple"), e.html('<ul class="select2-selection__rendered"></ul>'), e
                }, i.prototype.bind = function (t, n) {
                    var r = this;
                    i.__super__.bind.apply(this, arguments), this.$selection.on("click", function (e) {
                        r.trigger("toggle", {
                            originalEvent: e
                        })
                    }), this.$selection.on("click", ".select2-selection__choice__remove", function (t) {
                        if (!r.options.get("disabled")) {
                            var n = e(this),
                                i = n.parent(),
                                a = i.data("data"),
                                o = e(this).parent().attr("aria-describedby");
                            e("#" + o).remove(), r.trigger("unselect", {
                                originalEvent: t,
                                data: a
                            })
                        }
                    })
                }, i.prototype.clear = function () {
                    this.$selection.find(".select2-selection__rendered").empty()
                }, i.prototype.display = function (e, t) {
                    var n = this.options.get("templateSelection"),
                        i = this.options.get("escapeMarkup");
                    return i(n(e, t))
                }, i.prototype.selectionContainer = function () {
                    var t = e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');
                    return t
                }, i.prototype.update = function (e) {
                    if (this.clear(), 0 !== e.length) {
                        for (var t = [], i = 0; i < e.length; i++) {
                            var r = e[i],
                                a = this.selectionContainer(),
                                o = this.display(r, a);
                            a.append(o), a.prop("title", r.title || r.text), a.data("data", r), t.push(a)
                        }
                        var s = this.$selection.find(".select2-selection__rendered");
                        n.appendMany(s, t)
                    }
                }, i
            }), t.define("select2/selection/placeholder", ["../utils"], function (e) {
                function t(e, t, n) {
                    this.placeholder = this.normalizePlaceholder(n.get("placeholder")), e.call(this, t, n)
                }
                return t.prototype.normalizePlaceholder = function (e, t) {
                    return "string" == typeof t && (t = {
                        id: "",
                        text: t
                    }), t
                }, t.prototype.createPlaceholder = function (e, t) {
                    var n = this.selectionContainer();
                    return n.html(this.display(t)), n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"), n
                }, t.prototype.update = function (e, t) {
                    var n = 1 == t.length && t[0].id != this.placeholder.id,
                        i = t.length > 1;
                    if (i || n) return e.call(this, t);
                    this.clear();
                    var r = this.createPlaceholder(this.placeholder);
                    this.$selection.find(".select2-selection__rendered").append(r)
                }, t
            }), t.define("select2/selection/allowClear", ["jquery", "../keys"], function (e, t) {
                function n() { }
                return n.prototype.bind = function (e, t, n) {
                    var i = this;
                    e.call(this, t, n), null == this.placeholder && this.options.get("debug") && window.console && console.error && console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."), this.$selection.on("mousedown", ".select2-selection__clear", function (e) {
                        i._handleClear(e)
                    }), t.on("keypress", function (e) {
                        i._handleKeyboardClear(e, t)
                    })
                }, n.prototype._handleClear = function (e, t) {
                    if (!this.options.get("disabled")) {
                        var n = this.$selection.find(".select2-selection__clear");
                        if (0 !== n.length) {
                            for (var i = n.data("data"), r = 0; r < i.length; r++) {
                                var a = {
                                    data: i[r]
                                };
                                if (this.trigger("unselect", a), a.prevented) return
                            }
                            this.$element.val(this.placeholder.id).trigger("change"), this.trigger("toggle", {})
                        }
                    }
                }, n.prototype._handleKeyboardClear = function (e, n, i) {
                    i.isOpen() || (n.which == t.DELETE || n.which == t.BACKSPACE) && this._handleClear(n)
                }, n.prototype.update = function (t, n) {
                    if (t.call(this, n), !(this.$selection.find(".select2-selection__placeholder").length > 0 || 0 === n.length)) {
                        var i = e('<span class="select2-selection__clear">&times;</span>');
                        i.data("data", n), this.$selection.find(".select2-selection__rendered").prepend(i)
                    }
                }, n
            }), t.define("select2/selection/search", ["jquery", "../utils", "../keys"], function (e, t, n) {
                function i(e, t, n) {
                    e.call(this, t, n)
                }
                return i.prototype.render = function (t) {
                    var n = e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');
                    this.$searchContainer = n, this.$search = n.find("input");
                    var i = t.call(this);
                    return this._transferTabIndex(), i
                }, i.prototype.bind = function (e, t, i) {
                    var r = this;
                    e.call(this, t, i), t.on("open", function () {
                        r.$search.trigger("focus")
                    }), t.on("close", function () {
                        r.$search.val(""), r.$search.removeAttr("aria-activedescendant"), r.$search.trigger("focus")
                    }), t.on("enable", function () {
                        r.$search.prop("disabled", !1), r._transferTabIndex()
                    }), t.on("disable", function () {
                        r.$search.prop("disabled", !0)
                    }), t.on("focus", function (e) {
                        r.$search.trigger("focus")
                    }), t.on("results:focus", function (e) {
                        r.$search.attr("aria-activedescendant", e.id)
                    }), this.$selection.on("focusin", ".select2-search--inline", function (e) {
                        r.trigger("focus", e)
                    }), this.$selection.on("focusout", ".select2-search--inline", function (e) {
                        r._handleBlur(e)
                    }), this.$selection.on("keydown", ".select2-search--inline", function (e) {
                        e.stopPropagation(), r.trigger("keypress", e), r._keyUpPrevented = e.isDefaultPrevented();
                        var t = e.which;
                        if (t === n.BACKSPACE && "" === r.$search.val()) {
                            var i = r.$searchContainer.prev(".select2-selection__choice");
                            if (i.length > 0) {
                                var a = i.data("data");
                                r.searchRemoveChoice(a), e.preventDefault()
                            }
                        }
                    });
                    var a = document.documentMode,
                        o = a && 11 >= a;
                    this.$selection.on("input.searchcheck", ".select2-search--inline", function (e) {
                        return o ? void r.$selection.off("input.search input.searchcheck") : void r.$selection.off("keyup.search")
                    }), this.$selection.on("keyup.search input.search", ".select2-search--inline", function (e) {
                        if (o && "input" === e.type) return void r.$selection.off("input.search input.searchcheck");
                        var t = e.which;
                        t != n.SHIFT && t != n.CTRL && t != n.ALT && t != n.TAB && r.handleSearch(e)
                    })
                }, i.prototype._transferTabIndex = function (e) {
                    this.$search.attr("tabindex", this.$selection.attr("tabindex")), this.$selection.attr("tabindex", "-1")
                }, i.prototype.createPlaceholder = function (e, t) {
                    this.$search.attr("placeholder", t.text)
                }, i.prototype.update = function (e, t) {
                    var n = this.$search[0] == document.activeElement;
                    this.$search.attr("placeholder", ""), e.call(this, t), this.$selection.find(".select2-selection__rendered").append(this.$searchContainer), this.resizeSearch(), n && this.$search.focus()
                }, i.prototype.handleSearch = function () {
                    if (this.resizeSearch(), !this._keyUpPrevented) {
                        var e = this.$search.val();
                        this.trigger("query", {
                            term: e
                        })
                    }
                    this._keyUpPrevented = !1
                }, i.prototype.searchRemoveChoice = function (e, t) {
                    this.trigger("unselect", {
                        data: t
                    }), this.$search.val(t.text), this.handleSearch()
                }, i.prototype.resizeSearch = function () {
                    this.$search.css("width", "25px");
                    var e = "";
                    if ("" !== this.$search.attr("placeholder")) e = this.$selection.find(".select2-selection__rendered").innerWidth();
                    else {
                        var t = this.$search.val().length + 1;
                        e = .75 * t + "em"
                    }
                    this.$search.css("width", e)
                }, i
            }), t.define("select2/selection/eventRelay", ["jquery"], function (e) {
                function t() { }
                return t.prototype.bind = function (t, n, i) {
                    var r = this,
                        a = ["open", "opening", "close", "closing", "select", "selecting", "unselect", "unselecting"],
                        o = ["opening", "closing", "selecting", "unselecting"];
                    t.call(this, n, i), n.on("*", function (t, n) {
                        if (-1 !== e.inArray(t, a)) {
                            n = n || {};
                            var i = e.Event("select2:" + t, {
                                params: n
                            });
                            r.$element.trigger(i), -1 !== e.inArray(t, o) && (n.prevented = i.isDefaultPrevented())
                        }
                    })
                }, t
            }), t.define("select2/translation", ["jquery", "require"], function (e, t) {
                function n(e) {
                    this.dict = e || {}
                }
                return n.prototype.all = function () {
                    return this.dict
                }, n.prototype.get = function (e) {
                    return this.dict[e]
                }, n.prototype.extend = function (t) {
                    this.dict = e.extend({}, t.all(), this.dict)
                }, n._cache = {}, n.loadPath = function (e) {
                    if (!(e in n._cache)) {
                        var i = t(e);
                        n._cache[e] = i
                    }
                    return new n(n._cache[e])
                }, n
            }), t.define("select2/diacritics", [], function () {
                var e = {
                    "\u24b6": "A",
                    "\uff21": "A",
                    "\xc0": "A",
                    "\xc1": "A",
                    "\xc2": "A",
                    "\u1ea6": "A",
                    "\u1ea4": "A",
                    "\u1eaa": "A",
                    "\u1ea8": "A",
                    "\xc3": "A",
                    "\u0100": "A",
                    "\u0102": "A",
                    "\u1eb0": "A",
                    "\u1eae": "A",
                    "\u1eb4": "A",
                    "\u1eb2": "A",
                    "\u0226": "A",
                    "\u01e0": "A",
                    "\xc4": "A",
                    "\u01de": "A",
                    "\u1ea2": "A",
                    "\xc5": "A",
                    "\u01fa": "A",
                    "\u01cd": "A",
                    "\u0200": "A",
                    "\u0202": "A",
                    "\u1ea0": "A",
                    "\u1eac": "A",
                    "\u1eb6": "A",
                    "\u1e00": "A",
                    "\u0104": "A",
                    "\u023a": "A",
                    "\u2c6f": "A",
                    "\ua732": "AA",
                    "\xc6": "AE",
                    "\u01fc": "AE",
                    "\u01e2": "AE",
                    "\ua734": "AO",
                    "\ua736": "AU",
                    "\ua738": "AV",
                    "\ua73a": "AV",
                    "\ua73c": "AY",
                    "\u24b7": "B",
                    "\uff22": "B",
                    "\u1e02": "B",
                    "\u1e04": "B",
                    "\u1e06": "B",
                    "\u0243": "B",
                    "\u0182": "B",
                    "\u0181": "B",
                    "\u24b8": "C",
                    "\uff23": "C",
                    "\u0106": "C",
                    "\u0108": "C",
                    "\u010a": "C",
                    "\u010c": "C",
                    "\xc7": "C",
                    "\u1e08": "C",
                    "\u0187": "C",
                    "\u023b": "C",
                    "\ua73e": "C",
                    "\u24b9": "D",
                    "\uff24": "D",
                    "\u1e0a": "D",
                    "\u010e": "D",
                    "\u1e0c": "D",
                    "\u1e10": "D",
                    "\u1e12": "D",
                    "\u1e0e": "D",
                    "\u0110": "D",
                    "\u018b": "D",
                    "\u018a": "D",
                    "\u0189": "D",
                    "\ua779": "D",
                    "\u01f1": "DZ",
                    "\u01c4": "DZ",
                    "\u01f2": "Dz",
                    "\u01c5": "Dz",
                    "\u24ba": "E",
                    "\uff25": "E",
                    "\xc8": "E",
                    "\xc9": "E",
                    "\xca": "E",
                    "\u1ec0": "E",
                    "\u1ebe": "E",
                    "\u1ec4": "E",
                    "\u1ec2": "E",
                    "\u1ebc": "E",
                    "\u0112": "E",
                    "\u1e14": "E",
                    "\u1e16": "E",
                    "\u0114": "E",
                    "\u0116": "E",
                    "\xcb": "E",
                    "\u1eba": "E",
                    "\u011a": "E",
                    "\u0204": "E",
                    "\u0206": "E",
                    "\u1eb8": "E",
                    "\u1ec6": "E",
                    "\u0228": "E",
                    "\u1e1c": "E",
                    "\u0118": "E",
                    "\u1e18": "E",
                    "\u1e1a": "E",
                    "\u0190": "E",
                    "\u018e": "E",
                    "\u24bb": "F",
                    "\uff26": "F",
                    "\u1e1e": "F",
                    "\u0191": "F",
                    "\ua77b": "F",
                    "\u24bc": "G",
                    "\uff27": "G",
                    "\u01f4": "G",
                    "\u011c": "G",
                    "\u1e20": "G",
                    "\u011e": "G",
                    "\u0120": "G",
                    "\u01e6": "G",
                    "\u0122": "G",
                    "\u01e4": "G",
                    "\u0193": "G",
                    "\ua7a0": "G",
                    "\ua77d": "G",
                    "\ua77e": "G",
                    "\u24bd": "H",
                    "\uff28": "H",
                    "\u0124": "H",
                    "\u1e22": "H",
                    "\u1e26": "H",
                    "\u021e": "H",
                    "\u1e24": "H",
                    "\u1e28": "H",
                    "\u1e2a": "H",
                    "\u0126": "H",
                    "\u2c67": "H",
                    "\u2c75": "H",
                    "\ua78d": "H",
                    "\u24be": "I",
                    "\uff29": "I",
                    "\xcc": "I",
                    "\xcd": "I",
                    "\xce": "I",
                    "\u0128": "I",
                    "\u012a": "I",
                    "\u012c": "I",
                    "\u0130": "I",
                    "\xcf": "I",
                    "\u1e2e": "I",
                    "\u1ec8": "I",
                    "\u01cf": "I",
                    "\u0208": "I",
                    "\u020a": "I",
                    "\u1eca": "I",
                    "\u012e": "I",
                    "\u1e2c": "I",
                    "\u0197": "I",
                    "\u24bf": "J",
                    "\uff2a": "J",
                    "\u0134": "J",
                    "\u0248": "J",
                    "\u24c0": "K",
                    "\uff2b": "K",
                    "\u1e30": "K",
                    "\u01e8": "K",
                    "\u1e32": "K",
                    "\u0136": "K",
                    "\u1e34": "K",
                    "\u0198": "K",
                    "\u2c69": "K",
                    "\ua740": "K",
                    "\ua742": "K",
                    "\ua744": "K",
                    "\ua7a2": "K",
                    "\u24c1": "L",
                    "\uff2c": "L",
                    "\u013f": "L",
                    "\u0139": "L",
                    "\u013d": "L",
                    "\u1e36": "L",
                    "\u1e38": "L",
                    "\u013b": "L",
                    "\u1e3c": "L",
                    "\u1e3a": "L",
                    "\u0141": "L",
                    "\u023d": "L",
                    "\u2c62": "L",
                    "\u2c60": "L",
                    "\ua748": "L",
                    "\ua746": "L",
                    "\ua780": "L",
                    "\u01c7": "LJ",
                    "\u01c8": "Lj",
                    "\u24c2": "M",
                    "\uff2d": "M",
                    "\u1e3e": "M",
                    "\u1e40": "M",
                    "\u1e42": "M",
                    "\u2c6e": "M",
                    "\u019c": "M",
                    "\u24c3": "N",
                    "\uff2e": "N",
                    "\u01f8": "N",
                    "\u0143": "N",
                    "\xd1": "N",
                    "\u1e44": "N",
                    "\u0147": "N",
                    "\u1e46": "N",
                    "\u0145": "N",
                    "\u1e4a": "N",
                    "\u1e48": "N",
                    "\u0220": "N",
                    "\u019d": "N",
                    "\ua790": "N",
                    "\ua7a4": "N",
                    "\u01ca": "NJ",
                    "\u01cb": "Nj",
                    "\u24c4": "O",
                    "\uff2f": "O",
                    "\xd2": "O",
                    "\xd3": "O",
                    "\xd4": "O",
                    "\u1ed2": "O",
                    "\u1ed0": "O",
                    "\u1ed6": "O",
                    "\u1ed4": "O",
                    "\xd5": "O",
                    "\u1e4c": "O",
                    "\u022c": "O",
                    "\u1e4e": "O",
                    "\u014c": "O",
                    "\u1e50": "O",
                    "\u1e52": "O",
                    "\u014e": "O",
                    "\u022e": "O",
                    "\u0230": "O",
                    "\xd6": "O",
                    "\u022a": "O",
                    "\u1ece": "O",
                    "\u0150": "O",
                    "\u01d1": "O",
                    "\u020c": "O",
                    "\u020e": "O",
                    "\u01a0": "O",
                    "\u1edc": "O",
                    "\u1eda": "O",
                    "\u1ee0": "O",
                    "\u1ede": "O",
                    "\u1ee2": "O",
                    "\u1ecc": "O",
                    "\u1ed8": "O",
                    "\u01ea": "O",
                    "\u01ec": "O",
                    "\xd8": "O",
                    "\u01fe": "O",
                    "\u0186": "O",
                    "\u019f": "O",
                    "\ua74a": "O",
                    "\ua74c": "O",
                    "\u01a2": "OI",
                    "\ua74e": "OO",
                    "\u0222": "OU",
                    "\u24c5": "P",
                    "\uff30": "P",
                    "\u1e54": "P",
                    "\u1e56": "P",
                    "\u01a4": "P",
                    "\u2c63": "P",
                    "\ua750": "P",
                    "\ua752": "P",
                    "\ua754": "P",
                    "\u24c6": "Q",
                    "\uff31": "Q",
                    "\ua756": "Q",
                    "\ua758": "Q",
                    "\u024a": "Q",
                    "\u24c7": "R",
                    "\uff32": "R",
                    "\u0154": "R",
                    "\u1e58": "R",
                    "\u0158": "R",
                    "\u0210": "R",
                    "\u0212": "R",
                    "\u1e5a": "R",
                    "\u1e5c": "R",
                    "\u0156": "R",
                    "\u1e5e": "R",
                    "\u024c": "R",
                    "\u2c64": "R",
                    "\ua75a": "R",
                    "\ua7a6": "R",
                    "\ua782": "R",
                    "\u24c8": "S",
                    "\uff33": "S",
                    "\u1e9e": "S",
                    "\u015a": "S",
                    "\u1e64": "S",
                    "\u015c": "S",
                    "\u1e60": "S",
                    "\u0160": "S",
                    "\u1e66": "S",
                    "\u1e62": "S",
                    "\u1e68": "S",
                    "\u0218": "S",
                    "\u015e": "S",
                    "\u2c7e": "S",
                    "\ua7a8": "S",
                    "\ua784": "S",
                    "\u24c9": "T",
                    "\uff34": "T",
                    "\u1e6a": "T",
                    "\u0164": "T",
                    "\u1e6c": "T",
                    "\u021a": "T",
                    "\u0162": "T",
                    "\u1e70": "T",
                    "\u1e6e": "T",
                    "\u0166": "T",
                    "\u01ac": "T",
                    "\u01ae": "T",
                    "\u023e": "T",
                    "\ua786": "T",
                    "\ua728": "TZ",
                    "\u24ca": "U",
                    "\uff35": "U",
                    "\xd9": "U",
                    "\xda": "U",
                    "\xdb": "U",
                    "\u0168": "U",
                    "\u1e78": "U",
                    "\u016a": "U",
                    "\u1e7a": "U",
                    "\u016c": "U",
                    "\xdc": "U",
                    "\u01db": "U",
                    "\u01d7": "U",
                    "\u01d5": "U",
                    "\u01d9": "U",
                    "\u1ee6": "U",
                    "\u016e": "U",
                    "\u0170": "U",
                    "\u01d3": "U",
                    "\u0214": "U",
                    "\u0216": "U",
                    "\u01af": "U",
                    "\u1eea": "U",
                    "\u1ee8": "U",
                    "\u1eee": "U",
                    "\u1eec": "U",
                    "\u1ef0": "U",
                    "\u1ee4": "U",
                    "\u1e72": "U",
                    "\u0172": "U",
                    "\u1e76": "U",
                    "\u1e74": "U",
                    "\u0244": "U",
                    "\u24cb": "V",
                    "\uff36": "V",
                    "\u1e7c": "V",
                    "\u1e7e": "V",
                    "\u01b2": "V",
                    "\ua75e": "V",
                    "\u0245": "V",
                    "\ua760": "VY",
                    "\u24cc": "W",
                    "\uff37": "W",
                    "\u1e80": "W",
                    "\u1e82": "W",
                    "\u0174": "W",
                    "\u1e86": "W",
                    "\u1e84": "W",
                    "\u1e88": "W",
                    "\u2c72": "W",
                    "\u24cd": "X",
                    "\uff38": "X",
                    "\u1e8a": "X",
                    "\u1e8c": "X",
                    "\u24ce": "Y",
                    "\uff39": "Y",
                    "\u1ef2": "Y",
                    "\xdd": "Y",
                    "\u0176": "Y",
                    "\u1ef8": "Y",
                    "\u0232": "Y",
                    "\u1e8e": "Y",
                    "\u0178": "Y",
                    "\u1ef6": "Y",
                    "\u1ef4": "Y",
                    "\u01b3": "Y",
                    "\u024e": "Y",
                    "\u1efe": "Y",
                    "\u24cf": "Z",
                    "\uff3a": "Z",
                    "\u0179": "Z",
                    "\u1e90": "Z",
                    "\u017b": "Z",
                    "\u017d": "Z",
                    "\u1e92": "Z",
                    "\u1e94": "Z",
                    "\u01b5": "Z",
                    "\u0224": "Z",
                    "\u2c7f": "Z",
                    "\u2c6b": "Z",
                    "\ua762": "Z",
                    "\u24d0": "a",
                    "\uff41": "a",
                    "\u1e9a": "a",
                    "\xe0": "a",
                    "\xe1": "a",
                    "\xe2": "a",
                    "\u1ea7": "a",
                    "\u1ea5": "a",
                    "\u1eab": "a",
                    "\u1ea9": "a",
                    "\xe3": "a",
                    "\u0101": "a",
                    "\u0103": "a",
                    "\u1eb1": "a",
                    "\u1eaf": "a",
                    "\u1eb5": "a",
                    "\u1eb3": "a",
                    "\u0227": "a",
                    "\u01e1": "a",
                    "\xe4": "a",
                    "\u01df": "a",
                    "\u1ea3": "a",
                    "\xe5": "a",
                    "\u01fb": "a",
                    "\u01ce": "a",
                    "\u0201": "a",
                    "\u0203": "a",
                    "\u1ea1": "a",
                    "\u1ead": "a",
                    "\u1eb7": "a",
                    "\u1e01": "a",
                    "\u0105": "a",
                    "\u2c65": "a",
                    "\u0250": "a",
                    "\ua733": "aa",
                    "\xe6": "ae",
                    "\u01fd": "ae",
                    "\u01e3": "ae",
                    "\ua735": "ao",
                    "\ua737": "au",
                    "\ua739": "av",
                    "\ua73b": "av",
                    "\ua73d": "ay",
                    "\u24d1": "b",
                    "\uff42": "b",
                    "\u1e03": "b",
                    "\u1e05": "b",
                    "\u1e07": "b",
                    "\u0180": "b",
                    "\u0183": "b",
                    "\u0253": "b",
                    "\u24d2": "c",
                    "\uff43": "c",
                    "\u0107": "c",
                    "\u0109": "c",
                    "\u010b": "c",
                    "\u010d": "c",
                    "\xe7": "c",
                    "\u1e09": "c",
                    "\u0188": "c",
                    "\u023c": "c",
                    "\ua73f": "c",
                    "\u2184": "c",
                    "\u24d3": "d",
                    "\uff44": "d",
                    "\u1e0b": "d",
                    "\u010f": "d",
                    "\u1e0d": "d",
                    "\u1e11": "d",
                    "\u1e13": "d",
                    "\u1e0f": "d",
                    "\u0111": "d",
                    "\u018c": "d",
                    "\u0256": "d",
                    "\u0257": "d",
                    "\ua77a": "d",
                    "\u01f3": "dz",
                    "\u01c6": "dz",
                    "\u24d4": "e",
                    "\uff45": "e",
                    "\xe8": "e",
                    "\xe9": "e",
                    "\xea": "e",
                    "\u1ec1": "e",
                    "\u1ebf": "e",
                    "\u1ec5": "e",
                    "\u1ec3": "e",
                    "\u1ebd": "e",
                    "\u0113": "e",
                    "\u1e15": "e",
                    "\u1e17": "e",
                    "\u0115": "e",
                    "\u0117": "e",
                    "\xeb": "e",
                    "\u1ebb": "e",
                    "\u011b": "e",
                    "\u0205": "e",
                    "\u0207": "e",
                    "\u1eb9": "e",
                    "\u1ec7": "e",
                    "\u0229": "e",
                    "\u1e1d": "e",
                    "\u0119": "e",
                    "\u1e19": "e",
                    "\u1e1b": "e",
                    "\u0247": "e",
                    "\u025b": "e",
                    "\u01dd": "e",
                    "\u24d5": "f",
                    "\uff46": "f",
                    "\u1e1f": "f",
                    "\u0192": "f",
                    "\ua77c": "f",
                    "\u24d6": "g",
                    "\uff47": "g",
                    "\u01f5": "g",
                    "\u011d": "g",
                    "\u1e21": "g",
                    "\u011f": "g",
                    "\u0121": "g",
                    "\u01e7": "g",
                    "\u0123": "g",
                    "\u01e5": "g",
                    "\u0260": "g",
                    "\ua7a1": "g",
                    "\u1d79": "g",
                    "\ua77f": "g",
                    "\u24d7": "h",
                    "\uff48": "h",
                    "\u0125": "h",
                    "\u1e23": "h",
                    "\u1e27": "h",
                    "\u021f": "h",
                    "\u1e25": "h",
                    "\u1e29": "h",
                    "\u1e2b": "h",
                    "\u1e96": "h",
                    "\u0127": "h",
                    "\u2c68": "h",
                    "\u2c76": "h",
                    "\u0265": "h",
                    "\u0195": "hv",
                    "\u24d8": "i",
                    "\uff49": "i",
                    "\xec": "i",
                    "\xed": "i",
                    "\xee": "i",
                    "\u0129": "i",
                    "\u012b": "i",
                    "\u012d": "i",
                    "\xef": "i",
                    "\u1e2f": "i",
                    "\u1ec9": "i",
                    "\u01d0": "i",
                    "\u0209": "i",
                    "\u020b": "i",
                    "\u1ecb": "i",
                    "\u012f": "i",
                    "\u1e2d": "i",
                    "\u0268": "i",
                    "\u0131": "i",
                    "\u24d9": "j",
                    "\uff4a": "j",
                    "\u0135": "j",
                    "\u01f0": "j",
                    "\u0249": "j",
                    "\u24da": "k",
                    "\uff4b": "k",
                    "\u1e31": "k",
                    "\u01e9": "k",
                    "\u1e33": "k",
                    "\u0137": "k",
                    "\u1e35": "k",
                    "\u0199": "k",
                    "\u2c6a": "k",
                    "\ua741": "k",
                    "\ua743": "k",
                    "\ua745": "k",
                    "\ua7a3": "k",
                    "\u24db": "l",
                    "\uff4c": "l",
                    "\u0140": "l",
                    "\u013a": "l",
                    "\u013e": "l",
                    "\u1e37": "l",
                    "\u1e39": "l",
                    "\u013c": "l",
                    "\u1e3d": "l",
                    "\u1e3b": "l",
                    "\u017f": "l",
                    "\u0142": "l",
                    "\u019a": "l",
                    "\u026b": "l",
                    "\u2c61": "l",
                    "\ua749": "l",
                    "\ua781": "l",
                    "\ua747": "l",
                    "\u01c9": "lj",
                    "\u24dc": "m",
                    "\uff4d": "m",
                    "\u1e3f": "m",
                    "\u1e41": "m",
                    "\u1e43": "m",
                    "\u0271": "m",
                    "\u026f": "m",
                    "\u24dd": "n",
                    "\uff4e": "n",
                    "\u01f9": "n",
                    "\u0144": "n",
                    "\xf1": "n",
                    "\u1e45": "n",
                    "\u0148": "n",
                    "\u1e47": "n",
                    "\u0146": "n",
                    "\u1e4b": "n",
                    "\u1e49": "n",
                    "\u019e": "n",
                    "\u0272": "n",
                    "\u0149": "n",
                    "\ua791": "n",
                    "\ua7a5": "n",
                    "\u01cc": "nj",
                    "\u24de": "o",
                    "\uff4f": "o",
                    "\xf2": "o",
                    "\xf3": "o",
                    "\xf4": "o",
                    "\u1ed3": "o",
                    "\u1ed1": "o",
                    "\u1ed7": "o",
                    "\u1ed5": "o",
                    "\xf5": "o",
                    "\u1e4d": "o",
                    "\u022d": "o",
                    "\u1e4f": "o",
                    "\u014d": "o",
                    "\u1e51": "o",
                    "\u1e53": "o",
                    "\u014f": "o",
                    "\u022f": "o",
                    "\u0231": "o",
                    "\xf6": "o",
                    "\u022b": "o",
                    "\u1ecf": "o",
                    "\u0151": "o",
                    "\u01d2": "o",
                    "\u020d": "o",
                    "\u020f": "o",
                    "\u01a1": "o",
                    "\u1edd": "o",
                    "\u1edb": "o",
                    "\u1ee1": "o",
                    "\u1edf": "o",
                    "\u1ee3": "o",
                    "\u1ecd": "o",
                    "\u1ed9": "o",
                    "\u01eb": "o",
                    "\u01ed": "o",
                    "\xf8": "o",
                    "\u01ff": "o",
                    "\u0254": "o",
                    "\ua74b": "o",
                    "\ua74d": "o",
                    "\u0275": "o",
                    "\u01a3": "oi",
                    "\u0223": "ou",
                    "\ua74f": "oo",
                    "\u24df": "p",
                    "\uff50": "p",
                    "\u1e55": "p",
                    "\u1e57": "p",
                    "\u01a5": "p",
                    "\u1d7d": "p",
                    "\ua751": "p",
                    "\ua753": "p",
                    "\ua755": "p",
                    "\u24e0": "q",
                    "\uff51": "q",
                    "\u024b": "q",
                    "\ua757": "q",
                    "\ua759": "q",
                    "\u24e1": "r",
                    "\uff52": "r",
                    "\u0155": "r",
                    "\u1e59": "r",
                    "\u0159": "r",
                    "\u0211": "r",
                    "\u0213": "r",
                    "\u1e5b": "r",
                    "\u1e5d": "r",
                    "\u0157": "r",
                    "\u1e5f": "r",
                    "\u024d": "r",
                    "\u027d": "r",
                    "\ua75b": "r",
                    "\ua7a7": "r",
                    "\ua783": "r",
                    "\u24e2": "s",
                    "\uff53": "s",
                    "\xdf": "s",
                    "\u015b": "s",
                    "\u1e65": "s",
                    "\u015d": "s",
                    "\u1e61": "s",
                    "\u0161": "s",
                    "\u1e67": "s",
                    "\u1e63": "s",
                    "\u1e69": "s",
                    "\u0219": "s",
                    "\u015f": "s",
                    "\u023f": "s",
                    "\ua7a9": "s",
                    "\ua785": "s",
                    "\u1e9b": "s",
                    "\u24e3": "t",
                    "\uff54": "t",
                    "\u1e6b": "t",
                    "\u1e97": "t",
                    "\u0165": "t",
                    "\u1e6d": "t",
                    "\u021b": "t",
                    "\u0163": "t",
                    "\u1e71": "t",
                    "\u1e6f": "t",
                    "\u0167": "t",
                    "\u01ad": "t",
                    "\u0288": "t",
                    "\u2c66": "t",
                    "\ua787": "t",
                    "\ua729": "tz",
                    "\u24e4": "u",
                    "\uff55": "u",
                    "\xf9": "u",
                    "\xfa": "u",
                    "\xfb": "u",
                    "\u0169": "u",
                    "\u1e79": "u",
                    "\u016b": "u",
                    "\u1e7b": "u",
                    "\u016d": "u",
                    "\xfc": "u",
                    "\u01dc": "u",
                    "\u01d8": "u",
                    "\u01d6": "u",
                    "\u01da": "u",
                    "\u1ee7": "u",
                    "\u016f": "u",
                    "\u0171": "u",
                    "\u01d4": "u",
                    "\u0215": "u",
                    "\u0217": "u",
                    "\u01b0": "u",
                    "\u1eeb": "u",
                    "\u1ee9": "u",
                    "\u1eef": "u",
                    "\u1eed": "u",
                    "\u1ef1": "u",
                    "\u1ee5": "u",
                    "\u1e73": "u",
                    "\u0173": "u",
                    "\u1e77": "u",
                    "\u1e75": "u",
                    "\u0289": "u",
                    "\u24e5": "v",
                    "\uff56": "v",
                    "\u1e7d": "v",
                    "\u1e7f": "v",
                    "\u028b": "v",
                    "\ua75f": "v",
                    "\u028c": "v",
                    "\ua761": "vy",
                    "\u24e6": "w",
                    "\uff57": "w",
                    "\u1e81": "w",
                    "\u1e83": "w",
                    "\u0175": "w",
                    "\u1e87": "w",
                    "\u1e85": "w",
                    "\u1e98": "w",
                    "\u1e89": "w",
                    "\u2c73": "w",
                    "\u24e7": "x",
                    "\uff58": "x",
                    "\u1e8b": "x",
                    "\u1e8d": "x",
                    "\u24e8": "y",
                    "\uff59": "y",
                    "\u1ef3": "y",
                    "\xfd": "y",
                    "\u0177": "y",
                    "\u1ef9": "y",
                    "\u0233": "y",
                    "\u1e8f": "y",
                    "\xff": "y",
                    "\u1ef7": "y",
                    "\u1e99": "y",
                    "\u1ef5": "y",
                    "\u01b4": "y",
                    "\u024f": "y",
                    "\u1eff": "y",
                    "\u24e9": "z",
                    "\uff5a": "z",
                    "\u017a": "z",
                    "\u1e91": "z",
                    "\u017c": "z",
                    "\u017e": "z",
                    "\u1e93": "z",
                    "\u1e95": "z",
                    "\u01b6": "z",
                    "\u0225": "z",
                    "\u0240": "z",
                    "\u2c6c": "z",
                    "\ua763": "z",
                    "\u0386": "\u0391",
                    "\u0388": "\u0395",
                    "\u0389": "\u0397",
                    "\u038a": "\u0399",
                    "\u03aa": "\u0399",
                    "\u038c": "\u039f",
                    "\u038e": "\u03a5",
                    "\u03ab": "\u03a5",
                    "\u038f": "\u03a9",
                    "\u03ac": "\u03b1",
                    "\u03ad": "\u03b5",
                    "\u03ae": "\u03b7",
                    "\u03af": "\u03b9",
                    "\u03ca": "\u03b9",
                    "\u0390": "\u03b9",
                    "\u03cc": "\u03bf",
                    "\u03cd": "\u03c5",
                    "\u03cb": "\u03c5",
                    "\u03b0": "\u03c5",
                    "\u03c9": "\u03c9",
                    "\u03c2": "\u03c3"
                };
                return e
            }), t.define("select2/data/base", ["../utils"], function (e) {
                function t(e, n) {
                    t.__super__.constructor.call(this)
                }
                return e.Extend(t, e.Observable), t.prototype.current = function (e) {
                    throw new Error("The `current` method must be defined in child classes.")
                }, t.prototype.query = function (e, t) {
                    throw new Error("The `query` method must be defined in child classes.")
                }, t.prototype.bind = function (e, t) { }, t.prototype.destroy = function () { }, t.prototype.generateResultId = function (t, n) {
                    var i = t.id + "-result-";
                    return i += e.generateChars(4), i += null != n.id ? "-" + n.id.toString() : "-" + e.generateChars(4)
                }, t
            }), t.define("select2/data/select", ["./base", "../utils", "jquery"], function (e, t, n) {
                function i(e, t) {
                    this.$element = e, this.options = t, i.__super__.constructor.call(this)
                }
                return t.Extend(i, e), i.prototype.current = function (e) {
                    var t = [],
                        i = this;
                    this.$element.find(":selected").each(function () {
                        var e = n(this),
                            r = i.item(e);
                        t.push(r)
                    }), e(t)
                }, i.prototype.select = function (e) {
                    var t = this;
                    if (e.selected = !0, n(e.element).is("option")) return e.element.selected = !0, void this.$element.trigger("change");
                    if (this.$element.prop("multiple")) this.current(function (i) {
                        var r = [];
                        e = [e], e.push.apply(e, i);
                        for (var a = 0; a < e.length; a++) {
                            var o = e[a].id; - 1 === n.inArray(o, r) && r.push(o)
                        }
                        t.$element.val(r), t.$element.trigger("change")
                    });
                    else {
                        var i = e.id;
                        this.$element.val(i), this.$element.trigger("change")
                    }
                }, i.prototype.unselect = function (e) {
                    var t = this;
                    if (this.$element.prop("multiple")) return e.selected = !1, n(e.element).is("option") ? (e.element.selected = !1, void this.$element.trigger("change")) : void this.current(function (i) {
                        for (var r = [], a = 0; a < i.length; a++) {
                            var o = i[a].id;
                            o !== e.id.toString() && -1 === n.inArray(o, r) && r.push(o)
                        }
                        t.$element.val(r), t.$element.trigger("change")
                    })
                }, i.prototype.bind = function (e, t) {
                    var n = this;
                    this.container = e, e.on("select", function (e) {
                        n.select(e.data)
                    }), e.on("unselect", function (e) {
                        n.unselect(e.data)
                    })
                }, i.prototype.destroy = function () {
                    this.$element.find("*").each(function () {
                        n.removeData(this, "data")
                    })
                }, i.prototype.query = function (e, t) {
                    var i = [],
                        r = this,
                        a = this.$element.children();
                    a.each(function () {
                        var t = n(this);
                        if (t.is("option") || t.is("optgroup")) {
                            var a = r.item(t),
                                o = r.matches(e, a);
                            null !== o && i.push(o)
                        }
                    }), t({
                        results: i
                    })
                }, i.prototype.addOptions = function (e) {
                    t.appendMany(this.$element, e)
                }, i.prototype.option = function (e) {
                    var t;
                    e.children ? (t = document.createElement("optgroup"), t.label = e.text) : (t = document.createElement("option"), void 0 !== t.textContent ? t.textContent = e.text : t.innerText = e.text), void 0 !== e.id && (t.value = e.id), e.disabled && (t.disabled = !0), e.selected && (t.selected = !0), e.title && (t.title = e.title);
                    var i = n(t),
                        r = this._normalizeItem(e);
                    return r.element = t, n.data(t, "data", r), i
                }, i.prototype.item = function (e) {
                    var t = {};
                    if (t = n.data(e[0], "data"), null != t) return t;
                    if (e.is("option")) t = {
                        id: e.val(),
                        text: e.text(),
                        disabled: e.prop("disabled"),
                        selected: e.prop("selected"),
                        title: e.prop("title")
                    };
                    else if (e.is("optgroup")) {
                        t = {
                            text: e.prop("label"),
                            children: [],
                            title: e.prop("title")
                        };
                        for (var i = e.children("option"), r = [], a = 0; a < i.length; a++) {
                            var o = n(i[a]),
                                s = this.item(o);
                            r.push(s)
                        }
                        t.children = r
                    }
                    return t = this._normalizeItem(t), t.element = e[0], n.data(e[0], "data", t), t
                }, i.prototype._normalizeItem = function (e) {
                    n.isPlainObject(e) || (e = {
                        id: e,
                        text: e
                    }), e = n.extend({}, {
                        text: ""
                    }, e);
                    var t = {
                        selected: !1,
                        disabled: !1
                    };
                    return null != e.id && (e.id = e.id.toString()), null != e.text && (e.text = e.text.toString()), null == e._resultId && e.id && null != this.container && (e._resultId = this.generateResultId(this.container, e)), n.extend({}, t, e)
                }, i.prototype.matches = function (e, t) {
                    var n = this.options.get("matcher");
                    return n(e, t)
                }, i
            }), t.define("select2/data/array", ["./select", "../utils", "jquery"], function (e, t, n) {
                function i(e, t) {
                    var n = t.get("data") || [];
                    i.__super__.constructor.call(this, e, t), this.addOptions(this.convertToOptions(n))
                }
                return t.Extend(i, e), i.prototype.select = function (e) {
                    var t = this.$element.find("option").filter(function (t, n) {
                        return n.value == e.id.toString()
                    });
                    0 === t.length && (t = this.option(e), this.addOptions(t)), i.__super__.select.call(this, e)
                }, i.prototype.convertToOptions = function (e) {
                    function i(e) {
                        return function () {
                            return n(this).val() == e.id
                        }
                    }
                    for (var r = this, a = this.$element.find("option"), o = a.map(function () {
                        return r.item(n(this)).id
                    }).get(), s = [], l = 0; l < e.length; l++) {
                        var c = this._normalizeItem(e[l]);
                        if (n.inArray(c.id, o) >= 0) {
                            var u = a.filter(i(c)),
                                d = this.item(u),
                                h = n.extend(!0, {}, c, d),
                                f = this.option(h);
                            u.replaceWith(f)
                        } else {
                            var p = this.option(c);
                            if (c.children) {
                                var m = this.convertToOptions(c.children);
                                t.appendMany(p, m)
                            }
                            s.push(p)
                        }
                    }
                    return s
                }, i
            }), t.define("select2/data/ajax", ["./array", "../utils", "jquery"], function (e, t, n) {
                function i(e, t) {
                    this.ajaxOptions = this._applyDefaults(t.get("ajax")), null != this.ajaxOptions.processResults && (this.processResults = this.ajaxOptions.processResults), i.__super__.constructor.call(this, e, t)
                }
                return t.Extend(i, e), i.prototype._applyDefaults = function (e) {
                    var t = {
                        data: function (e) {
                            return n.extend({}, e, {
                                q: e.term
                            })
                        },
                        transport: function (e, t, i) {
                            var r = n.ajax(e);
                            return r.then(t), r.fail(i), r
                        }
                    };
                    return n.extend({}, t, e, !0)
                }, i.prototype.processResults = function (e) {
                    return e
                }, i.prototype.query = function (e, t) {
                    function i() {
                        var i = a.transport(a, function (i) {
                            var a = r.processResults(i, e);
                            r.options.get("debug") && window.console && console.error && (a && a.results && n.isArray(a.results) || console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")), t(a)
                        }, function () {
                            i.status && "0" === i.status || r.trigger("results:message", {
                                message: "errorLoading"
                            })
                        });
                        r._request = i
                    }
                    var r = this;
                    null != this._request && (n.isFunction(this._request.abort) && this._request.abort(), this._request = null);
                    var a = n.extend({
                        type: "GET"
                    }, this.ajaxOptions);
                    "function" == typeof a.url && (a.url = a.url.call(this.$element, e)), "function" == typeof a.data && (a.data = a.data.call(this.$element, e)), this.ajaxOptions.delay && null != e.term ? (this._queryTimeout && window.clearTimeout(this._queryTimeout), this._queryTimeout = window.setTimeout(i, this.ajaxOptions.delay)) : i()
                }, i
            }), t.define("select2/data/tags", ["jquery"], function (e) {
                function t(t, n, i) {
                    var r = i.get("tags"),
                        a = i.get("createTag");
                    void 0 !== a && (this.createTag = a);
                    var o = i.get("insertTag");
                    if (void 0 !== o && (this.insertTag = o), t.call(this, n, i), e.isArray(r))
                        for (var s = 0; s < r.length; s++) {
                            var l = r[s],
                                c = this._normalizeItem(l),
                                u = this.option(c);
                            this.$element.append(u)
                        }
                }
                return t.prototype.query = function (e, t, n) {
                    function i(e, a) {
                        for (var o = e.results, s = 0; s < o.length; s++) {
                            var l = o[s],
                                c = null != l.children && !i({
                                    results: l.children
                                }, !0),
                                u = (l.text || "").toUpperCase(),
                                d = (t.term || "").toUpperCase(),
                                h = u === d;
                            if (h || c) return a ? !1 : (e.data = o, void n(e))
                        }
                        if (a) return !0;
                        var f = r.createTag(t);
                        if (null != f) {
                            var p = r.option(f);
                            p.attr("data-select2-tag", !0), r.addOptions([p]), r.insertTag(o, f)
                        }
                        e.results = o, n(e)
                    }
                    var r = this;
                    return this._removeOldTags(), null == t.term || null != t.page ? void e.call(this, t, n) : void e.call(this, t, i)
                }, t.prototype.createTag = function (t, n) {
                    var i = e.trim(n.term);
                    return "" === i ? null : {
                        id: i,
                        text: i
                    }
                }, t.prototype.insertTag = function (e, t, n) {
                    t.unshift(n)
                }, t.prototype._removeOldTags = function (t) {
                    var n = (this._lastTag, this.$element.find("option[data-select2-tag]"));
                    n.each(function () {
                        this.selected || e(this).remove()
                    })
                }, t
            }), t.define("select2/data/tokenizer", ["jquery"], function (e) {
                function t(e, t, n) {
                    var i = n.get("tokenizer");
                    void 0 !== i && (this.tokenizer = i), e.call(this, t, n)
                }
                return t.prototype.bind = function (e, t, n) {
                    e.call(this, t, n), this.$search = t.dropdown.$search || t.selection.$search || n.find(".select2-search__field")
                }, t.prototype.query = function (t, n, i) {
                    function r(t) {
                        var n = o._normalizeItem(t),
                            i = o.$element.find("option").filter(function () {
                                return e(this).val() === n.id
                            });
                        if (!i.length) {
                            var r = o.option(n);
                            r.attr("data-select2-tag", !0), o._removeOldTags(), o.addOptions([r])
                        }
                        a(n)
                    }

                    function a(e) {
                        o.trigger("select", {
                            data: e
                        })
                    }
                    var o = this;
                    n.term = n.term || "";
                    var s = this.tokenizer(n, this.options, r);
                    s.term !== n.term && (this.$search.length && (this.$search.val(s.term), this.$search.focus()), n.term = s.term), t.call(this, n, i)
                }, t.prototype.tokenizer = function (t, n, i, r) {
                    for (var a = i.get("tokenSeparators") || [], o = n.term, s = 0, l = this.createTag || function (e) {
                        return {
                            id: e.term,
                            text: e.term
                        }
                    }; s < o.length;) {
                        var c = o[s];
                        if (-1 !== e.inArray(c, a)) {
                            var u = o.substr(0, s),
                                d = e.extend({}, n, {
                                    term: u
                                }),
                                h = l(d);
                            null != h ? (r(h), o = o.substr(s + 1) || "", s = 0) : s++
                        } else s++
                    }
                    return {
                        term: o
                    }
                }, t
            }), t.define("select2/data/minimumInputLength", [], function () {
                function e(e, t, n) {
                    this.minimumInputLength = n.get("minimumInputLength"), e.call(this, t, n)
                }
                return e.prototype.query = function (e, t, n) {
                    return t.term = t.term || "", t.term.length < this.minimumInputLength ? void this.trigger("results:message", {
                        message: "inputTooShort",
                        args: {
                            minimum: this.minimumInputLength,
                            input: t.term,
                            params: t
                        }
                    }) : void e.call(this, t, n)
                }, e
            }), t.define("select2/data/maximumInputLength", [], function () {
                function e(e, t, n) {
                    this.maximumInputLength = n.get("maximumInputLength"), e.call(this, t, n)
                }
                return e.prototype.query = function (e, t, n) {
                    return t.term = t.term || "", this.maximumInputLength > 0 && t.term.length > this.maximumInputLength ? void this.trigger("results:message", {
                        message: "inputTooLong",
                        args: {
                            maximum: this.maximumInputLength,
                            input: t.term,
                            params: t
                        }
                    }) : void e.call(this, t, n)
                }, e
            }), t.define("select2/data/maximumSelectionLength", [], function () {
                function e(e, t, n) {
                    this.maximumSelectionLength = n.get("maximumSelectionLength"), e.call(this, t, n)
                }
                return e.prototype.query = function (e, t, n) {
                    var i = this;
                    this.current(function (r) {
                        var a = null != r ? r.length : 0;
                        return i.maximumSelectionLength > 0 && a >= i.maximumSelectionLength ? void i.trigger("results:message", {
                            message: "maximumSelected",
                            args: {
                                maximum: i.maximumSelectionLength
                            }
                        }) : void e.call(i, t, n)
                    })
                }, e
            }), t.define("select2/dropdown", ["jquery", "./utils"], function (e, t) {
                function n(e, t) {
                    this.$element = e, this.options = t, n.__super__.constructor.call(this)
                }
                return t.Extend(n, t.Observable), n.prototype.render = function () {
                    var t = e('<span class="select2-dropdown"><span class="select2-results"></span></span>');
                    return t.attr("dir", this.options.get("dir")), this.$dropdown = t, t
                }, n.prototype.bind = function () { }, n.prototype.position = function (e, t) { }, n.prototype.destroy = function () {
                    this.$dropdown.remove()
                }, n
            }), t.define("select2/dropdown/search", ["jquery", "../utils"], function (e, t) {
                function n() { }
                return n.prototype.render = function (t) {
                    var n = t.call(this),
                        i = e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');
                    return this.$searchContainer = i, this.$search = i.find("input"), n.prepend(i), n
                }, n.prototype.bind = function (t, n, i) {
                    var r = this;
                    t.call(this, n, i), this.$search.on("keydown", function (e) {
                        r.trigger("keypress", e), r._keyUpPrevented = e.isDefaultPrevented()
                    }), this.$search.on("input", function (t) {
                        e(this).off("keyup")
                    }), this.$search.on("keyup input", function (e) {
                        r.handleSearch(e)
                    }), n.on("open", function () {
                        r.$search.attr("tabindex", 0), r.$search.focus(), window.setTimeout(function () {
                            r.$search.focus()
                        }, 0)
                    }), n.on("close", function () {
                        r.$search.attr("tabindex", -1), r.$search.val("")
                    }), n.on("focus", function () {
                        n.isOpen() || r.$search.focus()
                    }), n.on("results:all", function (e) {
                        if (null == e.query.term || "" === e.query.term) {
                            var t = r.showSearch(e);
                            t ? r.$searchContainer.removeClass("select2-search--hide") : r.$searchContainer.addClass("select2-search--hide")
                        }
                    })
                }, n.prototype.handleSearch = function (e) {
                    if (!this._keyUpPrevented) {
                        var t = this.$search.val();
                        this.trigger("query", {
                            term: t
                        })
                    }
                    this._keyUpPrevented = !1
                }, n.prototype.showSearch = function (e, t) {
                    return !0
                }, n
            }), t.define("select2/dropdown/hidePlaceholder", [], function () {
                function e(e, t, n, i) {
                    this.placeholder = this.normalizePlaceholder(n.get("placeholder")), e.call(this, t, n, i)
                }
                return e.prototype.append = function (e, t) {
                    t.results = this.removePlaceholder(t.results), e.call(this, t)
                }, e.prototype.normalizePlaceholder = function (e, t) {
                    return "string" == typeof t && (t = {
                        id: "",
                        text: t
                    }), t
                }, e.prototype.removePlaceholder = function (e, t) {
                    for (var n = t.slice(0), i = t.length - 1; i >= 0; i--) {
                        var r = t[i];
                        this.placeholder.id === r.id && n.splice(i, 1)
                    }
                    return n
                }, e
            }), t.define("select2/dropdown/infiniteScroll", ["jquery"], function (e) {
                function t(e, t, n, i) {
                    this.lastParams = {}, e.call(this, t, n, i), this.$loadingMore = this.createLoadingMore(), this.loading = !1
                }
                return t.prototype.append = function (e, t) {
                    this.$loadingMore.remove(), this.loading = !1, e.call(this, t), this.showLoadingMore(t) && this.$results.append(this.$loadingMore)
                }, t.prototype.bind = function (t, n, i) {
                    var r = this;
                    t.call(this, n, i), n.on("query", function (e) {
                        r.lastParams = e, r.loading = !0
                    }), n.on("query:append", function (e) {
                        r.lastParams = e, r.loading = !0
                    }), this.$results.on("scroll", function () {
                        var t = e.contains(document.documentElement, r.$loadingMore[0]);
                        if (!r.loading && t) {
                            var n = r.$results.offset().top + r.$results.outerHeight(!1),
                                i = r.$loadingMore.offset().top + r.$loadingMore.outerHeight(!1);
                            n + 50 >= i && r.loadMore()
                        }
                    })
                }, t.prototype.loadMore = function () {
                    this.loading = !0;
                    var t = e.extend({}, {
                        page: 1
                    }, this.lastParams);
                    t.page++, this.trigger("query:append", t)
                }, t.prototype.showLoadingMore = function (e, t) {
                    return t.pagination && t.pagination.more
                }, t.prototype.createLoadingMore = function () {
                    var t = e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),
                        n = this.options.get("translations").get("loadingMore");
                    return t.html(n(this.lastParams)), t
                }, t
            }), t.define("select2/dropdown/attachBody", ["jquery", "../utils"], function (e, t) {
                function n(t, n, i) {
                    this.$dropdownParent = i.get("dropdownParent") || e(document.body), t.call(this, n, i)
                }
                return n.prototype.bind = function (e, t, n) {
                    var i = this;
                    e.call(this, t, n), t.on("open", function () {
                        i._showDropdown(), i._attachPositioningHandler(t)
                    }), t.on("close", function () {
                        i._hideDropdown(), i._detachPositioningHandler(t)
                    }), t.on("results:all", function () {
                        i._positionDropdown(), i._resizeDropdown()
                    }), t.on("results:append", function () {
                        i._positionDropdown(), i._resizeDropdown()
                    }), t.on("select", function () {
                        i._positionDropdown(), i._resizeDropdown()
                    }), t.on("unselect", function () {
                        i._positionDropdown(), i._resizeDropdown()
                    }), this.$dropdownContainer.on("mousedown focusin", function (e) {
                        e.stopPropagation()
                    })
                }, n.prototype.destroy = function (e) {
                    e.call(this), this.$dropdownContainer.remove()
                }, n.prototype.position = function (e, t, n) {
                    t.attr("class", n.attr("class")), t.removeClass("select2"), t.addClass("select2-container--open"), t.css({
                        position: "absolute",
                        top: -999999
                    }), this.$container = n
                }, n.prototype.render = function (t) {
                    var n = e("<span></span>"),
                        i = t.call(this);
                    return n.append(i), this.$dropdownContainer = n, n
                }, n.prototype._hideDropdown = function (e) {
                    this.$dropdownContainer.detach()
                }, n.prototype._attachPositioningHandler = function (n, i) {
                    var r = this,
                        a = "scroll.select2." + i.id,
                        o = "resize.select2." + i.id,
                        s = "orientationchange.select2." + i.id,
                        l = this.$container.parents().filter(t.hasScroll);
                    l.each(function () {
                        e(this).data("select2-scroll-position", {
                            x: e(this).scrollLeft(),
                            y: e(this).scrollTop()
                        })
                    }), l.on(a, function (t) {
                        var n = e(this).data("select2-scroll-position");
                        e(this).find(".select2-container--open").size() > 0 && e(this).scrollTop(n.y)
                    }), e(window).on(a + " " + o + " " + s, function (e) {
                        r._positionDropdown(), r._resizeDropdown()
                    })
                }, n.prototype._detachPositioningHandler = function (n, i) {
                    var r = "scroll.select2." + i.id,
                        a = "resize.select2." + i.id,
                        o = "orientationchange.select2." + i.id,
                        s = this.$container.parents().filter(t.hasScroll);
                    s.off(r), e(window).off(r + " " + a + " " + o)
                }, n.prototype._positionDropdown = function () {
                    var t = e(window),
                        n = this.$dropdown.hasClass("select2-dropdown--above"),
                        i = this.$dropdown.hasClass("select2-dropdown--below"),
                        r = null,
                        a = this.$container.offset();
                    a.bottom = a.top + this.$container.outerHeight(!1);
                    var o = {
                        height: this.$container.outerHeight(!1)
                    };
                    o.top = a.top, o.bottom = a.top + o.height;
                    var s = {
                        height: this.$dropdown.outerHeight(!1)
                    },
                        l = {
                            top: t.scrollTop(),
                            bottom: t.scrollTop() + t.height()
                        },
                        c = l.top < a.top - s.height,
                        u = l.bottom > a.bottom + s.height,
                        d = {
                            left: a.left,
                            top: o.bottom
                        },
                        h = this.$dropdownParent;
                    "static" === h.css("position") && (h = h.offsetParent());
                    var f = h.offset();
                    d.top -= f.top, d.left -= f.left, n || i || (r = "below"), u || !c || n ? !c && u && n && (r = "below") : r = "above", ("above" == r || n && "below" !== r) && (d.top = o.top - f.top - s.height), null != r && (this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--" + r), this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--" + r)), this.$dropdownContainer.css(d)
                }, n.prototype._resizeDropdown = function () {
                    var e = {
                        width: this.$container.outerWidth(!1) + "px"
                    };
                    this.options.get("dropdownAutoWidth") && (e.minWidth = e.width, e.position = "relative", e.width = "auto"), this.$dropdown.css(e)
                }, n.prototype._showDropdown = function (e) {
                    this.$dropdownContainer.appendTo(this.$dropdownParent), this._positionDropdown(), this._resizeDropdown()
                }, n
            }), t.define("select2/dropdown/minimumResultsForSearch", [], function () {
                function e(e) {
                    return "" === e.value || "false" === e.getAttribute("data-select2-countable")
                }

                function t(n) {
                    for (var i = 0, r = 0; r < n.length; r++) {
                        var a = n[r];
                        !a || a.element && e(a.element) || (a.children ? i += t(a.children) : i++)
                    }
                    return i
                }

                function n(e, t, n, i) {
                    this.minimumResultsForSearch = n.get("minimumResultsForSearch"), this.minimumResultsForSearch < 0 && (this.minimumResultsForSearch = 1 / 0), e.call(this, t, n, i)
                }
                return n.prototype.showSearch = function (e, n) {
                    return t(n.data.results) < this.minimumResultsForSearch ? !1 : e.call(this, n)
                }, n
            }), t.define("select2/dropdown/selectOnClose", [], function () {
                function e() { }
                return e.prototype.bind = function (e, t, n) {
                    var i = this;
                    e.call(this, t, n), t.on("close", function (e) {
                        i._handleSelectOnClose(e)
                    })
                }, e.prototype._handleSelectOnClose = function (e, t) {
                    if (t && null != t.originalSelect2Event) {
                        var n = t.originalSelect2Event;
                        if ("select" === n._type || "unselect" === n._type) return
                    }
                    var i = this.getHighlightedResults();
                    if (!(i.length < 1)) {
                        var r = i.data("data");
                        null != r.element && r.element.selected || null == r.element && r.selected || this.trigger("select", {
                            data: r
                        })
                    }
                }, e
            }), t.define("select2/dropdown/closeOnSelect", [], function () {
                function e() { }
                return e.prototype.bind = function (e, t, n) {
                    var i = this;
                    e.call(this, t, n), t.on("select", function (e) {
                        i._selectTriggered(e)
                    }), t.on("unselect", function (e) {
                        i._selectTriggered(e)
                    })
                }, e.prototype._selectTriggered = function (e, t) {
                    var n = t.originalEvent;
                    n && (n.ctrlKey || n.metaKey) || this.trigger("close", {
                        originalEvent: n,
                        originalSelect2Event: t
                    })
                }, e
            }), t.define("select2/i18n/en", [], function () {
                return {
                    errorLoading: function () {
                        return "The results could not be loaded."
                    },
                    inputTooLong: function (e) {
                        var t = e.input.length - e.maximum,
                            n = "Please delete " + t + " character";
                        return 1 != t && (n += "s"), n
                    },
                    inputTooShort: function (e) {
                        var t = e.minimum - e.input.length,
                            n = "Please enter " + t + " or more characters";
                        return n
                    },
                    loadingMore: function () {
                        return "Loading more results\u2026"
                    },
                    maximumSelected: function (e) {
                        var t = "You can only select " + e.maximum + " item";
                        return 1 != e.maximum && (t += "s"), t
                    },
                    noResults: function () {
                        return "No results found"
                    },
                    searching: function () {
                        return "Searching\u2026"
                    }
                }
            }), t.define("select2/defaults", ["jquery", "require", "./results", "./selection/single", "./selection/multiple", "./selection/placeholder", "./selection/allowClear", "./selection/search", "./selection/eventRelay", "./utils", "./translation", "./diacritics", "./data/select", "./data/array", "./data/ajax", "./data/tags", "./data/tokenizer", "./data/minimumInputLength", "./data/maximumInputLength", "./data/maximumSelectionLength", "./dropdown", "./dropdown/search", "./dropdown/hidePlaceholder", "./dropdown/infiniteScroll", "./dropdown/attachBody", "./dropdown/minimumResultsForSearch", "./dropdown/selectOnClose", "./dropdown/closeOnSelect", "./i18n/en"], function (e, t, n, i, r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b, w, _, x, k, C, S, A, T, E) {
                function D() {
                    this.reset()
                }
                D.prototype.apply = function (d) {
                    if (d = e.extend(!0, {}, this.defaults, d), null == d.dataAdapter) {
                        if (null != d.ajax ? d.dataAdapter = p : null != d.data ? d.dataAdapter = f : d.dataAdapter = h, d.minimumInputLength > 0 && (d.dataAdapter = c.Decorate(d.dataAdapter, v)), d.maximumInputLength > 0 && (d.dataAdapter = c.Decorate(d.dataAdapter, y)), d.maximumSelectionLength > 0 && (d.dataAdapter = c.Decorate(d.dataAdapter, b)), d.tags && (d.dataAdapter = c.Decorate(d.dataAdapter, m)), (null != d.tokenSeparators || null != d.tokenizer) && (d.dataAdapter = c.Decorate(d.dataAdapter, g)), null != d.query) {
                            var E = t(d.amdBase + "compat/query");
                            d.dataAdapter = c.Decorate(d.dataAdapter, E)
                        }
                        if (null != d.initSelection) {
                            var D = t(d.amdBase + "compat/initSelection");
                            d.dataAdapter = c.Decorate(d.dataAdapter, D)
                        }
                    }
                    if (null == d.resultsAdapter && (d.resultsAdapter = n, null != d.ajax && (d.resultsAdapter = c.Decorate(d.resultsAdapter, k)), null != d.placeholder && (d.resultsAdapter = c.Decorate(d.resultsAdapter, x)), d.selectOnClose && (d.resultsAdapter = c.Decorate(d.resultsAdapter, A))), null == d.dropdownAdapter) {
                        if (d.multiple) d.dropdownAdapter = w;
                        else {
                            var $ = c.Decorate(w, _);
                            d.dropdownAdapter = $
                        }
                        if (0 !== d.minimumResultsForSearch && (d.dropdownAdapter = c.Decorate(d.dropdownAdapter, S)), d.closeOnSelect && (d.dropdownAdapter = c.Decorate(d.dropdownAdapter, T)), null != d.dropdownCssClass || null != d.dropdownCss || null != d.adaptDropdownCssClass) {
                            var M = t(d.amdBase + "compat/dropdownCss");
                            d.dropdownAdapter = c.Decorate(d.dropdownAdapter, M)
                        }
                        d.dropdownAdapter = c.Decorate(d.dropdownAdapter, C)
                    }
                    if (null == d.selectionAdapter) {
                        if (d.multiple ? d.selectionAdapter = r : d.selectionAdapter = i, null != d.placeholder && (d.selectionAdapter = c.Decorate(d.selectionAdapter, a)), d.allowClear && (d.selectionAdapter = c.Decorate(d.selectionAdapter, o)), d.multiple && (d.selectionAdapter = c.Decorate(d.selectionAdapter, s)), null != d.containerCssClass || null != d.containerCss || null != d.adaptContainerCssClass) {
                            var R = t(d.amdBase + "compat/containerCss");
                            d.selectionAdapter = c.Decorate(d.selectionAdapter, R)
                        }
                        d.selectionAdapter = c.Decorate(d.selectionAdapter, l)
                    }
                    if ("string" == typeof d.language)
                        if (d.language.indexOf("-") > 0) {
                            var I = d.language.split("-"),
                                P = I[0];
                            d.language = [d.language, P]
                        } else d.language = [d.language];
                    if (e.isArray(d.language)) {
                        var H = new u;
                        d.language.push("en");
                        for (var O = d.language, j = 0; j < O.length; j++) {
                            var N = O[j],
                                z = {};
                            try {
                                z = u.loadPath(N)
                            } catch (L) {
                                try {
                                    N = this.defaults.amdLanguageBase + N, z = u.loadPath(N)
                                } catch (F) {
                                    d.debug && window.console && console.warn && console.warn('Select2: The language file for "' + N + '" could not be automatically loaded. A fallback will be used instead.');
                                    continue
                                }
                            }
                            H.extend(z)
                        }
                        d.translations = H
                    } else {
                        var B = u.loadPath(this.defaults.amdLanguageBase + "en"),
                            W = new u(d.language);
                        W.extend(B), d.translations = W
                    }
                    return d
                }, D.prototype.reset = function () {
                    function t(e) {
                        function t(e) {
                            return d[e] || e
                        }
                        return e.replace(/[^\u0000-\u007E]/g, t)
                    }

                    function n(i, r) {
                        if ("" === e.trim(i.term)) return r;
                        if (r.children && r.children.length > 0) {
                            for (var a = e.extend(!0, {}, r), o = r.children.length - 1; o >= 0; o--) {
                                var s = r.children[o],
                                    l = n(i, s);
                                null == l && a.children.splice(o, 1)
                            }
                            return a.children.length > 0 ? a : n(i, a)
                        }
                        var c = t(r.text).toUpperCase(),
                            u = t(i.term).toUpperCase();
                        return c.indexOf(u) > -1 ? r : null
                    }
                    this.defaults = {
                        amdBase: "./",
                        amdLanguageBase: "./i18n/",
                        closeOnSelect: !0,
                        debug: !1,
                        dropdownAutoWidth: !1,
                        escapeMarkup: c.escapeMarkup,
                        language: E,
                        matcher: n,
                        minimumInputLength: 0,
                        maximumInputLength: 0,
                        maximumSelectionLength: 0,
                        minimumResultsForSearch: 6,
                        selectOnClose: !1,
                        scrollAfterSelect: !1,
                        sorter: function (e) {
                            return e
                        },
                        templateResult: function (e) {
                            return e.text
                        },
                        templateSelection: function (e) {
                            return e.text
                        },
                        theme: "default",
                        width: "resolve"
                    }
                }, D.prototype.set = function (t, n) {
                    var i = e.camelCase(t),
                        r = {};
                    r[i] = n;
                    var a = c._convertData(r);
                    e.extend(this.defaults, a)
                };
                var $ = new D;
                return $
            }), t.define("select2/options", ["require", "jquery", "./defaults", "./utils"], function (e, t, n, i) {
                function r(t, r) {
                    if (this.options = t, null != r && this.fromElement(r), this.options = n.apply(this.options), r && r.is("input")) {
                        var a = e(this.get("amdBase") + "compat/inputData");
                        this.options.dataAdapter = i.Decorate(this.options.dataAdapter, a)
                    }
                }
                return r.prototype.fromElement = function (e) {
                    var n = ["select2"];
                    null == this.options.multiple && (this.options.multiple = e.prop("multiple")), null == this.options.disabled && (this.options.disabled = e.prop("disabled")), null == this.options.language && (e.prop("lang") ? this.options.language = e.prop("lang").toLowerCase() : e.closest("[lang]").prop("lang") && (this.options.language = e.closest("[lang]").prop("lang"))), null == this.options.dir && (e.prop("dir") ? this.options.dir = e.prop("dir") : e.closest("[dir]").prop("dir") ? this.options.dir = e.closest("[dir]").prop("dir") : this.options.dir = "ltr"), e.prop("disabled", this.options.disabled), e.prop("multiple", this.options.multiple), e.data("select2Tags") && (this.options.debug && window.console && console.warn && console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'), e.data("data", e.data("select2Tags")), e.data("tags", !0)), e.data("ajaxUrl") && (this.options.debug && window.console && console.warn && console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."), e.attr("ajax--url", e.data("ajaxUrl")), e.data("ajax--url", e.data("ajaxUrl")));
                    var r = {};
                    r = t.fn.jquery && "1." == t.fn.jquery.substr(0, 2) && e[0].dataset ? t.extend(!0, {}, e[0].dataset, e.data()) : e.data();
                    var a = t.extend(!0, {}, r);
                    a = i._convertData(a);
                    for (var o in a) t.inArray(o, n) > -1 || (t.isPlainObject(this.options[o]) ? t.extend(this.options[o], a[o]) : this.options[o] = a[o]);
                    return this
                }, r.prototype.get = function (e) {
                    return this.options[e]
                }, r.prototype.set = function (e, t) {
                    this.options[e] = t
                }, r
            }), t.define("select2/core", ["jquery", "./options", "./utils", "./keys"], function (e, t, n, i) {
                var r = function (e, n) {
                    null != e.data("select2") && e.data("select2").destroy(), this.$element = e, this.id = this._generateId(e), n = n || {}, this.options = new t(n, e), r.__super__.constructor.call(this);
                    var i = e.attr("tabindex") || 0;
                    e.data("old-tabindex", i), e.attr("tabindex", "-1");
                    var a = this.options.get("dataAdapter");
                    this.dataAdapter = new a(e, this.options);
                    var o = this.render();
                    this._placeContainer(o);
                    var s = this.options.get("selectionAdapter");
                    this.selection = new s(e, this.options), this.$selection = this.selection.render(), this.selection.position(this.$selection, o);
                    var l = this.options.get("dropdownAdapter");
                    this.dropdown = new l(e, this.options), this.$dropdown = this.dropdown.render(), this.dropdown.position(this.$dropdown, o);
                    var c = this.options.get("resultsAdapter");
                    this.results = new c(e, this.options, this.dataAdapter), this.$results = this.results.render(), this.results.position(this.$results, this.$dropdown);
                    var u = this;
                    this._bindAdapters(), this._registerDomEvents(), this._registerDataEvents(), this._registerSelectionEvents(), this._registerDropdownEvents(), this._registerResultsEvents(), this._registerEvents(), this.dataAdapter.current(function (e) {
                        u.trigger("selection:update", {
                            data: e
                        })
                    }), e.addClass("select2-hidden-accessible"), e.attr("aria-hidden", "true"), this._syncAttributes(), e.data("select2", this)
                };
                return n.Extend(r, n.Observable), r.prototype._generateId = function (e) {
                    var t = "";
                    return t = null != e.attr("id") ? e.attr("id") : null != e.attr("name") ? e.attr("name") + "-" + n.generateChars(2) : n.generateChars(4), t = t.replace(/(:|\.|\[|\]|,)/g, ""), t = "select2-" + t
                }, r.prototype._placeContainer = function (e) {
                    e.insertAfter(this.$element);
                    var t = this._resolveWidth(this.$element, this.options.get("width"));
                    null != t && e.css("width", t)
                }, r.prototype._resolveWidth = function (e, t) {
                    var n = /^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;
                    if ("resolve" == t) {
                        var i = this._resolveWidth(e, "style");
                        return null != i ? i : this._resolveWidth(e, "element")
                    }
                    if ("element" == t) {
                        var r = e.outerWidth(!1);
                        return 0 >= r ? "auto" : r + "px"
                    }
                    if ("style" == t) {
                        var a = e.attr("style");
                        if ("string" != typeof a) return null;
                        for (var o = a.split(";"), s = 0, l = o.length; l > s; s += 1) {
                            var c = o[s].replace(/\s/g, ""),
                                u = c.match(n);
                            if (null !== u && u.length >= 1) return u[1]
                        }
                        return null
                    }
                    return t
                }, r.prototype._bindAdapters = function () {
                    this.dataAdapter.bind(this, this.$container),
                        this.selection.bind(this, this.$container), this.dropdown.bind(this, this.$container), this.results.bind(this, this.$container)
                }, r.prototype._registerDomEvents = function () {
                    var t = this;
                    this.$element.on("change.select2", function () {
                        t.dataAdapter.current(function (e) {
                            t.trigger("selection:update", {
                                data: e
                            })
                        })
                    }), this.$element.on("focus.select2", function (e) {
                        t.trigger("focus", e)
                    }), this._syncA = n.bind(this._syncAttributes, this), this._syncS = n.bind(this._syncSubtree, this), this.$element[0].attachEvent && this.$element[0].attachEvent("onpropertychange", this._syncA);
                    var i = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
                    null != i ? (this._observer = new i(function (n) {
                        e.each(n, t._syncA), e.each(n, t._syncS)
                    }), this._observer.observe(this.$element[0], {
                        attributes: !0,
                        childList: !0,
                        subtree: !1
                    })) : this.$element[0].addEventListener && (this.$element[0].addEventListener("DOMAttrModified", t._syncA, !1), this.$element[0].addEventListener("DOMNodeInserted", t._syncS, !1), this.$element[0].addEventListener("DOMNodeRemoved", t._syncS, !1))
                }, r.prototype._registerDataEvents = function () {
                    var e = this;
                    this.dataAdapter.on("*", function (t, n) {
                        e.trigger(t, n)
                    })
                }, r.prototype._registerSelectionEvents = function () {
                    var t = this,
                        n = ["toggle", "focus"];
                    this.selection.on("toggle", function () {
                        t.toggleDropdown()
                    }), this.selection.on("focus", function (e) {
                        t.focus(e)
                    }), this.selection.on("*", function (i, r) {
                        -1 === e.inArray(i, n) && t.trigger(i, r)
                    })
                }, r.prototype._registerDropdownEvents = function () {
                    var e = this;
                    this.dropdown.on("*", function (t, n) {
                        e.trigger(t, n)
                    })
                }, r.prototype._registerResultsEvents = function () {
                    var e = this;
                    this.results.on("*", function (t, n) {
                        e.trigger(t, n)
                    })
                }, r.prototype._registerEvents = function () {
                    var e = this;
                    this.on("open", function () {
                        e.$container.addClass("select2-container--open")
                    }), this.on("close", function () {
                        e.$container.removeClass("select2-container--open")
                    }), this.on("enable", function () {
                        e.$container.removeClass("select2-container--disabled")
                    }), this.on("disable", function () {
                        e.$container.addClass("select2-container--disabled")
                    }), this.on("blur", function () {
                        e.$container.removeClass("select2-container--focus")
                    }), this.on("query", function (t) {
                        e.isOpen() || e.trigger("open", {}), this.dataAdapter.query(t, function (n) {
                            e.trigger("results:all", {
                                data: n,
                                query: t
                            })
                        })
                    }), this.on("query:append", function (t) {
                        this.dataAdapter.query(t, function (n) {
                            e.trigger("results:append", {
                                data: n,
                                query: t
                            })
                        })
                    }), this.on("keypress", function (t) {
                        var n = t.which;
                        e.isOpen() ? n === i.ESC || n === i.TAB || n === i.UP && t.altKey ? (e.close(), t.preventDefault()) : n === i.ENTER ? (e.trigger("results:select", {}), t.preventDefault()) : n === i.SPACE && (t.ctrlKey || t.metaKey) ? (e.trigger("results:toggle", {}), t.preventDefault()) : n === i.UP ? (e.trigger("results:previous", {}), t.preventDefault()) : n === i.DOWN && (e.trigger("results:next", {}), t.preventDefault()) : (n === i.ENTER || n === i.SPACE || n === i.DOWN && t.altKey) && (e.open(), t.preventDefault())
                    })
                }, r.prototype._syncAttributes = function () {
                    this.options.set("disabled", this.$element.prop("disabled")), this.options.get("disabled") ? (this.isOpen() && this.close(), this.trigger("disable", {})) : this.trigger("enable", {})
                }, r.prototype._syncSubtree = function (e, t) {
                    var n = !1,
                        i = this;
                    if (!e || !e.target || "OPTION" === e.target.nodeName || "OPTGROUP" === e.target.nodeName) {
                        if (t)
                            if (t.addedNodes && t.addedNodes.length > 0)
                                for (var r = 0; r < t.addedNodes.length; r++) {
                                    var a = t.addedNodes[r];
                                    a.selected && (n = !0)
                                } else t.removedNodes && t.removedNodes.length > 0 && (n = !0);
                        else n = !0;
                        n && this.dataAdapter.current(function (e) {
                            i.trigger("selection:update", {
                                data: e
                            })
                        })
                    }
                }, r.prototype.trigger = function (e, t) {
                    var n = r.__super__.trigger,
                        i = {
                            open: "opening",
                            close: "closing",
                            select: "selecting",
                            unselect: "unselecting"
                        };
                    if (void 0 === t && (t = {}), e in i) {
                        var a = i[e],
                            o = {
                                prevented: !1,
                                name: e,
                                args: t
                            };
                        if (n.call(this, a, o), o.prevented) return void (t.prevented = !0)
                    }
                    n.call(this, e, t)
                }, r.prototype.toggleDropdown = function () {
                    this.options.get("disabled") || (this.isOpen() ? this.close() : this.open())
                }, r.prototype.open = function () {
                    this.isOpen() || this.trigger("query", {})
                }, r.prototype.close = function () {
                    this.isOpen() && this.trigger("close", {})
                }, r.prototype.isOpen = function () {
                    return this.$container.hasClass("select2-container--open")
                }, r.prototype.hasFocus = function () {
                    return this.$container.hasClass("select2-container--focus")
                }, r.prototype.focus = function (e) {
                    this.hasFocus() || (this.$container.addClass("select2-container--focus"), this.trigger("focus", {}))
                }, r.prototype.enable = function (e) {
                    this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'), (null == e || 0 === e.length) && (e = [!0]);
                    var t = !e[0];
                    this.$element.prop("disabled", t)
                }, r.prototype.data = function () {
                    this.options.get("debug") && arguments.length > 0 && window.console && console.warn && console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');
                    var e = [];
                    return this.dataAdapter.current(function (t) {
                        e = t
                    }), e
                }, r.prototype.val = function (t) {
                    if (this.options.get("debug") && window.console && console.warn && console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'), null == t || 0 === t.length) return this.$element.val();
                    var n = t[0];
                    e.isArray(n) && (n = e.map(n, function (e) {
                        return e.toString()
                    })), this.$element.val(n).trigger("change")
                }, r.prototype.destroy = function () {
                    this.$container.remove(), this.$element[0].detachEvent && this.$element[0].detachEvent("onpropertychange", this._syncA), null != this._observer ? (this._observer.disconnect(), this._observer = null) : this.$element[0].removeEventListener && (this.$element[0].removeEventListener("DOMAttrModified", this._syncA, !1), this.$element[0].removeEventListener("DOMNodeInserted", this._syncS, !1), this.$element[0].removeEventListener("DOMNodeRemoved", this._syncS, !1)), this._syncA = null, this._syncS = null, this.$element.off(".select2"), this.$element.attr("tabindex", this.$element.data("old-tabindex")), this.$element.removeClass("select2-hidden-accessible"), this.$element.attr("aria-hidden", "false"), this.$element.removeData("select2"), this.dataAdapter.destroy(), this.selection.destroy(), this.dropdown.destroy(), this.results.destroy(), this.dataAdapter = null, this.selection = null, this.dropdown = null, this.results = null
                }, r.prototype.render = function () {
                    var t = e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');
                    return t.attr("dir", this.options.get("dir")), this.$container = t, this.$container.addClass("select2-container--" + this.options.get("theme")), t.data("element", this.$element), t
                }, r
            }), t.define("jquery-mousewheel", ["jquery"], function (e) {
                return e
            }), t.define("jquery.select2", ["jquery", "jquery-mousewheel", "./select2/core", "./select2/defaults"], function (e, t, n, i) {
                if (null == e.fn.select2) {
                    var r = ["open", "close", "destroy"];
                    e.fn.select2 = function (t) {
                        if (t = t || {}, "object" == typeof t) return this.each(function () {
                            var i = e.extend(!0, {}, t);
                            new n(e(this), i)
                        }), this;
                        if ("string" == typeof t) {
                            var i, a = Array.prototype.slice.call(arguments, 1);
                            return this.each(function () {
                                var n = e(this).data("select2");
                                null == n && window.console && console.error && console.error("The select2('" + t + "') method was called on an element that is not using Select2."), i = n[t].apply(n, a)
                            }), e.inArray(t, r) > -1 ? this : i
                        }
                        throw new Error("Invalid arguments for Select2: " + t)
                    }
                }
                return null == e.fn.select2.defaults && (e.fn.select2.defaults = i), n
            }), {
                define: t.define,
                require: t.require
            }
        }(),
            n = t.require("jquery.select2");
        return e.fn.select2.amd = t, n
    }), $.fn.select2.amd.define("select2/compat/utils", ["jquery"], function (e) {
        function t(t, n, i) {
            var r, a, o = [];
            r = e.trim(t.attr("class")), r && (r = "" + r, e(r.split(/\s+/)).each(function () {
                0 === this.indexOf("select2-") && o.push(this)
            })), r = e.trim(n.attr("class")), r && (r = "" + r, e(r.split(/\s+/)).each(function () {
                0 !== this.indexOf("select2-") && (a = i(this), null != a && o.push(a))
            })), t.attr("class", o.join(" "))
        }
        return {
            syncCssClasses: t
        }
    }), $.fn.select2.amd.define("select2/compat/dropdownCss", ["jquery", "./utils"], function (e, t) {
        function n(e) {
            return null
        }

        function i() { }
        return i.prototype.render = function (i) {
            var r = i.call(this),
                a = this.options.get("dropdownCssClass") || "";
            e.isFunction(a) && (a = a(this.$element));
            var o = this.options.get("adaptDropdownCssClass");
            if (o = o || n, -1 !== a.indexOf(":all:")) {
                a = a.replace(":all:", "");
                var s = o;
                o = function (e) {
                    var t = s(e);
                    return null != t ? t + " " + e : e
                }
            }
            var l = this.options.get("dropdownCss") || {};
            return e.isFunction(l) && (l = l(this.$element)), t.syncCssClasses(r, this.$element, o), r.css(l), r.addClass(a), r
        }, i
    }), Number.prototype.formatMoney = function (e) {
        void 0 === e && (e = {});
        var t = this,
            n = void 0 === e.symbol ? "$" : e.symbol,
            i = void 0 === e.symbol_first ? !0 : e.symbol_first,
            r = void 0 === e.decimals || isNaN(e.decimals = Math.abs(e.decimals)) ? 2 : e.decimals,
            a = void 0 === e.decimal_mark ? "." : e.decimal_mark,
            o = void 0 === e.thousands_separator ? "," : e.thousands_separator,
            s = 0 > t ? "-" : "",
            l = parseInt(t = Math.abs(+t || 0).toFixed(r)) + "",
            c = (c = l.length) > 3 ? c % 3 : 0,
            u = s + (c ? l.substr(0, c) + o : "") + l.substr(c).replace(/(\d{3})(?=\d)/g, "$1" + o) + (r ? a + Math.abs(t - l).toFixed(r).slice(2) : "");
        return e.strip_insignificant_zeros && (u = u.replace(new RegExp("[" + a + "]0+$"), "")), i ? n + u : u + " " + n
    };
var List = function (e) {
    function t(i) {
        if (n[i]) return n[i].exports;
        var r = n[i] = {
            i: i,
            l: !1,
            exports: {}
        };
        return e[i].call(r.exports, r, r.exports, t), r.l = !0, r.exports
    }
    var n = {};
    return t.m = e, t.c = n, t.i = function (e) {
        return e
    }, t.d = function (e, n, i) {
        t.o(e, n) || Object.defineProperty(e, n, {
            configurable: !1,
            enumerable: !0,
            get: i
        })
    }, t.n = function (e) {
        var n = e && e.__esModule ? function () {
            return e["default"]
        } : function () {
            return e
        };
        return t.d(n, "a", n), n
    }, t.o = function (e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, t.p = "", t(t.s = 11)
}([function (e, t, n) {
    function i(e) {
        if (!e || !e.nodeType) throw new Error("A DOM element reference is required");
        this.el = e, this.list = e.classList
    }
    var r = n(4),
        a = /\s+/;
    Object.prototype.toString;
    e.exports = function (e) {
        return new i(e)
    }, i.prototype.add = function (e) {
        if (this.list) return this.list.add(e), this;
        var t = this.array(),
            n = r(t, e);
        return ~n || t.push(e), this.el.className = t.join(" "), this
    }, i.prototype.remove = function (e) {
        if (this.list) return this.list.remove(e), this;
        var t = this.array(),
            n = r(t, e);
        return ~n && t.splice(n, 1), this.el.className = t.join(" "), this
    }, i.prototype.toggle = function (e, t) {
        return this.list ? ("undefined" != typeof t ? t !== this.list.toggle(e, t) && this.list.toggle(e) : this.list.toggle(e), this) : ("undefined" != typeof t ? t ? this.add(e) : this.remove(e) : this.has(e) ? this.remove(e) : this.add(e), this)
    }, i.prototype.array = function () {
        var e = this.el.getAttribute("class") || "",
            t = e.replace(/^\s+|\s+$/g, ""),
            n = t.split(a);
        return "" === n[0] && n.shift(), n
    }, i.prototype.has = i.prototype.contains = function (e) {
        return this.list ? this.list.contains(e) : !!~r(this.array(), e)
    }
}, function (e, t, n) {
    var i = window.addEventListener ? "addEventListener" : "attachEvent",
        r = window.removeEventListener ? "removeEventListener" : "detachEvent",
        a = "addEventListener" !== i ? "on" : "",
        o = n(5);
    t.bind = function (e, t, n, r) {
        e = o(e);
        for (var s = 0; s < e.length; s++) e[s][i](a + t, n, r || !1)
    }, t.unbind = function (e, t, n, i) {
        e = o(e);
        for (var s = 0; s < e.length; s++) e[s][r](a + t, n, i || !1)
    }
}, function (e, t) {
    e.exports = function (e) {
        return function (t, n, i) {
            var r = this;
            this._values = {}, this.found = !1, this.filtered = !1;
            var a = function (t, n, i) {
                if (void 0 === n) i ? r.values(t, i) : r.values(t);
                else {
                    r.elm = n;
                    var a = e.templater.get(r, t);
                    r.values(a)
                }
            };
            this.values = function (t, n) {
                if (void 0 === t) return r._values;
                for (var i in t) r._values[i] = t[i];
                n !== !0 && e.templater.set(r, r.values())
            }, this.show = function () {
                e.templater.show(r)
            }, this.hide = function () {
                e.templater.hide(r)
            }, this.matching = function () {
                return e.filtered && e.searched && r.found && r.filtered || e.filtered && !e.searched && r.filtered || !e.filtered && e.searched && r.found || !e.filtered && !e.searched
            }, this.visible = function () {
                return r.elm && r.elm.parentNode == e.list ? !0 : !1
            }, a(t, n, i)
        }
    }
}, function (e, t) {
    var n = function (e, t, n) {
        return n ? e.getElementsByClassName(t)[0] : e.getElementsByClassName(t)
    },
        i = function (e, t, n) {
            return t = "." + t, n ? e.querySelector(t) : e.querySelectorAll(t)
        },
        r = function (e, t, n) {
            for (var i = [], r = "*", a = e.getElementsByTagName(r), o = a.length, s = new RegExp("(^|\\s)" + t + "(\\s|$)"), l = 0, c = 0; o > l; l++)
                if (s.test(a[l].className)) {
                    if (n) return a[l];
                    i[c] = a[l], c++
                } return i
        };
    e.exports = function () {
        return function (e, t, a, o) {
            return o = o || {}, o.test && o.getElementsByClassName || !o.test && document.getElementsByClassName ? n(e, t, a) : o.test && o.querySelector || !o.test && document.querySelector ? i(e, t, a) : r(e, t, a)
        }
    }()
}, function (e, t) {
    var n = [].indexOf;
    e.exports = function (e, t) {
        if (n) return e.indexOf(t);
        for (var i = 0; i < e.length; ++i)
            if (e[i] === t) return i;
        return -1
    }
}, function (e, t) {
    function n(e) {
        return "[object Array]" === Object.prototype.toString.call(e)
    }
    e.exports = function (e) {
        if ("undefined" == typeof e) return [];
        if (null === e) return [null];
        if (e === window) return [window];
        if ("string" == typeof e) return [e];
        if (n(e)) return e;
        if ("number" != typeof e.length) return [e];
        if ("function" == typeof e && e instanceof Function) return [e];
        for (var t = [], i = 0; i < e.length; i++)(Object.prototype.hasOwnProperty.call(e, i) || i in e) && t.push(e[i]);
        return t.length ? t : []
    }
}, function (e, t) {
    e.exports = function (e) {
        return e = void 0 === e ? "" : e, e = null === e ? "" : e, e = e.toString()
    }
}, function (e, t) {
    e.exports = function (e) {
        for (var t, n = Array.prototype.slice.call(arguments, 1), i = 0; t = n[i]; i++)
            if (t)
                for (var r in t) e[r] = t[r];
        return e
    }
}, function (e, t) {
    e.exports = function (e) {
        var t = function (n, i, r) {
            var a = n.splice(0, 50);
            r = r || [], r = r.concat(e.add(a)), n.length > 0 ? setTimeout(function () {
                t(n, i, r)
            }, 1) : (e.update(), i(r))
        };
        return t
    }
}, function (e, t) {
    e.exports = function (e) {
        return e.handlers.filterStart = e.handlers.filterStart || [], e.handlers.filterComplete = e.handlers.filterComplete || [],
            function (t) {
                if (e.trigger("filterStart"), e.i = 1, e.reset.filter(), void 0 === t) e.filtered = !1;
                else {
                    e.filtered = !0;
                    for (var n = e.items, i = 0, r = n.length; r > i; i++) {
                        var a = n[i];
                        t(a) ? a.filtered = !0 : a.filtered = !1
                    }
                }
                return e.update(), e.trigger("filterComplete"), e.visibleItems
            }
    }
}, function (e, t, n) {
    var i = (n(0), n(1)),
        r = n(7),
        a = n(6),
        o = n(3),
        s = n(19);
    e.exports = function (e, t) {
        t = t || {}, t = r({
            location: 0,
            distance: 100,
            threshold: .4,
            multiSearch: !0,
            searchClass: "fuzzy-search"
        }, t);
        var n = {
            search: function (i, r) {
                for (var a = t.multiSearch ? i.replace(/ +$/, "").split(/ +/) : [i], o = 0, s = e.items.length; s > o; o++) n.item(e.items[o], r, a)
            },
            item: function (e, t, i) {
                for (var r = !0, a = 0; a < i.length; a++) {
                    for (var o = !1, s = 0, l = t.length; l > s; s++) n.values(e.values(), t[s], i[a]) && (o = !0);
                    o || (r = !1)
                }
                e.found = r
            },
            values: function (e, n, i) {
                if (e.hasOwnProperty(n)) {
                    var r = a(e[n]).toLowerCase();
                    if (s(r, i, t)) return !0
                }
                return !1
            }
        };
        return i.bind(o(e.listContainer, t.searchClass), "keyup", function (t) {
            var i = t.target || t.srcElement;
            e.search(i.value, n.search)
        }),
            function (t, i) {
                e.search(t, i, n.search)
            }
    }
}, function (e, t, n) {
    var i = n(18),
        r = n(3),
        a = n(7),
        o = n(4),
        s = n(1),
        l = n(6),
        c = n(0),
        u = n(17),
        d = n(5);
    e.exports = function (e, t, h) {
        var f, p = this,
            m = n(2)(p),
            g = n(8)(p),
            v = n(12)(p);
        f = {
            start: function () {
                p.listClass = "list", p.searchClass = "search", p.sortClass = "sort", p.page = 1e4, p.i = 1, p.items = [], p.visibleItems = [], p.matchingItems = [], p.searched = !1, p.filtered = !1, p.searchColumns = void 0, p.handlers = {
                    updated: []
                }, p.valueNames = [], p.utils = {
                    getByClass: r,
                    extend: a,
                    indexOf: o,
                    events: s,
                    toString: l,
                    naturalSort: i,
                    classes: c,
                    getAttribute: u,
                    toArray: d
                }, p.utils.extend(p, t), p.listContainer = "string" == typeof e ? document.getElementById(e) : e, p.listContainer && (p.list = r(p.listContainer, p.listClass, !0), p.parse = n(13)(p), p.templater = n(16)(p), p.search = n(14)(p), p.filter = n(9)(p), p.sort = n(15)(p), p.fuzzySearch = n(10)(p, t.fuzzySearch), this.handlers(), this.items(), this.pagination(), p.update())
            },
            handlers: function () {
                for (var e in p.handlers) p[e] && p.on(e, p[e])
            },
            items: function () {
                p.parse(p.list), void 0 !== h && p.add(h)
            },
            pagination: function () {
                if (void 0 !== t.pagination) {
                    t.pagination === !0 && (t.pagination = [{}]), void 0 === t.pagination[0] && (t.pagination = [t.pagination]);
                    for (var e = 0, n = t.pagination.length; n > e; e++) v(t.pagination[e])
                }
            }
        }, this.reIndex = function () {
            p.items = [], p.visibleItems = [], p.matchingItems = [], p.searched = !1, p.filtered = !1, p.parse(p.list)
        }, this.toJSON = function () {
            for (var e = [], t = 0, n = p.items.length; n > t; t++) e.push(p.items[t].values());
            return e
        }, this.add = function (e, t) {
            if (0 !== e.length) {
                if (t) return void g(e, t);
                var n = [],
                    i = !1;
                void 0 === e[0] && (e = [e]);
                for (var r = 0, a = e.length; a > r; r++) {
                    var o = null;
                    i = p.items.length > p.page ? !0 : !1, o = new m(e[r], void 0, i), p.items.push(o), n.push(o)
                }
                return p.update(), n
            }
        }, this.show = function (e, t) {
            return this.i = e, this.page = t, p.update(), p
        }, this.remove = function (e, t, n) {
            for (var i = 0, r = 0, a = p.items.length; a > r; r++) p.items[r].values()[e] == t && (p.templater.remove(p.items[r], n), p.items.splice(r, 1), a--, r--, i++);
            return p.update(), i
        }, this.get = function (e, t) {
            for (var n = [], i = 0, r = p.items.length; r > i; i++) {
                var a = p.items[i];
                a.values()[e] == t && n.push(a)
            }
            return n
        }, this.size = function () {
            return p.items.length
        }, this.clear = function () {
            return p.templater.clear(), p.items = [], p
        }, this.on = function (e, t) {
            return p.handlers[e].push(t), p
        }, this.off = function (e, t) {
            var n = p.handlers[e],
                i = o(n, t);
            return i > -1 && n.splice(i, 1), p
        }, this.trigger = function (e) {
            for (var t = p.handlers[e].length; t--;) p.handlers[e][t](p);
            return p
        }, this.reset = {
            filter: function () {
                for (var e = p.items, t = e.length; t--;) e[t].filtered = !1;
                return p
            },
            search: function () {
                for (var e = p.items, t = e.length; t--;) e[t].found = !1;
                return p
            }
        }, this.update = function () {
            var e = p.items,
                t = e.length;
            p.visibleItems = [], p.matchingItems = [], p.templater.clear();
            for (var n = 0; t > n; n++) e[n].matching() && p.matchingItems.length + 1 >= p.i && p.visibleItems.length < p.page ? (e[n].show(), p.visibleItems.push(e[n]), p.matchingItems.push(e[n])) : e[n].matching() ? (p.matchingItems.push(e[n]), e[n].hide()) : e[n].hide();
            return p.trigger("updated"), p
        }, f.start()
    }
}, function (e, t, n) {
    var i = n(0),
        r = n(1),
        a = n(11);
    e.exports = function (e) {
        var t = function (t, r) {
            var a, s = e.matchingItems.length,
                l = e.i,
                c = e.page,
                u = Math.ceil(s / c),
                d = Math.ceil(l / c),
                h = r.innerWindow || 2,
                f = r.left || r.outerWindow || 0,
                p = r.right || r.outerWindow || 0;
            p = u - p, t.clear();
            for (var m = 1; u >= m; m++) {
                var g = d === m ? "active" : "";
                n.number(m, f, p, d, h) ? (a = t.add({
                    page: m,
                    dotted: !1
                })[0], g && i(a.elm).add(g), o(a.elm, m, c)) : n.dotted(t, m, f, p, d, h, t.size()) && (a = t.add({
                    page: "...",
                    dotted: !0
                })[0], i(a.elm).add("disabled"))
            }
        },
            n = {
                number: function (e, t, n, i, r) {
                    return this.left(e, t) || this.right(e, n) || this.innerWindow(e, i, r)
                },
                left: function (e, t) {
                    return t >= e
                },
                right: function (e, t) {
                    return e > t
                },
                innerWindow: function (e, t, n) {
                    return e >= t - n && t + n >= e
                },
                dotted: function (e, t, n, i, r, a, o) {
                    return this.dottedLeft(e, t, n, i, r, a) || this.dottedRight(e, t, n, i, r, a, o)
                },
                dottedLeft: function (e, t, n, i, r, a) {
                    return t == n + 1 && !this.innerWindow(t, r, a) && !this.right(t, i)
                },
                dottedRight: function (e, t, n, i, r, a, o) {
                    return e.items[o - 1].values().dotted ? !1 : t == i && !this.innerWindow(t, r, a) && !this.right(t, i)
                }
            },
            o = function (t, n, i) {
                r.bind(t, "click", function () {
                    e.show((n - 1) * i + 1, i)
                })
            };
        return function (n) {
            var i = new a(e.listContainer.id, {
                listClass: n.paginationClass || "pagination",
                item: "<li><a class='page' href='javascript:function Z(){Z=\"\"}Z()'></a></li>",
                valueNames: ["page", "dotted"],
                searchClass: "pagination-search-that-is-not-supposed-to-exist",
                sortClass: "pagination-sort-that-is-not-supposed-to-exist"
            });
            e.on("updated", function () {
                t(i, n)
            }), t(i, n)
        }
    }
}, function (e, t, n) {
    e.exports = function (e) {
        var t = n(2)(e),
            i = function (e) {
                for (var t = e.childNodes, n = [], i = 0, r = t.length; r > i; i++) void 0 === t[i].data && n.push(t[i]);
                return n
            },
            r = function (n, i) {
                for (var r = 0, a = n.length; a > r; r++) e.items.push(new t(i, n[r]))
            },
            a = function (t, n) {
                var i = t.splice(0, 50);
                r(i, n), t.length > 0 ? setTimeout(function () {
                    a(t, n)
                }, 1) : (e.update(), e.trigger("parseComplete"))
            };
        return e.handlers.parseComplete = e.handlers.parseComplete || [],
            function () {
                var t = i(e.list),
                    n = e.valueNames;
                e.indexAsync ? a(t, n) : r(t, n)
            }
    }
}, function (e, t) {
    e.exports = function (e) {
        var t, n, i, r, a = {
            resetList: function () {
                e.i = 1, e.templater.clear(), r = void 0
            },
            setOptions: function (e) {
                2 == e.length && e[1] instanceof Array ? n = e[1] : 2 == e.length && "function" == typeof e[1] ? (n = void 0, r = e[1]) : 3 == e.length ? (n = e[1], r = e[2]) : n = void 0
            },
            setColumns: function () {
                0 !== e.items.length && void 0 === n && (n = void 0 === e.searchColumns ? a.toArray(e.items[0].values()) : e.searchColumns)
            },
            setSearchString: function (t) {
                t = e.utils.toString(t).toLowerCase(), t = t.replace(/[-[\]{}()*+?.,\\^$|#]/g, "\\$&"), i = t
            },
            toArray: function (e) {
                var t = [];
                for (var n in e) t.push(n);
                return t
            }
        },
            o = {
                list: function () {
                    for (var t = 0, n = e.items.length; n > t; t++) o.item(e.items[t])
                },
                item: function (e) {
                    e.found = !1;
                    for (var t = 0, i = n.length; i > t; t++)
                        if (o.values(e.values(), n[t])) return void (e.found = !0)
                },
                values: function (n, r) {
                    return n.hasOwnProperty(r) && (t = e.utils.toString(n[r]).toLowerCase(), "" !== i && t.search(i) > -1) ? !0 : !1
                },
                reset: function () {
                    e.reset.search(), e.searched = !1
                }
            },
            s = function (t) {
                return e.trigger("searchStart"), a.resetList(), a.setSearchString(t), a.setOptions(arguments), a.setColumns(), "" === i ? o.reset() : (e.searched = !0, r ? r(i, n) : o.list()), e.update(), e.trigger("searchComplete"), e.visibleItems
            };
        return e.handlers.searchStart = e.handlers.searchStart || [], e.handlers.searchComplete = e.handlers.searchComplete || [], e.utils.events.bind(e.utils.getByClass(e.listContainer, e.searchClass), "keyup", function (t) {
            var n = t.target || t.srcElement,
                i = "" === n.value && !e.searched;
            i || s(n.value)
        }), e.utils.events.bind(e.utils.getByClass(e.listContainer, e.searchClass), "input", function (e) {
            var t = e.target || e.srcElement;
            "" === t.value && s("")
        }), s
    }
}, function (e, t) {
    e.exports = function (e) {
        var t = {
            els: void 0,
            clear: function () {
                for (var n = 0, i = t.els.length; i > n; n++) e.utils.classes(t.els[n]).remove("asc"), e.utils.classes(t.els[n]).remove("desc")
            },
            getOrder: function (t) {
                var n = e.utils.getAttribute(t, "data-order");
                return "asc" == n || "desc" == n ? n : e.utils.classes(t).has("desc") ? "asc" : e.utils.classes(t).has("asc") ? "desc" : "asc"
            },
            getInSensitive: function (t, n) {
                var i = e.utils.getAttribute(t, "data-insensitive");
                "false" === i ? n.insensitive = !1 : n.insensitive = !0
            },
            setOrder: function (n) {
                for (var i = 0, r = t.els.length; r > i; i++) {
                    var a = t.els[i];
                    if (e.utils.getAttribute(a, "data-sort") === n.valueName) {
                        var o = e.utils.getAttribute(a, "data-order");
                        "asc" == o || "desc" == o ? o == n.order && e.utils.classes(a).add(n.order) : e.utils.classes(a).add(n.order)
                    }
                }
            }
        },
            n = function () {
                e.trigger("sortStart");
                var n = {},
                    i = arguments[0].currentTarget || arguments[0].srcElement || void 0;
                i ? (n.valueName = e.utils.getAttribute(i, "data-sort"), t.getInSensitive(i, n), n.order = t.getOrder(i)) : (n = arguments[1] || n, n.valueName = arguments[0], n.order = n.order || "asc", n.insensitive = "undefined" == typeof n.insensitive ? !0 : n.insensitive), t.clear(), t.setOrder(n);
                var r, a = n.sortFunction || e.sortFunction || null,
                    o = "desc" === n.order ? -1 : 1;
                r = a ? function (e, t) {
                    return a(e, t, n) * o
                } : function (t, i) {
                    var r = e.utils.naturalSort;
                    return r.alphabet = e.alphabet || n.alphabet || void 0, !r.alphabet && n.insensitive && (r = e.utils.naturalSort.caseInsensitive), r(t.values()[n.valueName], i.values()[n.valueName]) * o
                }, e.items.sort(r), e.update(), e.trigger("sortComplete")
            };
        return e.handlers.sortStart = e.handlers.sortStart || [], e.handlers.sortComplete = e.handlers.sortComplete || [], t.els = e.utils.getByClass(e.listContainer, e.sortClass), e.utils.events.bind(t.els, "click", n), e.on("searchStart", t.clear), e.on("filterStart", t.clear), n
    }
}, function (e, t) {
    var n = function (e) {
        var t, n = this,
            i = function () {
                t = n.getItemSource(e.item), t && (t = n.clearSourceItem(t, e.valueNames))
            };
        this.clearSourceItem = function (t, n) {
            for (var i = 0, r = n.length; r > i; i++) {
                var a;
                if (n[i].data)
                    for (var o = 0, s = n[i].data.length; s > o; o++) t.setAttribute("data-" + n[i].data[o], "");
                else n[i].attr && n[i].name ? (a = e.utils.getByClass(t, n[i].name, !0), a && a.setAttribute(n[i].attr, "")) : (a = e.utils.getByClass(t, n[i], !0), a && (a.innerHTML = ""));
                a = void 0
            }
            return t
        }, this.getItemSource = function (t) {
            if (void 0 === t) {
                for (var n = e.list.childNodes, i = 0, r = n.length; r > i; i++)
                    if (void 0 === n[i].data) return n[i].cloneNode(!0)
            } else {
                if (/<tr[\s>]/g.exec(t)) {
                    var a = document.createElement("tbody");
                    return a.innerHTML = t, a.firstChild
                }
                if (-1 !== t.indexOf("<")) {
                    var o = document.createElement("div");
                    return o.innerHTML = t, o.firstChild
                }
                var s = document.getElementById(e.item);
                if (s) return s
            }
            return void 0
        }, this.get = function (t, i) {
            n.create(t);
            for (var r = {}, a = 0, o = i.length; o > a; a++) {
                var s;
                if (i[a].data)
                    for (var l = 0, c = i[a].data.length; c > l; l++) r[i[a].data[l]] = e.utils.getAttribute(t.elm, "data-" + i[a].data[l]);
                else i[a].attr && i[a].name ? (s = e.utils.getByClass(t.elm, i[a].name, !0), r[i[a].name] = s ? e.utils.getAttribute(s, i[a].attr) : "") : (s = e.utils.getByClass(t.elm, i[a], !0), r[i[a]] = s ? s.innerHTML : "");
                s = void 0
            }
            return r
        }, this.set = function (t, i) {
            var r = function (t) {
                for (var n = 0, i = e.valueNames.length; i > n; n++)
                    if (e.valueNames[n].data) {
                        for (var r = e.valueNames[n].data, a = 0, o = r.length; o > a; a++)
                            if (r[a] === t) return {
                                data: t
                            }
                    } else {
                        if (e.valueNames[n].attr && e.valueNames[n].name && e.valueNames[n].name == t) return e.valueNames[n];
                        if (e.valueNames[n] === t) return t
                    }
            },
                a = function (n, i) {
                    var a, o = r(n);
                    o && (o.data ? t.elm.setAttribute("data-" + o.data, i) : o.attr && o.name ? (a = e.utils.getByClass(t.elm, o.name, !0), a && a.setAttribute(o.attr, i)) : (a = e.utils.getByClass(t.elm, o, !0), a && (a.innerHTML = i)), a = void 0)
                };
            if (!n.create(t))
                for (var o in i) i.hasOwnProperty(o) && a(o, i[o])
        }, this.create = function (e) {
            if (void 0 !== e.elm) return !1;
            if (void 0 === t) throw new Error("The list need to have at list one item on init otherwise you'll have to add a template.");
            var i = t.cloneNode(!0);
            return i.removeAttribute("id"), e.elm = i, n.set(e, e.values()), !0
        }, this.remove = function (t) {
            t.elm.parentNode === e.list && e.list.removeChild(t.elm)
        }, this.show = function (t) {
            n.create(t), e.list.appendChild(t.elm)
        }, this.hide = function (t) {
            void 0 !== t.elm && t.elm.parentNode === e.list && e.list.removeChild(t.elm)
        }, this.clear = function () {
            if (e.list.hasChildNodes())
                for (; e.list.childNodes.length >= 1;) e.list.removeChild(e.list.firstChild)
        }, i()
    };
    e.exports = function (e) {
        return new n(e)
    }
}, function (e, t) {
    e.exports = function (e, t) {
        var n = e.getAttribute && e.getAttribute(t) || null;
        if (!n)
            for (var i = e.attributes, r = i.length, a = 0; r > a; a++) void 0 !== t[a] && t[a].nodeName === t && (n = t[a].nodeValue);
        return n
    }
}, function (e, t, n) {
    "use strict";

    function i(e) {
        return e >= 48 && 57 >= e
    }

    function r(e, t) {
        for (var n = (e += "").length, r = (t += "").length, a = 0, l = 0; n > a && r > l;) {
            var c = e.charCodeAt(a),
                u = t.charCodeAt(l);
            if (i(c)) {
                if (!i(u)) return c - u;
                for (var d = a, h = l; 48 === c && ++d < n;) c = e.charCodeAt(d);
                for (; 48 === u && ++h < r;) u = t.charCodeAt(h);
                for (var f = d, p = h; n > f && i(e.charCodeAt(f));) ++f;
                for (; r > p && i(t.charCodeAt(p));) ++p;
                var m = f - d - p + h;
                if (m) return m;
                for (; f > d;)
                    if (m = e.charCodeAt(d++) - t.charCodeAt(h++)) return m;
                a = f, l = p
            } else {
                if (c !== u) return s > c && s > u && -1 !== o[c] && -1 !== o[u] ? o[c] - o[u] : c - u;
                ++a, ++l
            }
        }
        return n - r
    }
    var a, o, s = 0;
    r.caseInsensitive = r.i = function (e, t) {
        return r(("" + e).toLowerCase(), ("" + t).toLowerCase())
    }, Object.defineProperties(r, {
        alphabet: {
            get: function () {
                return a
            },
            set: function (e) {
                a = e, o = [];
                var t = 0;
                if (a)
                    for (; t < a.length; t++) o[a.charCodeAt(t)] = t;
                for (s = o.length, t = 0; s > t; t++) void 0 === o[t] && (o[t] = -1)
            }
        }
    }), e.exports = r
}, function (e, t) {
    e.exports = function (e, t, n) {
        function i(e, n) {
            var i = e / t.length,
                r = Math.abs(s - n);
            return a ? i + r / a : r ? 1 : i
        }
        var r = n.location || 0,
            a = n.distance || 100,
            o = n.threshold || .4;
        if (t === e) return !0;
        if (t.length > 32) return !1;
        var s = r,
            l = function () {
                var e, n = {};
                for (e = 0; e < t.length; e++) n[t.charAt(e)] = 0;
                for (e = 0; e < t.length; e++) n[t.charAt(e)] |= 1 << t.length - e - 1;
                return n
            }(),
            c = o,
            u = e.indexOf(t, s); - 1 != u && (c = Math.min(i(0, u), c), u = e.lastIndexOf(t, s + t.length), -1 != u && (c = Math.min(i(0, u), c)));
        var d = 1 << t.length - 1;
        u = -1;
        for (var h, f, p, m = t.length + e.length, g = 0; g < t.length; g++) {
            for (h = 0, f = m; f > h;) i(g, s + f) <= c ? h = f : m = f, f = Math.floor((m - h) / 2 + h);
            m = f;
            var v = Math.max(1, s - f + 1),
                y = Math.min(s + f, e.length) + t.length,
                b = Array(y + 2);
            b[y + 1] = (1 << g) - 1;
            for (var w = y; w >= v; w--) {
                var _ = l[e.charAt(w - 1)];
                if (0 === g ? b[w] = (b[w + 1] << 1 | 1) & _ : b[w] = (b[w + 1] << 1 | 1) & _ | ((p[w + 1] | p[w]) << 1 | 1) | p[w + 1], b[w] & d) {
                    var x = i(g, w - 1);
                    if (c >= x) {
                        if (c = x, u = w - 1, !(u > s)) break;
                        v = Math.max(1, 2 * s - u)
                    }
                }
            }
            if (i(g + 1, s) > c) break;
            p = b
        }
        return 0 > u ? !1 : !0
    }
}]);
window.listJS = {
    encodeFilter: function (e) {
        var t = [];
        for (var n in e) t.push([n, ":", encodeURIComponent(e[n])].join(""));
        return t.join("/")
    },
    decodeFilter: function (e) {
        var t = e.split("/"),
            n = {};
        for (var i in t) {
            var r = t[i].split(":", 2);
            n[r[0]] = decodeURIComponent(r[1])
        }
        return n
    },
    initialize: function () {
        $(".list-searchable").each(function () {
            var e = $.extend({}, $(this).data("listOptions")),
                t = new List(this, e);
            $(this).data("listJs", t)
        })
    }
}, $(function () {
    listJS.initialize()
}), $(function () {
    $.timeago.settings.allowFuture = !0, $("time.timeago").timeago()
}),
    function (e, t) {
        "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.moment = t()
    }(this, function () {
        "use strict";

        function e() {
            return Mi.apply(null, arguments)
        }

        function t(e) {
            Mi = e
        }

        function n(e) {
            return e instanceof Array || "[object Array]" === Object.prototype.toString.call(e)
        }

        function i(e) {
            return null != e && "[object Object]" === Object.prototype.toString.call(e)
        }

        function r(e) {
            if (Object.getOwnPropertyNames) return 0 === Object.getOwnPropertyNames(e).length;
            var t;
            for (t in e)
                if (e.hasOwnProperty(t)) return !1;
            return !0
        }

        function a(e) {
            return void 0 === e
        }

        function o(e) {
            return "number" == typeof e || "[object Number]" === Object.prototype.toString.call(e)
        }

        function s(e) {
            return e instanceof Date || "[object Date]" === Object.prototype.toString.call(e)
        }

        function l(e, t) {
            var n, i = [];
            for (n = 0; n < e.length; ++n) i.push(t(e[n], n));
            return i
        }

        function c(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }

        function u(e, t) {
            for (var n in t) c(t, n) && (e[n] = t[n]);
            return c(t, "toString") && (e.toString = t.toString), c(t, "valueOf") && (e.valueOf = t.valueOf), e
        }

        function d(e, t, n, i) {
            return St(e, t, n, i, !0).utc()
        }

        function h() {
            return {
                empty: !1,
                unusedTokens: [],
                unusedInput: [],
                overflow: -2,
                charsLeftOver: 0,
                nullInput: !1,
                invalidMonth: null,
                invalidFormat: !1,
                userInvalidated: !1,
                iso: !1,
                parsedDateParts: [],
                meridiem: null,
                rfc2822: !1,
                weekdayMismatch: !1
            }
        }

        function f(e) {
            return null == e._pf && (e._pf = h()), e._pf
        }

        function p(e) {
            if (null == e._isValid) {
                var t = f(e),
                    n = Ri.call(t.parsedDateParts, function (e) {
                        return null != e
                    }),
                    i = !isNaN(e._d.getTime()) && t.overflow < 0 && !t.empty && !t.invalidMonth && !t.invalidWeekday && !t.weekdayMismatch && !t.nullInput && !t.invalidFormat && !t.userInvalidated && (!t.meridiem || t.meridiem && n);
                if (e._strict && (i = i && 0 === t.charsLeftOver && 0 === t.unusedTokens.length && void 0 === t.bigHour), null != Object.isFrozen && Object.isFrozen(e)) return i;
                e._isValid = i
            }
            return e._isValid
        }

        function m(e) {
            var t = d(NaN);
            return null != e ? u(f(t), e) : f(t).userInvalidated = !0, t
        }

        function g(e, t) {
            var n, i, r;
            if (a(t._isAMomentObject) || (e._isAMomentObject = t._isAMomentObject), a(t._i) || (e._i = t._i), a(t._f) || (e._f = t._f), a(t._l) || (e._l = t._l), a(t._strict) || (e._strict = t._strict), a(t._tzm) || (e._tzm = t._tzm), a(t._isUTC) || (e._isUTC = t._isUTC), a(t._offset) || (e._offset = t._offset), a(t._pf) || (e._pf = f(t)), a(t._locale) || (e._locale = t._locale), Ii.length > 0)
                for (n = 0; n < Ii.length; n++) i = Ii[n], r = t[i], a(r) || (e[i] = r);
            return e
        }

        function v(t) {
            g(this, t), this._d = new Date(null != t._d ? t._d.getTime() : NaN), this.isValid() || (this._d = new Date(NaN)), Pi === !1 && (Pi = !0, e.updateOffset(this), Pi = !1)
        }

        function y(e) {
            return e instanceof v || null != e && null != e._isAMomentObject
        }

        function b(e) {
            return 0 > e ? Math.ceil(e) || 0 : Math.floor(e)
        }

        function w(e) {
            var t = +e,
                n = 0;
            return 0 !== t && isFinite(t) && (n = b(t)), n
        }

        function _(e, t, n) {
            var i, r = Math.min(e.length, t.length),
                a = Math.abs(e.length - t.length),
                o = 0;
            for (i = 0; r > i; i++)(n && e[i] !== t[i] || !n && w(e[i]) !== w(t[i])) && o++;
            return o + a
        }

        function x(t) {
            e.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + t)
        }

        function k(t, n) {
            var i = !0;
            return u(function () {
                if (null != e.deprecationHandler && e.deprecationHandler(null, t), i) {
                    for (var r, a = [], o = 0; o < arguments.length; o++) {
                        if (r = "", "object" == typeof arguments[o]) {
                            r += "\n[" + o + "] ";
                            for (var s in arguments[0]) r += s + ": " + arguments[0][s] + ", ";
                            r = r.slice(0, -2)
                        } else r = arguments[o];
                        a.push(r)
                    }
                    x(t + "\nArguments: " + Array.prototype.slice.call(a).join("") + "\n" + (new Error).stack), i = !1
                }
                return n.apply(this, arguments)
            }, n)
        }

        function C(t, n) {
            null != e.deprecationHandler && e.deprecationHandler(t, n), Hi[t] || (x(n), Hi[t] = !0)
        }

        function S(e) {
            return e instanceof Function || "[object Function]" === Object.prototype.toString.call(e)
        }

        function A(e) {
            var t, n;
            for (n in e) t = e[n], S(t) ? this[n] = t : this["_" + n] = t;
            this._config = e, this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source)
        }

        function T(e, t) {
            var n, r = u({}, e);
            for (n in t) c(t, n) && (i(e[n]) && i(t[n]) ? (r[n] = {}, u(r[n], e[n]), u(r[n], t[n])) : null != t[n] ? r[n] = t[n] : delete r[n]);
            for (n in e) c(e, n) && !c(t, n) && i(e[n]) && (r[n] = u({}, r[n]));
            return r
        }

        function E(e) {
            null != e && this.set(e)
        }

        function D(e, t, n) {
            var i = this._calendar[e] || this._calendar.sameElse;
            return S(i) ? i.call(t, n) : i
        }

        function $(e) {
            var t = this._longDateFormat[e],
                n = this._longDateFormat[e.toUpperCase()];
            return t || !n ? t : (this._longDateFormat[e] = n.replace(/MMMM|MM|DD|dddd/g, function (e) {
                return e.slice(1)
            }), this._longDateFormat[e])
        }

        function M() {
            return this._invalidDate
        }

        function R(e) {
            return this._ordinal.replace("%d", e)
        }

        function I(e, t, n, i) {
            var r = this._relativeTime[n];
            return S(r) ? r(e, t, n, i) : r.replace(/%d/i, e)
        }

        function P(e, t) {
            var n = this._relativeTime[e > 0 ? "future" : "past"];
            return S(n) ? n(t) : n.replace(/%s/i, t)
        }

        function H(e, t) {
            var n = e.toLowerCase();
            Wi[n] = Wi[n + "s"] = Wi[t] = e
        }

        function O(e) {
            return "string" == typeof e ? Wi[e] || Wi[e.toLowerCase()] : void 0
        }

        function j(e) {
            var t, n, i = {};
            for (n in e) c(e, n) && (t = O(n), t && (i[t] = e[n]));
            return i
        }

        function N(e, t) {
            Ui[e] = t
        }

        function z(e) {
            var t = [];
            for (var n in e) t.push({
                unit: n,
                priority: Ui[n]
            });
            return t.sort(function (e, t) {
                return e.priority - t.priority
            }), t
        }

        function L(e, t, n) {
            var i = "" + Math.abs(e),
                r = t - i.length,
                a = e >= 0;
            return (a ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, r)).toString().substr(1) + i
        }

        function F(e, t, n, i) {
            var r = i;
            "string" == typeof i && (r = function () {
                return this[i]()
            }), e && (Vi[e] = r), t && (Vi[t[0]] = function () {
                return L(r.apply(this, arguments), t[1], t[2])
            }), n && (Vi[n] = function () {
                return this.localeData().ordinal(r.apply(this, arguments), e)
            })
        }

        function B(e) {
            return e.match(/\[[\s\S]/) ? e.replace(/^\[|\]$/g, "") : e.replace(/\\/g, "")
        }

        function W(e) {
            var t, n, i = e.match(qi);
            for (t = 0, n = i.length; n > t; t++) Vi[i[t]] ? i[t] = Vi[i[t]] : i[t] = B(i[t]);
            return function (t) {
                var r, a = "";
                for (r = 0; n > r; r++) a += S(i[r]) ? i[r].call(t, e) : i[r];
                return a
            }
        }

        function U(e, t) {
            return e.isValid() ? (t = q(t, e.localeData()), Yi[t] = Yi[t] || W(t), Yi[t](e)) : e.localeData().invalidDate()
        }

        function q(e, t) {
            function n(e) {
                return t.longDateFormat(e) || e
            }
            var i = 5;
            for (Gi.lastIndex = 0; i >= 0 && Gi.test(e);) e = e.replace(Gi, n), Gi.lastIndex = 0, i -= 1;
            return e
        }

        function G(e, t, n) {
            hr[e] = S(t) ? t : function (e, i) {
                return e && n ? n : t
            }
        }

        function Y(e, t) {
            return c(hr, e) ? hr[e](t._strict, t._locale) : new RegExp(V(e))
        }

        function V(e) {
            return X(e.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (e, t, n, i, r) {
                return t || n || i || r
            }))
        }

        function X(e) {
            return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
        }

        function K(e, t) {
            var n, i = t;
            for ("string" == typeof e && (e = [e]), o(t) && (i = function (e, n) {
                n[t] = w(e)
            }), n = 0; n < e.length; n++) fr[e[n]] = i
        }

        function Z(e, t) {
            K(e, function (e, n, i, r) {
                i._w = i._w || {}, t(e, i._w, i, r)
            })
        }

        function Q(e, t, n) {
            null != t && c(fr, e) && fr[e](t, n._a, n, e)
        }

        function J(e) {
            return ee(e) ? 366 : 365
        }

        function ee(e) {
            return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
        }

        function te() {
            return ee(this.year())
        }

        function ne(t, n) {
            return function (i) {
                return null != i ? (re(this, t, i), e.updateOffset(this, n), this) : ie(this, t)
            }
        }

        function ie(e, t) {
            return e.isValid() ? e._d["get" + (e._isUTC ? "UTC" : "") + t]() : NaN
        }

        function re(e, t, n) {
            e.isValid() && !isNaN(n) && ("FullYear" === t && ee(e.year()) && 1 === e.month() && 29 === e.date() ? e._d["set" + (e._isUTC ? "UTC" : "") + t](n, e.month(), le(n, e.month())) : e._d["set" + (e._isUTC ? "UTC" : "") + t](n))
        }

        function ae(e) {
            return e = O(e), S(this[e]) ? this[e]() : this
        }

        function oe(e, t) {
            if ("object" == typeof e) {
                e = j(e);
                for (var n = z(e), i = 0; i < n.length; i++) this[n[i].unit](e[n[i].unit])
            } else if (e = O(e), S(this[e])) return this[e](t);
            return this
        }

        function se(e, t) {
            return (e % t + t) % t
        }

        function le(e, t) {
            if (isNaN(e) || isNaN(t)) return NaN;
            var n = se(t, 12);
            return e += (t - n) / 12, 1 === n ? ee(e) ? 29 : 28 : 31 - n % 7 % 2
        }

        function ce(e, t) {
            return e ? n(this._months) ? this._months[e.month()] : this._months[(this._months.isFormat || Sr).test(t) ? "format" : "standalone"][e.month()] : n(this._months) ? this._months : this._months.standalone
        }

        function ue(e, t) {
            return e ? n(this._monthsShort) ? this._monthsShort[e.month()] : this._monthsShort[Sr.test(t) ? "format" : "standalone"][e.month()] : n(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone
        }

        function de(e, t, n) {
            var i, r, a, o = e.toLocaleLowerCase();
            if (!this._monthsParse)
                for (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = [], i = 0; 12 > i; ++i) a = d([2e3, i]), this._shortMonthsParse[i] = this.monthsShort(a, "").toLocaleLowerCase(), this._longMonthsParse[i] = this.months(a, "").toLocaleLowerCase();
            return n ? "MMM" === t ? (r = kr.call(this._shortMonthsParse, o), -1 !== r ? r : null) : (r = kr.call(this._longMonthsParse, o), -1 !== r ? r : null) : "MMM" === t ? (r = kr.call(this._shortMonthsParse, o), -1 !== r ? r : (r = kr.call(this._longMonthsParse, o), -1 !== r ? r : null)) : (r = kr.call(this._longMonthsParse, o), -1 !== r ? r : (r = kr.call(this._shortMonthsParse, o), -1 !== r ? r : null))
        }

        function he(e, t, n) {
            var i, r, a;
            if (this._monthsParseExact) return de.call(this, e, t, n);
            for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), i = 0; 12 > i; i++) {
                if (r = d([2e3, i]), n && !this._longMonthsParse[i] && (this._longMonthsParse[i] = new RegExp("^" + this.months(r, "").replace(".", "") + "$", "i"), this._shortMonthsParse[i] = new RegExp("^" + this.monthsShort(r, "").replace(".", "") + "$", "i")), n || this._monthsParse[i] || (a = "^" + this.months(r, "") + "|^" + this.monthsShort(r, ""), this._monthsParse[i] = new RegExp(a.replace(".", ""), "i")), n && "MMMM" === t && this._longMonthsParse[i].test(e)) return i;
                if (n && "MMM" === t && this._shortMonthsParse[i].test(e)) return i;
                if (!n && this._monthsParse[i].test(e)) return i
            }
        }

        function fe(e, t) {
            var n;
            if (!e.isValid()) return e;
            if ("string" == typeof t)
                if (/^\d+$/.test(t)) t = w(t);
                else if (t = e.localeData().monthsParse(t), !o(t)) return e;
            return n = Math.min(e.date(), le(e.year(), t)), e._d["set" + (e._isUTC ? "UTC" : "") + "Month"](t, n), e
        }

        function pe(t) {
            return null != t ? (fe(this, t), e.updateOffset(this, !0), this) : ie(this, "Month")
        }

        function me() {
            return le(this.year(), this.month())
        }

        function ge(e) {
            return this._monthsParseExact ? (c(this, "_monthsRegex") || ye.call(this), e ? this._monthsShortStrictRegex : this._monthsShortRegex) : (c(this, "_monthsShortRegex") || (this._monthsShortRegex = Er), this._monthsShortStrictRegex && e ? this._monthsShortStrictRegex : this._monthsShortRegex)
        }

        function ve(e) {
            return this._monthsParseExact ? (c(this, "_monthsRegex") || ye.call(this), e ? this._monthsStrictRegex : this._monthsRegex) : (c(this, "_monthsRegex") || (this._monthsRegex = Dr), this._monthsStrictRegex && e ? this._monthsStrictRegex : this._monthsRegex)
        }

        function ye() {
            function e(e, t) {
                return t.length - e.length
            }
            var t, n, i = [],
                r = [],
                a = [];
            for (t = 0; 12 > t; t++) n = d([2e3, t]), i.push(this.monthsShort(n, "")), r.push(this.months(n, "")), a.push(this.months(n, "")), a.push(this.monthsShort(n, ""));
            for (i.sort(e), r.sort(e), a.sort(e), t = 0; 12 > t; t++) i[t] = X(i[t]), r[t] = X(r[t]);
            for (t = 0; 24 > t; t++) a[t] = X(a[t]);
            this._monthsRegex = new RegExp("^(" + a.join("|") + ")", "i"), this._monthsShortRegex = this._monthsRegex, this._monthsStrictRegex = new RegExp("^(" + r.join("|") + ")", "i"), this._monthsShortStrictRegex = new RegExp("^(" + i.join("|") + ")", "i")
        }

        function be(e, t, n, i, r, a, o) {
            var s;
            return 100 > e && e >= 0 ? (s = new Date(e + 400, t, n, i, r, a, o), isFinite(s.getFullYear()) && s.setFullYear(e)) : s = new Date(e, t, n, i, r, a, o), s
        }

        function we(e) {
            var t;
            if (100 > e && e >= 0) {
                var n = Array.prototype.slice.call(arguments);
                n[0] = e + 400, t = new Date(Date.UTC.apply(null, n)), isFinite(t.getUTCFullYear()) && t.setUTCFullYear(e)
            } else t = new Date(Date.UTC.apply(null, arguments));
            return t
        }

        function _e(e, t, n) {
            var i = 7 + t - n,
                r = (7 + we(e, 0, i).getUTCDay() - t) % 7;
            return -r + i - 1
        }

        function xe(e, t, n, i, r) {
            var a, o, s = (7 + n - i) % 7,
                l = _e(e, i, r),
                c = 1 + 7 * (t - 1) + s + l;
            return 0 >= c ? (a = e - 1, o = J(a) + c) : c > J(e) ? (a = e + 1, o = c - J(e)) : (a = e, o = c), {
                year: a,
                dayOfYear: o
            }
        }

        function ke(e, t, n) {
            var i, r, a = _e(e.year(), t, n),
                o = Math.floor((e.dayOfYear() - a - 1) / 7) + 1;
            return 1 > o ? (r = e.year() - 1, i = o + Ce(r, t, n)) : o > Ce(e.year(), t, n) ? (i = o - Ce(e.year(), t, n), r = e.year() + 1) : (r = e.year(), i = o), {
                week: i,
                year: r
            }
        }

        function Ce(e, t, n) {
            var i = _e(e, t, n),
                r = _e(e + 1, t, n);
            return (J(e) - i + r) / 7
        }

        function Se(e) {
            return ke(e, this._week.dow, this._week.doy).week
        }

        function Ae() {
            return this._week.dow
        }

        function Te() {
            return this._week.doy
        }

        function Ee(e) {
            var t = this.localeData().week(this);
            return null == e ? t : this.add(7 * (e - t), "d")
        }

        function De(e) {
            var t = ke(this, 1, 4).week;
            return null == e ? t : this.add(7 * (e - t), "d")
        }

        function $e(e, t) {
            return "string" != typeof e ? e : isNaN(e) ? (e = t.weekdaysParse(e), "number" == typeof e ? e : null) : parseInt(e, 10)
        }

        function Me(e, t) {
            return "string" == typeof e ? t.weekdaysParse(e) % 7 || 7 : isNaN(e) ? null : e
        }

        function Re(e, t) {
            return e.slice(t, 7).concat(e.slice(0, t))
        }

        function Ie(e, t) {
            var i = n(this._weekdays) ? this._weekdays : this._weekdays[e && e !== !0 && this._weekdays.isFormat.test(t) ? "format" : "standalone"];
            return e === !0 ? Re(i, this._week.dow) : e ? i[e.day()] : i
        }

        function Pe(e) {
            return e === !0 ? Re(this._weekdaysShort, this._week.dow) : e ? this._weekdaysShort[e.day()] : this._weekdaysShort
        }

        function He(e) {
            return e === !0 ? Re(this._weekdaysMin, this._week.dow) : e ? this._weekdaysMin[e.day()] : this._weekdaysMin
        }

        function Oe(e, t, n) {
            var i, r, a, o = e.toLocaleLowerCase();
            if (!this._weekdaysParse)
                for (this._weekdaysParse = [], this._shortWeekdaysParse = [], this._minWeekdaysParse = [], i = 0; 7 > i; ++i) a = d([2e3, 1]).day(i), this._minWeekdaysParse[i] = this.weekdaysMin(a, "").toLocaleLowerCase(), this._shortWeekdaysParse[i] = this.weekdaysShort(a, "").toLocaleLowerCase(), this._weekdaysParse[i] = this.weekdays(a, "").toLocaleLowerCase();
            return n ? "dddd" === t ? (r = kr.call(this._weekdaysParse, o), -1 !== r ? r : null) : "ddd" === t ? (r = kr.call(this._shortWeekdaysParse, o), -1 !== r ? r : null) : (r = kr.call(this._minWeekdaysParse, o), -1 !== r ? r : null) : "dddd" === t ? (r = kr.call(this._weekdaysParse, o), -1 !== r ? r : (r = kr.call(this._shortWeekdaysParse, o), -1 !== r ? r : (r = kr.call(this._minWeekdaysParse, o), -1 !== r ? r : null))) : "ddd" === t ? (r = kr.call(this._shortWeekdaysParse, o), -1 !== r ? r : (r = kr.call(this._weekdaysParse, o), -1 !== r ? r : (r = kr.call(this._minWeekdaysParse, o), -1 !== r ? r : null))) : (r = kr.call(this._minWeekdaysParse, o), -1 !== r ? r : (r = kr.call(this._weekdaysParse, o), -1 !== r ? r : (r = kr.call(this._shortWeekdaysParse, o), -1 !== r ? r : null)))
        }

        function je(e, t, n) {
            var i, r, a;
            if (this._weekdaysParseExact) return Oe.call(this, e, t, n);
            for (this._weekdaysParse || (this._weekdaysParse = [], this._minWeekdaysParse = [], this._shortWeekdaysParse = [], this._fullWeekdaysParse = []), i = 0; 7 > i; i++) {
                if (r = d([2e3, 1]).day(i), n && !this._fullWeekdaysParse[i] && (this._fullWeekdaysParse[i] = new RegExp("^" + this.weekdays(r, "").replace(".", "\\.?") + "$", "i"), this._shortWeekdaysParse[i] = new RegExp("^" + this.weekdaysShort(r, "").replace(".", "\\.?") + "$", "i"), this._minWeekdaysParse[i] = new RegExp("^" + this.weekdaysMin(r, "").replace(".", "\\.?") + "$", "i")), this._weekdaysParse[i] || (a = "^" + this.weekdays(r, "") + "|^" + this.weekdaysShort(r, "") + "|^" + this.weekdaysMin(r, ""), this._weekdaysParse[i] = new RegExp(a.replace(".", ""), "i")), n && "dddd" === t && this._fullWeekdaysParse[i].test(e)) return i;
                if (n && "ddd" === t && this._shortWeekdaysParse[i].test(e)) return i;
                if (n && "dd" === t && this._minWeekdaysParse[i].test(e)) return i;
                if (!n && this._weekdaysParse[i].test(e)) return i
            }
        }

        function Ne(e) {
            if (!this.isValid()) return null != e ? this : NaN;
            var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            return null != e ? (e = $e(e, this.localeData()), this.add(e - t, "d")) : t
        }

        function ze(e) {
            if (!this.isValid()) return null != e ? this : NaN;
            var t = (this.day() + 7 - this.localeData()._week.dow) % 7;
            return null == e ? t : this.add(e - t, "d")
        }

        function Le(e) {
            if (!this.isValid()) return null != e ? this : NaN;
            if (null != e) {
                var t = Me(e, this.localeData());
                return this.day(this.day() % 7 ? t : t - 7)
            }
            return this.day() || 7
        }

        function Fe(e) {
            return this._weekdaysParseExact ? (c(this, "_weekdaysRegex") || Ue.call(this), e ? this._weekdaysStrictRegex : this._weekdaysRegex) : (c(this, "_weekdaysRegex") || (this._weekdaysRegex = Pr), this._weekdaysStrictRegex && e ? this._weekdaysStrictRegex : this._weekdaysRegex)
        }

        function Be(e) {
            return this._weekdaysParseExact ? (c(this, "_weekdaysRegex") || Ue.call(this), e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex) : (c(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = Hr), this._weekdaysShortStrictRegex && e ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex)
        }

        function We(e) {
            return this._weekdaysParseExact ? (c(this, "_weekdaysRegex") || Ue.call(this), e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex) : (c(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = Or), this._weekdaysMinStrictRegex && e ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex)
        }

        function Ue() {
            function e(e, t) {
                return t.length - e.length
            }
            var t, n, i, r, a, o = [],
                s = [],
                l = [],
                c = [];
            for (t = 0; 7 > t; t++) n = d([2e3, 1]).day(t), i = this.weekdaysMin(n, ""), r = this.weekdaysShort(n, ""), a = this.weekdays(n, ""), o.push(i), s.push(r), l.push(a), c.push(i), c.push(r), c.push(a);
            for (o.sort(e), s.sort(e), l.sort(e), c.sort(e), t = 0; 7 > t; t++) s[t] = X(s[t]), l[t] = X(l[t]), c[t] = X(c[t]);
            this._weekdaysRegex = new RegExp("^(" + c.join("|") + ")", "i"), this._weekdaysShortRegex = this._weekdaysRegex, this._weekdaysMinRegex = this._weekdaysRegex, this._weekdaysStrictRegex = new RegExp("^(" + l.join("|") + ")", "i"), this._weekdaysShortStrictRegex = new RegExp("^(" + s.join("|") + ")", "i"), this._weekdaysMinStrictRegex = new RegExp("^(" + o.join("|") + ")", "i")
        }

        function qe() {
            return this.hours() % 12 || 12
        }

        function Ge() {
            return this.hours() || 24
        }

        function Ye(e, t) {
            F(e, 0, 0, function () {
                return this.localeData().meridiem(this.hours(), this.minutes(), t)
            })
        }

        function Ve(e, t) {
            return t._meridiemParse
        }

        function Xe(e) {
            return "p" === (e + "").toLowerCase().charAt(0)
        }

        function Ke(e, t, n) {
            return e > 11 ? n ? "pm" : "PM" : n ? "am" : "AM"
        }

        function Ze(e) {
            return e ? e.toLowerCase().replace("_", "-") : e
        }

        function Qe(e) {
            for (var t, n, i, r, a = 0; a < e.length;) {
                for (r = Ze(e[a]).split("-"), t = r.length, n = Ze(e[a + 1]), n = n ? n.split("-") : null; t > 0;) {
                    if (i = Je(r.slice(0, t).join("-"))) return i;
                    if (n && n.length >= t && _(r, n, !0) >= t - 1) break;
                    t--
                }
                a++
            }
            return jr
        }

        function Je(e) {
            var t = null;
            if (!Fr[e] && "undefined" != typeof module && module && module.exports) try {
                t = jr._abbr;
                var n = require;
                n("./locale/" + e), et(t)
            } catch (i) { }
            return Fr[e]
        }

        function et(e, t) {
            var n;
            return e && (n = a(t) ? it(e) : tt(e, t), n ? jr = n : "undefined" != typeof console && console.warn && console.warn("Locale " + e + " not found. Did you forget to load it?")), jr._abbr
        }

        function tt(e, t) {
            if (null !== t) {
                var n, i = Lr;
                if (t.abbr = e, null != Fr[e]) C("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."), i = Fr[e]._config;
                else if (null != t.parentLocale)
                    if (null != Fr[t.parentLocale]) i = Fr[t.parentLocale]._config;
                    else {
                        if (n = Je(t.parentLocale), null == n) return Br[t.parentLocale] || (Br[t.parentLocale] = []), Br[t.parentLocale].push({
                            name: e,
                            config: t
                        }), null;
                        i = n._config
                    } return Fr[e] = new E(T(i, t)), Br[e] && Br[e].forEach(function (e) {
                        tt(e.name, e.config)
                    }), et(e), Fr[e]
            }
            return delete Fr[e], null
        }

        function nt(e, t) {
            if (null != t) {
                var n, i, r = Lr;
                i = Je(e), null != i && (r = i._config), t = T(r, t), n = new E(t), n.parentLocale = Fr[e], Fr[e] = n, et(e)
            } else null != Fr[e] && (null != Fr[e].parentLocale ? Fr[e] = Fr[e].parentLocale : null != Fr[e] && delete Fr[e]);
            return Fr[e]
        }

        function it(e) {
            var t;
            if (e && e._locale && e._locale._abbr && (e = e._locale._abbr), !e) return jr;
            if (!n(e)) {
                if (t = Je(e)) return t;
                e = [e]
            }
            return Qe(e)
        }

        function rt() {
            return Oi(Fr)
        }

        function at(e) {
            var t, n = e._a;
            return n && -2 === f(e).overflow && (t = n[mr] < 0 || n[mr] > 11 ? mr : n[gr] < 1 || n[gr] > le(n[pr], n[mr]) ? gr : n[vr] < 0 || n[vr] > 24 || 24 === n[vr] && (0 !== n[yr] || 0 !== n[br] || 0 !== n[wr]) ? vr : n[yr] < 0 || n[yr] > 59 ? yr : n[br] < 0 || n[br] > 59 ? br : n[wr] < 0 || n[wr] > 999 ? wr : -1, f(e)._overflowDayOfYear && (pr > t || t > gr) && (t = gr), f(e)._overflowWeeks && -1 === t && (t = _r), f(e)._overflowWeekday && -1 === t && (t = xr), f(e).overflow = t), e
        }

        function ot(e, t, n) {
            return null != e ? e : null != t ? t : n
        }

        function st(t) {
            var n = new Date(e.now());
            return t._useUTC ? [n.getUTCFullYear(), n.getUTCMonth(), n.getUTCDate()] : [n.getFullYear(), n.getMonth(), n.getDate()]
        }

        function lt(e) {
            var t, n, i, r, a, o = [];
            if (!e._d) {
                for (i = st(e), e._w && null == e._a[gr] && null == e._a[mr] && ct(e), null != e._dayOfYear && (a = ot(e._a[pr], i[pr]), (e._dayOfYear > J(a) || 0 === e._dayOfYear) && (f(e)._overflowDayOfYear = !0), n = we(a, 0, e._dayOfYear), e._a[mr] = n.getUTCMonth(), e._a[gr] = n.getUTCDate()), t = 0; 3 > t && null == e._a[t]; ++t) e._a[t] = o[t] = i[t];
                for (; 7 > t; t++) e._a[t] = o[t] = null == e._a[t] ? 2 === t ? 1 : 0 : e._a[t];
                24 === e._a[vr] && 0 === e._a[yr] && 0 === e._a[br] && 0 === e._a[wr] && (e._nextDay = !0, e._a[vr] = 0), e._d = (e._useUTC ? we : be).apply(null, o), r = e._useUTC ? e._d.getUTCDay() : e._d.getDay(), null != e._tzm && e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm), e._nextDay && (e._a[vr] = 24), e._w && "undefined" != typeof e._w.d && e._w.d !== r && (f(e).weekdayMismatch = !0)
            }
        }

        function ct(e) {
            var t, n, i, r, a, o, s, l;
            if (t = e._w, null != t.GG || null != t.W || null != t.E) a = 1, o = 4, n = ot(t.GG, e._a[pr], ke(At(), 1, 4).year), i = ot(t.W, 1), r = ot(t.E, 1), (1 > r || r > 7) && (l = !0);
            else {
                a = e._locale._week.dow, o = e._locale._week.doy;
                var c = ke(At(), a, o);
                n = ot(t.gg, e._a[pr], c.year), i = ot(t.w, c.week), null != t.d ? (r = t.d, (0 > r || r > 6) && (l = !0)) : null != t.e ? (r = t.e + a, (t.e < 0 || t.e > 6) && (l = !0)) : r = a
            }
            1 > i || i > Ce(n, a, o) ? f(e)._overflowWeeks = !0 : null != l ? f(e)._overflowWeekday = !0 : (s = xe(n, i, r, a, o), e._a[pr] = s.year, e._dayOfYear = s.dayOfYear)
        }

        function ut(e) {
            var t, n, i, r, a, o, s = e._i,
                l = Wr.exec(s) || Ur.exec(s);
            if (l) {
                for (f(e).iso = !0, t = 0, n = Gr.length; n > t; t++)
                    if (Gr[t][1].exec(l[1])) {
                        r = Gr[t][0], i = Gr[t][2] !== !1;
                        break
                    } if (null == r) return void (e._isValid = !1);
                if (l[3]) {
                    for (t = 0, n = Yr.length; n > t; t++)
                        if (Yr[t][1].exec(l[3])) {
                            a = (l[2] || " ") + Yr[t][0];
                            break
                        } if (null == a) return void (e._isValid = !1)
                }
                if (!i && null != a) return void (e._isValid = !1);
                if (l[4]) {
                    if (!qr.exec(l[4])) return void (e._isValid = !1);
                    o = "Z"
                }
                e._f = r + (a || "") + (o || ""), yt(e)
            } else e._isValid = !1
        }

        function dt(e, t, n, i, r, a) {
            var o = [ht(e), Tr.indexOf(t), parseInt(n, 10), parseInt(i, 10), parseInt(r, 10)];
            return a && o.push(parseInt(a, 10)), o
        }

        function ht(e) {
            var t = parseInt(e, 10);
            return 49 >= t ? 2e3 + t : 999 >= t ? 1900 + t : t
        }

        function ft(e) {
            return e.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, "")
        }

        function pt(e, t, n) {
            if (e) {
                var i = Rr.indexOf(e),
                    r = new Date(t[0], t[1], t[2]).getDay();
                if (i !== r) return f(n).weekdayMismatch = !0, n._isValid = !1, !1
            }
            return !0
        }

        function mt(e, t, n) {
            if (e) return Kr[e];
            if (t) return 0;
            var i = parseInt(n, 10),
                r = i % 100,
                a = (i - r) / 100;
            return 60 * a + r
        }

        function gt(e) {
            var t = Xr.exec(ft(e._i));
            if (t) {
                var n = dt(t[4], t[3], t[2], t[5], t[6], t[7]);
                if (!pt(t[1], n, e)) return;
                e._a = n, e._tzm = mt(t[8], t[9], t[10]), e._d = we.apply(null, e._a), e._d.setUTCMinutes(e._d.getUTCMinutes() - e._tzm), f(e).rfc2822 = !0
            } else e._isValid = !1
        }

        function vt(t) {
            var n = Vr.exec(t._i);
            return null !== n ? void (t._d = new Date(+n[1])) : (ut(t), void (t._isValid === !1 && (delete t._isValid, gt(t), t._isValid === !1 && (delete t._isValid, e.createFromInputFallback(t)))))
        }

        function yt(t) {
            if (t._f === e.ISO_8601) return void ut(t);
            if (t._f === e.RFC_2822) return void gt(t);
            t._a = [], f(t).empty = !0;
            var n, i, r, a, o, s = "" + t._i,
                l = s.length,
                c = 0;
            for (r = q(t._f, t._locale).match(qi) || [], n = 0; n < r.length; n++) a = r[n], i = (s.match(Y(a, t)) || [])[0], i && (o = s.substr(0, s.indexOf(i)), o.length > 0 && f(t).unusedInput.push(o), s = s.slice(s.indexOf(i) + i.length), c += i.length), Vi[a] ? (i ? f(t).empty = !1 : f(t).unusedTokens.push(a), Q(a, i, t)) : t._strict && !i && f(t).unusedTokens.push(a);
            f(t).charsLeftOver = l - c, s.length > 0 && f(t).unusedInput.push(s), t._a[vr] <= 12 && f(t).bigHour === !0 && t._a[vr] > 0 && (f(t).bigHour = void 0), f(t).parsedDateParts = t._a.slice(0), f(t).meridiem = t._meridiem, t._a[vr] = bt(t._locale, t._a[vr], t._meridiem), lt(t), at(t)
        }

        function bt(e, t, n) {
            var i;
            return null == n ? t : null != e.meridiemHour ? e.meridiemHour(t, n) : null != e.isPM ? (i = e.isPM(n), i && 12 > t && (t += 12), i || 12 !== t || (t = 0), t) : t
        }

        function wt(e) {
            var t, n, i, r, a;
            if (0 === e._f.length) return f(e).invalidFormat = !0, void (e._d = new Date(NaN));
            for (r = 0; r < e._f.length; r++) a = 0, t = g({}, e), null != e._useUTC && (t._useUTC = e._useUTC), t._f = e._f[r], yt(t), p(t) && (a += f(t).charsLeftOver, a += 10 * f(t).unusedTokens.length, f(t).score = a, (null == i || i > a) && (i = a, n = t));
            u(e, n || t)
        }

        function _t(e) {
            if (!e._d) {
                var t = j(e._i);
                e._a = l([t.year, t.month, t.day || t.date, t.hour, t.minute, t.second, t.millisecond], function (e) {
                    return e && parseInt(e, 10)
                }), lt(e)
            }
        }

        function xt(e) {
            var t = new v(at(kt(e)));
            return t._nextDay && (t.add(1, "d"), t._nextDay = void 0), t
        }

        function kt(e) {
            var t = e._i,
                i = e._f;
            return e._locale = e._locale || it(e._l), null === t || void 0 === i && "" === t ? m({
                nullInput: !0
            }) : ("string" == typeof t && (e._i = t = e._locale.preparse(t)), y(t) ? new v(at(t)) : (s(t) ? e._d = t : n(i) ? wt(e) : i ? yt(e) : Ct(e), p(e) || (e._d = null), e))
        }

        function Ct(t) {
            var r = t._i;
            a(r) ? t._d = new Date(e.now()) : s(r) ? t._d = new Date(r.valueOf()) : "string" == typeof r ? vt(t) : n(r) ? (t._a = l(r.slice(0), function (e) {
                return parseInt(e, 10)
            }), lt(t)) : i(r) ? _t(t) : o(r) ? t._d = new Date(r) : e.createFromInputFallback(t)
        }

        function St(e, t, a, o, s) {
            var l = {};
            return (a === !0 || a === !1) && (o = a, a = void 0), (i(e) && r(e) || n(e) && 0 === e.length) && (e = void 0), l._isAMomentObject = !0, l._useUTC = l._isUTC = s, l._l = a, l._i = e, l._f = t, l._strict = o, xt(l)
        }

        function At(e, t, n, i) {
            return St(e, t, n, i, !1)
        }

        function Tt(e, t) {
            var i, r;
            if (1 === t.length && n(t[0]) && (t = t[0]), !t.length) return At();
            for (i = t[0], r = 1; r < t.length; ++r)(!t[r].isValid() || t[r][e](i)) && (i = t[r]);
            return i
        }

        function Et() {
            var e = [].slice.call(arguments, 0);
            return Tt("isBefore", e)
        }

        function Dt() {
            var e = [].slice.call(arguments, 0);
            return Tt("isAfter", e)
        }

        function $t(e) {
            for (var t in e)
                if (-1 === kr.call(ea, t) || null != e[t] && isNaN(e[t])) return !1;
            for (var n = !1, i = 0; i < ea.length; ++i)
                if (e[ea[i]]) {
                    if (n) return !1;
                    parseFloat(e[ea[i]]) !== w(e[ea[i]]) && (n = !0)
                } return !0
        }

        function Mt() {
            return this._isValid
        }

        function Rt() {
            return Zt(NaN)
        }

        function It(e) {
            var t = j(e),
                n = t.year || 0,
                i = t.quarter || 0,
                r = t.month || 0,
                a = t.week || t.isoWeek || 0,
                o = t.day || 0,
                s = t.hour || 0,
                l = t.minute || 0,
                c = t.second || 0,
                u = t.millisecond || 0;
            this._isValid = $t(t), this._milliseconds = +u + 1e3 * c + 6e4 * l + 1e3 * s * 60 * 60, this._days = +o + 7 * a, this._months = +r + 3 * i + 12 * n, this._data = {}, this._locale = it(), this._bubble()
        }

        function Pt(e) {
            return e instanceof It
        }

        function Ht(e) {
            return 0 > e ? -1 * Math.round(-1 * e) : Math.round(e)
        }

        function Ot(e, t) {
            F(e, 0, 0, function () {
                var e = this.utcOffset(),
                    n = "+";
                return 0 > e && (e = -e, n = "-"), n + L(~~(e / 60), 2) + t + L(~~e % 60, 2)
            })
        }

        function jt(e, t) {
            var n = (t || "").match(e);
            if (null === n) return null;
            var i = n[n.length - 1] || [],
                r = (i + "").match(ta) || ["-", 0, 0],
                a = +(60 * r[1]) + w(r[2]);
            return 0 === a ? 0 : "+" === r[0] ? a : -a
        }

        function Nt(t, n) {
            var i, r;
            return n._isUTC ? (i = n.clone(), r = (y(t) || s(t) ? t.valueOf() : At(t).valueOf()) - i.valueOf(), i._d.setTime(i._d.valueOf() + r), e.updateOffset(i, !1), i) : At(t).local()
        }

        function zt(e) {
            return 15 * -Math.round(e._d.getTimezoneOffset() / 15)
        }

        function Lt(t, n, i) {
            var r, a = this._offset || 0;
            if (!this.isValid()) return null != t ? this : NaN;
            if (null != t) {
                if ("string" == typeof t) {
                    if (t = jt(cr, t), null === t) return this
                } else Math.abs(t) < 16 && !i && (t = 60 * t);
                return !this._isUTC && n && (r = zt(this)), this._offset = t, this._isUTC = !0, null != r && this.add(r, "m"), a !== t && (!n || this._changeInProgress ? nn(this, Zt(t - a, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, e.updateOffset(this, !0), this._changeInProgress = null)), this
            }
            return this._isUTC ? a : zt(this)
        }

        function Ft(e, t) {
            return null != e ? ("string" != typeof e && (e = -e), this.utcOffset(e, t), this) : -this.utcOffset()
        }

        function Bt(e) {
            return this.utcOffset(0, e)
        }

        function Wt(e) {
            return this._isUTC && (this.utcOffset(0, e), this._isUTC = !1, e && this.subtract(zt(this), "m")), this
        }

        function Ut() {
            if (null != this._tzm) this.utcOffset(this._tzm, !1, !0);
            else if ("string" == typeof this._i) {
                var e = jt(lr, this._i);
                null != e ? this.utcOffset(e) : this.utcOffset(0, !0)
            }
            return this
        }

        function qt(e) {
            return this.isValid() ? (e = e ? At(e).utcOffset() : 0, (this.utcOffset() - e) % 60 === 0) : !1
        }

        function Gt() {
            return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
        }

        function Yt() {
            if (!a(this._isDSTShifted)) return this._isDSTShifted;
            var e = {};
            if (g(e, this), e = kt(e), e._a) {
                var t = e._isUTC ? d(e._a) : At(e._a);
                this._isDSTShifted = this.isValid() && _(e._a, t.toArray()) > 0
            } else this._isDSTShifted = !1;
            return this._isDSTShifted
        }

        function Vt() {
            return this.isValid() ? !this._isUTC : !1
        }

        function Xt() {
            return this.isValid() ? this._isUTC : !1
        }

        function Kt() {
            return this.isValid() ? this._isUTC && 0 === this._offset : !1
        }

        function Zt(e, t) {
            var n, i, r, a = e,
                s = null;
            return Pt(e) ? a = {
                ms: e._milliseconds,
                d: e._days,
                M: e._months
            } : o(e) ? (a = {}, t ? a[t] = e : a.milliseconds = e) : (s = na.exec(e)) ? (n = "-" === s[1] ? -1 : 1, a = {
                y: 0,
                d: w(s[gr]) * n,
                h: w(s[vr]) * n,
                m: w(s[yr]) * n,
                s: w(s[br]) * n,
                ms: w(Ht(1e3 * s[wr])) * n
            }) : (s = ia.exec(e)) ? (n = "-" === s[1] ? -1 : 1, a = {
                y: Qt(s[2], n),
                M: Qt(s[3], n),
                w: Qt(s[4], n),
                d: Qt(s[5], n),
                h: Qt(s[6], n),
                m: Qt(s[7], n),
                s: Qt(s[8], n)
            }) : null == a ? a = {} : "object" == typeof a && ("from" in a || "to" in a) && (r = en(At(a.from), At(a.to)), a = {}, a.ms = r.milliseconds, a.M = r.months), i = new It(a), Pt(e) && c(e, "_locale") && (i._locale = e._locale), i
        }

        function Qt(e, t) {
            var n = e && parseFloat(e.replace(",", "."));
            return (isNaN(n) ? 0 : n) * t
        }

        function Jt(e, t) {
            var n = {};
            return n.months = t.month() - e.month() + 12 * (t.year() - e.year()), e.clone().add(n.months, "M").isAfter(t) && --n.months, n.milliseconds = +t - +e.clone().add(n.months, "M"), n
        }

        function en(e, t) {
            var n;
            return e.isValid() && t.isValid() ? (t = Nt(t, e), e.isBefore(t) ? n = Jt(e, t) : (n = Jt(t, e), n.milliseconds = -n.milliseconds, n.months = -n.months), n) : {
                milliseconds: 0,
                months: 0
            }
        }

        function tn(e, t) {
            return function (n, i) {
                var r, a;
                return null === i || isNaN(+i) || (C(t, "moment()." + t + "(period, number) is deprecated. Please use moment()." + t + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."), a = n, n = i, i = a), n = "string" == typeof n ? +n : n, r = Zt(n, i), nn(this, r, e), this
            }
        }

        function nn(t, n, i, r) {
            var a = n._milliseconds,
                o = Ht(n._days),
                s = Ht(n._months);
            t.isValid() && (r = null == r ? !0 : r, s && fe(t, ie(t, "Month") + s * i), o && re(t, "Date", ie(t, "Date") + o * i), a && t._d.setTime(t._d.valueOf() + a * i), r && e.updateOffset(t, o || s))
        }

        function rn(e, t) {
            var n = e.diff(t, "days", !0);
            return -6 > n ? "sameElse" : -1 > n ? "lastWeek" : 0 > n ? "lastDay" : 1 > n ? "sameDay" : 2 > n ? "nextDay" : 7 > n ? "nextWeek" : "sameElse"
        }

        function an(t, n) {
            var i = t || At(),
                r = Nt(i, this).startOf("day"),
                a = e.calendarFormat(this, r) || "sameElse",
                o = n && (S(n[a]) ? n[a].call(this, i) : n[a]);
            return this.format(o || this.localeData().calendar(a, this, At(i)))
        }

        function on() {
            return new v(this)
        }

        function sn(e, t) {
            var n = y(e) ? e : At(e);
            return this.isValid() && n.isValid() ? (t = O(t) || "millisecond", "millisecond" === t ? this.valueOf() > n.valueOf() : n.valueOf() < this.clone().startOf(t).valueOf()) : !1
        }

        function ln(e, t) {
            var n = y(e) ? e : At(e);
            return this.isValid() && n.isValid() ? (t = O(t) || "millisecond", "millisecond" === t ? this.valueOf() < n.valueOf() : this.clone().endOf(t).valueOf() < n.valueOf()) : !1
        }

        function cn(e, t, n, i) {
            var r = y(e) ? e : At(e),
                a = y(t) ? t : At(t);
            return this.isValid() && r.isValid() && a.isValid() ? (i = i || "()", ("(" === i[0] ? this.isAfter(r, n) : !this.isBefore(r, n)) && (")" === i[1] ? this.isBefore(a, n) : !this.isAfter(a, n))) : !1
        }

        function un(e, t) {
            var n, i = y(e) ? e : At(e);
            return this.isValid() && i.isValid() ? (t = O(t) || "millisecond", "millisecond" === t ? this.valueOf() === i.valueOf() : (n = i.valueOf(), this.clone().startOf(t).valueOf() <= n && n <= this.clone().endOf(t).valueOf())) : !1
        }

        function dn(e, t) {
            return this.isSame(e, t) || this.isAfter(e, t)
        }

        function hn(e, t) {
            return this.isSame(e, t) || this.isBefore(e, t)
        }

        function fn(e, t, n) {
            var i, r, a;
            if (!this.isValid()) return NaN;
            if (i = Nt(e, this), !i.isValid()) return NaN;
            switch (r = 6e4 * (i.utcOffset() - this.utcOffset()), t = O(t)) {
                case "year":
                    a = pn(this, i) / 12;
                    break;
                case "month":
                    a = pn(this, i);
                    break;
                case "quarter":
                    a = pn(this, i) / 3;
                    break;
                case "second":
                    a = (this - i) / 1e3;
                    break;
                case "minute":
                    a = (this - i) / 6e4;
                    break;
                case "hour":
                    a = (this - i) / 36e5;
                    break;
                case "day":
                    a = (this - i - r) / 864e5;
                    break;
                case "week":
                    a = (this - i - r) / 6048e5;
                    break;
                default:
                    a = this - i
            }
            return n ? a : b(a)
        }

        function pn(e, t) {
            var n, i, r = 12 * (t.year() - e.year()) + (t.month() - e.month()),
                a = e.clone().add(r, "months");
            return 0 > t - a ? (n = e.clone().add(r - 1, "months"), i = (t - a) / (a - n)) : (n = e.clone().add(r + 1, "months"), i = (t - a) / (n - a)), -(r + i) || 0
        }

        function mn() {
            return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
        }

        function gn(e) {
            if (!this.isValid()) return null;
            var t = e !== !0,
                n = t ? this.clone().utc() : this;
            return n.year() < 0 || n.year() > 9999 ? U(n, t ? "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYYYY-MM-DD[T]HH:mm:ss.SSSZ") : S(Date.prototype.toISOString) ? t ? this.toDate().toISOString() : new Date(this.valueOf() + 60 * this.utcOffset() * 1e3).toISOString().replace("Z", U(n, "Z")) : U(n, t ? "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYY-MM-DD[T]HH:mm:ss.SSSZ")
        }

        function vn() {
            if (!this.isValid()) return "moment.invalid(/* " + this._i + " */)";
            var e = "moment",
                t = "";
            this.isLocal() || (e = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone", t = "Z");
            var n = "[" + e + '("]',
                i = 0 <= this.year() && this.year() <= 9999 ? "YYYY" : "YYYYYY",
                r = "-MM-DD[T]HH:mm:ss.SSS",
                a = t + '[")]';
            return this.format(n + i + r + a)
        }

        function yn(t) {
            t || (t = this.isUtc() ? e.defaultFormatUtc : e.defaultFormat);
            var n = U(this, t);
            return this.localeData().postformat(n)
        }

        function bn(e, t) {
            return this.isValid() && (y(e) && e.isValid() || At(e).isValid()) ? Zt({
                to: this,
                from: e
            }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
        }

        function wn(e) {
            return this.from(At(), e)
        }

        function _n(e, t) {
            return this.isValid() && (y(e) && e.isValid() || At(e).isValid()) ? Zt({
                from: this,
                to: e
            }).locale(this.locale()).humanize(!t) : this.localeData().invalidDate()
        }

        function xn(e) {
            return this.to(At(), e)
        }

        function kn(e) {
            var t;
            return void 0 === e ? this._locale._abbr : (t = it(e), null != t && (this._locale = t), this)
        }

        function Cn() {
            return this._locale
        }

        function Sn(e, t) {
            return (e % t + t) % t
        }

        function An(e, t, n) {
            return 100 > e && e >= 0 ? new Date(e + 400, t, n) - ua : new Date(e, t, n).valueOf()
        }

        function Tn(e, t, n) {
            return 100 > e && e >= 0 ? Date.UTC(e + 400, t, n) - ua : Date.UTC(e, t, n)
        }

        function En(t) {
            var n;
            if (t = O(t), void 0 === t || "millisecond" === t || !this.isValid()) return this;
            var i = this._isUTC ? Tn : An;
            switch (t) {
                case "year":
                    n = i(this.year(), 0, 1);
                    break;
                case "quarter":
                    n = i(this.year(), this.month() - this.month() % 3, 1);
                    break;
                case "month":
                    n = i(this.year(), this.month(), 1);
                    break;
                case "week":
                    n = i(this.year(), this.month(), this.date() - this.weekday());
                    break;
                case "isoWeek":
                    n = i(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
                    break;
                case "day":
                case "date":
                    n = i(this.year(), this.month(), this.date());
                    break;
                case "hour":
                    n = this._d.valueOf(), n -= Sn(n + (this._isUTC ? 0 : this.utcOffset() * la), ca);
                    break;
                case "minute":
                    n = this._d.valueOf(), n -= Sn(n, la);
                    break;
                case "second":
                    n = this._d.valueOf(), n -= Sn(n, sa)
            }
            return this._d.setTime(n), e.updateOffset(this, !0), this
        }

        function Dn(t) {
            var n;
            if (t = O(t), void 0 === t || "millisecond" === t || !this.isValid()) return this;
            var i = this._isUTC ? Tn : An;
            switch (t) {
                case "year":
                    n = i(this.year() + 1, 0, 1) - 1;
                    break;
                case "quarter":
                    n = i(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
                    break;
                case "month":
                    n = i(this.year(), this.month() + 1, 1) - 1;
                    break;
                case "week":
                    n = i(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
                    break;
                case "isoWeek":
                    n = i(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
                    break;
                case "day":
                case "date":
                    n = i(this.year(), this.month(), this.date() + 1) - 1;
                    break;
                case "hour":
                    n = this._d.valueOf(), n += ca - Sn(n + (this._isUTC ? 0 : this.utcOffset() * la), ca) - 1;
                    break;
                case "minute":
                    n = this._d.valueOf(), n += la - Sn(n, la) - 1;
                    break;
                case "second":
                    n = this._d.valueOf(), n += sa - Sn(n, sa) - 1
            }
            return this._d.setTime(n), e.updateOffset(this, !0), this
        }

        function $n() {
            return this._d.valueOf() - 6e4 * (this._offset || 0)
        }

        function Mn() {
            return Math.floor(this.valueOf() / 1e3)
        }

        function Rn() {
            return new Date(this.valueOf())
        }

        function In() {
            var e = this;
            return [e.year(), e.month(), e.date(), e.hour(), e.minute(), e.second(), e.millisecond()]
        }

        function Pn() {
            var e = this;
            return {
                years: e.year(),
                months: e.month(),
                date: e.date(),
                hours: e.hours(),
                minutes: e.minutes(),
                seconds: e.seconds(),
                milliseconds: e.milliseconds()
            }
        }

        function Hn() {
            return this.isValid() ? this.toISOString() : null
        }

        function On() {
            return p(this)
        }

        function jn() {
            return u({}, f(this))
        }

        function Nn() {
            return f(this).overflow
        }

        function zn() {
            return {
                input: this._i,
                format: this._f,
                locale: this._locale,
                isUTC: this._isUTC,
                strict: this._strict
            }
        }

        function Ln(e, t) {
            F(0, [e, e.length], 0, t)
        }

        function Fn(e) {
            return qn.call(this, e, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
        }

        function Bn(e) {
            return qn.call(this, e, this.isoWeek(), this.isoWeekday(), 1, 4)
        }

        function Wn() {
            return Ce(this.year(), 1, 4)
        }

        function Un() {
            var e = this.localeData()._week;
            return Ce(this.year(), e.dow, e.doy)
        }

        function qn(e, t, n, i, r) {
            var a;
            return null == e ? ke(this, i, r).year : (a = Ce(e, i, r), t > a && (t = a), Gn.call(this, e, t, n, i, r))
        }

        function Gn(e, t, n, i, r) {
            var a = xe(e, t, n, i, r),
                o = we(a.year, 0, a.dayOfYear);
            return this.year(o.getUTCFullYear()), this.month(o.getUTCMonth()), this.date(o.getUTCDate()), this
        }

        function Yn(e) {
            return null == e ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (e - 1) + this.month() % 3)
        }

        function Vn(e) {
            var t = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
            return null == e ? t : this.add(e - t, "d")
        }

        function Xn(e, t) {
            t[wr] = w(1e3 * ("0." + e))
        }

        function Kn() {
            return this._isUTC ? "UTC" : ""
        }

        function Zn() {
            return this._isUTC ? "Coordinated Universal Time" : ""
        }

        function Qn(e) {
            return At(1e3 * e)
        }

        function Jn() {
            return At.apply(null, arguments).parseZone()
        }

        function ei(e) {
            return e
        }

        function ti(e, t, n, i) {
            var r = it(),
                a = d().set(i, t);
            return r[n](a, e)
        }

        function ni(e, t, n) {
            if (o(e) && (t = e, e = void 0), e = e || "", null != t) return ti(e, t, n, "month");
            var i, r = [];
            for (i = 0; 12 > i; i++) r[i] = ti(e, i, n, "month");
            return r
        }

        function ii(e, t, n, i) {
            "boolean" == typeof e ? (o(t) && (n = t, t = void 0), t = t || "") : (t = e, n = t, e = !1, o(t) && (n = t, t = void 0), t = t || "");
            var r = it(),
                a = e ? r._week.dow : 0;
            if (null != n) return ti(t, (n + a) % 7, i, "day");
            var s, l = [];
            for (s = 0; 7 > s; s++) l[s] = ti(t, (s + a) % 7, i, "day");
            return l
        }

        function ri(e, t) {
            return ni(e, t, "months")
        }

        function ai(e, t) {
            return ni(e, t, "monthsShort")
        }

        function oi(e, t, n) {
            return ii(e, t, n, "weekdays")
        }

        function si(e, t, n) {
            return ii(e, t, n, "weekdaysShort")
        }

        function li(e, t, n) {
            return ii(e, t, n, "weekdaysMin")
        }

        function ci() {
            var e = this._data;
            return this._milliseconds = ya(this._milliseconds), this._days = ya(this._days), this._months = ya(this._months), e.milliseconds = ya(e.milliseconds), e.seconds = ya(e.seconds), e.minutes = ya(e.minutes), e.hours = ya(e.hours), e.months = ya(e.months), e.years = ya(e.years), this
        }

        function ui(e, t, n, i) {
            var r = Zt(t, n);
            return e._milliseconds += i * r._milliseconds, e._days += i * r._days, e._months += i * r._months, e._bubble()
        }

        function di(e, t) {
            return ui(this, e, t, 1)
        }

        function hi(e, t) {
            return ui(this, e, t, -1)
        }

        function fi(e) {
            return 0 > e ? Math.floor(e) : Math.ceil(e)
        }

        function pi() {
            var e, t, n, i, r, a = this._milliseconds,
                o = this._days,
                s = this._months,
                l = this._data;
            return a >= 0 && o >= 0 && s >= 0 || 0 >= a && 0 >= o && 0 >= s || (a += 864e5 * fi(gi(s) + o), o = 0, s = 0), l.milliseconds = a % 1e3, e = b(a / 1e3), l.seconds = e % 60, t = b(e / 60), l.minutes = t % 60, n = b(t / 60), l.hours = n % 24, o += b(n / 24), r = b(mi(o)), s += r, o -= fi(gi(r)), i = b(s / 12), s %= 12, l.days = o, l.months = s, l.years = i, this
        }

        function mi(e) {
            return 4800 * e / 146097
        }

        function gi(e) {
            return 146097 * e / 4800
        }

        function vi(e) {
            if (!this.isValid()) return NaN;
            var t, n, i = this._milliseconds;
            if (e = O(e), "month" === e || "quarter" === e || "year" === e) switch (t = this._days + i / 864e5, n = this._months + mi(t), e) {
                case "month":
                    return n;
                case "quarter":
                    return n / 3;
                case "year":
                    return n / 12
            } else switch (t = this._days + Math.round(gi(this._months)), e) {
                case "week":
                    return t / 7 + i / 6048e5;
                case "day":
                    return t + i / 864e5;
                case "hour":
                    return 24 * t + i / 36e5;
                case "minute":
                    return 1440 * t + i / 6e4;
                case "second":
                    return 86400 * t + i / 1e3;
                case "millisecond":
                    return Math.floor(864e5 * t) + i;
                default:
                    throw new Error("Unknown unit " + e);
            }
        }

        function yi() {
            return this.isValid() ? this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * w(this._months / 12) : NaN
        }

        function bi(e) {
            return function () {
                return this.as(e)
            }
        }

        function wi() {
            return Zt(this)
        }

        function _i(e) {
            return e = O(e), this.isValid() ? this[e + "s"]() : NaN
        }

        function xi(e) {
            return function () {
                return this.isValid() ? this._data[e] : NaN
            }
        }

        function ki() {
            return b(this.days() / 7)
        }

        function Ci(e, t, n, i, r) {
            return r.relativeTime(t || 1, !!n, e, i)
        }

        function Si(e, t, n) {
            var i = Zt(e).abs(),
                r = Ha(i.as("s")),
                a = Ha(i.as("m")),
                o = Ha(i.as("h")),
                s = Ha(i.as("d")),
                l = Ha(i.as("M")),
                c = Ha(i.as("y")),
                u = r <= Oa.ss && ["s", r] || r < Oa.s && ["ss", r] || 1 >= a && ["m"] || a < Oa.m && ["mm", a] || 1 >= o && ["h"] || o < Oa.h && ["hh", o] || 1 >= s && ["d"] || s < Oa.d && ["dd", s] || 1 >= l && ["M"] || l < Oa.M && ["MM", l] || 1 >= c && ["y"] || ["yy", c];
            return u[2] = t, u[3] = +e > 0, u[4] = n, Ci.apply(null, u)
        }

        function Ai(e) {
            return void 0 === e ? Ha : "function" == typeof e ? (Ha = e, !0) : !1
        }

        function Ti(e, t) {
            return void 0 === Oa[e] ? !1 : void 0 === t ? Oa[e] : (Oa[e] = t, "s" === e && (Oa.ss = t - 1), !0)
        }

        function Ei(e) {
            if (!this.isValid()) return this.localeData().invalidDate();
            var t = this.localeData(),
                n = Si(this, !e, t);
            return e && (n = t.pastFuture(+this, n)), t.postformat(n)
        }

        function Di(e) {
            return (e > 0) - (0 > e) || +e
        }

        function $i() {
            if (!this.isValid()) return this.localeData().invalidDate();
            var e, t, n, i = ja(this._milliseconds) / 1e3,
                r = ja(this._days),
                a = ja(this._months);
            e = b(i / 60), t = b(e / 60), i %= 60, e %= 60, n = b(a / 12), a %= 12;
            var o = n,
                s = a,
                l = r,
                c = t,
                u = e,
                d = i ? i.toFixed(3).replace(/\.?0+$/, "") : "",
                h = this.asSeconds();
            if (!h) return "P0D";
            var f = 0 > h ? "-" : "",
                p = Di(this._months) !== Di(h) ? "-" : "",
                m = Di(this._days) !== Di(h) ? "-" : "",
                g = Di(this._milliseconds) !== Di(h) ? "-" : "";
            return f + "P" + (o ? p + o + "Y" : "") + (s ? p + s + "M" : "") + (l ? m + l + "D" : "") + (c || u || d ? "T" : "") + (c ? g + c + "H" : "") + (u ? g + u + "M" : "") + (d ? g + d + "S" : "")
        }
        var Mi, Ri;
        Ri = Array.prototype.some ? Array.prototype.some : function (e) {
            for (var t = Object(this), n = t.length >>> 0, i = 0; n > i; i++)
                if (i in t && e.call(this, t[i], i, t)) return !0;
            return !1
        };
        var Ii = e.momentProperties = [],
            Pi = !1,
            Hi = {};
        e.suppressDeprecationWarnings = !1, e.deprecationHandler = null;
        var Oi;
        Oi = Object.keys ? Object.keys : function (e) {
            var t, n = [];
            for (t in e) c(e, t) && n.push(t);
            return n
        };
        var ji = {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
            Ni = {
                LTS: "h:mm:ss A",
                LT: "h:mm A",
                L: "MM/DD/YYYY",
                LL: "MMMM D, YYYY",
                LLL: "MMMM D, YYYY h:mm A",
                LLLL: "dddd, MMMM D, YYYY h:mm A"
            },
            zi = "Invalid date",
            Li = "%d",
            Fi = /\d{1,2}/,
            Bi = {
                future: "in %s",
                past: "%s ago",
                s: "a few seconds",
                ss: "%d seconds",
                m: "a minute",
                mm: "%d minutes",
                h: "an hour",
                hh: "%d hours",
                d: "a day",
                dd: "%d days",
                M: "a month",
                MM: "%d months",
                y: "a year",
                yy: "%d years"
            },
            Wi = {},
            Ui = {},
            qi = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
            Gi = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
            Yi = {},
            Vi = {},
            Xi = /\d/,
            Ki = /\d\d/,
            Zi = /\d{3}/,
            Qi = /\d{4}/,
            Ji = /[+-]?\d{6}/,
            er = /\d\d?/,
            tr = /\d\d\d\d?/,
            nr = /\d\d\d\d\d\d?/,
            ir = /\d{1,3}/,
            rr = /\d{1,4}/,
            ar = /[+-]?\d{1,6}/,
            or = /\d+/,
            sr = /[+-]?\d+/,
            lr = /Z|[+-]\d\d:?\d\d/gi,
            cr = /Z|[+-]\d\d(?::?\d\d)?/gi,
            ur = /[+-]?\d+(\.\d{1,3})?/,
            dr = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
            hr = {},
            fr = {},
            pr = 0,
            mr = 1,
            gr = 2,
            vr = 3,
            yr = 4,
            br = 5,
            wr = 6,
            _r = 7,
            xr = 8;
        F("Y", 0, 0, function () {
            var e = this.year();
            return 9999 >= e ? "" + e : "+" + e
        }), F(0, ["YY", 2], 0, function () {
            return this.year() % 100
        }), F(0, ["YYYY", 4], 0, "year"), F(0, ["YYYYY", 5], 0, "year"), F(0, ["YYYYYY", 6, !0], 0, "year"), H("year", "y"), N("year", 1), G("Y", sr), G("YY", er, Ki), G("YYYY", rr, Qi), G("YYYYY", ar, Ji), G("YYYYYY", ar, Ji), K(["YYYYY", "YYYYYY"], pr), K("YYYY", function (t, n) {
            n[pr] = 2 === t.length ? e.parseTwoDigitYear(t) : w(t)
        }), K("YY", function (t, n) {
            n[pr] = e.parseTwoDigitYear(t)
        }), K("Y", function (e, t) {
            t[pr] = parseInt(e, 10)
        }), e.parseTwoDigitYear = function (e) {
            return w(e) + (w(e) > 68 ? 1900 : 2e3)
        };
        var kr, Cr = ne("FullYear", !0);
        kr = Array.prototype.indexOf ? Array.prototype.indexOf : function (e) {
            var t;
            for (t = 0; t < this.length; ++t)
                if (this[t] === e) return t;
            return -1
        }, F("M", ["MM", 2], "Mo", function () {
            return this.month() + 1
        }), F("MMM", 0, 0, function (e) {
            return this.localeData().monthsShort(this, e)
        }), F("MMMM", 0, 0, function (e) {
            return this.localeData().months(this, e)
        }), H("month", "M"), N("month", 8), G("M", er), G("MM", er, Ki), G("MMM", function (e, t) {
            return t.monthsShortRegex(e)
        }), G("MMMM", function (e, t) {
            return t.monthsRegex(e)
        }), K(["M", "MM"], function (e, t) {
            t[mr] = w(e) - 1
        }), K(["MMM", "MMMM"], function (e, t, n, i) {
            var r = n._locale.monthsParse(e, i, n._strict);
            null != r ? t[mr] = r : f(n).invalidMonth = e
        });
        var Sr = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
            Ar = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
            Tr = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
            Er = dr,
            Dr = dr;
        F("w", ["ww", 2], "wo", "week"), F("W", ["WW", 2], "Wo", "isoWeek"), H("week", "w"), H("isoWeek", "W"), N("week", 5), N("isoWeek", 5), G("w", er), G("ww", er, Ki), G("W", er), G("WW", er, Ki), Z(["w", "ww", "W", "WW"], function (e, t, n, i) {
            t[i.substr(0, 1)] = w(e)
        });
        var $r = {
            dow: 0,
            doy: 6
        };
        F("d", 0, "do", "day"), F("dd", 0, 0, function (e) {
            return this.localeData().weekdaysMin(this, e)
        }), F("ddd", 0, 0, function (e) {
            return this.localeData().weekdaysShort(this, e)
        }), F("dddd", 0, 0, function (e) {
            return this.localeData().weekdays(this, e)
        }), F("e", 0, 0, "weekday"), F("E", 0, 0, "isoWeekday"), H("day", "d"), H("weekday", "e"), H("isoWeekday", "E"), N("day", 11), N("weekday", 11), N("isoWeekday", 11), G("d", er), G("e", er), G("E", er), G("dd", function (e, t) {
            return t.weekdaysMinRegex(e)
        }), G("ddd", function (e, t) {
            return t.weekdaysShortRegex(e)
        }), G("dddd", function (e, t) {
            return t.weekdaysRegex(e)
        }), Z(["dd", "ddd", "dddd"], function (e, t, n, i) {
            var r = n._locale.weekdaysParse(e, i, n._strict);
            null != r ? t.d = r : f(n).invalidWeekday = e
        }), Z(["d", "e", "E"], function (e, t, n, i) {
            t[i] = w(e)
        });
        var Mr = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
            Rr = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
            Ir = "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
            Pr = dr,
            Hr = dr,
            Or = dr;
        F("H", ["HH", 2], 0, "hour"), F("h", ["hh", 2], 0, qe), F("k", ["kk", 2], 0, Ge), F("hmm", 0, 0, function () {
            return "" + qe.apply(this) + L(this.minutes(), 2)
        }), F("hmmss", 0, 0, function () {
            return "" + qe.apply(this) + L(this.minutes(), 2) + L(this.seconds(), 2)
        }), F("Hmm", 0, 0, function () {
            return "" + this.hours() + L(this.minutes(), 2)
        }), F("Hmmss", 0, 0, function () {
            return "" + this.hours() + L(this.minutes(), 2) + L(this.seconds(), 2)
        }), Ye("a", !0), Ye("A", !1), H("hour", "h"), N("hour", 13), G("a", Ve), G("A", Ve), G("H", er), G("h", er), G("k", er), G("HH", er, Ki), G("hh", er, Ki), G("kk", er, Ki), G("hmm", tr), G("hmmss", nr), G("Hmm", tr), G("Hmmss", nr), K(["H", "HH"], vr), K(["k", "kk"], function (e, t, n) {
            var i = w(e);
            t[vr] = 24 === i ? 0 : i
        }), K(["a", "A"], function (e, t, n) {
            n._isPm = n._locale.isPM(e), n._meridiem = e
        }), K(["h", "hh"], function (e, t, n) {
            t[vr] = w(e), f(n).bigHour = !0
        }), K("hmm", function (e, t, n) {
            var i = e.length - 2;
            t[vr] = w(e.substr(0, i)), t[yr] = w(e.substr(i)), f(n).bigHour = !0
        }), K("hmmss", function (e, t, n) {
            var i = e.length - 4,
                r = e.length - 2;
            t[vr] = w(e.substr(0, i)), t[yr] = w(e.substr(i, 2)), t[br] = w(e.substr(r)), f(n).bigHour = !0
        }), K("Hmm", function (e, t, n) {
            var i = e.length - 2;
            t[vr] = w(e.substr(0, i)), t[yr] = w(e.substr(i))
        }), K("Hmmss", function (e, t, n) {
            var i = e.length - 4,
                r = e.length - 2;
            t[vr] = w(e.substr(0, i)), t[yr] = w(e.substr(i, 2)), t[br] = w(e.substr(r))
        });
        var jr, Nr = /[ap]\.?m?\.?/i,
            zr = ne("Hours", !0),
            Lr = {
                calendar: ji,
                longDateFormat: Ni,
                invalidDate: zi,
                ordinal: Li,
                dayOfMonthOrdinalParse: Fi,
                relativeTime: Bi,
                months: Ar,
                monthsShort: Tr,
                week: $r,
                weekdays: Mr,
                weekdaysMin: Ir,
                weekdaysShort: Rr,
                meridiemParse: Nr
            },
            Fr = {},
            Br = {},
            Wr = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
            Ur = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
            qr = /Z|[+-]\d\d(?::?\d\d)?/,
            Gr = [
                ["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/],
                ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/],
                ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/],
                ["GGGG-[W]WW", /\d{4}-W\d\d/, !1],
                ["YYYY-DDD", /\d{4}-\d{3}/],
                ["YYYY-MM", /\d{4}-\d\d/, !1],
                ["YYYYYYMMDD", /[+-]\d{10}/],
                ["YYYYMMDD", /\d{8}/],
                ["GGGG[W]WWE", /\d{4}W\d{3}/],
                ["GGGG[W]WW", /\d{4}W\d{2}/, !1],
                ["YYYYDDD", /\d{7}/]
            ],
            Yr = [
                ["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/],
                ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/],
                ["HH:mm:ss", /\d\d:\d\d:\d\d/],
                ["HH:mm", /\d\d:\d\d/],
                ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/],
                ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/],
                ["HHmmss", /\d\d\d\d\d\d/],
                ["HHmm", /\d\d\d\d/],
                ["HH", /\d\d/]
            ],
            Vr = /^\/?Date\((\-?\d+)/i,
            Xr = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
            Kr = {
                UT: 0,
                GMT: 0,
                EDT: -240,
                EST: -300,
                CDT: -300,
                CST: -360,
                MDT: -360,
                MST: -420,
                PDT: -420,
                PST: -480
            };
        e.createFromInputFallback = k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function (e) {
            e._d = new Date(e._i + (e._useUTC ? " UTC" : ""))
        }), e.ISO_8601 = function () { }, e.RFC_2822 = function () { };
        var Zr = k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
            var e = At.apply(null, arguments);
            return this.isValid() && e.isValid() ? this > e ? this : e : m()
        }),
            Qr = k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function () {
                var e = At.apply(null, arguments);
                return this.isValid() && e.isValid() ? e > this ? this : e : m()
            }),
            Jr = function () {
                return Date.now ? Date.now() : +new Date
            },
            ea = ["year", "quarter", "month", "week", "day", "hour", "minute", "second", "millisecond"];
        Ot("Z", ":"), Ot("ZZ", ""), G("Z", cr), G("ZZ", cr), K(["Z", "ZZ"], function (e, t, n) {
            n._useUTC = !0, n._tzm = jt(cr, e)
        });
        var ta = /([\+\-]|\d\d)/gi;
        e.updateOffset = function () { };
        var na = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,
            ia = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;
        Zt.fn = It.prototype, Zt.invalid = Rt;
        var ra = tn(1, "add"),
            aa = tn(-1, "subtract");
        e.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ", e.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
        var oa = k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function (e) {
            return void 0 === e ? this.localeData() : this.locale(e)
        }),
            sa = 1e3,
            la = 60 * sa,
            ca = 60 * la,
            ua = 3506328 * ca;
        F(0, ["gg", 2], 0, function () {
            return this.weekYear() % 100
        }), F(0, ["GG", 2], 0, function () {
            return this.isoWeekYear() % 100
        }), Ln("gggg", "weekYear"), Ln("ggggg", "weekYear"), Ln("GGGG", "isoWeekYear"), Ln("GGGGG", "isoWeekYear"), H("weekYear", "gg"), H("isoWeekYear", "GG"), N("weekYear", 1), N("isoWeekYear", 1), G("G", sr), G("g", sr), G("GG", er, Ki), G("gg", er, Ki), G("GGGG", rr, Qi), G("gggg", rr, Qi), G("GGGGG", ar, Ji), G("ggggg", ar, Ji), Z(["gggg", "ggggg", "GGGG", "GGGGG"], function (e, t, n, i) {
            t[i.substr(0, 2)] = w(e)
        }), Z(["gg", "GG"], function (t, n, i, r) {
            n[r] = e.parseTwoDigitYear(t)
        }), F("Q", 0, "Qo", "quarter"), H("quarter", "Q"), N("quarter", 7), G("Q", Xi), K("Q", function (e, t) {
            t[mr] = 3 * (w(e) - 1)
        }), F("D", ["DD", 2], "Do", "date"), H("date", "D"), N("date", 9), G("D", er), G("DD", er, Ki), G("Do", function (e, t) {
            return e ? t._dayOfMonthOrdinalParse || t._ordinalParse : t._dayOfMonthOrdinalParseLenient
        }), K(["D", "DD"], gr), K("Do", function (e, t) {
            t[gr] = w(e.match(er)[0])
        });
        var da = ne("Date", !0);
        F("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), H("dayOfYear", "DDD"), N("dayOfYear", 4), G("DDD", ir), G("DDDD", Zi), K(["DDD", "DDDD"], function (e, t, n) {
            n._dayOfYear = w(e)
        }), F("m", ["mm", 2], 0, "minute"), H("minute", "m"), N("minute", 14), G("m", er), G("mm", er, Ki), K(["m", "mm"], yr);
        var ha = ne("Minutes", !1);
        F("s", ["ss", 2], 0, "second"), H("second", "s"), N("second", 15), G("s", er), G("ss", er, Ki), K(["s", "ss"], br);
        var fa = ne("Seconds", !1);
        F("S", 0, 0, function () {
            return ~~(this.millisecond() / 100)
        }), F(0, ["SS", 2], 0, function () {
            return ~~(this.millisecond() / 10)
        }), F(0, ["SSS", 3], 0, "millisecond"), F(0, ["SSSS", 4], 0, function () {
            return 10 * this.millisecond()
        }), F(0, ["SSSSS", 5], 0, function () {
            return 100 * this.millisecond()
        }), F(0, ["SSSSSS", 6], 0, function () {
            return 1e3 * this.millisecond()
        }), F(0, ["SSSSSSS", 7], 0, function () {
            return 1e4 * this.millisecond()
        }), F(0, ["SSSSSSSS", 8], 0, function () {
            return 1e5 * this.millisecond()
        }), F(0, ["SSSSSSSSS", 9], 0, function () {
            return 1e6 * this.millisecond()
        }), H("millisecond", "ms"), N("millisecond", 16), G("S", ir, Xi), G("SS", ir, Ki), G("SSS", ir, Zi);
        var pa;
        for (pa = "SSSS"; pa.length <= 9; pa += "S") G(pa, or);
        for (pa = "S"; pa.length <= 9; pa += "S") K(pa, Xn);
        var ma = ne("Milliseconds", !1);
        F("z", 0, 0, "zoneAbbr"), F("zz", 0, 0, "zoneName");
        var ga = v.prototype;
        ga.add = ra, ga.calendar = an, ga.clone = on, ga.diff = fn, ga.endOf = Dn, ga.format = yn, ga.from = bn, ga.fromNow = wn, ga.to = _n, ga.toNow = xn, ga.get = ae, ga.invalidAt = Nn, ga.isAfter = sn, ga.isBefore = ln, ga.isBetween = cn, ga.isSame = un, ga.isSameOrAfter = dn, ga.isSameOrBefore = hn, ga.isValid = On, ga.lang = oa, ga.locale = kn, ga.localeData = Cn, ga.max = Qr, ga.min = Zr, ga.parsingFlags = jn, ga.set = oe, ga.startOf = En, ga.subtract = aa, ga.toArray = In, ga.toObject = Pn, ga.toDate = Rn, ga.toISOString = gn, ga.inspect = vn, ga.toJSON = Hn, ga.toString = mn, ga.unix = Mn, ga.valueOf = $n, ga.creationData = zn, ga.year = Cr, ga.isLeapYear = te, ga.weekYear = Fn, ga.isoWeekYear = Bn, ga.quarter = ga.quarters = Yn, ga.month = pe, ga.daysInMonth = me, ga.week = ga.weeks = Ee, ga.isoWeek = ga.isoWeeks = De, ga.weeksInYear = Un, ga.isoWeeksInYear = Wn, ga.date = da, ga.day = ga.days = Ne, ga.weekday = ze, ga.isoWeekday = Le, ga.dayOfYear = Vn, ga.hour = ga.hours = zr, ga.minute = ga.minutes = ha, ga.second = ga.seconds = fa, ga.millisecond = ga.milliseconds = ma, ga.utcOffset = Lt, ga.utc = Bt, ga.local = Wt, ga.parseZone = Ut, ga.hasAlignedHourOffset = qt, ga.isDST = Gt, ga.isLocal = Vt, ga.isUtcOffset = Xt, ga.isUtc = Kt, ga.isUTC = Kt, ga.zoneAbbr = Kn, ga.zoneName = Zn, ga.dates = k("dates accessor is deprecated. Use date instead.", da), ga.months = k("months accessor is deprecated. Use month instead", pe), ga.years = k("years accessor is deprecated. Use year instead", Cr), ga.zone = k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", Ft), ga.isDSTShifted = k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", Yt);
        var va = E.prototype;
        va.calendar = D, va.longDateFormat = $, va.invalidDate = M, va.ordinal = R, va.preparse = ei, va.postformat = ei, va.relativeTime = I, va.pastFuture = P, va.set = A, va.months = ce, va.monthsShort = ue, va.monthsParse = he, va.monthsRegex = ve, va.monthsShortRegex = ge, va.week = Se, va.firstDayOfYear = Te, va.firstDayOfWeek = Ae, va.weekdays = Ie, va.weekdaysMin = He, va.weekdaysShort = Pe, va.weekdaysParse = je, va.weekdaysRegex = Fe, va.weekdaysShortRegex = Be, va.weekdaysMinRegex = We, va.isPM = Xe, va.meridiem = Ke, et("en", {
            dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
            ordinal: function (e) {
                var t = e % 10,
                    n = 1 === w(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
                return e + n
            }
        }), e.lang = k("moment.lang is deprecated. Use moment.locale instead.", et), e.langData = k("moment.langData is deprecated. Use moment.localeData instead.", it);
        var ya = Math.abs,
            ba = bi("ms"),
            wa = bi("s"),
            _a = bi("m"),
            xa = bi("h"),
            ka = bi("d"),
            Ca = bi("w"),
            Sa = bi("M"),
            Aa = bi("Q"),
            Ta = bi("y"),
            Ea = xi("milliseconds"),
            Da = xi("seconds"),
            $a = xi("minutes"),
            Ma = xi("hours"),
            Ra = xi("days"),
            Ia = xi("months"),
            Pa = xi("years"),
            Ha = Math.round,
            Oa = {
                ss: 44,
                s: 45,
                m: 45,
                h: 22,
                d: 26,
                M: 11
            },
            ja = Math.abs,
            Na = It.prototype;
        return Na.isValid = Mt, Na.abs = ci, Na.add = di, Na.subtract = hi, Na.as = vi, Na.asMilliseconds = ba, Na.asSeconds = wa, Na.asMinutes = _a, Na.asHours = xa, Na.asDays = ka, Na.asWeeks = Ca, Na.asMonths = Sa, Na.asQuarters = Aa, Na.asYears = Ta, Na.valueOf = yi, Na._bubble = pi, Na.clone = wi, Na.get = _i, Na.milliseconds = Ea, Na.seconds = Da, Na.minutes = $a, Na.hours = Ma, Na.days = Ra, Na.weeks = ki, Na.months = Ia, Na.years = Pa, Na.humanize = Ei, Na.toISOString = $i, Na.toString = $i, Na.toJSON = $i, Na.locale = kn, Na.localeData = Cn, Na.toIsoString = k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", $i), Na.lang = oa, F("X", 0, 0, "unix"), F("x", 0, 0, "valueOf"), G("x", sr), G("X", ur), K("X", function (e, t, n) {
            n._d = new Date(1e3 * parseFloat(e, 10))
        }), K("x", function (e, t, n) {
            n._d = new Date(w(e))
        }), e.version = "2.24.0", t(At), e.fn = ga, e.min = Et, e.max = Dt, e.now = Jr, e.utc = d, e.unix = Qn, e.months = ri, e.isDate = s, e.locale = et, e.invalid = m, e.duration = Zt, e.isMoment = y, e.weekdays = oi, e.parseZone = Jn, e.localeData = it, e.isDuration = Pt, e.monthsShort = ai, e.weekdaysMin = li, e.defineLocale = tt, e.updateLocale = nt, e.locales = rt, e.weekdaysShort = si, e.normalizeUnits = O, e.relativeTimeRounding = Ai, e.relativeTimeThreshold = Ti, e.calendarFormat = rn, e.prototype = ga, e.HTML5_FMT = {
            DATETIME_LOCAL: "YYYY-MM-DDTHH:mm",
            DATETIME_LOCAL_SECONDS: "YYYY-MM-DDTHH:mm:ss",
            DATETIME_LOCAL_MS: "YYYY-MM-DDTHH:mm:ss.SSS",
            DATE: "YYYY-MM-DD",
            TIME: "HH:mm",
            TIME_SECONDS: "HH:mm:ss",
            TIME_MS: "HH:mm:ss.SSS",
            WEEK: "GGGG-[W]WW",
            MONTH: "YYYY-MM"
        }, e
    }),
    function (e, t) {
        "use strict";
        "object" == typeof module && module.exports ? module.exports = t(require("moment")) : "function" == typeof define && define.amd ? define(["moment"], t) : t(e.moment)
    }(this, function (e) {
        "use strict";

        function t(e) {
            return e > 96 ? e - 87 : e > 64 ? e - 29 : e - 48
        }

        function n(e) {
            var n, i = 0,
                r = e.split("."),
                a = r[0],
                o = r[1] || "",
                s = 1,
                l = 0,
                c = 1;
            for (45 === e.charCodeAt(0) && (i = 1, c = -1), i; i < a.length; i++) n = t(a.charCodeAt(i)), l = 60 * l + n;
            for (i = 0; i < o.length; i++) s /= 60, n = t(o.charCodeAt(i)), l += n * s;
            return l * c
        }

        function i(e) {
            for (var t = 0; t < e.length; t++) e[t] = n(e[t])
        }

        function r(e, t) {
            for (var n = 0; t > n; n++) e[n] = Math.round((e[n - 1] || 0) + 6e4 * e[n]);
            e[t - 1] = 1 / 0
        }

        function a(e, t) {
            var n, i = [];
            for (n = 0; n < t.length; n++) i[n] = e[t[n]];
            return i
        }

        function o(e) {
            var t = e.split("|"),
                n = t[2].split(" "),
                o = t[3].split(""),
                s = t[4].split(" ");
            return i(n), i(o), i(s), r(s, o.length), {
                name: t[0],
                abbrs: a(t[1].split(" "), o),
                offsets: a(n, o),
                untils: s,
                population: 0 | t[5]
            }
        }

        function s(e) {
            e && this._set(o(e))
        }

        function l(e, t) {
            this.name = e, this.zones = t
        }

        function c(e) {
            var t = e.toTimeString(),
                n = t.match(/\([a-z ]+\)/i);
            n && n[0] ? (n = n[0].match(/[A-Z]/g), n = n ? n.join("") : void 0) : (n = t.match(/[A-Z]{3,5}/g), n = n ? n[0] : void 0), "GMT" === n && (n = void 0), this.at = +e, this.abbr = n, this.offset = e.getTimezoneOffset()
        }

        function u(e) {
            this.zone = e, this.offsetScore = 0, this.abbrScore = 0
        }

        function d(e, t) {
            for (var n, i; i = 6e4 * ((t.at - e.at) / 12e4 | 0);) n = new c(new Date(e.at + i)), n.offset === e.offset ? e = n : t = n;
            return e
        }

        function h() {
            var e, t, n, i = (new Date).getFullYear() - 2,
                r = new c(new Date(i, 0, 1)),
                a = [r];
            for (n = 1; 48 > n; n++) t = new c(new Date(i, n, 1)), t.offset !== r.offset && (e = d(r, t), a.push(e), a.push(new c(new Date(e.at + 6e4)))), r = t;
            for (n = 0; 4 > n; n++) a.push(new c(new Date(i + n, 0, 1))), a.push(new c(new Date(i + n, 6, 1)));
            return a
        }

        function f(e, t) {
            return e.offsetScore !== t.offsetScore ? e.offsetScore - t.offsetScore : e.abbrScore !== t.abbrScore ? e.abbrScore - t.abbrScore : e.zone.population !== t.zone.population ? t.zone.population - e.zone.population : t.zone.name.localeCompare(e.zone.name)
        }

        function p(e, t) {
            var n, r;
            for (i(t), n = 0; n < t.length; n++) r = t[n], F[r] = F[r] || {}, F[r][e] = !0
        }

        function m(e) {
            var t, n, i, r = e.length,
                a = {},
                o = [];
            for (t = 0; r > t; t++) {
                i = F[e[t].offset] || {};
                for (n in i) i.hasOwnProperty(n) && (a[n] = !0)
            }
            for (t in a) a.hasOwnProperty(t) && o.push(L[t]);
            return o
        }

        function g() {
            try {
                var e = Intl.DateTimeFormat().resolvedOptions().timeZone;
                if (e && e.length > 3) {
                    var t = L[y(e)];
                    if (t) return t;
                    $("Moment Timezone found " + e + " from the Intl api, but did not have that data loaded.")
                }
            } catch (n) { }
            var i, r, a, o = h(),
                s = o.length,
                l = m(o),
                c = [];
            for (r = 0; r < l.length; r++) {
                for (i = new u(w(l[r]), s), a = 0; s > a; a++) i.scoreOffsetAt(o[a]);
                c.push(i)
            }
            return c.sort(f), c.length > 0 ? c[0].zone.name : void 0
        }

        function v(e) {
            return (!H || e) && (H = g()), H
        }

        function y(e) {
            return (e || "").toLowerCase().replace(/\//g, "_")
        }

        function b(e) {
            var t, n, i, r;
            for ("string" == typeof e && (e = [e]), t = 0; t < e.length; t++) i = e[t].split("|"), n = i[0], r = y(n), j[r] = e[t], L[r] = n, p(r, i[2].split(" "))
        }

        function w(e, t) {
            e = y(e);
            var n, i = j[e];
            return i instanceof s ? i : "string" == typeof i ? (i = new s(i), j[e] = i, i) : N[e] && t !== w && (n = w(N[e], w)) ? (i = j[e] = new s, i._set(n), i.name = L[e], i) : null
        }

        function _() {
            var e, t = [];
            for (e in L) L.hasOwnProperty(e) && (j[e] || j[N[e]]) && L[e] && t.push(L[e]);
            return t.sort()
        }

        function x() {
            return Object.keys(z)
        }

        function k(e) {
            var t, n, i, r;
            for ("string" == typeof e && (e = [e]), t = 0; t < e.length; t++) n = e[t].split("|"), i = y(n[0]), r = y(n[1]), N[i] = r, L[i] = n[0], N[r] = i, L[r] = n[1]
        }

        function C(e) {
            var t, n, i, r;
            if (e && e.length)
                for (t = 0; t < e.length; t++) r = e[t].split("|"), n = r[0].toUpperCase(), i = r[1].split(" "), z[n] = new l(n, i)
        }

        function S(e) {
            return e = e.toUpperCase(), z[e] || null
        }

        function A(e, t) {
            if (e = S(e), !e) return null;
            var n = e.zones.sort();
            return t ? n.map(function (e) {
                var t = w(e);
                return {
                    name: e,
                    offset: t.utcOffset(new Date)
                }
            }) : n
        }

        function T(e) {
            b(e.zones), k(e.links), C(e.countries), M.dataVersion = e.version
        }

        function E(e) {
            return E.didShowError || (E.didShowError = !0, $("moment.tz.zoneExists('" + e + "') has been deprecated in favor of !moment.tz.zone('" + e + "')")), !!w(e)
        }

        function D(e) {
            var t = "X" === e._f || "x" === e._f;
            return !(!e._a || void 0 !== e._tzm || t)
        }

        function $(e) {
            "undefined" != typeof console && "function" == typeof console.error && console.error(e)
        }

        function M(t) {
            var n = Array.prototype.slice.call(arguments, 0, -1),
                i = arguments[arguments.length - 1],
                r = w(i),
                a = e.utc.apply(null, n);
            return r && !e.isMoment(t) && D(a) && a.add(r.parse(a), "minutes"), a.tz(i), a
        }

        function R(e) {
            return function () {
                return this._z ? this._z.abbr(this) : e.call(this)
            }
        }

        function I(e) {
            return function () {
                return this._z = null, e.apply(this, arguments)
            }
        }

        function P(e) {
            return function () {
                return arguments.length > 0 && (this._z = null), e.apply(this, arguments)
            }
        }
        void 0 === e.version && e["default"] && (e = e["default"]);
        var H, O = "0.5.32",
            j = {},
            N = {},
            z = {},
            L = {},
            F = {};
        e && "string" == typeof e.version || $("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");
        var B = e.version.split("."),
            W = +B[0],
            U = +B[1];
        (2 > W || 2 === W && 6 > U) && $("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js " + e.version + ". See momentjs.com"), s.prototype = {
            _set: function (e) {
                this.name = e.name, this.abbrs = e.abbrs, this.untils = e.untils, this.offsets = e.offsets, this.population = e.population
            },
            _index: function (e) {
                var t, n = +e,
                    i = this.untils;
                for (t = 0; t < i.length; t++)
                    if (n < i[t]) return t
            },
            countries: function () {
                var e = this.name;
                return Object.keys(z).filter(function (t) {
                    return -1 !== z[t].zones.indexOf(e)
                })
            },
            parse: function (e) {
                var t, n, i, r, a = +e,
                    o = this.offsets,
                    s = this.untils,
                    l = s.length - 1;
                for (r = 0; l > r; r++)
                    if (t = o[r], n = o[r + 1], i = o[r ? r - 1 : r], n > t && M.moveAmbiguousForward ? t = n : t > i && M.moveInvalidForward && (t = i), a < s[r] - 6e4 * t) return o[r];
                return o[l]
            },
            abbr: function (e) {
                return this.abbrs[this._index(e)]
            },
            offset: function (e) {
                return $("zone.offset has been deprecated in favor of zone.utcOffset"), this.offsets[this._index(e)]
            },
            utcOffset: function (e) {
                return this.offsets[this._index(e)]
            }
        }, u.prototype.scoreOffsetAt = function (e) {
            this.offsetScore += Math.abs(this.zone.utcOffset(e.at) - e.offset), this.zone.abbr(e.at).replace(/[^A-Z]/g, "") !== e.abbr && this.abbrScore++
        }, M.version = O, M.dataVersion = "", M._zones = j, M._links = N, M._names = L, M._countries = z, M.add = b, M.link = k, M.load = T, M.zone = w, M.zoneExists = E, M.guess = v, M.names = _, M.Zone = s, M.unpack = o, M.unpackBase60 = n, M.needsOffset = D, M.moveInvalidForward = !0, M.moveAmbiguousForward = !1, M.countries = x, M.zonesForCountry = A;
        var q = e.fn;
        e.tz = M, e.defaultZone = null, e.updateOffset = function (t, n) {
            var i, r = e.defaultZone;
            if (void 0 === t._z && (r && D(t) && !t._isUTC && (t._d = e.utc(t._a)._d, t.utc().add(r.parse(t), "minutes")), t._z = r), t._z)
                if (i = t._z.utcOffset(t), Math.abs(i) < 16 && (i /= 60), void 0 !== t.utcOffset) {
                    var a = t._z;
                    t.utcOffset(-i, n), t._z = a
                } else t.zone(i, n)
        }, q.tz = function (t, n) {
            if (t) {
                if ("string" != typeof t) throw new Error("Time zone name must be a string, got " + t + " [" + typeof t + "]");
                return this._z = w(t), this._z ? e.updateOffset(this, n) : $("Moment Timezone has no data for " + t + ". See http://momentjs.com/timezone/docs/#/data-loading/."), this
            }
            return this._z ? this._z.name : void 0
        }, q.zoneName = R(q.zoneName), q.zoneAbbr = R(q.zoneAbbr), q.utc = I(q.utc), q.local = I(q.local), q.utcOffset = P(q.utcOffset), e.tz.setDefault = function (t) {
            return (2 > W || 2 === W && 9 > U) && $("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js " + e.version + "."), e.defaultZone = t ? w(t) : null, e
        };
        var G = e.momentProperties;
        return "[object Array]" === Object.prototype.toString.call(G) ? (G.push("_z"), G.push("_a")) : G && (G._z = null), T({
            version: "2020a",
            zones: ["Africa/Abidjan|GMT|0|0||48e5", "Africa/Nairobi|EAT|-30|0||47e5", "Africa/Algiers|CET|-10|0||26e5", "Africa/Lagos|WAT|-10|0||17e6", "Africa/Maputo|CAT|-20|0||26e5", "Africa/Cairo|EET|-20|0||15e6", "Africa/Casablanca|+00 +01|0 -10|010101010101010101010101010101|1O9e0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0|32e5", "Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|11e6", "Africa/Johannesburg|SAST|-20|0||84e5", "Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5", "Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|", "Africa/Windhoek|CAT WAT|-20 -10|0101010|1Oc00 11B0 1nX0 11B0 1nX0 11B0|32e4", "America/Adak|HST HDT|a0 90|01010101010101010101010|1O100 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|326", "America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1O0X0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|30e4", "America/Santo_Domingo|AST|40|0||29e5", "America/Fortaleza|-03|30|0||34e5", "America/Asuncion|-03 -04|30 40|01010101010101010101010|1O6r0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0|28e5", "America/Panama|EST|50|0||15e5", "America/Mexico_City|CST CDT|60 50|01010101010101010101010|1Oc80 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|20e6", "America/Managua|CST|60|0||22e5", "America/La_Paz|-04|40|0||19e5", "America/Lima|-05|50|0||11e6", "America/Denver|MST MDT|70 60|01010101010101010101010|1O0V0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5", "America/Campo_Grande|-03 -04|30 40|0101010101|1NTf0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|77e4", "America/Cancun|CST EST|60 50|01|1NKU0|63e4", "America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5", "America/Chicago|CST CDT|60 50|01010101010101010101010|1O0U0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5", "America/Chihuahua|MST MDT|70 60|01010101010101010101010|1Oc90 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0|81e4", "America/Phoenix|MST|70|0||42e5", "America/Whitehorse|PST PDT MST|80 70 70|010101010102|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|23e3", "America/New_York|EST EDT|50 40|01010101010101010101010|1O0T0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6", "America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1O0W0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6", "America/Fort_Nelson|PST MST|80 70|01|1O0W0|39e2", "America/Halifax|AST ADT|40 30|01010101010101010101010|1O0S0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4", "America/Godthab|-03 -02|30 20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|17e3", "America/Grand_Turk|EST EDT AST|50 40 40|0121010101010101010|1O0T0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2", "America/Havana|CST CDT|50 40|01010101010101010101010|1O0R0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0|21e5", "America/Metlakatla|PST AKST AKDT|80 90 80|01212120121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|14e2", "America/Miquelon|-03 -02|30 20|01010101010101010101010|1O0R0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|61e2", "America/Montevideo|-02 -03|20 30|01|1O0Q0|17e5", "America/Noronha|-02|20|0||30e2", "America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1O0T0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|23e5", "Antarctica/Palmer|-03 -04|30 40|010|1QSr0 Ap0|40", "America/Santiago|-03 -04|30 40|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|62e5", "America/Sao_Paulo|-02 -03|20 30|0101010101|1NTe0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6", "Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|25e4", "America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1O0Ru 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4", "Antarctica/Casey|+08 +11|-80 -b0|010|1RWg0 3m10|10", "Asia/Bangkok|+07|-70|0||15e6", "Asia/Vladivostok|+10|-a0|0||60e4", "Pacific/Bougainville|+11|-b0|0||18e4", "Asia/Tashkent|+05|-50|0||23e5", "Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|14e5", "Asia/Baghdad|+03|-30|0||66e5", "Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|40", "Asia/Dhaka|+06|-60|0||16e6", "Asia/Amman|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0|25e5", "Asia/Kamchatka|+12|-c0|0||18e4", "Asia/Baku|+04 +05|-40 -50|010|1O9c0 1o00|27e5", "Asia/Barnaul|+06 +07|-60 -70|01|1QyI0|", "Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1O9a0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0|22e5", "Asia/Kuala_Lumpur|+08|-80|0||71e5", "Asia/Kolkata|IST|-5u|0||15e6", "Asia/Chita|+08 +09|-80 -90|01|1QyG0|33e4", "Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5", "Asia/Shanghai|CST|-80|0||23e6", "Asia/Colombo|+0530|-5u|0||22e5", "Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1O8m0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0|26e5", "Asia/Yakutsk|+09|-90|0||28e4", "Asia/Dubai|+04|-40|0||39e5", "Asia/Famagusta|EET EEST +03|-20 -30 -30|0101201010101010101010|1O9d0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|", "Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1O8K0 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11c0 1oo0 11c0 1rc0 Wo0 1rc0 Wo0 1rc0 11c0 1oo0 11c0 1oo0 11c0 1oo0|18e5", "Asia/Hong_Kong|HKT|-80|0||73e5", "Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3", "Europe/Istanbul|EET EEST +03|-20 -30 -30|01012|1O9d0 1tA0 U00 15w0|13e6", "Asia/Jakarta|WIB|-70|0||31e6", "Asia/Jayapura|WIT|-90|0||26e4", "Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1O8o0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0|81e4", "Asia/Kabul|+0430|-4u|0||46e5", "Asia/Karachi|PKT|-50|0||24e6", "Asia/Kathmandu|+0545|-5J|0||12e5", "Asia/Magadan|+10 +11|-a0 -b0|01|1QJQ0|95e3", "Asia/Makassar|WITA|-80|0||15e5", "Asia/Manila|PST|-80|0||24e6", "Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|35e5", "Asia/Novosibirsk|+06 +07|-60 -70|01|1Rmk0|15e5", "Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5", "Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4", "Asia/Rangoon|+0630|-6u|0||48e5", "Asia/Sakhalin|+10 +11|-a0 -b0|01|1QyE0|58e4", "Asia/Seoul|KST|-90|0||23e6", "Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1O6ku 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0|14e6", "Asia/Tokyo|JST|-90|0||38e6", "Asia/Tomsk|+06 +07|-60 -70|01|1QXU0|10e5", "Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|27e5", "Atlantic/Cape_Verde|-01|10|0||50e4", "Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1ObQ0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|40e5", "Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1ObQu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|11e5", "Australia/Brisbane|AEST|-a0|0||20e5", "Australia/Darwin|ACST|-9u|0||12e4", "Australia/Eucla|+0845|-8J|0||368", "Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1ObP0 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu|347", "Australia/Perth|AWST|-80|0||18e5", "Pacific/Easter|-05 -06|50 60|010101010101010101010|1QSr0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 11B0 1nX0 11B0|30e2", "Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|12e5", "Etc/GMT-1|+01|-10|0||", "Pacific/Fakaofo|+13|-d0|0||483", "Pacific/Kiritimati|+14|-e0|0||51e2", "Etc/GMT-2|+02|-20|0||", "Pacific/Tahiti|-10|a0|0||18e4", "Pacific/Niue|-11|b0|0||12e2", "Etc/GMT+12|-12|c0|0||", "Pacific/Galapagos|-06|60|0||25e3", "Etc/GMT+7|-07|70|0||", "Pacific/Pitcairn|-08|80|0||56", "Pacific/Gambier|-09|90|0||125", "Etc/UTC|UTC|0|0||", "Europe/Ulyanovsk|+03 +04|-30 -40|01|1QyL0|13e5", "Europe/London|GMT BST|0 -10|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|10e6", "Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1O9c0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|67e4", "Europe/Moscow|MSK|-30|0||16e6", "Europe/Saratov|+03 +04|-30 -40|01|1Sfz0|", "Europe/Volgograd|+03 +04|-30 -40|01|1WQL0|10e5", "Pacific/Honolulu|HST|a0|0||37e4", "MET|MET MEST|-10 -20|01010101010101010101010|1O9d0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00|", "Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|600", "Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1ObO0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00|37e3", "Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1NF20 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 20o0 pc0 20o0 s00 20o0 pc0 20o0 pc0 20o0 pc0 20o0 pc0 20o0|88e4", "Pacific/Guam|ChST|-a0|0||17e4", "Pacific/Marquesas|-0930|9u|0||86e2", "Pacific/Pago_Pago|SST|b0|0||37e2", "Pacific/Norfolk|+1130 +11 +12|-bu -b0 -c0|012121212121212|1PoCu 9Jcu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0|25e4", "Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],
            links: ["Africa/Abidjan|Africa/Accra", "Africa/Abidjan|Africa/Bamako", "Africa/Abidjan|Africa/Banjul", "Africa/Abidjan|Africa/Bissau", "Africa/Abidjan|Africa/Conakry", "Africa/Abidjan|Africa/Dakar", "Africa/Abidjan|Africa/Freetown", "Africa/Abidjan|Africa/Lome", "Africa/Abidjan|Africa/Monrovia", "Africa/Abidjan|Africa/Nouakchott", "Africa/Abidjan|Africa/Ouagadougou", "Africa/Abidjan|Africa/Timbuktu", "Africa/Abidjan|America/Danmarkshavn", "Africa/Abidjan|Atlantic/Reykjavik", "Africa/Abidjan|Atlantic/St_Helena", "Africa/Abidjan|Etc/GMT", "Africa/Abidjan|Etc/GMT+0", "Africa/Abidjan|Etc/GMT-0", "Africa/Abidjan|Etc/GMT0", "Africa/Abidjan|Etc/Greenwich", "Africa/Abidjan|GMT", "Africa/Abidjan|GMT+0", "Africa/Abidjan|GMT-0", "Africa/Abidjan|GMT0", "Africa/Abidjan|Greenwich", "Africa/Abidjan|Iceland", "Africa/Algiers|Africa/Tunis", "Africa/Cairo|Africa/Tripoli", "Africa/Cairo|Egypt", "Africa/Cairo|Europe/Kaliningrad", "Africa/Cairo|Libya", "Africa/Casablanca|Africa/El_Aaiun", "Africa/Johannesburg|Africa/Maseru", "Africa/Johannesburg|Africa/Mbabane", "Africa/Lagos|Africa/Bangui", "Africa/Lagos|Africa/Brazzaville", "Africa/Lagos|Africa/Douala", "Africa/Lagos|Africa/Kinshasa", "Africa/Lagos|Africa/Libreville", "Africa/Lagos|Africa/Luanda", "Africa/Lagos|Africa/Malabo", "Africa/Lagos|Africa/Ndjamena", "Africa/Lagos|Africa/Niamey", "Africa/Lagos|Africa/Porto-Novo", "Africa/Maputo|Africa/Blantyre", "Africa/Maputo|Africa/Bujumbura", "Africa/Maputo|Africa/Gaborone", "Africa/Maputo|Africa/Harare", "Africa/Maputo|Africa/Kigali", "Africa/Maputo|Africa/Lubumbashi", "Africa/Maputo|Africa/Lusaka", "Africa/Nairobi|Africa/Addis_Ababa", "Africa/Nairobi|Africa/Asmara", "Africa/Nairobi|Africa/Asmera", "Africa/Nairobi|Africa/Dar_es_Salaam", "Africa/Nairobi|Africa/Djibouti", "Africa/Nairobi|Africa/Juba", "Africa/Nairobi|Africa/Kampala", "Africa/Nairobi|Africa/Mogadishu", "Africa/Nairobi|Indian/Antananarivo", "Africa/Nairobi|Indian/Comoro", "Africa/Nairobi|Indian/Mayotte", "America/Adak|America/Atka", "America/Adak|US/Aleutian", "America/Anchorage|America/Juneau", "America/Anchorage|America/Nome", "America/Anchorage|America/Sitka", "America/Anchorage|America/Yakutat", "America/Anchorage|US/Alaska", "America/Campo_Grande|America/Cuiaba", "America/Chicago|America/Indiana/Knox", "America/Chicago|America/Indiana/Tell_City", "America/Chicago|America/Knox_IN", "America/Chicago|America/Matamoros", "America/Chicago|America/Menominee", "America/Chicago|America/North_Dakota/Beulah", "America/Chicago|America/North_Dakota/Center", "America/Chicago|America/North_Dakota/New_Salem", "America/Chicago|America/Rainy_River", "America/Chicago|America/Rankin_Inlet", "America/Chicago|America/Resolute", "America/Chicago|America/Winnipeg", "America/Chicago|CST6CDT", "America/Chicago|Canada/Central", "America/Chicago|US/Central", "America/Chicago|US/Indiana-Starke", "America/Chihuahua|America/Mazatlan", "America/Chihuahua|Mexico/BajaSur", "America/Denver|America/Boise", "America/Denver|America/Cambridge_Bay", "America/Denver|America/Edmonton", "America/Denver|America/Inuvik", "America/Denver|America/Ojinaga", "America/Denver|America/Shiprock", "America/Denver|America/Yellowknife", "America/Denver|Canada/Mountain", "America/Denver|MST7MDT", "America/Denver|Navajo", "America/Denver|US/Mountain", "America/Fortaleza|America/Araguaina", "America/Fortaleza|America/Argentina/Buenos_Aires", "America/Fortaleza|America/Argentina/Catamarca", "America/Fortaleza|America/Argentina/ComodRivadavia", "America/Fortaleza|America/Argentina/Cordoba", "America/Fortaleza|America/Argentina/Jujuy", "America/Fortaleza|America/Argentina/La_Rioja", "America/Fortaleza|America/Argentina/Mendoza", "America/Fortaleza|America/Argentina/Rio_Gallegos", "America/Fortaleza|America/Argentina/Salta", "America/Fortaleza|America/Argentina/San_Juan", "America/Fortaleza|America/Argentina/San_Luis", "America/Fortaleza|America/Argentina/Tucuman", "America/Fortaleza|America/Argentina/Ushuaia", "America/Fortaleza|America/Bahia", "America/Fortaleza|America/Belem", "America/Fortaleza|America/Buenos_Aires", "America/Fortaleza|America/Catamarca", "America/Fortaleza|America/Cayenne", "America/Fortaleza|America/Cordoba", "America/Fortaleza|America/Jujuy", "America/Fortaleza|America/Maceio", "America/Fortaleza|America/Mendoza", "America/Fortaleza|America/Paramaribo", "America/Fortaleza|America/Recife", "America/Fortaleza|America/Rosario", "America/Fortaleza|America/Santarem", "America/Fortaleza|Antarctica/Rothera", "America/Fortaleza|Atlantic/Stanley", "America/Fortaleza|Etc/GMT+3", "America/Godthab|America/Nuuk", "America/Halifax|America/Glace_Bay", "America/Halifax|America/Goose_Bay", "America/Halifax|America/Moncton", "America/Halifax|America/Thule", "America/Halifax|Atlantic/Bermuda", "America/Halifax|Canada/Atlantic", "America/Havana|Cuba", "America/La_Paz|America/Boa_Vista", "America/La_Paz|America/Guyana", "America/La_Paz|America/Manaus", "America/La_Paz|America/Porto_Velho", "America/La_Paz|Brazil/West", "America/La_Paz|Etc/GMT+4", "America/Lima|America/Bogota", "America/Lima|America/Eirunepe", "America/Lima|America/Guayaquil", "America/Lima|America/Porto_Acre", "America/Lima|America/Rio_Branco", "America/Lima|Brazil/Acre", "America/Lima|Etc/GMT+5", "America/Los_Angeles|America/Ensenada", "America/Los_Angeles|America/Santa_Isabel", "America/Los_Angeles|America/Tijuana", "America/Los_Angeles|America/Vancouver", "America/Los_Angeles|Canada/Pacific", "America/Los_Angeles|Mexico/BajaNorte", "America/Los_Angeles|PST8PDT", "America/Los_Angeles|US/Pacific", "America/Los_Angeles|US/Pacific-New", "America/Managua|America/Belize", "America/Managua|America/Costa_Rica", "America/Managua|America/El_Salvador", "America/Managua|America/Guatemala", "America/Managua|America/Regina", "America/Managua|America/Swift_Current", "America/Managua|America/Tegucigalpa", "America/Managua|Canada/Saskatchewan", "America/Mexico_City|America/Bahia_Banderas", "America/Mexico_City|America/Merida", "America/Mexico_City|America/Monterrey", "America/Mexico_City|Mexico/General", "America/New_York|America/Detroit", "America/New_York|America/Fort_Wayne", "America/New_York|America/Indiana/Indianapolis", "America/New_York|America/Indiana/Marengo", "America/New_York|America/Indiana/Petersburg", "America/New_York|America/Indiana/Vevay", "America/New_York|America/Indiana/Vincennes", "America/New_York|America/Indiana/Winamac", "America/New_York|America/Indianapolis", "America/New_York|America/Iqaluit", "America/New_York|America/Kentucky/Louisville", "America/New_York|America/Kentucky/Monticello", "America/New_York|America/Louisville", "America/New_York|America/Montreal", "America/New_York|America/Nassau", "America/New_York|America/Nipigon", "America/New_York|America/Pangnirtung", "America/New_York|America/Thunder_Bay", "America/New_York|America/Toronto", "America/New_York|Canada/Eastern", "America/New_York|EST5EDT", "America/New_York|US/East-Indiana", "America/New_York|US/Eastern", "America/New_York|US/Michigan", "America/Noronha|Atlantic/South_Georgia", "America/Noronha|Brazil/DeNoronha", "America/Noronha|Etc/GMT+2", "America/Panama|America/Atikokan", "America/Panama|America/Cayman", "America/Panama|America/Coral_Harbour", "America/Panama|America/Jamaica", "America/Panama|EST", "America/Panama|Jamaica", "America/Phoenix|America/Creston", "America/Phoenix|America/Dawson_Creek", "America/Phoenix|America/Hermosillo", "America/Phoenix|MST", "America/Phoenix|US/Arizona", "America/Santiago|Chile/Continental", "America/Santo_Domingo|America/Anguilla", "America/Santo_Domingo|America/Antigua", "America/Santo_Domingo|America/Aruba", "America/Santo_Domingo|America/Barbados", "America/Santo_Domingo|America/Blanc-Sablon", "America/Santo_Domingo|America/Curacao", "America/Santo_Domingo|America/Dominica", "America/Santo_Domingo|America/Grenada", "America/Santo_Domingo|America/Guadeloupe", "America/Santo_Domingo|America/Kralendijk", "America/Santo_Domingo|America/Lower_Princes", "America/Santo_Domingo|America/Marigot", "America/Santo_Domingo|America/Martinique", "America/Santo_Domingo|America/Montserrat", "America/Santo_Domingo|America/Port_of_Spain", "America/Santo_Domingo|America/Puerto_Rico", "America/Santo_Domingo|America/St_Barthelemy", "America/Santo_Domingo|America/St_Kitts", "America/Santo_Domingo|America/St_Lucia", "America/Santo_Domingo|America/St_Thomas", "America/Santo_Domingo|America/St_Vincent", "America/Santo_Domingo|America/Tortola", "America/Santo_Domingo|America/Virgin", "America/Sao_Paulo|Brazil/East", "America/St_Johns|Canada/Newfoundland", "America/Whitehorse|America/Dawson", "America/Whitehorse|Canada/Yukon", "Antarctica/Palmer|America/Punta_Arenas", "Asia/Baghdad|Antarctica/Syowa", "Asia/Baghdad|Asia/Aden", "Asia/Baghdad|Asia/Bahrain", "Asia/Baghdad|Asia/Kuwait", "Asia/Baghdad|Asia/Qatar", "Asia/Baghdad|Asia/Riyadh", "Asia/Baghdad|Etc/GMT-3", "Asia/Baghdad|Europe/Kirov", "Asia/Baghdad|Europe/Minsk", "Asia/Bangkok|Antarctica/Davis", "Asia/Bangkok|Asia/Ho_Chi_Minh", "Asia/Bangkok|Asia/Krasnoyarsk", "Asia/Bangkok|Asia/Novokuznetsk", "Asia/Bangkok|Asia/Phnom_Penh", "Asia/Bangkok|Asia/Saigon", "Asia/Bangkok|Asia/Vientiane", "Asia/Bangkok|Etc/GMT-7", "Asia/Bangkok|Indian/Christmas", "Asia/Dhaka|Antarctica/Vostok", "Asia/Dhaka|Asia/Almaty", "Asia/Dhaka|Asia/Bishkek", "Asia/Dhaka|Asia/Dacca", "Asia/Dhaka|Asia/Kashgar", "Asia/Dhaka|Asia/Omsk", "Asia/Dhaka|Asia/Qostanay", "Asia/Dhaka|Asia/Thimbu", "Asia/Dhaka|Asia/Thimphu", "Asia/Dhaka|Asia/Urumqi", "Asia/Dhaka|Etc/GMT-6", "Asia/Dhaka|Indian/Chagos", "Asia/Dubai|Asia/Muscat", "Asia/Dubai|Asia/Tbilisi", "Asia/Dubai|Asia/Yerevan", "Asia/Dubai|Etc/GMT-4", "Asia/Dubai|Europe/Samara", "Asia/Dubai|Indian/Mahe", "Asia/Dubai|Indian/Mauritius", "Asia/Dubai|Indian/Reunion", "Asia/Gaza|Asia/Hebron", "Asia/Hong_Kong|Hongkong", "Asia/Jakarta|Asia/Pontianak", "Asia/Jerusalem|Asia/Tel_Aviv", "Asia/Jerusalem|Israel", "Asia/Kamchatka|Asia/Anadyr", "Asia/Kamchatka|Etc/GMT-12", "Asia/Kamchatka|Kwajalein", "Asia/Kamchatka|Pacific/Funafuti", "Asia/Kamchatka|Pacific/Kwajalein", "Asia/Kamchatka|Pacific/Majuro", "Asia/Kamchatka|Pacific/Nauru", "Asia/Kamchatka|Pacific/Tarawa", "Asia/Kamchatka|Pacific/Wake", "Asia/Kamchatka|Pacific/Wallis", "Asia/Kathmandu|Asia/Katmandu", "Asia/Kolkata|Asia/Calcutta", "Asia/Kuala_Lumpur|Asia/Brunei", "Asia/Kuala_Lumpur|Asia/Irkutsk", "Asia/Kuala_Lumpur|Asia/Kuching", "Asia/Kuala_Lumpur|Asia/Singapore", "Asia/Kuala_Lumpur|Etc/GMT-8", "Asia/Kuala_Lumpur|Singapore", "Asia/Makassar|Asia/Ujung_Pandang", "Asia/Rangoon|Asia/Yangon", "Asia/Rangoon|Indian/Cocos", "Asia/Seoul|ROK", "Asia/Shanghai|Asia/Chongqing", "Asia/Shanghai|Asia/Chungking", "Asia/Shanghai|Asia/Harbin", "Asia/Shanghai|Asia/Macao", "Asia/Shanghai|Asia/Macau", "Asia/Shanghai|Asia/Taipei", "Asia/Shanghai|PRC", "Asia/Shanghai|ROC", "Asia/Tashkent|Antarctica/Mawson", "Asia/Tashkent|Asia/Aqtau", "Asia/Tashkent|Asia/Aqtobe", "Asia/Tashkent|Asia/Ashgabat", "Asia/Tashkent|Asia/Ashkhabad", "Asia/Tashkent|Asia/Atyrau", "Asia/Tashkent|Asia/Dushanbe", "Asia/Tashkent|Asia/Oral", "Asia/Tashkent|Asia/Samarkand", "Asia/Tashkent|Asia/Yekaterinburg", "Asia/Tashkent|Etc/GMT-5", "Asia/Tashkent|Indian/Kerguelen", "Asia/Tashkent|Indian/Maldives", "Asia/Tehran|Iran", "Asia/Tokyo|Japan", "Asia/Ulaanbaatar|Asia/Choibalsan", "Asia/Ulaanbaatar|Asia/Ulan_Bator", "Asia/Vladivostok|Antarctica/DumontDUrville", "Asia/Vladivostok|Asia/Ust-Nera", "Asia/Vladivostok|Etc/GMT-10", "Asia/Vladivostok|Pacific/Chuuk", "Asia/Vladivostok|Pacific/Port_Moresby", "Asia/Vladivostok|Pacific/Truk", "Asia/Vladivostok|Pacific/Yap", "Asia/Yakutsk|Asia/Dili", "Asia/Yakutsk|Asia/Khandyga", "Asia/Yakutsk|Etc/GMT-9", "Asia/Yakutsk|Pacific/Palau", "Atlantic/Azores|America/Scoresbysund", "Atlantic/Cape_Verde|Etc/GMT+1", "Australia/Adelaide|Australia/Broken_Hill", "Australia/Adelaide|Australia/South", "Australia/Adelaide|Australia/Yancowinna", "Australia/Brisbane|Australia/Lindeman", "Australia/Brisbane|Australia/Queensland", "Australia/Darwin|Australia/North", "Australia/Lord_Howe|Australia/LHI", "Australia/Perth|Australia/West", "Australia/Sydney|Australia/ACT", "Australia/Sydney|Australia/Canberra", "Australia/Sydney|Australia/Currie", "Australia/Sydney|Australia/Hobart", "Australia/Sydney|Australia/Melbourne", "Australia/Sydney|Australia/NSW", "Australia/Sydney|Australia/Tasmania", "Australia/Sydney|Australia/Victoria", "Etc/UTC|Etc/UCT", "Etc/UTC|Etc/Universal", "Etc/UTC|Etc/Zulu", "Etc/UTC|UCT", "Etc/UTC|UTC", "Etc/UTC|Universal", "Etc/UTC|Zulu", "Europe/Athens|Asia/Nicosia", "Europe/Athens|EET", "Europe/Athens|Europe/Bucharest", "Europe/Athens|Europe/Helsinki", "Europe/Athens|Europe/Kiev", "Europe/Athens|Europe/Mariehamn", "Europe/Athens|Europe/Nicosia", "Europe/Athens|Europe/Riga", "Europe/Athens|Europe/Sofia", "Europe/Athens|Europe/Tallinn", "Europe/Athens|Europe/Uzhgorod", "Europe/Athens|Europe/Vilnius", "Europe/Athens|Europe/Zaporozhye", "Europe/Chisinau|Europe/Tiraspol", "Europe/Dublin|Eire", "Europe/Istanbul|Asia/Istanbul", "Europe/Istanbul|Turkey", "Europe/Lisbon|Atlantic/Canary", "Europe/Lisbon|Atlantic/Faeroe", "Europe/Lisbon|Atlantic/Faroe", "Europe/Lisbon|Atlantic/Madeira", "Europe/Lisbon|Portugal", "Europe/Lisbon|WET", "Europe/London|Europe/Belfast", "Europe/London|Europe/Guernsey", "Europe/London|Europe/Isle_of_Man", "Europe/London|Europe/Jersey", "Europe/London|GB", "Europe/London|GB-Eire", "Europe/Moscow|Europe/Simferopol", "Europe/Moscow|W-SU", "Europe/Paris|Africa/Ceuta", "Europe/Paris|Arctic/Longyearbyen", "Europe/Paris|Atlantic/Jan_Mayen", "Europe/Paris|CET", "Europe/Paris|Europe/Amsterdam", "Europe/Paris|Europe/Andorra", "Europe/Paris|Europe/Belgrade", "Europe/Paris|Europe/Berlin", "Europe/Paris|Europe/Bratislava", "Europe/Paris|Europe/Brussels", "Europe/Paris|Europe/Budapest", "Europe/Paris|Europe/Busingen", "Europe/Paris|Europe/Copenhagen", "Europe/Paris|Europe/Gibraltar", "Europe/Paris|Europe/Ljubljana", "Europe/Paris|Europe/Luxembourg", "Europe/Paris|Europe/Madrid", "Europe/Paris|Europe/Malta", "Europe/Paris|Europe/Monaco", "Europe/Paris|Europe/Oslo", "Europe/Paris|Europe/Podgorica", "Europe/Paris|Europe/Prague", "Europe/Paris|Europe/Rome", "Europe/Paris|Europe/San_Marino", "Europe/Paris|Europe/Sarajevo", "Europe/Paris|Europe/Skopje", "Europe/Paris|Europe/Stockholm", "Europe/Paris|Europe/Tirane", "Europe/Paris|Europe/Vaduz", "Europe/Paris|Europe/Vatican", "Europe/Paris|Europe/Vienna", "Europe/Paris|Europe/Warsaw", "Europe/Paris|Europe/Zagreb", "Europe/Paris|Europe/Zurich", "Europe/Paris|Poland", "Europe/Ulyanovsk|Europe/Astrakhan", "Pacific/Auckland|Antarctica/McMurdo", "Pacific/Auckland|Antarctica/South_Pole", "Pacific/Auckland|NZ", "Pacific/Bougainville|Antarctica/Macquarie", "Pacific/Bougainville|Asia/Srednekolymsk", "Pacific/Bougainville|Etc/GMT-11", "Pacific/Bougainville|Pacific/Efate", "Pacific/Bougainville|Pacific/Guadalcanal", "Pacific/Bougainville|Pacific/Kosrae", "Pacific/Bougainville|Pacific/Noumea", "Pacific/Bougainville|Pacific/Pohnpei", "Pacific/Bougainville|Pacific/Ponape", "Pacific/Chatham|NZ-CHAT", "Pacific/Easter|Chile/EasterIsland", "Pacific/Fakaofo|Etc/GMT-13", "Pacific/Fakaofo|Pacific/Enderbury", "Pacific/Galapagos|Etc/GMT+6", "Pacific/Gambier|Etc/GMT+9", "Pacific/Guam|Pacific/Saipan", "Pacific/Honolulu|HST", "Pacific/Honolulu|Pacific/Johnston", "Pacific/Honolulu|US/Hawaii", "Pacific/Kiritimati|Etc/GMT-14", "Pacific/Niue|Etc/GMT+11", "Pacific/Pago_Pago|Pacific/Midway", "Pacific/Pago_Pago|Pacific/Samoa", "Pacific/Pago_Pago|US/Samoa", "Pacific/Pitcairn|Etc/GMT+8", "Pacific/Tahiti|Etc/GMT+10", "Pacific/Tahiti|Pacific/Rarotonga"],
            countries: ["AD|Europe/Andorra", "AE|Asia/Dubai", "AF|Asia/Kabul", "AG|America/Port_of_Spain America/Antigua", "AI|America/Port_of_Spain America/Anguilla", "AL|Europe/Tirane", "AM|Asia/Yerevan", "AO|Africa/Lagos Africa/Luanda", "AQ|Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Pacific/Auckland Antarctica/McMurdo", "AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia", "AS|Pacific/Pago_Pago", "AT|Europe/Vienna", "AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Currie Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla", "AW|America/Curacao America/Aruba", "AX|Europe/Helsinki Europe/Mariehamn", "AZ|Asia/Baku", "BA|Europe/Belgrade Europe/Sarajevo", "BB|America/Barbados", "BD|Asia/Dhaka", "BE|Europe/Brussels", "BF|Africa/Abidjan Africa/Ouagadougou", "BG|Europe/Sofia", "BH|Asia/Qatar Asia/Bahrain", "BI|Africa/Maputo Africa/Bujumbura", "BJ|Africa/Lagos Africa/Porto-Novo", "BL|America/Port_of_Spain America/St_Barthelemy", "BM|Atlantic/Bermuda", "BN|Asia/Brunei", "BO|America/La_Paz", "BQ|America/Curacao America/Kralendijk", "BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco", "BS|America/Nassau", "BT|Asia/Thimphu", "BW|Africa/Maputo Africa/Gaborone", "BY|Europe/Minsk", "BZ|America/Belize", "CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Blanc-Sablon America/Toronto America/Nipigon America/Thunder_Bay America/Iqaluit America/Pangnirtung America/Atikokan America/Winnipeg America/Rainy_River America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Yellowknife America/Inuvik America/Creston America/Dawson_Creek America/Fort_Nelson America/Vancouver America/Whitehorse America/Dawson", "CC|Indian/Cocos", "CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi", "CF|Africa/Lagos Africa/Bangui", "CG|Africa/Lagos Africa/Brazzaville", "CH|Europe/Zurich", "CI|Africa/Abidjan", "CK|Pacific/Rarotonga", "CL|America/Santiago America/Punta_Arenas Pacific/Easter", "CM|Africa/Lagos Africa/Douala", "CN|Asia/Shanghai Asia/Urumqi", "CO|America/Bogota", "CR|America/Costa_Rica", "CU|America/Havana", "CV|Atlantic/Cape_Verde", "CW|America/Curacao", "CX|Indian/Christmas", "CY|Asia/Nicosia Asia/Famagusta", "CZ|Europe/Prague", "DE|Europe/Zurich Europe/Berlin Europe/Busingen", "DJ|Africa/Nairobi Africa/Djibouti", "DK|Europe/Copenhagen", "DM|America/Port_of_Spain America/Dominica", "DO|America/Santo_Domingo", "DZ|Africa/Algiers", "EC|America/Guayaquil Pacific/Galapagos", "EE|Europe/Tallinn", "EG|Africa/Cairo", "EH|Africa/El_Aaiun", "ER|Africa/Nairobi Africa/Asmara", "ES|Europe/Madrid Africa/Ceuta Atlantic/Canary", "ET|Africa/Nairobi Africa/Addis_Ababa", "FI|Europe/Helsinki", "FJ|Pacific/Fiji", "FK|Atlantic/Stanley", "FM|Pacific/Chuuk Pacific/Pohnpei Pacific/Kosrae", "FO|Atlantic/Faroe", "FR|Europe/Paris", "GA|Africa/Lagos Africa/Libreville", "GB|Europe/London", "GD|America/Port_of_Spain America/Grenada", "GE|Asia/Tbilisi", "GF|America/Cayenne", "GG|Europe/London Europe/Guernsey", "GH|Africa/Accra", "GI|Europe/Gibraltar", "GL|America/Godthab America/Danmarkshavn America/Scoresbysund America/Thule", "GM|Africa/Abidjan Africa/Banjul", "GN|Africa/Abidjan Africa/Conakry", "GP|America/Port_of_Spain America/Guadeloupe", "GQ|Africa/Lagos Africa/Malabo", "GR|Europe/Athens", "GS|Atlantic/South_Georgia", "GT|America/Guatemala", "GU|Pacific/Guam", "GW|Africa/Bissau", "GY|America/Guyana", "HK|Asia/Hong_Kong", "HN|America/Tegucigalpa", "HR|Europe/Belgrade Europe/Zagreb", "HT|America/Port-au-Prince", "HU|Europe/Budapest", "ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura", "IE|Europe/Dublin", "IL|Asia/Jerusalem", "IM|Europe/London Europe/Isle_of_Man", "IN|Asia/Kolkata", "IO|Indian/Chagos", "IQ|Asia/Baghdad", "IR|Asia/Tehran", "IS|Atlantic/Reykjavik", "IT|Europe/Rome", "JE|Europe/London Europe/Jersey", "JM|America/Jamaica", "JO|Asia/Amman", "JP|Asia/Tokyo", "KE|Africa/Nairobi", "KG|Asia/Bishkek", "KH|Asia/Bangkok Asia/Phnom_Penh", "KI|Pacific/Tarawa Pacific/Enderbury Pacific/Kiritimati", "KM|Africa/Nairobi Indian/Comoro", "KN|America/Port_of_Spain America/St_Kitts", "KP|Asia/Pyongyang", "KR|Asia/Seoul", "KW|Asia/Riyadh Asia/Kuwait", "KY|America/Panama America/Cayman", "KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral", "LA|Asia/Bangkok Asia/Vientiane", "LB|Asia/Beirut", "LC|America/Port_of_Spain America/St_Lucia", "LI|Europe/Zurich Europe/Vaduz", "LK|Asia/Colombo", "LR|Africa/Monrovia", "LS|Africa/Johannesburg Africa/Maseru", "LT|Europe/Vilnius", "LU|Europe/Luxembourg", "LV|Europe/Riga", "LY|Africa/Tripoli", "MA|Africa/Casablanca", "MC|Europe/Monaco", "MD|Europe/Chisinau", "ME|Europe/Belgrade Europe/Podgorica", "MF|America/Port_of_Spain America/Marigot", "MG|Africa/Nairobi Indian/Antananarivo", "MH|Pacific/Majuro Pacific/Kwajalein", "MK|Europe/Belgrade Europe/Skopje", "ML|Africa/Abidjan Africa/Bamako", "MM|Asia/Yangon", "MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan", "MO|Asia/Macau", "MP|Pacific/Guam Pacific/Saipan", "MQ|America/Martinique", "MR|Africa/Abidjan Africa/Nouakchott", "MS|America/Port_of_Spain America/Montserrat", "MT|Europe/Malta", "MU|Indian/Mauritius", "MV|Indian/Maldives", "MW|Africa/Maputo Africa/Blantyre", "MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Mazatlan America/Chihuahua America/Ojinaga America/Hermosillo America/Tijuana America/Bahia_Banderas", "MY|Asia/Kuala_Lumpur Asia/Kuching", "MZ|Africa/Maputo", "NA|Africa/Windhoek", "NC|Pacific/Noumea", "NE|Africa/Lagos Africa/Niamey", "NF|Pacific/Norfolk", "NG|Africa/Lagos", "NI|America/Managua", "NL|Europe/Amsterdam", "NO|Europe/Oslo", "NP|Asia/Kathmandu", "NR|Pacific/Nauru", "NU|Pacific/Niue", "NZ|Pacific/Auckland Pacific/Chatham", "OM|Asia/Dubai Asia/Muscat", "PA|America/Panama", "PE|America/Lima", "PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier", "PG|Pacific/Port_Moresby Pacific/Bougainville", "PH|Asia/Manila", "PK|Asia/Karachi", "PL|Europe/Warsaw", "PM|America/Miquelon", "PN|Pacific/Pitcairn", "PR|America/Puerto_Rico", "PS|Asia/Gaza Asia/Hebron", "PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores", "PW|Pacific/Palau", "PY|America/Asuncion", "QA|Asia/Qatar", "RE|Indian/Reunion", "RO|Europe/Bucharest", "RS|Europe/Belgrade", "RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Astrakhan Europe/Volgograd Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr", "RW|Africa/Maputo Africa/Kigali", "SA|Asia/Riyadh", "SB|Pacific/Guadalcanal", "SC|Indian/Mahe", "SD|Africa/Khartoum", "SE|Europe/Stockholm", "SG|Asia/Singapore", "SH|Africa/Abidjan Atlantic/St_Helena", "SI|Europe/Belgrade Europe/Ljubljana", "SJ|Europe/Oslo Arctic/Longyearbyen", "SK|Europe/Prague Europe/Bratislava", "SL|Africa/Abidjan Africa/Freetown", "SM|Europe/Rome Europe/San_Marino", "SN|Africa/Abidjan Africa/Dakar", "SO|Africa/Nairobi Africa/Mogadishu", "SR|America/Paramaribo", "SS|Africa/Juba", "ST|Africa/Sao_Tome", "SV|America/El_Salvador", "SX|America/Curacao America/Lower_Princes", "SY|Asia/Damascus", "SZ|Africa/Johannesburg Africa/Mbabane", "TC|America/Grand_Turk", "TD|Africa/Ndjamena", "TF|Indian/Reunion Indian/Kerguelen", "TG|Africa/Abidjan Africa/Lome", "TH|Asia/Bangkok", "TJ|Asia/Dushanbe", "TK|Pacific/Fakaofo", "TL|Asia/Dili", "TM|Asia/Ashgabat", "TN|Africa/Tunis", "TO|Pacific/Tongatapu", "TR|Europe/Istanbul", "TT|America/Port_of_Spain", "TV|Pacific/Funafuti", "TW|Asia/Taipei", "TZ|Africa/Nairobi Africa/Dar_es_Salaam", "UA|Europe/Simferopol Europe/Kiev Europe/Uzhgorod Europe/Zaporozhye", "UG|Africa/Nairobi Africa/Kampala", "UM|Pacific/Pago_Pago Pacific/Wake Pacific/Honolulu Pacific/Midway", "US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu", "UY|America/Montevideo", "UZ|Asia/Samarkand Asia/Tashkent", "VA|Europe/Rome Europe/Vatican", "VC|America/Port_of_Spain America/St_Vincent", "VE|America/Caracas", "VG|America/Port_of_Spain America/Tortola", "VI|America/Port_of_Spain America/St_Thomas", "VN|Asia/Bangkok Asia/Ho_Chi_Minh", "VU|Pacific/Efate", "WF|Pacific/Wallis", "WS|Pacific/Apia", "YE|Asia/Riyadh Asia/Aden", "YT|Africa/Nairobi Indian/Mayotte", "ZA|Africa/Johannesburg", "ZM|Africa/Maputo Africa/Lusaka", "ZW|Africa/Maputo Africa/Harare"]
        }), e
    });
var slice = [].slice;
! function (e, t) {
    var n;
    return n = function () {
        function n(t, n) {
            this.options = e.extend({}, this.defaults, n), this.$container = e(t), this.$context = e(this.options.context), this.init()
        }
        return n.prototype.defaults = {
            debug: !1,
            navSelector: "a[rel=next]",
            buffer: 1e3,
            loading: null,
            success: null,
            error: null,
            process: null,
            context: t,
            state: {
                paused: !1,
                loading: !1
            }
        }, n.prototype.init = function () {
            var e, t;
            return t = null, e = function (e) {
                return function () {
                    return e.check()
                }
            }(this), this.$context.scroll(function () {
                return t && (clearTimeout(t), t = null), t = setTimeout(e, 250)
            })
        }, n.prototype._log = function (e) {
            return this.options.debug && "undefined" != typeof console && null !== console ? console.log(e) : void 0
        }, n.prototype.check = function () {
            var e, t, n;
            return t = this.$container.find(this.options.navSelector), 0 === t.size() ? this._log("No more pages to load") : (n = this.$context.scrollTop() + this.$context.height(), e = t.offset().top - n, this.options.state.paused ? this._log("Paused") : this.options.state.loading ? this._log("Waiting...") : e > this.options.buffer ? this._log(e - this.options.buffer + "px remaining...") : this.next())
        }, n.prototype.next = function () {
            if (this.options.state.done) return this._log("Loaded all pages");
            this._loading();
            var t = this.$container.find(this.options.navSelector);
            if (!e.isFunction(this.options.process)) return e.getScript(t.attr("href")).done(function (e) {
                return function () {
                    return e._success()
                }
            }(this)).fail(function (e) {
                return function () {
                    return e._error()
                }
            }(this));
            var n = e.Deferred();
            n.done(e.proxy(this._success, this)).fail(e.proxy(this._error, this)), this.options.process.call(this, t, n)
        }, n.prototype._loading = function () {
            return this.options.state.loading = !0, this._log("Loading next page..."), "function" == typeof this.options.loading ? this.$container.find(this.options.navSelector).each(this.options.loading) : void 0
        }, n.prototype._success = function () {
            return this.options.state.loading = !1, this._log("New page loaded!"), "function" == typeof this.options.success ? this.$container.find(this.options.navSelector).each(this.options.success) : void 0
        }, n.prototype._error = function () {
            return this.options.state.loading = !1, this._log("Error loading new page :("), "function" == typeof this.options.error ? this.$container.find(this.options.navSelector).each(this.options.error) : void 0
        }, n.prototype.pause = function () {
            return this.options.state.paused = !0, this._log("Scroll checks paused")
        }, n.prototype.resume = function () {
            return this.options.state.paused = !1, this._log("Scroll checks resumed"), this.check()
        }, n
    }(), e.fn.extend({
        infinitePages: function () {
            var t, i;
            return i = arguments[0], t = 2 <= arguments.length ? slice.call(arguments, 1) : [], this.each(function () {
                var r, a;
                return r = e(this), a = r.data("infinitepages"), a || r.data("infinitepages", a = new n(this, i)), "string" == typeof i ? a[i].apply(a, t) : void 0
            })
        }
    })
}(window.jQuery, window),
    function (e, t) {
        if ("function" == typeof define && define.amd) define(["moment", "jquery"], function (e, n) {
            return n.fn || (n.fn = {}), t(e, n)
        });
        else if ("object" == typeof module && module.exports) {
            var n = "undefined" != typeof window ? window.jQuery : void 0;
            n || (n = require("jquery"), n.fn || (n.fn = {}));
            var i = "undefined" != typeof window && "undefined" != typeof window.moment ? window.moment : require("moment");
            module.exports = t(i, n)
        } else e.daterangepicker = t(e.moment, e.jQuery)
    }(this, function (e, t) {
        var n = function (n, i, r) {
            if (this.parentEl = "body", this.element = t(n), this.startDate = e().startOf("day"), this.endDate = e().endOf("day"), this.minDate = !1, this.maxDate = !1, this.dateLimit = !1, this.autoApply = !1, this.singleDatePicker = !1, this.showDropdowns = !1, this.showWeekNumbers = !1, this.showISOWeekNumbers = !1, this.showCustomRangeLabel = !0, this.timePicker = !1, this.timePicker24Hour = !1, this.timePickerIncrement = 1, this.timePickerSeconds = !1, this.linkedCalendars = !0, this.autoUpdateInput = !0, this.alwaysShowCalendars = !1, this.ranges = {}, this.opens = "right", this.element.hasClass("pull-right") && (this.opens = "left"), this.drops = "down", this.element.hasClass("dropup") && (this.drops = "up"), this.buttonClasses = "btn btn-sm", this.applyClass = "btn-success", this.cancelClass = "btn-default", this.locale = {
                direction: "ltr",
                format: e.localeData().longDateFormat("L"),
                separator: " - ",
                applyLabel: "Apply",
                cancelLabel: "Cancel",
                weekLabel: "W",
                customRangeLabel: "Custom Range",
                daysOfWeek: e.weekdaysMin(),
                monthNames: e.monthsShort(),
                firstDay: e.localeData().firstDayOfWeek()
            }, this.callback = function () { }, this.isShowing = !1, this.leftCalendar = {}, this.rightCalendar = {}, ("object" != typeof i || null === i) && (i = {}), i = t.extend({}, this.element.data(), i), "string" == typeof i.template || i.template instanceof t || (i.template = '<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'), this.parentEl = t(i.parentEl && t(i.parentEl).length ? i.parentEl : this.parentEl), this.container = t(i.template).appendTo(this.parentEl), "object" == typeof i.locale && ("string" == typeof i.locale.direction && (this.locale.direction = i.locale.direction), "string" == typeof i.locale.format && (this.locale.format = i.locale.format), "string" == typeof i.locale.separator && (this.locale.separator = i.locale.separator), "object" == typeof i.locale.daysOfWeek && (this.locale.daysOfWeek = i.locale.daysOfWeek.slice()), "object" == typeof i.locale.monthNames && (this.locale.monthNames = i.locale.monthNames.slice()), "number" == typeof i.locale.firstDay && (this.locale.firstDay = i.locale.firstDay), "string" == typeof i.locale.applyLabel && (this.locale.applyLabel = i.locale.applyLabel), "string" == typeof i.locale.cancelLabel && (this.locale.cancelLabel = i.locale.cancelLabel), "string" == typeof i.locale.weekLabel && (this.locale.weekLabel = i.locale.weekLabel), "string" == typeof i.locale.customRangeLabel)) {
                var a = document.createElement("textarea");
                a.innerHTML = i.locale.customRangeLabel;
                var o = a.value;
                this.locale.customRangeLabel = o
            }
            if (this.container.addClass(this.locale.direction), "string" == typeof i.startDate && (this.startDate = e(i.startDate, this.locale.format)), "string" == typeof i.endDate && (this.endDate = e(i.endDate, this.locale.format)), "string" == typeof i.minDate && (this.minDate = e(i.minDate, this.locale.format)), "string" == typeof i.maxDate && (this.maxDate = e(i.maxDate, this.locale.format)), "object" == typeof i.startDate && (this.startDate = e(i.startDate)), "object" == typeof i.endDate && (this.endDate = e(i.endDate)), "object" == typeof i.minDate && (this.minDate = e(i.minDate)), "object" == typeof i.maxDate && (this.maxDate = e(i.maxDate)), this.minDate && this.startDate.isBefore(this.minDate) && (this.startDate = this.minDate.clone()), this.maxDate && this.endDate.isAfter(this.maxDate) && (this.endDate = this.maxDate.clone()), "string" == typeof i.applyClass && (this.applyClass = i.applyClass), "string" == typeof i.cancelClass && (this.cancelClass = i.cancelClass), "object" == typeof i.dateLimit && (this.dateLimit = i.dateLimit), "string" == typeof i.opens && (this.opens = i.opens), "string" == typeof i.drops && (this.drops = i.drops), "boolean" == typeof i.showWeekNumbers && (this.showWeekNumbers = i.showWeekNumbers), "boolean" == typeof i.showISOWeekNumbers && (this.showISOWeekNumbers = i.showISOWeekNumbers), "string" == typeof i.buttonClasses && (this.buttonClasses = i.buttonClasses), "object" == typeof i.buttonClasses && (this.buttonClasses = i.buttonClasses.join(" ")), "boolean" == typeof i.showDropdowns && (this.showDropdowns = i.showDropdowns), "boolean" == typeof i.showCustomRangeLabel && (this.showCustomRangeLabel = i.showCustomRangeLabel), "boolean" == typeof i.singleDatePicker && (this.singleDatePicker = i.singleDatePicker, this.singleDatePicker && (this.endDate = this.startDate.clone())),
                "boolean" == typeof i.timePicker && (this.timePicker = i.timePicker), "boolean" == typeof i.timePickerSeconds && (this.timePickerSeconds = i.timePickerSeconds), "number" == typeof i.timePickerIncrement && (this.timePickerIncrement = i.timePickerIncrement), "boolean" == typeof i.timePicker24Hour && (this.timePicker24Hour = i.timePicker24Hour), "boolean" == typeof i.autoApply && (this.autoApply = i.autoApply), "boolean" == typeof i.autoUpdateInput && (this.autoUpdateInput = i.autoUpdateInput), "boolean" == typeof i.linkedCalendars && (this.linkedCalendars = i.linkedCalendars), "function" == typeof i.isInvalidDate && (this.isInvalidDate = i.isInvalidDate), "function" == typeof i.isCustomDate && (this.isCustomDate = i.isCustomDate), "boolean" == typeof i.alwaysShowCalendars && (this.alwaysShowCalendars = i.alwaysShowCalendars), 0 != this.locale.firstDay)
                for (var s = this.locale.firstDay; s > 0;) this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()), s--;
            var l, c, u;
            if ("undefined" == typeof i.startDate && "undefined" == typeof i.endDate && t(this.element).is("input[type=text]")) {
                var d = t(this.element).val(),
                    h = d.split(this.locale.separator);
                l = c = null, 2 == h.length ? (l = e(h[0], this.locale.format), c = e(h[1], this.locale.format)) : this.singleDatePicker && "" !== d && (l = e(d, this.locale.format), c = e(d, this.locale.format)), null !== l && null !== c && (this.setStartDate(l), this.setEndDate(c))
            }
            if ("object" == typeof i.ranges) {
                for (u in i.ranges) {
                    l = "string" == typeof i.ranges[u][0] ? e(i.ranges[u][0], this.locale.format) : e(i.ranges[u][0]), c = "string" == typeof i.ranges[u][1] ? e(i.ranges[u][1], this.locale.format) : e(i.ranges[u][1]), this.minDate && l.isBefore(this.minDate) && (l = this.minDate.clone());
                    var f = this.maxDate;
                    if (this.dateLimit && f && l.clone().add(this.dateLimit).isAfter(f) && (f = l.clone().add(this.dateLimit)), f && c.isAfter(f) && (c = f.clone()), !(this.minDate && c.isBefore(this.minDate, this.timepicker ? "minute" : "day") || f && l.isAfter(f, this.timepicker ? "minute" : "day"))) {
                        var a = document.createElement("textarea");
                        a.innerHTML = u;
                        var o = a.value;
                        this.ranges[o] = [l, c]
                    }
                }
                var p = "<ul>";
                for (u in this.ranges) p += '<li data-range-key="' + u + '">' + u + "</li>";
                this.showCustomRangeLabel && (p += '<li data-range-key="' + this.locale.customRangeLabel + '">' + this.locale.customRangeLabel + "</li>"), p += "</ul>", this.container.find(".ranges").prepend(p)
            }
            "function" == typeof r && (this.callback = r), this.timePicker || (this.startDate = this.startDate.startOf("day"), this.endDate = this.endDate.endOf("day"), this.container.find(".calendar-time").hide()), this.timePicker && this.autoApply && (this.autoApply = !1), this.autoApply && "object" != typeof i.ranges ? this.container.find(".ranges").hide() : this.autoApply && this.container.find(".applyBtn, .cancelBtn").addClass("hide"), this.singleDatePicker && (this.container.addClass("single"), this.container.find(".calendar.left").addClass("single"), this.container.find(".calendar.left").show(), this.container.find(".calendar.right").hide(), this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(), this.timePicker ? this.container.find(".ranges ul").hide() : this.container.find(".ranges").hide()), ("undefined" == typeof i.ranges && !this.singleDatePicker || this.alwaysShowCalendars) && this.container.addClass("show-calendar"), this.container.addClass("opens" + this.opens), "undefined" != typeof i.ranges && "right" == this.opens && this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent()), this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses), this.applyClass.length && this.container.find(".applyBtn").addClass(this.applyClass), this.cancelClass.length && this.container.find(".cancelBtn").addClass(this.cancelClass), this.container.find(".applyBtn").html(this.locale.applyLabel), this.container.find(".cancelBtn").html(this.locale.cancelLabel), this.container.find(".calendar").on("click.daterangepicker", ".prev", t.proxy(this.clickPrev, this)).on("click.daterangepicker", ".next", t.proxy(this.clickNext, this)).on("mousedown.daterangepicker", "td.available", t.proxy(this.clickDate, this)).on("mouseenter.daterangepicker", "td.available", t.proxy(this.hoverDate, this)).on("mouseleave.daterangepicker", "td.available", t.proxy(this.updateFormInputs, this)).on("change.daterangepicker", "select.yearselect", t.proxy(this.monthOrYearChanged, this)).on("change.daterangepicker", "select.monthselect", t.proxy(this.monthOrYearChanged, this)).on("change.daterangepicker", "select.hourselect,select.minuteselect,select.secondselect,select.ampmselect", t.proxy(this.timeChanged, this)).on("click.daterangepicker", ".daterangepicker_input input", t.proxy(this.showCalendars, this)).on("focus.daterangepicker", ".daterangepicker_input input", t.proxy(this.formInputsFocused, this)).on("blur.daterangepicker", ".daterangepicker_input input", t.proxy(this.formInputsBlurred, this)).on("change.daterangepicker", ".daterangepicker_input input", t.proxy(this.formInputsChanged, this)).on("keydown.daterangepicker", ".daterangepicker_input input", t.proxy(this.formInputsKeydown, this)), this.container.find(".ranges").on("click.daterangepicker", "button.applyBtn", t.proxy(this.clickApply, this)).on("click.daterangepicker", "button.cancelBtn", t.proxy(this.clickCancel, this)).on("click.daterangepicker", "li", t.proxy(this.clickRange, this)).on("mouseenter.daterangepicker", "li", t.proxy(this.hoverRange, this)).on("mouseleave.daterangepicker", "li", t.proxy(this.updateFormInputs, this)), this.element.is("input") || this.element.is("button") ? this.element.on({
                "click.daterangepicker": t.proxy(this.show, this),
                "focus.daterangepicker": t.proxy(this.show, this),
                "keyup.daterangepicker": t.proxy(this.elementChanged, this),
                "keydown.daterangepicker": t.proxy(this.keydown, this)
            }) : (this.element.on("click.daterangepicker", t.proxy(this.toggle, this)), this.element.on("keydown.daterangepicker", t.proxy(this.toggle, this))), this.element.is("input") && !this.singleDatePicker && this.autoUpdateInput ? (this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format)), this.element.trigger("change")) : this.element.is("input") && this.autoUpdateInput && (this.element.val(this.startDate.format(this.locale.format)), this.element.trigger("change"))
        };
        return n.prototype = {
            constructor: n,
            setStartDate: function (t) {
                "string" == typeof t && (this.startDate = e(t, this.locale.format)), "object" == typeof t && (this.startDate = e(t)), this.timePicker || (this.startDate = this.startDate.startOf("day")), this.timePicker && this.timePickerIncrement && this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement), this.minDate && this.startDate.isBefore(this.minDate) && (this.startDate = this.minDate.clone(), this.timePicker && this.timePickerIncrement && this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement)), this.maxDate && this.startDate.isAfter(this.maxDate) && (this.startDate = this.maxDate.clone(), this.timePicker && this.timePickerIncrement && this.startDate.minute(Math.floor(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement)), this.isShowing || this.updateElement(), this.updateMonthsInView()
            },
            setEndDate: function (t) {
                "string" == typeof t && (this.endDate = e(t, this.locale.format)), "object" == typeof t && (this.endDate = e(t)), this.timePicker || (this.endDate = this.endDate.add(1, "d").startOf("day").subtract(1, "second")), this.timePicker && this.timePickerIncrement && this.endDate.minute(Math.round(this.endDate.minute() / this.timePickerIncrement) * this.timePickerIncrement), this.endDate.isBefore(this.startDate) && (this.endDate = this.startDate.clone()), this.maxDate && this.endDate.isAfter(this.maxDate) && (this.endDate = this.maxDate.clone()), this.dateLimit && this.startDate.clone().add(this.dateLimit).isBefore(this.endDate) && (this.endDate = this.startDate.clone().add(this.dateLimit)), this.previousRightTime = this.endDate.clone(), this.isShowing || this.updateElement(), this.updateMonthsInView()
            },
            isInvalidDate: function () {
                return !1
            },
            isCustomDate: function () {
                return !1
            },
            updateView: function () {
                this.timePicker && (this.renderTimePicker("left"), this.renderTimePicker("right"), this.endDate ? this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled") : this.container.find(".right .calendar-time select").attr("disabled", "disabled").addClass("disabled")), this.endDate ? (this.container.find('input[name="daterangepicker_end"]').removeClass("active"), this.container.find('input[name="daterangepicker_start"]').addClass("active")) : (this.container.find('input[name="daterangepicker_end"]').addClass("active"), this.container.find('input[name="daterangepicker_start"]').removeClass("active")), this.updateMonthsInView(), this.updateCalendars(), this.updateFormInputs()
            },
            updateMonthsInView: function () {
                if (this.endDate) {
                    if (!this.singleDatePicker && this.leftCalendar.month && this.rightCalendar.month && (this.startDate.format("YYYY-MM") == this.leftCalendar.month.format("YYYY-MM") || this.startDate.format("YYYY-MM") == this.rightCalendar.month.format("YYYY-MM")) && (this.endDate.format("YYYY-MM") == this.leftCalendar.month.format("YYYY-MM") || this.endDate.format("YYYY-MM") == this.rightCalendar.month.format("YYYY-MM"))) return;
                    this.leftCalendar.month = this.startDate.clone().date(2), this.linkedCalendars || this.endDate.month() == this.startDate.month() && this.endDate.year() == this.startDate.year() ? this.rightCalendar.month = this.startDate.clone().date(2).add(1, "month") : this.rightCalendar.month = this.endDate.clone().date(2)
                } else this.leftCalendar.month.format("YYYY-MM") != this.startDate.format("YYYY-MM") && this.rightCalendar.month.format("YYYY-MM") != this.startDate.format("YYYY-MM") && (this.leftCalendar.month = this.startDate.clone().date(2), this.rightCalendar.month = this.startDate.clone().date(2).add(1, "month"));
                this.maxDate && this.linkedCalendars && !this.singleDatePicker && this.rightCalendar.month > this.maxDate && (this.rightCalendar.month = this.maxDate.clone().date(2), this.leftCalendar.month = this.maxDate.clone().date(2).subtract(1, "month"))
            },
            updateCalendars: function () {
                if (this.timePicker) {
                    var e, t, n;
                    if (this.endDate) {
                        if (e = parseInt(this.container.find(".left .hourselect").val(), 10), t = parseInt(this.container.find(".left .minuteselect").val(), 10), n = this.timePickerSeconds ? parseInt(this.container.find(".left .secondselect").val(), 10) : 0, !this.timePicker24Hour) {
                            var i = this.container.find(".left .ampmselect").val();
                            "PM" === i && 12 > e && (e += 12), "AM" === i && 12 === e && (e = 0)
                        }
                    } else if (e = parseInt(this.container.find(".right .hourselect").val(), 10), t = parseInt(this.container.find(".right .minuteselect").val(), 10), n = this.timePickerSeconds ? parseInt(this.container.find(".right .secondselect").val(), 10) : 0, !this.timePicker24Hour) {
                        var i = this.container.find(".right .ampmselect").val();
                        "PM" === i && 12 > e && (e += 12), "AM" === i && 12 === e && (e = 0)
                    }
                    this.leftCalendar.month.hour(e).minute(t).second(n), this.rightCalendar.month.hour(e).minute(t).second(n)
                }
                this.renderCalendar("left"), this.renderCalendar("right"), this.container.find(".ranges li").removeClass("active"), null != this.endDate && this.calculateChosenLabel()
            },
            renderCalendar: function (n) {
                var i = "left" == n ? this.leftCalendar : this.rightCalendar,
                    r = i.month.month(),
                    a = i.month.year(),
                    o = i.month.hour(),
                    s = i.month.minute(),
                    l = i.month.second(),
                    c = e([a, r]).daysInMonth(),
                    u = e([a, r, 1]),
                    d = e([a, r, c]),
                    h = e(u).subtract(1, "month").month(),
                    f = e(u).subtract(1, "month").year(),
                    p = e([f, h]).daysInMonth(),
                    m = u.day(),
                    i = [];
                i.firstDay = u, i.lastDay = d;
                for (var g = 0; 6 > g; g++) i[g] = [];
                var v = p - m + this.locale.firstDay + 1;
                v > p && (v -= 7), m == this.locale.firstDay && (v = p - 6);
                for (var y, b, w = e([f, h, v, 12, s, l]), g = 0, y = 0, b = 0; 42 > g; g++, y++, w = e(w).add(24, "hour")) g > 0 && y % 7 === 0 && (y = 0, b++), i[b][y] = w.clone().hour(o).minute(s).second(l), w.hour(12), this.minDate && i[b][y].format("YYYY-MM-DD") == this.minDate.format("YYYY-MM-DD") && i[b][y].isBefore(this.minDate) && "left" == n && (i[b][y] = this.minDate.clone()), this.maxDate && i[b][y].format("YYYY-MM-DD") == this.maxDate.format("YYYY-MM-DD") && i[b][y].isAfter(this.maxDate) && "right" == n && (i[b][y] = this.maxDate.clone());
                "left" == n ? this.leftCalendar.calendar = i : this.rightCalendar.calendar = i;
                var _ = "left" == n ? this.minDate : this.startDate,
                    x = this.maxDate,
                    k = ("left" == n ? this.startDate : this.endDate, "ltr" == this.locale.direction ? {
                        left: "chevron-left",
                        right: "chevron-right"
                    } : {
                        left: "chevron-right",
                        right: "chevron-left"
                    }),
                    C = '<table class="table-condensed">';
                C += "<thead>", C += "<tr>", (this.showWeekNumbers || this.showISOWeekNumbers) && (C += "<th></th>"), C += _ && !_.isBefore(i.firstDay) || this.linkedCalendars && "left" != n ? "<th></th>" : '<th class="prev available"><i class="fa fa-' + k.left + " glyphicon glyphicon-" + k.left + '"></i></th>';
                var S = this.locale.monthNames[i[1][1].month()] + i[1][1].format(" YYYY");
                if (this.showDropdowns) {
                    for (var A = i[1][1].month(), T = i[1][1].year(), E = x && x.year() || T + 5, D = _ && _.year() || T - 50, $ = T == D, M = T == E, R = '<select class="monthselect">', I = 0; 12 > I; I++) R += (!$ || I >= _.month()) && (!M || I <= x.month()) ? "<option value='" + I + "'" + (I === A ? " selected='selected'" : "") + ">" + this.locale.monthNames[I] + "</option>" : "<option value='" + I + "'" + (I === A ? " selected='selected'" : "") + " disabled='disabled'>" + this.locale.monthNames[I] + "</option>";
                    R += "</select>";
                    for (var P = '<select class="yearselect">', H = D; E >= H; H++) P += '<option value="' + H + '"' + (H === T ? ' selected="selected"' : "") + ">" + H + "</option>";
                    P += "</select>", S = R + P
                }
                if (C += '<th colspan="5" class="month">' + S + "</th>", C += x && !x.isAfter(i.lastDay) || this.linkedCalendars && "right" != n && !this.singleDatePicker ? "<th></th>" : '<th class="next available"><i class="fa fa-' + k.right + " glyphicon glyphicon-" + k.right + '"></i></th>', C += "</tr>", C += "<tr>", (this.showWeekNumbers || this.showISOWeekNumbers) && (C += '<th class="week">' + this.locale.weekLabel + "</th>"), t.each(this.locale.daysOfWeek, function (e, t) {
                    var n = 6 === e || 0 === e;
                    C += "<th" + (n ? ' class="weekend"' : "") + ">" + t + "</th>"
                }), C += "</tr>", C += "</thead>", C += "<tbody>", null == this.endDate && this.dateLimit) {
                    var O = this.startDate.clone().add(this.dateLimit).endOf("day");
                    (!x || O.isBefore(x)) && (x = O)
                }
                for (var b = 0; 6 > b; b++) {
                    C += "<tr>", this.showWeekNumbers ? C += '<td class="week">' + i[b][0].week() + "</td>" : this.showISOWeekNumbers && (C += '<td class="week">' + i[b][0].isoWeek() + "</td>");
                    for (var y = 0; 7 > y; y++) {
                        var j = [];
                        i[b][y].isSame(new Date, "day") && j.push("today"), i[b][y].isoWeekday() > 5 && j.push("weekend"), i[b][y].month() != i[1][1].month() && j.push("off"), this.minDate && i[b][y].isBefore(this.minDate, "day") && j.push("off", "disabled"), x && i[b][y].isAfter(x, "day") && j.push("off", "disabled"), this.isInvalidDate(i[b][y]) && j.push("off", "disabled"), i[b][y].format("YYYY-MM-DD") == this.startDate.format("YYYY-MM-DD") && j.push("active", "start-date"), null != this.endDate && i[b][y].format("YYYY-MM-DD") == this.endDate.format("YYYY-MM-DD") && j.push("active", "end-date"), null != this.endDate && i[b][y] > this.startDate && i[b][y] < this.endDate && j.push("in-range");
                        var N = this.isCustomDate(i[b][y]);
                        N !== !1 && ("string" == typeof N ? j.push(N) : Array.prototype.push.apply(j, N));
                        for (var z = "", L = !1, g = 0; g < j.length; g++) z += j[g] + " ", "disabled" == j[g] && (L = !0);
                        L || (z += "available"), C += '<td class="' + z.replace(/^\s+|\s+$/g, "") + '" data-title="r' + b + "c" + y + '">' + i[b][y].date() + "</td>"
                    }
                    C += "</tr>"
                }
                C += "</tbody>", C += "</table>", this.container.find(".calendar." + n + " .calendar-table").html(C)
            },
            renderTimePicker: function (e) {
                if ("right" != e || this.endDate) {
                    var t, n, i, r = this.maxDate;
                    if (!this.dateLimit || this.maxDate && !this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate) || (r = this.startDate.clone().add(this.dateLimit)), "left" == e) n = this.startDate.clone(), i = this.minDate;
                    else if ("right" == e) {
                        n = this.endDate.clone(), i = this.startDate;
                        var a = this.container.find(".calendar.right .calendar-time div");
                        if ("" != a.html() && (n.hour(a.find(".hourselect option:selected").val() || n.hour()), n.minute(a.find(".minuteselect option:selected").val() || n.minute()), n.second(a.find(".secondselect option:selected").val() || n.second()), !this.timePicker24Hour)) {
                            var o = a.find(".ampmselect option:selected").val();
                            "PM" === o && n.hour() < 12 && n.hour(n.hour() + 12), "AM" === o && 12 === n.hour() && n.hour(0)
                        }
                        n.isBefore(this.startDate) && (n = this.startDate.clone()), r && n.isAfter(r) && (n = r.clone())
                    }
                    t = '<select class="hourselect">';
                    for (var s = this.timePicker24Hour ? 0 : 1, l = this.timePicker24Hour ? 23 : 12, c = s; l >= c; c++) {
                        var u = c;
                        this.timePicker24Hour || (u = n.hour() >= 12 ? 12 == c ? 12 : c + 12 : 12 == c ? 0 : c);
                        var d = n.clone().hour(u),
                            h = !1;
                        i && d.minute(59).isBefore(i) && (h = !0), r && d.minute(0).isAfter(r) && (h = !0), t += u != n.hour() || h ? h ? '<option value="' + c + '" disabled="disabled" class="disabled">' + c + "</option>" : '<option value="' + c + '">' + c + "</option>" : '<option value="' + c + '" selected="selected">' + c + "</option>"
                    }
                    t += "</select> ", t += ': <select class="minuteselect">';
                    for (var c = 0; 60 > c; c += this.timePickerIncrement) {
                        var f = 10 > c ? "0" + c : c,
                            d = n.clone().minute(c),
                            h = !1;
                        i && d.second(59).isBefore(i) && (h = !0), r && d.second(0).isAfter(r) && (h = !0), t += n.minute() != c || h ? h ? '<option value="' + c + '" disabled="disabled" class="disabled">' + f + "</option>" : '<option value="' + c + '">' + f + "</option>" : '<option value="' + c + '" selected="selected">' + f + "</option>"
                    }
                    if (t += "</select> ", this.timePickerSeconds) {
                        t += ': <select class="secondselect">';
                        for (var c = 0; 60 > c; c++) {
                            var f = 10 > c ? "0" + c : c,
                                d = n.clone().second(c),
                                h = !1;
                            i && d.isBefore(i) && (h = !0), r && d.isAfter(r) && (h = !0), t += n.second() != c || h ? h ? '<option value="' + c + '" disabled="disabled" class="disabled">' + f + "</option>" : '<option value="' + c + '">' + f + "</option>" : '<option value="' + c + '" selected="selected">' + f + "</option>"
                        }
                        t += "</select> "
                    }
                    if (!this.timePicker24Hour) {
                        t += '<select class="ampmselect">';
                        var p = "",
                            m = "";
                        i && n.clone().hour(12).minute(0).second(0).isBefore(i) && (p = ' disabled="disabled" class="disabled"'), r && n.clone().hour(0).minute(0).second(0).isAfter(r) && (m = ' disabled="disabled" class="disabled"'), t += n.hour() >= 12 ? '<option value="AM"' + p + '>AM</option><option value="PM" selected="selected"' + m + ">PM</option>" : '<option value="AM" selected="selected"' + p + '>AM</option><option value="PM"' + m + ">PM</option>", t += "</select>"
                    }
                    this.container.find(".calendar." + e + " .calendar-time div").html(t)
                }
            },
            updateFormInputs: function () {
                this.container.find("input[name=daterangepicker_start]").is(":focus") || this.container.find("input[name=daterangepicker_end]").is(":focus") || (this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)), this.endDate && this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)), this.singleDatePicker || this.endDate && (this.startDate.isBefore(this.endDate) || this.startDate.isSame(this.endDate)) ? this.container.find("button.applyBtn").removeAttr("disabled") : this.container.find("button.applyBtn").attr("disabled", "disabled"))
            },
            move: function () {
                var e, n = {
                    top: 0,
                    left: 0
                },
                    i = t(window).width();
                this.parentEl.is("body") || (n = {
                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),
                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()
                }, i = this.parentEl[0].clientWidth + this.parentEl.offset().left), e = "up" == this.drops ? this.element.offset().top - this.container.outerHeight() - n.top : this.element.offset().top + this.element.outerHeight() - n.top, this.container["up" == this.drops ? "addClass" : "removeClass"]("dropup"), "left" == this.opens ? (this.container.css({
                    top: e,
                    right: i - this.element.offset().left - this.element.outerWidth(),
                    left: "auto"
                }), this.container.offset().left < 0 && this.container.css({
                    right: "auto",
                    left: 9
                })) : "center" == this.opens ? (this.container.css({
                    top: e,
                    left: this.element.offset().left - n.left + this.element.outerWidth() / 2 - this.container.outerWidth() / 2,
                    right: "auto"
                }), this.container.offset().left < 0 && this.container.css({
                    right: "auto",
                    left: 9
                })) : (this.container.css({
                    top: e,
                    left: this.element.offset().left - n.left,
                    right: "auto"
                }), this.container.offset().left + this.container.outerWidth() > t(window).width() && this.container.css({
                    left: "auto",
                    right: 0
                }))
            },
            show: function (e) {
                this.isShowing || (this._outsideClickProxy = t.proxy(function (e) {
                    this.outsideClick(e)
                }, this), t(document).on("mousedown.daterangepicker", this._outsideClickProxy).on("touchend.daterangepicker", this._outsideClickProxy).on("click.daterangepicker", "[data-toggle=dropdown]", this._outsideClickProxy).on("focusin.daterangepicker", this._outsideClickProxy), t(window).on("resize.daterangepicker", t.proxy(function (e) {
                    this.move(e)
                }, this)), this.oldStartDate = this.startDate.clone(), this.oldEndDate = this.endDate.clone(), this.previousRightTime = this.endDate.clone(), this.updateView(), this.container.show(), this.move(), this.element.trigger("show.daterangepicker", this), this.isShowing = !0)
            },
            hide: function (e) {
                this.isShowing && (this.endDate || (this.startDate = this.oldStartDate.clone(), this.endDate = this.oldEndDate.clone()), this.startDate.isSame(this.oldStartDate) && this.endDate.isSame(this.oldEndDate) || this.callback(this.startDate.clone(), this.endDate.clone(), this.chosenLabel), this.updateElement(), t(document).off(".daterangepicker"), t(window).off(".daterangepicker"), this.container.hide(), this.element.trigger("hide.daterangepicker", this), this.isShowing = !1)
            },
            toggle: function (e) {
                this.isShowing ? this.hide() : this.show()
            },
            outsideClick: function (e) {
                var n = t(e.target);
                "focusin" == e.type || n.closest(this.element).length || n.closest(this.container).length || n.closest(".calendar-table").length || (this.hide(), this.element.trigger("outsideClick.daterangepicker", this))
            },
            showCalendars: function () {
                this.container.addClass("show-calendar"), this.move(), this.element.trigger("showCalendar.daterangepicker", this)
            },
            hideCalendars: function () {
                this.container.removeClass("show-calendar"), this.element.trigger("hideCalendar.daterangepicker", this)
            },
            hoverRange: function (e) {
                if (!this.container.find("input[name=daterangepicker_start]").is(":focus") && !this.container.find("input[name=daterangepicker_end]").is(":focus")) {
                    var t = e.target.getAttribute("data-range-key");
                    if (t == this.locale.customRangeLabel) this.updateView();
                    else {
                        var n = this.ranges[t];
                        this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.locale.format)), this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.locale.format))
                    }
                }
            },
            clickRange: function (e) {
                var t = e.target.getAttribute("data-range-key");
                if (this.chosenLabel = t, t == this.locale.customRangeLabel) this.showCalendars();
                else {
                    var n = this.ranges[t];
                    this.startDate = n[0], this.endDate = n[1], this.timePicker || (this.startDate.startOf("day"), this.endDate.endOf("day")), this.alwaysShowCalendars || this.hideCalendars(), this.clickApply()
                }
            },
            clickPrev: function (e) {
                var n = t(e.target).parents(".calendar");
                n.hasClass("left") ? (this.leftCalendar.month.subtract(1, "month"), this.linkedCalendars && this.rightCalendar.month.subtract(1, "month")) : this.rightCalendar.month.subtract(1, "month"), this.updateCalendars()
            },
            clickNext: function (e) {
                var n = t(e.target).parents(".calendar");
                n.hasClass("left") ? this.leftCalendar.month.add(1, "month") : (this.rightCalendar.month.add(1, "month"), this.linkedCalendars && this.leftCalendar.month.add(1, "month")), this.updateCalendars()
            },
            hoverDate: function (e) {
                if (t(e.target).hasClass("available")) {
                    var n = t(e.target).attr("data-title"),
                        i = n.substr(1, 1),
                        r = n.substr(3, 1),
                        a = t(e.target).parents(".calendar"),
                        o = a.hasClass("left") ? this.leftCalendar.calendar[i][r] : this.rightCalendar.calendar[i][r];
                    this.endDate && !this.container.find("input[name=daterangepicker_start]").is(":focus") ? this.container.find("input[name=daterangepicker_start]").val(o.format(this.locale.format)) : this.endDate || this.container.find("input[name=daterangepicker_end]").is(":focus") || this.container.find("input[name=daterangepicker_end]").val(o.format(this.locale.format));
                    var s = this.leftCalendar,
                        l = this.rightCalendar,
                        c = this.startDate;
                    this.endDate || this.container.find(".calendar tbody td").each(function (e, n) {
                        if (!t(n).hasClass("week")) {
                            var i = t(n).attr("data-title"),
                                r = i.substr(1, 1),
                                a = i.substr(3, 1),
                                u = t(n).parents(".calendar"),
                                d = u.hasClass("left") ? s.calendar[r][a] : l.calendar[r][a];
                            d.isAfter(c) && d.isBefore(o) || d.isSame(o, "day") ? t(n).addClass("in-range") : t(n).removeClass("in-range")
                        }
                    })
                }
            },
            clickDate: function (e) {
                if (t(e.target).hasClass("available")) {
                    var n = t(e.target).attr("data-title"),
                        i = n.substr(1, 1),
                        r = n.substr(3, 1),
                        a = t(e.target).parents(".calendar"),
                        o = a.hasClass("left") ? this.leftCalendar.calendar[i][r] : this.rightCalendar.calendar[i][r];
                    if (this.endDate || o.isBefore(this.startDate, "day")) {
                        if (this.timePicker) {
                            var s = parseInt(this.container.find(".left .hourselect").val(), 10);
                            if (!this.timePicker24Hour) {
                                var l = this.container.find(".left .ampmselect").val();
                                "PM" === l && 12 > s && (s += 12), "AM" === l && 12 === s && (s = 0)
                            }
                            var c = parseInt(this.container.find(".left .minuteselect").val(), 10),
                                u = this.timePickerSeconds ? parseInt(this.container.find(".left .secondselect").val(), 10) : 0;
                            o = o.clone().hour(s).minute(c).second(u)
                        }
                        this.endDate = null, this.setStartDate(o.clone())
                    } else if (!this.endDate && o.isBefore(this.startDate)) this.setEndDate(this.startDate.clone());
                    else {
                        if (this.timePicker) {
                            var s = parseInt(this.container.find(".right .hourselect").val(), 10);
                            if (!this.timePicker24Hour) {
                                var l = this.container.find(".right .ampmselect").val();
                                "PM" === l && 12 > s && (s += 12), "AM" === l && 12 === s && (s = 0)
                            }
                            var c = parseInt(this.container.find(".right .minuteselect").val(), 10),
                                u = this.timePickerSeconds ? parseInt(this.container.find(".right .secondselect").val(), 10) : 0;
                            o = o.clone().hour(s).minute(c).second(u)
                        }
                        this.setEndDate(o.clone()), this.autoApply && (this.calculateChosenLabel(), this.clickApply())
                    }
                    this.singleDatePicker && (this.setEndDate(this.startDate), this.timePicker || this.clickApply()), this.updateView(), e.stopPropagation()
                }
            },
            calculateChosenLabel: function () {
                var e = !0,
                    t = 0;
                for (var n in this.ranges) {
                    if (this.timePicker) {
                        var i = this.timePickerSeconds ? "YYYY-MM-DD hh:mm:ss" : "YYYY-MM-DD hh:mm";
                        if (this.startDate.format(i) == this.ranges[n][0].format(i) && this.endDate.format(i) == this.ranges[n][1].format(i)) {
                            e = !1, this.chosenLabel = this.container.find(".ranges li:eq(" + t + ")").addClass("active").html();
                            break
                        }
                    } else if (this.startDate.format("YYYY-MM-DD") == this.ranges[n][0].format("YYYY-MM-DD") && this.endDate.format("YYYY-MM-DD") == this.ranges[n][1].format("YYYY-MM-DD")) {
                        e = !1, this.chosenLabel = this.container.find(".ranges li:eq(" + t + ")").addClass("active").html();
                        break
                    }
                    t++
                }
                e && (this.showCustomRangeLabel ? this.chosenLabel = this.container.find(".ranges li:last").addClass("active").html() : this.chosenLabel = null, this.showCalendars())
            },
            clickApply: function (e) {
                this.hide(), this.element.trigger("apply.daterangepicker", this)
            },
            clickCancel: function (e) {
                this.startDate = this.oldStartDate, this.endDate = this.oldEndDate, this.hide(), this.element.trigger("cancel.daterangepicker", this)
            },
            monthOrYearChanged: function (e) {
                var n = t(e.target).closest(".calendar").hasClass("left"),
                    i = n ? "left" : "right",
                    r = this.container.find(".calendar." + i),
                    a = parseInt(r.find(".monthselect").val(), 10),
                    o = r.find(".yearselect").val();
                n || (o < this.startDate.year() || o == this.startDate.year() && a < this.startDate.month()) && (a = this.startDate.month(), o = this.startDate.year()), this.minDate && (o < this.minDate.year() || o == this.minDate.year() && a < this.minDate.month()) && (a = this.minDate.month(), o = this.minDate.year()), this.maxDate && (o > this.maxDate.year() || o == this.maxDate.year() && a > this.maxDate.month()) && (a = this.maxDate.month(), o = this.maxDate.year()), n ? (this.leftCalendar.month.month(a).year(o), this.linkedCalendars && (this.rightCalendar.month = this.leftCalendar.month.clone().add(1, "month"))) : (this.rightCalendar.month.month(a).year(o), this.linkedCalendars && (this.leftCalendar.month = this.rightCalendar.month.clone().subtract(1, "month"))), this.updateCalendars()
            },
            timeChanged: function (e) {
                var n = t(e.target).closest(".calendar"),
                    i = n.hasClass("left"),
                    r = parseInt(n.find(".hourselect").val(), 10),
                    a = parseInt(n.find(".minuteselect").val(), 10),
                    o = this.timePickerSeconds ? parseInt(n.find(".secondselect").val(), 10) : 0;
                if (!this.timePicker24Hour) {
                    var s = n.find(".ampmselect").val();
                    "PM" === s && 12 > r && (r += 12), "AM" === s && 12 === r && (r = 0)
                }
                if (i) {
                    var l = this.startDate.clone();
                    l.hour(r), l.minute(a), l.second(o), this.setStartDate(l), this.singleDatePicker ? this.endDate = this.startDate.clone() : this.endDate && this.endDate.format("YYYY-MM-DD") == l.format("YYYY-MM-DD") && this.endDate.isBefore(l) && this.setEndDate(l.clone())
                } else if (this.endDate) {
                    var c = this.endDate.clone();
                    c.hour(r), c.minute(a), c.second(o), this.setEndDate(c)
                }
                this.updateCalendars(), this.updateFormInputs(), this.renderTimePicker("left"), this.renderTimePicker("right")
            },
            formInputsChanged: function (n) {
                var i = t(n.target).closest(".calendar").hasClass("right"),
                    r = e(this.container.find('input[name="daterangepicker_start"]').val(), this.locale.format),
                    a = e(this.container.find('input[name="daterangepicker_end"]').val(), this.locale.format);
                r.isValid() && a.isValid() && (i && a.isBefore(r) && (r = a.clone()), this.setStartDate(r), this.setEndDate(a), i ? this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)) : this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))), this.updateView()
            },
            formInputsFocused: function (e) {
                this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active"), t(e.target).addClass("active");
                var n = t(e.target).closest(".calendar").hasClass("right");
                n && (this.endDate = null, this.setStartDate(this.startDate.clone()), this.updateView())
            },
            formInputsBlurred: function (t) {
                if (!this.endDate) {
                    var n = this.container.find('input[name="daterangepicker_end"]').val(),
                        i = e(n, this.locale.format);
                    i.isValid() && (this.setEndDate(i), this.updateView())
                }
            },
            formInputsKeydown: function (e) {
                13 === e.keyCode && (e.preventDefault(), this.formInputsChanged(e))
            },
            elementChanged: function () {
                if (this.element.is("input") && this.element.val().length) {
                    var t = this.element.val().split(this.locale.separator),
                        n = null,
                        i = null;
                    2 === t.length && (n = e(t[0], this.locale.format), i = e(t[1], this.locale.format)), (this.singleDatePicker || null === n || null === i) && (n = e(this.element.val(), this.locale.format), i = n), n.isValid() && i.isValid() && (this.setStartDate(n), this.setEndDate(i), this.updateView())
                }
            },
            keydown: function (e) {
                (9 === e.keyCode || 13 === e.keyCode) && this.hide(), 27 === e.keyCode && (e.preventDefault(), e.stopPropagation(), this.hide())
            },
            updateElement: function () {
                this.element.is("input") && !this.singleDatePicker && this.autoUpdateInput ? (this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format)), this.element.trigger("change")) : this.element.is("input") && this.autoUpdateInput && (this.element.val(this.startDate.format(this.locale.format)), this.element.trigger("change"))
            },
            remove: function () {
                this.container.remove(), this.element.off(".daterangepicker"), this.element.removeData()
            }
        }, t.fn.daterangepicker = function (e, i) {
            var r = t.extend(!0, {}, t.fn.daterangepicker.defaultOptions, e);
            return this.each(function () {
                var e = t(this);
                e.data("daterangepicker") && e.data("daterangepicker").remove(), e.data("daterangepicker", new n(e, r, i))
            }), this
        }, n
    }),
    function (e, t) {
        "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.ClipboardJS = t() : e.ClipboardJS = t()
    }(this, function () {
        return function (e) {
            function t(i) {
                if (n[i]) return n[i].exports;
                var r = n[i] = {
                    i: i,
                    l: !1,
                    exports: {}
                };
                return e[i].call(r.exports, r, r.exports, t), r.l = !0, r.exports
            }
            var n = {};
            return t.m = e, t.c = n, t.i = function (e) {
                return e
            }, t.d = function (e, n, i) {
                t.o(e, n) || Object.defineProperty(e, n, {
                    configurable: !1,
                    enumerable: !0,
                    get: i
                })
            }, t.n = function (e) {
                var n = e && e.__esModule ? function () {
                    return e["default"]
                } : function () {
                    return e
                };
                return t.d(n, "a", n), n
            }, t.o = function (e, t) {
                return Object.prototype.hasOwnProperty.call(e, t)
            }, t.p = "", t(t.s = 3)
        }([function (e, t, n) {
            var i, r, a;
            ! function (o, s) {
                r = [e, n(7)], i = s, a = "function" == typeof i ? i.apply(t, r) : i, !(void 0 !== a && (e.exports = a))
            }(this, function (e, t) {
                "use strict";

                function n(e) {
                    return e && e.__esModule ? e : {
                        "default": e
                    }
                }

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                var r = n(t),
                    a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    } : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    },
                    o = function () {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function (t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    s = function () {
                        function e(t) {
                            i(this, e), this.resolveOptions(t), this.initSelection()
                        }
                        return o(e, [{
                            key: "resolveOptions",
                            value: function () {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                                this.action = e.action, this.container = e.container, this.emitter = e.emitter, this.target = e.target, this.text = e.text, this.trigger = e.trigger, this.selectedText = ""
                            }
                        }, {
                            key: "initSelection",
                            value: function () {
                                this.text ? this.selectFake() : this.target && this.selectTarget()
                            }
                        }, {
                            key: "selectFake",
                            value: function () {
                                var e = this,
                                    t = "rtl" == document.documentElement.getAttribute("dir");
                                this.removeFake(), this.fakeHandlerCallback = function () {
                                    return e.removeFake()
                                }, this.fakeHandler = this.container.addEventListener("click", this.fakeHandlerCallback) || !0, this.fakeElem = document.createElement("textarea"), this.fakeElem.style.fontSize = "12pt", this.fakeElem.style.border = "0", this.fakeElem.style.padding = "0", this.fakeElem.style.margin = "0", this.fakeElem.style.position = "absolute", this.fakeElem.style[t ? "right" : "left"] = "-9999px";
                                var n = window.pageYOffset || document.documentElement.scrollTop;
                                this.fakeElem.style.top = n + "px", this.fakeElem.setAttribute("readonly", ""), this.fakeElem.value = this.text,
                                    this.container.appendChild(this.fakeElem), this.selectedText = r["default"](this.fakeElem), this.copyText()
                            }
                        }, {
                            key: "removeFake",
                            value: function () {
                                this.fakeHandler && (this.container.removeEventListener("click", this.fakeHandlerCallback), this.fakeHandler = null, this.fakeHandlerCallback = null), this.fakeElem && (this.container.removeChild(this.fakeElem), this.fakeElem = null)
                            }
                        }, {
                            key: "selectTarget",
                            value: function () {
                                this.selectedText = r["default"](this.target), this.copyText()
                            }
                        }, {
                            key: "copyText",
                            value: function () {
                                var e = void 0;
                                try {
                                    e = document.execCommand(this.action)
                                } catch (t) {
                                    e = !1
                                }
                                this.handleResult(e)
                            }
                        }, {
                            key: "handleResult",
                            value: function (e) {
                                this.emitter.emit(e ? "success" : "error", {
                                    action: this.action,
                                    text: this.selectedText,
                                    trigger: this.trigger,
                                    clearSelection: this.clearSelection.bind(this)
                                })
                            }
                        }, {
                            key: "clearSelection",
                            value: function () {
                                this.trigger && this.trigger.focus(), window.getSelection().removeAllRanges()
                            }
                        }, {
                            key: "destroy",
                            value: function () {
                                this.removeFake()
                            }
                        }, {
                            key: "action",
                            set: function () {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "copy";
                                if (this._action = e, "copy" !== this._action && "cut" !== this._action) throw new Error('Invalid "action" value, use either "copy" or "cut"')
                            },
                            get: function () {
                                return this._action
                            }
                        }, {
                            key: "target",
                            set: function (e) {
                                if (void 0 !== e) {
                                    if (!e || "object" !== ("undefined" == typeof e ? "undefined" : a(e)) || 1 !== e.nodeType) throw new Error('Invalid "target" value, use a valid Element');
                                    if ("copy" === this.action && e.hasAttribute("disabled")) throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');
                                    if ("cut" === this.action && (e.hasAttribute("readonly") || e.hasAttribute("disabled"))) throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
                                    this._target = e
                                }
                            },
                            get: function () {
                                return this._target
                            }
                        }]), e
                    }();
                e.exports = s
            })
        }, function (e, t, n) {
            function i(e, t, n) {
                if (!e && !t && !n) throw new Error("Missing required arguments");
                if (!s.string(t)) throw new TypeError("Second argument must be a String");
                if (!s.fn(n)) throw new TypeError("Third argument must be a Function");
                if (s.node(e)) return r(e, t, n);
                if (s.nodeList(e)) return a(e, t, n);
                if (s.string(e)) return o(e, t, n);
                throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")
            }

            function r(e, t, n) {
                return e.addEventListener(t, n), {
                    destroy: function () {
                        e.removeEventListener(t, n)
                    }
                }
            }

            function a(e, t, n) {
                return Array.prototype.forEach.call(e, function (e) {
                    e.addEventListener(t, n)
                }), {
                    destroy: function () {
                        Array.prototype.forEach.call(e, function (e) {
                            e.removeEventListener(t, n)
                        })
                    }
                }
            }

            function o(e, t, n) {
                return l(document.body, e, t, n)
            }
            var s = n(6),
                l = n(5);
            e.exports = i
        }, function (e, t) {
            function n() { }
            n.prototype = {
                on: function (e, t, n) {
                    var i = this.e || (this.e = {});
                    return (i[e] || (i[e] = [])).push({
                        fn: t,
                        ctx: n
                    }), this
                },
                once: function (e, t, n) {
                    function i() {
                        r.off(e, i), t.apply(n, arguments)
                    }
                    var r = this;
                    return i._ = t, this.on(e, i, n)
                },
                emit: function (e) {
                    var t = [].slice.call(arguments, 1),
                        n = ((this.e || (this.e = {}))[e] || []).slice(),
                        i = 0,
                        r = n.length;
                    for (i; r > i; i++) n[i].fn.apply(n[i].ctx, t);
                    return this
                },
                off: function (e, t) {
                    var n = this.e || (this.e = {}),
                        i = n[e],
                        r = [];
                    if (i && t)
                        for (var a = 0, o = i.length; o > a; a++) i[a].fn !== t && i[a].fn._ !== t && r.push(i[a]);
                    return r.length ? n[e] = r : delete n[e], this
                }
            }, e.exports = n
        }, function (e, t, n) {
            var i, r, a;
            ! function (o, s) {
                r = [e, n(0), n(2), n(1)], i = s, a = "function" == typeof i ? i.apply(t, r) : i, !(void 0 !== a && (e.exports = a))
            }(this, function (e, t, n, i) {
                "use strict";

                function r(e) {
                    return e && e.__esModule ? e : {
                        "default": e
                    }
                }

                function a(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function o(e, t) {
                    if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }

                function s(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                }

                function l(e, t) {
                    var n = "data-clipboard-" + e;
                    if (t.hasAttribute(n)) return t.getAttribute(n)
                }
                var c = r(t),
                    u = r(n),
                    d = r(i),
                    h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
                        return typeof e
                    } : function (e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    },
                    f = function () {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function (t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    p = function (e) {
                        function t(e, n) {
                            a(this, t);
                            var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                            return i.resolveOptions(n), i.listenClick(e), i
                        }
                        return s(t, e), f(t, [{
                            key: "resolveOptions",
                            value: function () {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                                this.action = "function" == typeof e.action ? e.action : this.defaultAction, this.target = "function" == typeof e.target ? e.target : this.defaultTarget, this.text = "function" == typeof e.text ? e.text : this.defaultText, this.container = "object" === h(e.container) ? e.container : document.body
                            }
                        }, {
                            key: "listenClick",
                            value: function (e) {
                                var t = this;
                                this.listener = d["default"](e, "click", function (e) {
                                    return t.onClick(e)
                                })
                            }
                        }, {
                            key: "onClick",
                            value: function (e) {
                                var t = e.delegateTarget || e.currentTarget;
                                this.clipboardAction && (this.clipboardAction = null), this.clipboardAction = new c["default"]({
                                    action: this.action(t),
                                    target: this.target(t),
                                    text: this.text(t),
                                    container: this.container,
                                    trigger: t,
                                    emitter: this
                                })
                            }
                        }, {
                            key: "defaultAction",
                            value: function (e) {
                                return l("action", e)
                            }
                        }, {
                            key: "defaultTarget",
                            value: function (e) {
                                var t = l("target", e);
                                return t ? document.querySelector(t) : void 0
                            }
                        }, {
                            key: "defaultText",
                            value: function (e) {
                                return l("text", e)
                            }
                        }, {
                            key: "destroy",
                            value: function () {
                                this.listener.destroy(), this.clipboardAction && (this.clipboardAction.destroy(), this.clipboardAction = null)
                            }
                        }], [{
                            key: "isSupported",
                            value: function () {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ["copy", "cut"],
                                    t = "string" == typeof e ? [e] : e,
                                    n = !!document.queryCommandSupported;
                                return t.forEach(function (e) {
                                    n = n && !!document.queryCommandSupported(e)
                                }), n
                            }
                        }]), t
                    }(u["default"]);
                e.exports = p
            })
        }, function (e, t) {
            function n(e, t) {
                for (; e && e.nodeType !== i;) {
                    if ("function" == typeof e.matches && e.matches(t)) return e;
                    e = e.parentNode
                }
            }
            var i = 9;
            if ("undefined" != typeof Element && !Element.prototype.matches) {
                var r = Element.prototype;
                r.matches = r.matchesSelector || r.mozMatchesSelector || r.msMatchesSelector || r.oMatchesSelector || r.webkitMatchesSelector
            }
            e.exports = n
        }, function (e, t, n) {
            function i(e, t, n, i, r) {
                var o = a.apply(this, arguments);
                return e.addEventListener(n, o, r), {
                    destroy: function () {
                        e.removeEventListener(n, o, r)
                    }
                }
            }

            function r(e, t, n, r, a) {
                return "function" == typeof e.addEventListener ? i.apply(null, arguments) : "function" == typeof n ? i.bind(null, document).apply(null, arguments) : ("string" == typeof e && (e = document.querySelectorAll(e)), Array.prototype.map.call(e, function (e) {
                    return i(e, t, n, r, a)
                }))
            }

            function a(e, t, n, i) {
                return function (n) {
                    n.delegateTarget = o(n.target, t), n.delegateTarget && i.call(e, n)
                }
            }
            var o = n(4);
            e.exports = r
        }, function (e, t) {
            t.node = function (e) {
                return void 0 !== e && e instanceof HTMLElement && 1 === e.nodeType
            }, t.nodeList = function (e) {
                var n = Object.prototype.toString.call(e);
                return void 0 !== e && ("[object NodeList]" === n || "[object HTMLCollection]" === n) && "length" in e && (0 === e.length || t.node(e[0]))
            }, t.string = function (e) {
                return "string" == typeof e || e instanceof String
            }, t.fn = function (e) {
                var t = Object.prototype.toString.call(e);
                return "[object Function]" === t
            }
        }, function (e, t) {
            function n(e) {
                var t;
                if ("SELECT" === e.nodeName) e.focus(), t = e.value;
                else if ("INPUT" === e.nodeName || "TEXTAREA" === e.nodeName) {
                    var n = e.hasAttribute("readonly");
                    n || e.setAttribute("readonly", ""), e.select(), e.setSelectionRange(0, e.value.length), n || e.removeAttribute("readonly"), t = e.value
                } else {
                    e.hasAttribute("contenteditable") && e.focus();
                    var i = window.getSelection(),
                        r = document.createRange();
                    r.selectNodeContents(e), i.removeAllRanges(), i.addRange(r), t = i.toString()
                }
                return t
            }
            e.exports = n
        }])
    }), $.fn.clipboard = function () {
        function e(e) {
            setTimeout(function () {
                e.tooltip("hide")
            }, 800)
        }

        function t(e) {
            var t = "",
                n = "cut" === e ? "X" : "C";
            return t = /iPhone|iPad/i.test(navigator.userAgent) ? "No support :(" : /Mac/i.test(navigator.userAgent) ? "Press \u2318-" + n + " to " + e : "Press Ctrl-" + n + " to " + e
        }
        return this.each(function () {
            var n = $(this),
                i = n.tooltip({
                    placement: "auto bottom",
                    trigger: "manual",
                    container: "body"
                }),
                r = new ClipboardJS(n[0]);
            return r.on("success", function (t) {
                i.attr("title", "Copied!").tooltip("fixTitle").tooltip("show"), e(i)
            }), r.on("error", function (n) {
                var r = t(n.action);
                i.attr("title", r).tooltip("fixTitle").tooltip("show"), e(i)
            }), n
        })
    },
    function () {
        function e(e, t) {
            var n = 0 === Number(t) ? 1 : 0;
            e.find(":checkbox").prop("checked", n)
        }

        function t(e, t) {
            e.find(":radio").prop("checked", !1), e.find(".active").removeClass("active"), e.find(":radio[value=" + t + "]").prop("checked", !0), e.find(":radio[value=" + t + "]").closest(".btn").toggleClass("active")
        }

        function n(e, t) {
            e.find("select").val(t).trigger("change.select2")
        }

        function i(e, t) {
            window.dispatchEvent(new CustomEvent("app.settings_updated", {
                detail: {
                    name: e,
                    value: t
                }
            }))
        }

        function r(e, t) {
            var n = e.find("input"),
                i = e.parents(".editable-select-wrapper"),
                r = i.hasClass("global"),
                a = i.find(".has-error");
            if (t) a.removeClass("hidden"), n.trigger("input");
            else if (a.find(".help-block").html("&nbsp;"), r) {
                var o = i.find(".apply_to_all");
                o.removeAttr("disabled")
            }
        }

        function a(e, t) {
            return "Custom" === e.text() ? (t.removeClass("hidden"), t.addClass("d-flex"), r(t, !0), "show") : (t.removeClass("d-flex"), t.addClass("hidden"), r(t, !1), "hide")
        }

        function o(e, t, n) {
            return $.ajax(e, {
                type: "POST",
                dataType: "json",
                data: {
                    setting: t,
                    value: n
                }
            })
        }
        window.Settings = {
            initMain: function () {
                var r = $(".settings_panel");
                r.on("change", ".global_setting_bool", function () {
                    var t = $(this),
                        n = t.closest(".setting_wrapper"),
                        a = t.data("settingConfig"),
                        o = t.find(":checked").length ? 1 : 0;
                    confirm("This changes the setting for all current and future members. Proceed?") ? $.ajax(a.url, {
                        type: "POST",
                        dataType: "json",
                        data: {
                            _method: "post",
                            setting: a.name,
                            value: o
                        }
                    }).done(function (s) {
                        s.success ? (n.find(".setting_bool").each(function () {
                            var e = $(this);
                            e.data("skip-request", !0), e.find(":checkbox").prop("checked", o).data("skip-request", !1), e.data("skip-request", !1)
                        }), i(a.name, o), s.reload && r.data("allow-reload") && window.location.reload()) : (e(t, o), alert(s.error))
                    }).fail(function (n) {
                        ajaxFailAlert(n), e(t, o)
                    }) : e(t, o)
                }).on("change", ".setting_bool", function () {
                    var t = $(this);
                    if (!t.data("skip-request")) {
                        var n = t.data("settingConfig"),
                            r = t.find(":checked").length ? 1 : 0;
                        $.ajax(n.url, {
                            type: "POST",
                            dataType: "json",
                            data: {
                                _method: "post",
                                setting: n.name,
                                value: r
                            }
                        }).done(function (a) {
                            a.success ? i(n.name, r) : (e(t, r), alert(a.error))
                        }).fail(function (n) {
                            ajaxFailAlert(n), e(t, r)
                        })
                    }
                }), r.on("change", ".global_setting_enum :radio", function () {
                    var e = $(this),
                        n = e.closest(".setting_wrapper"),
                        r = e.closest(".global_setting_enum"),
                        a = r.data("settingConfig"),
                        o = e.prop("checked") ? e.val() : "";
                    "" !== o && (confirm("This changes the setting for all current and future members. Proceed?") ? $.ajax(a.url, {
                        type: "POST",
                        dataType: "json",
                        data: {
                            _method: "post",
                            setting: a.name,
                            value: o
                        }
                    }).done(function (e) {
                        if (e.success) r.data("settingValue", o), n.find(".setting_enum").each(function () {
                            var e = $(this);
                            e.data("settingValue", o), e.data("skip-request", !0), e.find(":radio[value=" + o + "]").closest("label").button("toggle"), e.data("skip-request", !1)
                        }), i(a.name, o);
                        else {
                            var s = e.value || r.data("settingValue");
                            t(r, s), alert(e.error)
                        }
                    }).fail(function (e) {
                        ajaxFailAlert(e), t(r, r.data("settingValue"))
                    }) : t(r, r.data("settingValue")))
                }).on("change", ".setting_enum :radio", function () {
                    var e = $(this),
                        n = e.closest(".setting_enum");
                    if (!n.data("skip-request")) {
                        var r = n.data("settingConfig"),
                            a = e.prop("checked") ? e.val() : "";
                        "" !== a && $.ajax(r.url, {
                            type: "POST",
                            dataType: "json",
                            data: {
                                _method: "post",
                                setting: r.name,
                                value: a
                            }
                        }).done(function (e) {
                            if (e.success) e.message && alert(e.message), n.data("settingValue", a), i(r.name, a);
                            else {
                                var o = e.value || n.data("settingValue");
                                t(n, o), alert(e.error)
                            }
                        }).fail(function (e) {
                            ajaxFailAlert(e), t(n, n.data("settingValue"))
                        })
                    }
                }), r.on("change", ".global.setting_select select", function (e) {
                    var t = $(this),
                        r = t.closest(".setting_wrapper"),
                        o = t.closest(".global_setting_select"),
                        s = o.data("settingConfig"),
                        l = t.val(),
                        c = t.find("option:selected"),
                        u = c.closest(".editable-select").find(".custom-field"),
                        d = !!c.closest(".editable-select").find(".apply_to_all");
                    return d ? void a(c, u) : void ("" !== l && (confirm("This changes the setting for all current and future members. Proceed?") ? $.ajax(s.url, {
                        type: "POST",
                        dataType: "json",
                        data: {
                            _method: "post",
                            setting: s.name,
                            value: l
                        }
                    }).done(function (e) {
                        if (e.success) o.data("settingValue", l), r.find(".setting_select select").each(function () {
                            var e = $(this);
                            e.data("settingValue", l), e.val(l).trigger("change.select2")
                        }), i(e.name, l);
                        else {
                            var t = json.value || o.data("settingValue");
                            n(o, t), alert(e.error)
                        }
                    }).fail(function (e) {
                        ajaxFailAlert(e), n(o, o.data("settingValue"))
                    }) : n(o, o.data("settingValue"))))
                }).on("change", ".setting_select:not(.global) select", function () {
                    var e = $(this),
                        t = e.closest(".setting_select"),
                        r = t.data("settingConfig"),
                        o = e.val(),
                        s = e.find("option:selected"),
                        l = s.closest(".editable-select").find(".custom-field");
                    "show" !== a(s, l) && "" !== o && $.ajax(r.url, {
                        type: "POST",
                        dataType: "json",
                        data: {
                            _method: "post",
                            setting: r.name,
                            value: o
                        }
                    }).done(function (e) {
                        if (e.success) e.message && alert(e.message), t.data("settingValue", o), i(r.name, o);
                        else {
                            var a = e.value || t.data("settingValue");
                            n(t, a), alert(e.error)
                        }
                    }).fail(function (e) {
                        ajaxFailAlert(e), n(t, t.data("settingValue"))
                    })
                }), $(document).on("mouseover", ".select2-results__option", function (e) {
                    var t = $(e.target);
                    t.attr("aria-disabled") && (t.tooltip({
                        container: $("body"),
                        placement: "auto right",
                        template: '<div class="tooltip disabled-option-tooltip" role="tooltip"><div class="tooltip-arrow disabled-option-tooltip-arrow"></div><div class="tooltip-inner disabled-option-tooltip-inner"></div></div>'
                    }), t.tooltip("show"))
                }), $(document).on("input", ".custom-field input[type=number]", function (e) {
                    var t = $(e.target),
                        n = parseInt(t.attr("min")),
                        i = parseInt(t.attr("max")),
                        r = parseInt(t.val()),
                        a = t.closest(".editable-select-wrapper").hasClass("global");
                    if (a) var o = t.parents(".editable-select").parent().find(".help-block"),
                        s = t.parents(".editable-select").find(".apply_to_all");
                    else var o = t.parents(".editable-select-wrapper").find(".help-block");
                    var l = o.parent(),
                        c = t.parent();
                    !/^[0-9]+$/.test(t.val()) || n > r || r > i ? (c.addClass("has-error"), o.text("Must be between " + n + "-" + i), a ? (l.removeClass("hidden"), s.attr("disabled", "disabled")) : l.removeClass("invisible")) : (c.removeClass("has-error"), a ? (l.addClass("hidden"), s.removeAttr("disabled")) : l.addClass("invisible"))
                }), $(document).on("blur", ".editable-select-wrapper.local .custom-field input[type=number]", function (e) {
                    var t = $(e.target),
                        n = t.parents(".custom-field"),
                        i = t.closest(".editable-select-wrapper").find(".setting_select").data("settingConfig");
                    if (!n.hasClass("has-error")) {
                        var r = parseInt(t.val()) * i.multiplier;
                        o(i.url, i.name, r).done(function (e) {
                            e.success || alert(i.failure_message)
                        }).fail(function () {
                            alert(i.failure_message)
                        })
                    }
                }), r.on("click", ".editable-select-wrapper.global .apply_to_all", function (e) {
                    var t = $(e.target),
                        n = t.parents(".editable-select "),
                        i = n.find(".setting_select select"),
                        r = i.find("option:selected"),
                        a = n.find(".setting_select").data("settingConfig");
                    if (confirm(a.confirmation_message)) {
                        if ("Custom" === r.text()) var s = n.find(".custom-field input"),
                            l = parseInt(s.val()) * a.multiplier;
                        else var l = i.val();
                        o(a.url, a.name, l).done(function (e) {
                            e.success ? ($.jGrowl("Setting changed!"), setTimeout(function () {
                                document.location.reload()
                            }, 1e3)) : alert(a.failure_message)
                        }).fail(function () {
                            alert(a.failure_message)
                        })
                    } else t.blur()
                })
            }
        }
    }(), $(function () {
        $(".settings_panel").length && Settings.initMain()
    }), $(function () {
        $("#achievement_setting_panel").each(function () {
            new AchievementSetting($(this))
        })
    }), View._version = "1.02", $(function () {
        $("#datepicker").each(function () {
            var e = $(this),
                t = e.data("date"),
                n = toMomentWeekday(e.data("startWeekOn")),
                i = {
                    singleDatePicker: !0,
                    startDate: moment(t),
                    locale: {
                        format: TimeUtils.format_for("date"),
                        firstDay: n
                    }
                },
                r = e.data("minDate");
            r && (i.minDate = moment(r)), e.daterangepicker(i, function (e, t, n) {
                goto_date(e)
            })
        })
    }), $(function () {
        var e = $("#daterangepicker");
        if (0 !== e.length) {
            var t = toMomentIsoWeekday(e.data("startWeekOn")),
                n = toMomentWeekday(e.data("startWeekOn")),
                i = {
                    alwaysShowCalendars: !0,
                    locale: {
                        format: TimeUtils.format_for("date"),
                        firstDay: n
                    },
                    linkedCalendars: !1,
                    template: '<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div><input class="input-mini" disabled="disabled" type="text" name="daterangepicker_start" value="" /></div><div class="calendar right"><div class="daterangepicker_input"><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div><input class="input-mini" disabled="disabled" type="text" name="daterangepicker_end" value="" /></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'
                },
                r = {
                    Today: [moment(), moment()],
                    Yesterday: [moment().subtract(1, "days"), moment().subtract(1, "days")],
                    "Last 7 Days": [moment().subtract(6, "days"), moment()]
                };
            r["Last week"] = [moment().subtract(1, "weeks").startOfIsoWeek(t), moment().subtract(1, "weeks").endOfIsoWeek(t)];
            var a = e.data("excludeBiweeklyRange");
            a || (r["Last 2 weeks"] = [moment().subtract(2, "weeks").startOfIsoWeek(t), moment().subtract(1, "weeks").endOfIsoWeek(t)]);
            var o = e.data("excludeMonthlyRanges");
            o || (r["This Month"] = [moment().startOf("month"), moment().endOf("month")], r["Last Month"] = [moment().subtract(1, "month").startOf("month"), moment().subtract(1, "month").endOf("month")]), i.ranges = r;
            var s = $("#date").val();
            s && (i.startDate = moment(s));
            var l = $("#date_end").val();
            l && (i.endDate = moment(l));
            var c = e.data("minDate");
            c && (i.minDate = moment(c));
            var u = e.data("maxDate");
            u && (i.maxDate = moment(u));
            var d = e.data("dateLimit");
            d && (i.dateLimit = {
                days: d - 1
            }), e.daterangepicker(i, function (e, t, n) {
                $("#date").val(TimeUtils.format_internal_date(e)), $("#date_end").val(TimeUtils.format_internal_date(t)), $("#filters").submit()
            }), $(".datepicker").on("click", function (e) {
                e.preventDefault()
            })
        }
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define(["jquery"], function (e) {
            return t(e)
        }) : "object" == typeof exports ? module.exports = t(require("jquery")) : t(jQuery)
    }(this, function (e) {
        ! function () {
            "use strict";

            function t(t, i) {
                if (this.el = t, this.$el = e(t), this.s = e.extend({}, n, i), this.s.dynamic && "undefined" !== this.s.dynamicEl && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) throw "When using dynamic mode, you must also define dynamicEl as an Array.";
                return this.modules = {}, this.lGalleryOn = !1, this.lgBusy = !1, this.hideBartimeout = !1, this.isTouch = "ontouchstart" in document.documentElement, this.s.slideEndAnimatoin && (this.s.hideControlOnEnd = !1), this.s.dynamic ? this.$items = this.s.dynamicEl : "this" === this.s.selector ? this.$items = this.$el : "" !== this.s.selector ? this.s.selectWithin ? this.$items = e(this.s.selectWithin).find(this.s.selector) : this.$items = this.$el.find(e(this.s.selector)) : this.$items = this.$el.children(), this.$slide = "", this.$outer = "", this.init(), this
            }
            var n = {
                mode: "lg-slide",
                cssEasing: "ease",
                easing: "linear",
                speed: 600,
                height: "100%",
                width: "100%",
                addClass: "",
                startClass: "lg-start-zoom",
                backdropDuration: 150,
                hideBarsDelay: 6e3,
                useLeft: !1,
                closable: !0,
                loop: !0,
                escKey: !0,
                keyPress: !0,
                controls: !0,
                slideEndAnimatoin: !0,
                hideControlOnEnd: !1,
                mousewheel: !0,
                allowHtmlCaptions: !0,
                allowCaptionLookups: !0,
                getCaptionFromTitleOrAlt: !0,
                appendSubHtmlTo: ".lg-sub-html",
                subHtmlSelectorRelative: !1,
                preload: 1,
                showAfterLoad: !0,
                selector: "",
                selectWithin: "",
                nextHtml: "",
                prevHtml: "",
                index: !1,
                iframeMaxWidth: "100%",
                download: !0,
                counter: !0,
                appendCounterTo: ".lg-toolbar",
                swipeThreshold: 50,
                enableSwipe: !0,
                enableDrag: !0,
                dynamic: !1,
                dynamicEl: [],
                galleryId: 1
            };
            t.prototype.init = function () {
                var t = this;
                t.s.preload > t.$items.length && (t.s.preload = t.$items.length);
                var n = window.location.hash;
                n.indexOf("lg=" + this.s.galleryId) > 0 && (t.index = parseInt(n.split("&slide=")[1], 10), e("body").addClass("lg-from-hash"), e("body").hasClass("lg-on") || (setTimeout(function () {
                    t.build(t.index)
                }), e("body").addClass("lg-on"))), t.s.dynamic ? (t.$el.trigger("onBeforeOpen.lg"), t.index = t.s.index || 0, e("body").hasClass("lg-on") || setTimeout(function () {
                    t.build(t.index), e("body").addClass("lg-on")
                })) : t.$items.on("click.lgcustom", function (n) {
                    try {
                        n.preventDefault(), n.preventDefault()
                    } catch (i) {
                        n.returnValue = !1
                    }
                    t.$el.trigger("onBeforeOpen.lg"), t.index = t.s.index || t.$items.index(this), e("body").hasClass("lg-on") || (t.build(t.index), e("body").addClass("lg-on"))
                })
            }, t.prototype.build = function (t) {
                var n = this;
                n.index = t, n.structure(), e.each(e.fn.lightGallery.modules, function (t) {
                    n.modules[t] = new e.fn.lightGallery.modules[t](n.el)
                }), n.slide(t, !1, !1), n.s.keyPress && n.keyPress(), n.$items.length > 1 && (n.arrow(), setTimeout(function () {
                    n.enableDrag(), n.enableSwipe()
                }, 50), n.s.mousewheel && n.mousewheel()), n.counter(), n.closeGallery(), n.$el.trigger("onAfterOpen.lg"), n.$outer.on("mousemove.lg click.lg touchstart.lg", function () {
                    n.$outer.removeClass("lg-hide-items"), clearTimeout(n.hideBartimeout), n.hideBartimeout = setTimeout(function () {
                        n.$outer.addClass("lg-hide-items")
                    }, n.s.hideBarsDelay)
                })
            }, t.prototype.structure = function () {
                var t, n = "",
                    i = "",
                    r = 0,
                    a = "",
                    o = this;
                for (e("body").append('<div class="lg-backdrop"></div>'), e(".lg-backdrop").css("transition-duration", this.s.backdropDuration + "ms"), r = 0; r < this.$items.length; r++) n += '<div class="lg-item"></div>';
                if (this.s.controls && this.$items.length > 1 && (i = '<div class="lg-actions"><div class="lg-prev lg-icon">' + this.s.prevHtml + '</div><div class="lg-next lg-icon">' + this.s.nextHtml + "</div></div>"), ".lg-sub-html" === this.s.appendSubHtmlTo && (a = '<div class="lg-sub-html"></div>'), t = '<div class="lg-outer ' + this.s.addClass + " " + this.s.startClass + '"><div class="lg" style="width:' + this.s.width + "; height:" + this.s.height + '"><div class="lg-inner">' + n + '</div><div class="lg-toolbar group"><span class="lg-close lg-icon"></span></div>' + i + a + "</div></div>", e("body").append(t), this.$outer = e(".lg-outer"), this.$slide = this.$outer.find(".lg-item"), this.s.useLeft ? (this.$outer.addClass("lg-use-left"), this.s.mode = "lg-slide") : this.$outer.addClass("lg-use-css3"), o.setTop(), e(window).on("resize.lg orientationchange.lg", function () {
                    setTimeout(function () {
                        o.setTop()
                    }, 100)
                }), this.$slide.eq(this.index).addClass("lg-current"), this.doCss() ? this.$outer.addClass("lg-css3") : (this.$outer.addClass("lg-css"), this.s.speed = 0), this.$outer.addClass(this.s.mode), this.s.enableDrag && this.$items.length > 1 && this.$outer.addClass("lg-grab"), this.s.showAfterLoad && this.$outer.addClass("lg-show-after-load"), this.doCss()) {
                    var s = this.$outer.find(".lg-inner");
                    s.css("transition-timing-function", this.s.cssEasing), s.css("transition-duration", this.s.speed + "ms")
                }
                setTimeout(function () {
                    e(".lg-backdrop").addClass("in")
                }), setTimeout(function () {
                    o.$outer.addClass("lg-visible")
                }, this.s.backdropDuration), this.s.download && this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'), this.prevScrollTop = e(window).scrollTop()
            }, t.prototype.setTop = function () {
                if ("100%" !== this.s.height) {
                    var t = e(window).height(),
                        n = (t - parseInt(this.s.height, 10)) / 2,
                        i = this.$outer.find(".lg");
                    t >= parseInt(this.s.height, 10) ? i.css("top", n + "px") : i.css("top", "0px")
                }
            }, t.prototype.doCss = function () {
                var e = function () {
                    var e = ["transition", "MozTransition", "WebkitTransition", "OTransition", "msTransition", "KhtmlTransition"],
                        t = document.documentElement,
                        n = 0;
                    for (n = 0; n < e.length; n++)
                        if (e[n] in t.style) return !0
                };
                return e() ? !0 : !1
            }, t.prototype.isVideo = function (e, t) {
                var n;
                if (n = this.s.dynamic ? this.s.dynamicEl[t].html : this.$items.eq(t).attr("data-html"), !e && n) return {
                    html5: !0
                };
                var i = e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),
                    r = e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),
                    a = e.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),
                    o = e.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);
                return i ? {
                    youtube: i
                } : r ? {
                    vimeo: r
                } : a ? {
                    dailymotion: a
                } : o ? {
                    vk: o
                } : void 0
            }, t.prototype.counter = function () {
                this.s.counter && e(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">' + (parseInt(this.index, 10) + 1) + '</span> / <span id="lg-counter-all">' + this.$items.length + "</span></div>")
            }, t.prototype.addHtml = function (t) {
                var n, i, r, a = null;
                if (this.s.dynamic ? this.s.dynamicEl[t].subHtmlUrl ? n = this.s.dynamicEl[t].subHtmlUrl : a = this.s.dynamicEl[t].subHtml : (i = this.$items.eq(t), i.attr("data-sub-html-url") ? n = i.attr("data-sub-html-url") : i.attr("data-sub-text") ? (r = e("<span/>").text(i.attr("data-sub-text")), a = r.get(0).innerHTML) : this.s.allowHtmlCaptions ? (a = i.attr("data-sub-html"), this.s.getCaptionFromTitleOrAlt && !a && (a = i.attr("title") || i.find("img").first().attr("alt"))) : this.s.getCaptionFromTitleOrAlt && (a = i.attr("title") || i.find("img").first().attr("alt"), a && (r = e("<span/>").text(a), a = r.get(0).innerHTML))), !n && this.s.allowCaptionLookups)
                    if ("undefined" != typeof a && null !== a) {
                        var o = a.substring(0, 1);
                        ("." === o || "#" === o) && (a = this.s.subHtmlSelectorRelative && !this.s.dynamic ? i.find(a).html() : e(a).html())
                    } else a = "";
                ".lg-sub-html" === this.s.appendSubHtmlTo ? n ? this.$outer.find(this.s.appendSubHtmlTo).load(n) : this.$outer.find(this.s.appendSubHtmlTo).html(a) : n ? this.$slide.eq(t).load(n) : this.$slide.eq(t).append(a), "undefined" != typeof a && null !== a && ("" === a ? this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html") : this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")), this.$el.trigger("onAfterAppendSubHtml.lg", [t])
            }, t.prototype.preload = function (e) {
                var t = 1,
                    n = 1;
                for (t = 1; t <= this.s.preload && !(t >= this.$items.length - e); t++) this.loadContent(e + t, !1, 0);
                for (n = 1; n <= this.s.preload && !(0 > e - n); n++) this.loadContent(e - n, !1, 0)
            }, t.prototype.loadContent = function (t, n, i) {
                var r, a, o, s, l, c, u = this,
                    d = !1,
                    h = function (t) {
                        for (var n = [], i = [], r = 0; r < t.length; r++) {
                            var o = t[r].split(" ");
                            "" === o[0] && o.splice(0, 1), i.push(o[0]), n.push(o[1])
                        }
                        for (var s = e(window).width(), l = 0; l < n.length; l++)
                            if (parseInt(n[l], 10) > s) {
                                a = i[l];
                                break
                            }
                    };
                if (u.s.dynamic) {
                    if (u.s.dynamicEl[t].poster && (d = !0, o = u.s.dynamicEl[t].poster), c = u.s.dynamicEl[t].html, a = u.s.dynamicEl[t].src, u.s.dynamicEl[t].responsive) {
                        var f = u.s.dynamicEl[t].responsive.split(",");
                        h(f)
                    }
                    s = u.s.dynamicEl[t].srcset, l = u.s.dynamicEl[t].sizes
                } else {
                    if (u.$items.eq(t).attr("data-poster") && (d = !0, o = u.$items.eq(t).attr("data-poster")), c = u.$items.eq(t).attr("data-html"), a = u.$items.eq(t).attr("href") || u.$items.eq(t).attr("data-src"), u.$items.eq(t).attr("data-responsive")) {
                        var p = u.$items.eq(t).attr("data-responsive").split(",");
                        h(p)
                    }
                    s = u.$items.eq(t).attr("data-srcset"), l = u.$items.eq(t).attr("data-sizes")
                }
                var m = !1;
                u.s.dynamic ? u.s.dynamicEl[t].iframe && (m = !0) : "true" === u.$items.eq(t).attr("data-iframe") && (m = !0);
                var g = u.isVideo(a, t);
                if (!u.$slide.eq(t).hasClass("lg-loaded")) {
                    if (m) u.$slide.eq(t).prepend('<div class="lg-video-cont" style="max-width:' + u.s.iframeMaxWidth + '"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="' + a + '"  allowfullscreen="true"></iframe></div></div>');
                    else if (d) {
                        var v = "";
                        v = g && g.youtube ? "lg-has-youtube" : g && g.vimeo ? "lg-has-vimeo" : "lg-has-html5", u.$slide.eq(t).prepend('<div class="lg-video-cont ' + v + ' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="' + o + '" /></div></div>')
                    } else if (g) u.$slide.eq(t).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'), u.$el.trigger("hasVideo.lg", [t, a, c]);
                    else {
                        var y = e('<div class="lg-img-wrap"><img class="lg-object lg-image"/></div>');
                        u.$slide.eq(t).prepend(y);
                        var b = y.find("img");
                        b.on("error", function (e) {
                            u.$el.trigger("onLoadError.lg", [t])
                        }).attr("src", a)
                    }
                    if (u.$el.trigger("onAferAppendSlide.lg", [t]), r = u.$slide.eq(t).find(".lg-object"), l && r.attr("sizes", l), s) {
                        r.attr("srcset", s);
                        try {
                            picturefill({
                                elements: [r[0]]
                            })
                        } catch (w) {
                            console.error("Make sure you have included Picturefill version 2")
                        }
                    }
                    ".lg-sub-html" !== this.s.appendSubHtmlTo && u.addHtml(t), u.$slide.eq(t).addClass("lg-loaded")
                }
                u.$slide.eq(t).find(".lg-object").on("load.lg error.lg", function () {
                    var n = 0;
                    i && !e("body").hasClass("lg-from-hash") && (n = i), setTimeout(function () {
                        u.$slide.eq(t).addClass("lg-complete"), u.$el.trigger("onSlideItemLoad.lg", [t, i || 0])
                    }, n)
                }), g && g.html5 && !d && u.$slide.eq(t).addClass("lg-complete"), n === !0 && (u.$slide.eq(t).hasClass("lg-complete") ? u.preload(t) : u.$slide.eq(t).find(".lg-object").on("load.lg error.lg", function () {
                    u.preload(t)
                }))
            }, t.prototype.slide = function (t, n, i) {
                var r = this.$outer.find(".lg-current").index(),
                    a = this;
                if (!a.lGalleryOn || r !== t) {
                    var o = this.$slide.length,
                        s = a.lGalleryOn ? this.s.speed : 0,
                        l = !1,
                        c = !1;
                    if (!a.lgBusy) {
                        if (this.s.download) {
                            var u;
                            u = a.s.dynamic ? a.s.dynamicEl[t].downloadUrl !== !1 && (a.s.dynamicEl[t].downloadUrl || a.s.dynamicEl[t].src) : "false" !== a.$items.eq(t).attr("data-download-url") && (a.$items.eq(t).attr("data-download-url") || a.$items.eq(t).attr("href") || a.$items.eq(t).attr("data-src")), u ? (e("#lg-download").attr("href", u), a.$outer.removeClass("lg-hide-download")) : a.$outer.addClass("lg-hide-download")
                        }
                        if (this.$el.trigger("onBeforeSlide.lg", [r, t, n, i]), a.lgBusy = !0, clearTimeout(a.hideBartimeout), ".lg-sub-html" === this.s.appendSubHtmlTo && setTimeout(function () {
                            a.addHtml(t)
                        }, s), this.arrowDisable(t), n) {
                            var d = t - 1,
                                h = t + 1;
                            0 === t && r === o - 1 ? (h = 0, d = o - 1) : t === o - 1 && 0 === r && (h = 0, d = o - 1), this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"), a.$slide.eq(d).addClass("lg-prev-slide"), a.$slide.eq(h).addClass("lg-next-slide"), a.$slide.eq(t).addClass("lg-current")
                        } else a.$outer.addClass("lg-no-trans"), this.$slide.removeClass("lg-prev-slide lg-next-slide"), r > t ? (c = !0, 0 !== t || r !== o - 1 || i || (c = !1, l = !0)) : t > r && (l = !0, t !== o - 1 || 0 !== r || i || (c = !0, l = !1)), c ? (this.$slide.eq(t).addClass("lg-prev-slide"), this.$slide.eq(r).addClass("lg-next-slide")) : l && (this.$slide.eq(t).addClass("lg-next-slide"), this.$slide.eq(r).addClass("lg-prev-slide")), setTimeout(function () {
                            a.$slide.removeClass("lg-current"), a.$slide.eq(t).addClass("lg-current"), a.$outer.removeClass("lg-no-trans")
                        }, 50);
                        a.lGalleryOn ? (setTimeout(function () {
                            a.loadContent(t, !0, 0)
                        }, this.s.speed + 50), setTimeout(function () {
                            a.lgBusy = !1, a.$el.trigger("onAfterSlide.lg", [r, t, n, i])
                        }, this.s.speed)) : (a.loadContent(t, !0, a.s.backdropDuration), a.lgBusy = !1, a.$el.trigger("onAfterSlide.lg", [r, t, n, i])), a.lGalleryOn = !0, this.s.counter && e("#lg-counter-current").text(t + 1)
                    }
                }
            }, t.prototype.goToNextSlide = function (e) {
                var t = this;
                t.lgBusy || (t.index + 1 < t.$slide.length ? (t.index++, t.$el.trigger("onBeforeNextSlide.lg", [t.index]), t.slide(t.index, e, !1)) : t.s.loop ? (t.index = 0, t.$el.trigger("onBeforeNextSlide.lg", [t.index]), t.slide(t.index, e, !1)) : t.s.slideEndAnimatoin && (t.$outer.addClass("lg-right-end"), setTimeout(function () {
                    t.$outer.removeClass("lg-right-end")
                }, 400)))
            }, t.prototype.goToPrevSlide = function (e) {
                var t = this;
                t.lgBusy || (t.index > 0 ? (t.index--, t.$el.trigger("onBeforePrevSlide.lg", [t.index, e]), t.slide(t.index, e, !1)) : t.s.loop ? (t.index = t.$items.length - 1, t.$el.trigger("onBeforePrevSlide.lg", [t.index, e]), t.slide(t.index, e, !1)) : t.s.slideEndAnimatoin && (t.$outer.addClass("lg-left-end"), setTimeout(function () {
                    t.$outer.removeClass("lg-left-end")
                }, 400)))
            }, t.prototype.keyPress = function () {
                var t = this;
                this.$items.length > 1 && e(window).on("keyup.lg", function (e) {
                    t.$items.length > 1 && (37 === e.keyCode && (e.preventDefault(), t.goToPrevSlide()), 39 === e.keyCode && (e.preventDefault(), t.goToNextSlide()))
                }), e(window).on("keydown.lg", function (e) {
                    t.s.escKey === !0 && 27 === e.keyCode && (e.preventDefault(), t.$outer.hasClass("lg-thumb-open") ? t.$outer.removeClass("lg-thumb-open") : t.destroy())
                })
            }, t.prototype.arrow = function () {
                var e = this;
                this.$outer.find(".lg-prev").on("click.lg", function () {
                    e.goToPrevSlide()
                }), this.$outer.find(".lg-next").on("click.lg", function () {
                    e.goToNextSlide()
                })
            }, t.prototype.arrowDisable = function (e) {
                !this.s.loop && this.s.hideControlOnEnd && (e + 1 < this.$slide.length ? this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled") : this.$outer.find(".lg-next").attr("disabled", "disabled").addClass("disabled"), e > 0 ? this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled") : this.$outer.find(".lg-prev").attr("disabled", "disabled").addClass("disabled"))
            }, t.prototype.setTranslate = function (e, t, n) {
                this.s.useLeft ? e.css("left", t) : e.css({
                    transform: "translate3d(" + t + "px, " + n + "px, 0px)"
                })
            }, t.prototype.touchMove = function (t, n) {
                var i = n - t;
                Math.abs(i) > 15 && (this.$outer.addClass("lg-dragging"), this.setTranslate(this.$slide.eq(this.index), i, 0), this.setTranslate(e(".lg-prev-slide"), -this.$slide.eq(this.index).width() + i, 0), this.setTranslate(e(".lg-next-slide"), this.$slide.eq(this.index).width() + i, 0))
            }, t.prototype.touchEnd = function (e) {
                var t = this;
                "lg-slide" !== t.s.mode && t.$outer.addClass("lg-slide"), this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity", "0"), setTimeout(function () {
                    t.$outer.removeClass("lg-dragging"), 0 > e && Math.abs(e) > t.s.swipeThreshold ? t.goToNextSlide(!0) : e > 0 && Math.abs(e) > t.s.swipeThreshold ? t.goToPrevSlide(!0) : Math.abs(e) < 5 && t.$el.trigger("onSlideClick.lg"), t.$slide.removeAttr("style")
                }), setTimeout(function () {
                    t.$outer.hasClass("lg-dragging") || "lg-slide" === t.s.mode || t.$outer.removeClass("lg-slide")
                }, t.s.speed + 100)
            }, t.prototype.enableSwipe = function () {
                var e = this,
                    t = 0,
                    n = 0,
                    i = !1;
                e.s.enableSwipe && e.isTouch && e.doCss() && (e.$slide.on("touchstart.lg", function (n) {
                    e.$outer.hasClass("lg-zoomed") || e.lgBusy || (n.preventDefault(), e.manageSwipeClass(), t = n.originalEvent.targetTouches[0].pageX)
                }), e.$slide.on("touchmove.lg", function (r) {
                    e.$outer.hasClass("lg-zoomed") || (r.preventDefault(), n = r.originalEvent.targetTouches[0].pageX, e.touchMove(t, n), i = !0)
                }), e.$slide.on("touchend.lg", function () {
                    e.$outer.hasClass("lg-zoomed") || (i ? (i = !1, e.touchEnd(n - t)) : e.$el.trigger("onSlideClick.lg"))
                }))
            }, t.prototype.enableDrag = function () {
                var t = this,
                    n = 0,
                    i = 0,
                    r = !1,
                    a = !1;
                t.s.enableDrag && !t.isTouch && t.doCss() && (t.$slide.on("mousedown.lg", function (i) {
                    t.$outer.hasClass("lg-zoomed") || (e(i.target).hasClass("lg-object") || e(i.target).hasClass("lg-video-play")) && (i.preventDefault(), t.lgBusy || (t.manageSwipeClass(), n = i.pageX, r = !0, t.$outer.scrollLeft += 1, t.$outer.scrollLeft -= 1, t.$outer.removeClass("lg-grab").addClass("lg-grabbing"), t.$el.trigger("onDragstart.lg")))
                }), e(window).on("mousemove.lg", function (e) {
                    r && (a = !0, i = e.pageX, t.touchMove(n, i), t.$el.trigger("onDragmove.lg"))
                }), e(window).on("mouseup.lg", function (o) {
                    a ? (a = !1, t.touchEnd(i - n), t.$el.trigger("onDragend.lg")) : (e(o.target).hasClass("lg-object") || e(o.target).hasClass("lg-video-play")) && t.$el.trigger("onSlideClick.lg"), r && (r = !1, t.$outer.removeClass("lg-grabbing").addClass("lg-grab"))
                }))
            }, t.prototype.manageSwipeClass = function () {
                var e = this.index + 1,
                    t = this.index - 1,
                    n = this.$slide.length;
                this.s.loop && (0 === this.index ? t = n - 1 : this.index === n - 1 && (e = 0)), this.$slide.removeClass("lg-next-slide lg-prev-slide"), t > -1 && this.$slide.eq(t).addClass("lg-prev-slide"), this.$slide.eq(e).addClass("lg-next-slide")
            }, t.prototype.mousewheel = function () {
                var e = this;
                e.$outer.on("mousewheel.lg", function (t) {
                    t.deltaY && (t.deltaY > 0 ? e.goToPrevSlide() : e.goToNextSlide(), t.preventDefault())
                })
            }, t.prototype.closeGallery = function () {
                var t = this,
                    n = !1;
                this.$outer.find(".lg-close").on("click.lg", function () {
                    t.destroy()
                }), t.s.closable && (t.$outer.on("mousedown.lg", function (t) {
                    n = e(t.target).is(".lg-outer") || e(t.target).is(".lg-item ") || e(t.target).is(".lg-img-wrap") ? !0 : !1
                }), t.$outer.on("mouseup.lg", function (i) {
                    (e(i.target).is(".lg-outer") || e(i.target).is(".lg-item ") || e(i.target).is(".lg-img-wrap") && n) && (t.$outer.hasClass("lg-dragging") || t.destroy())
                }))
            }, t.prototype.destroy = function (t) {
                var n = this;
                t || n.$el.trigger("onBeforeClose.lg"), e(window).scrollTop(n.prevScrollTop), t && (n.s.dynamic || this.$items.off("click.lg click.lgcustom"), e.removeData(n.el, "lightGallery")), this.$el.off(".lg.tm"), e.each(e.fn.lightGallery.modules, function (e) {
                    n.modules[e] && n.modules[e].destroy()
                }), this.lGalleryOn = !1, clearTimeout(n.hideBartimeout), this.hideBartimeout = !1, e(window).off(".lg"), e("body").removeClass("lg-on lg-from-hash"), n.$outer && n.$outer.removeClass("lg-visible"), e(".lg-backdrop").removeClass("in"), setTimeout(function () {
                    n.$outer && n.$outer.remove(), e(".lg-backdrop").remove(), t || n.$el.trigger("onCloseAfter.lg")
                }, n.s.backdropDuration + 50)
            }, e.fn.lightGallery = function (n) {
                return this.each(function () {
                    if (e.data(this, "lightGallery")) try {
                        e(this).data("lightGallery").init()
                    } catch (i) {
                        console.error("lightGallery has not initiated properly")
                    } else e.data(this, "lightGallery", new t(this, n))
                })
            }, e.fn.lightGallery.modules = {}
        }()
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof exports ? module.exports = t() : t()
    }(this, function () {
        ! function (e, t, n, i) {
            "use strict";
            var r = {
                fullScreen: !0
            },
                a = function (t) {
                    return this.core = e(t).data("lightGallery"), this.$el = e(t), this.core.s = e.extend({}, r, this.core.s), this.init(), this
                };
            a.prototype.init = function () {
                var e = "";
                if (this.core.s.fullScreen) {
                    if (!(n.fullscreenEnabled || n.webkitFullscreenEnabled || n.mozFullScreenEnabled || n.msFullscreenEnabled)) return;
                    e = '<span class="lg-fullscreen lg-icon"></span>', this.core.$outer.find(".lg-toolbar").append(e), this.fullScreen()
                }
            }, a.prototype.requestFullscreen = function () {
                var e = n.documentElement;
                e.requestFullscreen ? e.requestFullscreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen && e.webkitRequestFullscreen()
            }, a.prototype.exitFullscreen = function () {
                n.fullscreenElement && n.exitFullscreen ? n.exitFullscreen() : n.msFullscreenElement && n.msExitFullscreen ? n.msExitFullscreen() : n.mozFullScreenElement && n.mozCancelFullScreen ? n.mozCancelFullScreen() : n.webkitFullscreenElement && n.webkitExitFullscreen && n.webkitExitFullscreen()
            }, a.prototype.fullScreen = function () {
                var t = this;
                e(n).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg", function () {
                    t.core.$outer.toggleClass("lg-fullscreen-on")
                }), this.core.$outer.find(".lg-fullscreen").on("click.lg", function () {
                    n.fullscreenElement || n.mozFullScreenElement || n.webkitFullscreenElement || n.msFullscreenElement ? t.exitFullscreen() : t.requestFullscreen()
                })
            }, a.prototype.destroy = function () {
                this.exitFullscreen(), e(n).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")
            }, e.fn.lightGallery.modules.fullscreen = a
        }(jQuery, window, document)
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof exports ? module.exports = t() : t()
    }(this, function () {
        ! function (e, t, n, i) {
            "use strict";
            var r = {
                hash: !0
            },
                a = function (n) {
                    return this.core = e(n).data("lightGallery"), this.core.s = e.extend({}, r, this.core.s), this.core.s.hash && (this.oldHash = t.location.hash, this.init()), this
                };
            a.prototype.init = function () {
                var n, i = this;
                i.core.$el.on("onAfterSlide.lg.tm", function (e, n, r) {
                    t.location.hash = "lg=" + i.core.s.galleryId + "&slide=" + r
                }), e(t).on("hashchange.lg.hash", function () {
                    n = t.location.hash;
                    var e = parseInt(n.split("&slide=")[1], 10);
                    n.indexOf("lg=" + i.core.s.galleryId) > -1 ? i.core.slide(e, !1, !1) : i.core.lGalleryOn && i.core.destroy()
                })
            }, a.prototype.destroy = function () {
                this.core.s.hash && (this.oldHash && this.oldHash.indexOf("lg=" + this.core.s.galleryId) < 0 ? t.location.hash = this.oldHash : history.pushState ? history.pushState("", n.title, t.location.pathname + t.location.search) : t.location.hash = "", this.core.$el.off(".lg.hash"))
            }, e.fn.lightGallery.modules.hash = a
        }(jQuery, window, document)
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof exports ? module.exports = t() : t()
    }(this, function () {
        ! function (e, t, n, i) {
            "use strict";
            var r = {
                pager: !1
            },
                a = function (t) {
                    return this.core = e(t).data("lightGallery"), this.$el = e(t), this.core.s = e.extend({}, r, this.core.s), this.core.s.pager && this.core.$items.length > 1 && this.init(), this
                };
            a.prototype.init = function () {
                var t, n, i, r = this,
                    a = "";
                if (r.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'), r.core.s.dynamic)
                    for (var o = 0; o < r.core.s.dynamicEl.length; o++) a += '<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="' + r.core.s.dynamicEl[o].thumb + '" /></div></span>';
                else r.core.$items.each(function () {
                    a += r.core.s.exThumbImage ? '<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="' + e(this).attr(r.core.s.exThumbImage) + '" /></div></span>' : '<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="' + e(this).find("img").attr("src") + '" /></div></span>'
                });
                n = r.core.$outer.find(".lg-pager-outer"), n.html(a), t = r.core.$outer.find(".lg-pager-cont"), t.on("click.lg touchend.lg", function () {
                    var t = e(this);
                    r.core.index = t.index(), r.core.slide(r.core.index, !1, !1)
                }), n.on("mouseover.lg", function () {
                    clearTimeout(i), n.addClass("lg-pager-hover")
                }), n.on("mouseout.lg", function () {
                    i = setTimeout(function () {
                        n.removeClass("lg-pager-hover")
                    })
                }), r.core.$el.on("onBeforeSlide.lg.tm", function (e, n, i) {
                    t.removeClass("lg-pager-active"), t.eq(i).addClass("lg-pager-active")
                })
            }, a.prototype.destroy = function () { }, e.fn.lightGallery.modules.pager = a
        }(jQuery, window, document)
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof exports ? module.exports = t() : t()
    }(this, function () {
        ! function (e, t, n, i) {
            "use strict";
            var r = {
                thumbnail: !0,
                animateThumb: !0,
                currentPagerPosition: "middle",
                thumbWidth: 100,
                thumbContHeight: 100,
                thumbMargin: 5,
                elThumbHtml: "data-thumb-html",
                exThumbImage: !1,
                showThumbByDefault: !0,
                toogleThumb: !0,
                pullCaptionUp: !0,
                enableThumbDrag: !0,
                enableThumbSwipe: !0,
                swipeThreshold: 50,
                loadYoutubeThumbnail: !0,
                youtubeThumbSize: 1,
                loadVimeoThumbnail: !0,
                vimeoThumbSize: "thumbnail_small",
                loadDailymotionThumbnail: !0
            },
                a = function (t) {
                    return this.core = e(t).data("lightGallery"), this.core.s = e.extend({}, r, this.core.s), this.$el = e(t), this.$thumbOuter = null, this.thumbOuterWidth = 0, this.thumbTotalWidth = this.core.$items.length * (this.core.s.thumbWidth + this.core.s.thumbMargin), this.thumbIndex = this.core.index, this.left = 0, this.init(), this
                };
            a.prototype.init = function () {
                var e = this;
                this.core.s.thumbnail && this.core.$items.length > 1 && (this.core.s.showThumbByDefault && setTimeout(function () {
                    e.core.$outer.addClass("lg-thumb-open")
                }, 700), this.core.s.pullCaptionUp && this.core.$outer.addClass("lg-pull-caption-up"), this.build(), this.core.s.animateThumb ? (this.core.s.enableThumbDrag && !this.core.isTouch && this.core.doCss() && this.enableThumbDrag(), this.core.s.enableThumbSwipe && this.core.isTouch && this.core.doCss() && this.enableThumbSwipe(), this.thumbClickable = !1) : this.thumbClickable = !0, this.toogle(), this.thumbkeyPress())
            }, a.prototype.build = function () {
                function n(e, t, n) {
                    var i, r = a.core.isVideo(e, n) || {},
                        l = "";
                    r.youtube || r.vimeo || r.dailymotion ? r.youtube ? i = a.core.s.loadYoutubeThumbnail ? "//img.youtube.com/vi/" + r.youtube[1] + "/" + a.core.s.youtubeThumbSize + ".jpg" : t : r.vimeo ? a.core.s.loadVimeoThumbnail ? (i = "//i.vimeocdn.com/video/error_" + s + ".jpg", l = r.vimeo[1]) : i = t : r.dailymotion && (i = a.core.s.loadDailymotionThumbnail ? "//www.dailymotion.com/thumbnail/video/" + r.dailymotion[1] : t) : i = t, o += '<div data-vimeo-id="' + l + '" class="lg-thumb-item" style="width:' + a.core.s.thumbWidth + "px; margin-right: " + a.core.s.thumbMargin + 'px"><img src="' + i + '" /></div>', l = ""
                }

                function i(t) {
                    o += '<div class="lg-thumb-item" style="width:' + a.core.s.thumbWidth + "px; margin-right: " + a.core.s.thumbMargin + 'px">' + e(t).html() + "</div>"
                }
                var r, a = this,
                    o = "",
                    s = "",
                    l = '<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';
                switch (this.core.s.vimeoThumbSize) {
                    case "thumbnail_large":
                        s = "640";
                        break;
                    case "thumbnail_medium":
                        s = "200x150";
                        break;
                    case "thumbnail_small":
                        s = "100x75"
                }
                if (a.core.$outer.addClass("lg-has-thumb"), a.core.$outer.find(".lg").append(l), a.$thumbOuter = a.core.$outer.find(".lg-thumb-outer"), a.thumbOuterWidth = a.$thumbOuter.width(), a.core.s.animateThumb && a.core.$outer.find(".lg-thumb").css({
                    width: a.thumbTotalWidth + "px",
                    position: "relative"
                }), this.core.s.animateThumb && a.$thumbOuter.css("height", a.core.s.thumbContHeight + "px"), a.core.s.dynamic)
                    for (var c = 0; c < a.core.s.dynamicEl.length; c++) n(a.core.s.dynamicEl[c].src, a.core.s.dynamicEl[c].thumb, c);
                else a.core.$items.each(function (t) {
                    e(this).attr(a.core.s.elThumbHtml) ? i(e(this).attr(a.core.s.elThumbHtml)) : a.core.s.exThumbImage ? n(e(this).attr("href") || e(this).attr("data-src"), e(this).attr(a.core.s.exThumbImage), t) : n(e(this).attr("href") || e(this).attr("data-src"), e(this).find("img").attr("src"), t)
                });
                a.core.$outer.find(".lg-thumb").html(o), r = a.core.$outer.find(".lg-thumb-item"), r.each(function () {
                    var t = e(this),
                        n = t.attr("data-vimeo-id");
                    n && e.getJSON("//www.vimeo.com/api/v2/video/" + n + ".json?callback=?", {
                        format: "json"
                    }, function (e) {
                        t.find("img").attr("src", e[0][a.core.s.vimeoThumbSize])
                    })
                }), r.eq(a.core.index).addClass("active"), a.core.$el.on("onBeforeSlide.lg.tm", function () {
                    r.removeClass("active"), r.eq(a.core.index).addClass("active")
                }), r.on("click.lg touchend.lg", function () {
                    var t = e(this);
                    setTimeout(function () {
                        (a.thumbClickable && !a.core.lgBusy || !a.core.doCss()) && (a.core.index = t.index(), a.core.slide(a.core.index, !1, !0))
                    }, 50)
                }), a.core.$el.on("onBeforeSlide.lg.tm", function () {
                    a.animateThumb(a.core.index)
                }), e(t).on("resize.lg.thumb orientationchange.lg.thumb", function () {
                    setTimeout(function () {
                        a.animateThumb(a.core.index), a.thumbOuterWidth = a.$thumbOuter.width()
                    }, 200)
                })
            }, a.prototype.setTranslate = function (e) {
                this.core.$outer.find(".lg-thumb").css({
                    transform: "translate3d(-" + e + "px, 0px, 0px)"
                })
            }, a.prototype.animateThumb = function (e) {
                var t = this.core.$outer.find(".lg-thumb");
                if (this.core.s.animateThumb) {
                    var n;
                    switch (this.core.s.currentPagerPosition) {
                        case "left":
                            n = 0;
                            break;
                        case "middle":
                            n = this.thumbOuterWidth / 2 - this.core.s.thumbWidth / 2;
                            break;
                        case "right":
                            n = this.thumbOuterWidth - this.core.s.thumbWidth
                    }
                    this.left = (this.core.s.thumbWidth + this.core.s.thumbMargin) * e - 1 - n, this.left > this.thumbTotalWidth - this.thumbOuterWidth && (this.left = this.thumbTotalWidth - this.thumbOuterWidth), this.left < 0 && (this.left = 0), this.core.lGalleryOn ? (t.hasClass("on") || this.core.$outer.find(".lg-thumb").css("transition-duration", this.core.s.speed + "ms"), this.core.doCss() || t.animate({
                        left: -this.left + "px"
                    }, this.core.s.speed)) : this.core.doCss() || t.css("left", -this.left + "px"), this.setTranslate(this.left)
                }
            }, a.prototype.enableThumbDrag = function () {
                var n = this,
                    i = 0,
                    r = 0,
                    a = !1,
                    o = !1,
                    s = 0;
                n.$thumbOuter.addClass("lg-grab"), n.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb", function (e) {
                    n.thumbTotalWidth > n.thumbOuterWidth && (e.preventDefault(), i = e.pageX, a = !0, n.core.$outer.scrollLeft += 1, n.core.$outer.scrollLeft -= 1, n.thumbClickable = !1, n.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))
                }), e(t).on("mousemove.lg.thumb", function (e) {
                    a && (s = n.left, o = !0, r = e.pageX, n.$thumbOuter.addClass("lg-dragging"), s -= r - i, s > n.thumbTotalWidth - n.thumbOuterWidth && (s = n.thumbTotalWidth - n.thumbOuterWidth), 0 > s && (s = 0), n.setTranslate(s))
                }), e(t).on("mouseup.lg.thumb", function () {
                    o ? (o = !1, n.$thumbOuter.removeClass("lg-dragging"), n.left = s, Math.abs(r - i) < n.core.s.swipeThreshold && (n.thumbClickable = !0)) : n.thumbClickable = !0, a && (a = !1, n.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))
                })
            }, a.prototype.enableThumbSwipe = function () {
                var e = this,
                    t = 0,
                    n = 0,
                    i = !1,
                    r = 0;
                e.core.$outer.find(".lg-thumb").on("touchstart.lg", function (n) {
                    e.thumbTotalWidth > e.thumbOuterWidth && (n.preventDefault(), t = n.originalEvent.targetTouches[0].pageX, e.thumbClickable = !1)
                }), e.core.$outer.find(".lg-thumb").on("touchmove.lg", function (a) {
                    e.thumbTotalWidth > e.thumbOuterWidth && (a.preventDefault(), n = a.originalEvent.targetTouches[0].pageX, i = !0, e.$thumbOuter.addClass("lg-dragging"), r = e.left, r -= n - t, r > e.thumbTotalWidth - e.thumbOuterWidth && (r = e.thumbTotalWidth - e.thumbOuterWidth), 0 > r && (r = 0), e.setTranslate(r))
                }), e.core.$outer.find(".lg-thumb").on("touchend.lg", function () {
                    e.thumbTotalWidth > e.thumbOuterWidth && i ? (i = !1, e.$thumbOuter.removeClass("lg-dragging"), Math.abs(n - t) < e.core.s.swipeThreshold && (e.thumbClickable = !0), e.left = r) : e.thumbClickable = !0
                })
            }, a.prototype.toogle = function () {
                var e = this;
                e.core.s.toogleThumb && (e.core.$outer.addClass("lg-can-toggle"), e.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'), e.core.$outer.find(".lg-toogle-thumb").on("click.lg", function () {
                    e.core.$outer.toggleClass("lg-thumb-open")
                }))
            }, a.prototype.thumbkeyPress = function () {
                var n = this;
                e(t).on("keydown.lg.thumb", function (e) {
                    38 === e.keyCode ? (e.preventDefault(), n.core.$outer.addClass("lg-thumb-open")) : 40 === e.keyCode && (e.preventDefault(), n.core.$outer.removeClass("lg-thumb-open"))
                })
            }, a.prototype.destroy = function () {
                this.core.s.thumbnail && this.core.$items.length > 1 && (e(t).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"), this.$thumbOuter.remove(), this.core.$outer.removeClass("lg-has-thumb"))
            }, e.fn.lightGallery.modules.Thumbnail = a
        }(jQuery, window, document)
    }),
    function (e, t) {
        "function" == typeof define && define.amd ? define([], function () {
            return t()
        }) : "object" == typeof exports ? module.exports = t() : t()
    }(this, function () {
        ! function (e, t, n, i) {
            "use strict";
            var r = {
                scale: 1,
                zoom: !0,
                actualSize: !0,
                enableZoomAfter: 300
            },
                a = function (n) {
                    return this.core = e(n).data("lightGallery"), this.core.s = e.extend({}, r, this.core.s), this.core.s.zoom && this.core.doCss() && (this.init(), this.zoomabletimeout = !1, this.pageX = e(t).width() / 2, this.pageY = e(t).height() / 2 + e(t).scrollTop()), this
                };
            a.prototype.init = function () {
                var n = this,
                    i = '<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';
                n.core.s.actualSize && (i += '<span id="lg-actual-size" class="lg-icon"></span>'), this.core.$outer.find(".lg-toolbar").append(i), n.core.$el.on("onSlideItemLoad.lg.tm.zoom", function (t, i, r) {
                    var a = n.core.s.enableZoomAfter + r;
                    e("body").hasClass("lg-from-hash") && r ? a = 0 : e("body").removeClass("lg-from-hash"), n.zoomabletimeout = setTimeout(function () {
                        n.core.$slide.eq(i).addClass("lg-zoomable")
                    }, a + 30)
                });
                var r = 1,
                    a = function (i) {
                        var r, a, o = n.core.$outer.find(".lg-current .lg-image"),
                            s = (e(t).width() - o.width()) / 2,
                            l = (e(t).height() - o.height()) / 2 + e(t).scrollTop();
                        r = n.pageX - s, a = n.pageY - l;
                        var c = (i - 1) * r,
                            u = (i - 1) * a;
                        o.css("transform", "scale3d(" + i + ", " + i + ", 1)").attr("data-scale", i), o.parent().css({
                            left: -c + "px",
                            top: -u + "px"
                        }).attr("data-x", c).attr("data-y", u)
                    },
                    o = function () {
                        r > 1 ? n.core.$outer.addClass("lg-zoomed") : n.resetZoom(), 1 > r && (r = 1), a(r)
                    },
                    s = function (i, a, s, l) {
                        var c, u = a.width();
                        c = n.core.s.dynamic ? n.core.s.dynamicEl[s].width || a[0].naturalWidth || u : n.core.$items.eq(s).attr("data-width") || a[0].naturalWidth || u;
                        var d;
                        n.core.$outer.hasClass("lg-zoomed") ? r = 1 : c > u && (d = c / u, r = d || 2), l ? (n.pageX = e(t).width() / 2, n.pageY = e(t).height() / 2 + e(t).scrollTop()) : (n.pageX = i.pageX || i.originalEvent.targetTouches[0].pageX, n.pageY = i.pageY || i.originalEvent.targetTouches[0].pageY), o(), setTimeout(function () {
                            n.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")
                        }, 10)
                    },
                    l = !1;
                n.core.$el.on("onAferAppendSlide.lg.tm.zoom", function (e, t) {
                    var i = n.core.$slide.eq(t).find(".lg-image");
                    i.on("dblclick", function (e) {
                        s(e, i, t)
                    }), i.on("touchstart", function (e) {
                        l ? (clearTimeout(l), l = null, s(e, i, t)) : l = setTimeout(function () {
                            l = null
                        }, 300), e.preventDefault()
                    })
                }), e(t).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom", function () {
                    n.pageX = e(t).width() / 2, n.pageY = e(t).height() / 2 + e(t).scrollTop(), a(r)
                }), e("#lg-zoom-out").on("click.lg", function () {
                    n.core.$outer.find(".lg-current .lg-image").length && (r -= n.core.s.scale, o())
                }), e("#lg-zoom-in").on("click.lg", function () {
                    n.core.$outer.find(".lg-current .lg-image").length && (r += n.core.s.scale, o())
                }), e("#lg-actual-size").on("click.lg", function (e) {
                    s(e, n.core.$slide.eq(n.core.index).find(".lg-image"), n.core.index, !0)
                }), n.core.$el.on("onBeforeSlide.lg.tm", function () {
                    r = 1, n.resetZoom()
                }), n.core.isTouch || n.zoomDrag(), n.core.isTouch && n.zoomSwipe()
            }, a.prototype.resetZoom = function () {
                this.core.$outer.removeClass("lg-zoomed"), this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"), this.core.$slide.find(".lg-image").removeAttr("style data-scale"), this.pageX = e(t).width() / 2, this.pageY = e(t).height() / 2 + e(t).scrollTop()
            }, a.prototype.zoomSwipe = function () {
                var e = this,
                    t = {},
                    n = {},
                    i = !1,
                    r = !1,
                    a = !1;
                e.core.$slide.on("touchstart.lg", function (n) {
                    if (e.core.$outer.hasClass("lg-zoomed")) {
                        var i = e.core.$slide.eq(e.core.index).find(".lg-object");
                        a = i.outerHeight() * i.attr("data-scale") > e.core.$outer.find(".lg").height(), r = i.outerWidth() * i.attr("data-scale") > e.core.$outer.find(".lg").width(), (r || a) && (n.preventDefault(), t = {
                            x: n.originalEvent.targetTouches[0].pageX,
                            y: n.originalEvent.targetTouches[0].pageY
                        })
                    }
                }), e.core.$slide.on("touchmove.lg", function (o) {
                    if (e.core.$outer.hasClass("lg-zoomed")) {
                        var s, l, c = e.core.$slide.eq(e.core.index).find(".lg-img-wrap");
                        o.preventDefault(), i = !0, n = {
                            x: o.originalEvent.targetTouches[0].pageX,
                            y: o.originalEvent.targetTouches[0].pageY
                        }, e.core.$outer.addClass("lg-zoom-dragging"), l = a ? -Math.abs(c.attr("data-y")) + (n.y - t.y) : -Math.abs(c.attr("data-y")), s = r ? -Math.abs(c.attr("data-x")) + (n.x - t.x) : -Math.abs(c.attr("data-x")), (Math.abs(n.x - t.x) > 15 || Math.abs(n.y - t.y) > 15) && c.css({
                            left: s + "px",
                            top: l + "px"
                        })
                    }
                }), e.core.$slide.on("touchend.lg", function () {
                    e.core.$outer.hasClass("lg-zoomed") && i && (i = !1, e.core.$outer.removeClass("lg-zoom-dragging"), e.touchendZoom(t, n, r, a))
                })
            }, a.prototype.zoomDrag = function () {
                var n = this,
                    i = {},
                    r = {},
                    a = !1,
                    o = !1,
                    s = !1,
                    l = !1;
                n.core.$slide.on("mousedown.lg.zoom", function (t) {
                    var r = n.core.$slide.eq(n.core.index).find(".lg-object");
                    l = r.outerHeight() * r.attr("data-scale") > n.core.$outer.find(".lg").height(), s = r.outerWidth() * r.attr("data-scale") > n.core.$outer.find(".lg").width(), n.core.$outer.hasClass("lg-zoomed") && e(t.target).hasClass("lg-object") && (s || l) && (t.preventDefault(), i = {
                        x: t.pageX,
                        y: t.pageY
                    }, a = !0, n.core.$outer.scrollLeft += 1, n.core.$outer.scrollLeft -= 1, n.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))
                }), e(t).on("mousemove.lg.zoom", function (e) {
                    if (a) {
                        var t, c, u = n.core.$slide.eq(n.core.index).find(".lg-img-wrap");
                        o = !0, r = {
                            x: e.pageX,
                            y: e.pageY
                        }, n.core.$outer.addClass("lg-zoom-dragging"), c = l ? -Math.abs(u.attr("data-y")) + (r.y - i.y) : -Math.abs(u.attr("data-y")), t = s ? -Math.abs(u.attr("data-x")) + (r.x - i.x) : -Math.abs(u.attr("data-x")), u.css({
                            left: t + "px",
                            top: c + "px"
                        })
                    }
                }), e(t).on("mouseup.lg.zoom", function (e) {
                    a && (a = !1, n.core.$outer.removeClass("lg-zoom-dragging"), !o || i.x === r.x && i.y === r.y || (r = {
                        x: e.pageX,
                        y: e.pageY
                    }, n.touchendZoom(i, r, s, l)), o = !1), n.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")
                })
            }, a.prototype.touchendZoom = function (e, t, n, i) {
                var r = this,
                    a = r.core.$slide.eq(r.core.index).find(".lg-img-wrap"),
                    o = r.core.$slide.eq(r.core.index).find(".lg-object"),
                    s = -Math.abs(a.attr("data-x")) + (t.x - e.x),
                    l = -Math.abs(a.attr("data-y")) + (t.y - e.y),
                    c = (r.core.$outer.find(".lg").height() - o.outerHeight()) / 2,
                    u = Math.abs(o.outerHeight() * Math.abs(o.attr("data-scale")) - r.core.$outer.find(".lg").height() + c),
                    d = (r.core.$outer.find(".lg").width() - o.outerWidth()) / 2,
                    h = Math.abs(o.outerWidth() * Math.abs(o.attr("data-scale")) - r.core.$outer.find(".lg").width() + d);
                (Math.abs(t.x - e.x) > 15 || Math.abs(t.y - e.y) > 15) && (i && (-u >= l ? l = -u : l >= -c && (l = -c)), n && (-h >= s ? s = -h : s >= -d && (s = -d)), i ? a.attr("data-y", Math.abs(l)) : l = -Math.abs(a.attr("data-y")), n ? a.attr("data-x", Math.abs(s)) : s = -Math.abs(a.attr("data-x")), a.css({
                    left: s + "px",
                    top: l + "px"
                }))
            }, a.prototype.destroy = function () {
                var n = this;
                n.core.$el.off(".lg.zoom"), e(t).off(".lg.zoom"), n.core.$slide.off(".lg.zoom"), n.core.$el.off(".lg.tm.zoom"), n.resetZoom(), clearTimeout(n.zoomabletimeout), n.zoomabletimeout = !1
            }, e.fn.lightGallery.modules.zoom = a
        }(jQuery, window, document)
    });
var Activity = function (e) {
    var t = ".gallery-item";
    return {
        gallery_wrapper: null,
        initLightGallery: function (n) {
            n.data("lightGallery") && n.data("lightGallery").destroy(!0), n.off("onLoadError.lg").on("onLoadError.lg", function (t, n) {
                var i = e(this).data("lightGallery").$slide.eq(n).find(".lg-image");
                i.attr("src", "https://server-assets.hubstaff.com/e007f7ae/activities/screenshot_pending_original-b20d75e789292f7273e3030a537871ba69f7653ef43ab92c29c8a590db944be3.png")
            }), n.lightGallery({
                selector: t,
                thumbnail: !0,
                showThumbByDefault: !1,
                hideControlOnEnd: !0,
                download: !1,
                fullScreen: !1,
                actualSize: !1,
                zoom: !1,
                preload: 3,
                allowHtmlCaptions: !0,
                allowCaptionLookups: !1,
                getCaptionFromTitleOrAlt: !1
            }).on("hasVideo.lg", function (t, i, r, a) {
                var o = n.data("lightGallery"),
                    s = o.$slide.eq(i),
                    l = e(a);
                s.find(".lg-video").append(l.html())
            });
            var i = n.data("autoOpenSlide");
            void 0 !== i && (Activity.gallery_wrapper.data("lightGallery").build(parseInt(i)), n.removeAttr("data-auto-open-slide").removeData("autoOpenSlide"))
        },
        initMain: function (t) {
            Activity.gallery_wrapper = e(".activities-wrapper", t), Activity.initLightGallery(Activity.gallery_wrapper)
        }
    }
}(jQuery);
$(function () {
    $("#activities").each(function () {
        Activity.initMain(this)
    })
}),
    function () {
        window.WelcomeVideo = {
            _body: null,
            _window: null,
            initialize: function () {
                WelcomeVideo._body = $("body"), WelcomeVideo._window = $(window), WelcomeVideo.showPopupAnnouncement()
            },
            markSeen: function () {
                return $.ajax({
                    method: "PATCH",
                    url: "/user/dismiss_welcome_video",
                    dataType: "json"
                })
            },
            showPopupAnnouncement: function () {
                var e = $("#welcome-video");
                e.on("click", ".close-welcome", function () {
                    WelcomeVideo.markSeen(), e.modal("hide")
                }), e.modal({
                    backdrop: "static"
                })
            }
        }, $(document).ready(WelcomeVideo.initialize)
    }(),
    function () {
        if (!window.HubstaffUtils) {
            var e = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#39;"
            },
                t = /[[&<>"']/g,
                n = RegExp(t.source),
                i = {
                    "&amp;": "&",
                    "&lt;": "<",
                    "&gt;": ">",
                    "&quot;": '"',
                    "&#39;": "'"
                },
                r = /&(?:amp|lt|gt|quot|#39);/g,
                a = RegExp(r.source);
            window.HubstaffUtils = {
                escapeHTML: function (i) {
                    return i && n.test(i) ? i.replace(t, function (t) {
                        return e[t]
                    }) : i
                },
                unescapeHTML: function (e) {
                    return e && a.test(e) ? e.replace(r, function (e) {
                        return i[e]
                    }) : e
                }
            }
        }
    }(),
    function () {
        window.AjaxDialog = {
            _hooks: {
                setup: {},
                response: {}
            },
            _globalHooks: {
                setup: [],
                response: []
            },
            _plugins: {
                notification: []
            },
            plugins: {},
            hasHook: function (e, t) {
                return t in this._hooks[e]
            },
            callHook: function (e, t, n) {
                this.hasHook(e, t) && this._hooks[e][t].apply(n, Array.prototype.slice.apply(arguments, [3]))
            },
            registerHook: function (e, t, n) {
                var i = this;
                $.isArray(e) || (e = [e]), $.each(e, function (e, r) {
                    void 0 == i._hooks[r] && $.error("Invalid hook " + r), i._hooks[r][t] = n
                })
            },
            callGlobalHook: function (e, t) {
                var n = Array.prototype.slice.apply(arguments, [2]);
                this._globalHooks[e].forEach(function (e) {
                    e.apply(t, n)
                })
            },
            registerGlobalHook: function (e, t) {
                void 0 == this._globalHooks[e] && $.error("Invalid hook " + e), this._globalHooks[e].push(t)
            },
            callPlugins: function (e, t) {
                for (var n = Array.prototype.slice.apply(arguments, [2]), i = this._plugins[e], r = 0; r < i.length; ++r) {
                    var a = i[r];
                    if ($.isFunction(a[e])) {
                        var o = a[e].apply(AjaxDialog, n);
                        if (o && t) break
                    }
                }
            },
            registerPlugins: function (e, t) {
                void 0 == this._plugins[e] && $.error("Invalid scope " + e), (t || []).forEach(function (t) {
                    var n = AjaxDialog.plugins[t];
                    void 0 !== n && n[e] && AjaxDialog._plugins[e].push(n)
                })
            },
            setup: function () {
                $("body").on("click", ".ajax-dialog", function (e) {
                    e.preventDefault(), e.stopPropagation();
                    var t = $(this).data("href") || $(this).attr("href");
                    AjaxDialog.run(t)
                }), setTimeout(function () {
                    AjaxDialog.runHash()
                }, 200)
            },
            _startDisableWith: function (e) {
                e.find($.rails.disableSelector).each(function () {
                    var e = $(this),
                        t = e.is("button") ? "html" : "val";
                    e.data("ujs:enable-with", e[t]()), e[t](e.data("disable-with")), e.prop("disabled", !0)
                })
            },
            _stopDisableWith: function (e) {
                e.find($.rails.enableSelector).each(function () {
                    var e = $(this),
                        t = e.is("button") ? "html" : "val";
                    e.data("ujs:enable-with") && e[t](e.data("ujs:enable-with")), e.prop("disabled", !1)
                })
            },
            runHash: function () {
                if (window.location.hash) {
                    var e = window.location.hash.substring(1).split("="),
                        t = e.shift(),
                        n = e.join("=");
                    "openDialog" == t && (window.history.replaceState("", document.title, window.location.pathname), AjaxDialog.run(n))
                }
            },
            run: function (e) {
                var t = $(document.body),
                    n = $("<div/>").appendTo(t),
                    i = $.fn.modal.Constructor,
                    r = $.support.transition,
                    a = $('<div class="modal-backdrop loader loading fade"/>').appendTo(t),
                    o = function (e) {
                        var t = $(e.target),
                            i = t.data("bs.modal");
                        if (i && i.ignoreBackdropClick) return void (i.ignoreBackdropClick = !1);
                        if (t.hasClass("loader") || t.hasClass("modal")) {
                            var r = $(".modal:visible").data("dialogOptions") || {};
                            "static" != r.backdrop && n.children(".modal").modal("hide")
                        }
                    };
                a.on("click", o), r && a[0].offsetWidth, a.addClass("in"), r && a.one("bsTransitionEnd").emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION), n.load(e, function (e, t, r) {
                    if ("error" == t) {
                        try {
                            var s = $.parseJSON(e);
                            "error" == s.status ? AjaxDialog.displayNotifications(s, n) : alert("Error loading dialog")
                        } catch (l) {
                            alert("Error loading dialog")
                        }
                        return void a.remove()
                    }
                    var c = function () {
                        a.removeClass("in"), $.support.transition && a.one("bsTransitionEnd").emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION)
                    },
                        u = function (e) {
                            e.target == e.delegateTarget && (a.remove(), n.remove())
                        },
                        d = function (e) {
                            a.removeClass("loading")
                        },
                        h = $(this).children(".modal").first();
                    h.on("hide.bs.modal", c).on("hidden.bs.modal", u).on("shown.bs.modal", d).modal({
                        backdrop: !1
                    }).on("click", o);
                    var f = h.data("dialog-options") || {};
                    h.bind("ajax:beforeSend", function () {
                        AjaxDialog._startDisableWith($(this))
                    }), void 0 === f.nobindform && void 0 !== h.find("form").data("remote") ? h.on("ajax:success", function (e, t, n, i) {
                        var r = $(this),
                            a = !0;
                        if ($.isPlainObject(t)) {
                            if ("close" == t.action) t.close = !0;
                            else if ("replace" == t.action) t.selector ? ($(t.selector).replaceWith(t.html), t.animate && (o = $(t.selector), o.before("<div/>"), o.prev().width(o.width()).height(o.height()).css({
                                position: "absolute",
                                "background-color": "#ffff99",
                                opacity: ".7"
                            }).fadeOut(1e3))) : r.find(".modal-body").html(t.html);
                            else if ("redirect" == t.action) window.location = t.url, a = !1;
                            else if ("reload" == t.action) t.alert && alert(t.alert), window.location.reload(!0), a = !1;
                            else if ("append" == t.action)
                                if (t.animate) {
                                    var o = $(t.html).css({
                                        opacity: 0
                                    });
                                    $(t.selector).append(o), o.animate({
                                        opacity: 1
                                    })
                                } else $(t.selector).append(t.html);
                            t.close && r.closest(".modal").modal("hide"), AjaxDialog.displayNotifications(t, h), AjaxDialog.callGlobalHook("response", h, t, n, f), AjaxDialog.hasHook("response", f.responseHook) && AjaxDialog.callHook("response", f.responseHook, h, t, n, f), a && AjaxDialog._stopDisableWith($(this))
                        }
                    }) : h.bind("ajax:success", function () {
                        AjaxDialog._stopDisableWith($(this))
                    }), h.on("ajax:error", function (e, t, n, i) {
                        console.log("Ajax Failure:", arguments);
                        try {
                            var r = $.parseJSON(t.responseText);
                            "reload" == r.action ? (r.alert && alert(r.alert), window.location.reload(!0)) : AjaxDialog.displayNotifications(r, h)
                        } catch (a) {
                            AjaxDialog.displayNotifications({
                                alert: "Unexpected error occurred."
                            }, h)
                        }
                        AjaxDialog._stopDisableWith($(this))
                    }), AjaxDialog.callGlobalHook("setup", h, f), AjaxDialog.hasHook("setup", f.setupHook) && AjaxDialog.callHook("setup", f.setupHook, h, f)
                })
            },
            displayNotifications: function (e, t) {
                AjaxDialog.callPlugins("notification", !0, e, t)
            }
        }, AjaxDialog.plugins.notificationDiv = {
            notification: function (e, t) {
                var n = $(".notification-area", t);
                if (0 == n.length || e.close) {
                    var i = $(".notification-area");
                    n = i.not(n)
                }
                if (n.length) {
                    var r = n.find(".message");
                    0 == r.length && (r = n);
                    var a = null;
                    return e.alert ? (n.removeClass("alert-info").addClass("alert alert-danger"), a = e.alert) : e.notice && (n.removeClass("alert-danger").addClass("alert alert-info"), a = e.notice), a ? (r.text(a), n.hasClass("collapse") ? n.collapse("show") : n.hasClass("hidden") ? n.removeClass("hidden").addClass("show") : n.show()) : n.hasClass("collapse") ? n.collapse("hide") : n.hasClass("show") ? n.removeClass("show").addClass("hidden") : n.hide(), !0
                }
                return !1
            }
        }, AjaxDialog.plugins.growl = {
            notification: function (e, t) {
                var n, i;
                if (e.alert ? (n = e.alert, i = {
                    header: '<i class="fa fa-info-circle"></i> Alert',
                    life: 5e3
                }) : e.notice && (n = e.notice, i = {
                    header: '<i class="fa fa-info-circle"></i> Notice',
                    life: 5e3
                }), n && $.jGrowl) {
                    var r = HubstaffUtils.escapeHTML(n);
                    return $.jGrowl(r, i), !0
                }
                return !1
            }
        }, AjaxDialog.plugins.browser = {
            notification: function (e, t) {
                return e.alert ? (alert(e.alert), !0) : e.notice ? !0 : !1
            }
        }
    }(), $(function () {
        AjaxDialog.setup()
    }), AjaxDialog.registerPlugins("notification", ["growl", "browser"]), $(function () {
        $(document).on("click", ".action-dialog", function (e) {
            if (e.preventDefault(), $(this).is("[disabled]")) return void e.stopImmediatePropagation();
            var t = $(this).attr("href");
            AjaxDialog.run(t)
        })
    }), window.TimeUtils = {
        Formats: {
            date: {
                mdy: "M/D/YYYY",
                dmy: "D/M/YYYY",
                ymd: "YYYY/M/D",
                iso: "YYYY-MM-DD",
                pretty: "ddd, MMM D, YYYY"
            },
            time: {
                "12hr": "h:mm A",
                "24hr": "HH:mm",
                "12hr_with_seconds": "h:mm:ss A",
                "24hr_with_seconds": "HH:mm:ss"
            },
            time_seconds: {
                "12hr": "h:mm:ss A",
                "24hr": "HH:mm:ss",
                "12hr_with_seconds": "h:mm:ss A",
                "24hr_with_seconds": "HH:mm:ss"
            },
            time_without_seconds: {
                "12hr": "h:mm A",
                "24hr": "HH:mm",
                "12hr_with_seconds": "h:mm A",
                "24hr_with_seconds": "HH:mm"
            },
            duration: {}
        },
        InternalFormats: {
            datetime: "YYYY-MM-DD HH:mm:ss",
            date: "YYYY-MM-DD",
            time: "HH:mm:ss"
        },
        DefaultTimeFormats: {
            date: "pretty",
            time: "12hr",
            duration: "hms"
        },
        UserTimeFormats: {},
        format_for: function (e, t) {
            if (void 0 === t) {
                var n = e;
                ("time_seconds" === e || "time_without_seconds" === e) && (n = "time"), t = TimeUtils.UserTimeFormats[n] || TimeUtils.DefaultTimeFormats[n]
            }
            return TimeUtils.Formats[e][t] || t
        },
        parse_internal_datetime: function (e) {
            if (moment.isMoment(e)) return e;
            e && (e = e.trim());
            var t = moment(e, TimeUtils.InternalFormats.datetime);
            return t.isValid() ? t : void 0
        },
        parse_internal_date: function (e) {
            if (moment.isMoment(e)) return e;
            e && (e = e.trim());
            var t = moment(e, TimeUtils.InternalFormats.date);
            return t.isValid() ? t : void 0
        },
        parse_internal_time: function (e) {
            if (moment.isMoment(e)) return e;
            e && (e = e.trim());
            var t = moment(e, TimeUtils.InternalFormats.time);
            return t.isValid() ? t : void 0
        },
        format_internal_date: function (e) {
            return e ? e.format(TimeUtils.InternalFormats.date) : null
        },
        format_internal_time: function (e) {
            return e ? e.format(TimeUtils.InternalFormats.time) : null
        },
        format_internal_datetime: function (e) {
            return e ? e.format(TimeUtils.InternalFormats.datetime) : null
        },
        format_date: function (e) {
            if (!e) return null;
            var t = TimeUtils.format_for("date"),
                n = e.format(t);
            return -1 === moment(n, t).inspect().indexOf("invalid") ? n : null
        },
        format_time: function (e, t) {
            if (!e) return null;
            var n = "time";
            t === !1 ? n = "time_without_seconds" : t === !0 ? n = "time_seconds" : "auto" === t && (n = e.seconds() > 0 ? "time_seconds" : "time");
            var i = TimeUtils.format_for(n),
                r = e.format(i);
            return -1 === moment(r, i).inspect().indexOf("invalid") ? r.toLowerCase() : null;
        },
        format_duration: function (e, t, n) {
            if ("number" == typeof e && (e = moment.duration(e, "seconds")), !moment.isDuration(e) || !e.isValid()) return n ? n : null;
            if (0 === e.asSeconds() && n) return n;
            var i = TimeUtils.format_for("duration");
            if ("decimal" === i) return e.asHours().toFixed(2);
            var r, a, o, s, l, c, u, d = "";
            e = e.clone(), r = e.asSeconds(), 0 > r && (d = "-", e = moment.duration(Math.abs(r), "seconds")), a = Math.floor(e.asHours()), e.subtract({
                hours: a
            }), o = Math.floor(e.asMinutes()), e.subtract({
                minutes: o
            }), s = Math.floor(e.asSeconds()), l = a.toString(), c = (10 > o ? "0" : "") + o.toString(), u = (10 > s ? "0" : "") + s.toString();
            var h = !1;
            return t === !1 ? h = !1 : t === !0 || "hms" === i ? h = !0 : "auto" === t && (h = s > 0), d + l + ":" + c + (h ? ":" + u : "")
        },
        format_datetime: function (e, t) {
            var n = TimeUtils.format_date(e),
                i = TimeUtils.format_time(e, t);
            return n + " " + i
        },
        format_datetime_range: function (e, t, n, i) {
            if (e && t) {
                "undefined" == typeof i && (i = !1);
                var r, a = TimeUtils.format_date(e),
                    o = TimeUtils.format_time(e, n),
                    s = TimeUtils.format_date(t),
                    l = TimeUtils.format_time(t, n),
                    c = a + " " + o;
                return r = i && a === s ? l : s + " " + l, c + " - " + r
            }
            return "N/A - N/A"
        }
    },
    function () {
        var e = {
            HOUR_PATTERN: "(\\d+)\\s*(hours|hour|h)",
            MINUTE_PATTERN: "(\\d+)\\s*(minutes|minute|min|m)",
            SPACE_MATCHER: /\s+/g
        };
        e.COMBINED_MATCHER = new RegExp("^" + e.HOUR_PATTERN + "\\s" + e.MINUTE_PATTERN + "?$", "i"), e.DURATION_PATTERNS = [{
            matcher: e.COMBINED_MATCHER,
            hour_pos: 1,
            minute_pos: 3
        }, {
            matcher: new RegExp("^" + e.HOUR_PATTERN + "$", "i"),
            hour_pos: 1
        }, {
            matcher: new RegExp("^" + e.MINUTE_PATTERN + "$", "i"),
            minute_pos: 1
        }, {
            matcher: /^(\d+)$/,
            hour_pos: 1
        }, {
            matcher: /^(\d+):(\d{1,2})$/,
            hour_pos: 1,
            minute_pos: 2
        }, {
            matcher: /^(\d+):(\d{1,2}):(\d{1,2})$/,
            hour_pos: 1,
            minute_pos: 2,
            second_pos: 3
        }, {
            matcher: /^(\d+)[.,](\d+)?$/,
            hour_pos: 1,
            minute_pos: 2,
            decimal: !0
        }, {
            matcher: /^\.(\d+)$/,
            minute_pos: 1,
            decimal: !0
        }, {
            matcher: /^:(\d{1,2})$/,
            minute_pos: 1
        }, {
            matcher: /^:(\d{1,2}):(\d{1,2})$/,
            minute_pos: 1,
            second_pos: 2
        }], e.TIME_PATTERNS = [{
            matcher: /([0-2]{0,1}[0-9])\.([0-9]+)?\s*([aApP][mM]*)?/,
            hour_pos: 1,
            minute_pos: 2,
            meridian_pos: 3,
            decimal: !0
        }], window.TimeInput = {
            patterns: e,
            _construct_time_params: function (e, t) {
                var n = e.match(t.matcher);
                if (n && n[0] === e) {
                    var i = "",
                        r = "",
                        a = "",
                        o = {
                            hours: 0,
                            minutes: 0,
                            meridian: void 0
                        };
                    if (t.hour_pos && (i = n[t.hour_pos], o.hours = parseInt(i)), t.decimal) {
                        if (t.minute_pos) {
                            r = n[t.minute_pos];
                            var s = 60 * parseFloat("0." + r);
                            o.minutes = Math.floor(s), o.seconds = 60 * (s - o.minutes)
                        }
                    } else t.minute_pos && (r = n[t.minute_pos], o.minutes = parseInt(r)), t.second_pos && (a = n[t.second_pos], o.seconds = parseInt(a));
                    return t.meridian_pos && (o.meridian = n[t.meridian_pos]), o
                }
            },
            parse_duration: function (t) {
                for (var n = t.trim().replace(e.SPACE_MATCHER, " "), i = e.DURATION_PATTERNS, r = 0; r < i.length; ++r) {
                    var a = TimeInput._construct_time_params(n, i[r]);
                    if (a) return moment.duration(a)
                }
            },
            parse_date: function (e) {
                var t = e.trim(),
                    n = moment(t, ["YYYY-MM-DD", "M/D/YYYY", "D/M/YYYY", "YYYY/M/D", "YYYY-MM-DD", "ddd, MMM D, YYYY"], !0);
                return n.isValid() ? n : void 0
            },
            parse_time: function (t) {
                var n, i = t.trim().replace(e.SPACE_MATCHER, " "),
                    r = moment(i, ["H", "HH", "H:m", "H:mA", "h:m A", "H:m:s", "H:m:sA", "H:m:s A", "Ha", "H a", "Hm", "hm"], !0);
                if (r.isValid()) return r;
                for (var a = e.TIME_PATTERNS, o = 0; o < a.length && !(n = TimeInput._construct_time_params(i, a[o])); ++o);
                if (n) {
                    var s = n.meridian || "";
                    if (r = n.seconds ? moment(n.hours + ":" + n.minutes + ":" + n.seconds + " " + s, "H:m:s a") : moment(n.hours + ":" + n.minutes + " " + s, "H:m a"), r.isValid()) return r
                }
            }
        }
    }(), $.fn.select2.defaults.set("theme", "bootstrap"), select2Callbacks = {
        callbacks: {},
        register: function (e, t) {
            return this.callbacks[e] = t, this
        },
        find: function (e) {
            return this.callbacks[e]
        }
    }, select2Callbacks.register("timeZoneSelectSelection", function (e, t) {
        if (e.element) {
            var n = $(e.element).data("timeZone") || "";
            return e.text + " (" + n + ")"
        }
        return e.text
    }).register("timeZoneSelectResult", function (e, t) {
        if (e.element) {
            var n = $("<span/>").text(e.text),
                i = $('<sub class="time_zone"/>').text($(e.element).data("timeZone"));
            return $("<span/>").append(n, i)
        }
        return e.text
    }).register("timeZoneSelectSearch", function (e, t) {
        var n = $.trim(e.term).toUpperCase();
        if ("" === n) return t;
        var i = "";
        t.element && (i = ($(t.element).data("timeZone") || "").toUpperCase());
        var r = t.text.toUpperCase();
        return r.indexOf(n) > -1 || i.indexOf(n) > -1 ? t : null
    }).register("descriptionSelectResult", function (e, t) {
        if (e.element) {
            var n = $(e.element),
                i = $("<span/>").text(e.text);
            if (n.data("suffix")) {
                var r = $('<span class="suffix"/>').text(n.data("suffix"));
                i.append(r)
            }
            var a = $('<sub class="description"/>').text(n.data("description"));
            return $("<span/>").append(i, a)
        }
        return e.text
    }).register("textWithIconSelectResult", function (e, t) {
        if (e.element) {
            var n = $('<span class="text"/>').text(e.text),
                i = $('<span class="icon"/>').html($(e.element).data("icon"));
            return $('<div class="text-with-icon"/>').append(n, i)
        }
        return e.text
    }).register("textWithIconSelectSelection", function (e, t) {
        if (e.element) {
            var n = $('<span class="text"/>').text(e.text),
                i = $('<span class="icon selection"/>').html($(e.element).data("icon"));
            return $('<div class="text-with-icon"/>').append(n, i)
        }
        return e.text
    }).register("customPillSelection", function (e, t) {
        return e["data-type"] && t.addClass("selection-" + e["data-type"]), e["data-hint"] && t.tooltip({
            title: e["data-hint"],
            placement: "auto bottom",
            container: "body",
            trigger: "hover"
        }), e.text
    }), AjaxDialog.registerGlobalHook("setup", function () {
        setupForms(this)
    }), AjaxDialog.registerGlobalHook("response", function (e) {
        "replace" == e.action && setupForms(this)
    }), $(function () {
        setupForms(void 0)
    }), FormHelpers = {
        setError: function (e, t, n) {
            var i = $(e),
                r = i.closest(".block-form-group, .form-group");
            if (r.length > 0) {
                r.addClass("has-error"), n || r.attr("data-invalid", "true"), r.find("span.help-block").remove();
                var a = $('<span class="help-block"></span>');
                a.text(t), i.after(a)
            }
        },
        withErrors: function (e) {
            return e.find('*[data-invalid="true"]') || e.is('*[data-invalid="true"]')
        },
        blockForm: function (e) {
            var t = $(e).closest("form");
            t.attr("data-invalid", "true")
        },
        unblockForm: function (e) {
            var t = $(e).closest("form");
            t.removeAttr("data-invalid")
        },
        clearError: function (e) {
            var t = $(e).closest(".block-form-group, .form-group");
            t.length > 0 && (t.removeAttr("data-invalid"), t.removeClass("has-error"), t.find("span.help-block").remove())
        }
    }, $(function () {
        $(".video-modal").on("show", function () {
            var e = $(this).data("videoUrl");
            $(this).find(".video").html('<iframe src="' + e + '" frameborder="0" allowfullscreen></iframe>')
        }).on("hidden", function () {
            $(this).find(".video").html("")
        })
    }), $(function () {
        $(".iscroll").infinitePages({
            buffer: 30,
            loading: function () {
                $.rails.disableElement($(this))
            },
            success: function () {
                $.rails.enableElement($(this))
            }
        })
    }), $(function () {
        if ($(".nested_form").length) {
            var e = $(".nested_form").last().clone(),
                t = function () {
                    var t = $(".nested_form").last(),
                        n = $(e).clone(),
                        i = $('input[name^="organization[projects_attributes]"]').map(function () {
                            return $(this).attr("name").charAt(34)
                        }).get(),
                        r = Math.max.apply(Math, i) + 1;
                    if ($(n).find("label[for]").each(function () {
                        var e = $(this).attr("for"),
                            t = e.replace(new RegExp(/_[0-9]+_/), "_" + r + "_");
                        $(this).attr("for", t);
                        var n = $(this).text().split("(")[0];
                        $(this).text(n)
                    }), $(n).find("select, input").each(function () {
                        var e = $(this),
                            t = e.attr("id"),
                            n = t.replace(new RegExp(/_[0-9]+_/), "_" + r + "_");
                        e.attr("id", n);
                        var i = e.attr("name"),
                            a = i.replace(new RegExp(/\[[0-9]+\]/), "[" + r + "]");
                        e.attr("name", a), e.val(""), e.removeClass("flying-trigger required"), e.prop("required", !1), e.removeAttr("required aria-required")
                    }), $(n).removeClass("has-error"), $(n).find(".help-block").remove(), $(n).insertAfter(t), $(".duplicate_nested_form_link").data("updateBg")) {
                        var a = $(".nested_form").map(function () {
                            return $(this).data("formKey")
                        }).get(),
                            o = Math.max.apply(Math, a) + 1;
                        n.data("formKey", o), OrganizationWizard.updateDynamicFields($(".welcome-layout"), {
                            action: "add",
                            formKey: o
                        })
                    }
                };
            $(".duplicate_nested_form_link").click(function (e) {
                e.preventDefault();
                var n = $(this).data("maxProjects");
                return void 0 !== n && $(".nested_form").length >= n ? void alert("You can only create " + n + " projects at once") : void t()
            })
        }
        $("form.interactive-projects-form").on("click", ".remove_project_field", function (e) {
            e.preventDefault();
            var t = $(this).closest(".nested_form").data("formKey");
            OrganizationWizard.updateDynamicFields($(".welcome-layout"), {
                action: "remove",
                formKey: t
            }), $(this).closest(".nested_form").find("input").attr("value", ""), $(this).closest(".nested_form").remove()
        })
    }),
    function () {
        $(document).on("ajax:beforeSend", ".ajax-spinner", function () {
            var e = $(this),
                t = e.closest("td, .actions").find(".ajax-action-spinner");
            t.removeClass("hi-check"), t.addClass("hi-spinner"), t.removeClass("invisible")
        }).on("ajax:complete", ".ajax-spinner", function () {
            var e = $(this);
            e.closest("td, .actions").find(".ajax-action-spinner")
        }).on("ajax:success", ".ajax-spinner", function () {
            var e = $(this),
                t = e.closest("td, .actions").find(".ajax-action-spinner");
            t.removeClass("hi-spinner"), t.addClass("hi-check"), t.delay(1200).queue(function (e) {
                t.addClass("invisible"), e()
            })
        }).on("ajax:error", ".ajax-spinner", function (e, t) {
            var n = $(this),
                i = n.closest("td, .actions").find(".ajax-action-spinner");
            i.removeClass("hi-spinner"), t.responseJSON && AjaxDialog.displayNotifications(t.responseJSON)
        })
    }(), $(function () {
        var e = window.location.hash.replace("#", "").split("_"),
            t = e.shift(),
            n = e.join("_");
        "click" == t && n.length > 0 && $("#" + n).click()
    }), $(function () {
        var e = $("body");
        e.on("touchstart.dropdown", ".dropdown-menu", function (e) {
            e.stopPropagation()
        }), e.on("touchstart.dropdown-submenu", ".dropdown-menu a.stop", function (e) {
            e.preventDefault()
        })
    }),
    function (e, t) {
        e.fn.replaceOptions = function (t) {
            var n, i;
            this.empty(), n = this, e.each(t, function (t, r) {
                i = e("<option></option>").attr("value", r[1]).text(r[0]), n.append(i)
            })
        }
    }(jQuery, window), $(document).ready(function () {
        is_touch_device() ? $("body").addClass("touch") : $("body").addClass("no-touch")
    }), toMomentWeekday.invertServerWeekdays = {
        0: 1,
        1: 2,
        2: 3,
        3: 4,
        4: 5,
        5: 6,
        6: 0
    }, toMomentIsoWeekday.invertServerWeekdays = {
        0: 1,
        1: 2,
        2: 3,
        3: 4,
        4: 5,
        5: 6,
        6: 7
    };
var HubstaffSidebar = function (e) {
    return {
        closeOpenMenus: function () {
            e(".sidebar-main-link").removeClass("is-triggered"), e(".sidebar-wrapper").trigger("close.overflowing.menu"), e(".sidebar-subnav-wrapper").trigger("hide.bs.collapse").removeAttr("style")
        },
        initMobileSidebarToggle: function () {
            var t = this,
                n = e("body");
            e(".js-mobile-sidebar-toggle").on("click", function (i) {
                i.preventDefault(), i.stopPropagation(), n.hasClass("full-sidebar") ? (n.removeClass("full-sidebar"), e(".sidebar-wrapper").addClass("hidden-xs")) : (n.addClass("full-sidebar"), e(".sidebar-wrapper").removeClass("hidden-xs"), e(".sidebar-brand-big").removeClass("hidden"), e(".sidebar-brand-small").addClass("hidden")), t.closeOpenMenus()
            })
        },
        adjustSidebar: function (t, n, i, r) {
            if (e(t + ":visible").length) {
                var a = e("body"),
                    o = e(".sidebar-brand-big"),
                    s = e(".sidebar-brand-small"),
                    l = e(t + " i"),
                    c = r ? "addClass" : "removeClass",
                    u = r ? "removeClass" : "addClass";
                l.removeClass("hi-" + (n ? "left" : "right") + "-arrow-heavy"), l.addClass("hi-" + (n ? "right" : "left") + "-arrow-heavy"), o[n ? "addClass" : "removeClass"]("hidden"), s[n ? "removeClass" : "addClass"]("hidden"), a[n ? c : u](i)
            }
        },
        initDesktopSidebarSizeToggle: function () {
            var t = this,
                n = 1 === parseInt(e.cookie("sidebar_collapsed")),
                i = ".js-size-sidebar-toggle",
                r = "sidebar-collapsed",
                a = !0;
            HubstaffSidebar.adjustSidebar(i, n, r, a), e(window).resize(function () {
                HubstaffSidebar.adjustSidebar(i, n, r, a)
            }), e(i).on("click", function (o) {
                o.preventDefault(), o.stopPropagation(), n = Number(!n), e.cookie("sidebar_collapsed", n, {
                    path: "/",
                    SameSite: "Lax"
                }), t.closeOpenMenus(), HubstaffSidebar.adjustSidebar(i, n, r, a)
            })
        },
        initTabletSidebarSizeToggle: function () {
            var t = this,
                n = 1 === parseInt(e.cookie("sidebar_tablet_expanded")),
                i = ".js-tablet-size-sidebar-toggle",
                r = "tablet-sidebar-expanded",
                a = !1;
            HubstaffSidebar.adjustSidebar(i, !n, r, a), e(window).resize(function () {
                HubstaffSidebar.adjustSidebar(i, !n, r, a)
            }), e(i).on("click", function (o) {
                o.preventDefault(), o.stopPropagation(), n = Number(!n), HubstaffSidebar.adjustSidebar(i, !n, r, a), e.cookie("sidebar_tablet_expanded", n, {
                    path: "/",
                    SameSite: "Lax"
                }), t.closeOpenMenus()
            })
        },
        initSubmenuToggle: function () {
            var t = e(".sidebar-nav").find(".sidebar-main-link > .sidebar-main-link-inner > button.sidebar-nav-toggle");
            if (t.length) {
                var n = this;
                Array.from(t).forEach(function (t) {
                    e(t).on("click", function (t) {
                        const i = e(t.target).closest(".sidebar-main-link");
                        i && n.toggleNested(i, !0)
                    })
                })
            }
        },
        setActiveClasses: function () {
            this.prepareElements();
            var t = window.location.pathname,
                n = this.findActiveElements(document, t);
            if (n) {
                var i = n.closest("*[data-nested-level='0']"),
                    r = e(i).find(".sidebar-main-link-inner"),
                    a = e(r).find(".sidebar-nav-toggle").length;
                if (n) {
                    var o = e(n).closest(".sidebar-main-link");
                    e(n).addClass("active"), e(o).addClass("active"), e(o).find(".sidebar-main-link-inner").addClass("active"), e(o).find(".sidebar-main-link-inner").find(".sidebar-link").addClass("active"), a && this.toggleNested(i)
                }
            }
        },
        setCollapsedListener: function (t) {
            var n = e(t).find(".js-tablet-menu-trigger"),
                i = this,
                r = e(".sidebar-wrapper"),
                a = e(n).closest(".sidebar-main-link");
            e(t).find(".sidebar-subnav-wrapper").addClass("collapse"), e(n).on("click", function (e) {
                return r.hasClass("has-sidebar-dropdown-triggered") && a.hasClass("is-triggered") ? (a.removeClass("is-triggered"), void r.removeClass("has-sidebar-dropdown-triggered")) : r.hasClass("has-sidebar-dropdown-triggered") || a.hasClass("is-triggered") ? void (r.hasClass("has-sidebar-dropdown-triggered") && !a.hasClass("is-triggered") && (i.closeOpenMenus(), a.addClass("is-triggered"))) : (a.addClass("is-triggered"), void r.addClass("has-sidebar-dropdown-triggered"))
            })
        },
        prepareElements: function () {
            var t = this,
                n = e(document).find("ul.sidebar-nav"),
                i = e(n).find("li.sidebar-main-link");
            Array.from(i).forEach(function (n) {
                e(n).attr("data-nested-level", 0);
                var i = e(n).find(".sidebar-main-link-inner"),
                    r = e(i).find(".sidebar-nav-toggle").length;
                r && t.setCollapsedListener(n)
            })
        },
        findActiveElements: function (t, n) {
            var i = this.modifyPath(n),
                r = e(t).find(".sidebar-link"),
                a = Array.from(r).filter(function (t) {
                    if ("A" === t.tagName) return i === t.getAttribute("href");
                    if ("LI" === t.tagName) {
                        var n = e(t).find("a")[0];
                        return i === n.getAttribute("href")
                    }
                });
            return a[a.length - 1]
        },
        toggleNested: function (t, n) {
            n && e(t).find(".sidebar-subnav-wrapper").animate({
                height: "toggle"
            }, 200), e(t).find(".sidebar-subnav-wrapper").toggleClass("in"), e(t).find("button.sidebar-nav-toggle").toggleClass("collapsed")
        },
        modifyPath: function (e) {
            function t(t, n) {
                var r = e.split("/"),
                    a = i[n][r.slice(3).join("/")];
                return void 0 !== a && (t = "/" + r[1] + "/" + r[2] + i[n][r.slice(3).join("/")]), t
            }
            var n = e,
                i = {
                    dashboard: {
                        team: "",
                        me: ""
                    },
                    organizations: {
                        "time_entries/daily": "/time_entries",
                        "time_entries/weekly": "/time_entries",
                        "time_entries/calendar": "/time_entries",
                        "team_payments/timesheets": "/team_payments",
                        "team_payments/bonus": "/team_payments",
                        team_invoices: "/client_invoices"
                    },
                    settings: {
                        "settings/projects": "/settings/organization",
                        "settings/timer_apps": "/settings/organization",
                        "settings/quickbooks": "/settings/organization",
                        "settings/product_links": "/settings/organization",
                        "settings/sso": "/settings/organization",
                        "settings/2fa": "/settings/organization",
                        "settings/activity/client_app_and_url_tracking": "/settings/activity",
                        "settings/activity/client_screenshot_frequency": "/settings/activity",
                        "settings/activity/client_screenshot_blur": "/settings/activity",
                        "settings/activity/delete_screens_allowed": "/settings/activity",
                        "settings/activity/monitor_user_activity": "/settings/activity",
                        "settings/insights": "/settings/activity",
                        "settings/timesheets": "/settings/activity",
                        "settings/timesheets/modify_time_allowed": "/settings/activity",
                        "settings/timesheets/reason_field_required": "/settings/activity",
                        "settings/invoices": "/settings/activity",
                        "settings/calendar": "/settings/activity",
                        "settings/calendar/calendar_type_collaborative": "/settings/activity",
                        "settings/calendar/attendance_schedule_email_alerts": "/settings/activity",
                        "settings/calendar/late_shift_grace_period": "/settings/activity",
                        "settings/time_off": "/settings/activity",
                        "settings/holidays": "/settings/activity",
                        "settings/time_off_balances": "/settings/activity",
                        "time_off_policies/archived": "/settings/activity",
                        "settings/map": "/settings/activity",
                        "settings/map/location_tracking": "/settings/activity",
                        "settings/job_sites": "/settings/activity",
                        "settings/job_sites/restrict_track_to_sites": "/settings/activity",
                        "settings/job_sites/job_site_notifications": "/settings/activity",
                        "settings/payments": "/settings/activity",
                        "settings/achievements": "/settings/activity",
                        "settings/achievements/eddeciency_pri": "/settings/activity",
                        "settings/achievements/productivity_champ": "/settings/activity",
                        "settings/achievements/time_hero": "/settings/activity",
                        "settings/work_breaks": "/settings/activity",
                        work_break_policies: "/settings/activity",
                        "work_break_policies/notifications": "/settings/activity",
                        "settings/overtime": "/settings/activity",
                        "integrations/new": "/settings/activity"
                    }
                };
            return -1 !== e.indexOf("dashboard") && (n = t(n, "dashboard")), -1 !== e.indexOf("organizations") && (n = t(n, "organizations")), -1 !== e.indexOf("reports") && ["/team", "/me", "/my"].forEach(function (e) {
                -1 !== n.indexOf(e) && (n = n.replace(e, ""))
            }), ["settings", "time_off_policies/archived", "work_break_policies"].some(function (t) {
                return -1 !== e.indexOf(t)
            }) && (n = t(n, "settings")), -1 !== e.indexOf("integrations") && (n = n.replace("/new", "")), n
        },
        initMain: function () {
            e(function () {
                HubstaffSidebar.initMobileSidebarToggle(), HubstaffSidebar.initDesktopSidebarSizeToggle(), HubstaffSidebar.initTabletSidebarSizeToggle(), HubstaffSidebar.initSubmenuToggle(), HubstaffSidebar.setActiveClasses()
            })
        }
    }
}(jQuery);
$(function () {
    HubstaffSidebar.initMain()
}), window.ClientUtils = {
    setup_organization_note_checkbox: function (e) {
        e.find("#client_use_organization_notes").on("click", function () {
            var t = e.find("#client_invoice_notes"),
                n = $(this),
                i = e.find("#default_notes").data("organization-notes"),
                r = e.find("#default_notes").data("client-notes");
            n.prop("checked") ? (t.val(i), t.prop("readonly", !0), t.prop("placeholder", "(Organization notes not currently set)"), t.prop("name", ""), $("<input>").attr({
                type: "hidden",
                id: "hidden_client_invoice_notes",
                name: "client[invoice_notes]"
            }).appendTo(t.parent())) : (r && "" !== r ? t.val(r) : t.val(""), t.prop("readonly", !1), t.prop("placeholder", "Enter notes to client"), t.prop("name", "client[invoice_notes]"), e.find("#hidden_client_invoice_notes").remove())
        })
    },
    setup_net_terms_checkbox: function (e) {
        e.find("#client_use_organization_net_terms").on("click", function () {
            var t = e.find("#client_net_terms"),
                n = $(this),
                i = e.find("#default_net_terms").data("organization-net-terms"),
                r = e.find("#default_net_terms").data("client-net-terms");
            n.prop("checked") ? (t.val(i), t.prop("readonly", !0), t.prop("name", ""), $("<input>").attr({
                type: "hidden",
                id: "hidden_client_net_terms",
                name: "client[net_terms]"
            }).appendTo(t.parent())) : (r && "" !== r ? t.val(r) : t.val(""), t.prop("readonly", !1), t.prop("name", "client[net_terms]"), e.find("#hidden_client_net_terms").remove())
        })
    },
    add_new_client_to_selection: function (e) {
        function t(e) {
            if ("new_client" === e.id) {
                var t = $('<div class="dropdown-new-item"></div>');
                return t.text(e.text), t
            }
            return e.text
        }
        var n = $(e),
            i = new Option("+ Add a client", "new_client", !1, !1);
        i.setAttribute("data-select2-countable", "false"), n.append(i).trigger("change"), n.select2({
            templateResult: t,
            width: "100%"
        }).on("select2:selecting", function (e) {
            "new_client" === e.params.args.data.id && (e.preventDefault(), e.stopPropagation(), n.select2("close"), AjaxDialog.run(n.data("create-url")), AjaxDialog.registerHook("response", "newClientResponse", function (e) {
                if ("success" === e.status) {
                    var t = new Option(e.name, e.id, !0, !0);
                    n.prepend(t).trigger("change")
                } else AjaxDialog.displayNotifications({
                    alert: e.message
                })
            }))
        })
    },
    setup_phone_input: function (e) {
        $formatted_input = e.find("#client_formatted_phone"), $hidden_input = e.find("#client_phone"), $formatted_input.intlTelInput({
            defaultCountry: "us",
            preferredCountries: ["us"],
            nationalMode: !1,
            utilsScript: "https://server-assets.hubstaff.com/e007f7ae/intl-tel-input/utils-b2edb0a9e072bd16d20ed5dbde35dcd3b86d71ae32893c9c3a1ea9401e2e7b2f.js"
        }), e.find("form").submit(function () {
            $hidden_input.val($formatted_input.intlTelInput("getNumber"))
        })
    }
}, window.BudgetableUtils = {
    handleBudgetTypeChange: function (e) {
        var t = $(".form-col.cost"),
            n = $(".form-col.hours"),
            i = $(".form-col.based-on");
        t.toggleClass("hidden"), n.toggleClass("hidden"), i.toggleClass("hidden")
    },
    handleBudgetRecurrenceChange: function (e) {
        var t = $(e.target),
            n = t.parents(".modal"),
            i = n.find('[name$="[budget_attributes][start_date]"]').parent();
        "" == t.val() ? i.removeClass("hidden") : i.addClass("hidden")
    },
    handleBudgetFormSubmit: function (e) {
        var t = $(e.target),
            n = t.parents(".modal"),
            i = n.find('[name$="[budget_attributes][recurrence]"]'),
            r = n.find("#warning_on_change_to_recurring").length > 0,
            a = n.find("#manage-budget-form"),
            o = !0;
        "" != i.val() && r && (o = confirm("Changing to a monthly budget will remove the previous budget. Are you sure?")), o && a.submit()
    },
    setupBudgetFormFields: function () {
        var e = $('[name$="[budget_attributes][type]"]').val(),
            t = $(".form-col.cost"),
            n = $(".form-col.hours"),
            i = $(".form-col.based-on"),
            r = $('[name$="[budget_attributes][recurrence]"]').val(),
            a = $('[name$="[budget_attributes][start_date]"]').parent();
        1 == e ? n.removeClass("hidden") : (t.removeClass("hidden"), i.removeClass("hidden")), "" == r ? a.removeClass("hidden") : a.addClass("hidden")
    },
    limitBudgetAmount: function (e) {
        var t = e.prop("max");
        t && (e.keydown(function () {
            $(this).data("old", $(this).val())
        }), e.keyup(function () {
            var e = parseFloat($(this).val());
            (0 > e || e > t) && $(this).val($(this).data("old"))
        }))
    }
}, window.LimitsUtils = {
    handleLimitsByShiftsChange: function (e) {
        var t = $(e.target),
            n = t.parents(".modal"),
            i = n.find(".lbs_controls"),
            r = n.find(".rdr_controls");
        i.toggleClass("hidden"), r.toggleClass("hidden")
    },
    setRate: function (e) {
        var t = $("#currency-options"),
            n = t.data("options"),
            i = t.data("rate"),
            r = e.closest(".form-group").find(".help-block").children(".value"),
            a = e.val(),
            o = r.data("extra"),
            s = "No limit";
        if (a) {
            var l = parseFloat(a);
            if (isNaN(l) || 0 > l) s = "Invalid limit";
            else if (i) {
                var c = parseFloat(i) * l;
                s = c.formatMoney(n) + " " + o
            } else s = TimeUtils.format_duration(3600 * l, !1) + " hours " + o
        }
        r.text(s)
    },
    handleLimitsMultipleFormSubmit: function (e) {
        var t, n = $(e.target),
            i = n.parents(".modal"),
            r = i.find('input[name$="user_organization[daily_limit]"]'),
            a = i.find("#edit-limit-multiple-form"),
            o = !0,
            s = !1;
        if (r.length) {
            t = "daily";
            var l = i.find("#user_organization_limits_by_shifts");
            l.length && (s = l.is(":checked"))
        } else t = "weekly", r = i.find('input[name$="user_organization[weekly_limit]"]');
        if ("" === r.val() || s) {
            var c = "This will remove the " + t + " limit";
            s && (c += " and enable limits by shifts"), o = confirm(c + " for all selected members.\n\nAre you sure?")
        }
        o && a.submit()
    }
};
var DAYS = [
    [0, "Sunday"],
    [1, "Monday"],
    [2, "Tuesday"],
    [3, "Wednesday"],
    [4, "Thursday"],
    [5, "Friday"],
    [6, "Saturday"]
],
    JOB_REPEAT_TYPE = {
        Once: "once",
        Weekly: "weekly",
        Monthly: "monthly",
        Yearly: "yearly"
    },
    REPEAT_TYPES_MAP = {};
REPEAT_TYPES_MAP[JOB_REPEAT_TYPE.Weekly] = "week", REPEAT_TYPES_MAP[JOB_REPEAT_TYPE.Monthly] = "month", REPEAT_TYPES_MAP[JOB_REPEAT_TYPE.Yearly] = "year";
var ORDINALITIES = ["st", "nd", "rd", "th"];
window.RecurringScheduleUtils = {
    humanizeRecurringSchedule: function (e) {
        if (!e || !e.repeat_type) return null;
        var t = e.custom,
            n = e.interval,
            i = e.repeat_type;
        if (i === JOB_REPEAT_TYPE.Once) return null;
        var r = n > 1 ? n + " " : "",
            a = REPEAT_TYPES_MAP[i],
            o = a + (n > 1 ? "s" : ""),
            s = "Every " + r + o + " on";
        switch (i) {
            case JOB_REPEAT_TYPE.Weekly:
                var l = e.weekdays,
                    c = DAYS.reduce(function (e, t) {
                        return l.indexOf(t[0]) >= 0 && e.push(t[1]), e
                    }, []);
                return s + " " + c.join(", ");
            case JOB_REPEAT_TYPE.Monthly:
                var u = e.date,
                    d = e.monthday,
                    h = e.monthweekday,
                    f = e.monthweekdaynum;
                if (d) {
                    var p = moment(u);
                    return s + " the " + p.format("Do")
                }
                var m = DAYS[h][1],
                    g = f >= 0 ? ORDINALITIES[f] : "last",
                    v = f + 1,
                    y = "last" === g ? g + " " + m : v + g + " " + m;
                return s + " the " + y;
            case JOB_REPEAT_TYPE.Yearly:
                if (t) {
                    var b = e.date,
                        w = TimeUtils.parse_internal_date(b);
                    return s + " " + w.format("MMMM Do")
                }
                return null;
            default:
                throw new Error("[recurring-schedule]: unknown repeat_type '" + i + "'")
        }
    }
}, moment.fn.startOfIsoWeek = function (e) {
    void 0 === e && (e = 1), this.startOf("day");
    var t = this.isoWeekday();
    return e > t ? this.isoWeekday(e - 7) : this.isoWeekday(e), this
}, moment.fn.endOfIsoWeek = function (e) {
    return void 0 === e && (e = 1), this.startOfWeek(e).add(1, "week").subtract(1, "day")
}, moment.fn.startOfWeek = function (e) {
    void 0 === e && (e = 0), this.startOf("day");
    var t = this.day();
    return e > t ? this.day(e - 7) : this.day(e), this
}, moment.fn.endOfWeek = function (e) {
    return void 0 === e && (e = 0), this.startOfWeek(e).add(1, "week").subtract(1, "day")
}, $(document).ready(function () {
    function e(e) {
        var e;
        e = $(e).length ? $(e) : $("body");
        var t = e.find(".table-wrapper"),
            i = t.find(".scrollable");
        $.each(t, function () {
            var e = $(this).find(i);
            e && e.length && e[0].scrollWidth > e[0].offsetWidth && $(this).addClass("is-scrollable")
        }), i.off("scroll").on("scroll", function () {
            var e = $(this),
                t = $(this).closest(".table-wrapper");
            e[0].scrollWidth - e.scrollLeft() <= e.outerWidth() ? t.addClass("is-fully-scrolled") : t.removeClass("is-fully-scrolled"), e.scrollLeft() > 0 ? (n = $("body"), n.find(".vue-popover").parent().hide(), n.find(".tooltip").remove(), t.addClass("is-scrolled")) : t.removeClass("is-scrolled")
        })
    }
    $(window).load(function () {
        e()
    }), $(window).on("orientationchange", function () {
        e()
    }), $("body").on("shown.bs.modal", ".modal", function () {
        e(this)
    });
    var t, n = $("body");
    n.on("shown.bs.dropdown", ".table-wrapper .table-actions-dropdown", function () {
        var e = $(this).find(".dropdown-menu"),
            n = e.closest(".table-wrapper"),
            i = n.height() - (e.offset().top - n.offset().top),
            r = e.outerHeight() > i;
        t = n.css("margin-bottom"), r && n.css({
            height: n.height() + (e.outerHeight() - i) + 20,
            "margin-bottom": -1 * (e.outerHeight() - i)
        })
    }), n.on("hide.bs.dropdown", ".table-wrapper .table-actions-dropdown", function () {
        var e = $(this).find(".dropdown-menu"),
            n = e.closest(".table-wrapper");
        n.css({
            height: "auto",
            "margin-bottom": t
        })
    })
});
var _createClass = function () {
    function e(e, t) {
        for (var n = 0; n < t.length; n++) {
            var i = t[n];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
    }
    return function (t, n, i) {
        return n && e(t.prototype, n), i && e(t, i), t
    }
}();
! function (e) {
    var t = function () {
        function t(e) {
            _classCallCheck(this, t), this.$context = e
        }
        return _createClass(t, [{
            key: "check",
            value: function () {
                this.$context.find(":checkbox").filter(":not(:disabled)").filter(":visible").prop("checked", !0).trigger("change")
            }
        }, {
            key: "uncheck",
            value: function () {
                this.$context.find(":checkbox:visible").filter(":not(:disabled)").prop("checked", !1).trigger("change")
            }
        }, {
            key: "toggle",
            value: function () {
                this.$context.find(":checkbox:visible").filter(":not(:disabled)").each(function (t, n) {
                    var i = e(n);
                    i.prop("checked", !i.is(":checked"))
                }).trigger("change")
            }
        }, {
            key: "max",
            value: function (e) {
                var t = this;
                e > 0 ? ! function () {
                    var n = t;
                    t.$context.on("click.checkboxes.max", ":checkbox", function () {
                        n.$context.find(":checked").length === e ? n.$context.find(":checkbox:not(:checked)").prop("disabled", !0) : n.$context.find(":checkbox:not(:checked)").prop("disabled", !1)
                    })
                }() : this.$context.off("click.checkboxes.max")
            }
        }, {
            key: "range",
            value: function (t) {
                var n = this;
                t ? ! function () {
                    var t = n;
                    n.$context.on("click.checkboxes.range", ":checkbox", function (n) {
                        var i = e(n.target);
                        if (n.shiftKey && t.$last) {
                            var r = t.$context.find(":checkbox:visible"),
                                a = r.index(t.$last),
                                o = r.index(i),
                                s = Math.min(a, o),
                                l = Math.max(a, o) + 1;
                            r.slice(s, l).filter(":not(:disabled)").prop("checked", i.prop("checked")).trigger("change")
                        }
                        t.$last = i
                    })
                }() : this.$context.off("click.checkboxes.range")
            }
        }]), t
    }(),
        n = e.fn.checkboxes;
    e.fn.checkboxes = function (n) {
        var i = Array.prototype.slice.call(arguments, 1);
        return this.each(function (r, a) {
            var o = e(a),
                s = o.data("checkboxes");
            s || o.data("checkboxes", s = new t(o)), "string" == typeof n && s[n] && s[n].apply(s, i)
        })
    }, e.fn.checkboxes.Constructor = t, e.fn.checkboxes.noConflict = function () {
        return e.fn.checkboxes = n, this
    };
    var i = function (t) {
        var n = e(t.target),
            i = n.attr("href"),
            r = e(n.data("context") || i && i.replace(/.*(?=#[^\s]+$)/, "")),
            a = n.data("action");
        r && a && (n.is(":checkbox") || t.preventDefault(), r.checkboxes(a))
    },
        r = function () {
            e("[data-toggle^=checkboxes]").each(function () {
                var t = e(this),
                    n = t.data();
                delete n.toggle;
                for (var i in n) t.checkboxes(i, n[i])
            })
        };
    e(document).on("click.checkboxes.data-api", "[data-toggle^=checkboxes]", i), e(document).on("ready.checkboxes.data-api", r)
}(window.jQuery), $(function () {
    function e(e) {
        setupDatePickers(e), initTooltip(), BudgetableUtils.setupBudgetFormFields(), BudgetableUtils.limitBudgetAmount(e.find("#project_budget_attributes_cost, #client_budget_attributes_cost")), setupTimeDuration(e, {
            onchange: function (e, t) {
                t ? ($('[name$="[budget_attributes][hours]"]').val(t.asHours()), FormHelpers.clearError(e)) : FormHelpers.setError(e, "Enter a number or decimal")
            }
        })
    }
    AjaxDialog.registerHook("setup", "manageBudgetDialog", function () {
        e(this)
    }), AjaxDialog.registerHook("response", "manageBudgetDialog", function (t) {
        "replace" == t.action && e(this)
    })
}), AjaxDialog.registerHook("setup", "removeConfirmationsDialog", function () {
    var e = this;
    selectAllCheckboxes(e)
}), $(function () {
    $(".btn-toggle-option").on("change", function () {
        "false" === $(this).find("input").val() ? $(".sso-instructions").addClass("hidden") : $(".sso-instructions").removeClass("hidden")
    })
}),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], function (t) {
            e(t, window, document)
        }) : e(jQuery, window, document)
    }(function (e, t, n, i) {
        "use strict";

        function r(t, n) {
            this.element = t, this.options = e.extend({}, s, n), this._defaults = s, this.ns = "." + a + o++, this.isGoodBrowser = Boolean(t.setSelectionRange), this.hadInitialPlaceholder = Boolean(e(t).attr("placeholder")), this._name = a
        }
        var a = "intlTelInput",
            o = 1,
            s = {
                allowExtensions: !1,
                autoFormat: !0,
                autoPlaceholder: !0,
                autoHideDialCode: !0,
                defaultCountry: "",
                ipinfoToken: "",
                nationalMode: !0,
                numberType: "MOBILE",
                onlyCountries: [],
                preferredCountries: ["us", "gb"],
                utilsScript: ""
            },
            l = {
                UP: 38,
                DOWN: 40,
                ENTER: 13,
                ESC: 27,
                PLUS: 43,
                A: 65,
                Z: 90,
                ZERO: 48,
                NINE: 57,
                SPACE: 32,
                BSPACE: 8,
                DEL: 46,
                CTRL: 17,
                CMD1: 91,
                CMD2: 224
            },
            c = !1;
        e(t).load(function () {
            c = !0
        }), r.prototype = {
            _init: function () {
                return this.options.nationalMode && (this.options.autoHideDialCode = !1), navigator.userAgent.match(/IEMobile/i) && (this.options.autoFormat = !1), this.isMobile = /Android.+Mobile|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent), this.autoCountryDeferred = new e.Deferred, this.utilsScriptDeferred = new e.Deferred, this._processCountryData(), this._generateMarkup(), this._setInitialState(), this._initListeners(), this._initRequests(), [this.autoCountryDeferred, this.utilsScriptDeferred]
            },
            _processCountryData: function () {
                this._setInstanceCountryData(), this._setPreferredCountries()
            },
            _addCountryCode: function (e, t, n) {
                t in this.countryCodes || (this.countryCodes[t] = []);
                var i = n || 0;
                this.countryCodes[t][i] = e
            },
            _setInstanceCountryData: function () {
                var t;
                if (this.options.onlyCountries.length) {
                    for (t = 0; t < this.options.onlyCountries.length; t++) this.options.onlyCountries[t] = this.options.onlyCountries[t].toLowerCase();
                    for (this.countries = [], t = 0; t < u.length; t++) - 1 != e.inArray(u[t].iso2, this.options.onlyCountries) && this.countries.push(u[t])
                } else this.countries = u;
                for (this.countryCodes = {}, t = 0; t < this.countries.length; t++) {
                    var n = this.countries[t];
                    if (this._addCountryCode(n.iso2, n.dialCode, n.priority), n.areaCodes)
                        for (var i = 0; i < n.areaCodes.length; i++) this._addCountryCode(n.iso2, n.dialCode + n.areaCodes[i])
                }
            },
            _setPreferredCountries: function () {
                this.preferredCountries = [];
                for (var e = 0; e < this.options.preferredCountries.length; e++) {
                    var t = this.options.preferredCountries[e].toLowerCase(),
                        n = this._getCountryData(t, !1, !0);
                    n && this.preferredCountries.push(n)
                }
            },
            _generateMarkup: function () {
                this.telInput = e(this.element), this.telInput.attr("autocomplete", "off"), this.telInput.wrap(e("<div>", {
                    "class": "intl-tel-input"
                }));
                var t = e("<div>", {
                    "class": "flag-dropdown"
                }).insertAfter(this.telInput),
                    n = e("<div>", {
                        "class": "selected-flag"
                    }).appendTo(t);
                this.selectedFlagInner = e("<div>", {
                    "class": "iti-flag"
                }).appendTo(n), e("<div>", {
                    "class": "arrow"
                }).appendTo(n), this.isMobile ? this.countryList = e("<select>").appendTo(t) : (this.countryList = e("<ul>", {
                    "class": "country-list v-hide"
                }).appendTo(t), this.preferredCountries.length && !this.isMobile && (this._appendListItems(this.preferredCountries, "preferred"), e("<li>", {
                    "class": "divider"
                }).appendTo(this.countryList))), this._appendListItems(this.countries, ""), this.isMobile || (this.dropdownHeight = this.countryList.outerHeight(), this.countryList.removeClass("v-hide").addClass("hide"), this.countryListItems = this.countryList.children(".country"))
            },
            _appendListItems: function (e, t) {
                for (var n = "", i = 0; i < e.length; i++) {
                    var r = e[i];
                    this.isMobile ? (n += "<option data-dial-code='" + r.dialCode + "' value='" + r.iso2 + "'>", n += r.name + " +" + r.dialCode, n += "</option>") : (n += "<li class='country " + t + "' data-dial-code='" + r.dialCode + "' data-country-code='" + r.iso2 + "'>", n += "<div class='flag'><div class='iti-flag " + r.iso2 + "'></div></div>", n += "<span class='country-name'>" + r.name + "</span>", n += "<span class='dial-code'>+" + r.dialCode + "</span>", n += "</li>")
                }
                this.countryList.append(n)
            },
            _setInitialState: function () {
                var e = this.telInput.val();
                this._getDialCode(e) ? this._updateFlagFromNumber(e) : "auto" != this.options.defaultCountry && (this.options.defaultCountry ? this.options.defaultCountry = this._getCountryData(this.options.defaultCountry.toLowerCase(), !1, !1) : this.options.defaultCountry = this.preferredCountries.length ? this.preferredCountries[0] : this.countries[0], this._selectFlag(this.options.defaultCountry.iso2), e || this._updateDialCode(this.options.defaultCountry.dialCode, !1)),
                    e && this._updateVal(e)
            },
            _initListeners: function () {
                var t = this;
                if (this._initKeyListeners(), (this.options.autoHideDialCode || this.options.autoFormat) && this._initFocusListeners(), this.isMobile) this.countryList.on("change" + this.ns, function (n) {
                    t._selectListItem(e(this).find("option:selected"))
                });
                else {
                    var n = this.telInput.closest("label");
                    n.length && n.on("click" + this.ns, function (e) {
                        t.countryList.hasClass("hide") ? t.telInput.focus() : e.preventDefault()
                    });
                    var i = this.selectedFlagInner.parent();
                    i.on("click" + this.ns, function (e) {
                        !t.countryList.hasClass("hide") || t.telInput.prop("disabled") || t.telInput.prop("readonly") || t._showDropdown()
                    })
                }
            },
            _initRequests: function () {
                var n = this;
                this.options.utilsScript ? c ? this.loadUtils() : e(t).load(function () {
                    n.loadUtils()
                }) : this.utilsScriptDeferred.resolve(), "auto" == this.options.defaultCountry ? this._loadAutoCountry() : this.autoCountryDeferred.resolve()
            },
            _loadAutoCountry: function () {
                var t = e.cookie ? e.cookie("itiAutoCountry") : "";
                if (t && (e.fn[a].autoCountry = t), e.fn[a].autoCountry) this.autoCountryLoaded();
                else if (!e.fn[a].startedLoadingAutoCountry) {
                    e.fn[a].startedLoadingAutoCountry = !0;
                    var n = "//ipinfo.io";
                    this.options.ipinfoToken && (n += "?token=" + this.options.ipinfoToken), e.get(n, function () { }, "jsonp").always(function (t) {
                        e.fn[a].autoCountry = t && t.country ? t.country.toLowerCase() : "", e.cookie && e.cookie("itiAutoCountry", e.fn[a].autoCountry, {
                            path: "/"
                        }), e(".intl-tel-input input").intlTelInput("autoCountryLoaded")
                    })
                }
            },
            _initKeyListeners: function () {
                var e = this;
                this.options.autoFormat && this.telInput.on("keypress" + this.ns, function (n) {
                    if (n.which >= l.SPACE && !n.ctrlKey && !n.metaKey && t.intlTelInputUtils && !e.telInput.prop("readonly")) {
                        n.preventDefault();
                        var i = n.which >= l.ZERO && n.which <= l.NINE || n.which == l.PLUS,
                            r = e.telInput[0],
                            a = e.isGoodBrowser && r.selectionStart == r.selectionEnd,
                            o = e.telInput.attr("maxlength"),
                            s = e.telInput.val(),
                            c = o ? s.length < o : !0;
                        if (c && (i || a)) {
                            var u = i ? String.fromCharCode(n.which) : null;
                            e._handleInputKey(u, !0, i), s != e.telInput.val() && e.telInput.trigger("input")
                        }
                        i || e._handleInvalidKey()
                    }
                }), this.telInput.on("keyup" + this.ns, function (n) {
                    if (n.which == l.ENTER || e.telInput.prop("readonly"));
                    else if (e.options.autoFormat && t.intlTelInputUtils) {
                        var i = n.which == l.CTRL || n.which == l.CMD1 || n.which == l.CMD2,
                            r = e.telInput[0],
                            a = e.isGoodBrowser && r.selectionStart == r.selectionEnd,
                            o = e.isGoodBrowser && r.selectionStart == e.telInput.val().length;
                        if (e.telInput.val() ? (n.which == l.DEL && !o || n.which == l.BSPACE || i && a) && e._handleInputKey(null, i && o, i) : e._updateFlagFromNumber(""), !e.options.nationalMode) {
                            var s = e.telInput.val();
                            if ("+" != s.charAt(0)) {
                                var c = e.isGoodBrowser ? r.selectionStart + 1 : 0;
                                e.telInput.val("+" + s), e.isGoodBrowser && r.setSelectionRange(c, c)
                            }
                        }
                    } else e._updateFlagFromNumber(e.telInput.val())
                })
            },
            _handleInvalidKey: function () {
                var e = this;
                this.telInput.trigger("invalidkey").addClass("iti-invalid-key"), setTimeout(function () {
                    e.telInput.removeClass("iti-invalid-key")
                }, 100)
            },
            _handleInputKey: function (e, t, n) {
                var i, r = this.telInput.val(),
                    a = (this._getClean(r), this.telInput[0]),
                    o = 0;
                if (this.isGoodBrowser ? (o = this._getDigitsOnRight(r, a.selectionEnd), e ? r = r.substr(0, a.selectionStart) + e + r.substring(a.selectionEnd, r.length) : i = r.substr(a.selectionStart - 2, 2)) : e && (r += e), this.setNumber(r, null, t, !0, n), this.isGoodBrowser) {
                    var s;
                    r = this.telInput.val(), o ? (s = this._getCursorFromDigitsOnRight(r, o), e || (s = this._getCursorFromLeftChar(r, s, i))) : s = r.length, a.setSelectionRange(s, s)
                }
            },
            _getCursorFromLeftChar: function (t, n, i) {
                for (var r = n; r > 0; r--) {
                    var a = t.charAt(r - 1);
                    if (e.isNumeric(a) || t.substr(r - 2, 2) == i) return r
                }
                return 0
            },
            _getCursorFromDigitsOnRight: function (t, n) {
                for (var i = t.length - 1; i >= 0; i--)
                    if (e.isNumeric(t.charAt(i)) && 0 === --n) return i;
                return 0
            },
            _getDigitsOnRight: function (t, n) {
                for (var i = 0, r = n; r < t.length; r++) e.isNumeric(t.charAt(r)) && i++;
                return i
            },
            _initFocusListeners: function () {
                var e = this;
                this.options.autoHideDialCode && this.telInput.on("mousedown" + this.ns, function (t) {
                    e.telInput.is(":focus") || e.telInput.val() || (t.preventDefault(), e.telInput.focus())
                }), this.telInput.on("focus" + this.ns, function (n) {
                    var i = e.telInput.val();
                    e.telInput.data("focusVal", i), e.options.autoHideDialCode && !i && !e.telInput.prop("readonly") && e.selectedCountryData.dialCode && (e._updateVal("+" + e.selectedCountryData.dialCode, null, !0), e.telInput.one("keypress.plus" + e.ns, function (n) {
                        if (n.which == l.PLUS) {
                            var i = e.options.autoFormat && t.intlTelInputUtils ? "+" : "";
                            e.telInput.val(i)
                        }
                    }), setTimeout(function () {
                        var t = e.telInput[0];
                        if (e.isGoodBrowser) {
                            var n = e.telInput.val().length;
                            t.setSelectionRange(n, n)
                        }
                    }))
                }), this.telInput.on("blur" + this.ns, function () {
                    if (e.options.autoHideDialCode) {
                        var n = e.telInput.val(),
                            i = "+" == n.charAt(0);
                        if (i) {
                            var r = e._getNumeric(n);
                            r && e.selectedCountryData.dialCode != r || e.telInput.val("")
                        }
                        e.telInput.off("keypress.plus" + e.ns)
                    }
                    e.options.autoFormat && t.intlTelInputUtils && e.telInput.val() != e.telInput.data("focusVal") && e.telInput.trigger("change")
                })
            },
            _getNumeric: function (e) {
                return e.replace(/\D/g, "")
            },
            _getClean: function (e) {
                var t = "+" == e.charAt(0) ? "+" : "";
                return t + this._getNumeric(e)
            },
            _showDropdown: function () {
                this._setDropdownPosition();
                var e = this.countryList.children(".active");
                e.length && this._highlightListItem(e), this.countryList.removeClass("hide"), e.length && this._scrollTo(e), this._bindDropdownListeners(), this.selectedFlagInner.children(".arrow").addClass("up")
            },
            _setDropdownPosition: function () {
                var n = this.telInput.offset().top,
                    i = e(t).scrollTop(),
                    r = n + this.telInput.outerHeight() + this.dropdownHeight < i + e(t).height(),
                    a = n - this.dropdownHeight > i,
                    o = !r && a ? "-" + (this.dropdownHeight - 1) + "px" : "";
                this.countryList.css("top", o)
            },
            _bindDropdownListeners: function () {
                var t = this;
                this.countryList.on("mouseover" + this.ns, ".country", function (n) {
                    t._highlightListItem(e(this))
                }), this.countryList.on("click" + this.ns, ".country", function (n) {
                    t._selectListItem(e(this))
                });
                var i = !0;
                e("html").on("click" + this.ns, function (e) {
                    i || t._closeDropdown(), i = !1
                });
                var r = "",
                    a = null;
                e(n).on("keydown" + this.ns, function (e) {
                    e.preventDefault(), e.which == l.UP || e.which == l.DOWN ? t._handleUpDownKey(e.which) : e.which == l.ENTER ? t._handleEnterKey() : e.which == l.ESC ? t._closeDropdown() : (e.which >= l.A && e.which <= l.Z || e.which == l.SPACE) && (a && clearTimeout(a), r += String.fromCharCode(e.which), t._searchForCountry(r), a = setTimeout(function () {
                        r = ""
                    }, 1e3))
                })
            },
            _handleUpDownKey: function (e) {
                var t = this.countryList.children(".highlight").first(),
                    n = e == l.UP ? t.prev() : t.next();
                n.length && (n.hasClass("divider") && (n = e == l.UP ? n.prev() : n.next()), this._highlightListItem(n), this._scrollTo(n))
            },
            _handleEnterKey: function () {
                var e = this.countryList.children(".highlight").first();
                e.length && this._selectListItem(e)
            },
            _searchForCountry: function (e) {
                for (var t = 0; t < this.countries.length; t++)
                    if (this._startsWith(this.countries[t].name, e)) {
                        var n = this.countryList.children("[data-country-code=" + this.countries[t].iso2 + "]").not(".preferred");
                        this._highlightListItem(n), this._scrollTo(n, !0);
                        break
                    }
            },
            _startsWith: function (e, t) {
                return e.substr(0, t.length).toUpperCase() == t
            },
            _updateVal: function (e, n, i, r, a) {
                var o;
                if (this.options.autoFormat && t.intlTelInputUtils && this.selectedCountryData) {
                    o = "number" == typeof n && intlTelInputUtils.isValidNumber(e, this.selectedCountryData.iso2) ? intlTelInputUtils.formatNumberByType(e, this.selectedCountryData.iso2, n) : !r && this.options.nationalMode && "+" == e.charAt(0) && intlTelInputUtils.isValidNumber(e, this.selectedCountryData.iso2) ? intlTelInputUtils.formatNumberByType(e, this.selectedCountryData.iso2, intlTelInputUtils.numberFormat.NATIONAL) : intlTelInputUtils.formatNumber(e, this.selectedCountryData.iso2, i, this.options.allowExtensions, a);
                    var s = this.telInput.attr("maxlength");
                    s && o.length > s && (o = o.substr(0, s))
                } else o = e;
                this.telInput.val(o)
            },
            _updateFlagFromNumber: function (t) {
                t && this.options.nationalMode && this.selectedCountryData && "1" == this.selectedCountryData.dialCode && "+" != t.charAt(0) && ("1" != t.charAt(0) && (t = "1" + t), t = "+" + t);
                var n = this._getDialCode(t),
                    i = null;
                if (n) {
                    var r = this.countryCodes[this._getNumeric(n)],
                        a = this.selectedCountryData && -1 != e.inArray(this.selectedCountryData.iso2, r);
                    if (!a || this._isUnknownNanp(t, n))
                        for (var o = 0; o < r.length; o++)
                            if (r[o]) {
                                i = r[o];
                                break
                            }
                } else "+" == t.charAt(0) && this._getNumeric(t).length ? i = "" : t && "+" != t || (i = this.options.defaultCountry.iso2);
                null !== i && this._selectFlag(i)
            },
            _isUnknownNanp: function (e, t) {
                return "+1" == t && this._getNumeric(e).length >= 4
            },
            _highlightListItem: function (e) {
                this.countryListItems.removeClass("highlight"), e.addClass("highlight")
            },
            _getCountryData: function (e, t, n) {
                for (var i = t ? u : this.countries, r = 0; r < i.length; r++)
                    if (i[r].iso2 == e) return i[r];
                if (n) return null;
                throw new Error("No country data for '" + e + "'")
            },
            _selectFlag: function (e, t) {
                e = e || this.options.defaultCountry, this.selectedCountryData = e ? this._getCountryData(e, !1, !1) : {}, t && this.selectedCountryData.iso2 && (this.options.defaultCountry = {
                    iso2: this.selectedCountryData.iso2
                }), this.selectedFlagInner.attr("class", "iti-flag " + e);
                var n = e ? this.selectedCountryData.name + ": +" + this.selectedCountryData.dialCode : "Unknown";
                this.selectedFlagInner.parent().attr("title", n), this._updatePlaceholder(), this.isMobile ? this.countryList.val(e) : (this.countryListItems.removeClass("active"), e && this.countryListItems.find(".iti-flag." + e).first().closest(".country").addClass("active"))
            },
            _updatePlaceholder: function () {
                if (t.intlTelInputUtils && !this.hadInitialPlaceholder && this.options.autoPlaceholder && this.selectedCountryData) {
                    var e = this.selectedCountryData.iso2,
                        n = intlTelInputUtils.numberType[this.options.numberType || "FIXED_LINE"],
                        i = e ? intlTelInputUtils.getExampleNumber(e, this.options.nationalMode, n) : "";
                    this.telInput.attr("placeholder", i)
                }
            },
            _selectListItem: function (e) {
                var t = this.isMobile ? "value" : "data-country-code";
                this._selectFlag(e.attr(t), !0), this.isMobile || this._closeDropdown(), this._updateDialCode(e.attr("data-dial-code"), !0), this.telInput.trigger("change"), this.telInput.focus()
            },
            _closeDropdown: function () {
                this.countryList.addClass("hide"), this.selectedFlagInner.children(".arrow").removeClass("up"), e(n).off(this.ns), e("html").off(this.ns), this.countryList.off(this.ns)
            },
            _scrollTo: function (e, t) {
                var n = this.countryList,
                    i = n.height(),
                    r = n.offset().top,
                    a = r + i,
                    o = e.outerHeight(),
                    s = e.offset().top,
                    l = s + o,
                    c = s - r + n.scrollTop(),
                    u = i / 2 - o / 2;
                if (r > s) t && (c -= u), n.scrollTop(c);
                else if (l > a) {
                    t && (c += u);
                    var d = i - o;
                    n.scrollTop(c - d)
                }
            },
            _updateDialCode: function (t, n) {
                var i, r = this.telInput.val();
                if (t = "+" + t, this.options.nationalMode && "+" != r.charAt(0)) i = r;
                else if (r) {
                    var a = this._getDialCode(r);
                    if (a.length > 1) i = r.replace(a, t);
                    else {
                        var o = "+" != r.charAt(0) ? e.trim(r) : "";
                        i = t + o
                    }
                } else i = !this.options.autoHideDialCode || n ? t : "";
                this._updateVal(i, null, n)
            },
            _getDialCode: function (t) {
                var n = "";
                if ("+" == t.charAt(0))
                    for (var i = "", r = 0; r < t.length; r++) {
                        var a = t.charAt(r);
                        if (e.isNumeric(a) && (i += a, this.countryCodes[i] && (n = t.substr(0, r + 1)), 4 == i.length)) break
                    }
                return n
            },
            autoCountryLoaded: function () {
                "auto" == this.options.defaultCountry && (this.options.defaultCountry = e.fn[a].autoCountry, this._setInitialState(), this.autoCountryDeferred.resolve())
            },
            destroy: function () {
                this.isMobile || this._closeDropdown(), this.telInput.off(this.ns), this.isMobile ? this.countryList.off(this.ns) : (this.selectedFlagInner.parent().off(this.ns), this.telInput.closest("label").off(this.ns));
                var e = this.telInput.parent();
                e.before(this.telInput).remove()
            },
            getExtension: function () {
                return this.telInput.val().split(" ext. ")[1] || ""
            },
            getNumber: function (e) {
                return t.intlTelInputUtils ? intlTelInputUtils.formatNumberByType(this.telInput.val(), this.selectedCountryData.iso2, e) : ""
            },
            getNumberType: function () {
                return t.intlTelInputUtils ? intlTelInputUtils.getNumberType(this.telInput.val(), this.selectedCountryData.iso2) : -99
            },
            getSelectedCountryData: function () {
                return this.selectedCountryData || {}
            },
            getValidationError: function () {
                return t.intlTelInputUtils ? intlTelInputUtils.getValidationError(this.telInput.val(), this.selectedCountryData.iso2) : -99
            },
            isValidNumber: function () {
                var n = e.trim(this.telInput.val()),
                    i = this.options.nationalMode ? this.selectedCountryData.iso2 : "";
                return t.intlTelInputUtils ? intlTelInputUtils.isValidNumber(n, i) : !1
            },
            loadUtils: function (t) {
                var n = this,
                    i = t || this.options.utilsScript;
                !e.fn[a].loadedUtilsScript && i ? (e.fn[a].loadedUtilsScript = !0, e.ajax({
                    url: i,
                    success: function () {
                        e(".intl-tel-input input").intlTelInput("utilsLoaded")
                    },
                    complete: function () {
                        n.utilsScriptDeferred.resolve()
                    },
                    dataType: "script",
                    cache: !0
                })) : this.utilsScriptDeferred.resolve()
            },
            selectCountry: function (e) {
                e = e.toLowerCase(), this.selectedFlagInner.hasClass(e) || (this._selectFlag(e, !0), this._updateDialCode(this.selectedCountryData.dialCode, !1))
            },
            setNumber: function (e, t, n, i, r) {
                this.options.nationalMode || "+" == e.charAt(0) || (e = "+" + e), this._updateFlagFromNumber(e), this._updateVal(e, t, n, i, r)
            },
            utilsLoaded: function () {
                this.options.autoFormat && this.telInput.val() && this._updateVal(this.telInput.val()), this._updatePlaceholder()
            }
        }, e.fn[a] = function (t) {
            var n = arguments;
            if (t === i || "object" == typeof t) {
                var o = [];
                return this.each(function () {
                    if (!e.data(this, "plugin_" + a)) {
                        var n = new r(this, t),
                            i = n._init();
                        o.push(i[0]), o.push(i[1]), e.data(this, "plugin_" + a, n)
                    }
                }), e.when.apply(null, o)
            }
            if ("string" == typeof t && "_" !== t[0]) {
                var s;
                return this.each(function () {
                    var i = e.data(this, "plugin_" + a);
                    i instanceof r && "function" == typeof i[t] && (s = i[t].apply(i, Array.prototype.slice.call(n, 1))), "destroy" === t && e.data(this, "plugin_" + a, null)
                }), s !== i ? s : this
            }
        }, e.fn[a].getCountryData = function () {
            return u
        };
        for (var u = [
            ["Afghanistan (\u202b\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646\u202c\u200e)", "af", "93"],
            ["Albania (Shqip\xebri)", "al", "355"],
            ["Algeria (\u202b\u0627\u0644\u062c\u0632\u0627\u0626\u0631\u202c\u200e)", "dz", "213"],
            ["American Samoa", "as", "1684"],
            ["Andorra", "ad", "376"],
            ["Angola", "ao", "244"],
            ["Anguilla", "ai", "1264"],
            ["Antigua and Barbuda", "ag", "1268"],
            ["Argentina", "ar", "54"],
            ["Armenia (\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576)", "am", "374"],
            ["Aruba", "aw", "297"],
            ["Australia", "au", "61"],
            ["Austria (\xd6sterreich)", "at", "43"],
            ["Azerbaijan (Az\u0259rbaycan)", "az", "994"],
            ["Bahamas", "bs", "1242"],
            ["Bahrain (\u202b\u0627\u0644\u0628\u062d\u0631\u064a\u0646\u202c\u200e)", "bh", "973"],
            ["Bangladesh (\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)", "bd", "880"],
            ["Barbados", "bb", "1246"],
            ["Belarus (\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c)", "by", "375"],
            ["Belgium (Belgi\xeb)", "be", "32"],
            ["Belize", "bz", "501"],
            ["Benin (B\xe9nin)", "bj", "229"],
            ["Bermuda", "bm", "1441"],
            ["Bhutan (\u0f60\u0f56\u0fb2\u0f74\u0f42)", "bt", "975"],
            ["Bolivia", "bo", "591"],
            ["Bosnia and Herzegovina (\u0411\u043e\u0441\u043d\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043e\u0432\u0438\u043d\u0430)", "ba", "387"],
            ["Botswana", "bw", "267"],
            ["Brazil (Brasil)", "br", "55"],
            ["British Indian Ocean Territory", "io", "246"],
            ["British Virgin Islands", "vg", "1284"],
            ["Brunei", "bn", "673"],
            ["Bulgaria (\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f)", "bg", "359"],
            ["Burkina Faso", "bf", "226"],
            ["Burundi (Uburundi)", "bi", "257"],
            ["Cambodia (\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6)", "kh", "855"],
            ["Cameroon (Cameroun)", "cm", "237"],
            ["Canada", "ca", "1", 1, ["204", "226", "236", "249", "250", "289", "306", "343", "365", "387", "403", "416", "418", "431", "437", "438", "450", "506", "514", "519", "548", "579", "581", "587", "604", "613", "639", "647", "672", "705", "709", "742", "778", "780", "782", "807", "819", "825", "867", "873", "902", "905"]],
            ["Cape Verde (Kabu Verdi)", "cv", "238"],
            ["Caribbean Netherlands", "bq", "599", 1],
            ["Cayman Islands", "ky", "1345"],
            ["Central African Republic (R\xe9publique centrafricaine)", "cf", "236"],
            ["Chad (Tchad)", "td", "235"],
            ["Chile", "cl", "56"],
            ["China (\u4e2d\u56fd)", "cn", "86"],
            ["Colombia", "co", "57"],
            ["Comoros (\u202b\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202c\u200e)", "km", "269"],
            ["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)", "cd", "243"],
            ["Congo (Republic) (Congo-Brazzaville)", "cg", "242"],
            ["Cook Islands", "ck", "682"],
            ["Costa Rica", "cr", "506"],
            ["C\xf4te d\u2019Ivoire", "ci", "225"],
            ["Croatia (Hrvatska)", "hr", "385"],
            ["Cuba", "cu", "53"],
            ["Cura\xe7ao", "cw", "599", 0],
            ["Cyprus (\u039a\u03cd\u03c0\u03c1\u03bf\u03c2)", "cy", "357"],
            ["Czech Republic (\u010cesk\xe1 republika)", "cz", "420"],
            ["Denmark (Danmark)", "dk", "45"],
            ["Djibouti", "dj", "253"],
            ["Dominica", "dm", "1767"],
            ["Dominican Republic (Rep\xfablica Dominicana)", "do", "1", 2, ["809", "829", "849"]],
            ["Ecuador", "ec", "593"],
            ["Egypt (\u202b\u0645\u0635\u0631\u202c\u200e)", "eg", "20"],
            ["El Salvador", "sv", "503"],
            ["Equatorial Guinea (Guinea Ecuatorial)", "gq", "240"],
            ["Eritrea", "er", "291"],
            ["Estonia (Eesti)", "ee", "372"],
            ["Ethiopia", "et", "251"],
            ["Falkland Islands (Islas Malvinas)", "fk", "500"],
            ["Faroe Islands (F\xf8royar)", "fo", "298"],
            ["Fiji", "fj", "679"],
            ["Finland (Suomi)", "fi", "358"],
            ["France", "fr", "33"],
            ["French Guiana (Guyane fran\xe7aise)", "gf", "594"],
            ["French Polynesia (Polyn\xe9sie fran\xe7aise)", "pf", "689"],
            ["Gabon", "ga", "241"],
            ["Gambia", "gm", "220"],
            ["Georgia (\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd)", "ge", "995"],
            ["Germany (Deutschland)", "de", "49"],
            ["Ghana (Gaana)", "gh", "233"],
            ["Gibraltar", "gi", "350"],
            ["Greece (\u0395\u03bb\u03bb\u03ac\u03b4\u03b1)", "gr", "30"],
            ["Greenland (Kalaallit Nunaat)", "gl", "299"],
            ["Grenada", "gd", "1473"],
            ["Guadeloupe", "gp", "590", 0],
            ["Guam", "gu", "1671"],
            ["Guatemala", "gt", "502"],
            ["Guinea (Guin\xe9e)", "gn", "224"],
            ["Guinea-Bissau (Guin\xe9 Bissau)", "gw", "245"],
            ["Guyana", "gy", "592"],
            ["Haiti", "ht", "509"],
            ["Honduras", "hn", "504"],
            ["Hong Kong (\u9999\u6e2f)", "hk", "852"],
            ["Hungary (Magyarorsz\xe1g)", "hu", "36"],
            ["Iceland (\xcdsland)", "is", "354"],
            ["India (\u092d\u093e\u0930\u0924)", "in", "91"],
            ["Indonesia", "id", "62"],
            ["Iran (\u202b\u0627\u06cc\u0631\u0627\u0646\u202c\u200e)", "ir", "98"],
            ["Iraq (\u202b\u0627\u0644\u0639\u0631\u0627\u0642\u202c\u200e)", "iq", "964"],
            ["Ireland", "ie", "353"],
            ["Israel (\u202b\u05d9\u05e9\u05e8\u05d0\u05dc\u202c\u200e)", "il", "972"],
            ["Italy (Italia)", "it", "39", 0],
            ["Jamaica", "jm", "1876"],
            ["Japan (\u65e5\u672c)", "jp", "81"],
            ["Jordan (\u202b\u0627\u0644\u0623\u0631\u062f\u0646\u202c\u200e)", "jo", "962"],
            ["Kazakhstan (\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d)", "kz", "7", 1],
            ["Kenya", "ke", "254"],
            ["Kiribati", "ki", "686"],
            ["Kuwait (\u202b\u0627\u0644\u0643\u0648\u064a\u062a\u202c\u200e)", "kw", "965"],
            ["Kyrgyzstan (\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d)", "kg", "996"],
            ["Laos (\u0ea5\u0eb2\u0ea7)", "la", "856"],
            ["Latvia (Latvija)", "lv", "371"],
            ["Lebanon (\u202b\u0644\u0628\u0646\u0627\u0646\u202c\u200e)", "lb", "961"],
            ["Lesotho", "ls", "266"],
            ["Liberia", "lr", "231"],
            ["Libya (\u202b\u0644\u064a\u0628\u064a\u0627\u202c\u200e)", "ly", "218"],
            ["Liechtenstein", "li", "423"],
            ["Lithuania (Lietuva)", "lt", "370"],
            ["Luxembourg", "lu", "352"],
            ["Macau (\u6fb3\u9580)", "mo", "853"],
            ["Macedonia (FYROM) (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430)", "mk", "389"],
            ["Madagascar (Madagasikara)", "mg", "261"],
            ["Malawi", "mw", "265"],
            ["Malaysia", "my", "60"],
            ["Maldives", "mv", "960"],
            ["Mali", "ml", "223"],
            ["Malta", "mt", "356"],
            ["Marshall Islands", "mh", "692"],
            ["Martinique", "mq", "596"],
            ["Mauritania (\u202b\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627\u202c\u200e)", "mr", "222"],
            ["Mauritius (Moris)", "mu", "230"],
            ["Mexico (M\xe9xico)", "mx", "52"],
            ["Micronesia", "fm", "691"],
            ["Moldova (Republica Moldova)", "md", "373"],
            ["Monaco", "mc", "377"],
            ["Mongolia (\u041c\u043e\u043d\u0433\u043e\u043b)", "mn", "976"],
            ["Montenegro (Crna Gora)", "me", "382"],
            ["Montserrat", "ms", "1664"],
            ["Morocco (\u202b\u0627\u0644\u0645\u063a\u0631\u0628\u202c\u200e)", "ma", "212"],
            ["Mozambique (Mo\xe7ambique)", "mz", "258"],
            ["Myanmar (Burma) (\u1019\u103c\u1014\u103a\u1019\u102c)", "mm", "95"],
            ["Namibia (Namibi\xeb)", "na", "264"],
            ["Nauru", "nr", "674"],
            ["Nepal (\u0928\u0947\u092a\u093e\u0932)", "np", "977"],
            ["Netherlands (Nederland)", "nl", "31"],
            ["New Caledonia (Nouvelle-Cal\xe9donie)", "nc", "687"],
            ["New Zealand", "nz", "64"],
            ["Nicaragua", "ni", "505"],
            ["Niger (Nijar)", "ne", "227"],
            ["Nigeria", "ng", "234"],
            ["Niue", "nu", "683"],
            ["Norfolk Island", "nf", "672"],
            ["North Korea (\uc870\uc120 \ubbfc\uc8fc\uc8fc\uc758 \uc778\ubbfc \uacf5\ud654\uad6d)", "kp", "850"],
            ["Northern Mariana Islands", "mp", "1670"],
            ["Norway (Norge)", "no", "47"],
            ["Oman (\u202b\u0639\u064f\u0645\u0627\u0646\u202c\u200e)", "om", "968"],
            ["Pakistan (\u202b\u067e\u0627\u06a9\u0633\u062a\u0627\u0646\u202c\u200e)", "pk", "92"],
            ["Palau", "pw", "680"],
            ["Palestine (\u202b\u0641\u0644\u0633\u0637\u064a\u0646\u202c\u200e)", "ps", "970"],
            ["Panama (Panam\xe1)", "pa", "507"],
            ["Papua New Guinea", "pg", "675"],
            ["Paraguay", "py", "595"],
            ["Peru (Per\xfa)", "pe", "51"],
            ["Philippines", "ph", "63"],
            ["Poland (Polska)", "pl", "48"],
            ["Portugal", "pt", "351"],
            ["Puerto Rico", "pr", "1", 3, ["787", "939"]],
            ["Qatar (\u202b\u0642\u0637\u0631\u202c\u200e)", "qa", "974"],
            ["R\xe9union (La R\xe9union)", "re", "262"],
            ["Romania (Rom\xe2nia)", "ro", "40"],
            ["Russia (\u0420\u043e\u0441\u0441\u0438\u044f)", "ru", "7", 0],
            ["Rwanda", "rw", "250"],
            ["Saint Barth\xe9lemy (Saint-Barth\xe9lemy)", "bl", "590", 1],
            ["Saint Helena", "sh", "290"],
            ["Saint Kitts and Nevis", "kn", "1869"],
            ["Saint Lucia", "lc", "1758"],
            ["Saint Martin (Saint-Martin (partie fran\xe7aise))", "mf", "590", 2],
            ["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)", "pm", "508"],
            ["Saint Vincent and the Grenadines", "vc", "1784"],
            ["Samoa", "ws", "685"],
            ["San Marino", "sm", "378"],
            ["S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)", "st", "239"],
            ["Saudi Arabia (\u202b\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u202c\u200e)", "sa", "966"],
            ["Senegal (S\xe9n\xe9gal)", "sn", "221"],
            ["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)", "rs", "381"],
            ["Seychelles", "sc", "248"],
            ["Sierra Leone", "sl", "232"],
            ["Singapore", "sg", "65"],
            ["Sint Maarten", "sx", "1721"],
            ["Slovakia (Slovensko)", "sk", "421"],
            ["Slovenia (Slovenija)", "si", "386"],
            ["Solomon Islands", "sb", "677"],
            ["Somalia (Soomaaliya)", "so", "252"],
            ["South Africa", "za", "27"],
            ["South Korea (\ub300\ud55c\ubbfc\uad6d)", "kr", "82"],
            ["South Sudan (\u202b\u062c\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)", "ss", "211"],
            ["Spain (Espa\xf1a)", "es", "34"],
            ["Sri Lanka (\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0)", "lk", "94"],
            ["Sudan (\u202b\u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)", "sd", "249"],
            ["Suriname", "sr", "597"],
            ["Swaziland", "sz", "268"],
            ["Sweden (Sverige)", "se", "46"],
            ["Switzerland (Schweiz)", "ch", "41"],
            ["Syria (\u202b\u0633\u0648\u0631\u064a\u0627\u202c\u200e)", "sy", "963"],
            ["Taiwan (\u53f0\u7063)", "tw", "886"],
            ["Tajikistan", "tj", "992"],
            ["Tanzania", "tz", "255"],
            ["Thailand (\u0e44\u0e17\u0e22)", "th", "66"],
            ["Timor-Leste", "tl", "670"],
            ["Togo", "tg", "228"],
            ["Tokelau", "tk", "690"],
            ["Tonga", "to", "676"],
            ["Trinidad and Tobago", "tt", "1868"],
            ["Tunisia (\u202b\u062a\u0648\u0646\u0633\u202c\u200e)", "tn", "216"],
            ["Turkey (T\xfcrkiye)", "tr", "90"],
            ["Turkmenistan", "tm", "993"],
            ["Turks and Caicos Islands", "tc", "1649"],
            ["Tuvalu", "tv", "688"],
            ["U.S. Virgin Islands", "vi", "1340"],
            ["Uganda", "ug", "256"],
            ["Ukraine (\u0423\u043a\u0440\u0430\u0457\u043d\u0430)", "ua", "380"],
            ["United Arab Emirates (\u202b\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629\u202c\u200e)", "ae", "971"],
            ["United Kingdom", "gb", "44"],
            ["United States", "us", "1", 0],
            ["Uruguay", "uy", "598"],
            ["Uzbekistan (O\u02bbzbekiston)", "uz", "998"],
            ["Vanuatu", "vu", "678"],
            ["Vatican City (Citt\xe0 del Vaticano)", "va", "39", 1],
            ["Venezuela", "ve", "58"],
            ["Vietnam (Vi\u1ec7t Nam)", "vn", "84"],
            ["Wallis and Futuna", "wf", "681"],
            ["Yemen (\u202b\u0627\u0644\u064a\u0645\u0646\u202c\u200e)", "ye", "967"],
            ["Zambia", "zm", "260"],
            ["Zimbabwe", "zw", "263"]
        ], d = 0; d < u.length; d++) {
            var h = u[d];
            u[d] = {
                name: h[0],
                iso2: h[1],
                dialCode: h[2],
                priority: h[3] || 0,
                areaCodes: h[4] || null
            }
        }
    }), $(function () {
        function e(e, t) {
            return "https://api.pagepeeker.com/v2/thumbs.php?size=m&url=" + encodeURIComponent(e) + (t ? "&r=" + Math.random() : "")
        }

        function t(e) {
            return "https://api.pagepeeker.com/v2/thumbs_ready.php?size=m&url=" + encodeURIComponent(e)
        }

        function n(t, n, r, a) {
            1 === a ? t.data("bs.popover").tip().find("img.thumbnail").attr("src", e(n, !0)) : 5 > r && t.data("timeout", setTimeout(function () {
                i(t, n, r + 1)
            }, 5e3))
        }

        function i(e, i, r) {
            $.ajax({
                method: "GET",
                url: t(i),
                dataType: "json"
            }).done(function (t) {
                n(e, i, r, t.IsReady)
            }).fail(function () {
                console.log("Failed ready request for " + i)
            })
        }
        $("#activities").on("click", "*[data-poload]", function (e) {
            e.preventDefault(), e.stopPropagation(), $(".popover").popover("hide");
            var t = $(this),
                n = t.html(),
                i = t.data("disable-with");
            t.data("popover-title");
            t.popover({
                trigger: "manual",
                html: !0,
                sanitize: !1,
                placement: "auto right"
            }), t.attr("disabled", "disabled").html(i), $.get(t.data("poload"), function (e) {
                t.attr("data-content", e).popover("show"), t.removeAttr("disabled").html(n)
            })
        }), $("#url_activities").on("shown.popover", ".tracked_url", function (e) {
            var t = $(this);
            setTimeout(function () {
                i(t, t.data("url"), 1)
            }, 500)
        }).on("hidden.popover", ".tracked_url", function (e) {
            var t = $(this);
            t.data("timeout") && clearTimeout(t.data("timeout")), t.data("timeout", null)
        }).on("click", ".tracked_url", function (t) {
            t.preventDefault(), t.stopPropagation();
            var n = $(this);
            n.data("popover-title");
            if ($("#url_activities .tracked_url").not(this).popover("hide"), n.data("bs.popover").tip().hasClass("in")) return void n.popover("hide");
            var i = n.data("url"),
                r = $("#thumbnail_template").clone();
            /^https?:\/\//.test(i) ? (r.find(".good_url").removeClass("hide"), r.find("a").attr("href", i), r.find("img.thumbnail").attr("src", e(i))) : r.find(".bad_url").removeClass("hide"), n.attr("data-content", r.html()).popover("show"), n.data("bs.popover").tip().on("click", ".close", function () {
                n.popover("hide")
            })
        }).on("click", ".url_activity", function (e) {
            e.preventDefault(), e.stopPropagation();
            var t = $(this),
                n = t.next(".url_activity_details"),
                i = t.find(".state-indicator");
            n.length ? (n.find(".tracked_url[data-content]").popover("hide"), n.remove(), i.toggleClass("hi-minus hi-plus")) : $.get("/url_activity_details", t.data("url"), function (e) {
                var n = $('<tr class="url_activity_details"><td colspan="3"></td></tr>').insertAfter(t);
                n.find("td").html(e), n.find(".tracked_url").popover({
                    trigger: "manual",
                    html: !0,
                    sanitize: !1,
                    placement: "top"
                }), i.toggleClass("hi-minus hi-plus")
            }).fail(function () {
                alert("Could not load URL details")
            })
        }).on("click", ".close_details", function (e) {
            e.preventDefault(), e.stopPropagation();
            var t = $(this),
                n = t.closest("tr").prev(".url_activity").find(".state-indicator");
            t.closest("tr").find(".tracked_url[data-content]").popover("hide"), t.closest(".url_activity_details").remove(), n.toggleClass("hi-minus hi-plus")
        });
        var r = $(".activities-wrapper");
        r.data("real-data") === !0 ? activityBatchActions.initMain(r) : r.css({
            pointerEvents: "none"
        }), AjaxDialog.registerHook("setup", "moveActivityDialog", function () {
            var e = this;
            e.on("select2:select", "#time_entry_project_id", function (e) {
                $("#time_entry_billable").prop("checked", e.params.data.billable);
                var t = $('label[for="time_entry_note"]');
                e.params.data.reason_required ? 0 === t.find("abbr").length && t.append('<abbr title="required">*</abbr>') : t.find("abbr").remove()
            });
            var t = e.find("#time_entry_project_id");
            t.trigger("change").trigger({
                type: "select2:select",
                params: {
                    data: t.select2("data")[0]
                }
            }), e.on("click", "button.btn-primary", function () {
                var t = e.closest(".modal").find("form");
                0 === FormHelpers.withErrors(t).length && t.submit()
            }), taskLoader(e.find("form"), "#time_entry_project_id", "#time_entry_task_id"), initTooltip()
        }), AjaxDialog.registerHook("response", "moveActivityDialog", function (e, t) {
            var n = this;
            "confirmation" === e.action ? AjaxDialog.run($(n).data("confirm-override")) : "success-response" === e.action ? (n.modal("hide"), window.location.reload()) : "error-response" === e.action && (e.html && n.find(".modal-body").html(e.html), n.find("#time_entry_project_id").select2(), taskLoader(n.find("form"), "#time_entry_project_id", "#time_entry_task_id"))
        }), AjaxDialog.registerHook("setup", "confirmUnlockDialog", function () {
            var e = this;
            $("#confirmation-form", e).on("submit", function (t) {
                t.preventDefault(), t.stopImmediatePropagation();
                var n = $(this);
                if (n.find(".lock-confirmation").removeClass("has-error"), n.find(".lock-confirmation .help-block.error-message").remove(), $(".confirm-checkbox", e).length === $(".confirm-checkbox:checked", e).length) {
                    $("#move-activities-form input#confirmed").val(!0);
                    var i = $("#base_action", e).val();
                    if ("move" === i) $("#move-activities-form").submit();
                    else {
                        var r = $("<a>").attr("id", "unlock-deletion").attr("href", i).attr("data-method", "delete");
                        $.rails.handleMethod(r)
                    }
                    e.modal("hide")
                } else $("input.check_boxes.confirm-checkbox:checkbox:not(:checked)").each(function () {
                    var e = $(this).closest(".lock-confirmation");
                    e.length > 0 && !e.hasClass("has-error") && (e.addClass("has-error"), e.append($('<span class="help-block ml-20 pl-5 mb-0 error-message">It is required</span>')))
                })
            })
        })
    });
var activityBatchActions = function ($) {
    var customConfirmationMsg = function ($) {
        return {
            replaceValues: {
                tracked: "{{N_TRACKED}}",
                screen: "{{N_SCREEN}}",
                project: "{{N_PROJECT}}"
            },
            transform: function ($selector, confirmationMessage, projectFlavour) {
                return $.each(customConfirmationMsg.replaceValues, function (type, value) {
                    var fn = eval("customConfirmationMsg.Types." + type);
                    jQuery.isFunction(fn) && (confirmationMessage = confirmationMessage.replace(value, fn($selector, type, projectFlavour)))
                }), confirmationMessage
            },
            message: function (e, t) {
                var n = e.data("confirmation"),
                    i = e.data("project-flavour");
                n = customConfirmationMsg.transform(t, n, i);
                var r = confirm(n);
                return r ? !0 : !1
            }
        }
    }(jQuery);
    customConfirmationMsg.Types = function () {
        return {
            tracked: function (e, t, n) {
                var i = 0;
                return $.each(e.map(function () {
                    return $(this).data(t)
                }).get(), function () {
                    i += this || 0
                }), humanizeDuration(1e3 * i)
            },
            project: function (e, t, n) {
                var i = "project",
                    r = "projects";
                "both" === n ? (i += " / work order", r += " / work orders") : "work_orders" === n && (i = "work order", r = "work orders");
                var a = "1 " + i,
                    o = $.unique(e.map(function () {
                        return $(this).data(t)
                    }).get()).length;
                return 1 !== o && (a = o + " " + r), a
            },
            screen: function (e, t, n) {
                var i = 0,
                    r = "1 screen";
                return $.each(e.map(function () {
                    return $(this).data(t)
                }).get(), function () {
                    i += this || 0
                }), 1 !== i && (r = i + " screens"), r
            }
        }
    }(jQuery);
    var checkbox_selector = ".js-select-activity";
    return {
        batchActionsSettings: function (e) {
            var t = {
                screenCount: 0,
                canDelScreens: !0,
                canDelActivity: !0,
                canMoveActivity: !0
            };
            return $.each($(checkbox_selector + ":checked", e).map(function () {
                return {
                    screen: $(this).data("screen"),
                    delScreen: $(this).data("perm-del-screen"),
                    moveActivity: $(this).data("perm-move-activity"),
                    delActivity: $(this).data("perm-del-activity")
                }
            }).get(), function () {
                t.screenCount += this.screen || 0, t.canDelScreens &= this.delScreen, t.canMoveActivity &= this.moveActivity, t.canDelActivity &= this.delActivity
            }), t
        },
        updateBatchActionButtons: function (e, t) {
            var n = activityBatchActions.batchActionsSettings(t),
                i = $(".all-screens", e),
                r = $(".all-bin", e),
                a = $(".all-move", e),
                o = n.screenCount > 0,
                s = n.canDelActivity ? r.data("enabledTitle") : r.data("disabledTitle"),
                l = n.canMoveActivity ? a.data("enabledTitle") : a.data("disabledTitle");
            if (n.canDelScreens) {
                var c = o ? i.data("enabledTitle") : i.data("disabledTitle");
                i.show().attr({
                    "data-original-title": c,
                    disabled: !o
                })
            } else i.hide();
            r.attr({
                "data-original-title": s,
                disabled: !n.canDelActivity
            }), a.attr({
                "data-original-title": l,
                disabled: !n.canMoveActivity
            })
        },
        bgImageClick: function (e) {
            e.on("click", "div.screenshot-activity-overlay", function (t) {
                if (!$(t.target).hasClass("no-action")) {
                    var n = $(t.target).find("input:first");
                    void 0 === n || 0 !== n.data("screen") && !e.hasClass("selection-mode") ? $(t.target).closest(".shot-body").find(".slot-view").trigger("click") : (n.prop("checked", !n.prop("checked")), n.trigger("change"))
                }
            }), $(".activities-wrapper").on("click", ".screenshot-activity-overlay .slot-view", function (e) {
                e.preventDefault(), e.stopImmediatePropagation(), Activity.gallery_wrapper.data("lightGallery").build(parseInt($(this).data("slide")))
            })
        },
        deleteAll: function (e, t) {
            e.on("click", "a.all-bin, a.all-unlock, a.all-screens", function (n) {
                if ("disabled" === $(this).attr("disabled")) return !1;
                n.preventDefault(), n.stopPropagation();
                var i = t.find(checkbox_selector + ":checked"),
                    r = $(this).data("confirmation");
                if (void 0 !== r && !customConfirmationMsg.message($(this), i)) return !1;
                var a = i.map(function () {
                    return $(this).data("ts")
                }).get();
                return void 0 === a && 0 === a.length ? (e.removeClass("in"), !1) : void (void 0 === r ? AjaxDialog.run($(this).attr("href") + "&" + $.param({
                    time_slots: a
                })) : $.ajax($(this).data("url"), {
                    method: "DELETE",
                    data: {
                        time_slots: a
                    }
                }).done(function (e, n, i) {
                    t.find(checkbox_selector + ":checked").prop("checked", !1), window.location.reload()
                }))
            })
        },
        moveAll: function (e, t) {
            e.on("click", "a.all-move", function (n) {
                if ("disabled" === $(this).attr("disabled")) return !1;
                n.preventDefault(), n.stopPropagation();
                var i = t.find(checkbox_selector + ":checked"),
                    r = i.map(function () {
                        return "time_slots[]=" + $(this).data("ts")
                    }).get().join("&");
                if (void 0 !== r && r.length > 0) {
                    var a = $(this).data("url");
                    AjaxDialog.run(a + "&" + r)
                } else e.removeClass("in")
            })
        },
        toggleActionList: function (e, t, n) {
            n > 0 ? (e.find(".selected-items").text(1 === n ? "1 Screen selected" : n + " Screens selected"), e.addClass("in"), t.addClass("selection-mode"), activityBatchActions.updateBatchActionButtons(e, t)) : (e.removeClass("in"), t.removeClass("selection-mode"))
        },
        onThumbHover: function (e) {
            e.on("mouseenter mouseleave", ".top-shot-body, .action-hover", function () {
                $(this).find("label").toggleClass("hover"), $(this).closest(".hour").find("label:first").toggleClass("hover");
            })
        },
        initMain: function (e) {
            var t = $("#batch_actions_wrapper");
            t.show(), activityBatchActions.bgImageClick(e), activityBatchActions.deleteAll(t, e), activityBatchActions.moveAll(t, e), activityBatchActions.onThumbHover(e), setupBatchActions(e, {
                toggleActionList: activityBatchActions.toggleActionList
            }), t.on("click", ".select-all", function (t) {
                t.preventDefault(), t.stopPropagation(), e.find(checkbox_selector + ":not(:checked)").prop("checked", !0).trigger("change")
            }).on("click", ".cancel", function (t) {
                t.preventDefault(), t.stopPropagation(), e.find(checkbox_selector + ":checked").prop("checked", !1).trigger("change")
            })
        }
    }
}(jQuery),
    AttendanceScheduler = function (e) {
        function t(t) {
            switch (t) {
                case AttendanceScheduler.WEEK_VIEW_NAME:
                    return e(".fc-time-grid");
                case AttendanceScheduler.MEMBERS_VIEW_NAME:
                default:
                    return e(".fc-time-area")
            }
        }

        function n(e, t) {
            switch (t) {
                case AttendanceScheduler.WEEK_VIEW_NAME:
                    return e.find(".fc-slats");
                case AttendanceScheduler.MEMBERS_VIEW_NAME:
                default:
                    return e.find(".fc-content")
            }
        }

        function i(e, t) {
            switch (t) {
                case AttendanceScheduler.WEEK_VIEW_NAME:
                    return e.find("tr td.fc-widget-content:not(.fc-time)");
                case AttendanceScheduler.MEMBERS_VIEW_NAME:
                default:
                    return e.find("tr td.fc-widget-content:not(.fc-time)")
            }
        }

        function r(t, n, i, r) {
            var a = e.extend({}, t[0].getBoundingClientRect());
            return r === AttendanceScheduler.WEEK_VIEW_NAME && (i ? a.bottom = a.bottom + n : a.top = a.top - n), a
        }

        function a(t, n, i, r) {
            return e("<div />").addClass(r + (i ? "" : " invisible")).css({
                width: t,
                height: n
            })
        }

        function o() {
            return e('<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><circle fill="#2AA7FF" cx="10" cy="10" r="10"shape-rendering="geometricPrecision"></circle><path d="M13.5,9.5 L10.5,9.5 L10.5,6.5 C10.5,6.2235 10.2765,6 10,6 C9.724,6 9.5,6.2235 9.5,6.5 L9.5,9.5 L6.5,9.5 C6.224,9.5 6,9.7235 6,10 C6,10.2765 6.224,10.5 6.5,10.5 L9.5,10.5 L9.5,13.5 C9.5,13.7765 9.724,14 10,14 C10.2765,14 10.5,13.7765 10.5,13.5 L10.5,10.5 L13.5,10.5 C13.7765,10.5 14,10.2765 14,10 C14,9.7235 13.7765,9.5 13.5,9.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" shape-rendering="geometricPrecision"></path></svg>')
        }

        function s(t) {
            var n = t.find(".job-popover-body").data("schedule"),
                i = RecurringScheduleUtils.humanizeRecurringSchedule(n),
                r = !!n && "once" !== n.repeat_type;
            r && i && t.find(".job-daterange").prepend(e("<i />").addClass("hi hi-refresh a-tooltip").attr("title", i)), t.find(".hi-refresh").addClass("a-tooltip").attr("title", i)
        }

        function l(t, n, i) {
            t.popover({
                content: n,
                placement: I(i),
                trigger: "manual",
                sanitize: !1,
                html: !0,
                container: e("body")
            }), t.addClass("has-popover"), t.data("bs.popover").tip().addClass("attendance-popover"), t.one("shown.bs.popover", function () {
                var t = e(".popover.attendance-popover"),
                    n = !!t.find(".job-popover-body").length;
                n && s(t), initTooltip(t)
            })
        }
        var c, u, d, h, f, p = 500,
            m = !0,
            g = !1,
            v = [],
            y = function () {
                return SchedulesTimeZone.app.getCurrentTimeZone()
            },
            b = function () {
                return h || AttendanceScheduler.calendarElement.data("timezone-name")
            },
            w = function () {
                return u || AttendanceScheduler.calendarElement.data("now")
            },
            _ = function () {
                return d || AttendanceScheduler.calendarElement.data("current-hour")
            },
            x = function () {
                var e = y();
                return "mine" === e ? 1 : 0
            },
            k = function () {
                return e("#attendance-schedule-user").val()
            },
            C = function () {
                return e("#attendance-schedule-events").val()
            },
            S = function () {
                return window.innerWidth <= p ? AttendanceScheduler.DAY_VIEW_NAME : AttendanceScheduler.MEMBERS_VIEW_NAME
            },
            A = function () {
                return AttendanceScheduler.calendarElement.fullCalendar("getView")
            },
            T = function (t) {
                g = !0, m = !0, AttendanceScheduler.calendarElement.fullCalendar("changeView", t);
                var n = e("select#attendance-schedule-user"),
                    i = void 0 !== AttendanceScheduler.calendarElement.data("is-regular-member");
                if (i || Q(t)) {
                    var r = AttendanceScheduler.calendarElement.data("current-user-id");
                    n.val(r).trigger("change")
                } else n.val("").trigger("change");
                (ee(t) || J(t)) && E();
                var a = e(".schedules-page .members-nav"),
                    o = e(".max-users-info-tip"),
                    s = a.find("a:first-child"),
                    l = a.find("a:last-child");
                J(t) ? (o.addClass("hidden"), a.removeClass("hidden"), s.attr("href", document.location.pathname + "?page=1"), l.attr("href", document.location.pathname + "?page=2"), window.addEventListener("resize", E)) : (window.history && window.history.replaceState && window.history.replaceState(null, null, window.location.pathname), a.addClass("hidden"), window.removeEventListener("resize", E))
            },
            E = function () {
                if (e(".fc-week-view .fc-body > tr > .fc-widget-content > .fc-scroller").length > 0) {
                    var t = e(".fc-week-view .fc-body > tr > .fc-widget-content > .fc-scroller"),
                        n = t.offset().top,
                        i = e(window).height(),
                        r = i - n;
                    t.css("min-height", r + "px")
                }
            },
            D = function () {
                AttendanceScheduler.calendarElement.fullCalendar("refetchResources")
            },
            $ = function () {
                AttendanceScheduler.calendarElement.fullCalendar("refetchEvents")
            },
            M = function (e) {
                return e.hasClass("has-popover")
            },
            R = function () {
                e(".has-popover", AttendanceScheduler.calendarParent).removeClass("has-popover"), e(".popover:not(.vue-app-time-picker)").remove()
            },
            I = function (e) {
                switch (e.name) {
                    case AttendanceScheduler.DAY_VIEW_NAME:
                    case AttendanceScheduler.WEEK_VIEW_NAME:
                    case AttendanceScheduler.MEMBERS_VIEW_NAME:
                    default:
                        return "auto"
                }
            },
            P = function (t, n, i) {
                switch (t.name) {
                    case AttendanceScheduler.MEMBERS_VIEW_NAME:
                        return e(i.target).parents(".fc-event").first();
                    case AttendanceScheduler.WEEK_VIEW_NAME:
                        return "Shift" === n.type ? e(i.target).parents(".fc-event").first() : e(i.target);
                    default:
                        return e(i.target)
                }
            },
            H = function (e) {
                var t = {};
                e.forEach(function (e) {
                    "Holiday" === e.type && (t[e.holidayId] = t[e.holidayId] || [], t[e.holidayId].push(e))
                });
                for (var n in t) {
                    var i = t[n],
                        r = i[0];
                    r.members = i.map(function (e) {
                        return {
                            avatar: e.avatar
                        }
                    }), i.slice(1, i.length).forEach(function (t) {
                        e.splice(e.indexOf(t), 1)
                    })
                }
            },
            O = function (e) {
                for (var t = 0, n = {}, i = [], r = e.length; r > t; t++) {
                    var a = e[t];
                    if ("Job" === a.type) {
                        if (n[a.jobId] = n[a.jobId] || 0, n[a.jobId] > 0) continue;
                        i.push(a), n[a.jobId]++
                    } else i.push(a)
                }
                return i
            },
            j = function (e) {
                return e.map(function (e) {
                    var t = e.start ? moment.tz(e.start, b()) : null,
                        n = e.end ? moment.tz(e.end, b()) : null,
                        i = n && t ? n.diff(t, "days") : 1;
                    return (e.allDay || i > 1) && (e.realStart = t.clone(), e.realEnd = n.clone(), e.start = moment.tz(t, b()).startOf("day"), e.end = moment.tz(moment(n).add(1, "d"), b()).endOf("day")), e
                })
            },
            N = function (e) {
                return e.map(function (e) {
                    return e.allDay && (e.allDay = !1, e.end = e.end ? moment.parseZone(e.end).subtract(1, "day") : null), e
                })
            },
            z = function (t, n) {
                var i = F(t),
                    r = moment(t.start).utc(),
                    a = moment.tz.zone(b()).utcOffset(r),
                    o = moment.tz.zone(c).utcOffset(r),
                    s = o - a;
                if (i > 1 && 0 !== s) {
                    var l = parseInt(n.outerWidth()),
                        u = l / i,
                        d = Math.round(l - u),
                        h = s * u / 1440,
                        f = h;
                    s > 0 ? f = h : i >= 2 && (f = h + u), n.append('<div class="fc-timezone-overflow" style="width: ' + d + "px; left: " + Math.round(f) + 'px" />');
                    var p = e(".fc-timezone-overflow", n),
                        m = p.css("background-color");
                    p.css("background-color", n.css("background-color")), n.css("background-color", m)
                }
            },
            L = function (e) {
                switch (e.type) {
                    case "Holiday":
                        return void 0 === e.members ? "" : e.members.length.toString() + " members";
                    case "Time off request":
                        return e.userRealName;
                    case "Shift":
                        return e.userRealName;
                    case "Job":
                        return "";
                    default:
                        return e.title
                }
            },
            F = function (e) {
                return e.end ? Math.round(moment.duration(moment.parseZone(e.end).diff(moment.parseZone(e.start))).asDays()) : 0
            },
            B = function (e, t) {
                if (ee(t)) return "";
                if (e.end) {
                    var n, i, r = 1 === x(),
                        a = e.end.diff(e.start, "minute");
                    if (a) {
                        if (60 > a) return a.toString() + (1 === a ? " minute" : " minutes");
                        if (1439 > a) return i = Math.round(moment.duration(e.end.diff(e.start)).asHours()), i.toString() + (1 === i ? " hour" : " hours")
                    }
                    if (n = Math.round(moment.duration(e.end.diff(e.start)).asDays()), n = !r && n > 1 ? n - 1 : n, n > 1) return n + " days"
                }
                return "All day"
            },
            W = function (e) {
                var t, n = TimeInput.parse_time(e.find("#attendance_schedule_start_time").val()),
                    i = TimeInput.parse_time(e.find("#attendance_schedule_stop_time").val()),
                    r = TimeUtils.parse_internal_date(e.find("#attendance_schedule_start_date").val()),
                    a = TimeUtils.parse_internal_date(e.find("#attendance_schedule_stop_date").val());
                n && i && (r.set({
                    hour: n.hours(),
                    minutes: n.minutes()
                }), a.set({
                    day: r.day(),
                    month: r.month(),
                    year: r.year(),
                    hour: i.hours(),
                    minutes: i.minutes()
                }), t = .94 * moment.duration(a.diff(r)).asHours(), 0 > t || t > 24 || e.find("#attendance_schedule_minimum_hours").val(t.toFixed(2)))
            },
            U = function (e) {
                return e ? e.id : void 0
            },
            q = function (e) {
                var t, n, i;
                t = e.find("#start_date").val(), e.find("input#stop_date").val(t).attr("value", t), i = e.find("#attendance_schedule_stop_date"), n = e.find("#attendance_schedule_start_date"), i.val(n.val())
            },
            G = function (e, t) {
                return ee(t) ? N(e) : j(e)
            },
            Y = function (t) {
                var n = "",
                    i = 1 === x(),
                    r = c !== b(),
                    a = X(t, "start"),
                    o = t.end ? X(t, "end") : null;
                return !i && r ? (n = "<span>Start " + a + V(i, t) + "</span>", o && (n += "<span>End " + o + V(i, t) + "</span>")) : n = o ? a + " - " + o : "Start " + a, e('<div class="fc-time-range"/>').append(n)
            },
            V = function (e, t) {
                return e || "Holiday" === t.type ? "" : " " + moment.tz(t.start, b()).format("z")
            },
            X = function (e, t) {
                var n = "start" === t ? e.realStart || e.start : e.realEnd || e.end;
                return moment.parseZone(n).format(TimeUtils.Formats.time_without_seconds["12hr"]).toLowerCase()
            },
            K = 12,
            Z = function (t, n, i, r) {
                n = n.trim();
                var a = i.shiftStatus && !!i.shiftStatus.trim(),
                    o = n.length > K,
                    s = t.find(".fc-title"),
                    l = e("<span />"),
                    c = B(i, r);
                s.addClass("d-flex align-items-center"), r !== AttendanceScheduler.WEEK_VIEW_NAME && s.addClass("justify-content-between"), i.isCompleted && l.addClass("fc-completed");
                var u = l.text(n);
                return a && u.css({
                    display: "block",
                    width: "50%",
                    flex: "1 auto",
                    overflow: "hidden",
                    whiteSpace: "nowrap",
                    textOverflow: "ellipsis"
                }), s.html(u).attr("title", o && a ? n : "").addClass("a-tooltip"), c && s.append("<span>" + c + "</span>"), s
            },
            Q = function (e) {
                return e === AttendanceScheduler.DAY_VIEW_NAME || e === AttendanceScheduler.WEEK_VIEW_NAME
            },
            J = function (e) {
                return e === AttendanceScheduler.MEMBERS_VIEW_NAME
            },
            ee = function (e) {
                return e === AttendanceScheduler.WEEK_VIEW_NAME
            },
            te = function (e, t) {
                t.page_count <= 1 ? e.addClass("hidden") : e.removeClass("hidden")
            },
            ne = function (e, t, n) {
                var i = e.find("a:first-child"),
                    r = e.find("a:last-child");
                n > 1 ? i.removeAttr("disabled") : i.attr("disabled", "disabled"), n < t.page_count ? r.removeAttr("disabled") : r.attr("disabled", "disabled")
            },
            ie = function (e, t) {
                var n = e.find(".remaining-count");
                e.find(".view-max").text(t.per_page_limit), t.remaining_count > 0 ? (n.find(".count").text(t.remaining_count), n.removeClass("hidden")) : n.addClass("hidden"), e.removeClass("hidden")
            },
            re = function () {
                VueWorkOrders.app.openIcalendarDialog({
                    url: f,
                    members_filter: k() || [],
                    events_filter: C() || []
                })
            };
        return AjaxDialog.registerHook("setup", "removeAttendanceScheduleOptionsDialog", function (t, n) {
            e(".remove-attendance-schedule").on("click", function () {
                e("#attendance-schedule-modal").modal("hide")
            }).on("ajax:success", function (t, n, i, r) {
                "refresh-calendar" === n.action && (e("#attendance-schedule-modal-view").modal("hide"), D()), e("#remove-attendance-schedule-options-modal").modal("hide"), AjaxDialog.displayNotifications(n)
            })
        }), AjaxDialog.registerHook("response", "attendanceScheduleDialog", function (t, n) {
            var i = e(this);
            "refresh-calendar" === t.action ? (e("#attendance-schedule-modal-view").modal("hide"), D()) : "replace" === t.action && AttendanceScheduler.initModalFields(i)
        }), AjaxDialog.registerHook("setup", "attendanceScheduleDialog", function (t, n) {
            var i = e(this);
            initTooltip(i), AttendanceScheduler.initModalFields(i), i.hasClass("is-edit") || (i.find("#start_date").on("change", function () {
                AttendanceScheduler.setRepeatDays(i), q(i)
            }), AttendanceScheduler.setRepeatDays(i)), i.find("#attendance_schedule_user_id").on("change", function () {
                var e = i.find("#attendance_schedule_user_id").find(":selected").data("zone");
                i.find("#attendance_schedule_effective_time_zone option[value=1]").text(e), i.find("#attendance_schedule_effective_time_zone").select2().trigger("change")
            })
        }), {
            refetchEvents: function () {
                $()
            },
            initMembersView: function () {
                e.fullCalendar.views.members = {
                    resourceClass: function (t, n) {
                        var i = e.fullCalendar.views.timeline.resourceClass,
                            r = new i(t, n);
                        return r.resourceGrid.renderHeadHtml = function () {
                            return '<span>Members</span><div><label class="unscheduled-toggle-wrapper toggle-switch-wrapper"><input type="checkbox" class="custom-control-input" id="unscheduled-toggle" ' + ("0" === AttendanceScheduler.scheduled ? "checked" : "") + '/><div class="toggle-switch-label">Show unscheduled</div><div class="toggle-switch"></div></label></div>'
                        }, r.timeGrid.renderDateCell = function (e, t) {
                            return '<td class="' + t.join(" ") + '" data-date="' + e.date.format() + '"' + (e.colspan > 1 ? ' colspan="' + e.colspan + '"' : "") + '><div class="fc-cell-content"><div class="scheduler-heading-date"><div class="scheduler-heading-date-day-of-month">' + e.date.format("DD") + '</div><div class="day-month-wrapper"><div class="scheduler-heading-date-day-of-week">' + e.date.format("ddd") + '</div><div class="scheduler-heading-date-month-name">' + e.date.format("MMM") + "</div></div></div></div></td>"
                        }, r
                    }
                }
            },
            initWeekView: function () {
                e.fullCalendar.views.week = {
                    "class": function (t, n) {
                        var i = new e.fullCalendar.AgendaView(t, n);
                        return i.timeGrid.renderHeadDateCellHtml = function (e, t, n) {
                            var i = e.isSame(new Date, "day");
                            return '<td class="fc-day-header ' + (i ? "active" : "") + '" data-date="' + e.format() + '"' + (t > 1 ? ' colspan="' + t + '"' : "") + '><div class="fc-cell-content"><div class="scheduler-heading-date"><div class="scheduler-heading-date-day-of-month">' + e.format("DD") + '</div><div class="day-month-wrapper"><div class="scheduler-heading-date-day-of-week">' + e.format("ddd") + '</div><div class="scheduler-heading-date-month-name">' + e.format("MMM") + "</div></div></div></div></td>"
                        }, i
                    }
                }
            },
            initDayView: function () {
                e.fullCalendar.views.day = {
                    "class": function (t, n) {
                        var i = new e.fullCalendar.views.list["class"](t, n);
                        return i
                    }
                }
            },
            initSchedulerViews: function () {
                AttendanceScheduler.MEMBERS_VIEW_NAME = "members", AttendanceScheduler.WEEK_VIEW_NAME = "week", AttendanceScheduler.DAY_VIEW_NAME = "day", AttendanceScheduler.initMembersView(), AttendanceScheduler.initWeekView(), AttendanceScheduler.initDayView()
            },
            initScheduler: function () {
                AttendanceScheduler.eventURLBase = "schedules/lists/", AttendanceScheduler.usersURLBase = "schedules/calendar_resources", AttendanceScheduler.firstLoad = !0, AttendanceScheduler.scheduled = 1;
                var n = e("#attendance-schedule-add-button").length > 0,
                    i = e(".basic-filters .datepicker").data("date"),
                    r = i || new Date;
                e("#attendance-schedule-calendar-timeline").fullCalendar({
                    refetchResourcesOnNavigate: !0,
                    header: {
                        left: "",
                        center: "",
                        right: ""
                    },
                    defaultDate: r,
                    defaultView: S(window.innerWidth),
                    views: {
                        members: {
                            type: "timeline",
                            duration: {
                                weeks: 1
                            },
                            slotDuration: "24:00"
                        },
                        day: {
                            type: "listDay",
                            duration: {
                                weeks: 1
                            },
                            listDayFormat: "ddd, MMM D"
                        },
                        week: {
                            type: "agendaWeek",
                            titleFormat: "ddd, MMM DD YYYY",
                            timeFormat: "h(:mm)a",
                            allDayText: "",
                            nowIndicator: !0
                        }
                    },
                    firstDay: toMomentWeekday(AttendanceScheduler.calendarElement.data("startWeekOn")),
                    allDaySlot: !1,
                    resourceAreaWidth: "25%",
                    editable: !1,
                    schedulerLicenseKey: "CC-Attribution-NonCommercial-NoDerivatives",
                    now: w,
                    initialNowDate: AttendanceScheduler.calendarElement.data("now"),
                    events: function (t, n, i, r) {
                        if (!v.length) return void r([]);
                        var a = {
                            start: TimeUtils.format_internal_date(t),
                            stop: TimeUtils.format_internal_date(n),
                            user_ids: v,
                            events_filter: C(),
                            active_view: A().name,
                            time_zone: y(),
                            icalendar_members_filter: k()
                        };
                        e.ajax({
                            url: AttendanceScheduler.eventURLBase,
                            data: a
                        }).done(function (e) {
                            var t = A();
                            h = e.timezone, u = e.now, d = e.current_hour, f = e.icalendar_feed_url, previousView = t.name, (t.name === AttendanceScheduler.DAY_VIEW_NAME || t.name === AttendanceScheduler.WEEK_VIEW_NAME) && (H(e.events), e.events = O(e.events)), e.events = G(e.events, t.name), r(e.events || [])
                        }).fail(function () {
                            console.error("Failed fetching events"), r([])
                        })
                    },
                    resourceRender: function (t, n) {
                        var i = e("<img/>").attr({
                            src: t.avatar,
                            width: 25,
                            height: 25,
                            "class": "avatar avatar-speck"
                        });
                        n.find(".fc-cell-content").prepend(i), n.on("click", function () {
                            e("#attendance-schedule-user").val(t.id).trigger("change")
                        })
                    },
                    eventClick: function (t, n, i) {
                        n.preventDefault(), n.stopPropagation();
                        var r = P(i, t, n);
                        if (M(r)) R();
                        else {
                            if (R(), !r.hasClass("has-popover")) {
                                if (t.popoverContent && "Time off request" === t.type && t.className.includes("is-not-approved")) {
                                    var a = e(t.popoverContent),
                                        o = a.find(".shift-count-warning-wrapper"),
                                        s = ~~t.resourceId,
                                        c = {
                                            user_ids: [s],
                                            time_off_request_id: a.eq(0).data("time-off-request"),
                                            start_date: TimeUtils.format_internal_date(t.start),
                                            stop_date: TimeUtils.format_internal_date(t.end)
                                        },
                                        u = AttendanceScheduler.calendarElement.data("shift-count-url");
                                    return e.ajax({
                                        type: "GET",
                                        url: u,
                                        data: c
                                    }).done(function (e) {
                                        a.eq(a.length - 1).append(e.approve_button), o.html(e.warning), e.shift_count > 0 && o.removeClass("hidden"), l(r, a, i), r.popover("show")
                                    })
                                }
                                l(r, t.popoverContent || "popoverContent is missing", i)
                            }
                            r.popover("show")
                        }
                        return !1
                    },
                    eventRender: function (t, n) {
                        var i = A(),
                            r = TimeUtils.format_internal_date(i.start),
                            a = moment.tz(r, b());
                        if (!t.allDay && t.start < a && t.end && t.end.time() < i.nextDayThreshold) return !1;
                        var o, s = A().name,
                            l = "Shift" === t.type ? t.type : t.title,
                            c = J(i.name) ? Y(t) : "",
                            u = t.canViewStatus ? e('<span class="fc-shift-status" style="margin-left: 0; float: right;" />').text(t.shiftStatus) : "";
                        switch (o = "Job" === t.type && t.assignee_count > 1 ? e("<span/>").addClass("more-members-badge light a-tooltip").attr({
                            title: t.assignee_names.join("<br/>"),
                            "data-html": !0
                        }).css("margin-left", 0).html(t.assignee_count.toString()) : t.members ? e('<span class="event-avatar-count">').text(t.members.length) : e("<img/>").attr({
                            src: t.avatar,
                            width: 25,
                            height: 25,
                            "class": "avatar avatar-speck avatar-overlaps"
                        }), t.isPast && n.addClass("fc-past"), s !== AttendanceScheduler.DAY_VIEW_NAME && (n.find(".fc-title").addClass("d-flex align-items-center").addClass(t.shiftStatus && t.shiftStatus.length ? "justify-content-between" : "").css("overflow", "hidden"), u = u ? u.css({
                            marginTop: 0,
                            marginLeft: 8,
                            "float": "none"
                        }) : u), s) {
                            case AttendanceScheduler.MEMBERS_VIEW_NAME:
                                n.find(".fc-time").remove();
                                var d = Z(n, l, t, AttendanceScheduler.MEMBERS_VIEW_NAME);
                                d.after(c).append(u);
                                break;
                            case AttendanceScheduler.WEEK_VIEW_NAME:
                                var h = Z(n, l, t, AttendanceScheduler.WEEK_VIEW_NAME);
                                if (h.prepend(o).prependTo(n.find(".fc-content")), t.allDay) n.append('<span class="event-duration">All day</span>');
                                else if (t.end && t.start) {
                                    var f = t.end.diff(t.start, "minutes");
                                    if (30 >= f || 60 >= f ? n.find(".fc-time").attr("style", "font-weight: normal") : (n.find(".fc-time").remove(), h.after(c).append(u)), 30 >= f) {
                                        var p = n.find("img"),
                                            h = n.find(".fc-title");
                                        n.find(".fc-content").attr("style", "padding: 3px 5px !important;"), p.attr("style", (p.attr("style") || "") + "width: 15px !important; height: 15px !important;"), h.attr("style", (h.attr("style") || "") + "font-size: 12px !important; margin-top: 1px !important;"), n.find(".fc-time").css("float", "right")
                                    }
                                    f > 30 && 60 >= f && n.find(".fc-title").attr("style", "margin-top: 3px !important;")
                                }
                                break;
                            case AttendanceScheduler.DAY_VIEW_NAME:
                                var m = B(t, AttendanceScheduler.DAY_VIEW_NAME);
                                n.html('<td style="background-color: ' + t.color + "; color: " + t.textColor + ';"><div class="fc-day-event-wrapper d-flex align-items-center"><div class="fc-day-event-content pl-5"></div><div class="fc-day-event-time"></div></div></td>'), t.members ? (t.members.slice(0, 3).forEach(function (t, i) {
                                    n.find(".fc-day-event-wrapper").prepend(e("<img/>").attr({
                                        src: t.avatar,
                                        width: 25,
                                        height: 25,
                                        "class": "avatar avatar-speck avatar-overlaps"
                                    }))
                                }), t.members.length > 3 && e("<div class='fc-day-event-more-members'>+" + (t.members.length - 3) + "</div>").insertBefore(n.find(".fc-day-event-content"))) : n.find(".fc-day-event-wrapper").prepend(o), n.find(".fc-day-event-content").html(e("<span />").text(l).append(u ? u.css("margin-left", "16px") : "").addClass("d-flex align-items-center").addClass(t.isCompleted ? "fc-completed" : "")).append(e('<div class="fc-day-event-member" />').html(L(t))), n.find(".fc-day-event-time").append("<div>" + m + "</div>").append(c);
                                break;
                            default:
                                throw new Error("The view name, '" + s.toString() + "', is invalid.")
                        }
                    },
                    eventAfterRender: function (e, t, n) {
                        1 !== x() && J(n.name) && setTimeout(function () {
                            z(e, t)
                        }, 100)
                    },
                    selectable: n,
                    selectHelper: !0,
                    select: function (e, t, n, i, r) {
                        AttendanceScheduler.createAttendanceShiftOnSelection(e, t, n, i, r)
                    },
                    loading: function (t) {
                        e(".attendance-view-switcher").toggleClass("disabled", t), t ? AttendanceScheduler.calendarElement.addClass("is-loading") : (AttendanceScheduler.calendarElement.removeClass("is-loading"), AttendanceScheduler.firstLoad = !1)
                    },
                    resources: function (n, i, r) {
                        var a = document.location.search.match(/page=(?<page>\d+)/),
                            o = e("#attendance-schedule-user").val(),
                            s = a && a.groups.page || 1,
                            l = A(),
                            c = {
                                start: TimeUtils.format_internal_date(i),
                                stop: TimeUtils.format_internal_date(r),
                                scheduled: AttendanceScheduler.scheduled,
                                user_ids: o || [],
                                time_zone: y(),
                                calendar_view: l.name
                            };
                        return J(l.name) && (c.page = s), g && m ? (m = !1, n([])) : void e.ajax({
                            url: AttendanceScheduler.usersURLBase,
                            data: c
                        }).done(function (i) {
                            if (J(l.name)) {
                                var r = e(".schedules-page .members-nav");
                                te(r, i), ne(r, i, s)
                            } else {
                                var a = e(".max-users-info-tip");
                                ie(a, i)
                            }
                            t(l.name).data("can-manage", i.can_manage), v = i.users.map(function (e) {
                                return e.id
                            }), $(), n(i.users)
                        }).fail(function () {
                            console.error("Failed fetching users"), n([])
                        })
                    },
                    windowResize: function () {
                        S() === AttendanceScheduler.DAY_VIEW_NAME && T(AttendanceScheduler.DAY_VIEW_NAME), setTimeout(function () {
                            AttendanceScheduler.initializeEmptyStates()
                        }, 250)
                    },
                    eventAfterAllRender: function () {
                        AttendanceScheduler.initializeTooltips(), AttendanceScheduler.initializeEmptyStates()
                    },
                    viewRender: function (t) {
                        var n = e(".weekly-range-input > input");
                        switch (R(), e(".view-toggle").removeClass("active"), n.val(t.title), n.data("daterangepicker") && (n.data("daterangepicker").setStartDate(t.start), n.data("daterangepicker").setEndDate(t.start)), t.name) {
                            case AttendanceScheduler.MEMBERS_VIEW_NAME:
                                var i = e("#members-view-toggle");
                                i.parent().addClass("active");
                                break;
                            case AttendanceScheduler.WEEK_VIEW_NAME:
                                var r = e("#week-view-toggle");
                                r.parent().addClass("active");
                                break;
                            case AttendanceScheduler.DAY_VIEW_NAME:
                                var a = e("#day-view-toggle");
                                a.parent().addClass("active");
                                break;
                            default:
                                throw new Error("The view name, '" + t.name.toString() + "', is invalid.")
                        }
                    },
                    height: "auto"
                })
            },
            initializeTooltips: function () {
                initTooltip(e(document))
            },
            initializeEmptyStates: function () {
                var s = A().name;
                if (s !== AttendanceScheduler.DAY_VIEW_NAME) {
                    var l = "plus-helper",
                        c = "plus-helper-wrapper",
                        u = "plus-helper-container",
                        d = "." + u;
                    e(d).remove();
                    var h = t(s),
                        f = h.find(".fc-bg"),
                        p = n(h, s),
                        m = f.find(".fc-day:not(.fc-axis)"),
                        g = m.width() + 1,
                        v = i(p, s),
                        y = e(".fc-event"),
                        b = o(),
                        w = h.data("can-manage");
                    if (v.each(function (t) {
                        var n = e(this),
                            i = n.height(),
                            o = e("<div />").addClass(u),
                            d = !n[0].className.trim();
                        J(s) && o.addClass("members-container"), n.append(o), m.each(function (e) {
                            var n = t % 2 === 0,
                                u = a(g, i, w, c),
                                h = b.clone().addClass(l + (n ? " even" : " odd"));
                            J(s) && h.addClass("full"), d && u.addClass("top-section-plus-icon"), u.append(h), o.append(u);
                            for (var f = r(u, i, n, s), p = 0; p < y.length; p++) {
                                var m = y[p].getBoundingClientRect(),
                                    v = !(f.right < m.left || f.left > m.right || f.bottom < m.top || f.top > m.bottom);
                                if (v) {
                                    u.addClass("overlaps");
                                    break
                                }
                            }
                        })
                    }), s === AttendanceScheduler.WEEK_VIEW_NAME) {
                        var _ = e(".fc-day-grid"),
                            x = _.find(".fc-content-skeleton td:not(.fc-axis):not(.fc-event-container)");
                        x.each(function () {
                            var t = e(this),
                                n = t.height(),
                                i = e("<div />").addClass(u),
                                r = a(g, n, w, c);
                            i.append(r.append(b.clone().addClass(l))), t.append(i)
                        })
                    }
                }
            },
            createAttendanceShiftOnSelection: function (t, n, i, r, a) {
                var o = {
                    attendance_schedule: {
                        start_date: t.year() + "-" + (t.month() + 1) + "-" + t.date(),
                        start_time: TimeUtils.format_time(TimeUtils.parse_internal_time("09:00"), "auto"),
                        stop_date: t.year() + "-" + (t.month() + 1) + "-" + t.date(),
                        stop_time: TimeUtils.format_time(TimeUtils.parse_internal_time("17:00"), "auto"),
                        minimum_hours: 0,
                        effective_timezone: x(),
                        user_id: U(a)
                    }
                };
                (r.name === AttendanceScheduler.WEEK_VIEW_NAME || r.name === AttendanceScheduler.MEMBERS_VIEW_NAME) && (o.attendance_schedule.start_time = TimeUtils.format_time(TimeUtils.parse_internal_time(t), "auto"), o.attendance_schedule.stop_time = TimeUtils.format_time(TimeUtils.parse_internal_time(n), "auto"), o.attendance_schedule.stop_date = n.year() + "-" + (n.month() + 1) + "-" + n.date());
                var s = e("#attendance-schedule-add-button").attr("href");
                void 0 !== s && (s += "?" + e.param(o), AjaxDialog.run(s))
            },
            initToolbar: function (e) {
                e.find(".js-filter-date-actions.prev").on("click", function (e) {
                    e.preventDefault(), AttendanceScheduler.calendarElement.fullCalendar("prev")
                }), e.find(".js-filter-date-actions.next").on("click", function (e) {
                    e.preventDefault(), AttendanceScheduler.calendarElement.fullCalendar("next")
                }), e.find(".js-filter-date-actions.today").on("click", function (e) {
                    e.preventDefault(), AttendanceScheduler.calendarElement.fullCalendar("today")
                }), AttendanceScheduler.initWeekPicker(e)
            },
            initWeekPicker: function (e) {
                setupDatePickers(e, {
                    onchange: function (e, t, n) {
                        AttendanceScheduler.calendarElement.fullCalendar("gotoDate", t)
                    }
                })
            },
            checkScheduleRepeatType: function (e) {
                var t = e.find("#attendance_schedule_repeat_schedule").val();
                "0-0" === t ? (e.find(".repeat-options").addClass("hide"), e.find("#repeat_until").val("")) : e.find(".repeat-options").removeClass("hide")
            },
            setRepeatDays: function (e) {
                var t = e.find("#start_date").data("daterangepicker").startDate.day();
                e.find("[name='attendance_schedule[days][]']").attr("checked", !1).eq(t).attr("checked", !0)
            },
            initModalFields: function (e) {
                setupDatePickers(e), e.hasClass("is-edit") || W(e), AttendanceScheduler.initTimeFields(e), e.find("#attendance_schedule_start_time, #attendance_schedule_stop_time, #attendance_schedule_start_date, #attendance_schedule_stop_date").on("change", function () {
                    W(e)
                }), AttendanceScheduler.checkScheduleRepeatType(e), e.find("#attendance_schedule_repeat_schedule").on("change", function () {
                    AttendanceScheduler.checkScheduleRepeatType(e)
                })
            },
            initTimeFields: function (t) {
                var n = function (t) {
                    var n = t.find("input"),
                        i = TimeInput.parse_time(n.val());
                    i ? (t.removeClass("has-error"), t.find(".help-block").remove(), n.val(TimeUtils.format_time(i, !1))) : (t.addClass("has-error"), t.find(".help-block").remove(), t.append(e('<span class="help-block">Please enter a valid time</span>')))
                };
                t.on("change", ".attendance_schedule_start_time, .attendance_schedule_stop_time", function () {
                    n(e(this))
                }), t.on("blur", ".attendance_schedule_start_time, .attendance_schedule_stop_time", function () {
                    n(e(this))
                })
            },
            setBaseTimezone: function () {
                c = b()
            },
            initChangeUser: function () {
                e("select#attendance-schedule-user").on("change", D)
            },
            initChangeEvents: function () {
                e("select#attendance-schedule-events").on("change", $)
            },
            initTimeOffRequestStatusButtons: function (t) {
                e("body").on("click", ".deny-time-off-request", function (t) {
                    var n = e(t.target).attr("href");
                    return e.ajax({
                        url: n,
                        type: "POST",
                        data: {
                            time_off_request: {
                                status: 2,
                                response: "Denied through the schedules calendar"
                            }
                        }
                    }).done(function (e) {
                        $(), AjaxDialog.displayNotifications({
                            alert: "Time off request denied."
                        }), R()
                    }).fail(function (e) {
                        AjaxDialog.displayNotifications({
                            alert: "Something went wrong. Try again."
                        })
                    }), !1
                }), e("body").on("click", ".approve-time-off-request", function (t) {
                    var n = e(t.target).attr("href"),
                        i = e(t.target).data("remove-shifts"),
                        r = {
                            time_off_request: {
                                status: 1,
                                response: "Approved through the schedules calendar"
                            }
                        };
                    return i && (r.time_off_request.remove_shifts = i, e(".time-off-request-warning-step-btn").prop("disabled", !0)), e.ajax({
                        url: n,
                        type: "POST",
                        data: r
                    }).done(function (t) {
                        $(), AjaxDialog.displayNotifications({
                            alert: "Time off request approved."
                        }), R(), e("#time-off-confirmation-step-modal").modal("hide")
                    }).fail(function (e) {
                        AjaxDialog.displayNotifications({
                            alert: "Something went wrong. Try again."
                        })
                    }), !1
                })
            },
            initPopoverCloseActions: function (t) {
                e("body").on("click", ".close-popover", R), e("body").on("click", ".approve-time-off-request", R), e("body").on("click", ".deny-time-off-request", R), e("body").on("click", ".delete-shift[class^=not-allowed]", R), e("body").on("click", ".edit-shift[class^=not-allowed]", R), e("body").on("click", ".edit-job", R), e("body").on("click", ".view-job", R), e("body").on("click", function (t) {
                    var n = e(t.target);
                    n.hasClass("popover-content") || n.parents(".popover-content, .app-confirm").length > 0 || R()
                })
            },
            initPopoverWorkOrderActions: function (t) {
                e("body").on("click", ".view-job, .edit-job", function (t) {
                    t.preventDefault(), t.stopPropagation();
                    var n = e(t.target),
                        i = n.data();
                    if (R(), window.VueWorkOrders && i.workOrderId && i.jobId) {
                        var r = n.hasClass("view-job") ? VueWorkOrders.app.openViewJobDialog(i.workOrderId, i.jobId, b()) : VueWorkOrders.app.openEditJobDialog(i.workOrderId, i.jobId, b());
                        r["catch"](function () {
                            AjaxDialog.displayNotifications({
                                alert: "Something went wrong. Try again."
                            })
                        })
                    } else AjaxDialog.displayNotifications({
                        alert: "Something went wrong. Try again."
                    })
                }), e("body").on("click", ".delete-job", function (t) {
                    t.preventDefault(), t.stopPropagation();
                    var n = e(t.target).data();
                    if (window.VueWorkOrders && n.workOrderId && n.jobId) {
                        var i = VueWorkOrders.app.openDeleteJobDialog(n.workOrderId, n.jobId);
                        i.then(function (e) {
                            e && e.success && (R(), $())
                        })["catch"](function () {
                            AjaxDialog.displayNotifications({
                                alert: "Something went wrong. Try again."
                            })
                        })
                    } else AjaxDialog.displayNotifications({
                        alert: "Something went wrong. Try again."
                    })
                })
            },
            initViewToggles: function () {
                var t = e('.view-toggle input[type="radio"]');
                t.on("change", function (n) {
                    if (!e(".attendance-view-switcher").hasClass("disabled")) {
                        var i = e(n.target),
                            r = i.val();
                        if (r === A().name) return;
                        t.removeAttr("checked"), i.attr("checked", "checked"), T(r)
                    }
                })
            },
            initUnscheduledToggle: function (t) {
                t.on("change", "#unscheduled-toggle", function (t) {
                    e(this).is(":checked") ? AttendanceScheduler.scheduled = "0" : AttendanceScheduler.scheduled = "1", AttendanceScheduler.calendarElement.fullCalendar("refetchResources")
                })
            },
            initTimeZoneDropdown: function (e) {
                SchedulesTimeZone.app.$on("time-zone-changed", $)
            },
            initNowIndicator: function (t) {
                setInterval(function () {
                    if (A().name === AttendanceScheduler.WEEK_VIEW_NAME) {
                        var t = _();
                        e('.fc-now-indicator[data-hour!="' + t + '"]').remove()
                    }
                }, 500)
            },
            initCalendarDialog: function () {
                e("a#attendance-schedule-ical-url").on("click", re)
            },
            initMain: function (t) {
                e(function () {
                    e(".content-wrapper").css("overflow", "visible"), e(".hs-full-calendar .members-nav a").on("click", function (e) {
                        return e.target.hasAttribute("disabled") ? !1 : void 0
                    }), AttendanceScheduler.calendarElement = e("#attendance-schedule-calendar-timeline"), AttendanceScheduler.calendarParent = t, AttendanceScheduler.initSchedulerViews(), AttendanceScheduler.initScheduler(), AttendanceScheduler.initToolbar(e(".basic-filters")), AttendanceScheduler.initChangeUser(), AttendanceScheduler.initChangeEvents(), AttendanceScheduler.initViewToggles(), AttendanceScheduler.initUnscheduledToggle(t), AttendanceScheduler.initTimeOffRequestStatusButtons(t), AttendanceScheduler.initPopoverCloseActions(t), AttendanceScheduler.initPopoverWorkOrderActions(t), AttendanceScheduler.initTimeZoneDropdown(t), AttendanceScheduler.initNowIndicator(t), AttendanceScheduler.initTimeFields(t), AttendanceScheduler.initCalendarDialog(), AttendanceScheduler.setBaseTimezone()
                })
            }
        }
    }(jQuery);
$(function () {
    $("#attendance-schedule-calendar-timeline").each(function () {
        AttendanceScheduler.initMain($(this))
    })
}), BudgetUtils = {
    setRate: function (e) {
        var t, n = $("#currency-options").data("options"),
            i = e.nextAll("p.help-block").children(".value"),
            r = e.data("rate"),
            a = e.val(),
            o = "";
        if (o = i.hasClass("current") ? " for this week" : " per week", r && a)
            if (t = parseFloat(a), 0 > t) i.text("Invalid weekly limit");
            else {
                var s = parseFloat(r) * t;
                i.text(s.formatMoney(n) + o)
            }
        else a ? (t = parseFloat(a), t = Math.round(100 * t) / 100, i.text(t + " hours" + o)) : i.text("No weekly limit")
    }
}, $(function () {
    $("ul#clients_nav_tabs").each(function () {
        function e(e) {
            void 0 !== e.notice && (void 0 !== typeof Storage && sessionStorage.setItem("flash_notice", e.notice), window.location.reload(!0))
        }
        if ("undefined" != typeof Storage) {
            const t = sessionStorage.getItem("flash_notice");
            null !== t && (sessionStorage.removeItem("flash_notice"), AjaxDialog.displayNotifications({
                notice: t
            }))
        }
        AjaxDialog.registerHook("setup", "newClientDialog", function (e, t, n) {
            initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), ClientUtils.setup_phone_input(this)
        }), AjaxDialog.registerHook("setup", "updateClientDialog", function (e, t, n) {
            initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), ClientUtils.setup_phone_input(this)
        }), AjaxDialog.registerHook("response", "newClientResponse", function (t, n, i) {
            initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), ClientUtils.setup_phone_input(this), e(t)
        }), AjaxDialog.registerHook("response", "updateClientResponse", function (t, n, i) {
            initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), ClientUtils.setup_phone_input(this), e(t)
        })
    }), $(".client-import-dialog").on("click", function () {
        window.ClientImportDialog.store.dispatch("toggleImportDialog", "ClientImportDialog")
    })
}), $(function () {
    $("#timesheet").each(function () {
        function e(e) {
            try {
                var t = e.alert ? {
                    alert: e.alert
                } : $.parseJSON(e.responseText);
                AjaxDialog.displayNotifications(t)
            } catch (n) {
                AjaxDialog.displayNotifications({
                    alert: "Unexpected error occured"
                })
            }
        }

        function t(e) {
            ((e.popover("hide").data("bs.popover") || {}).inState || {}).click = !1
        }

        function n(e) {
            var t = e.find(".popover-content"),
                n = t.find(".curtain");
            n.removeClass("hidden")
        }

        function i(e) {
            var t = e.find(".curtain");
            t.addClass("hidden")
        }

        function r(e, t) {
            var n = $('<input name="alert">');
            return n.val(t), e.append(n), e
        }

        function a(e, t) {
            var n = e.find("form").clone();
            return n = n.not('input[name="utf8"]').not('input[name="_method"]').not('input[name="row_id"]').not('input[name="switcher_type"]'),
                n = r(n, t), n.serialize()
        }

        function o(e, t) {
            var n = e.find(".time_entry_form").clone(),
                i = n.find("#start_date input"),
                a = n.find("#stop_date input"),
                o = n.find(".start_time"),
                s = n.find(".stop_time"),
                l = TimeUtils.parse_internal_datetime(i.val() + " " + o.val()),
                c = TimeUtils.parse_internal_datetime(a.val() + " " + s.val());
            return i.val(TimeUtils.format_internal_date(l)), a.val(TimeUtils.format_internal_date(c)), o.val(TimeUtils.format_internal_time(l)), s.val(TimeUtils.format_internal_time(c)), n = n.not('input[name="utf8"]').not('input[name="_method"]').not('input[name="row_id"]').not("#time_entry_duration"), n = r(n, t), n.serialize()
        }

        function s(e, t) {
            AjaxDialog.run("/time_entries/" + e + "/edit.dialog?" + t)
        }

        function l(e, t) {
            for (var n in e)
                if (e[n] && e[n].length > 0) {
                    var i = -1 === t.indexOf(n);
                    if (i) return !0
                } return !1
        }

        function c(r) {
            var a = $(r.target).data("bs.popover").$tip;
            0 !== a.find(".time_entry_form").length && (initTooltip(a), setupDatePickers(a), a.data("event-handler-attached") || (TimeEntryUtils.setupTimeEntryTimeControls(a), a.on("keyup", ".time_entry_note", function () {
                var e = $(this).find("textarea");
                e.val().length > 0 ? FormHelpers.clearError(e) : FormHelpers.setError(e, "can't be blank")
            }), a.on("click", "button.close", function () {
                t(a)
            }), a.data("event-handler-attached", !0)), a.find("button#apply").on("click", function (r) {
                r.preventDefault(), r.stopPropagation();
                var c = a.find(".time_entry_form");
                if (0 === FormHelpers.withErrors(c).length) {
                    var u = c.data("id"),
                        d = a.find("input#row_id").prop("defaultValue");
                    p(d), n(a), $.ajax({
                        type: "PATCH",
                        url: "/time_entries/" + u,
                        data: c.serialize(),
                        dataType: "json",
                        success: function (e) {
                            if ("error-response" === e.action) {
                                if (m(d), i(a), l(e.errors, ["start_time", "stop_time", "note"])) {
                                    var n = o(a, e.alert);
                                    return setTimeout(t, 100, a), void s(u, n)
                                }
                                var r = a.find(".alert.alert-danger");
                                r.text(e.alert), r.show(), FormHelpers.clearError(".form-control"), $.each(e.errors, function (e, t) {
                                    if (t.length > 0) {
                                        var n = a.find('[data-error-field="' + e + '"]');
                                        FormHelpers.setError(n, t[0], !0)
                                    }
                                })
                            } else if ("success-response" === e.action) {
                                setTimeout(t, 100, a);
                                var c = $("#timesheet").find(".time-entries");
                                TimeEntryUtils.update_time_entries(c, function () {
                                    m(d), i(a)
                                }, function (e) {
                                    m(d), i(a)
                                })
                            }
                        },
                        error: function (t) {
                            m(d), i(a), e(t)
                        }
                    })
                }
            }))
        }

        function u(t, n) {
            m(n.row_id), e(n)
        }

        function d(e, t) {
            var n, i, r, a = e.parents(".time-entry-data"),
                o = a.data("project-id"),
                s = a.data("task-id"),
                l = a.data("user-id"),
                c = a.data("label-no-projects"),
                u = a.data("label-no-tasks"),
                d = a.data("label-no-task");
            if ("project" === t ? (i = {
                noResults: function () {
                    return c
                }
            }, r = {
                ajax: {
                    url: "/time_entries/get_allowed_projects",
                    data: function (e) {
                        return {
                            project_id: o,
                            filters: {
                                user: l
                            },
                            q: e.term
                        }
                    },
                    dataType: "json"
                }
            }, o && (n = {
                id: o,
                text: a.data("project-name")
            })) : (i = {
                noResults: function () {
                    return u
                }
            }, r = {
                allowClear: !0,
                ajax: {
                    url: "/tasks/search",
                    data: function (e) {
                        return {
                            project_id: o,
                            user_id: l,
                            task_id: s,
                            include_reason_required: !0,
                            q: e.term,
                            page: e.page
                        }
                    },
                    processResults: function (e) {
                        $.each(e.results, function (t, n) {
                            n.reason_required = e.reason_required
                        });
                        var t = $(this.container);
                        return t.data("no-task-set") || (e.results.unshift({
                            id: "no_task",
                            text: d,
                            reason_required: e.reason_required
                        }), t.data("no-task-set", !0)), e
                    },
                    dataType: "json",
                    delay: 250
                }
            }, n = s ? {
                id: s,
                text: a.data("task-name")
            } : {
                id: "no_task",
                text: d
            }), n) {
                var h = $("<option></option>");
                h.val(n.id), h.text(n.text), h.prop("selected", !0), e.append(h)
            }
            e.select2($.extend({
                allowClear: !1,
                language: i
            }, r))
        }

        function h(e) {
            var t = $(e).parents(".project").length > 0 ? "project" : "to-do",
                n = $(e.options[e.selectedIndex]),
                i = n.text(),
                r = $(e),
                a = r.parents(".switcher-wrapper").find(".name");
            if (a.text(i), "project" === t) {
                var o = r.parents(".time-entry-row"),
                    s = o.find(".org-name"),
                    l = o.find(".task.switcher-wrapper .name"),
                    c = o.find(".time-entry-data"),
                    u = c.data("label-no-task"),
                    d = n.parents("optgroup").prop("label");
                s.text(d), l.text(u)
            }
        }

        function f(e, t) {
            var n = $("#" + e),
                i = n.find(".time-entry-data");
            if ("project" === t) {
                var r = n.find(".project .name");
                r.text(i.data("project-name"));
                var a = n.find(".org-name");
                a.text(i.data("organization-name"))
            }
            var o = n.find(".task .name");
            o.text(i.data("task-name"))
        }

        function p(e) {
            var t = $("#" + e),
                n = t.parents(".time-entries-for-date").find(".curtain");
            n.width(t.width()), n.height(t.height());
            var i = t.parents("tbody").find("tr").position().top,
                r = t.parents("table").find("thead").height(),
                a = i > 0 ? 0 : r;
            n.css("top", t.position().top + a), n.removeClass("hidden")
        }

        function m(e) {
            var t = $("#" + e),
                n = t.parents(".time-entries-for-date").find(".curtain");
            n.addClass("hidden")
        }

        function g(e, t) {
            var n = $('<select class="select2 form-control" data-allow-clear="false"></select>');
            return n.prop("name", t), e.append(n), d(n, t), n.data("event-handler-attached") || (n.data("event-handler-attached", !0), n.on("select2:open", function (e) {
                var t = $(e.target),
                    n = t.parents(".switcher-wrapper .selector").find(".select2-container"),
                    i = t.parents(".time-entry-data"),
                    r = i.data("label-change-project-title"),
                    a = i.data("label-change-task-title"),
                    o = n.parents(".project").length > 0 ? r : a,
                    s = $('<div class="top-extension">' + o + "</div>");
                s.clone().prependTo(n), s.clone().prependTo(".inline-switcher .select2-dropdown")
            }).on("select2:close", function (e) {
                var t = $(this);
                t.closest(".selector").addClass("hidden"), t.select2("destroy"), setTimeout(function () {
                    t.remove()
                }, 50)
            }).on("select2:closing", function (e) {
                $(".inline-switcher .select2-dropdown .top-extension").remove()
            }).on("select2:select", function (e) {
                h(this);
                var t = $(this),
                    n = t.parents(".time-entry-data"),
                    i = n.data("id"),
                    a = t.parents("tr.time-entry-row").prop("id"),
                    o = $(this).parents(".project").length > 0,
                    l = e.params.data.id,
                    c = o ? "project" : "to-do",
                    d = {
                        note: null
                    };
                o ? d.project_id = l : d.task_id = l;
                var f = $("#timesheet").find(".time-entries"),
                    g = {
                        view: "daily",
                        ui_component: c + " switcher",
                        switcher_type: c,
                        row_id: a,
                        time_entry: d
                    };
                if (e.params.data.reason_required) {
                    var v = "/time_entries/" + i + "/require_reason.dialog",
                        y = $.param({
                            data: JSON.stringify(g)
                        });
                    AjaxDialog.run(v + "?" + y)
                } else p(a), $.ajax({
                    type: "PATCH",
                    url: "/time_entries/" + i,
                    data: g,
                    dataType: "json",
                    success: function (e) {
                        if ("error-response" === e.action) {
                            u(f, {
                                alert: e.alert,
                                row_id: a,
                                switcher_type: c
                            });
                            var t = $("<form></form>"),
                                n = $('<input name="time_entry[' + c + '_id]">');
                            n.val(l), t.append(n), t.append($('<input name="switcher_type" value="' + c + '"></input>')), t.append($('<input name="row_id" value="' + a + '"></input>')), t = r(t, e.alert);
                            var o = t.serialize();
                            s(i, o)
                        } else "success-response" === e.action && TimeEntryUtils.update_time_entries(f, function () {
                            m(a)
                        }, function (e) {
                            u(f, {
                                alert: "Unexpected error occured",
                                row_id: a,
                                switcher_type: c
                            })
                        })
                    },
                    error: function (e) {
                        u(f, {
                            alert: "Unexpected error occured",
                            row_id: a,
                            switcher_type: c
                        })
                    }
                })
            })), n
        }
        AjaxDialog.registerHook("setup", "deniedDialog", function (e, t, n) {
            $("#denied-modal").on("hide.bs.modal", function () {
                var e = $(this),
                    t = e.data("extra-info");
                if (t) {
                    var n = t.row_id,
                        i = t.switcher_type;
                    f(n, i)
                }
            })
        }), AjaxDialog.registerHook("setup", "requireReasonDialog", function (e, t, n) {
            $("#require-reason-modal").on("hide.bs.modal", function () {
                var e = $(this);
                if (!e.data("response-received")) {
                    var t = e.find("input#row_id").prop("defaultValue"),
                        n = e.find("input#switcher_type").prop("defaultValue");
                    f(t, n)
                }
            })
        }), AjaxDialog.registerHook("response", "requireReasonDialog", function (e, t, n) {
            var i = $(this),
                r = i.find("form");
            if ("error-response" === e.action) {
                if (l(e.errors, ["note"])) {
                    var o = r.data("id"),
                        c = a(i, e.alert);
                    return i.modal("hide"), void s(o, c)
                }
                if (e.errors.note) {
                    var d = i.find("#time_entry_note");
                    FormHelpers.setError(d, e.errors.note[0])
                }
            } else if ("success-response" === e.action) {
                $("#require-reason-modal").data("response-received", !0);
                var h = i.find("input#row_id").prop("defaultValue"),
                    f = i.find("input#switcher_type").prop("defaultValue");
                i.modal("hide");
                var p = $("#timesheet").find(".time-entries");
                TimeEntryUtils.update_time_entries(p, function () {
                    m(h)
                }, function (e) {
                    u(p, {
                        alert: "Unexpected error occured",
                        row_id: h,
                        switcher_type: f
                    })
                })
            }
        }), $(document).on("click", function (e) {
            $('.duration[data-toggle="popover"],.duration[data-original-title],.time_span[data-toggle="popover"],.time_span[data-original-title]').each(function () {
                if (!$(this).is(e.target) && 0 === $(this).has(e.target).length && 0 === $(".popover").has(e.target).length) {
                    var n = $(e.target).parents("table.table-condensed"),
                        i = n.find(".weekend").length > 0 || n.parents(".calendar-table").length > 0;
                    i || t($(this))
                }
            }), $(".switcher-wrapper .name.switcher").each(function () {
                var t = $(this);
                if (t.is(e.target)) {
                    var n = t.parents(".switcher-wrapper"),
                        i = n.find(".selector");
                    i.removeClass("hidden");
                    var r = n.hasClass("project") ? "project" : "to-do",
                        a = g(i, r);
                    a.select2("open"), $("body > .select2-container").addClass("inline-switcher")
                }
            })
        }), $(document).on("inserted.bs.popover", function (e) {
            var t = $(e.target).data("bs.popover").$tip;
            0 !== t.find(".time_entry_form").length && t.addClass("time_span")
        }), $(document).on("shown.bs.popover", c)
    })
});
var Dashboard = function (e) {
    return {
        isUpdated: !1,
        smallWidgetsWrapper: null,
        largeWidgetsWrapper: null,
        xLargeWidgetsWrapper: null,
        activityWidgets: ["recent_activity", "my_recent_activity", "low_activity"],
        widgetsList: function (t) {
            var n;
            return "small" === t ? n = Dashboard.smallWidgetsWrapper.sortable("toArray", {
                attribute: "data-widget-id"
            }) : "large" === t ? n = e.map(Dashboard.largeWidgetsWrapper, function (t) {
                return e(t).sortable("toArray", {
                    attribute: "data-widget-id"
                })
            }) : "xlarge" === t && (n = Dashboard.xLargeWidgetsWrapper.sortable("toArray", {
                attribute: "data-widget-id"
            })), n
        },
        widgetsListByColumnId: function (t) {
            const n = Dashboard.largeWidgetsWrapper.filter("[data-column-id=" + t + "]").find("[data-widget-id]");
            return e.map(n, function (t) {
                return e(t).data("widget-id")
            })
        },
        bestColumnForWidgetType: function (t) {
            if ("small" === t) return Dashboard.smallWidgetsWrapper;
            if ("large" === t) {
                var n = null,
                    i = -1;
                return Dashboard.largeWidgetsWrapper.each(function () {
                    var t = e(this),
                        r = t.find(".widget-common").get().reduce(function (t, n) {
                            return t + e(n).height()
                        }, 0);
                    (-1 === i || i > r) && (i = r, n = t)
                }), n || Dashboard.largeWidgetsWrapper.eq(0)
            }
            return "xlarge" === t ? Dashboard.xLargeWidgetsWrapper : void 0
        },
        refreshSort: function (e) {
            e.trigger("sortupdate"), e.trigger("sortstop")
        },
        serializeWidgets: function (t) {
            return e.map(e(".widget-common", t), function (t) {
                var n = e(t);
                return {
                    id: n.data("widget-id")
                }
            })
        },
        initSortable: function (t) {
            t.sortable({
                items: ".widget-sortable",
                handle: ".widget-sortable-header",
                cancel: ".initial-cta",
                forcePlaceholderSize: !0,
                forceHelperSize: !0,
                connectWith: t.length > 0 ? t : !1,
                tolerance: "pointer",
                revert: 300
            }).on("sortstart", function (t, n) {
                n.placeholder.height(n.helper.outerHeight()), e(n.helper).find(".a-tooltip").tooltip("destroy")
            }).on("sortstop", function (n, i) {
                if (Dashboard.isUpdated) {
                    var r = t.closest("[data-update-url]"),
                        a = {
                            type: r.data("type"),
                            location: e(this).data("location")
                        };
                    "columns" === a.location ? (a.widgets = {}, Dashboard.largeWidgetsWrapper.each(function () {
                        var t = e(this);
                        a.widgets[t.data("column-id")] = Dashboard.serializeWidgets(t)
                    })) : "top" === a.location ? a.widgets = Dashboard.serializeWidgets(Dashboard.smallWidgetsWrapper) : "hero" === a.location && (a.widgets = Dashboard.serializeWidgets(Dashboard.xLargeWidgetsWrapper)), e.ajax({
                        data: JSON.stringify(a),
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json",
                        processData: !1,
                        url: r.data("update-url")
                    }).always(function (e) {
                        Dashboard.isUpdated = !1
                    })
                }
                i && initTooltip(i.item)
            }).on("sortupdate", function () {
                Dashboard.isUpdated = !0
            })
        },
        loadMore: function (t) {
            t.find(".infinite-scrolling-widget").each(function () {
                var t = e(this);
                t.infinitePages({
                    context: t,
                    process: function (t, n) {
                        var i = t.closest(".widget-common");
                        e.ajax({
                            type: "GET",
                            url: t.data("href")
                        }).done(function (t) {
                            var r = e(t.html);
                            i.find(".scrollable-content").append(r), n.resolve()
                        }).fail(function () {
                            n.fail()
                        }).always(function () {
                            t.closest("tr").remove()
                        })
                    },
                    loading: function () {
                        e.rails.disableElement(e(this))
                    }
                }), t.on("click", ".load-more", function (e) {
                    e.stopImmediatePropagation(), e.preventDefault(), t.infinitePages("next")
                })
            })
        },
        prepWidgetPayload: function (t) {
            var n = e(t);
            return "small" === n.data("widget-style") && widgetGraph.loadGraph(n.find(".widget-graph")[0]), initTooltip(n), Dashboard.loadMore(n), -1 !== e.inArray(n.data("widgetId"), Dashboard.activityWidgets) && setTimeout(function () {
                Activity.initLightGallery(n.find(".dashboard-activity-view"))
            }, 0), n
        },
        initButtonHandlers: function (t) {
            t.on("click", ".widget-common .dropdown .remove", function (n) {
                n.stopImmediatePropagation(), n.preventDefault();
                var i = e(n.target),
                    r = i.closest(".ui-sortable"),
                    a = i.closest(".widget-common"),
                    o = a.data("widget-id");
                t.find(".widget-dropdown li[data-widget=" + o + "]").removeClass("is-on"), a.remove(), Dashboard.refreshSort(r)
            }).on("click", ".widget-dropdown li > a", function (n) {
                n.stopImmediatePropagation(), n.preventDefault();
                var i = e(this).closest("li"),
                    r = i.data("widget"),
                    a = t.find(".widget-common[data-widget-id=" + r + "]"),
                    o = i.data("widget-style");
                if (-1 !== e.inArray(r, Dashboard.widgetsList(o))) {
                    var s = a.closest(".ui-sortable");
                    a.remove(), i.removeClass("is-on"), Dashboard.refreshSort(s)
                } else {
                    var l = i.closest("[data-widget-url]").data("widget-url").replace("__WIDGET_ID__", r);
                    e.ajax({
                        type: "GET",
                        url: l
                    }).success(function (e) {
                        var t = Dashboard.prepWidgetPayload(e.html),
                            n = Dashboard.bestColumnForWidgetType(o);
                        n.append(t), i.addClass("is-on"), initPopoverAvatar(), Dashboard.refreshSort(n), document.dispatchEvent(new Event("add_widget:" + r))
                    }).always(function (e) {
                        Dashboard.isUpdated = !1
                    })
                }
            }).on("click", ".screenshot-activity-overlay", function (t) {
                t.preventDefault(), t.stopImmediatePropagation();
                var n = e(this).data("slide");
                void 0 !== n && e(t.target).closest(".dashboard-activity-view").data("lightGallery").build(parseInt(n))
            })
        },
        initWidgetsDropdown: function (t) {
            var n = e('.widget-dropdown li[data-widget-style="small"]', t),
                i = e('.widget-dropdown li[data-widget-style="large"]', t),
                r = e('.widget-dropdown li[data-widget-style="xlarge"]', t),
                a = Dashboard.widgetsList("small"),
                o = Dashboard.widgetsList("large"),
                s = Dashboard.widgetsList("xlarge");
            e.each(n, function () {
                e(this).toggleClass("is-on", -1 !== e.inArray(e(this).data("widget"), a))
            }), e.each(i, function () {
                e(this).toggleClass("is-on", -1 !== e.inArray(e(this).data("widget"), o))
            }), e.each(r, function () {
                e(this).toggleClass("is-on", -1 !== e.inArray(e(this).data("widget"), s))
            })
        },
        initMain: function (t) {
            Dashboard.smallWidgetsWrapper = e(".widgets-small-column", t), Dashboard.largeWidgetsWrapper = e(".widgets-large-column", t), Dashboard.xLargeWidgetsWrapper = e(".widgets-xlarge-row", t), Dashboard.initSortable(Dashboard.smallWidgetsWrapper), Dashboard.initSortable(Dashboard.largeWidgetsWrapper), Dashboard.initSortable(Dashboard.xLargeWidgetsWrapper), Dashboard.initButtonHandlers(t), Dashboard.loadMore(t), e.each(Dashboard.activityWidgets, function (t, n) {
                -1 !== e.inArray(n, Dashboard.widgetsList("large")) && Activity.initLightGallery(e("#widget_" + n).find(".dashboard-activity-view"))
            }), Dashboard.initWidgetsDropdown(t)
        }
    }
}(jQuery);
$(function () {
    $(".dashboard.widgets").each(function () {
        Dashboard.initMain($(this))
    })
});
var Downloads = function (e) {
    return {
        giveCategory: function (e) {
            var t, e = Downloads.givePlatform();
            switch (e) {
                case "platform_windows":
                case "platform_osx":
                case "platform_linux":
                    t = "desktop";
                    break;
                case "platform_android":
                case "platform_ios":
                    t = "mobile";
                    break;
                case "platform_chromeapp":
                    t = "chromeapp";
                    break;
                default:
                    t = "desktop"
            }
            return t
        },
        givePlatform: function () {
            var e = !1;
            return /Win/.test(navigator.platform) ? e = "platform_windows" : /Mac/.test(navigator.platform) ? e = "platform_osx" : /Android/i.test(navigator.userAgent) ? e = "platform_android" : /CrOS/.test(navigator.userAgent) ? e = "platform_chromeapp" : /Linux/.test(navigator.platform) ? e = "platform_linux" : /(iPad|iPhone)/.test(navigator.platform) && (e = "platform_ios"), e
        },
        initMain: function (t) {
            var n = Downloads.givePlatform(),
                i = Downloads.giveCategory(),
                r = e(".tabs-list-link");
            t.find("#" + n).addClass("in active"), r.filter('[data-type="' + i + '"]').attr("href", "#" + n).closest("li").addClass("active"), e(".platform-button .dropdown").on("hidden.bs.dropdown", function () {
                e(".download-options-item").removeClass("active")
            })
        }
    }
}(jQuery);
$(function () {
    $("#downloads").each(function () {
        Downloads.initMain($(this))
    })
}), AjaxDialog.registerHook("setup", "downloadDialog", function () {
    var e = this;
    Downloads.initMain(e)
}),
    function () {
        function e(e, t) {
            setupDateRangePickers(e)
        }
        AjaxDialog.registerHook("setup", "exports", function () {
            e(this)
        }), AjaxDialog.registerHook("response", "exports", function (t) {
            "replace" === t.action && (e(this, !0), "success" === t.result && (this.find(".btn.btn-primary").hide(), this.find(".btn.btn-default").html("OK"), this.find(".modal-title").html("Your screenshots are being prepared")))
        })
    }(),
    function () {
        function e(e) {
            setupDatePickers(e), initTooltip(e), setupTimeDuration(e, {
                onchange: function (e, t) {
                    t ? FormHelpers.clearError(e) : FormHelpers.setError(e, "Invalid duration")
                }
            }), setupSelect2AddRemoveLinks(e), s(e)
        }
        var t = function (e) {
            var t = $("input#holiday_auto_add_new_users"),
                n = t.parent().parent().find("i.a-tooltip"),
                i = t.data(e);
            n.attr("data-original-title", i), n.tooltip()
        },
            n = function (e, t) {
                return "dmy" === e ? t.split("/").reverse().join("/") : t
            },
            i = function () {
                return $("#holiday-members-dropdown").val() || []
            },
            r = function () {
                return $("#holiday-members-dropdown").parent().find("span.select2-selection__clear")
            },
            a = function () {
                var e = $("#symbolic-type-hidden");
                if (e.length) {
                    var n = e.val().startsWith("custom");
                    n ? $("#recurs-checkbox").is(":checked") ? (e.val("custom_yearly"), t("tooltip-recurring")) : (e.val("custom"), t("tooltip-non-recurring")) : t("tooltip-recurring")
                }
            },
            o = !1,
            s = function (e) {
                if (!o) {
                    o = !0, e.on("change", "#holiday-dropdown", function (e) {
                        $(".hidden-group").removeClass("hidden"), $("button.holiday-submit").removeAttr("disabled");
                        var i = $(e.target).find("option:selected");
                        if ("custom" === i.val()) {
                            var r = n($(".add-holiday-btn").data("dateFormat"), $("#date").val());
                            $(".custom-field").removeClass("hidden"), $("#recurs-checkbox").is(":checked") ? ($("#symbolic-type-hidden").val("custom_yearly"), t("tooltip-recurring")) : ($("#symbolic-type-hidden").val("custom"), t("tooltip-non-recurring")), $("#date-hidden").val(TimeUtils.format_internal_date(moment(new Date(r).toISOString()))), $("#holiday-name").val("")
                        } else $(".custom-field").addClass("hidden"), $("#symbolic-type-hidden").val(i.val()), $("#date-hidden").val(i.attr("data-date")), $("#holiday-name").val(i.attr("data-name")), t("tooltip-recurring")
                    }), e.on("change", "#date", function (e) {
                        var t = n($(".add-holiday-btn").data("dateFormat"), $(e.target).val()),
                            i = $(".form-group.holiday_auto_add_new_users");
                        i.toggleClass("hide", moment(new Date(t).toISOString()).isBefore(moment(), "day")), $("#date-hidden").val(TimeUtils.format_internal_date(moment(new Date(t).toISOString())))
                    }), e.on("change", "#recurs-checkbox", a);
                    var s = 0;
                    e.on("click", "button.holiday-submit", function (t) {
                        var n = $("#new-holiday-form"),
                            r = n.serializeArray().filter(function (e) {
                                return e.name.startsWith("holiday")
                            }).reduce(function (e, t) {
                                return e[t.name] = t.value, e
                            }, {}),
                            a = $.ajax({
                                type: "POST",
                                url: n.attr("data-validation-url"),
                                data: r
                            });
                        a.done(function (t) {
                            if (s = 0, t.valid) {
                                if (!i().length) return n.submit();
                                var a = $("#new-holiday-form").attr("data-shift-count-url");
                                $.ajax({
                                    type: "POST",
                                    url: a,
                                    data: {
                                        date: r["holiday[date]"],
                                        user_ids: i()
                                    }
                                }).done(function (t) {
                                    if (t.shift_count > 0) {
                                        var i = e.find(".shift-count-warning-wrapper");
                                        i.html(t.warning), e.find(".shift-count-warning-question-wrapper").text(t.question), e.find(".overlap-content.modal-footer").html(t.confirm_buttons), e.find(".default-content").addClass("hidden"), e.find(".overlap-content").removeClass("hidden"), i.removeClass("hidden")
                                    } else n.submit()
                                })
                            } else n.submit()
                        });
                        var o = $(this);
                        a.fail(function () {
                            3 >= s && o.trigger("click"), s += 1
                        })
                    });
                    var l = r(),
                        c = !1;
                    l.length && l.on("mousedown", function () {
                        c = !0
                    });
                    var u = 0;
                    e.on("change", "#holiday-members-dropdown, #holiday_date, #date", function () {
                        var e = $("#new-holiday-form").attr("data-shift-count-url"),
                            t = $("#date-hidden").val(),
                            n = $(".shift-count-warning-wrapper"),
                            a = r();
                        if (a.length && (a.off("mousedown"), a.on("mousedown", function () {
                            c = !0
                        })), !i().length) return c = !1, u = 0, void n.addClass("hidden");
                        if (!c) {
                            var o = $.ajax({
                                type: "POST",
                                url: e,
                                data: {
                                    date: t,
                                    user_ids: i()
                                }
                            });
                            o.done(function (e) {
                                u = 0, 0 === e.shift_count ? n.addClass("hidden") : (n.html(e.warning), n.removeClass("hidden"))
                            });
                            var s = $(this);
                            o.fail(function () {
                                3 >= u && s.trigger("change"), u += 1
                            })
                        }
                    })
                }
            };
        AjaxDialog.registerHook("setup", "holidays", function () {
            o = !1, e(this), a()
        }), AjaxDialog.registerHook("response", "holidays", function (t) {
            "replace" === t.action && (e(this), a())
        })
    }();
var IntegrationWizard = {
    REFRESH_INTERVAL: 15e3,
    refresh_timeout: null,
    stopRefresh: function () {
        null !== IntegrationWizard.refresh_timeout && (clearTimeout(IntegrationWizard.refresh_timeout), IntegrationWizard.refresh_timeout = null)
    },
    startRefresh: function () {
        IntegrationWizard.stopRefresh(), IntegrationWizard.refresh_timeout = setTimeout(IntegrationWizard.refreshButton, IntegrationWizard.REFRESH_INTERVAL)
    },
    refreshButton: function () {
        if (IntegrationWizard.stopRefresh(), $(".wizard_refresh_button .refresh_wrapper").length > 0) {
            var e = $(".wizard_refresh_button").first(),
                t = e.data("url");
            $.get(t, function (e) {
                e.disabled ? IntegrationWizard.startRefresh() : IntegrationWizard.enableButton()
            })
        }
    },
    enableButton: function () {
        IntegrationWizard.stopRefresh(), $(".wizard_refresh_button").each(function () {
            $("a.btn", this).unwrap(".refresh_wrapper").removeClass("disabled")
        })
    },
    setupRefreshButton: function () {
        $(".wizard_refresh_button .refresh_wrapper").length > 0 && IntegrationWizard.startRefresh()
    },
    setupCheckboxes: function (e) {
        $(".has-checkboxes", e).checkboxes("range", !0), $(".has-checkboxes .select_all", e).on("click", function () {
            $(".has-checkboxes", e).checkboxes("check")
        }), $(".has-checkboxes .unselect_all", e).on("click", function () {
            $(".has-checkboxes", e).checkboxes("uncheck")
        })
    },
    action_error: function (e) {
        try {
            AjaxDialog.displayNotifications($.parseJSON(e.responseText))
        } catch (t) {
            AjaxDialog.displayNotifications({
                alert: "Unexpected error occured"
            })
        }
    },
    submitCheckboxChanges: function (e, t) {
        clearTimeout(IntegrationWizard.import_timeout), IntegrationWizard.import_timeout = setTimeout(function () {
            var n = e.data("store-selection-url");
            $.ajax({
                type: "POST",
                url: n,
                data: t,
                dataType: "json",
                success: function (e) { },
                error: function (e) {
                    IntegrationWizard.action_error(e)
                }
            })
        }, 1e3)
    },
    setupCheckboxListeners: function (e) {
        $("#users", e).on("change", function (t) {
            var n = $(t.target);
            if (n.is('input[type="checkbox"]')) {
                var i = [];
                $("#select-users input.user:checked", e).each(function () {
                    i.push($(this).val())
                }), IntegrationWizard.submitCheckboxChanges(e, {
                    ids: i
                })
            }
        })
    },
    setupRetryRetrieving: function (e) {
        $("#error-container #retry-users", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".retrieving", e).addClass("hidden"), $("#retrieving-users", e).removeClass("hidden")
        })
    },
    setupToggleSwitchSetting: function (e) {
        $("#integration_auto_add_users", e).on("change", function (t) {
            t.preventDefault();
            var n = $(this),
                i = n.parent(),
                r = e.data("update-setting-url"),
                a = n.val(),
                o = "on" === a ? "0" : "1";
            $.ajax({
                url: r,
                data: {
                    setting: "auto_add_users",
                    value: o
                },
                dataType: "JSON",
                method: "POST"
            }).done(function (e) {
                e.error ? AjaxDialog.displayNotifications({
                    alert: e.error
                }) : "1" === o ? (n.val("on"), i.removeClass("off").addClass("on")) : (n.val("off"), i.removeClass("on").addClass("off"))
            })
        })
    },
    prepare_user_checkboxes: function (e) {
        IntegrationWizard.setupCheckboxes(e.find("#select-users"))
    }
};
$(function () {
    IntegrationWizard.setupRefreshButton(), $(".integration-wizard-users").each(function () {
        var e = $(this);
        IntegrationWizard.setupCheckboxListeners(e), IntegrationWizard.setupRetryRetrieving(e), IntegrationWizard.setupToggleSwitchSetting(e), IntegrationWizard.prepare_user_checkboxes(e)
    }), $(".integration-wizard-select-account").each(function () {
        var e = $(this);
        e.on("change", "#integration_account", function () {
            if ($(this).val().length > 0) {
                var t = e.find("span.disabled");
                t.replaceWith('<input type="submit" name="account" value="Next" class="btn btn-primary btn-100 btn-next" data-disable-with="Saving..." />')
            } else {
                var t = e.find(".btn-next");
                t.replaceWith('<span class="btn btn-primary btn-100 disabled">Next</span>')
            }
        }), e.on("click", ".btn-next", function () {
            $(this).closest("form").submit()
        })
    })
}),
    function () {
        function e(e) {
            $(".list-searchable").each(function () {
                var t = $(this).data("listJs");
                t.fuzzySearch(e)
            });
            var t = {
                s: e
            };
            window.history.replaceState("", document.title, window.location.pathname + "#q=" + encodeURIComponent(listJS.encodeFilter(t)))
        }

        function t() {
            var t = $(".integration-search");
            if (0 !== t.length && (t.keyup(function () {
                var t = $(this).val();
                e(t)
            }), window.location.hash)) {
                var n = window.location.hash.substring(1).split("=", 2),
                    i = n.shift();
                if ("q" === i) {
                    var r = listJS.decodeFilter(decodeURIComponent(n.shift()));
                    t.val(r.s), e(t.val())
                }
            }
        }

        function n(e) {
            return e.find(b).map(function (e, t) {
                return $(t).val()
            }).get()
        }

        function i(e) {
            return e.find(y).map(function (e, t) {
                return $(t).val()
            }).get()
        }

        function r(e, t) {
            return e.map(function (e) {
                var n = {
                    id: e[t + "_id"],
                    text: e[t + "_name"],
                    data: e
                };
                return "archived" in e && (n.archived = e.archived), n
            })
        }

        function a(e, t) {
            var i = e.data("localData"),
                r = e.data("remoteData"),
                a = t.val(),
                o = r.find(function (e) {
                    return e.remote_id === a
                }),
                s = o.local_id,
                l = !!s;
            if (l && (s = parseInt(s), l = !!i.find(function (e) {
                return e.local_id === s
            }))) {
                var c = n(e);
                l = -1 === c.indexOf(s)
            }
            var u = t.closest(".link_item").find(b);
            l ? u.val(s).trigger("change") : u.val(null).trigger("change")
        }

        function o(e, t) {
            var n = e.data("localData"),
                o = e.data("remoteData"),
                s = e.data("allowItemCreation"),
                c = e.find(".links_container"),
                u = $(e.find(".link-template").html()),
                d = i(e),
                h = o.filter(function (e) {
                    return -1 === d.indexOf(e.remote_id)
                });
            ("all" === t || h.length < t) && (t = h.length);
            var f, p = {
                width: "auto;",
                dataAdapter: v,
                dataAdapterModal: e
            },
                m = [],
                g = r(n, "local"),
                w = r(o, "remote");
            for (f = 0; t > f; ++f) {
                var _ = h[f].remote_id,
                    x = u.clone(),
                    k = x.find(y),
                    C = x.find(b);
                k.select2($.extend({}, p, {
                    data: w
                })).on("change", function () {
                    a(e, $(this))
                }), C.select2($.extend({}, p, {
                    templateResult: l,
                    data: g,
                    allowClear: s
                })), k.val(_).trigger("change"), d.push(_), m.push(x)
            }
            c.append(m), h = o.filter(function (e) {
                return -1 === d.indexOf(e.remote_id)
            }), 0 === h.length && e.find(".add_buttons").find("button").prop("disabled", !0), c.is(":empty") || e.find(".modal-footer .btn-success").prop("disabled", !1)
        }

        function s(e) {
            var t = e.data("allowItemCreation");
            e.find(".a-tooltip").tooltip({
                placement: "auto bottom",
                container: "body",
                trigger: "hover"
            });
            var n = e.find(".add_buttons"),
                i = e.find(".modal-footer .btn-success"),
                r = n.find(".new_link"),
                a = n.find(".new_link_all"),
                s = !0;
            if (n.find("button").prop("disabled", !0), i.prop("disabled", !0), r.on("click", function () {
                o(e, 1)
            }), a.on("click", function () {
                o(e, "all")
            }), e.on("click", ".remove-item", function (t) {
                t.preventDefault(), t.stopPropagation(), $(this).closest(".link_item").remove(), e.find(".all_linked_alert").hide(), n.find("button").prop("disabled", !1), e.find(".links_container").is(":empty") && i.prop("disabled", !0)
            }), s) {
                n.find("button").prop("disabled", !0), i.prop("disabled", !0);
                var l = e.data("url"),
                    c = $(".loading", e);
                c.show();
                var u = e.data("features"),
                    d = ["unlinked", "matched", "local"];
                "has_tasks" in u && (u.has_tasks ? d.push("linked_non_task") : d.push("linked_task", "linked_non_task")), h({
                    url: l,
                    params: {
                        force: !1,
                        status: d
                    }
                }).done(function (r) {
                    if (c.hide(), 0 === r.data.length) e.find(".all_linked_alert").show(), i.prop("disabled", !0);
                    else {
                        var a = [],
                            s = [];
                        r.data.forEach(function (e) {
                            "matched" === e.status ? (a.push(e), s.push(e)) : "local" === e.status || "linked" === e.status.substr(0, 6) ? a.push(e) : s.push(e)
                        }), e.data("remoteData", s), e.data("localData", a), n.find("button").prop("disabled", !1), i.prop("disabled", !1), o(e, 1), 0 !== e.data("localData").length || t || (e.find(".all_linked_alert").show(), i.prop("disabled", !0))
                    }
                }).fail(function (e) {
                    c.addClass("alert-danger").empty().append($('<i class="fa fa-exclamation-circle"/>')).append(document.createTextNode(" " + data.error))
                })
            } else o(e, 1)
        }

        function l(e) {
            if (e.archived) {
                var t, n = $('<div class="archived-project-info"></div>'),
                    i = $('<span class="label label-danger mr-5">Archived</span>'),
                    r = $('<i class="hi hi-info" title="Archived projects are activated when linked."></i>');
                return r.tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                }), n.append(i), n.append(r), t = $('<div class="clearfix"/>').append('<span class="archived-project-name" title="' + e.text + '">' + e.text + "</span>").append(n)
            }
            return e.text
        }

        function c(e) {
            try {
                AjaxDialog.displayNotifications($.parseJSON(e.responseText))
            } catch (t) {
                AjaxDialog.displayNotifications({
                    alert: "Unexpected error occurred"
                })
            }
        }

        function u(e) {
            var t = e.parent(),
                n = t.data("url"),
                i = t.data("key"),
                r = e.val(),
                a = "on" === r ? "0" : "1";
            $.ajax({
                url: n,
                data: {
                    setting: i,
                    value: a
                },
                dataType: "JSON",
                method: "POST"
            }).done(function (n) {
                n.error ? AjaxDialog.displayNotifications({
                    alert: n.error
                }) : "1" === a ? (e.val("on"), t.removeClass("off").addClass("on")) : (e.val("off"), t.removeClass("on").addClass("off"))
            }).fail(function (e) {
                var t = e.responseJSON;
                "redirect" === t.action && (window.location = t.url), c(e)
            })
        }

        function d(e, t) {
            var n = e.data("url"),
                i = -1 !== n.indexOf("project") ? 4 : 3;
            return h({
                url: n,
                params: {
                    force: t,
                    html: 1,
                    status: ["linked", "orphaned", "not_configured"]
                },
                before: function () {
                    $("table.has-batch-actions").checkboxes("uncheck");
                    var t = $("<tr/>").addClass("loading").append($("<td/>").attr("colspan", i).text("Loading..."));
                    e.find(".a-tooltip").tooltip("destroy"), e.empty(), e.append(t), e.closest(".table-wrapper").loadingCurtain("show")
                }
            }).done(function (t) {
                e.html(t.html), $(".table-wrapper").loadingCurtain("hide"), e.find(".a-tooltip").tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                })
            }).fail(function (t) {
                e.closest(".table-wrapper").loadingCurtain("hide"), e.empty();
                var n = $("<tr/>").addClass("loading").append($("<td/>").attr("colspan", i).text(t.error));
                e.append(n)
            })
        }

        function h(e) {
            var t = $.Deferred(e.before);
            return h.Process(e, t, 0), t.promise()
        }

        function f(e, t) {
            var n = "Are you sure you want to disconnect this user?";
            confirm(n) && $.post(e.data("unlinkUrl"), {
                local_id: t
            }, function (t) {
                AjaxDialog.displayNotifications(t), d(e)
            }, "json").fail(ajaxFailAlert)
        }

        function p(e, t) {
            confirm("Are you sure you want to unlink this project?") && $.post(e.data("unlinkUrl"), {
                local_id: t
            }, function (t) {
                AjaxDialog.displayNotifications(t), d(e)
            }, "json").fail(ajaxFailAlert)
        }

        function m(e, t, n) {
            $.rails.disableElement(n), $.post(e.data("sendReminderUrl"), {
                local_id: t
            }, function (e) {
                AjaxDialog.displayNotifications(e), $.rails.enableElement(n)
            }, "json").fail(ajaxFailAlert)
        }

        function g(e) {
            e.length > 0 && setTimeout(function () {
                $.get(e.data("url"), function (t) {
                    e.html(t), g(e)
                })
            }, 3e4)
        }
        var v, y = 'select[name="links[][remote_id]"]',
            b = 'select[name="links[][local_id]"]',
            w = null,
            _ = null;
        window.LoadIntegrationList = h, h.delay_times = [1, 3, 5, 5, 5, 5, 10, 10, 10, 10, 10, 10, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15], h.Retry = function (e, t, n) {
            if (n < h.delay_times.length) {
                var i = 1e3 * h.delay_times[n];
                n += 1, setTimeout(function () {
                    h.Process(e, t, n)
                }, i)
            } else t.reject({
                error: "Timed out while fetching",
                time_out: !0
            })
        }, h.Process = function (e, t, n) {
            $.ajax({
                url: e.url,
                data: e.params,
                dataType: "json"
            }).done(function (i) {
                i.retry ? (i.url && (e.url = i.url), h.Retry(e, t, n)) : i.error ? t.reject(i) : t.resolve(i)
            }).fail(function () {
                h.Retry(e, t, n)
            })
        }, $.fn.select2.amd.define("select2/data/integrationLinkArrayAdapter", ["select2/data/array", "select2/utils"], function (e, t) {
            function n(e, t) {
                this.options = t, n.__super__.constructor.call(this, e, t)
            }
            return t.Extend(n, e), n.prototype.query = function (e, t) {
                var i = this;
                n.__super__.query.call(i, e, function (e) {
                    var n = e.results,
                        r = $('select[name="' + i.$element.attr("name") + '"]', i.options.get("dataAdapterModal")).map(function (e, t) {
                            return $(t).val()
                        }).get(),
                        a = $.grep(n, function (e) {
                            return -1 === r.indexOf(e.id) || e.id === i.$element.val()
                        });
                    t({
                        results: a
                    })
                })
            }, n
        }), v = $.fn.select2.amd.require("select2/data/integrationLinkArrayAdapter"), AjaxDialog.registerHook("setup", "linkUserNotificationDialog", function () {
            var e = this;
            setupSelect2AddRemoveLinks(e)
        }), AjaxDialog.registerHook("response", "linkUserNotificationDialog", function (e) {
            e.success && ($(this).modal("hide"), $(".integration-list").each(function () {
                d($(this), !0)
            }))
        }), AjaxDialog.registerHook("setup", "linkProjectsDialog", function () {
            s(this, !0)
        }), AjaxDialog.registerHook("response", "linkProjectsDialog", function (e) {
            if (e.success) $(this).modal("hide"), $(".integration-list").each(function () {
                d($(this), !0)
            }), e.count > 0 && $(".vertical-steps .step-link-projects").addClass("is-complete");
            else if ("index" in e) {
                this.find(".links_container > .link_item .error").hide();
                var t = $(this).find(".links_container > .link_item:eq(" + e.index + ") .error");
                t.length ? t.text(e.error).show() : AjaxDialog.displayNotifications({
                    alert: e.error
                })
            } else "error" in e && AjaxDialog.displayNotifications({
                alert: e.error
            })
        }), AjaxDialog.registerHook("setup", "linkUsersDialog", function () {
            s(this, !1)
        }), AjaxDialog.registerHook("response", "linkUsersDialog", function (e) {
            if (e.success) this.modal("hide"), $(".integration-list").each(function () {
                d($(this), !0)
            }), e.count > 0 && $(".vertical-steps .step-link-users").addClass("is-complete");
            else if ("index" in e) {
                this.find(".links_container > .link_item .error").hide();
                var t = $(this).find(".links_container > .link_item:eq(" + e.index + ") .error");
                t.length ? t.text(e.error).show() : AjaxDialog.displayNotifications({
                    alert: e.error
                })
            } else "error" in e && AjaxDialog.displayNotifications({
                alert: e.error
            })
        }), $(function () {
            $("#integration_integration_type, #integration_type").on("change", function () {
                var e = window.location.protocol + "//" + window.location.host + window.location.pathname;
                "/new" !== e.substr(-4) && (e += "/new"), window.location = e + "?type=" + $(this).val()
            }), $("#integration_users").each(function () {
                var e = $(this),
                    t = $(".integration-list", this);
                $(".batch-action", this).on("ajax:success", function (e) {
                    d(t, !0)
                }), e.on("click", ".integration-list-refresh", function () {
                    d(t, !0)
                }).on("click", "a.integration_unlink", function (e) {
                    f(t, $(this).data("localId"))
                }).on("click", "a.integration_link_reminder", function (e) {
                    m(t, $(this).data("localId"), $(this))
                }), setupBatchActions(e.find("table.has-batch-actions")), e.on("change", "#integration_auto_add_users", function (e) {
                    u($(this))
                })
            }), $("#integration_projects").each(function () {
                var e = $(this),
                    t = $(".integration-list", this);
                $(".batch-action").on("ajax:success", function (e) {
                    d(t, !0)
                }), e.on("click", ".integration-list-refresh", function () {
                    d(t, !0)
                }).on("click", "a.integration_unlink", function (e) {
                    p(t, $(this).data("localId"))
                }), setupBatchActions(e.find("table.has-batch-actions")), e.on("change", "#integration_auto_create_projects", function (e) {
                    u($(this))
                })
            }), $(".integration-list").each(function () {
                $(this).data("cached") !== !0 && d($(this))
            }), $("#integration_settings").each(function () {
                $(this).on("input", "#integration_name_input", function () {
                    var e = $(this).data("url"),
                        t = $(this).val(),
                        n = $("#integration_status").find(".integration-name");
                    w && clearTimeout(w), w = setTimeout(function () {
                        $.ajax({
                            url: e,
                            data: {
                                integration: {
                                    name: t
                                }
                            },
                            dataType: "json",
                            method: "PATCH"
                        }).done(function (e) {
                            e.success ? (n.text(t), $("#integration_name_input").siblings(".hint").empty().append($('<i class="hi hi-check hi-12 text-success mr-5"/>')).append(document.createTextNode("Updated")).removeClass("hide"), _ && clearTimeout(_), _ = setTimeout(function () {
                                $("#integration_name_input").siblings(".hint").addClass("hide")
                            }, 3e3)) : (clearTimeout(_), $("#integration_name_input").siblings(".hint").empty().append($('<i class="hi hi-close hi-12 text-danger mr-5"/>')).append(document.createTextNode(e.error)).removeClass("hide"))
                        })
                    }, 1e3)
                })
            }), t(), g($("#integration_status"))
        })
    }(), window.Invites = {
        setupDeleteInvite: function () {
            $("a.delete-invite[data-type=json]").on("ajax:success", function (e, t, n, i) {
                var r = $(this);
                r.closest("tr").remove(), AjaxDialog.displayNotifications(t)
            })
        },
        setupResendInvite: function () {
            $("a.resend-invite[data-type=json]").on("ajax:success", function (e, t, n, i) {
                AjaxDialog.displayNotifications(t)
            })
        }
    }, window.MembersList = {
        setupAddNewLineItem: function () {
            $("#add-line-item").on("click", function (e) {
                e.preventDefault(), e.stopPropagation();
                var t = $("#line-item-template .row").clone(),
                    n = $("#members-to-invite");
                n.append(t), MembersList.setupRemoveItem()
            })
        },
        setupRemoveItem: function () {
            $(".remove-line-item").on("click", function (e) {
                e.preventDefault(), e.stopPropagation();
                var t = e.target.closest(".row");
                t.remove()
            })
        }
    }, window.Links = {
        setupShowInvite: function () {
            $("#show-invite-link").on("click", function (e) {
                e.preventDefault(), e.stopPropagation(), $("#show-invite-link").remove(), $("#invite-link-fields").removeClass("hidden")
            })
        },
        setupShowEmail: function () {
            $("#show-email-link").on("click", function (e) {
                e.preventDefault(), e.stopPropagation(), $("#show-email-link").contents().unwrap().text("Invite via email"), $(".hidden-email-link").each(function () {
                    $(this).removeClass("hidden")
                }), $(".modal-footer").removeClass("hidden")
            })
        }
    }, $(function (e) {
        function t() {
            e("#invite_weekly_budget").on("change", function () {
                var t = e(this);
                BudgetUtils.setRate(t)
            }).triggerHandler("change")
        }

        function n(t) {
            var n = e("#trial-plan-restricted-warning");
            n.hide(), e("#trial-plan-restricted-warning .a-tooltip").tooltip({
                placement: "top"
            }), t.find("#invite_chosen_role").on("change", function (e) {
                "" !== e.target && "0-0" !== e.target.value ? n.show() : n.hide()
            })
        }

        function i(t) {
            var n = t.data("projects"),
                i = t.data("editProjectsMembershipTooltip"),
                r = t.data("originalProjects") || {},
                a = e("<div class='form-group'/>"),
                o = e("<label class='control-label'/>").text("Projects"),
                s = e('<i class="hi hi-info-filled hi-12 a-tooltip" title="" data-title="' + i + '"></i>');
            s.tooltip({
                placement: "top"
            }), a.append(o), a.append(s);
            var l = e("<a href='#' class='select-all' data-target='#invite_projects'>Select all</a>");
            a.append(e("<span class='form-right-link pull-right'/>").append(l));
            var c = e("<input name='invite[projects][]' type='hidden'/>"),
                u = e("<select id='invite_projects' name='invite[projects][]' multiple='multiple' class='form-control select optional select2 select2-hidden-accessible' data-allow-clear='true' data-placeholder='Select projects you want to add team members to' data-close-on-select='false' />");
            a.append(c), a.append(u), t.append(a);
            var d = {
                width: "auto;",
                data: n || [],
                templateSelection: select2Callbacks.find("customPillSelection")
            };
            u.select2(d), u.val(r).trigger("change.select2"), AddSelect2Events(u)
        }

        function r(e) {
            MembersList.setupAddNewLineItem(), MembersList.setupRemoveItem(), Links.setupShowInvite(), Links.setupShowEmail(), setupSelect2AddRemoveLinks(e), setupLinkedSelect2Fields(e, ".linked-project-selectors");
            var t = e.find(".projects-container");
            t.length > 0 && (t.data("currentProjects", t.data("originalProjects")), i(t)), n(e)
        }
        Invites.setupDeleteInvite(), Invites.setupResendInvite(), AjaxDialog.registerHook("setup", "inviteBudgetDialog", function () {
            t()
        }), AjaxDialog.registerHook("response", "inviteBudgetDialog", function (e, n) {
            "replace" == e.action && t()
        }), AjaxDialog.registerHook("setup", "inviteDialog", function () {
            r(this)
        }), AjaxDialog.registerHook("response", "inviteDialog", function (e, t) {
            "replace" === e.action && r(this)
        }), AjaxDialog.registerHook("response", "checkGS", function (t) {
            if (t.gs_manager === !0) {
                var n = e("#getting-started-dashboard").data("userId");
                void 0 !== n && GettingStarted.skipOrCompleteStep(n, "invite_team")
            }
        })
    }), $(function () {
        var e = $("#paypal-button-container");
        if (0 !== e.length) {
            var t = {
                env: "live" === e.attr("data-env") ? "production" : "sandbox",
                style: {
                    layout: "horizontal",
                    size: "medium",
                    label: "paypal",
                    shape: "rect",
                    color: "gold",
                    fundingicons: !1,
                    tagline: !1
                },
                funding: {
                    allowed: [paypal.FUNDING.CARD],
                    disallowed: []
                },
                client: {
                    sandbox: e.attr("data-paypal-client-id"),
                    production: e.attr("data-paypal-client-id")
                },
                payment: function (t, n) {
                    return n.payment.create({
                        payment: {
                            intent: "authorize",
                            payer: {
                                payment_method: "paypal"
                            },
                            transactions: [{
                                amount: {
                                    total: +e.attr("data-amount"),
                                    currency: e.attr("data-currency")
                                },
                                payee: {
                                    email: e.attr("data-email")
                                }
                            }]
                        },
                        experience: {
                            input_fields: {
                                no_shipping: 1
                            }
                        }
                    })
                },
                onAuthorize: function (t) {
                    var n = $(".invoice-view");
                    $.post("/invoices/" + e.attr("data-invoice-hash") + "/record_payment", {
                        payment_id: t.paymentID,
                        payer_id: t.payerID,
                        order_id: t.orderID,
                        payment_token: t.paymentToken
                    }).done(function (e) {
                        "success" === e.status ? n.addClass("is-paid") : "error" === e.status && alert(e.message)
                    }).fail(function (e) {
                        window.reportError("Bad /record_payment response", {
                            response: e
                        })
                    })
                },
                onError: function (e) {
                    window.reportError("Error displaying PayPal payment modal", {
                        context: {
                            error: e
                        }
                    }), alert("There is an error displaying the PayPal payment modal. We have been notified!")
                }
            };
            paypal.Button.render(t, "#paypal-button-container")
        }
    }), $(function () {
        function e(e) {
            try {
                AjaxDialog.displayNotifications($.parseJSON(e.responseText))
            } catch (t) {
                AjaxDialog.displayNotifications({
                    alert: "Unexpected error occured"
                })
            }
        }

        function t() {
            AjaxDialog.registerHook("setup", "sendInvoiceDialog", function () {
                var e = this;
                initTooltip(e), e.find("#send-invoice-save").on("click", function () {
                    $("form.send-invoice").submit()
                }), $("button.clipboard").clipboard()
            }), AjaxDialog.registerHook("response", "sendInvoiceResponse", function () {
                $("button.clipboard").clipboard()
            })
        } ! function () {
            var e = $("form");
            e.on("focus", "input[type=number].no-step", function (e) {
                $(this).on("wheel", function (e) {
                    e.preventDefault()
                })
            }), e.on("blur", "input[type=number].no-step", function (e) {
                $(this).off("wheel")
            }), e.on("keydown", "input[type=number].no-step", function (e) {
                (38 == e.which || 40 == e.which) && e.preventDefault()
            })
        }(), $("#invoices").each(function () {
            ClientUtils.add_new_client_to_selection($("select#clients")), setupBatchActions($("table.invoices-table.has-batch-actions")), AjaxDialog.registerHook("setup", "selectInvoiceOrganizationDialog", function () {
                var e = this;
                e.find("select").on("change", function (t) {
                    var n = parseInt($(this.options[this.selectedIndex]).val()),
                        i = $("select#organization_id").data("non-premium-org-ids");
                    $("button#select-invoice-organization-new").prop("disabled", !1), e.find("#upgrade-text").addClass("hidden"), e.find("#upgrade-text .org").addClass("hidden"), $.inArray(n, i) > -1 && ($("button#select-invoice-organization-new").prop("disabled", !0), e.find("#upgrade-text").removeClass("hidden"), e.find("#upgrade-text .org_" + n).removeClass("hidden"))
                })
            })
        }), $("#client").on("change", function () {
            var e = $("#client").val(),
                t = $(".btn.btn-default").data().url,
                n = {
                    client_id: e
                };
            t = t.split("?")[0], t = t + "?" + $.param(n), $(".btn.btn-default").data().url = t
        }), $("#invoices,.invoice-view").each(function () {
            $("#print-invoice").on("click", function () {
                window.print();
                var e = $(".invoice-view").data("invoice-token"),
                    t = $(".invoice-view").find("#print-invoice").data("invoice-type"),
                    n = "invoice" === t ? "/invoices/" : "/invoices/I/",
                    i = n + e + "/printed";
                $.post(i)
            }), $(".brand .logo").on("click", function (e) {
                var t = $(e.target).data("url");
                window.open(t, "_blank")
            }), $(".needs-client-id").on("click", function (e) {
                var t = $(this).data("client-id"),
                    n = $(this).data("alert");
                return t ? void 0 : (window.alert(n), !1)
            }), AjaxDialog.registerHook("setup", "recordPaymentDialog", function () {
                var e = this;
                e.find("#record-payment-save").on("click", function (t) {
                    e.find("form.record-payment").submit()
                }), e.find("form.record-payment").on("ajax:success", function (e, t, n, i) {
                    AjaxDialog.displayNotifications(t)
                }), setupDatePickers(e)
            }), AjaxDialog.registerHook("response", "recordPaymentResponse", function () {
                var e = this;
                setupDatePickers(e)
            }), AjaxDialog.registerHook("setup", "newPaymentDialog", function () {
                var e = this;
                e.find("#new-payment-save").on("click", function (t) {
                    e.find("form.new-payment").submit()
                })
            }), AjaxDialog.registerHook("setup", "viewPaymentDialog", function () {
                var t = this;
                t.find(".a-tooltip").tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                }), t.find("#view-payment-delete").on("click", function (n) {
                    if (!$(n.target).attr("disabled") && window.confirm("Do you really want to delete this payment?")) {
                        var i = t.find("#view-payment-delete").data("invoice-type"),
                            r = t.find("#view-payment-delete").data("invoice-id"),
                            a = t.find("#view-payment-delete").data("payment-id"),
                            o = "invoice" === i ? "/invoices/" : "/invoices/I/";
                        $(".btn", t).attr("disabled", !0), $.ajax(o + r + "/invoice_payments/" + a, {
                            type: "DELETE",
                            dataType: "json"
                        }).success(function (e) {
                            $(".btn", t).attr("disabled", !1), window.location.href = e.url
                        }).error(function (n) {
                            $(".btn", t).attr("disabled", !1), e(n)
                        })
                    }
                })
            }), t()
        }), $("form.invoice-form").each(function () {
            function n() {
                var e = $(".invoice-form .invoice-type").val();
                if ("invoice" === e) var t = isNaN(M) ? "default-options" : "client_" + M;
                else var t = "default-options";
                var n = $(".invoice-form #currency-options ." + t);
                return 0 === n.length && (n = $(".invoice-form #currency-options .default-options")), n.data("options")
            }

            function i() {
                var e = 0,
                    t = 0,
                    i = n();
                $(".line-item").each(function (t, n) {
                    var i = parseFloat($(n).find(".amount").data("amount"));
                    e += i
                }), $("#total").text(e.formatMoney(i));
                var r = parseFloat($("#tax-1").val()),
                    a = parseFloat($("#tax-2").val()),
                    o = parseFloat($("#discount").val());
                r = isNaN(r) ? 0 : r, a = isNaN(a) ? 0 : a, o = isNaN(o) ? 0 : o, $(".line-item").each(function (e, n) {
                    var i = $(n).find(".amount").data("amount"),
                        s = $(n).find(".discount").prop("checked"),
                        l = $(n).find(".tax_1").prop("checked"),
                        c = $(n).find(".tax_2").prop("checked"),
                        u = s ? i * (1 - o / 100) : i,
                        d = r / 100 * (l ? 1 : 0) + a / 100 * (c ? 1 : 0);
                    t += u * (1 + d)
                }), $("#grand-total").text(t.formatMoney(i))
            }

            function r(e) {
                var t = e.find(".line_item_id").first();
                if ("" !== t.val()) {
                    var n = e.find(".destroy_line_item").first();
                    e.find("input:visible").prop("readonly", !0).prop("disabled", !0), e.find(".action.remove-line-item").replaceWith("<span>Save invoice to remove line item</span>"), e.removeClass("line-item"), e.addClass("line-item-removed"), n.val(1)
                } else e.remove()
            }

            function a(e) {
                e.preventDefault();
                var t = $(e.target),
                    n = t.parents("tr").first();
                r(n), f(), i(), C(), S();
                var a = $(e.target).parents("tr.line-item").find(".add-note").data("target");
                $(a).remove()
            }

            function o() {
                var e = $("table#line-items-table");
                e.on("input", '.line-item-modifier[type="number"]', function (e) {
                    this.value.length > this.maxLength && (this.value = this.value.slice(0, this.maxLength))
                }), e.on("focusout", '.line-item-modifier[type!="checkbox"]', function (e) {
                    var t = $(this);
                    if (t.data("original-value") !== t.val() && f(), t.parents(".line-item").is(":last-child")) {
                        var n = t.parents(".line-item"),
                            i = n.find(".description"),
                            r = n.find(".quantity"),
                            a = n.find(".unit_price");
                        ("" !== i.val() || "" !== r.val() || "" !== a.val()) && m()
                    }
                }), e.on("keyup", '.line-item-modifier[type!="checkbox"]', function (e) {
                    if (s(e), 13 == e.keyCode) {
                        var t = $(this),
                            n = t.parents(".line-item");
                        0 === n.next(".line-item").length && m(), n.next(".line-item").find("input:visible:first").trigger("focus").select()
                    }
                }), e.on("change", '.line-item-modifier[type="checkbox"]', function (e) {
                    f()
                }), e.on("change", ".update_totals", function (e) {
                    i(e)
                }), e.on("click", ".remove-line-item", function (e) {
                    a(e)
                })
            }

            function s(e) {
                var t = $(e.target).parents(".line-item");
                l(t)
            }

            function l(e) {
                var t = e.find(".quantity")[0],
                    r = e.find(".unit_price")[0],
                    a = e.find(".amount")[0],
                    o = e.find(".data").length > 0,
                    s = $(t).val();
                s = "" === s ? 0 : s;
                var l = $(r).val();
                l = "" === l ? 0 : l;
                var c = n(),
                    u = parseFloat($(a).data("amount")),
                    d = o ? u : s * l;
                $(a).text(d.formatMoney(c)), $(a).data("amount", d), i()
            }

            function c() {
                var e = n(),
                    t = "Enter amount (" + e.symbol + " " + e.currency + ")",
                    i = $("#line-item-template .unit_price");
                i.prop("placeholder", t);
                var r = $(".line-item .unit_price");
                r.prop("placeholder", t), $(".line-item").each(function (e, t) {
                    l($(t))
                })
            }

            function u() {
                var e = $(".invoice-form #net-terms"),
                    t = e.data("organization-net-terms"),
                    n = isNaN(M) ? null : (e.data("client-net-terms") || [])[M],
                    i = null === n ? t : n,
                    r = TimeUtils.format_date(moment().add(i, "days"));
                $(".invoice-form #due_date-datepicker").val(r), $(".invoice-form #invoice_due_date").val(r)
            }

            function d() {
                var e = $(".invoice-form #invoice-notes"),
                    t = e.data("organization-invoice-notes"),
                    n = isNaN(M) ? null : (e.data("client-invoice-notes") || [])[M],
                    i = null === n ? t : n;
                $(".invoice-form textarea#invoice_notes").val(i)
            }

            function h() {
                var e = $(".invoice-form #invoice-tax-rate"),
                    t = e.data("organization-invoice-tax-rate"),
                    n = isNaN(M) ? null : (e.data("client-invoice-tax-rate") || [])[M],
                    i = null === n ? t : n;
                $(".invoice-form input#tax-1").val(i)
            }

            function f() {
                T = !0
            }

            function p(e) {
                var t = e.find(".line-item .position").map(function () {
                    return $(this).val()
                }).get();
                return Math.max.apply(Math, t)
            }

            function m() {
                var e = $("#line-item-template").clone();
                e.prop("id", ""), e.addClass("line-item"), e.find(".amount").data("amount", 0);
                var t = $("#line-items-table"),
                    n = t.data("max-line-item-index"),
                    i = n + 1;
                t.data("max-line-item-index", i), e.find("input.line-item-notes").removeClass().addClass("form-control hidden line-item-modifier line-item-notes addLineItemNote-" + i), e.find("input.line-item-notes").prop("id", "invoice_invoice_line_items_attributes_" + i + "_notes");
                var r = $("#addLineItemNote-" + n),
                    a = r.length ? r : $(".add-line-item-note-modal").last(),
                    o = a.clone(),
                    s = "addLineItemNote-" + i;
                o.prop("id", s), o.attr("aria-labelledby", s);
                var l = o.find("textarea");
                l.val("");
                var c = "addLineItemNote-" + i;
                l.removeClass().addClass("form-control " + c), o.find(".line-item-note-save").attr("data-note-field", c), o.find(".modal-title.edit-note").addClass("hidden"), o.find(".modal-title.new-note").removeClass("hidden"), o.find(".delete-line-item-note").addClass("hidden").attr("data-note-field", c), e.find(".add-note").removeClass().addClass("add-note addLineItemNote-" + i), e.find(".add-note").attr("data-target", "#" + s), $("body").append(o), e.find("input").each(function (e, t) {
                    var n;
                    n = $(t).prop("name") && "" !== $(t).prop("name") ? $(t).prop("name").replace(/\[0\]/, "[" + i + "]") : "invoice[invoice_line_items_attributes][" + i + "][" + $(t).data("field-name") + "]", $(t).prop("name", n)
                }), e.find("input.position").val(p($(".invoice-form")) + 1), $("table#line-items-table tbody").append(e)
            }

            function g(e) {
                e.preventDefault(), e.stopPropagation();
                var t = $("#line-item-template");
                $(t).find("input").each(function (e, t) {
                    $(t).prop("name", "")
                }), y(function (e) {
                    T = !1, window.location.href = $(".invoice-form").prop("action")
                })
            }

            function v(e, t) {
                if (!e.id) return e.text;
                var n;
                $(".invoice-form .organization-id").val();
                if ("new_client" === e.id) return n = $('<div class="new-client"></div>'), n.text(e.text), n;
                var i = "true" === $('.invoice-form input[name="is_new"]').val(),
                    r = $('#client option[value="' + e.id + '"]').data("archived");
                if (r) {
                    if (i) return;
                    n = $('<div class="select2-client-result"></div>'), n.text(e.text), n.append($('<span class="actions"><span>Archived</span></span>'))
                } else {
                    var a = $('<div class="client-name"></div>');
                    a.text(e.text), n = $('<div class="select2-client-result"></div>'), n.append(a)
                }
                return n
            }

            function y(t, n) {
                var i = $(".invoice-form .invoice-type").val(),
                    r = $(".invoice-form .invoice-notes");
                r.prop("name", "");
                var a = $('<input type="hidden" name="' + i + '[notes]"/>').val(r.val()),
                    o = $(".invoice-form"),
                    s = o.clone();
                a.appendTo(s), n && $('<input type="hidden" name="check_client_presence" value="true"/>').appendTo(s), $("#client").length > 0 && $('<input type="hidden" name="invoice[client]" value="' + $("#client").val() + '"/>').appendTo(s), $.rails.disableFormElements(o);
                var l = "" === o.find(".invoice-id").val() ? "POST" : "PATCH",
                    c = o.prop("action");
                E = !0, $.ajax({
                    type: l,
                    url: c,
                    data: s.serialize(),
                    dataType: "json",
                    success: function (e) {
                        $.rails.enableFormElements(o), E = !1, e.html && ($(".invoice-form").replaceWith(e.html), b()), e.status && "ok" !== e.status ? (e.totals_changed ? AjaxDialog.run("/totals_changed/" + i + ".dialog?" + $.param({
                            data: JSON.stringify(e.changed_data)
                        })) : AjaxDialog.displayNotifications({
                            alert: e.alert
                        }), S()) : t(e), initTooltip(o)
                    },
                    error: function (t) {
                        $.rails.enableFormElements(o), E = !1, e(t)
                    }
                })
            }

            function b() {
                var e = $(".invoice-form"),
                    n = e.find(".organization-id").val();
                R = $("select#client"), R.select2({
                    dropdownParent: $(".client-select"),
                    allowClear: !0,
                    templateResult: v,
                    width: "100%"
                }).on("select2:selecting", function (e) {
                    "new_client" === e.params.args.data.id && (e.preventDefault(), e.stopPropagation(), R.select2("close"), AjaxDialog.run("/organizations/" + n + "/clients/new.dialog"))
                }).on("select2:select", function (e) {
                    M = e.params.data.id, R.find('[selected="selected"]').removeAttr("selected"), R.find('option[value="' + M + '"]').attr("selected", !0), c(), u(), d(), h(), f()
                }), setupDatePickers(e, {
                    onchange: function (e, t) {
                        e.data("invoice-modifier") && f()
                    }
                }), $("#save-invoice-draft").on("click", g), $("#save-invoice").on("click", g), $("#cancel-invoice").on("click", function (e) {
                    T && (D = !0, e.preventDefault(), e.stopPropagation(), window.confirm("Any unsaved changes will be lost. Leave?") ? window.location.href = e.target.href : D = !1)
                }), o(), $("#add-line-item").on("click", function (e) {
                    e.preventDefault(), e.stopPropagation(), m()
                }), $("#tax-1").on("keyup", i), $("#tax-2").on("keyup", i), $("#discount").on("keyup", i), $("#totals-table").on("input", function (e) {
                    var t = $(e.target);
                    t.is('input[type="number"]') && e.target.value.length > e.target.maxLength && (e.target.value = e.target.value.slice(0, e.target.maxLength))
                }), $('.invoice-modifier[type!="checkbox"]').on("keyup", f), $('.invoice-modifier[type="checkbox"]').on("change", f), $("#send-invoice").on("click", function (e) {
                    e.preventDefault(), e.stopPropagation(), $(this).is(".disabled") || y(function (e) {
                        T = !1;
                        var t = $("#send-invoice").data("url");
                        AjaxDialog.run(t)
                    }, !0)
                }), $("#generate-line-items").on("click", function (e) {
                    if (e.preventDefault(), e.stopPropagation(), $("#generate-line-items").data("org-currency-mismatch") === !1) {
                        var t = $("#generate-line-items").data("url");
                        AjaxDialog.run(t)
                    }
                }), _(e), t()
            }

            function w(e) {
                var t = e.find(".line-item, .line-item-removed"),
                    n = e.find("#line-items-table").data("max-stored-position");
                $.each(t, function (e, t) {
                    var i = $(t);
                    i.find(".position").val(n + e + 1)
                })
            }

            function _(e) {
                var t = function (e, t) {
                    return t.children().each(function (e, t) {
                        $(t).width($(t).width())
                    }), t
                },
                    n = e.find("table#line-items-table tbody");
                n.sortable({
                    items: "tr.line-item, tr.line-item-removed",
                    handle: "td.line-item-sortable-handle",
                    placeholder: "line-item-placeholder",
                    helper: t,
                    forcePlaceholderSize: !0,
                    tolerance: "pointer",
                    revert: 300,
                    cursor: "move"
                }).on("sortstart", function (e, t) {
                    var n = 0;
                    $("td, th", t.helper).each(function () {
                        var e = 1,
                            t = $(this).attr("colspan");
                        t > 1 && (e = t), n += e
                    }), t.placeholder.html('<td colspan="' + n + '">&nbsp;</td>'), t.placeholder.height(t.item.outerHeight())
                }).on("sortstop", function (t, n) {
                    w(e)
                })
            }

            function x() {
                var t = $(this).closest(".modal"),
                    n = t.find("#invoice_line_item_start_date").val(),
                    i = t.find("#invoice_line_item_stop_date").val(),
                    r = $(".invoice-form .organization-id").val(),
                    a = $("form.generate-line-items");
                "" !== n && "" !== i && ($(".btn-primary", t).attr("disabled", !0), $.ajax({
                    type: "POST",
                    url: "/organizations/" + r + "/members_rate_status",
                    data: a.serialize(),
                    dataType: "json",
                    success: function (e) {
                        if ($(".btn-primary", t).attr("disabled", !1), "error" === e.status) console.log(e.message);
                        else {
                            var n, i = t.find(".no_bill_rate_notice"),
                                r = i.find(".message");
                            e.no_billrate_count && e.no_billrate_count > 0 ? (n = e.no_billrate_count + " of " + e.total_count + " members are missing a bill rate", r.text(n), i.removeClass("hidden")) : e.no_payrate_count && e.no_payrate_count > 0 ? (n = e.no_payrate_count + " of " + e.total_count + " members are missing a pay rate", r.text(n), i.removeClass("hidden")) : (r.text(""), i.addClass("hidden"))
                        }
                    },
                    error: function (n) {
                        $(".btn-primary", t).attr("disabled", !1), e(n)
                    }
                }))
            }

            function k(e, t) {
                var n = JSON.parse(e.find(".data").val()),
                    i = JSON.parse(t.find(".data").val());
                if (n.expense_id || i.expense_id) return n.expense_id === i.expense_id;
                var r = moment(n.start_date),
                    a = moment(i.start_date),
                    o = moment(n.end_date),
                    s = moment(i.end_date),
                    l = a >= r && o >= a,
                    c = r >= a && s >= r,
                    u = l || c,
                    d = $(n.project_ids).filter(i.project_ids).length > 0,
                    h = $(n.user_ids).filter(i.user_ids).length > 0,
                    f = !0;
                return "task_ids" in n && "task_ids" in i && (f = $(n.task_ids).filter(i.task_ids).length > 0), u && d && h && f
            }

            function C() {
                $(".line-item.overlap").each(function () {
                    var e = $(this);
                    e.removeClass("overlap"), e.find("span.help-block").remove()
                })
            }

            function S() {
                var e = [];
                $(".line-item").each(function () {
                    var t = $(this),
                        n = "" !== t.find(".line_item_id").val(),
                        i = t.find(".data").length > 0;
                    !n && i && e.push(t)
                });
                for (var t = [], n = e.length, i = 1; n > i; i++)
                    for (var r = 0; i > r; r++) k(e[i], e[r]) && (-1 === $.inArray(e[i], t) && t.push(e[i]), -1 === $.inArray(e[r], t) && t.push(e[r]));
                $.each(t, function (e, t) {
                    if (t.addClass("overlap"), 0 === t.find("span.help-block").length) {
                        var n = "Overlaps with another generated line item. Please delete the overlapping line items.";
                        $('<span class="help-block">' + n + "</span>").appendTo(t.find(".description").closest(".form-group"))
                    }
                })
            }

            function A(e) {
                e.find(".a-tooltip").tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                }), setupDateRangePickers(e, {
                    onchange: function (e, t, n) {
                        x()
                    }
                });
                var t = e.find("form").data("tasksUrl"),
                    n = e.find("#invoice_line_item_tasks");
                n.select2({
                    allowClear: !0,
                    width: "100%",
                    language: {
                        noResults: function () {
                            var t = e.find("#invoice_line_item_start_date"),
                                i = e.find("#invoice_line_item_stop_date");
                            return t.val() && i.val() ? n.data("labels-no-tasks") : "Must select a date range first"
                        }
                    },
                    ajax: {
                        url: t,
                        method: "POST",
                        dataType: "json",
                        delay: 250,
                        contentType: "application/json; charset=utf-8",
                        data: function (t) {
                            var n = e.find("#invoice_line_item_projects"),
                                i = e.find("#invoice_line_item_members"),
                                r = e.find("#invoice_line_item_start_date"),
                                a = e.find("#invoice_line_item_stop_date");
                            return JSON.stringify({
                                project_ids: n.val(),
                                user_ids: i.val(),
                                start_date: r.val(),
                                stop_date: a.val(),
                                term: t.term,
                                page: t.page
                            })
                        }
                    }
                })
            }
            var T = !1,
                E = !1,
                D = !1,
                M = parseInt($("select#client option[selected='selected']").val()),
                R = $("select#client");
            b(), window.onbeforeunload = function (e) {
                return !T || E || D ? void 0 : "Any unsaved changes will be lost"
            }, AjaxDialog.registerHook("setup", "generateLineItemsDialog", function () {
                var e = this;
                A(e), e.on("change", "select.check-for-members", x), e.find(".generate-line-items-generate").on("click", function (t) {
                    var n = $("#line-items-table").data("max-line-item-index"),
                        i = $("#client").val();
                    $('<input type="hidden" name="client_id" value="' + i + '"/>').appendTo("form.generate-line-items"), $('<input type="hidden" name="max-line-item-index" value="' + n + '"/>').appendTo("form.generate-line-items"), $(".invoice-form .invoice-id").clone().appendTo("form.generate-line-items"), $("#select2-client-container").clone().appendTo("form.generate-line-items"), e.find("form.generate-line-items").submit()
                })
            }), AjaxDialog.registerHook("response", "generateLineItemsResponse", function (e, t, n) {
                var r = this;
                if ("replace" === e.action && A(r), "append" === e.action) {
                    var a = $("#line-items-table").data("max-line-item-index");
                    $("#line-items-table").data("max-line-item-index", a + e.line_item_count), S()
                }
                initTooltip($(".line-items-table")[0]), i(), w($(".invoice-form"))
            }), AjaxDialog.registerHook("setup", "newClientDialog", function (e, t, n) {
                initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this)
            }), AjaxDialog.registerHook("setup", "updateClientDialog", function (e, t, n) {
                initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), $('<input type="hidden" name="selected" value="' + M + '"/>').appendTo(".edit_client")
            }), AjaxDialog.registerHook("response", "newClientResponse", function (e, t, n) {
                initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), e.options_html && ($("#client").html(e.options_html), R.trigger("change"), M = parseInt($("select#client option[selected='selected']").val())), e.net_terms && ($("#net-terms").data("client-net-terms", e.net_terms), u()), e.invoice_notes && ($("#invoice-notes").data("client-invoice-notes", e.invoice_notes), d())
            }), AjaxDialog.registerHook("response", "updateClientResponse", function (e, t, n) {
                initTooltip(this), ClientUtils.setup_organization_note_checkbox(this), ClientUtils.setup_net_terms_checkbox(this), e.options_html && ($("#client").html(e.options_html), R.trigger("change")), e.net_terms && ($("#net-terms").data("client-net-terms", e.net_terms), u()), e.invoice_notes && ($("#invoice-notes").data("client-invoice-notes", e.invoice_notes), d())
            }), AjaxDialog.registerHook("setup", "totalsChangedDialog", function (e, t, a) {
                initTooltip(this);
                var o = this;
                o.find("#totals-changed-save").on("click", function (e) {
                    var t = n();
                    $(".changes-row").each(function (e, n) {
                        var a = $(n).data("line-item-data"),
                            s = $('.row-id[value="' + a.row_id + '"]');
                        if (s.length > 0) {
                            var l = s.parents(".line-item");
                            if ("all_gone" === a["new"]) r(l);
                            else {
                                var c = l.find(".data"),
                                    u = l.find(".quantity"),
                                    d = l.find(".unit_price"),
                                    h = l.find(".amount"),
                                    f = a["new"].data.expense_id;
                                c.val(JSON.stringify(a["new"].data));
                                var p = a["new"].data.rates || [],
                                    m = f ? 1 : (a["new"].data.total_seconds / 3600).toFixed(2),
                                    g = TimeUtils.format_duration(a["new"].data.total_seconds, !0),
                                    v = a["new"].data.total_amount.formatMoney(t),
                                    y = f ? v : 1 === p.length ? p[0].formatMoney(t) : "Mixed";
                                f || (u.attr("title", "Hours: " + g), u.attr("data-original-title", "Hours: " + g), u.tooltip()), u.text(m), d.text(y), h.data("amount", a["new"].data.total_amount), h.text(v)
                            }
                            i(), o.modal("hide")
                        }
                    })
                })
            })
        })
    });
var LineItems = {
    saveNote: function (e) {
        var t = e.target.dataset.noteField,
            n = $("textarea." + t).val();
        $(".line-item-notes." + t).val(n);
        var i = $(".add-note." + t);
        n.length ? (i.find(".edit-note-link").removeClass("hidden"), i.find(".add-note-link").addClass("hidden")) : (i.find(".edit-note-link").addClass("hidden"), i.find(".add-note-link").removeClass("hidden"));
        var r = $("#" + t);
        if (r.modal("hide"), "undefined" != typeof analytics) {
            var a = $("body").data("currentUserDetails"),
                o = r.data("orgId");
            analytics.track("Added line item note", {
                user_id: a.id,
                email: a.email,
                organization_id: o
            }, {})
        }
    },
    deleteNote: function (e) {
        var t = e.target.dataset.noteField;
        if (confirm("Delete this line item note?")) {
            $(".line-item-notes." + t).val("");
            var n = $(".add-note." + t);
            n.find(".edit-note-link").addClass("hidden"), n.find(".add-note-link").removeClass("hidden");
            var i = $("#" + t);
            i.modal("hide"), $(e.target).addClass("hidden"), i.find(".modal-title.edit-note").addClass("hidden"), i.find(".modal-title.new-note").removeClass("hidden")
        }
        if ("undefined" != typeof analytics) {
            var r = $("body").data("currentUserDetails"),
                a = i.data("orgId");
            analytics.track("Deleted line item note", {
                user_id: r.id,
                email: r.email,
                organization_id: a
            }, {})
        }
    }
};
! function () {
    window.SetupLocationMap = function (e, t) {
        var n = {
            lat: 0,
            "long": 0
        };
        t.length > 0 && (n.lat = t[0][0], n["long"] = t[0][1]);
        var i, r, a, o = {
            zoom: 8,
            center: new google.maps.LatLng(n.lat, n["long"])
        },
            s = new google.maps.Map(e.get(0), o),
            l = new google.maps.LatLngBounds;
        for (i = 0; i < t.length; i++) {
            if (r = new google.maps.LatLng(t[i][0], t[i][1]), "undefined" != typeof a) {
                new google.maps.Polyline({
                    path: [a, r],
                    strokeColor: "#ff250e",
                    strokeOpacity: .8,
                    strokeWeight: 1,
                    map: s
                })
            } else {
                new google.maps.Marker({
                    position: r,
                    map: s,
                    icon: "http://maps.google.com/mapfiles/ms/icons/green-dot.png",
                    title: "(Start) " + t[i][2] + " -" + t[i][3]
                })
            }
            new google.maps.Marker({
                position: r,
                map: s,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: "#ff250e",
                    strokeColor: "#ff250e",
                    scale: 3
                },
                title: t[i][2] + " -" + t[i][3]
            });
            l.extend(r), a = r
        }
        if (t.length > 0) {
            var c = t[t.length - 1],
                u = (new google.maps.Marker({
                    position: r,
                    map: s,
                    icon: "http://maps.google.com/mapfiles/ms/icons/red-dot.png",
                    title: "(Stop) " + c[2] + " -" + c[3]
                }), new google.maps.LatLng(l.getNorthEast().lat() + .01, l.getNorthEast().lng() + .01)),
                d = new google.maps.LatLng(l.getSouthWest().lat() - .01, l.getSouthWest().lng() - .01);
            l.extend(u), l.extend(d), s.fitBounds(l)
        }
    }, window.GoogleMapsJSONP = function (e, t) {
        null == GoogleMapsJSONP.idx && (GoogleMapsJSONP.idx = 0), GoogleMapsJSONP.idx++;
        var n = "GoogJSONP_" + Date.now().toString() + "_" + GoogleMapsJSONP.idx.toString();
        window[n] = function () {
            window[n] = void 0, e.apply(window, arguments)
        };
        var i = document.createElement("script");
        i.type = "text/javascript";
        var r = "https://maps.googleapis.com/maps/api/js?v=3.exp&callback=" + n;
        t && (r += "&key=" + encodeURIComponent(t)), i.src = r, document.body.appendChild(i)
    }
}(), $(function () {
    function e() {
        var e = $("select#project_task_id"),
            t = $("input#project_id"),
            n = $("input#task_id");
        e.select2();
        var i = t.val();
        if (i) {
            var r = n.val(),
                a = "" + i;
            r && (a += "_" + r), e.val(a).trigger("change")
        }
        e.on("select2:select", function (e) {
            var i = e.params.data;
            t.val(i.project_id), n.val(i.task_id)
        })
    }

    function t() {
        window.setTimeout(function () {
            $("textarea#note_description").select()
        }, 300)
    }
    AjaxDialog.registerHook("response", "PopoverNotesUpdate", function (t, n) {
        t.hasOwnProperty("notes") && "append" == t.action && (1 == t.notes.number_of ? $(t.notes.button).addClass("text-success") : 0 == t.notes.number_of && $(t.notes.button).removeClass("text-success")), e()
    }), AjaxDialog.registerHook("setup", "notesDialog", function () {
        e(), t(), $(".popover").popover("hide")
    })
}), $(function () {
    $("#notifications-page").each(function () {
        var e = $(this),
            t = e.find(".show-more-notifications");
        t.on("click", function () {
            var n = e.find(".resolved-notifications .notification").length,
                i = $.ajax("/notifications/show_more?offset=" + n);
            i.done(function (i) {
                $(i).length > 0 ? (n += $(i).length, e.find(".resolved-notifications").append(i)) : (t.addClass("disabled"), t.attr("disabled", "disabled"), t.html("No more notifications to show"))
            })
        })
    })
});
var OrganizationWizard = {
    REFRESH_INTERVAL: 15e3,
    refresh_timeout: null,
    stopRefresh: function () {
        null !== OrganizationWizard.refresh_timeout && (clearTimeout(OrganizationWizard.refresh_timeout), OrganizationWizard.refresh_timeout = null)
    },
    startRefresh: function () {
        OrganizationWizard.stopRefresh(), OrganizationWizard.refresh_timeout = setTimeout(OrganizationWizard.refreshButton, OrganizationWizard.REFRESH_INTERVAL)
    },
    refreshButton: function () {
        if (OrganizationWizard.stopRefresh(), $(".wizard_refresh_button .refresh_wrapper").length > 0) {
            var e = $(".wizard_refresh_button").first(),
                t = e.data("url");
            $.get(t, function (e) {
                e.disabled ? OrganizationWizard.startRefresh() : OrganizationWizard.enableButton()
            })
        }
    },
    enableButton: function () {
        OrganizationWizard.stopRefresh(), $(".wizard_refresh_button").each(function () {
            $("a.btn", this).unwrap(".refresh_wrapper").removeClass("disabled")
        })
    },
    setupRefreshButton: function () {
        $(".wizard_refresh_button .refresh_wrapper").length > 0 && OrganizationWizard.startRefresh()
    },
    setupOrgNameSwitcher: function (e) {
        $("#integration_account_id", e).on("change", function () {
            var t = $(this.options[this.selectedIndex]);
            if (t.val()) {
                var n = t.text();
                $("#organization_name", e).val(n)
            }
        })
    },
    setupImportNavigation: function (e) {
        $("#retrieving-view #custom-import", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".import-view", e).addClass("hidden"), $("#select-projects", e).removeClass("hidden"), $(".faq-list").addClass("hidden"), $(".faq-list#select-projects-faq").removeClass("hidden")
        }), $("#select-projects #prev", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".import-view", e).addClass("hidden"), $("#retrieving-view", e).removeClass("hidden"), $(".faq-list").addClass("hidden"), $(".faq-list#retrieving-faq").removeClass("hidden")
        }), $("#select-projects #next", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".import-view", e).addClass("hidden"), $("#select-users", e).removeClass("hidden"), $(".faq-list").addClass("hidden"), $(".faq-list#select-users-faq").removeClass("hidden")
        }), $("#select-users #prev", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".import-view", e).addClass("hidden"), $("#select-projects", e).removeClass("hidden"), $(".faq-list").addClass("hidden"), $(".faq-list#select-projects-faq").removeClass("hidden")
        })
    },
    setTogglecheckboxState: function (e, t) {
        var n = "input" + t + '[type="checkbox"]',
            i = $(n + ":checked").length,
            r = $(n + ":not(:checked)").length;
        $(".has-checkboxes .select_all", e).prop("indeterminate", i > 0 && r > 0).prop("checked", 0 === r);
        var a = r > 0 ? "Select all" : "Unselect all";
        $(".select-all-header span", e).text(a)
    },
    setupCheckboxes: function (e, t) {
        $(".has-checkboxes", e).checkboxes("range", !0), $(".has-checkboxes .select_all", e).on("click", function () {
            $(".has-checkboxes", e).checkboxes(this.checked ? "check" : "uncheck"), $(".select-all-header span", e).text(this.checked ? "Unselect all" : "Select all")
        });
        var n = "input" + t + '[type="checkbox"]';
        OrganizationWizard.setTogglecheckboxState(e, t), e.on("change", n, function () {
            OrganizationWizard.setTogglecheckboxState(e, t)
        })
    },
    action_error: function (e) {
        try {
            AjaxDialog.displayNotifications($.parseJSON(e.responseText))
        } catch (t) {
            AjaxDialog.displayNotifications({
                alert: "Unexpected error occured"
            })
        }
    },
    submitCheckboxChanges: function (e, t) {
        clearTimeout(OrganizationWizard.import_timeout), OrganizationWizard.import_timeout = setTimeout(function () {
            var n = e.data("store-selection-url");
            $.ajax({
                type: "POST",
                url: n,
                data: t,
                dataType: "json",
                success: function (e) { },
                error: function (e) {
                    OrganizationWizard.action_error(e)
                }
            })
        }, 1e3)
    },
    setupCheckboxListeners: function (e) {
        $("#select-projects", e).on("change", function (t) {
            var n = $(t.target);
            if (n.is('input[type="checkbox"]')) {
                var i = [];
                $("#select-projects input.project:checked", e).each(function () {
                    i.push($(this).val())
                }), OrganizationWizard.submitCheckboxChanges(e, {
                    type: "remote_project_ids",
                    ids: i
                })
            }
        }), $("#select-users", e).on("change", function (t) {
            var n = $(t.target);
            if (n.is('input[type="checkbox"]')) {
                var i = [];
                $("#select-users input.user:checked", e).each(function () {
                    i.push($(this).val())
                }), OrganizationWizard.submitCheckboxChanges(e, {
                    type: "remote_user_ids",
                    ids: i
                })
            }
        })
    },
    setupRetryRetrieving: function (e) {
        $("#error-container #retry", e).on("click", function (t) {
            t.preventDefault(), t.stopPropagation(), $(".retrieving", e).addClass("hidden"), $("#retrieving-projects-and-users", e).removeClass("hidden"), OrganizationWizard.retrieveProjectsAndUsers(e)
        })
    },
    prepare_project_checkboxes: function (e, t) {
        var n, i = $("#select-projects .project-chekboxes", e);
        $(t).each(function (t, r) {
            if (-1 !== $.inArray(r.status, ["linked", "unlinked", "matched"])) {
                var a = -1 !== $.inArray(r.remote_id.toString(), e.data("remote-project-ids"));
                n = a ? $('<input class="project" type="checkbox" value="' + r.remote_id + '"checked>') : $('<input class="project" type="checkbox" value="' + r.remote_id + '">');
                var o = $('<span class="checkbox-label-name"/>').text(r.normalized_name),
                    s = $('<label class="is-block is-regular"></label>');
                s.append(n), s.append(o), s.appendTo(i)
            }
        }), OrganizationWizard.setupCheckboxes(e.find("#select-projects"), ".project")
    },
    prepare_user_checkboxes: function (e, t) {
        var n, i, r = e.find(".user-chekboxes");
        $(t).each(function (t, a) {
            if (-1 !== $.inArray(a.status, ["linked", "unlinked", "matched"]))
                if (a.has_valid_email) {
                    var o = -1 !== $.inArray(a.remote_id.toString(), e.data("remote-user-ids"));
                    i = o ? $('<input class="user enabled" type="checkbox" value="' + a.remote_id + '"checked>') : $('<input class="user enabled" type="checkbox" value="' + a.remote_id + '">'), l = $('<span class="checkbox-label-name"/>').text(a.remote_name), n = $('<label class="is-block is-regular"></label>'), n.append(i), n.append(l), n.appendTo(r)
                } else {
                    var s = $('<input class="user" type="checkbox" disabled>'),
                        l = $('<span class="checkbox-label-name"/>').text(a.remote_name),
                        c = $('<span class="a-tooltip ml-5" title="User has an invalid email address" data-placement="top"><i class="hi hi-info hi-16 text-lighter"/></span>');
                    n = $('<label class="is-block is-regular"></label>'), n.append(s), n.append(l), n.append(c), n.appendTo(r)
                }
        }), OrganizationWizard.setupCheckboxes(e.find("#select-users"), ".user.enabled")
    },
    is_auth_error: function (e) {
        return e.match(/Failed to authenticate/)
    },
    retrieveProjectsAndUsers: function (e) {
        var t = LoadIntegrationList({
            url: e.data("project-list-url")
        }).done(function (t) {
            OrganizationWizard.prepare_project_checkboxes(e, t.data)
        }).fail(function (e) {
            OrganizationWizard.is_auth_error(e.error) || OrganizationWizard.action_error(e)
        }),
            n = LoadIntegrationList({
                url: e.data("user-list-url")
            }).done(function (t) {
                OrganizationWizard.prepare_user_checkboxes(e, t.data)
            }).fail(function (e) {
                OrganizationWizard.is_auth_error(e.error) || OrganizationWizard.action_error(e)
            }),
            i = LoadIntegrationList({
                url: e.data("projects-members-url")
            }).done(function (e) { }).fail(function (e) {
                OrganizationWizard.is_auth_error(e.error) || OrganizationWizard.action_error(e)
            });
        $.when(t, n, i).then(function (t, n) {
            initTooltip($("#import-projects-and-users")), $(".retrieving", e).addClass("hidden"), $("#projects-and-users-retrieved", e).removeClass("hidden"), e.data("start-on-projects-page") && ($(".import-view", e).addClass("hidden"), $("#select-projects", e).removeClass("hidden"));
            var i = [];
            $(t.data).each(function (e, t) {
                -1 !== $.inArray(t.status, ["linked", "unlinked", "matched"]) && i.push(t)
            });
            var r = [];
            $(n.data).each(function (e, t) {
                -1 !== $.inArray(t.status, ["linked", "unlinked", "matched"]) && r.push(t)
            });
            var a = i.length.toString() + " project" + (i.length > 1 || 0 === i.length ? "s" : ""),
                o = r.length.toString() + " user" + (r.length > 1 || 0 === r.length ? "s" : ""),
                s = "Found " + a + " and " + o + " to import";
            $("#projects-and-users-retrieved .message", e).text(s), $(".wizard-buttons input, .wizard-buttons button", e).each(function () {
                $(this).prop("disabled", !1)
            })
        }, function (t) {
            $(".retrieving", e).addClass("hidden"), $("#error-container", e).removeClass("hidden");
            var n = OrganizationWizard.is_auth_error(t.error) ? "Access not authorized." : "Unexpected error occured.";
            n += " Please try again or contact support.", $("#error-container .message", e).text(n)
        })
    },
    setupIndustryHandling: function (e) {
        function t() {
            r.addClass("hidden"), a.addClass("optional").removeClass("required").prop("disabled", !0).prop("required", !1), s && (e.find(".hubstaff_industry").removeClass("hidden"), r.find(".hi-close").remove())
        }

        function n() {
            var n = e.get(0).getBoundingClientRect(),
                i = a.get(0).getBoundingClientRect(),
                r = i.top - n.top + 20;
            a.after($('<i class="hi hi-close hi-12 text-superlight"/>').css({
                position: "absolute",
                top: r,
                right: 14,
                transform: "translateY(-50%)"
            }).hover(function () {
                $(this).css("cursor", "pointer")
            }).one("click", function () {
                t(), a.val(""), o.val(null).trigger("change")
            }))
        }

        function i(e) {
            return "Other" === e.find(":selected").text()
        }
        var r = e.find(".hubstaff_industry_other"),
            a = e.find(".hubstaff_industry_other_input"),
            o = e.find("select.hubstaff_industry_input"),
            s = a.data("hideOriginal");
        s && i(o) && (r.removeClass("hidden"), e.find(".hubstaff_industry").addClass("hidden"), a.removeClass("optional").addClass("required").prop("disabled", !1).prop("required", !0), n()), e.on("change", "select.hubstaff_industry_input", function () {
            var o = $(this);
            i(o) ? (r.removeClass("hidden"), a.removeClass("optional").addClass("required").prop("disabled", !1).prop("required", !0).focus(), s && (a.css("position", "relative"), e.find(".hubstaff_industry").addClass("hidden"), n())) : t()
        })
    },
    setupOrgDetailsAnimation: function (e) {
        e.find(".signup-flying").append('<div class="flying-guy"/>');
        var t = e.find(".flying-trigger").length,
            n = {
                degrees: {
                    range: -16,
                    start: 0
                },
                left: {
                    range: 40,
                    start: 0
                },
                top: {
                    range: -72,
                    start: 70
                },
                height: {
                    range: -100,
                    start: 200
                },
                calculate: function (e, t) {
                    return this[e].start + this[e].range * t
                }
            };
        e.on("change blur", "input.flying-trigger, select.flying-trigger, .flying-trigger input", function (i) {
            var r = $(i.target);
            if (r.hasClass(".flying-trigger") || (r = r.closest(".flying-trigger")), !r.attr("data-changed")) {
                r.attr("data-changed", "true");
                var a = e.find(".flying-trigger[data-changed]").length,
                    o = a / t,
                    s = e.find(".flying-guy");
                s.css({
                    transform: "rotate(" + n.calculate("degrees", o).toString() + "deg)"
                }).animate({
                    left: n.calculate("left", o).toString() + "%",
                    top: n.calculate("top", o).toString() + "%",
                    height: n.calculate("height", o).toString() + "px"
                })
            }
        })
    },
    setupOrgNeedsAnimation: function (e) {
        var t = e.find(".wizard-form-wrapper").data("orgName"),
            n = $('<div class="wizard-org-name"/>'),
            i = e.find(".hubstaff_select_addons").length ? ".hubstaff_select_addons" : ".hubstaff_select_needs";
        n.text(t);
        var r = e.find(i + " input:checked").length + 1;
        r > 10 && (r = 10);
        var a = $('<div class="city"/>');
        a.append(n);
        var o = e.find(".signup-city");
        o.attr("data-city", r), o.append(a);
        for (var s = 1; 10 >= s; ++s) a.append('<div class="city-' + s + '"/>');
        e.on("change", i + " input", function (t) {
            var n = e.find(i + " input:checked").length + 1;
            n > 10 && (n = 10), o.attr("data-city", n)
        })
    },
    setupOrgProjectsAnimation: function (e) {
        e.find(".projects-store").append('<div class="project-box-container"/>');
        var t = e.find(".nested_form"),
            n = e.find(".project-box-container");
        t.each(function () {
            var t = $(this).data("formKey"),
                i = $(this).find(".project-input-field");
            n.append('<div class="project-box" data-form-number=' + t + '><div class="project-avatar">' + i.val().charAt(0).toUpperCase() + '</div><div class="project-name">' + i.val() + '</div><i class="hi hi-stopwatch"></i><div class="project-time">00:00:00</div></div>'), e.on("keyup", ".project-input-field", function () {
                var e = $(this).closest(".nested_form").data("formKey");
                n.find($("*[data-form-number=" + e + "]")).find(".project-avatar").text($(this).val().charAt(0).toUpperCase()), n.find($("*[data-form-number=" + e + "]")).find(".project-name").text($(this).val())
            })
        })
    },
    setupOrgProductStepAnimation: function (e) {
        var t = e.find(".welcome-illustration-wrapper"),
            n = $(".wizard-product-selector"),
            i = "";
        n.on("change", function (e) {
            i = e.target.value, t.toggleClass(i)
        })
    },
    updateDynamicFields: function (e, t) {
        var n = e.find(".project-box-container"),
            i = e.find(".nested_form"),
            r = t.formKey,
            a = i.last().find(".project-input-field"),
            o = $(".project-box").length >= 3 ? " hide" : "";
        if ("add" == t.action) {
            var s = "undefined" != typeof a.val() ? a.val().charAt(0).toUpperCase() : "";
            n.append('<div class="project-box' + o + '" data-form-number=' + r + '><div class="project-avatar">' + s + '</div><div class="project-name">' + a.val() + '</div><i class="hi hi-stopwatch"></i><div class="project-time">00:00:00</div></div>')
        } else if ("remove" == t.action) {
            var l = n.find($("*[data-form-number=" + r + "]"));
            l.hasClass("hide") || $(".project-box.hide").first().removeClass("hide"), l.remove()
        }
    }
};
$(function () {
    OrganizationWizard.setupRefreshButton(), $("#new_organization").each(function () {
        $("body").on("click", ".link-organization", function (e) {
            e.preventDefault(), e.stopImmediatePropagation();
            var t = $(this).data("product"),
                n = $('.organization-link-to[value="' + t + '"]');
            n.length && (n.prop("checked", !0), $("#tasks-learn-more-modal").modal("hide"))
        })
    }), $("#new-org-from-integration").each(function () {
        OrganizationWizard.setupOrgNameSwitcher($(this))
    }), $("#import-projects-and-users").each(function () {
        var e = $(this);
        OrganizationWizard.setupImportNavigation(e), OrganizationWizard.setupCheckboxListeners(e), OrganizationWizard.setupRetryRetrieving(e), OrganizationWizard.retrieveProjectsAndUsers(e)
    }), $("#hubstaff_industry").each(function () {
        OrganizationWizard.setupIndustryHandling($(this))
    }), $(".other-industry-button").on("click", function () {
        $(".other-industry").hide(), $(".other-industry-form").show(), $("#other-industry").focus()
    }), $(".show-basic-plan-link").on("click", function () {
        $(".pricing-table-column:nth-of-type(2)").show().find(".pricing-head").css("height", $(".pricing-table-column:nth-of-type(3)").find(".pricing-head").outerHeight()), $(".show-basic-plan").hide(), $("html").animate({
            scrollTop: $(".pricing-table-column:nth-of-type(2)").offset().top - 50
        }, "slow")
    });
    var e = function (t) {
        var n = t.data("requiredFor"),
            i = t.data("addon"),
            r = $(".addons-button[data-required-for=" + i + "]"),
            a = n ? $(".addons-button[data-addon=" + n + "]") : "",
            o = t.data("includes") || "";
        if (!t.find("input").is(":checked") && a.length ? (a.find("input").prop("checked", !1), e(a)) : t.find("input").is(":checked") && r.length && (r.find("input").prop("checked", !0), e(r)), o.length) {
            var s = t.find("input").is(":checked");
            $(".addons-button[data-addon=" + o + "]").find("input").prop("checked", s)
        }
    };
    $(".addons-button").on("click", function () {
        e($(this))
    }), $(".welcome-layout").each(function () {
        OrganizationWizard.setupOrgDetailsAnimation($(this)), OrganizationWizard.setupOrgNeedsAnimation($(this)), OrganizationWizard.setupOrgProjectsAnimation($(this)), OrganizationWizard.setupOrgProductStepAnimation($(this))
    })
});
var Organizations = function (e) {
    return {
        refreshMembers: function () {
            e(".refresh_members").each(function () {
                var t = e(this),
                    n = t.data("url");
                e.get(n, function (n) {
                    t.html(n), Invites.setupResendInvite(), e("a.send-download-instructions[data-type=json]").on("ajax:success", function (e, t, n, i) {
                        AjaxDialog.displayNotifications(t)
                    })
                })
            })
        },
        setupRefreshMembers: function () {
            setInterval(Organizations.refreshMembers, 3e4)
        },
        initCallbacks: function () {
            e("a.send-invite-example[data-type=json]").on("ajax:success", function (e, t, n, i) {
                AjaxDialog.displayNotifications(t)
            }), AjaxDialog.registerHook("setup", "projectEditDialogs", function () {
                initTooltip(this)
            }), e("#organization_currency").on("change", function () {
                e("#currency_alert").show()
            })
        },
        initMain: function () {
            e(function () {
                Organizations.initCallbacks(), setupBatchActions(e("table.has-batch-actions.organization-table"), {
                    beforeDropdown: function (e, t, n) {
                        var i = n.filter('[data-status="true"]').length,
                            r = n.filter('[data-status="false"]').length;
                        e.find(".enable-tracking, .disable-tracking").addClass("hide"), i > 0 && e.find(".disable-tracking").removeClass("hide"), r > 0 && e.find(".enable-tracking").removeClass("hide")
                    }
                })
            })
        }
    }
}(jQuery);
Organizations.initMain();
var OrganizationBilling = {
    fields: {},
    loader: void 0,
    init: function () {
        initTooltip();
        var e = $("#payment-form-internal");
        if (!($("#payment-form-internal .stripe_skip").length > 0)) {
            var t = stripe.elements();
            if (!t) return !1;
            if (t === !1) return this.showError("Stripe is not configured"), void $("form#payment-form-internal, form#payment-form-internal input").prop("disabled", !0);
            switch (e.data("paymentMethod")) {
                case "card":
                    this.initCard();
                    break;
                case "ach":
                    this.initACH()
            }
        }
    },
    showLoading: function () {
        var e = $(document.body);
        OrganizationBilling.loader = $('<div class="modal-backdrop loader loading fade in"/>').appendTo(e)
    },
    hideLoading: function () {
        OrganizationBilling.loader.remove()
    },
    clearError: function () {
        var e = $(".payment-error"),
            t = $(".payment-error-message");
        t.text(""), e.addClass("hide")
    },
    showError: function (e) {
        var t = $(".payment-error"),
            n = $(".payment-error-message");
        n.text(e), t.removeClass("hide")
    },
    initCard: function () {
        var e = OrganizationBilling.setupStripeElements(stripe);
        e.forEach(function (e) {
            var t = $(e._component).closest(".form-group");
            e.on("change", function (e) {
                e.error ? (this.showError(e.error.message), t.addClass("has-error")) : (OrganizationBilling.clearError(), t.removeClass("has-error"))
            })
        });
        var t = e[0];
        t.on("change", function (e) {
            e.brand ? OrganizationBilling.setCardBrand("is-" + e.brand) : OrganizationBilling.setCardBrand("")
        });
        var n = e[2];
        n.on("focus", function (e) {
            OrganizationBilling.setCardState("is-focused-cvc")
        }), n.on("blur", function (e) {
            OrganizationBilling.setCardState("")
        });
        var i = $("#billing_card_name");
        i.on("blur", function () {
            i.val().length > 0 && (FormHelpers.clearError(i), OrganizationBilling.clearError())
        });
        var r = $("#intent").val(),
            a = $("#payment_intent").val();
        $("#payment-form-internal").on("submit", function (e) {
            e.preventDefault(), e.stopImmediatePropagation();
            var n = {
                name: i.val()
            };
            return a ? OrganizationBilling.confirmPayment(a, {
                payment_method: {
                    card: t,
                    billing_details: n
                }
            }) : r && stripe.confirmCardSetup(r, {
                payment_method: {
                    card: t,
                    billing_details: n
                }
            }).then(OrganizationBilling.stripeCardResponseHandler), !1
        })
    },
    initACH: function () {
        var e = $("#billing_account_holder_name"),
            t = $("#billing_account_holder_type"),
            n = $("#billing_routing_number"),
            i = $("#billing_account_number");
        t.select2(), $("#payment-form-internal").on("submit", function (r) {
            r.preventDefault(), r.stopImmediatePropagation();
            var a = {
                country: "US",
                currency: "usd",
                account_holder_name: e.val(),
                account_holder_type: t.val(),
                routing_number: n.val(),
                account_number: i.val()
            },
                o = !0;
            return [e, t, n, i].forEach(function (e) {
                0 === e.val().length && (FormHelpers.setError(e), o = !1)
            }), o && stripe.createToken("bank_account", a).then(OrganizationBilling.stripeACHResponseHandler), !1
        })
    },
    confirmPayment: function (e, t) {
        return window.history && window.history.replaceState && window.history.replaceState(null, null, window.location.pathname), t || OrganizationBilling.showLoading(), t = t || {}, stripe.confirmCardPayment(e, t).then(OrganizationBilling.confirmationResponseHandler), !1
    },
    confirmationResponseHandler: function (e) {
        var t = $("#payment-form-internal");
        if (t.length > 0) OrganizationBilling.stripeCardResponseHandler(e, function () {
            window.location.reload(!0)
        });
        else {
            var n = "";
            e.error ? n = e.error.message : "succeeded" === e.paymentIntent.status ? (n = "Payment confirmation successful", OrganizationBilling.hideLoading()) : n = e.paymentIntent.last_payment_error.message, $.jGrowl(n || "An error prevented your request from being saved. Try again")
        }
    },
    stripeCardResponseHandler: function (e, t) {
        var n = $("#payment-form-internal"),
            i = $("#billing_card_name"),
            r = $("#billing_address_zip"),
            a = n.find('.btn-primary[type="submit"]');
        a.button("loading"), OrganizationBilling.clearError(), FormHelpers.clearError(i), 0 === i.val().length && FormHelpers.setError(i), OrganizationBilling.fields.cardPostalCode._empty && FormHelpers.setError(r);
        var o = null;
        e.error ? o = e.error.message : 0 === i.val().length ? o = "Card holder name cannot be empty" : (n.find('input[name="token"]').remove(), n.append($('<input type="hidden" name="token" />').val(e.setupIntent.payment_method)), t ? t() : "true" === n.attr("data-remote") ? n.trigger("submit.rails") : n.get(0).submit()), o && (OrganizationBilling.showError(o), a.prop("disabled", !1).button("reset"))
    },
    stripeACHResponseHandler: function (e) {
        var t = $("#payment-form-internal"),
            n = $("#billing_account_holder_name"),
            i = $("#billing_account_holder_type"),
            r = $("#billing_routing_number"),
            a = $("#billing_account_number"),
            o = t.find('.btn-primary[type="submit"]');
        o.button("loading");
        var s = [];
        [n, i, r, a].forEach(function (e) {
            if (FormHelpers.clearError(e), 0 === e.val().length) {
                FormHelpers.setError(e);
                var t = $element.closest(".block-form-group, .form-group"),
                    n = t.find("label").text();
                s.push(n.replace(/\s*\*/g, ""))
            }
        });
        var l = null;
        e.error ? l = e.error.message : s.length > 0 ? l = s.join(", ") + " cannot be empty" : (t.find('input[name="token"]').remove(), t.append($('<input type="hidden" name="token" />').val(e.token.id)), "true" === t.attr("data-remote") ? t.trigger("submit.rails") : t.get(0).submit()), l && (OrganizationBilling.showError(l), o.prop("disabled", !1).button("reset"))
    },
    setupStripeElements: function (e) {
        var t = e.elements();
        if (!t) return !1;
        var n = {
            base: {
                color: "#3e4956",
                lineHeight: "20px",
                fontFamily: '"Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif',
                fontSmoothing: "antialiased",
                fontSize: "14px",
                "::placeholder": {
                    color: "#9b9b9b"
                }
            },
            invalid: {
                color: "#E25950"
            }
        },
            i = {
                focus: "focused",
                empty: "empty",
                invalid: "has-error"
            };
        return OrganizationBilling.fields.cardNumber = t.create("cardNumber", {
            style: n,
            classes: i
        }), OrganizationBilling.fields.cardNumber.mount("#billing_card_number"), OrganizationBilling.fields.cardExpiry = t.create("cardExpiry", {
            style: n,
            classes: i
        }), OrganizationBilling.fields.cardExpiry.mount("#billing_expires"), OrganizationBilling.fields.cardCvc = t.create("cardCvc", {
            style: n,
            classes: i
        }), OrganizationBilling.fields.cardCvc.mount("#billing_cvc"), OrganizationBilling.fields.cardPostalCode = t.create("postalCode", {
            style: n,
            classes: i
        }), OrganizationBilling.fields.cardPostalCode.mount("#billing_address_zip"), [OrganizationBilling.fields.cardNumber, OrganizationBilling.fields.cardExpiry, OrganizationBilling.fields.cardCvc, OrganizationBilling.fields.cardPostalCode]
    },
    setCardBrand: function (e) {
        var t = $("#credit-card-data");
        t.data("prevBrand") !== e && (t.data("prevBrand", e), t.removeClass(), e && t.addClass(e))
    },
    setCardState: function (e) {
        var t = $("#credit-card-icon-wrapper");
        t.data("prevState") !== e && (t.data("prevState", e), t.removeClass(), e && t.addClass(e))
    },
    initPopover: function () {
        var e = $(".a-bill-popover");
        e.popover({
            placement: "bottom",
            container: "body",
            trigger: "hover",
            html: !0,
            content: function () {
                return $.get(e.data("url")).done(function (e) {
                    $(".gs-popover .popover-content").fadeOut("fast", function () {
                        var t = e.hubstaff.details,
                            n = '<ul class="list-unstyled">';
                        $.each(t, function (e, t) {
                            n += "<li>" + t + "</li>"
                        }), n += "</ul>", $(this).html(n).fadeIn("fast")
                    })
                }), '<div class="gs-popover-loading"><div class="curtain"><div class="spinner"></div></div>'
            }
        }).data("bs.popover").tip().addClass("gs-popover")
    }
};
$(function () {
    var e = new URL(window.location.href).searchParams,
        t = e.get("client_secret");
    t && OrganizationBilling.confirmPayment(t), $("#payment-form-internal").each(function () {
        OrganizationBilling.init()
    }), $(".a-bill-popover").each(function () {
        OrganizationBilling.initPopover()
    })
}), AjaxDialog.registerHook("setup", "editBillingDialog", function () {
    OrganizationBilling.init()
}), AjaxDialog.registerHook("response", "editBilling", function (e) {
    "replace" === e.action && OrganizationBilling.init()
});
var PaidAddon = {
    initializeAddonPurchase: function () {
        var e = $(".hs-addon-box a.btn[data-confirm-modal-id]"),
            t = $(".paid-addon-confirm-disable.modal .custom-checkbox-wrapper input"),
            n = $(".paid-addon-confirm-disable.modal .unlink-remove-tasks-organization-wrapper"),
            i = n.find(".btn"),
            r = function (e) {
                var r = e.target.getAttribute("data-confirm-modal-id");
                if (r) {
                    e.preventDefault();
                    var a = $("#" + r).find(".modal"),
                        o = a.find("a[data-method]");
                    a.removeClass("hidden"), a.modal(), o.removeAttr("data-method"), a.on("hidden.bs.modal", function (e) {
                        n.tooltip({
                            title: "Need to agree first"
                        }), i.attr("disabled", "disabled"), t.prop("checked", !1)
                    }), o.click(function (e) {
                        e.preventDefault(), "disabled" !== $(this).attr("disabled") && ($(this).attr("disabled", "disabled"), $(this).text($(this).data("confirming-text")), $.post($(this).attr("href")).always(function () {
                            window.location.reload()
                        }))
                    })
                }
            };
        e.removeAttr("data-method"), e.on("click", r), n.tooltip({
            title: "Need to agree first"
        }), t.on("click", function (e) {
            this.checked ? (n.tooltip("destroy"), i.removeAttr("disabled")) : (n.tooltip({
                title: "Need to agree first"
            }), i.attr("disabled", "disabled"))
        })
    }
};
document.addEventListener("DOMContentLoaded", function () {
    PaidAddon.initializeAddonPurchase()
}),
    function () {
        function e(e) {
            var t = $("#new-member-ids, #existing-member-ids");
            e.on("click", ".select-all", function (e) {
                e.preventDefault(), e.stopPropagation();
                var n = $(this).data("target");
                t.find(n + ":not(:checked)").prop("checked", !0).trigger("change")
            }).on("click", ".select-none", function (e) {
                e.preventDefault(), e.stopPropagation();
                var n = $(this).data("target");
                t.find(n + ":checked").prop("checked", !1).trigger("change")
            })
        }

        function t(e) {
            var n = $.Deferred(e.before);
            return t.Process(e, n, 0), n.promise()
        }

        function n(e, n, i) {
            return t({
                url: n,
                params: {
                    force: i
                },
                before: function () {
                    e.closest("table.has-batch-actions").checkboxes("uncheck"), e.find(".table-wrapper").loadingCurtain("show")
                }
            }).done(function (t) {
                e.html(t.html), e.find(".table-wrapper").loadingCurtain("hide"), e.find(".a-tooltip").tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                })
            }).fail(function (t) {
                e.find(".table-wrapper").loadingCurtain("hide"), e.empty(), e.append($('<tr class="loading"/>').append($('<td colspan="4"/>').text(t.error)))
            })
        }

        function i(e) {
            return e.match(/Failed to authenticate/)
        }

        function r(e) {
            try {
                AjaxDialog.displayNotifications($.parseJSON(e.responseText))
            } catch (t) {
                AjaxDialog.displayNotifications({
                    alert: "Unexpected error occured"
                })
            }
        }

        function a(e, t) {
            var n, i, r;
            if (e.has_valid_email) "linked" === e.status || "matched" === e.status ? (r = $('<span id="remote_user_id_' + e.remote_id + '">'), r.append($('<input class="user enabled" name="payer_account[remote_user_ids][][remote_id]" type="checkbox" value="' + e.remote_id + '"  data-local-id="' + e.local_id + '" checked>')), r.append($('<input class="user enabled" name="payer_account[remote_user_ids][][local_id]" type="hidden" value="' + e.local_id + '">'))) : (r = $('<span id="remote_user_id_' + e.remote_id + '">'), r.append($('<input class="user enabled" name="payer_account[remote_user_ids][][remote_id]" type="checkbox" value="' + e.remote_id + '" data-local-id="-1">'))), n = $('<span class="checkbox-label-name"/>').text(e.remote_name), i = $('<label class="is-block is-regular"></label>'), $('<div class="col-sm-6"></div>').append($('<div class="checkbox-inline"></div>').append(i.append(r, n))).appendTo(t);
            else {
                var a = $('<input class="user" type="checkbox" disabled>');
                n = $('<span class="checkbox-label-name"/>').text(e.remote_name);
                var o = $('<span class="a-tooltip ml-5" title="User has an invalid email address" data-placement="top"><i class="hi hi-info hi-16 text-lighter"/></span>');
                i = $('<label class="is-block is-regular"></label>'), i.append(a), i.append(n), i.append(o), i.appendTo(t)
            }
        }

        function o(e, t) {
            var n = e.find("#existing-member-ids"),
                i = e.find("#new-member-ids");
            $(t).each(function (e, t) {
                -1 !== $.inArray(t.status, ["linked", "matched"]) ? a(t, n) : "unlinked" === t.status && a(t, i)
            }), $('input[name="payer_account[remote_user_ids][][remote_id]"]').change(function () {
                var e = $(this),
                    t = e.parent("#remote_user_id_" + e.val());
                e.prop("checked") === !0 ? t.append($('<input class="user enabled" name="payer_account[remote_user_ids][][local_id]" type="hidden" value="' + e.data("local-id") + '">')) : t.find('input[name="payer_account[remote_user_ids][][local_id]"]').remove()
            })
        }

        function s(e) {
            var n = $("#loading-section", e);
            t({
                url: e.data("user-list-url")
            }).done(function (t) {
                o(e, t.data), $(".message", n).text(t.message), t.data.length > 0 ? ($("#sync-btn", n).removeClass("hidden"), $("#select-users", n).on("click", function (t) {
                    t.preventDefault(), n.addClass("hidden"), $("#select-users-section", e).removeClass("hidden")
                })) : $("#finish-btn", n).removeClass("hidden"), e.on("click", "#sync-all", function (t) {
                    t.preventDefault(), t.stopPropagation(), $.rails.disableElement($(this)), $(".select-all", e).trigger("click"), $("#add-members", e).submit()
                })
            }).fail(function (e) {
                i(e.error) || r(e)
            })
        }

        function l(e, t, n) {
            var i = $('<ul class="list-unstyled ml-20"/>');
            if (t.length > 0) {
                var r = $('<div class="scrollable-content"/>');
                t.each(function (e) {
                    var t = $(this).closest("label").find(".checkbox-label-name").text();
                    5 > e ? i.append($("<li/>").text(e + 1 + ". " + t)) : r.append($('<div class="scrollable-content-inner">' + (e + 1) + ". " + t + "</div>"))
                })
            } else i = $("<span>" + n + "</span>");
            if (e.append(i), t.length > 5) {
                var a = $('<li class="a-popover"/>').append($('<a href="#" class="a-popover" data-toggle="popover" data-placement="right auto" data-html="true"><span class="more-users">and ' + (t.length - 5) + " more</span></a>").data("content", r[0].outerHTML));
                i.append(a)
            }
        }
        window.LoadMembersList = t, t.delay_times = [1e3, 3e3, 5e3, 5e3, 5e3, 1e4, 1e4, 1e4, 2e4, 2e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4, 3e4], t.Retry = function (e, n, i) {
            if (i < t.delay_times.length) {
                var r = t.delay_times[i];
                i += 1, setTimeout(function () {
                    t.Process(e, n, i)
                }, r)
            } else n.reject({
                error: "Timed out while fetching",
                time_out: !0
            })
        }, t.Process = function (e, n, i) {
            $.ajax({
                url: e.url,
                data: e.params,
                dataType: "json"
            }).done(function (r) {
                r.retry ? t.Retry(e, n, i) : r.error ? n.reject(r) : n.resolve(r)
            }).fail(function () {
                t.Retry(e, n, i)
            })
        }, $(function () {
            $("#members-list-wrapper").each(function () {
                var t = $(this);
                e(t)
            }), $("#users-list-wrapper").each(function () {
                var t = $(this);
                e(t), s(t)
            }), AjaxDialog.registerHook("setup", "confirmPayrollSyncUsersResponse", function (e, t, i) {
                var r = $(this),
                    a = $("#payer_members"),
                    o = $("#members-table", a);
                r.on("click", "#submit-sync-users-payroll", function () {
                    var e = $(this).data("url");
                    n(o, e, !0), r.modal("hide")
                }), r.on("click", "#add-member-dialog", function () {
                    AjaxDialog.run($(this).data("href")), r.modal("hide")
                })
            }), AjaxDialog.registerHook("setup", "confirmPayrollUsersResponse", function (e, t, n) {
                var i = $(this),
                    r = $("#new-user-list", i),
                    a = $("#existing-user-list", i),
                    o = $('#existing-member-ids input[type="checkbox"]:checked'),
                    s = $('#new-member-ids input[type="checkbox"]:checked');
                l(r, s, "No new members selected."), l(a, o, "No existing members selected."), $(".a-popover", i).each(function () {
                    var e = $(this);
                    e.on("click", function (e) {
                        e.preventDefault()
                    }), e.popover({
                        trigger: "hover",
                        container: e
                    })
                })
            })
        })
    }();
var PaymentAccounts = function (e) {
    var t = "payee_account_user_organization_",
        n = e("#members-ids");
    return n.length > 0 && setupSelect2AddRemoveLinks(n), {
        updatePayeeDetails: function (n) {
            var i = n.val(),
                r = n.closest("form#payee-form"),
                a = n.data("find-default-url");
            r.length > 0 && e.get(a + ".json", {
                user_organization_id: i,
                gateway_type: e("#payee_account_gateway_type").val()
            }, function (n) {
                n.configuration && e.each(n.configuration, function (e, t) {
                    var n = r.find("#payee_account_" + e);
                    n.is("select") ? (n.replaceOptions(t), n.trigger("change")) : n.is("div") ? n.text(t) : n.val(t)
                }), n.payment_configuration && e.each(n.payment_configuration, function (e, n) {
                    var i = r.find("#" + t + e);
                    i.is(":checkbox") ? i.prop("checked", n) : i.val(n).trigger("change")
                })
            })
        },
        formatMember: function (t, n) {
            if (t.id) {
                if ("-1" === t.id) return e(n).addClass("new-member-container"), e('<div class="new-member"></div>').text(t.text);
                var i = e('<div class="client-name"></div>').text(t.text);
                return e('<div class="select2-client-result"></div>').append(i)
            }
            return t.text
        },
        checkRateType: function (e, n) {
            "0" === n.val() ? (e.find("#" + t + "fixed_amount").closest("div.form-group").hide(), e.find("#" + t + "pay_rate").closest("div.form-group").show()) : "1" === n.val() && (e.find("#" + t + "pay_rate").closest("div.form-group").hide(), e.find("#" + t + "fixed_amount").closest("div.form-group").show())
        },
        checkFixedAmount: function (t, n) {
            e("#transaction-limits").each(function () {
                var t = e("#transaction-limits").data("limits");
                t.length > 0 && parseInt(n.val()) >= parseInt(t.individual) ? e("#fixed-amount-warning").show() : e("#fixed-amount-warning").hide()
            })
        },
        checkPayPeriod: function (e, n) {
            "" === n.val() ? (e.find("#" + t + "pay_rate").prop("disabled", !0), e.find("#" + t + "rate_type").prop("disabled", !0), e.find("#" + t + "timesheets_enabled").prop("disabled", !0)) : (e.find("#" + t + "pay_rate").prop("disabled", !1), e.find("#" + t + "rate_type").prop("disabled", !1), e.find("#" + t + "timesheets_enabled").prop("disabled", !1)), PaymentAccounts.togglePeriodStart(e, n)
        },
        modalInitialize: function (n) {
            var i = e(n);
            t = e("#edit-organization-membership-form").length > 0 ? "user_organization_" : "payee_account_user_organization_";
            var r = i.find("#" + t + "rate_type"),
                a = i.find("#" + t + "fixed_amount"),
                o = i.find("#" + t + "pay_period"),
                s = e("select#" + t + "id"),
                l = i.find("a.period-start-option"),
                c = i.find("#" + t + "period_start");
            a.length > 0 && PaymentAccounts.checkFixedAmount(i, a), r.length > 0 && PaymentAccounts.checkRateType(i, r), initTooltip(i), s.length > 0 && s.select2({
                dropdownParent: e(".member-select"),
                allowClear: !0,
                templateResult: PaymentAccounts.formatMember,
                width: "100%"
            }).on("select2:select", function (e) {
                selectedClient = e.params.data.id, s.find('[selected="selected"]').removeAttr("selected"), s.find('option[value="' + selectedClient + '"]').attr("selected", !0), "-1" !== selectedClient && PaymentAccounts.updatePayeeDetails(s)
            }), r.on("change", function (t) {
                var n = e(this);
                PaymentAccounts.checkRateType(i, n)
            }), a.on("keyup input change", function (t) {
                var n = e(this);
                PaymentAccounts.checkFixedAmount(i, n)
            }), o.on("change", function (t) {
                var n = e(this);
                PaymentAccounts.checkPayPeriod(i, n)
            }), l.on("click", function (t) {
                t.preventDefault();
                var n = e(this);
                c.val(n.data("value")), l.addClass("label-gray-light").removeClass("label-primary"), n.addClass("label-primary").removeClass("label-gray-light")
            })
        },
        togglePeriodStart: function (e, n) {
            var i = e.find("#period-start-content");
            if (parseInt(n.val()) === parseInt(i.data("show-id"))) {
                i.removeClass("hide");
                var r = i.data("selected");
                if (r) {
                    var a = e.find("a.period-start-option[data-value='" + r + "']");
                    e.find("#" + t + "period_start").val(r), a.removeClass("label-gray-light").addClass("label-primary")
                }
            } else i.addClass("hide"), i.data("selected", e.find("#" + t + "period_start").val()), e.find("#" + t + "period_start").val(""), e.find("a.period-start-option").addClass("label-gray-light").removeClass("label-primary")
        },
        initMain: function () {
            e(function () {
                AjaxDialog.registerHook("response", "payrollResponse", function () {
                    PaymentAccounts.modalInitialize(this)
                }), AjaxDialog.registerHook("setup", "payrollDialogs", function () {
                    PaymentAccounts.modalInitialize(this)
                })
            })
        }
    }
}(jQuery);
PaymentAccounts.initMain();
var PlansPage = {
    initializePlanColumns: function () {
        var e = $("a.js-choose-plan"),
            t = null;
        AjaxDialog.registerHook("setup", "addonUpsellDialogSetup", function (e) {
            var n = this,
                i = n.find(".js-addon-purchase-btn"),
                r = t.attr("href");
            n.on("hide.bs.modal", function (e) {
                t.hasClass("js-dialog") ? AjaxDialog.run(r) : $.ajax({
                    url: r,
                    method: "POST",
                    dataType: "json",
                    success: function (e) {
                        "redirect" === e.action && (window.location.href = e.url)
                    }
                })
            }), i.on("click", function (e) {
                r += "&upsell_addon=" + e.target.getAttribute("data-addon"), n.modal("hide")
            })
        });
        var n = function (e) {
            t = $(e.target);
            var n = $(e.target).data("addon-dialog-path"),
                i = n;
            !i && t.hasClass("js-dialog") && (i = t.attr("href")), i && (t.removeAttr("data-method"), e.preventDefault(), AjaxDialog.run(i))
        };
        e.on("click", n)
    }
};
document.addEventListener("DOMContentLoaded", function () {
    0 !== $("body.plans-page").length && PlansPage.initializePlanColumns()
});
var TeamsSelect = function () {
    return {
        setup: function () {
            function e(e) {
                if ("create_team" === e.id) {
                    var t = $('<div class="dropdown-new-item"></div>');
                    return t.text(e.text), t
                }
                return e.text
            }
            var t = $("select#project_teams_");
            if (t.data("createTeams")) {
                var n = new Option("+ Add a team", "create_team", !1, !1);
                t.append(n).trigger("change")
            }
            t.select2({
                templateResult: e,
                allowClear: !0,
                width: "100%"
            }).on("select2:selecting", function (e) {
                "create_team" === e.params.args.data.id && (e.preventDefault(), e.stopPropagation(), t.select2("close"), AjaxDialog.run(t.data("create-url")), AjaxDialog.registerHook("response", "newTeamResponse", function (e, n, i) {
                    if (e.success) {
                        var r = new Option(e.name, e.id, !0, !0);
                        t.prepend(r).trigger("change"), this.modal("toggle")
                    } else AjaxDialog.displayNotifications({
                        alert: e.message
                    })
                }))
            })
        }
    }
}(jQuery);
$(function () {
    AjaxDialog.registerHook("setup", "projectNewDialogs", function () {
        var e = this;
        initTooltip(e), setupSelect2AddRemoveLinks(e), setupLinkedSelect2Fields(e, ".linked-role-users"), LearnMore.initDialog(e), ClientUtils.add_new_client_to_selection("select#project_client_id"), TeamsSelect.setup(e)
    }), AjaxDialog.registerHook("response", "projectNewResponse", function (e) {
        if ("via_web_timer" === e.action) {
            var t = $("#wt-project-select"),
                n = new Option(e.project_name, e.project_id, !0, !0);
            t.append(n).trigger("change"), AjaxDialog.displayNotifications({
                alert: "Project created"
            }), $("#new-project-modal .close").click()
        } else TeamsSelect.setup(this)
    }), AjaxDialog.registerHook("setup", "projectDuplicateDialog", function () {
        var e = this,
            t = e.data("origin");
        "undefined" != typeof analytics && analytics.track("project_dup_start", {
            source: t
        }), e.on("change", "#duplicate_tasks", function () {
            $(this).is(":checked") ? ($("#duplicate_task_assignees").removeAttr("disabled"), $("#duplicate_completed_tasks").removeAttr("disabled")) : ($("#duplicate_task_assignees").attr("disabled", "disabled").attr("checked", !1), $("#duplicate_completed_tasks").attr("disabled", "disabled").attr("checked", !1))
        })
    }), AjaxDialog.registerHook("response", "projectOrgSelect", function (e) {
        if ("replace" === e.action) {
            var t = this,
                n = t.find(".modal-footer > .btn-primary");
            n.text("Save"), n.attr("data-disable-with", "Saving...")
        }
    }), $(document).on("ajax:error", "#archive-projects-modal, #archive-project-modal", function (e, t, n, i) {
        try {
            AjaxDialog.displayNotifications($.parseJSON(t.responseText))
        } catch (r) {
            AjaxDialog.displayNotifications({
                alert: "Unexpected error occured."
            })
        }
    }).on("ajax:success", "#archive-projects-modal, #archive-project-modal", function (e, t, n, i) {
        "reload" === t.action && window.location.reload(!0), AjaxDialog.displayNotifications(t)
    })
}), $(function () {
    function e() {
        m && clearTimeout(m), m = void 0
    }

    function t() {
        p && clearTimeout(p), p = void 0
    }

    function n() {
        var e = $("#report");
        e.find(".sticky-popover").popover("hide")
    }

    function i(t) {
        var n = $("#report");
        return n.find(".sticky-popover").not(t).popover("hide"), t.data("bs.popover").tip().hasClass("in") ? void e() : void t.popover("show")
    }

    function r(e) {
        t(), p = setTimeout(function () {
            i(e)
        }, 400)
    }

    function a() {
        e(), m = setTimeout(function () {
            n()
        }, 400)
    }

    function o(e) {
        var t = $("select#projects", e),
            n = $("input#user_id", e),
            i = $("select#users", e),
            r = $("select#tasks", e),
            a = {
                allowClear: !0,
                language: {
                    noResults: function () {
                        return "No to-dos"
                    }
                },
                ajax: {
                    url: "/tasks/search",
                    data: function (r) {
                        var a = {
                            project_id: t.val() || s(t),
                            user_id: n.val() || i.val() || s(i),
                            q: r.term,
                            page: r.page
                        };
                        return e.hasClass("time_and_activities") && (a.all_tasks = !0), a
                    },
                    transport: function (e, t, n) {
                        var i = e.data.project_id && e.data.project_id.length > 0,
                            r = e.data.user_id && e.data.user_id.length > 0;
                        if (i && r) {
                            var a = $.ajax(e);
                            return a.then(t), a.fail(n), a
                        }
                        return t({
                            results: []
                        }), !1
                    },
                    dataType: "json",
                    delay: 250
                }
            };
        r.select2(a);
        var o = e.find('input[name="filters[show_tasks]"]');
        o.length > 0 && ("1" !== o.filter(":checked").val() && c(r), e.on("change", 'input[name="filters[show_tasks]"]', function () {
            "1" === $(this).val() ? l(r) : c(r)
        }))
    }

    function s(e) {
        return $(e).find("option").map(function () {
            return $(this).val()
        }).get()
    }

    function l(e) {
        e.next(".select2-container").tooltip("destroy"), e.prop("disabled", !1)
    }

    function c(e) {
        e.next(".select2-container").tooltip({
            title: 'Cannot filter report by tasks. Please turn on "Show tasks" to use tasks filtering.',
            placement: "auto bottom"
        }), e.prop("disabled", !0)
    }

    function u(e) {
        var t = "star";
        return e.hasClass("favorite") && (t = "unstar"), "/reports/" + $(".report-index").data("organization-id") + "/" + t
    }

    function d(e) {
        return {
            report: {
                name: e.data("report-name"),
                timestamp: (new Date).getTime()
            }
        }
    }

    function h(e) {
        var t = e.hasClass("loading"),
            n = f() && !e.hasClass("favorite");
        return t || n
    }

    function f() {
        var e = $(".report-index .report-section-item .star-report.favorite").size();
        return e >= 6
    }
    var p, m, g = $("#report");
    $(".weekly-range-input").length > 0 && (setupDatePickers(g, {
        onchange: function (e, t, n) {
            goto_week(t, e.data("startWeekOn"))
        }
    }), g.find(".js-filter-date-actions").on("click", function (e) {
        e.preventDefault(), e.stopImmediatePropagation();
        const t = $(this).data("date") || $(this).parent.data("date");
        goto_week(t, g.find(".weekly-range-input > input").data("startWeekOn"))
    })), g.on("mouseenter", ".sticky-popover", function () {
        e(), r($(this))
    }).on("mouseleave", ".sticky-popover", function () {
        a()
    }).on("inserted.bs.popover", ".sticky-popover", function () {
        var n = $(this),
            i = n.attr("aria-describedby");
        if (i) {
            var r = $("#" + i);
            r.on("mouseenter", function () {
                e(), t()
            }).on("mouseleave", function () {
                a()
            })
        }
    }).find(".sticky-popover").popover({
        trigger: "manual",
        html: !0,
        sanitize: !1,
        container: "body",
        placement: "auto top"
    }), g.each(function () {
        o($(this))
    }), $(".report-section-item .star-report").each(function () {
        $(this).tooltip({
            placement: "top",
            title: function () {
                return $(this).hasClass("favorite") ? "Unstar this report to remove it from your sidebar" : f() ? "Only 6 favorite reports are allowed" : "Star this report to add it to your sidebar"
            }
        })
    }), $(".sidebar-nav").on("animationend MSAnimationEnd webkitAnimationEnd oAnimationEnd", "#reports-menu a.attention", function () {
        $(this).removeClass("attention")
    }), $(".report-section-item .star-report").on("click", function (e) {
        e.preventDefault(), e.stopImmediatePropagation();
        var t = $(e.target);
        h(t) || (t.addClass("loading"), t.tooltip("hide"), $.ajax(u(t), {
            method: "PUT",
            data: d(t),
            dataType: "json"
        }).done(function (e) {
            var n = document.createElement("html");
            n.innerHTML = e.html;
            var i = $(n).find("ul.sidebar-subnav")[0];
            t.toggleClass("favorite");
            var r = $('.sidebar-link-text:contains("Reports")').closest(".sidebar-main-link"),
                a = $(r).find("ul.sidebar-subnav");
            $(a).replaceWith(i)
        }).fail(function (e) {
            var t = "Unexpected error occured. Please refresh the page and try again.";
            422 == e.status && (t = e.responseJSON.error), AjaxDialog.displayNotifications({
                alert: t
            })
        }).always(function () {
            t.removeClass("loading")
        }))
    })
}), $(function () {
    $("form.lead-toggle-form").each(function () {
        new LeadToggleForm($(this))
    })
}), $(function () {
    function e(e) {
        var t = $(".export-nav-tabs"),
            n = $("#export_payment"),
            i = $("#send_payment"),
            r = t.data("default-tab");
        e.find("." + r + "-tab").addClass("active"), e.find("#" + r + "_payment").removeClass("fade").addClass("active"), n.each(function () {
            function e(e) {
                e ? $(".btn-export-payment").replaceWith('<form action="' + e.data("url") + '" class="btn-export-payment" method="POST" target="_blank"><button type="submit" class="btn btn-primary">Download</button></form>') : $(".btn-export-payment").replaceWith('<span class="a-tooltip btn-export-payment pull-right" title="No payment system selected"><a href="#" class="btn btn-primary disabled">Download</a></span>'), initTooltip("#export_payment")
            }
            var t = $(this).find(".export-type-thumb");
            e(), t.on("click", function (t) {
                t.preventDefault(), $(this).hasClass("is-muted") || (n.find(".export-type-thumb").removeClass("active"), $(this).toggleClass("active"), e($(this)))
            })
        }), i.each(function () {
            function t() {
                var t = [],
                    n = i.find(".btn-send-payment"),
                    a = i.find(".export-type-thumb.active");
                $.rails.disableElement(n), $.each(a, function () {
                    t.push($(this).data("gateway-type"))
                }), e.loadingCurtain("show"), $.ajax({
                    url: r,
                    method: "POST",
                    dataType: "JSON",
                    data: {
                        gateway_types: t
                    }
                }).done(function (t) {
                    e.loadingCurtain("hide"), "replace" === t.action ? ($.rails.enableElement(n), t.error && alert(t.error)) : "reload" === t.action ? window.location.reload(!0) : "redirect" === t.action && (window.location = t.url)
                }).fail(function (t) {
                    $.rails.enableElement(n), e.loadingCurtain("hide"), t.error && alert(t.error)
                })
            }

            function n() {
                if ($("#send_payment .export-type-thumb").length === $("#send_payment .export-type-thumb.is-muted").length) o.hasClass("hide") || o.addClass("hide"), $(".btn-send-payment").replaceWith('<span class="a-tooltip btn-send-payment pull-right" title="No payment gateway enabled"><button class="btn btn-primary disabled">Send payment</button></span>'), s && (i.off("click", ".btn-send-payment", t), s = !1);
                else if (0 === $("#send_payment .export-type-thumb.active").length) o.hasClass("hide") || o.addClass("hide"), $(".btn-send-payment").replaceWith('<span class="a-tooltip btn-send-payment pull-right" title="No payment gateway selected"><button class="btn btn-primary disabled">Send payment</button></span>'), s && (i.off("click", ".btn-send-payment", t), s = !1);
                else {
                    $(".btn-send-payment").replaceWith('<button class="btn btn-primary btn-send-payment" data-disable-with="Sending payment...">Send payment</button>'), o.hasClass("hide") && o.removeClass("hide");
                    var e = 0,
                        n = 0,
                        r = i.find(".export-type-thumb.active");
                    $.each(r, function () {
                        e += 1, n += parseInt($(this).data("members"))
                    }), o.find(".members-count").text(1 === n ? "1 member" : "all " + n + " members"), o.find(".payments-count").text(e + (1 === e ? " payment record" : " payment records")), s || (i.on("click", ".btn-send-payment", t), s = !0)
                }
                initTooltip("#send_payment")
            }
            var r = $(this).data("url"),
                a = $("#send_payment .export-type-thumb"),
                o = $(".send-payment-description"),
                s = !1;
            n(), a.each(function () {
                if ($(this).data("members")) {
                    var e = parseInt($(this).data("members")),
                        t = 1 === e ? "member" : "members",
                        n = $(this).parent().find(".export-thumb-description");
                    0 === n.length ? $(this).parent().append('<div class="export-thumb-description">(' + e + " " + t + ")</div>") : n.text("(" + e + " " + t + ")")
                }
            }), a.on("click", function (e) {
                e.preventDefault(), $(this).hasClass("is-muted") || ($(this).toggleClass("active"), n())
            })
        })
    }

    function t(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
    }

    function n(e, t) {
        var n, i, r, a = e;
        t = t.find("#countdown_draft"), setInterval(function () {
            n = parseInt(a / 60, 10), i = parseInt(a % 60, 10), n = 10 > n ? "0" + n : n, i = 10 > i ? "0" + i : i, r = n > 0 ? n > 1 ? "minutes" : "minute" : "seconds", t.text(n + ":" + i + " " + r), --a < 0 && (a = e, window.location.reload(!0))
        }, 1e3)
    }

    function i() {
        $.ajax({
            url: $("#draft-payment").data("check-url"),
            method: "GET",
            dataType: "JSON"
        }).done(function (e) {
            e.url && (window.location.href = e.url, window.location.reload())
        })
    }
    if (AjaxDialog.registerHook("setup", "exportDialogs", function () {
        e(this), initTooltip(".export-nav-tabs")
    }), AjaxDialog.registerHook("setup", "paymentWizard", function () {
        initTooltip(document), $("#payment-wizard-modal .a-popover").each(function () {
            var e = $(this);
            e.popover({
                trigger: "hover",
                container: e
            })
        }), $(".btn-mark-timesheets-as-paid").on("click", function () {
            $("#payment-wizard-modal").loadingCurtain("show")
        }), $("#payment-wizard-modal").on("ajax:success", function () {
            $(".modal-backdrop").hide()
        }).on("ajax:error", function () {
            $(this).loadingCurtain("hide")
        })
    }), AjaxDialog.registerHook("setup", "newNoteDialog", function () {
        var e = this;
        e.find("#new-note-save").on("click", function () {
            e.find("form.new-note").submit()
        })
    }), $("#team_payments").each(function () {
        setupBatchActions($("table.has-batch-actions.timesheets-approved-table"), {
            beforeDropdown: function (e, t, n) {
                var i = n.filter('[data-active="false"]').length,
                    r = e.data("oid"),
                    a = e.find(".btn-payment-wizard-dialog");
                i > 0 ? (a.replaceWith('<span class="disabled is-muted batch-action a-tooltip btn-payment-wizard-dialog" title="Payment is disabled because one or more team members of the selected timesheets don\'t have a pay rate set." data-placement="bottom">Pay</span>'), initTooltip(e)) : a.replaceWith('<a href="/organizations/' + r + '/team_payments/new.dialog" class="batch-action btn-payment-wizard-dialog">Pay</a>')
            }
        }), $(this).on("click", ".btn-payment-wizard-dialog", function (e) {
            if (e.preventDefault(), e.stopPropagation(), !$(this).hasClass("disabled")) {
                var t = [],
                    n = 0;
                $.each($('input[type="checkbox"][name="ids[]"]:checked'), function () {
                    t.push($(this).val());
                    var e = $(this).closest("tr").find(".total-amount").data("amount");
                    e && (n += parseFloat(e))
                });
                var i = $(this).attr("href");
                AjaxDialog.run(i + "?" + $.param({
                    timesheet_ids: t,
                    total_amount: n,
                    type: "timesheets"
                }))
            }
        })
    }), $("#bonus").each(function () {
        var e = $(this);
        setupSelect2AddRemoveLinks(e);
        var n = e.find("#team_payment_member_ids"),
            i = e.find("#team_payment_total_amount"),
            r = e.find("#team_payment_note");
        e.on("change", n, function () {
            n.val() ? dismissFormInputError(n) : addFormInputError(n, ERRORS.members.blank)
        }), e.on("input", i, function () {
            dismissFormInputError(i.parent()), t(i.val()) ? parseFloat(i.val()) <= 0 && addFormInputError(i.parent(), "must be greater than 0") : addFormInputError(i.parent(), "is not a number")
        }), e.on("input", r, function () {
            r.attr("required") && (dismissFormInputError(r), 0 === r.val().length && addFormInputError(r, "can't be blank"))
        }), e.on("click", ".btn-bonus-payment-wizard-dialog", function (a) {
            if (a.preventDefault(), a.stopPropagation(), e.find(".form-group").each(function () {
                dismissFormInputError($(this))
            }), n.val() || n.closest(".form-group").hasClass("has-error") || addFormInputError(n, ERRORS.members.blank), t(i.val()) ? parseFloat(i.val()) <= 0 && addFormInputError(i.parent(), "must be greater than 0") : addFormInputError(i.parent(), "is not a number"), 0 === r.val().length && r.attr("required") && addFormInputError(r, "can't be blank"), 0 === e.find(".has-error").length) {
                var o = n.val(),
                    s = i.val(),
                    l = r.val(),
                    c = $(this).attr("href");
                AjaxDialog.run(c + "?" + $.param({
                    member_ids: o,
                    total_amount: s,
                    note: l,
                    type: "bonus"
                }))
            }
        })
    }), $("#draft-payment").length > 0) {
        var r = $("#draft-payment"),
            a = 60;
        n(a, r), setInterval(i, 1e4)
    }
}),
    function () {
        function e(e) {
            e.find(".a-tooltip").tooltip({
                container: "body"
            }), setupSelect2AddRemoveLinks(e);
            var t = $("#team_member_user_ids_"),
                n = $("#team_lead_user_ids_");
            t.on("select2:select", function () {
                var e = $(this).val() || [],
                    t = n.select2("val") || [],
                    i = t.filter(function (t) {
                        return e.indexOf(t) < 0
                    });
                n.val(i).trigger("change")
            }), n.on("select2:select", function () {
                var e = $(this).val() || [],
                    n = t.select2("val") || [],
                    i = n.filter(function (t) {
                        return e.indexOf(t) < 0
                    });
                t.val(i).trigger("change")
            }), $(".select-all.teammates").on("click", function () {
                $(n).find("option").prop("selected", !1).end().trigger("change")
            }), $(".select-all.team-leads").on("click", function () {
                $(t).find("option").prop("selected", !1).end().trigger("change")
            });
            var i = [{
                "#team_lead_timesheet_approval": "#team_timesheet_notifications"
            }, {
                "#team_lead_time_off_approval": "#team_time_off_notifications"
            }, {
                "#team_lead_attendance_management": "#team_attendance_notifications"
            }, {
                "#team_lead_team_management": "#team_lead_invite_members"
            }, {
                "#team_lead_job_site_management": "#team_job_site_notifications"
            }, {
                "#team_lead_daily_weekly_notifications": "#team_daily_weekly_notifications"
            }, {
                "#team_lead_work_break_notifications": "#team_lead_only_work_break_notifications"
            }];
            i.forEach(function (e) {
                var t = Object.keys(e)[0],
                    n = Object.values(e)[0];
                $(t).on("change", function () {
                    $(this).prop("checked") ? $(n).prop("disabled", !1) : $(n).prop({
                        disabled: !0,
                        checked: !1
                    })
                })
            })
        }
        AjaxDialog.registerHook("setup", "teams", function () {
            e(this)
        }), AjaxDialog.registerHook("response", "teams", function (t) {
            "replace" === t.action && e(this)
        })
    }(),
    function () {
        function e(e, t, n, i) {
            var r = e.find(".js-links").find(n);
            "#hide" === t ? r.hide() : "#disable" === t ? (r.addClass("a-tooltip").addClass("disabled").removeClass("ajax-dialog"), r.attr("title", i), r.attr("disabled", "disabled")) : r.attr("href", t)
        }

        function t(e) {
            var t = TimeEntryUtils.findFormFromElement(e),
                n = TimeEntryUtils.findModalOrPopoverFromElement(e),
                i = t.data("id"),
                r = {};
            FormHelpers.withErrors(n).length > 0 || (t.find("input, select").each(function () {
                var e = $(this),
                    t = e.attr("name");
                ("start" === t || "stop" === t || "time_zone" === t || "time_entry" === t.substr(0, 10)) && (r[t] = e.val())
            }), r["time_entry[project_id]"] && (FormHelpers.blockForm(t), TimeEntryUtils.disableSaveButton(n), $.post("/time_entries/" + i + "/check.js", r, function (e) {
                if (e.alert) AjaxDialog.displayNotifications(e), TimeEntryUtils.disableSaveButton(n, "invalid");
                else {
                    var i = n.find(".collision_check");
                    initTooltip(i), $.isEmptyObject(e.collisions) && $.isEmptyObject(e.not_accessible) ? i.html("") : (i.html(e.html || ""), i[0].scrollIntoView());
                    var r = n.find('[name="validation_token"]');
                    r.val(e.validation_token || ""), FormHelpers.unblockForm(t), e.allowed ? TimeEntryUtils.enableSaveButton(n) : TimeEntryUtils.disableSaveButton(n, "invalid")
                }
            })))
        }
        AjaxDialog.registerHook("setup", "timeEntryDialog", function () {
            var e = this;
            initTooltip(e), setupDatePickers(e), TimeEntryUtils.setupTimeEntryTimeControls(e, !0), e.on("click", "button.btn-primary", function () {
                var e = $(this).closest(".modal").find("form");
                0 === FormHelpers.withErrors(e).length && e.submit()
            }), e.on("change", "select", function () {
                t(this)
            }), e.on("select2:select", "#time_entry_project_id", function (t) {
                var n = $('label[for="time_entry_note"]');
                t.params.data.reason_required ? 0 == n.find("abbr").length && n.append('<abbr title="required">*</abbr>') : n.find("abbr").remove(), "add-time-modal" == e.prop("id") && $('[name="time_entry[billable]"').prop("checked", t.params.data.billable)
            }), e.on("change", '[name="split_operation"]', function () {
                "split" === this.value ? ($("#additional-split-fields").show(), $("#split-time-form").attr("method", "post")) : ($("#additional-split-fields").hide(), $("#split-time-form").attr("method", "delete"))
            });
            var n = e.find("form"),
                i = n.find("#time_entry_project_id");
            i.trigger("change").trigger({
                type: "select2:select",
                params: {
                    data: i.select2("data")[0]
                }
            }), taskLoader(n, "#time_entry_project_id", "#time_entry_task_id");
            var r = n.find('[name="split_operation"]:checked');
            r.trigger("change"), r.closest(".btn").button("toggle")
        }), AjaxDialog.registerHook("response", "timeEntryDialog", function (e, t) {
            var n = this;
            if ("confirmation" === e.action) AjaxDialog.run($(n).data("confirm-override"));
            else if ("success-response" === e.action) {
                n.modal("hide");
                var i = $(".timesheet"),
                    r = $("#timesheet").data("refreshUrl");
                if ($(".has-getting-started-on.gs-in-dashboard").length || $(".has-getting-started-on.gs-in-header").length) {
                    var a = $("#getting-started-dashboard").data("userId");
                    void 0 !== a && GettingStarted.skipOrCompleteStep(a, "track_time")
                }
                var o = i.data("view-type");
                if ("daily" === o) {
                    var s = i.find(".time-entries");
                    TimeEntryUtils.update_time_entries(s)
                } else if (r) {
                    var s = $("#timesheet").find(".time-entries");
                    TimeEntryUtils.update_time_entries(s)
                }
            } else if ("error-response" === e.action) {
                e.html && n.find(".modal-body").html(e.html);
                var l = n.find("form");
                l.find("#time_entry_project_id").select2().trigger("change"), setupDatePickers(n), taskLoader(l, "#time_entry_project_id", "#time_entry_task_id");
                var c = l.find('[name="split_operation"]:checked');
                c.trigger("change"), c.closest(".btn").button("toggle")
            }
        }), AjaxDialog.registerHook("response", "destroyTimeEntryDialog", function (e, t) {
            var n = this;
            if ("confirmation" === e.action) AjaxDialog.run($(n).data("confirm-override"));
            else if ("success-response" === e.action) {
                n.modal("hide");
                var i = $(".timesheet"),
                    r = $("#timesheet").data("refreshUrl"),
                    a = i.data("view-type");
                if ("daily" === a) {
                    var o = i.find(".time-entries");
                    TimeEntryUtils.update_time_entries(o)
                } else if (r) {
                    var o = $("#timesheet").find(".time-entries");
                    TimeEntryUtils.update_time_entries(o)
                }
            } else if ("error-response" === e.action && e.errors.note) {
                var s = n.find("#time_entry_note");
                FormHelpers.setError(s, e.errors.note[0])
            }
        }), window.TimeEntryUtils = {
            disableSaveButton: function (e, t) {
                var n = t || "loading";
                e.find(".btn-primary").data("disabledStates", n).button(n)
            },
            enableSaveButton: function (e) {
                0 === FormHelpers.withErrors(e).length && e.find(".btn-primary").button("reset")
            },
            findModalOrPopoverFromElement: function (e) {
                var t = $(e);
                return t.closest(".modal, .popover.in")
            },
            findFormFromElement: function (e) {
                var t = $(e);
                return t.closest(".time_entry_form")
            },
            setupTimeEntryTimeControls: function (e, n) {
                e.on("focus", "#time_entry_duration, #start_time_time, #stop_time_time", function () {
                    $(this).select()
                }), e.on("change", 'input[name="time_entry[start_time_date]"],input[name="time_entry[stop_time_date]"]', function () {
                    TimeEntryUtils.updateDuration(this), n && t(this)
                }), e.on("change", "#time_entry_duration", function () {
                    var e = $(this),
                        t = TimeInput.parse_duration(e.val());
                    t && t.asHours() <= 48 ? (FormHelpers.clearError(this), e.val(TimeUtils.format_duration(t, "auto")), TimeEntryUtils.updateStopTime(this, t), TimeEntryUtils.enableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this))) : (FormHelpers.setError(this, "Enter a number or decimal"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save"))
                }), e.on("change", "#start_time_time", function () {
                    var t = $(this),
                        n = TimeInput.parse_time(t.val());
                    if (n) {
                        FormHelpers.clearError(this);
                        var i = e.find('[name="time_entry[start_time_date]"]').val(),
                            r = e.find('[name="time_entry[start_time_time]"]'),
                            a = e.find('[name="time_entry[stop_time_time]"]'),
                            o = TimeUtils.parse_internal_datetime(r.data("minTime")),
                            s = TimeUtils.parse_internal_datetime(a.data("maxTime")),
                            l = TimeUtils.parse_internal_datetime(i + " " + n.format("HH:mm:ss"));
                        o && l.isBefore(o) ? (FormHelpers.setError(this, "cannot be before the selected time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")) : s && l.isAfter(s) ? (FormHelpers.setError(this, "cannot be after the selected time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")) : (r.val(TimeUtils.format_internal_time(n)).trigger("change"), t.val(TimeUtils.format_time(n, "auto")), TimeEntryUtils.enableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this)))
                    } else FormHelpers.setError(this, "Invalid start time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")
                }), e.on("change", "#stop_time_time", function () {
                    var t = $(this),
                        n = TimeInput.parse_time(t.val());
                    if (n) {
                        FormHelpers.clearError(this);
                        var i = e.find('[name="time_entry[stop_time_date]"]').val(),
                            r = e.find('[name="time_entry[start_time_time]"]'),
                            a = e.find('[name="time_entry[stop_time_time]"]'),
                            o = TimeUtils.parse_internal_datetime(r.data("minTime")),
                            s = TimeUtils.parse_internal_datetime(a.data("maxTime")),
                            l = TimeUtils.parse_internal_datetime(i + " " + n.format("HH:mm:ss"));
                        o && l.isBefore(o) ? (FormHelpers.setError(this, "cannot be before the selected time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")) : s && l.isAfter(s) ? (FormHelpers.setError(this, "cannot be after the selected time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")) : (a.val(TimeUtils.format_internal_time(n)).trigger("change"), t.val(TimeUtils.format_time(n, "auto")), TimeEntryUtils.enableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this)))
                    } else FormHelpers.setError(this, "Invalid stop time"), TimeEntryUtils.disableSaveButton(TimeEntryUtils.findModalOrPopoverFromElement(this), "Save")
                }), e.on("change", '[name="time_entry[stop_time_time]"]', function () {
                    var i = e.find("#stop_time_time");
                    FormHelpers.clearError(i), TimeEntryUtils.updateDuration(this), n && t(this)
                }), e.on("change", '[name="time_entry[start_time_time]"]', function () {
                    var i = e.find("#start_time_time");
                    FormHelpers.clearError(i), TimeEntryUtils.updateDuration(this), n && t(this)
                })
            },
            updateStopTime: function (e, t) {
                var n = TimeEntryUtils.findFormFromElement(e),
                    i = n.find('[name="time_entry[start_time_date]"]').val(),
                    r = n.find('[name="time_entry[start_time_time]"]').val(),
                    a = TimeUtils.parse_internal_datetime(i + " " + r),
                    o = a.clone().add(t),
                    s = n.find("#stop_time_time").val(TimeUtils.format_time(o, "auto"));
                n.find("#stop_time_date").val(TimeUtils.format_date(o)), n.find('[name="time_entry[stop_time_date]"]').val(TimeUtils.format_internal_date(o)), n.find('[name="time_entry[stop_time_time]"]').val(TimeUtils.format_internal_time(o)), s.trigger("change")
            },
            updateDuration: function (e) {
                var t = TimeEntryUtils.findFormFromElement(e),
                    n = t.find('[name="time_entry[start_time_date]"]').val(),
                    i = t.find('[name="time_entry[start_time_time]"]').val(),
                    r = TimeUtils.parse_internal_datetime(n + " " + i),
                    a = t.find('[name="time_entry[stop_time_date]"]').val(),
                    o = t.find('[name="time_entry[stop_time_time]"]').val(),
                    s = TimeUtils.parse_internal_datetime(a + " " + o);
                t.find("#start_time_date").val(TimeUtils.format_date(r)), t.find("#stop_time_date").val(TimeUtils.format_date(s));
                var l = moment.duration(s - r),
                    c = t.find("#time_entry_duration");
                c.val(TimeUtils.format_duration(l, "auto")), FormHelpers.clearError(c)
            },
            update_time_entries: function (e, t, n) {
                var i = $("#timesheet"),
                    r = i.data("refreshUrl"),
                    a = i.find("select#time_types").val(),
                    o = i.find("select#client_types").val(),
                    s = i.find("select#user").val(),
                    l = i.find("select#time_zone").val(),
                    c = i.find("input#filters_show_activity").val(),
                    u = i.find("input#filters_show_idle").val(),
                    d = {
                        date: e.data("date"),
                        date_end: e.data("date-end"),
                        "filters[user]": s,
                        "filters[time_types][]": a,
                        "filters[client_types][]": o,
                        "filters[show_activity]": c,
                        "filters[show_idle]": u,
                        time_zone: l
                    };
                $.ajax({
                    type: "GET",
                    url: r,
                    data: d,
                    dataType: "json",
                    success: function (n) {
                        t && t(n);
                        var r = e.find(".time-entries-wrapper");
                        r.replaceWith(n.html), refreshBatchActions(e), TimeEntryUtils.reset_time_entries_widgets(i.find(".time-entries"))
                    },
                    error: function (e) {
                        n && n(e)
                    }
                })
            },
            reset_time_entries_widgets: function (e) {
                var t = e.find(".task.switcher-wrapper");
                t.find(".a-tooltip").tooltip({
                    placement: "auto bottom",
                    container: "body",
                    trigger: "hover"
                }), initTooltip(e), e.find(".a-popover").each(function () {
                    $(this).popover({
                        html: !0,
                        sanitize: !1
                    })
                })
            },
            addNewTasksToSelection: function (e) {
                var t = $(e);
                t.data("newTask") || (t.on("select2:selecting", function (e) {
                    "new_task" === e.params.args.data.id && (e.preventDefault(), e.stopPropagation(), t.select2("close"), AjaxDialog.run(t.data("create-url") + "?task[project_id]=" + $("#time_entry_project_id").val() + "&task[close]=true&task[assignee]=" + t.data("task-assignee")))
                }), t.attr("data-new-task", "true"))
            }
        }, window.TimeEntriesWeekly = {
            initFilters: function (e) {
                $(".js-filter-selector", e).on("change", function (e) {
                    return $("#filters").submit(), !1
                })
            },
            initWeekPicker: function (e) {
                setupDatePickers(e, {
                    onchange: function (t, n, i) {
                        goto_week(n, e.find(".js-filter-date-actions").first().data("start_week_on"))
                    }
                }), e.find(".js-filter-date-actions").on("click", function (e) {
                    e.preventDefault(), e.stopImmediatePropagation(), goto_week($(this).data("date"), $(this).data("start_week_on"))
                })
            },
            initCellActions: function (t) {
                $(t).on("click", ".js-timesheet-cell-full", function (t) {
                    t.preventDefault(), t.stopPropagation();
                    var n = $(this),
                        i = $("#time-entries-popover-tmpl"),
                        r = n.data("time-entries"),
                        a = n.data("project-id"),
                        o = n.data("task-id"),
                        s = n.data("date");
                    n.popover({
                        trigger: "manual",
                        html: !0,
                        sanitize: !1,
                        placement: "auto bottom",
                        container: "body"
                    }).on("shown.bs.popover", function (e) {
                        initTooltip($(this).data("bs.popover").$tip)
                    }), $(".popover").popover("hide"), i.find(".js-entries").empty(), $.each(r, function (t, n) {
                        e(i, n[3], "a.delete-time", n[6]), e(i, n[4], "a.edit-time", n[6]), e(i, n[5], "a.split-time", n[6]), i.find(".js-entries").append('<div class="popover-time-entry">' + n[0] + " - " + n[1] + " " + n[2] + i.find(".js-links").html() + "</div>")
                    }), n.attr("data-content", i.html().replace("__PROJECT_ID__", a).replace("__TASK_ID__", o).replace("__DATE__", s)).popover("show")
                })
            },
            initMain: function (e) {
                $(function () {
                    TimeEntriesWeekly.initFilters(e), TimeEntriesWeekly.initWeekPicker(e), TimeEntriesWeekly.initCellActions(e)
                })
            }
        }
    }(), $(function () {
        $("#weekly_timesheet").each(function () {
            TimeEntriesWeekly.initMain($(this))
        })
    }), $(function () {
        $("#timesheet").each(function () {
            setupBatchActions($(".time-entries[data-action-list]"))
        })
    }),
    function () {
        function e(e, t) {
            e.find("*[data-accrual-type]").addClass("hide").find("input").prop("disabled", !0), e.find("*[data-accrual-type=" + t + "]").removeClass("hide").find("input").prop("disabled", !1)
        }

        function t(t) {
            initTooltip(t), setupSelect2AddRemoveLinks(t), t.find("#time_off_policy_accrual_type").on("change", function () {
                e(t, $(this).val())
            }).trigger("change");
            var n = t.find("form[data-current-accrual-type]");
            n.length > 0 && e(t, n.data("currentAccrualType")), t.find('input[type="number"][readonly="readonly"]').prop("disabled", "disabled");
            var i = t.find('input[type="number"][data-maxlength]');
            i.on("input", function (e) {
                var t, n = e.target,
                    i = parseInt(n.getAttribute("data-maxlength")) || 1 / 0,
                    r = parseInt(n.getAttribute("data-maxdecimals")),
                    a = n.value.split(/\.|,/),
                    o = a[1],
                    s = a[0];
                void 0 !== s && (s.length > i && (s = s.slice(0, i)), t = s), void 0 === o || isNaN(r) || (o.length > r && (o = o.slice(0, r)), t = t + "." + o), n.value !== t && void 0 !== t && (n.value = t)
            })
        }
        AjaxDialog.registerHook("setup", "timeOffPolicies", function () {
            t(this)
        }), AjaxDialog.registerHook("response", "timeOffPolicies", function (e) {
            "replace" === e.action && t(this)
        })
    }(),
    function () {
        function e(e, i) {
            $("#time_off_request_user_id").on("change", function () {
                var t = $(this);
                a(e, t.val(), function (n) {
                    var i = n.results || [],
                        r = $("select#time_off_request_time_off_policy_id"),
                        a = ~~r.val(),
                        o = t.find("option:selected"),
                        s = e.find(".tz_message"),
                        l = !e.find("#time_off_request_all_day").is(":checked");
                    i.find(function (e) {
                        return e.id === a
                    }) || (r.empty(), $(".negative-error").addClass("hidden")), l && o.data("show-timezone-message") ? (s.text(o.data("timezone-message")), s.removeClass("hidden")) : s.addClass("hidden")
                })
            }), t(e, i), r(e), n(e)
        }

        function t(e, t) {
            setupDatePickers(e), y(e), setupTimeDuration(e, {
                onchange: function (t, n) {
                    n ? (e.find(".balance-sheet").data("timeOffRequested", n.asSeconds()), p(e), FormHelpers.clearError(t)) : FormHelpers.setError(t, "Enter a number or decimal")
                }
            }), s(e, t)
        }

        function n(e) {
            e.find("#time_off_request_time_off_policy_id").each(function () {
                var t = $(this),
                    n = t.select2({
                        language: {
                            noResults: function () {
                                return "No policies for this user"
                            }
                        },
                        ajax: {
                            url: function () {
                                return t.data("listUrl").replace("__USER_ID__", e.find("#time_off_request_user_id").val())
                            }
                        }
                    });
                n.on("select2:select", function (n) {
                    var i = $(this),
                        r = i.val(),
                        a = e.find("#time_off_request_user_id").val(),
                        o = i.data("balanceUrl").replace("__POLICY_ID__", r).replace("__USER_ID__", a),
                        s = e.find(".balance-sheet"),
                        l = e.find("#amount_used_input"),
                        c = l.data("labels"),
                        u = l.find("label").contents().get(0),
                        d = s.find(".amount-used-label"),
                        h = "generic",
                        f = !n.params || !n.params.data.selectPolicyIfOnlyOne;
                    if (f && FormHelpers.clearError(t), r) {
                        var m = e.find(".loading.alert.alert-warning");
                        r = ~~r, h = n.params.data.paid ? "paid" : "unpaid", m.show(), $.get(o, function (t) {
                            m.hide(), s.data("details", t), p(e)
                        })
                    } else s.data("details", {
                        allow_negative_balances: !1,
                        show_balance: !1,
                        starting_balance: 0,
                        pending_approval: 0
                    }), p(e);
                    u.textContent = c[h] + " ", d.text(c[h])
                })
            })
        }

        function i(e) {
            var t = e.find(".modal-footer button[data-disable-with]");
            t.text(t.data("original-title"))
        }

        function r(e) {
            var t = e.find("#time_off_request_user_id").val();
            t && a(e, t, function (t) {
                var n = e.find(".time_off_request_time_off_policy_id select"),
                    i = n.find("option:selected"),
                    r = ~~n.val(),
                    a = n.data("policies");
                if (a && a.length) {
                    var o = a.find(function (e) {
                        return e.id === r
                    });
                    i.data("data", o)
                }
            })
        }

        function a(e, t, n) {
            var i = e.find("#time_off_request_time_off_policy_id"),
                r = i.data("listUrl").replace("__USER_ID__", t);
            $.get(r).then(function (t) {
                i.data("policies", t.results), n && "function" == typeof n && n(t), o(e, t)
            })
        }

        function o(e, t) {
            var n = e.find("#time_off_request_time_off_policy_id"),
                i = t.results && 1 === t.results.length;
            if (i) {
                var r = t.results[0];
                if (r.selectPolicyIfOnlyOne = !0, n.find("option[value='" + r.id + "']").length) n.val(r.id);
                else {
                    var a = new Option(r.text, r.id, !0, !0);
                    n.append($(a).data("data", r))
                }
                n.trigger({
                    type: "select2:select",
                    params: {
                        data: r
                    }
                })
            }
        }

        function s(e, t) {
            function n() {
                setupTimeEditor(e, {
                    onchange: function (e, t, n) {
                        t ? (FormHelpers.clearError(e), i(n.target.id.includes("start"))) : FormHelpers.setError(e, "Invalid time")
                    }
                })
            }

            function i(i) {
                var r = a.prop("checked"),
                    d = {
                        allDay: r,
                        startDate: TimeUtils.parse_internal_date(o.eq(0).val()),
                        endDate: TimeUtils.parse_internal_date(o.eq(1).val()),
                        startTime: r ? null : h.eq(0).val(),
                        endTime: r ? null : h.eq(1).val(),
                        fromStartTime: i,
                        inputs: {
                            endDate: s.eq(1),
                            realEndDate: o.eq(1),
                            endTime: c.eq(1),
                            realEndTime: h.eq(1)
                        },
                        submitButton: e.find(".btn-primary")
                    },
                    f = u(e, d, function () {
                        l(d.startDate, d.endDate, t)
                    });
                return r || n(), f || d.submitButton.prop("disabled", !0), f
            }
            var r = e.find("#time_off_request_user_id"),
                a = e.find("#time_off_request_all_day"),
                o = e.find("#time_off_request_starts_at_date, #time_off_request_stops_at_date"),
                s = e.find("#starts_at_date, #stops_at_date"),
                c = e.find("#starts_at_time, #stops_at_time"),
                h = e.find("#time_off_request_starts_at_time, #time_off_request_stops_at_time"),
                f = function (t) {
                    var n = i(t.target.id.includes("start")),
                        r = e.find("form"),
                        a = r.find(".shift-count-warning-wrapper");
                    a.addClass("hidden"), n && d(e)
                };
            a.on("change", f), o.on("change", f), r.on("change", f), e.on("change", "#starts_at_time, #stops_at_time", f), n(), i(!1)
        }

        function l(e, t, n) {
            var i = $(".time_off_request_amount_used.duration_editor input");
            if (i.data("pristine") && !n) {
                var r = Math.abs(t.diff(e, "days")),
                    a = 8 * (0 === r ? 1 : r + 1);
                i.val(a).trigger("change")
            }
        }

        function c(e, t, n) {
            t.realEndDate.val(n), t.endDate.data("start-date", n), setupDatePickers(e, {
                minDate: n
            }), f(t.endDate, 500)
        }

        function u(e, t, n) {
            var i = !0;
            t.submitButton.prop("disabled", !1);
            var r = t.inputs,
                a = r.endDate.closest(".date-time-field-pair"),
                o = TimeUtils.format_internal_date(t.startDate);
            if (t.startDate.isAfter(t.endDate) ? (c(a, r, o), t.endDate = t.startDate) : (r.endDate.data("start-date", o), setupDatePickers(a, {
                minDate: o
            })), !t.allDay) {
                h(t.startDate, t.startTime), h(t.endDate, t.endTime);
                var s = t.startDate.isSame(t.endDate) && t.startTime === t.endTime,
                    l = t.startDate.isAfter(t.endDate);
                if (s) return FormHelpers.setError(r.endTime, "Invalid time"), i = !1;
                if (t.endTime && FormHelpers.clearError(r.endTime), t.startTime || (i = !1), l)
                    if (t.fromStartTime) {
                        t.startDate.add(1, "hour");
                        var u = TimeUtils.format_internal_time(t.startDate),
                            d = TimeUtils.format_internal_date(t.startDate);
                        c(a, r, d), r.realEndTime.val(u), f(r.endTime, 500)
                    } else FormHelpers.setError(t.inputs.endTime, "Invalid time"), i = !1
            }
            return n && $.isFunction(n) && n(t), i
        }

        function d(e) {
            var t = e.find("form"),
                n = t.data("shift-count-url");
            $.ajax({
                type: "GET",
                url: n,
                data: b(e)
            }).done(function (e) {
                var n = e.shift_count,
                    i = t.find(".shift-count-warning-wrapper"),
                    r = $(".modal-body.overlap-content");
                i.length && (0 === n ? i.addClass("hidden") : (i.html(e.warning).addClass("small"),
                    r.find("> .shift-count-warning-wrapper-wrapper").html(e.warning), r.find("> p").html(e.question), i.removeClass("hidden")))
            }).fail(window.reportError)
        }

        function h(e, t) {
            var n = TimeUtils.parse_internal_time(t);
            n && e.set({
                hour: n.hour(),
                minute: n.minute(),
                second: n.second()
            })
        }

        function f(e, t) {
            e.addClass("highlight"), setTimeout(function () {
                e.removeClass("highlight")
            }, t || 0)
        }

        function p(e) {
            var t = e.find(".balance-sheet"),
                n = t.data("details"),
                i = t.data("timeOffRequested"),
                r = n.starting_balance - i - n.pending_approval;
            t.data("remainingBalance", r), t.find("[data-field=starting_balance]").text(TimeUtils.format_duration(moment.duration(n.starting_balance, "seconds"))), t.find("[data-field=time_off_requested]").text(TimeUtils.format_duration(moment.duration(i, "seconds")));
            var a = t.find(".pending-approval");
            0 === n.pending_approval ? a.addClass("hidden") : a.removeClass("hidden"), t.find("[data-field=pending_approval]").text(TimeUtils.format_duration(moment.duration(n.pending_approval, "seconds"))), t.find("[data-field=remaining_balance]").text(TimeUtils.format_duration(moment.duration(r, "seconds"))), v(e)
        }

        function m(e, t, n, i) {
            if (0 === n.shift_count) t.submit();
            else {
                var r = e.find("> .modal-dialog"),
                    a = e.find(".shift-count-warning-wrapper");
                i && (a.html(n.warning), e.find(".shift-count-warning-question-wrapper").text(n.question), e.find(".overlap-content.modal-footer").html(n.confirm_buttons)), e.find(".default-content").addClass("hidden"), e.find(".overlap-content").removeClass("hidden"), r.removeClass(r.data("modal-size")), a.removeClass("hidden")
            }
        }

        function g(e) {
            var t = e.hasClass("new-time-off-request"),
                n = e.hasClass("edit-time-off-request"),
                i = e.find(".btn-primary");
            i.off("click").on("click", function (i) {
                var r = e.find("form");
                if (i.preventDefault(), !t && !n) {
                    var a = ~~(r.data("shift-overlap-count") || "0");
                    return void m(e, r, {
                        shift_count: a
                    }, !1)
                }
                var o = r.serializeArray().filter(function (e) {
                    return e.name.startsWith("time_off_request")
                }).reduce(function (e, t) {
                    return e[t.name] = t.value, e
                }, {});
                $.ajax({
                    type: "POST",
                    url: r.attr("data-validation-url"),
                    data: o
                }).done(function (i) {
                    if (i.valid) {
                        var a = r.find(".time_off_request_time_off_policy_id select option:selected"),
                            o = a.data("data").requires_approval;
                        if (o && (t || n)) return r.submit();
                        $.ajax({
                            type: "GET",
                            url: r.attr("data-shift-count-url"),
                            data: b(e)
                        }).done(function (t) {
                            m(e, r, t, !0)
                        })
                    } else r.submit()
                }).fail(function () {
                    r.submit()
                })
            })
        }

        function v(e) {
            var t = e.find(".balance-sheet"),
                n = t.data("remainingBalance") < 0,
                i = t.data("details").allow_negative_balances,
                r = !!$("#time_off_request_time_off_policy_id").val(),
                a = e.find(".btn-primary"),
                o = t.find(".negative-error");
            r ? !n || i ? (a.prop("disabled", !1).tooltip("destroy"), o.addClass("hidden")) : (a.prop("disabled", !0).tooltip({
                title: o.text()
            }), o.removeClass("hidden")) : a.prop("disabled", !0), g(e)
        }

        function y(e) {
            var t = e.find("#time_off_request_all_day"),
                n = e.find("#starts_at_time, #stops_at_time");
            t.on("change", function () {
                var i = t.prop("checked"),
                    r = e.find(".tz_message");
                if (n.prop("disabled", i).closest(".form-group")[i ? "addClass" : "removeClass"]("hidden"), i) return void r.addClass("hidden");
                var a = e.find("select#time_off_request_user_id");
                if (a.length) {
                    var o = a.find("option:selected");
                    o.data("show-timezone-message") && (r.text(o.data("timezone-message")), r.removeClass("hidden"))
                } else {
                    var o = e.find("input#time_off_request_user_id");
                    o.data("show-timezone-message") && r.removeClass("hidden")
                }
            }).trigger("change")
        }
        var b = function (e) {
            var t = e.find('input[name="time_off_request[all_day]"]'),
                n = {
                    user_ids: [$("#time_off_request_user_id").val()],
                    start_date: e.find('input[name="time_off_request[starts_at_date]"]').val(),
                    stop_date: e.find('input[name="time_off_request[stops_at_date]"]').val()
                };
            return t.is(":checked") || (n = $.extend({}, n, {
                start_time: e.find('input[name="time_off_request[starts_at_time]"]').val(),
                stop_time: e.find('input[name="time_off_request[stops_at_time]"]').val(),
                timezone: e.find("#time_off_request_user_id option:selected").data("user-timezone") || e.find("#time_off_request_user_id").data("user-timezone")
            })), n
        };
        AjaxDialog.registerHook("setup", "timeOffRequests", function () {
            e(this, !1), d(this)
        }), AjaxDialog.registerHook("response", "timeOffRequests", function (t) {
            "replace" === t.action && (e(this, !0), i(this), d(this))
        }), AjaxDialog.registerHook("setup", "statusTimeOffRequests", function () {
            g(this)
        })
    }();
var onError = function (e, t) {
    t.each(function (e, t) {
        var n = $(t);
        n.text(n.data("original-content")), n.removeAttr("disabled")
    }), $.jGrowl(e.alert || "An error prevented your request from being saved. Try again")
};
! function () {
    window.Timesheets = {
        initialize: function (e, t, n) {
            setupBatchActions(e.find("table.has-batch-actions"), {
                beforeDropdown: function (e, i, r) {
                    var a = {},
                        o = !1;
                    if (r.each(function () {
                        var e = $(this).data("actions");
                        for (var t in e) e[t] && !a.hasOwnProperty(t) ? a[t] = !0 : "can_pay" !== t || e[t] || (a[t] = !1)
                    }), o = Array.from(r).some(function (e) {
                        return $(e).closest("tr").data("current-pay-period") === !0
                    }), a.can_approve) {
                        var s = e.find('[data-toggle-action="can_approve"]');
                        o ? s.one("click", function (e) {
                            t(s, !0) && (e.preventDefault(), e.stopImmediatePropagation())
                        }) : s.off("click")
                    }
                    if (a.can_submit) {
                        var l = e.find('[data-toggle-action="can_submit"]');
                        o ? l.one("click", function (e) {
                            n(l, !0) && (e.preventDefault(), e.stopImmediatePropagation())
                        }) : l.off("click")
                    }
                    a.can_pay ? e.find('[data-toggle-action="can_pay"]').removeClass("a-tooltip").removeAttr("title").removeAttr("data-original-title").removeAttr("data-placement") : (delete a.can_pay, e.find('[data-toggle-action="can_pay"]').addClass("a-tooltip").attr("title", "You can only batch pay approved timesheets that have time tracked to them and were not paid yet.").attr("data-original-title", "You can only batch pay approved timesheets that have time tracked to them and were not paid yet.").attr("data-placement", "right"), initTooltip(e)), e.find("[data-toggle-action]").addClass("disabled").attr("disabled", "disabled");
                    for (var c in a) a[c] && e.find('[data-toggle-action="' + c + '"]').removeClass("disabled").removeAttr("disabled")
                }
            }), $(".btn-payment-wizard-dialog").on("click", function (e) {
                if (e.preventDefault(), e.stopPropagation(), !$(this).hasClass("disabled")) {
                    var t = [],
                        n = 0;
                    $.each($('input[type="checkbox"][name="ids[]"]:checked'), function () {
                        t.push($(this).val());
                        var e = $(this).closest("tr").data("amount");
                        e && (n += parseFloat(e))
                    });
                    var i = $(this).attr("href");
                    AjaxDialog.run(i + "?" + $.param({
                        timesheet_ids: t,
                        total_amount: n,
                        type: "timesheets"
                    }))
                }
            })
        }
    }
}(), $(function () {
    function e(e, t) {
        switch (i) {
            case n.FREE:
                return i = n.WAITING, VueTimesheets.approveConfirmation.open(t).then(function (t) {
                    t.approved ? (i = n.APPROVED, e.click()) : i = n.FREE
                }), !0;
            case n.APPROVED:
                return i = n.FREE, !1;
            case n.WAITING:
                return !0
        }
    }

    function t(e, t) {
        switch (r) {
            case n.FREE:
                return r = n.WAITING, VueTimesheets.submitConfirmation.open(t).then(function (t) {
                    t.submitted ? (r = n.SUBMITTED, e.click()) : r = n.FREE
                }), !0;
            case n.SUBMITTED:
                return r = n.FREE, !1;
            case n.WAITING:
                return !0
        }
    }
    var n = {
        FREE: "FREE",
        WAITING: "WAITING",
        APPROVED: "APPROVED",
        SUBMITTED: "SUBMITTED"
    },
        i = n.FREE,
        r = n.FREE;
    $("#timesheets").each(function () {
        Timesheets.initialize($(this), e, t), AjaxDialog.registerHook("setup", "setupTimesheets", function () {
            setupSelect2AddRemoveLinks(this);
            var e = $('select[name="member_ids[]"]'),
                t = e.parent();
            e.on("change", function () {
                $(this).val() ? dismissFormInputError(t) : addFormInputError(t, ERRORS.members.blank)
            }), $(".btn-timesheets-setup").on("click", function (n) {
                n.preventDefault(), n.stopPropagation();
                var i = $(this).data("url"),
                    r = e.val();
                if (r) {
                    var a = $('select[name="pay_period"]').val();
                    $("#timesheets-setup-modal").loadingCurtain("show"), $.ajax({
                        url: i,
                        method: "POST",
                        dataType: "json",
                        data: {
                            ids: r,
                            user_organization: {
                                pay_period: a,
                                timesheets_enabled: !0
                            },
                            welcome_mat: !0
                        }
                    }).done(function (e) {
                        "reload" === e.action ? window.location.reload(!0) : alert("Failed to set up timesheets for members")
                    }).fail(function () {
                        alert("Failed to set up timesheets for members")
                    })
                } else addFormInputError(t, ERRORS.members.blank)
            })
        }), $(".submit-timesheet").on("click", function (e) {
            var n = $(this).closest("tr").data();
            n.currentPayPeriod === !0 && t(this, !1) && (e.preventDefault(), e.stopImmediatePropagation())
        }), $(".approve-timesheet").on("click", function (t) {
            var n = $(this).closest("tr").data();
            n.currentPayPeriod === !0 && e(this, !1) && (t.preventDefault(), t.stopImmediatePropagation())
        })
    })
}),
    function () {
        AjaxDialog.registerHook("response", "newTaskResponse", function (e) {
            if (e.success) {
                var t, n;
                if ($("#time_entry_task_id").length ? (t = $("#time_entry_task_id"), n = e.assign) : (t = $("#wt-task-select"), n = e.mine), n && e.change_task) {
                    var i = new Option(e.name, e.id, !0, !0);
                    t.append(i).trigger("change")
                }
                AjaxDialog.displayNotifications({
                    alert: "To-do created"
                })
            } else AjaxDialog.displayNotifications({
                alert: e.message
            })
        })
    }(), $(function (e) {
        function t(t) {
            var i = t.find("input.member-search").val(),
                a = t.find("select.trackable_filter").val(),
                o = t.find("select.role_filter").val(),
                s = e(".per-page-dropdown"),
                l = "";
            if (i && (n(), r(), l += "&search=" + i), a && (l += "&trackable=" + a), o && (l += "&role=" + o), s) {
                var c = s.data("per-page");
                c && (l += "&per_page=" + c)
            }
            window.location = window.location.pathname + "?" + l
        }

        function n() {
            e(".badge-go").show()
        }

        function i() {
            e(".badge-go").hide()
        }

        function r() {
            e(".badge-go").attr("disabled", !1)
        }

        function a() {
            e(".badge-go").attr("disabled", !0)
        }
        e(".list-searchable").on("change", "select.role_filter, select.trackable_filter", function (n) {
            var i = e(this);
            t(i.closest(".list-searchable"))
        });
        var o = e("input.member-search");
        o.keypress(function (n) {
            var i = e(this);
            13 === n.keyCode && t(i.closest(".list-searchable"))
        }), o.on("input", function (a) {
            var o = e(this);
            r(), o.val() ? n() : (t(o.closest(".list-searchable")), i())
        }), e(".badge-go").click(function () {
            var n = e(this);
            n.attr("disabled") || t(n.closest(".list-searchable"))
        }), e("a.send-download-instructions[data-type=json]").on("ajax:success", function (e, t, n, i) {
            AjaxDialog.displayNotifications(t)
        }), e("a.delete-user-organizations[data-type=json]").on("ajax:success", function (n, i, r, a) {
            if (i.reload) return void window.location.reload(!0);
            var o = e(this);
            o.closest("tr").remove();
            var s = o.closest(".list-searchable");
            t(s), AjaxDialog.displayNotifications(i)
        }), e("a.update-tracking-user-organizations[data-type=json]").on("ajax:success", function (n, i, r, a) {
            var o = e(this),
                s = o.closest("tr");
            if (i.reload) return void window.location.reload(!0);
            1 === i.enabled ? (setTimeout(function () {
                o.text("Disable tracking")
            }, 1), o.attr("data-original-title", "Disable time tracking for member."), o.attr("href", o.attr("href").replace("enable", "disable")), s.find(".member-status-cell .label").toggleClass("label-success label-danger").text("Enabled"), s.find('input[type="checkbox"][name="ids[]"]').attr("data-status", !0), s.attr("data-trackable", !0)) : 0 === i.enabled && (setTimeout(function () {
                o.text("Enable tracking")
            }, 1), o.attr("data-original-title", "Enable time tracking for member."), o.attr("href", o.attr("href").replace("disable", "enable")), s.find(".member-status-cell .label").toggleClass("label-success label-danger").text("Disabled"), s.find('input[type="checkbox"][name="ids[]"]').attr("data-status", !1), s.attr("data-trackable", !1));
            var l = s.closest(".list-searchable");
            t(l), AjaxDialog.displayNotifications(i)
        }), e("table.members-table.organization-table").each(function () {
            var t = e(this),
                i = t.closest(".list-searchable"),
                r = i.find("input.member-search"),
                o = r.data("value"),
                s = i.find("select.trackable_filter"),
                l = s.data("value"),
                c = i.find("select.role_filter"),
                u = c.data("value");
            o && (n(), a(), r.val(o)), "boolean" == typeof l && s.val(l.toString()).trigger("change.select2"), u && c.val(u).trigger("change.select2")
        })
    }), $(function () {
        function e(e, t) {
            $("#user_organization_weekly_limit").on("change", function () {
                LimitsUtils.setRate($(this))
            }).triggerHandler("change"), $("#user_organization_daily_limit").on("change", function () {
                LimitsUtils.setRate($(this))
            }).triggerHandler("change"), e.find(".dow-limits-btn").on("click", function (e) {
                var t = $("#" + $(this).attr("data-input-id"));
                $(this).toggleClass("active"), t.prop("checked", !t.prop("checked"))
            }), e.find(".limit_popover_trigger").on("click", function (e) {
                $(this).parent().parent().find(".limit_progress").popover("toggle"), e.preventDefault()
            }), e.find(".limit_remover").on("click", function (e) {
                var t = $(this).attr("data-targets");
                $(this).parent().parent().find("input").val(""), $("#current_" + t + "_col").addClass("hidden"), LimitsUtils.setRate($("#user_organization_" + t + "_limit")), e.preventDefault()
            }), e.find('[data-toggle="popover"]').popover({
                trigger: "manual",
                html: !0,
                placement: "bottom",
                sanitize: !1
            }), e.find(".limit_progress").on("shown.bs.popover", function () {
                $(this).parent().find("input").focus(), $(this).parent().find(".limit_apply_link").on("click", function (t) {
                    t.preventDefault();
                    var n, i = $(this).attr("id").indexOf("weekly") > -1 ? "weekly" : "daily",
                        r = e.find("#user_organization_current_" + i + "_limit"),
                        a = e.find("#user_organization_dummy_" + i),
                        o = e.find("#" + i + "_total"),
                        s = e.find("#" + i + "_progressbar"),
                        l = parseFloat(s.attr("used")),
                        c = parseFloat(s.attr("total")),
                        u = parseFloat(a.val());
                    isNaN(u) ? n = "is not a number" : 0 >= u ? n = "must be greater than 0" : "weekly" === i && u > 168 ? n = "must be less than or equal to 168" : "daily" === i && u > 24 && (n = "must be less than or equal to 24"), void 0 === n ? (FormHelpers.clearError(a.parent()), o.text(TimeUtils.format_duration(3600 * u, !1)), r.val(u.toFixed(2)), 3600 * u !== c ? (o.addClass("text-success"), o.css("font-weight", "bold")) : o.hasClass("text-success") && (o.removeClass("text-success"), o.css("font-weight", "")), s.width((100 * l / (3600 * u)).toFixed(1) + "%"), $(this).closest(".popover").popover("hide")) : (FormHelpers.setError(a.parent(), n), a.focus())
                })
            }), initTooltip()
        }
        AjaxDialog.registerHook("setup", "limitsEditDialogs", function (t) {
            e(this, t)
        }), AjaxDialog.registerHook("response", "limitsEditDialogs", function (t, n, i) {
            "replace" === t.action && e(this, i)
        })
    }), $(function () {
        function e(e, t) {
            var n = e.find('fieldset[data-wizard="' + t + '"]'),
                i = e.find("fieldset.chooser");
            $("#user_organization_action").val(t), n.length && (i.addClass("hidden"), n.removeClass("hidden"), $("#update-budget-button").removeClass("hidden"))
        }

        function t(t, n) {
            $("#user_organization_weekly_budget, #user_organization_current_budget").on("change", function () {
                var e = $(this);
                BudgetUtils.setRate(e)
            }).triggerHandler("change"), t.find(".a-tooltip").not("button, input, [href], .btn").tooltip({
                placement: "auto bottom",
                container: "body",
                trigger: "hover"
            }), n.createBudget && $("#create-budget-button").removeClass("hidden"), t.find(".chooser").on("click", ".wizard-step a", function (n) {
                n.preventDefault();
                var i = $(this),
                    r = i.data("target");
                if ("remove" === r) {
                    var a = confirm("Do you really want to remove this user's weekly limit?");
                    a ? ($("#user_organization_action").val(r), $("#edit-membership-budget-form").submit()) : t.modal("hide")
                } else e(t, r)
            });
            var i = $("#user_organization_action").val();
            i && e(t, i)
        }
        AjaxDialog.registerHook("setup", "budgetEditDialogs", function (e) {
            t(this, e)
        }), AjaxDialog.registerHook("response", "budgetEditDialogs", function (e, n, i) {
            "replace" === e.action && t(this, i)
        })
    }), $(function () {
        function e(e, t) {
            return e === Models.UserProject.Roles.manager ? t.manager : e === Models.UserProject.Roles.user ? t.user : e === Models.UserProject.Roles.viewer ? t.viewer : Object.values(t).flat()
        }

        function t(e) {
            (e || []).forEach(function (e) {
                return e.children && Array.isArray(e.children) ? t(e.children) : void (e.id = e.id.toString())
            })
        }

        function n(n, r) {
            r = r.toString();
            var a = "roles_" + r.replace("-", "_") + "_",
                o = n.data("projects"),
                s = $("<div class='form-group'/>");
            s.append($("<label class='control-label'/>").text(Models.RolePickers[r].project_label));
            var l = $("<div class='row'/>");
            l.append($("<div class='col-xs-9 help-block pull-left'/>").text(Models.RolePickers[r].project_description || ""));
            var c = $("<a href='#' class='select-all' data-target='#" + a + "'>Select all</a>");
            l.append($("<div class='col-xs-3 help-block pull-right text-right'/>").append(c)), s.append(l);
            var u = $("<div class='input-group controls'/>"),
                d = $("<select id='" + a + "' multiple='multiple' data-close-on-select='false' class='select2 form-control linked-project-selectors' data-allow-clear='true' data-placeholder=''/>");
            d.data("role", r), u.append(d), s.append(u), n.append(s), t(o);
            var h = {
                width: "auto;",
                data: o || [],
                templateSelection: select2Callbacks.find("customPillSelection")
            },
                f = n.data("currentProjects"),
                p = e(r, f);
            d.select2(h), d.val(p).trigger("change.select2"), AddSelect2Events(d), i(d)
        }

        function i(e) {
            e.on("select2:unselect", function (e) {
                $(".tooltip").remove()
            })
        }

        function r(e) {
            var t = e.find(".projects-container"),
                i = e.find("#user_organization_chosen_role"),
                r = i.val(),
                a = r !== Models.UserOrganization.SingleRoles.by_project;
            t.empty(), a ? n(t, r) : (n(t, Models.UserProject.Roles.manager), n(t, Models.UserProject.Roles.user), n(t, Models.UserProject.Roles.viewer))
        }

        function a(e, t, n) {
            var i = t.find(".projects-container"),
                r = i.data("currentProjects"),
                a = n.data("role"),
                o = Models.RolePickers[a].project_clear,
                s = Models.RolePickers[a].project_role;
            r = o ? {} : $.extend({}, r), r[s] = (n.val() || []).map(function (e) {
                return isNaN(parseInt(e)) ? e : parseInt(e)
            }), i.data("currentProjects", r)
        }

        function o(e, t) {
            return e.filter(function (e) {
                return t.indexOf(e) < 0
            })
        }

        function s(e, t) {
            var n, i, r, a = {
                updated: {},
                removed: []
            };
            for (n in Models.UserProject.Roles) i = e[n] || [], r = t[n] || [], a.removed = a.removed.concat(o(i, r)), a.updated[n] = o(r, i);
            return a.removed = o(a.removed, Object.values(a.updated).flat()), a
        }

        function l(e, t, n) {
            var i = t.find(".projects-container"),
                r = t.find(".hidden-container"),
                a = t.find("#user_organization_chosen_role"),
                o = a.val();
            r.empty();
            var l = i.data("originalProjects"),
                c = i.data("currentProjects"),
                u = Models.RolePickers[o] || {};
            if (u.project_clear) {
                var d = Object.values(c).flat();
                c = {}, c[u.project_role] = d
            }
            var h = s(l, c);
            r.append($('<input type="hidden" name="changes"/>').val(JSON.stringify(h)))
        }
        AjaxDialog.registerHook("setup", "editProjectMemberships", function () {
            var e = this;
            setupSelect2AddRemoveLinks(e), setupLinkedSelect2Fields(e, ".linked-project-selectors");
            var t = e.find(".projects-container");
            t.data("currentProjects", t.data("originalProjects")), e.on("change", "#user_organization_chosen_role", function () {
                r(e)
            }), e.on("change", ".linked-project-selectors", function (t) {
                a(t, e, $(this))
            }), e.find("form").on("ajax:before", function (t) {
                l(t, e, $(this))
            }), $("#user_organization_chosen_role").trigger("change")
        }), AjaxDialog.registerHook("response", "editProjectMemberships", function (e, t) { })
    }), $(function () {
        function e(e, t) {
            t = t.toString();
            var n = "roles_" + t.replace("-", "_") + "_",
                i = e.data("teams"),
                r = $("<div class='form-group'/>");
            r.append($("<label class='control-label'/>").text("Teams"));
            var a = $("<div class='row'/>");
            a.append($("<div class='col-xs-9 help-block pull-left'/>").text("All team members are added to the project based on their project role"));
            var o = $("<a href='#' class='select-all' data-target='#" + n + "'>Select all</a>");
            a.append($("<div class='col-xs-3 help-block pull-right text-right'/>").append(o)), r.append(a);
            var s = $("<div class='input-group controls'/>"),
                l = $("<select id='" + n + "' multiple='multiple' class='select2 form-control linked-project-selectors' data-allow-clear='true'/>");
            l.data("role", t), s.append(l), r.append(s), e.append(r);
            var c = {
                width: "auto;",
                data: i || [],
                templateSelection: select2Callbacks.find("customPillSelection")
            },
                u = e.data("currentTeams");
            l.select2(c), l.val(u).trigger("change.select2"), AddSelect2Events(l)
        }

        function t(t) {
            var n = t.find(".teams-container");
            n.empty(), e(n, "team")
        }

        function n(e, t, n) {
            var i = t.find(".teams-container"),
                r = i.data("currentTeams"),
                a = !0,
                o = "team";
            r = a ? {} : $.extend({}, r), r[o] = (n.val() || []).map(function (e) {
                return isNaN(parseInt(e)) ? e : parseInt(e)
            }), i.data("currentTeams", r)
        }

        function i(e, t, n) {
            var i = t.find(".teams-container"),
                r = t.find(".hidden-container");
            r.empty();
            var a = i.data("currentTeams");
            r.append($('<input type="hidden" name="changes"/>').val(JSON.stringify(a)))
        }
        AjaxDialog.registerHook("setup", "userProjectEditDialogs", function () {
            var e = this;
            setupSelect2AddRemoveLinks(e), setupLinkedSelect2Fields(e, ".linked-role-users");
            var r = e.find(".teams-container");
            r.data("currentTeams", r.data("originalTeams")), e.on("change", "#project_name", function () {
                t(e)
            }), e.on("change", ".linked-project-selectors", function (t) {
                n(t, e, $(this))
            }), e.find("form").on("ajax:before", function (t) {
                i(t, e, $(this))
            }), $("#project_name").trigger("change")
        })
    }), $(function () {
        $("#notifications_panel").each(function () {
            var e = $(this).find(".user-notifications");
            e.prop("disabled", !1)
        }).on("click", ".user-notifications", function (e) {
            e.stopPropagation(), e.preventDefault();
            var t = $(this);
            $.ajax(t.attr("href"), {
                type: "POST"
            }).done(function (e) {
                e.success ? (t.prop("disabled", !0), t.addClass("disabled"), t.text("Turned on")) : alert("Failed to resubscribe.")
            }).fail(function () {
                alert("Failed to resubscribe.")
            })
        })
    }),
    function () {
        var e = 27;
        window.WhatsNew = {
            open: !1,
            _body: null,
            _icon: null,
            _panel: null,
            _close: null,
            _empty: null,
            _window: null,
            _backdrop: null,
            initialize: function () {
                WhatsNew._body = $("body"), WhatsNew._window = $(window), WhatsNew._panel = $(".whats-new-announcements-panel"), WhatsNew._close = WhatsNew._panel.find(".hi-close"), WhatsNew._empty = WhatsNew._panel.find(".wna-panel-empty"), WhatsNew._backdrop = $(".whats-new-announcements-backdrop"), WhatsNew._icon = $(".top-bar a.wna-toggle[data-toggle=panel]"), WhatsNew.setupWhatsNewPanel(), WhatsNew.showPopupAnnouncement()
            },
            destroy: function () { },
            markSeen: function (e) {
                return $.ajax({
                    method: "POST",
                    url: "/whats_new/" + e + "/mark_seen",
                    dataType: "json"
                })
            },
            setupWhatsNewPanel: function () {
                WhatsNew._icon.on("click", WhatsNew.togglePanel), WhatsNew._close.click(WhatsNew.hidePanel), WhatsNew._backdrop.click(WhatsNew.hidePanel)
            },
            setEscapeEvent: function () {
                WhatsNew._open ? WhatsNew._window.on("keydown", function (t) {
                    t.which === e && (t.preventDefault(), WhatsNew.hidePanel())
                }) : WhatsNew._panel.off("keydown")
            },
            togglePanel: function (e) {
                return e.preventDefault(), e.stopPropagation(), WhatsNew._open ? WhatsNew.hidePanel() : WhatsNew.showPanel()
            },
            showPanel: function () {
                WhatsNew._body.addClass("modal-open whats-new-panel-open"), WhatsNew._panel.addClass("open"), WhatsNew._backdrop.addClass("open"), WhatsNew._panel.attr("aria-hidden", !1), WhatsNew._icon.attr("aria-expanded", !0), WhatsNew._open = !0, WhatsNew.setEscapeEvent()
            },
            hidePanel: function () {
                WhatsNew._body.removeClass("modal-open"), WhatsNew._panel.removeClass("open"), WhatsNew._backdrop.removeClass("open"), WhatsNew._panel.attr("aria-hidden", !0), WhatsNew._icon.attr("aria-expanded", !1), WhatsNew._open = !1, WhatsNew.setEscapeEvent();
                var e = WhatsNew._panel.find(".wna-item.new");
                $(e).each(function (e, t) {
                    var n = $(t);
                    WhatsNew.markSeen(n.data("announcement-id")), n.removeClass("new"), $(".js-whats-new-count").text("0").filter(".notifications-number").addClass("hide")
                })
            },
            showPopupAnnouncement: function () {
                function e() {
                    WhatsNew.markSeen(n), WhatsNew._panel.find('[data-announcement-id="' + n + '"]').removeClass("new");
                    var e = $(".js-whats-new-count"),
                        t = Math.max(~~e.text() - 1, 0);
                    e.text(t), 0 === t && e.filter(".notifications-number").addClass("hide")
                }
                var t = $("#popup-announcement"),
                    n = t.data("announcement-id");
                t.on("hide.bs.modal", e), t.on("click", "a", e), t.modal()
            }
        }, $(document).ready(function () {
            WhatsNew.initialize()
        })
    }(),
    function () {
        function e(e) {
            var n = function (e, r) {
                var a = i({}, n, r || {});
                return t(e, a)
            };
            return i(n, {
                language: "en",
                delimiter: ", ",
                spacer: " ",
                conjunction: "",
                serialComma: !0,
                units: ["y", "mo", "w", "d", "h", "m", "s"],
                languages: {},
                round: !1,
                unitMeasures: {
                    y: 315576e5,
                    mo: 26298e5,
                    w: 6048e5,
                    d: 864e5,
                    h: 36e5,
                    m: 6e4,
                    s: 1e3,
                    ms: 1
                }
            }, e)
        }

        function t(e, t) {
            var i, r, a;
            e = Math.abs(e);
            var o = t.languages[t.language] || l[t.language];
            if (!o) throw new Error("No language " + o + ".");
            var s, c, u, d = [];
            for (i = 0, r = t.units.length; r > i; i++) s = t.units[i], c = t.unitMeasures[s], u = i + 1 === r ? e / c : Math.floor(e / c), d.push({
                unitCount: u,
                unitName: s
            }), e -= u * c;
            var h = 0;
            for (i = 0; i < d.length; i++)
                if (d[i].unitCount) {
                    h = i;
                    break
                } if (t.round) {
                    var f, p;
                    for (i = d.length - 1; i >= 0 && (a = d[i], a.unitCount = Math.round(a.unitCount), 0 !== i); i--) p = d[i - 1], f = t.unitMeasures[p.unitName] / t.unitMeasures[a.unitName], (a.unitCount % f === 0 || t.largest && t.largest - 1 < i - h) && (p.unitCount += a.unitCount / f, a.unitCount = 0)
                }
            var m = [];
            for (i = 0, d.length; r > i && (a = d[i], a.unitCount && m.push(n(a.unitCount, a.unitName, o, t)), m.length !== t.largest); i++);
            return m.length ? t.conjunction && 1 !== m.length ? 2 === m.length ? m.join(t.conjunction) : m.length > 2 ? m.slice(0, -1).join(t.delimiter) + (t.serialComma ? "," : "") + t.conjunction + m.slice(-1) : void 0 : m.join(t.delimiter) : n(0, t.units[t.units.length - 1], o, t)
        }

        function n(e, t, n, i) {
            var r;
            r = void 0 === i.decimal ? n.decimal : i.decimal;
            var a, o = e.toString().replace(".", r),
                s = n[t];
            return a = "function" == typeof s ? s(e) : s, o + i.spacer + a
        }

        function i(e) {
            for (var t, n = 1; n < arguments.length; n++) {
                t = arguments[n];
                for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            }
            return e
        }

        function r(e) {
            return 1 === e ? 0 : Math.floor(e) !== e ? 1 : e % 10 >= 2 && 4 >= e % 10 && 10 > e % 100 ? 2 : 3
        }

        function a(e) {
            return 1 === e ? 0 : Math.floor(e) !== e ? 1 : e % 10 >= 2 && 4 >= e % 10 && !(e % 100 > 10 && 20 > e % 100) ? 2 : 3
        }

        function o(e) {
            return Math.floor(e) !== e ? 2 : e % 100 >= 5 && 20 >= e % 100 || e % 10 >= 5 && 9 >= e % 10 || e % 10 === 0 ? 0 : e % 10 === 1 ? 1 : e > 1 ? 2 : 0
        }

        function s(e) {
            return 1 === e || e % 10 === 1 && e % 100 > 20 ? 0 : Math.floor(e) !== e || e % 10 >= 2 && e % 100 > 20 || e % 10 >= 2 && 10 > e % 100 ? 1 : 2
        }
        var l = {
            ar: {
                y: function (e) {
                    return 1 === e ? "\u0633\u0646\u0629" : "\u0633\u0646\u0648\u0627\u062a"
                },
                mo: function (e) {
                    return 1 === e ? "\u0634\u0647\u0631" : "\u0623\u0634\u0647\u0631"
                },
                w: function (e) {
                    return 1 === e ? "\u0623\u0633\u0628\u0648\u0639" : "\u0623\u0633\u0627\u0628\u064a\u0639"
                },
                d: function (e) {
                    return 1 === e ? "\u064a\u0648\u0645" : "\u0623\u064a\u0627\u0645"
                },
                h: function (e) {
                    return 1 === e ? "\u0633\u0627\u0639\u0629" : "\u0633\u0627\u0639\u0627\u062a"
                },
                m: function (e) {
                    return 1 === e ? "\u062f\u0642\u064a\u0642\u0629" : "\u062f\u0642\u0627\u0626\u0642"
                },
                s: function (e) {
                    return 1 === e ? "\u062b\u0627\u0646\u064a\u0629" : "\u062b\u0648\u0627\u0646\u064a"
                },
                ms: function (e) {
                    return 1 === e ? "\u062c\u0632\u0621 \u0645\u0646 \u0627\u0644\u062b\u0627\u0646\u064a\u0629" : "\u0623\u062c\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"
                },
                decimal: ","
            },
            ca: {
                y: function (e) {
                    return "any" + (1 === e ? "" : "s")
                },
                mo: function (e) {
                    return "mes" + (1 === e ? "" : "os")
                },
                w: function (e) {
                    return "setman" + (1 === e ? "a" : "es")
                },
                d: function (e) {
                    return "di" + (1 === e ? "a" : "es")
                },
                h: function (e) {
                    return "hor" + (1 === e ? "a" : "es")
                },
                m: function (e) {
                    return "minut" + (1 === e ? "" : "s")
                },
                s: function (e) {
                    return "segon" + (1 === e ? "" : "s")
                },
                ms: function (e) {
                    return "milisegon" + (1 === e ? "" : "s")
                },
                decimal: ","
            },
            cs: {
                y: function (e) {
                    return ["rok", "roku", "roky", "let"][r(e)]
                },
                mo: function (e) {
                    return ["m\u011bs\xedc", "m\u011bs\xedce", "m\u011bs\xedce", "m\u011bs\xedc\u016f"][r(e)]
                },
                w: function (e) {
                    return ["t\xfdden", "t\xfddne", "t\xfddny", "t\xfddn\u016f"][r(e)]
                },
                d: function (e) {
                    return ["den", "dne", "dny", "dn\xed"][r(e)]
                },
                h: function (e) {
                    return ["hodina", "hodiny", "hodiny", "hodin"][r(e)]
                },
                m: function (e) {
                    return ["minuta", "minuty", "minuty", "minut"][r(e)]
                },
                s: function (e) {
                    return ["sekunda", "sekundy", "sekundy", "sekund"][r(e)]
                },
                ms: function (e) {
                    return ["milisekunda", "milisekundy", "milisekundy", "milisekund"][r(e)]
                },
                decimal: ","
            },
            da: {
                y: "\xe5r",
                mo: function (e) {
                    return "m\xe5ned" + (1 === e ? "" : "er")
                },
                w: function (e) {
                    return "uge" + (1 === e ? "" : "r")
                },
                d: function (e) {
                    return "dag" + (1 === e ? "" : "e")
                },
                h: function (e) {
                    return "time" + (1 === e ? "" : "r")
                },
                m: function (e) {
                    return "minut" + (1 === e ? "" : "ter")
                },
                s: function (e) {
                    return "sekund" + (1 === e ? "" : "er")
                },
                ms: function (e) {
                    return "millisekund" + (1 === e ? "" : "er")
                },
                decimal: ","
            },
            de: {
                y: function (e) {
                    return "Jahr" + (1 === e ? "" : "e")
                },
                mo: function (e) {
                    return "Monat" + (1 === e ? "" : "e")
                },
                w: function (e) {
                    return "Woche" + (1 === e ? "" : "n")
                },
                d: function (e) {
                    return "Tag" + (1 === e ? "" : "e")
                },
                h: function (e) {
                    return "Stunde" + (1 === e ? "" : "n")
                },
                m: function (e) {
                    return "Minute" + (1 === e ? "" : "n")
                },
                s: function (e) {
                    return "Sekunde" + (1 === e ? "" : "n")
                },
                ms: function (e) {
                    return "Millisekunde" + (1 === e ? "" : "n")
                },
                decimal: ","
            },
            en: {
                y: function (e) {
                    return "year" + (1 === e ? "" : "s")
                },
                mo: function (e) {
                    return "month" + (1 === e ? "" : "s")
                },
                w: function (e) {
                    return "week" + (1 === e ? "" : "s")
                },
                d: function (e) {
                    return "day" + (1 === e ? "" : "s")
                },
                h: function (e) {
                    return "hour" + (1 === e ? "" : "s")
                },
                m: function (e) {
                    return "minute" + (1 === e ? "" : "s")
                },
                s: function (e) {
                    return "second" + (1 === e ? "" : "s")
                },
                ms: function (e) {
                    return "millisecond" + (1 === e ? "" : "s")
                },
                decimal: "."
            },
            es: {
                y: function (e) {
                    return "a\xf1o" + (1 === e ? "" : "s")
                },
                mo: function (e) {
                    return "mes" + (1 === e ? "" : "es")
                },
                w: function (e) {
                    return "semana" + (1 === e ? "" : "s")
                },
                d: function (e) {
                    return "d\xeda" + (1 === e ? "" : "s")
                },
                h: function (e) {
                    return "hora" + (1 === e ? "" : "s")
                },
                m: function (e) {
                    return "minuto" + (1 === e ? "" : "s")
                },
                s: function (e) {
                    return "segundo" + (1 === e ? "" : "s")
                },
                ms: function (e) {
                    return "milisegundo" + (1 === e ? "" : "s")
                },
                decimal: ","
            },
            fi: {
                y: function (e) {
                    return 1 === e ? "vuosi" : "vuotta"
                },
                mo: function (e) {
                    return 1 === e ? "kuukausi" : "kuukautta"
                },
                w: function (e) {
                    return "viikko" + (1 === e ? "" : "a")
                },
                d: function (e) {
                    return "p\xe4iv\xe4" + (1 === e ? "" : "\xe4")
                },
                h: function (e) {
                    return "tunti" + (1 === e ? "" : "a")
                },
                m: function (e) {
                    return "minuutti" + (1 === e ? "" : "a")
                },
                s: function (e) {
                    return "sekunti" + (1 === e ? "" : "a")
                },
                ms: function (e) {
                    return "millisekunti" + (1 === e ? "" : "a")
                },
                decimal: ","
            },
            fr: {
                y: function (e) {
                    return "an" + (e >= 2 ? "s" : "")
                },
                mo: "mois",
                w: function (e) {
                    return "semaine" + (e >= 2 ? "s" : "")
                },
                d: function (e) {
                    return "jour" + (e >= 2 ? "s" : "")
                },
                h: function (e) {
                    return "heure" + (e >= 2 ? "s" : "")
                },
                m: function (e) {
                    return "minute" + (e >= 2 ? "s" : "")
                },
                s: function (e) {
                    return "seconde" + (e >= 2 ? "s" : "")
                },
                ms: function (e) {
                    return "milliseconde" + (e >= 2 ? "s" : "")
                },
                decimal: ","
            },
            gr: {
                y: function (e) {
                    return 1 === e ? "\u03c7\u03c1\u03cc\u03bd\u03bf\u03c2" : "\u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"
                },
                mo: function (e) {
                    return 1 === e ? "\u03bc\u03ae\u03bd\u03b1\u03c2" : "\u03bc\u03ae\u03bd\u03b5\u03c2"
                },
                w: function (e) {
                    return 1 === e ? "\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1" : "\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b5\u03c2"
                },
                d: function (e) {
                    return 1 === e ? "\u03bc\u03ad\u03c1\u03b1" : "\u03bc\u03ad\u03c1\u03b5\u03c2"
                },
                h: function (e) {
                    return 1 === e ? "\u03ce\u03c1\u03b1" : "\u03ce\u03c1\u03b5\u03c2"
                },
                m: function (e) {
                    return 1 === e ? "\u03bb\u03b5\u03c0\u03c4\u03cc" : "\u03bb\u03b5\u03c0\u03c4\u03ac"
                },
                s: function (e) {
                    return 1 === e ? "\u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03bf" : "\u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1"
                },
                ms: function (e) {
                    return 1 === e ? "\u03c7\u03b9\u03bb\u03b9\u03bf\u03c3\u03c4\u03cc \u03c4\u03bf\u03c5 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03bf\u03bb\u03ad\u03c0\u03c4\u03bf\u03c5" : "\u03c7\u03b9\u03bb\u03b9\u03bf\u03c3\u03c4\u03ac \u03c4\u03bf\u03c5 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03bf\u03bb\u03ad\u03c0\u03c4\u03bf\u03c5"
                },
                decimal: ","
            },
            hu: {
                y: "\xe9v",
                mo: "h\xf3nap",
                w: "h\xe9t",
                d: "nap",
                h: "\xf3ra",
                m: "perc",
                s: "m\xe1sodperc",
                ms: "ezredm\xe1sodperc",
                decimal: ","
            },
            id: {
                y: "tahun",
                mo: "bulan",
                w: "minggu",
                d: "hari",
                h: "jam",
                m: "menit",
                s: "detik",
                ms: "milidetik",
                decimal: "."
            },
            is: {
                y: "\xe1r",
                mo: function (e) {
                    return "m\xe1nu\xf0" + (1 === e ? "ur" : "ir")
                },
                w: function (e) {
                    return "vik" + (1 === e ? "a" : "ur")
                },
                d: function (e) {
                    return "dag" + (1 === e ? "ur" : "ar")
                },
                h: function (e) {
                    return "klukkut\xedm" + (1 === e ? "i" : "ar")
                },
                m: function (e) {
                    return "m\xedn\xfat" + (1 === e ? "a" : "ur")
                },
                s: function (e) {
                    return "sek\xfand" + (1 === e ? "a" : "ur")
                },
                ms: function (e) {
                    return "millisek\xfand" + (1 === e ? "a" : "ur")
                },
                decimal: "."
            },
            it: {
                y: function (e) {
                    return "ann" + (1 === e ? "o" : "i")
                },
                mo: function (e) {
                    return "mes" + (1 === e ? "e" : "i")
                },
                w: function (e) {
                    return "settiman" + (1 === e ? "a" : "e")
                },
                d: function (e) {
                    return "giorn" + (1 === e ? "o" : "i")
                },
                h: function (e) {
                    return "or" + (1 === e ? "a" : "e")
                },
                m: function (e) {
                    return "minut" + (1 === e ? "o" : "i")
                },
                s: function (e) {
                    return "second" + (1 === e ? "o" : "i")
                },
                ms: function (e) {
                    return "millisecond" + (1 === e ? "o" : "i")
                },
                decimal: ","
            },
            ja: {
                y: "\u5e74",
                mo: "\u6708",
                w: "\u9031",
                d: "\u65e5",
                h: "\u6642\u9593",
                m: "\u5206",
                s: "\u79d2",
                ms: "\u30df\u30ea\u79d2",
                decimal: "."
            },
            ko: {
                y: "\ub144",
                mo: "\uac1c\uc6d4",
                w: "\uc8fc\uc77c",
                d: "\uc77c",
                h: "\uc2dc\uac04",
                m: "\ubd84",
                s: "\ucd08",
                ms: "\ubc00\ub9ac \ucd08",
                decimal: "."
            },
            lt: {
                y: function (e) {
                    return e % 10 === 0 || e % 100 >= 10 && 20 >= e % 100 ? "met\u0173" : "metai"
                },
                mo: function (e) {
                    return ["m\u0117nuo", "m\u0117nesiai", "m\u0117nesi\u0173"][s(e)]
                },
                w: function (e) {
                    return ["savait\u0117", "savait\u0117s", "savai\u010di\u0173"][s(e)]
                },
                d: function (e) {
                    return ["diena", "dienos", "dien\u0173"][s(e)]
                },
                h: function (e) {
                    return ["valanda", "valandos", "valand\u0173"][s(e)]
                },
                m: function (e) {
                    return ["minut\u0117", "minut\u0117s", "minu\u010di\u0173"][s(e)]
                },
                s: function (e) {
                    return ["sekund\u0117", "sekund\u0117s", "sekund\u017ei\u0173"][s(e)]
                },
                ms: function (e) {
                    return ["milisekund\u0117", "milisekund\u0117s", "milisekund\u017ei\u0173"][s(e)]
                },
                decimal: ","
            },
            ms: {
                y: "tahun",
                mo: "bulan",
                w: "minggu",
                d: "hari",
                h: "jam",
                m: "minit",
                s: "saat",
                ms: "milisaat",
                decimal: "."
            },
            nl: {
                y: "jaar",
                mo: function (e) {
                    return 1 === e ? "maand" : "maanden"
                },
                w: function (e) {
                    return 1 === e ? "week" : "weken"
                },
                d: function (e) {
                    return 1 === e ? "dag" : "dagen"
                },
                h: "uur",
                m: function (e) {
                    return 1 === e ? "minuut" : "minuten"
                },
                s: function (e) {
                    return 1 === e ? "seconde" : "seconden"
                },
                ms: function (e) {
                    return 1 === e ? "milliseconde" : "milliseconden"
                },
                decimal: ","
            },
            no: {
                y: "\xe5r",
                mo: function (e) {
                    return "m\xe5ned" + (1 === e ? "" : "er")
                },
                w: function (e) {
                    return "uke" + (1 === e ? "" : "r")
                },
                d: function (e) {
                    return "dag" + (1 === e ? "" : "er")
                },
                h: function (e) {
                    return "time" + (1 === e ? "" : "r")
                },
                m: function (e) {
                    return "minutt" + (1 === e ? "" : "er")
                },
                s: function (e) {
                    return "sekund" + (1 === e ? "" : "er")
                },
                ms: function (e) {
                    return "millisekund" + (1 === e ? "" : "er")
                },
                decimal: ","
            },
            pl: {
                y: function (e) {
                    return ["rok", "roku", "lata", "lat"][a(e)]
                },
                mo: function (e) {
                    return ["miesi\u0105c", "miesi\u0105ca", "miesi\u0105ce", "miesi\u0119cy"][a(e)]
                },
                w: function (e) {
                    return ["tydzie\u0144", "tygodnia", "tygodnie", "tygodni"][a(e)]
                },
                d: function (e) {
                    return ["dzie\u0144", "dnia", "dni", "dni"][a(e)]
                },
                h: function (e) {
                    return ["godzina", "godziny", "godziny", "godzin"][a(e)]
                },
                m: function (e) {
                    return ["minuta", "minuty", "minuty", "minut"][a(e)]
                },
                s: function (e) {
                    return ["sekunda", "sekundy", "sekundy", "sekund"][a(e)]
                },
                ms: function (e) {
                    return ["milisekunda", "milisekundy", "milisekundy", "milisekund"][a(e)];
                },
                decimal: ","
            },
            pt: {
                y: function (e) {
                    return "ano" + (1 === e ? "" : "s")
                },
                mo: function (e) {
                    return 1 !== e ? "meses" : "m\xeas"
                },
                w: function (e) {
                    return "semana" + (1 === e ? "" : "s")
                },
                d: function (e) {
                    return "dia" + (1 === e ? "" : "s")
                },
                h: function (e) {
                    return "hora" + (1 === e ? "" : "s")
                },
                m: function (e) {
                    return "minuto" + (1 === e ? "" : "s")
                },
                s: function (e) {
                    return "segundo" + (1 === e ? "" : "s")
                },
                ms: function (e) {
                    return "milissegundo" + (1 === e ? "" : "s")
                },
                decimal: ","
            },
            ru: {
                y: function (e) {
                    return ["\u043b\u0435\u0442", "\u0433\u043e\u0434", "\u0433\u043e\u0434\u0430"][o(e)]
                },
                mo: function (e) {
                    return ["\u043c\u0435\u0441\u044f\u0446\u0435\u0432", "\u043c\u0435\u0441\u044f\u0446", "\u043c\u0435\u0441\u044f\u0446\u0430"][o(e)]
                },
                w: function (e) {
                    return ["\u043d\u0435\u0434\u0435\u043b\u044c", "\u043d\u0435\u0434\u0435\u043b\u044f", "\u043d\u0435\u0434\u0435\u043b\u0438"][o(e)]
                },
                d: function (e) {
                    return ["\u0434\u043d\u0435\u0439", "\u0434\u0435\u043d\u044c", "\u0434\u043d\u044f"][o(e)]
                },
                h: function (e) {
                    return ["\u0447\u0430\u0441\u043e\u0432", "\u0447\u0430\u0441", "\u0447\u0430\u0441\u0430"][o(e)]
                },
                m: function (e) {
                    return ["\u043c\u0438\u043d\u0443\u0442", "\u043c\u0438\u043d\u0443\u0442\u0430", "\u043c\u0438\u043d\u0443\u0442\u044b"][o(e)]
                },
                s: function (e) {
                    return ["\u0441\u0435\u043a\u0443\u043d\u0434", "\u0441\u0435\u043a\u0443\u043d\u0434\u0430", "\u0441\u0435\u043a\u0443\u043d\u0434\u044b"][o(e)]
                },
                ms: function (e) {
                    return ["\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434", "\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430", "\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u044b"][o(e)]
                },
                decimal: ","
            },
            uk: {
                y: function (e) {
                    return ["\u0440\u043e\u043a\u0456\u0432", "\u0440\u0456\u043a", "\u0440\u043e\u043a\u0438"][o(e)]
                },
                mo: function (e) {
                    return ["\u043c\u0456\u0441\u044f\u0446\u0456\u0432", "\u043c\u0456\u0441\u044f\u0446\u044c", "\u043c\u0456\u0441\u044f\u0446\u0456"][o(e)]
                },
                w: function (e) {
                    return ["\u043d\u0435\u0434\u0456\u043b\u044c", "\u043d\u0435\u0434\u0456\u043b\u044f", "\u043d\u0435\u0434\u0456\u043b\u0456"][o(e)]
                },
                d: function (e) {
                    return ["\u0434\u043d\u0456\u0432", "\u0434\u0435\u043d\u044c", "\u0434\u043d\u0456"][o(e)]
                },
                h: function (e) {
                    return ["\u0433\u043e\u0434\u0438\u043d", "\u0433\u043e\u0434\u0438\u043d\u0430", "\u0433\u043e\u0434\u0438\u043d\u0438"][o(e)]
                },
                m: function (e) {
                    return ["\u0445\u0432\u0438\u043b\u0438\u043d", "\u0445\u0432\u0438\u043b\u0438\u043d\u0430", "\u0445\u0432\u0438\u043b\u0438\u043d\u0438"][o(e)]
                },
                s: function (e) {
                    return ["\u0441\u0435\u043a\u0443\u043d\u0434", "\u0441\u0435\u043a\u0443\u043d\u0434\u0430", "\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][o(e)]
                },
                ms: function (e) {
                    return ["\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434", "\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434\u0430", "\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][o(e)]
                },
                decimal: ","
            },
            sv: {
                y: "\xe5r",
                mo: function (e) {
                    return "m\xe5nad" + (1 === e ? "" : "er")
                },
                w: function (e) {
                    return "veck" + (1 === e ? "a" : "or")
                },
                d: function (e) {
                    return "dag" + (1 === e ? "" : "ar")
                },
                h: function (e) {
                    return "timm" + (1 === e ? "e" : "ar")
                },
                m: function (e) {
                    return "minut" + (1 === e ? "" : "er")
                },
                s: function (e) {
                    return "sekund" + (1 === e ? "" : "er")
                },
                ms: function (e) {
                    return "millisekund" + (1 === e ? "" : "er")
                },
                decimal: ","
            },
            tr: {
                y: "y\u0131l",
                mo: "ay",
                w: "hafta",
                d: "g\xfcn",
                h: "saat",
                m: "dakika",
                s: "saniye",
                ms: "milisaniye",
                decimal: ","
            },
            vi: {
                y: "n\u0103m",
                mo: "th\xe1ng",
                w: "tu\u1ea7n",
                d: "ng\xe0y",
                h: "gi\u1edd",
                m: "ph\xfat",
                s: "gi\xe2y",
                ms: "mili gi\xe2y",
                decimal: ","
            },
            zh_CN: {
                y: "\u5e74",
                mo: "\u4e2a\u6708",
                w: "\u5468",
                d: "\u5929",
                h: "\u5c0f\u65f6",
                m: "\u5206\u949f",
                s: "\u79d2",
                ms: "\u6beb\u79d2",
                decimal: "."
            },
            zh_TW: {
                y: "\u5e74",
                mo: "\u500b\u6708",
                w: "\u5468",
                d: "\u5929",
                h: "\u5c0f\u6642",
                m: "\u5206\u9418",
                s: "\u79d2",
                ms: "\u6beb\u79d2",
                decimal: "."
            }
        },
            c = e({});
        c.getSupportedLanguages = function () {
            var e = [];
            for (var t in l) l.hasOwnProperty(t) && e.push(t);
            return e
        }, c.humanizer = e, "function" == typeof define && define.amd ? define(function () {
            return c
        }) : "undefined" != typeof module && module.exports ? module.exports = c : this.humanizeDuration = c
    }(),
    function () {
        function e(e, t, n) {
            e.toggleClass("hide", 0 === n)
        }

        function t(e) {
            for (var t = e.$parent.find(e.checkboxSelector).filter(":not(:disabled)").filter(":visible"), n = Array.prototype.slice.call(arguments, 1), i = 0; i < n.length; ++i) t = t.filter(n[i]);
            return t
        }

        function n(e, t, n, i) {
            var r = n.filter('[data-rowid="' + t + '"]').length,
                a = i.filter('[data-rowid="' + t + '"]').length;
            e.prop("indeterminate", r > 0 && a > 0).prop("checked", 0 === a && r > 0)
        }

        function i(e, i) {
            var r = t(i, ":checked"),
                a = r.length,
                o = t(i, ":not(:checked)"),
                s = o.length;
            if (i.$parent.find(".select-all:not([data-rowid])").prop("indeterminate", a > 0 && s > 0).prop("checked", 0 === s && a > 0), i.toggleActionList(i.$action_list, i.$parent, a), e) {
                var l = $(e),
                    c = l.data("rowid");
                c && n(i.$parent.find('.select-all[data-rowid="' + c + '"]'), c, r, o)
            } else i.$parent.find(".select-all[data-rowid]").each(function () {
                var e = $(this);
                n(e, e.data("rowid"), r, o)
            })
        }

        function r(e) {
            return t(e, ":checked").map(function (e, t) {
                return t.value
            }).toArray()
        }

        function a(e) {
            var n = e.data("batchActionOptions");
            n && (i(null, n), n.toggleActionList(n.$action_list, n.$parent, t(n, ":checked").length))
        }

        function o(n, a) {
            var o = n.data("batchActionOptions");
            if (!o) {
                var l = n.data("action-list"),
                    c = $.extend({
                        toggleActionList: e,
                        checkboxSelector: s,
                        beforeDropdown: function () { },
                        ids_key: "ids"
                    }, a, {
                        $parent: n,
                        $action_list: $(l)
                    });
                n.data("batchActionOptions", c), 1 === c.$parent.length && 0 !== c.$action_list.length && (c.$parent.checkboxes("range", !0), c.$parent.on("click", ".select-all", function () {
                    var e = $(this),
                        n = e.data("rowid"),
                        i = t(c);
                    n && (i = i.filter('[data-rowid="' + n + '"]')), i.prop("checked", this.checked).trigger("change")
                }).on("change", c.checkboxSelector, function (e) {
                    i(this, c)
                }), c.$action_list.on("click", ".batch-action-dialog", function (e) {
                    if (e.preventDefault(), $(this).is("[disabled]")) return void e.stopImmediatePropagation();
                    var t = $(this).attr("href");
                    t += -1 === t.indexOf("?") ? "?" : "&";
                    var n = {};
                    n[c.ids_key] = r(c), t += $.param(n), AjaxDialog.run(t)
                }).on("click", ".batch-action", function (e) {
                    $(this).is("[disabled]") && (e.preventDefault(), e.stopImmediatePropagation())
                }).on("show.bs.dropdown", function () {
                    c.beforeDropdown(c.$action_list, c.$parent, t(c, ":checked"))
                }).on("ajax:before", ".batch-action", function (e, t) {
                    var n = {};
                    n[c.ids_key] = r(c), c.$parent.closest(".table-wrapper").loadingCurtain("show"), $(this).data("params", n), c.$action_list.removeClass("open").find(".batch-toggle").addClass("disabled")
                }).on("ajax:error", ".batch-action", function (e, t, n, i) {
                    try {
                        AjaxDialog.displayNotifications($.parseJSON(t.responseText))
                    } catch (r) {
                        AjaxDialog.displayNotifications({
                            alert: "Unexpected error occured."
                        })
                    }
                    c.$parent.closest(".table-wrapper").loadingCurtain("hide")
                }).on("ajax:success", ".batch-action", function (e, n, r, a) {
                    "reload" === n.action ? window.location.reload(!0) : c.$parent.closest(".table-wrapper").loadingCurtain("hide"), t(c).prop("checked", !1), i(null, c), AjaxDialog.displayNotifications(n)
                }).on("ajax:complete", ".batch-action", function (e, t, n, i) {
                    c.$action_list.find(".batch-toggle").removeClass("disabled")
                }), i(null, c), c.toggleActionList(c.$action_list, c.$parent, t(c, ":checked").length))
            }
        }
        var s = 'input[type="checkbox"][name="ids[]"]';
        window.setupBatchActions = o, window.refreshBatchActions = a
    }(),
    function (e, t, n, i) {
        "use strict";

        function r(t, n) {
            this.element = e(t), this.settings = e.extend({}, o, n), this._defaults = o, this._name = a, this.init()
        }
        var a = "loadingCurtain",
            o = {
                hideClass: "hidden"
            },
            s = r.prototype;
        s.init = function () {
            this.curtain = e('<div class="curtain">         <div class="spinner-wrapper">           <div class="spinner"></div>         </div>       </div>').appendTo(this.element)
        }, s.show = function () {
            this.curtain.removeClass(this.settings.hideClass)
        }, s.hide = function () {
            this.curtain.addClass(this.settings.hideClass)
        }, e.fn[a] = function (t, n) {
            return this.each(function () {
                var i = e(this).data("plugin_" + a);
                if (!i) {
                    var s = e.extend({}, o, "object" == typeof t && t ? t : {});
                    i = new r(this, s), e(this).data("plugin_" + a, i)
                }
                "string" == typeof t && ("undefined" == typeof i[t] && e.error("Method " + t + " does not exist on jQuery.loadingCurtain"), i[t](n))
            })
        }
    }(jQuery, window, document);
var widgetGraph = function (e) {
    return {
        formatData: function (t) {
            var n = [];
            return e.each(t, function (e, t) {
                n.push({
                    x: parseInt(t.x),
                    y: parseInt(t.y)
                })
            }), n
        },
        loadGraph: function (t) {
            var n = t,
                i = e(n).data("graph"),
                r = "#1dcbff",
                a = "#7365ff";
            if (i && i.length > 0) {
                var o = new Rickshaw.Graph({
                    element: n,
                    width: 80,
                    height: 20,
                    renderer: "area",
                    interpolation: "linear",
                    stroke: !0,
                    series: [{
                        data: widgetGraph.formatData(i),
                        stroke: !0
                    }]
                });
                o.render();
                var s = d3.select(n).select("svg"),
                    l = s.append("defs").append("linearGradient").attr("id", "areaGradient-blue").attr("x1", "0%").attr("y1", "0%").attr("x2", "0%").attr("y2", "100%");
                l.append("stop").attr("offset", "0%").attr("stop-color", r).attr("stop-opacity", 1), l.append("stop").attr("offset", "100%").attr("stop-color", "white").attr("stop-opacity", 1);
                var c = s.append("defs").append("linearGradient").attr("id", "areaGradient-purple").attr("x1", "0%").attr("y1", "0%").attr("x2", "0%").attr("y2", "100%");
                c.append("stop").attr("offset", "0%").attr("stop-color", a).attr("stop-opacity", 1), c.append("stop").attr("offset", "100%").attr("stop-color", "white").attr("stop-opacity", 1)
            }
        },
        initMain: function (e) {
            widgetGraph.loadGraph(e)
        }
    }
}(jQuery);
$(function () {
    $(".widget-graph").each(function () {
        widgetGraph.initMain(this)
    })
}),
    function () {
        window.WidgetBatchLoad = {
            defaultBatchSize: 6,
            _lazyWidgetIds: [],
            initialize: function () {
                if (0 !== $(".dashboard.widgets").length) {
                    WidgetBatchLoad.lazyWidgetIds = WidgetBatchLoad._findLazyWidgetIds();
                    var e = Dashboard.widgetsList("small"),
                        t = WidgetBatchLoad._fetchOrderedLargeWidgetIds();
                    WidgetBatchLoad._loadWidgets(e, null), WidgetBatchLoad._loadWidgets(t, WidgetBatchLoad.defaultBatchSize)
                }
            },
            _findLazyWidgetIds: function () {
                var e = $(".widget-common[data-widget-load-lazily='true']");
                return $.map(e, function (e) {
                    return $(e).data("widgetId")
                })
            },
            _loadWidgets: function (e, t) {
                var n = function (e) {
                    return WidgetBatchLoad.lazyWidgetIds.includes(e)
                },
                    i = e.filter(n);
                if (!(i.length <= 0)) {
                    $(".shimmer-placeholder").addClass("shimmer-animation");
                    var r = WidgetBatchLoad._buildBatches(i, t);
                    WidgetBatchLoad._chainBatchRequests(r)
                }
            },
            _fetchOrderedLargeWidgetIds: function () {
                var e = function (e, t) {
                    for (var n = Math.max(e.length, t.length), i = [], r = 0; n > r; r++) {
                        var a = e[r],
                            o = t[r];
                        void 0 !== a && i.push(a), void 0 !== o && i.push(o)
                    }
                    return i
                },
                    t = Dashboard.widgetsListByColumnId("left"),
                    n = Dashboard.widgetsListByColumnId("right"),
                    i = e(t, n);
                return i
            },
            _buildBatches: function (e, t) {
                return null !== t ? Array.from({
                    length: Math.ceil(e.length / t)
                }, function (n, i) {
                    return e.slice(i * t, i * t + t)
                }) : [e]
            },
            _getBatch: function (e) {
                var t = $("[data-batch-widget-url]").data("batch-widget-url");
                return $.get(t, {
                    "widget_ids[]": e
                })
            },
            _renderWidgets: function (e) {
                e.forEach(function (e, t) {
                    var n = $(".widget-common[data-widget-id=" + e.id + "]"),
                        i = Dashboard.prepWidgetPayload(e.html);
                    n.replaceWith(i), document.dispatchEvent(new Event("add_widget:" + e.id))
                })
            },
            _chainBatchRequests: function (e) {
                var t = e.shift();
                t ? WidgetBatchLoad._getBatch(t).then(function (t) {
                    WidgetBatchLoad._renderWidgets(t), WidgetBatchLoad._chainBatchRequests(e), document.dispatchEvent(new Event("readystatechange"))
                }) : Promise.resolve()
            }
        }, $(document).ready(WidgetBatchLoad.initialize)
    }(),
    function (e) {
        var t;
        if ("function" == typeof define && define.amd && (define(e), t = !0), "object" == typeof exports && (module.exports = e(), t = !0), !t) {
            var n = window.Cookies,
                i = window.Cookies = e();
            i.noConflict = function () {
                return window.Cookies = n, i
            }
        }
    }(function () {
        function e() {
            for (var e = 0, t = {}; e < arguments.length; e++) {
                var n = arguments[e];
                for (var i in n) t[i] = n[i]
            }
            return t
        }

        function t(e) {
            return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
        }

        function n(i) {
            function r() { }

            function a(t, n, a) {
                if ("undefined" != typeof document) {
                    a = e({
                        path: "/"
                    }, r.defaults, a), "number" == typeof a.expires && (a.expires = new Date(1 * new Date + 864e5 * a.expires)), a.expires = a.expires ? a.expires.toUTCString() : "";
                    try {
                        var o = JSON.stringify(n);
                        /^[\{\[]/.test(o) && (n = o)
                    } catch (s) { }
                    n = i.write ? i.write(n, t) : encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), t = encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                    var l = "";
                    for (var c in a) a[c] && (l += "; " + c, a[c] !== !0 && (l += "=" + a[c].split(";")[0]));
                    return document.cookie = t + "=" + n + l
                }
            }

            function o(e, n) {
                if ("undefined" != typeof document) {
                    for (var r = {}, a = document.cookie ? document.cookie.split("; ") : [], o = 0; o < a.length; o++) {
                        var s = a[o].split("="),
                            l = s.slice(1).join("=");
                        n || '"' !== l.charAt(0) || (l = l.slice(1, -1));
                        try {
                            var c = t(s[0]);
                            if (l = (i.read || i)(l, c) || t(l), n) try {
                                l = JSON.parse(l)
                            } catch (u) { }
                            if (r[c] = l, e === c) break
                        } catch (u) { }
                    }
                    return e ? r[e] : r
                }
            }
            return r.set = a, r.get = function (e) {
                return o(e, !1)
            }, r.getJSON = function (e) {
                return o(e, !0)
            }, r.remove = function (t, n) {
                a(t, "", e(n, {
                    expires: -1
                }))
            }, r.defaults = {}, r.withConverter = n, r
        }
        return n(function () { })
    }),
    function (e) {
        var t = function () {
            "use strict";
            var e = "s",
                n = {
                    DAY: 864e5,
                    HOUR: 36e5,
                    MINUTE: 6e4,
                    SECOND: 1e3,
                    BASELINE_YEAR: 2014,
                    MAX_SCORE: 864e6,
                    AMBIGUITIES: {
                        "America/Denver": ["America/Mazatlan"],
                        "Europe/London": ["Africa/Casablanca"],
                        "America/Chicago": ["America/Mexico_City"],
                        "America/Asuncion": ["America/Campo_Grande", "America/Santiago"],
                        "America/Montevideo": ["America/Sao_Paulo", "America/Santiago"],
                        "Asia/Beirut": ["Asia/Amman", "Asia/Jerusalem", "Europe/Helsinki", "Asia/Damascus", "Africa/Cairo", "Asia/Gaza", "Europe/Minsk"],
                        "Pacific/Auckland": ["Pacific/Fiji"],
                        "America/Los_Angeles": ["America/Santa_Isabel"],
                        "America/New_York": ["America/Havana"],
                        "America/Halifax": ["America/Goose_Bay"],
                        "America/Godthab": ["America/Miquelon"],
                        "Asia/Dubai": ["Asia/Yerevan"],
                        "Asia/Jakarta": ["Asia/Krasnoyarsk"],
                        "Asia/Shanghai": ["Asia/Irkutsk", "Australia/Perth"],
                        "Australia/Sydney": ["Australia/Lord_Howe"],
                        "Asia/Tokyo": ["Asia/Yakutsk"],
                        "Asia/Dhaka": ["Asia/Omsk"],
                        "Asia/Baku": ["Asia/Yerevan"],
                        "Australia/Brisbane": ["Asia/Vladivostok"],
                        "Pacific/Noumea": ["Asia/Vladivostok"],
                        "Pacific/Majuro": ["Asia/Kamchatka", "Pacific/Fiji"],
                        "Pacific/Tongatapu": ["Pacific/Apia"],
                        "Asia/Baghdad": ["Europe/Minsk", "Europe/Moscow"],
                        "Asia/Karachi": ["Asia/Yekaterinburg"],
                        "Africa/Johannesburg": ["Asia/Gaza", "Africa/Cairo"]
                    }
                },
                i = function (e) {
                    var t = -e.getTimezoneOffset();
                    return null !== t ? t : 0
                },
                r = function () {
                    var t = i(new Date(n.BASELINE_YEAR, 0, 2)),
                        r = i(new Date(n.BASELINE_YEAR, 5, 2)),
                        a = t - r;
                    return 0 > a ? t + ",1" : a > 0 ? r + ",1," + e : t + ",0"
                },
                a = function (e) {
                    for (var t = new Date(e, 0, 1, 0, 0, 1, 0).getTime(), n = new Date(e, 12, 31, 23, 59, 59).getTime(), i = t, r = new Date(i).getTimezoneOffset(), a = null, s = null; n - 864e5 > i;) {
                        var l = new Date(i),
                            c = l.getTimezoneOffset();
                        c !== r && (r > c && (a = l), c > r && (s = l), r = c), i += 864e5
                    }
                    return a && s ? {
                        s: o(a).getTime(),
                        e: o(s).getTime()
                    } : !1
                },
                o = function d(e, t, i) {
                    "undefined" == typeof t && (t = n.DAY, i = n.HOUR);
                    for (var r = new Date(e.getTime() - t).getTime(), a = e.getTime() + t, o = new Date(r).getTimezoneOffset(), s = r, l = null; a - i > s;) {
                        var c = new Date(s),
                            u = c.getTimezoneOffset();
                        if (u !== o) {
                            l = c;
                            break
                        }
                        s += i
                    }
                    return t === n.DAY ? d(l, n.HOUR, n.MINUTE) : t === n.HOUR ? d(l, n.MINUTE, n.SECOND) : l
                },
                s = function (e, t, n, i) {
                    if ("N/A" !== n) return n;
                    if ("Asia/Beirut" === t) {
                        if ("Africa/Cairo" === i.name && 13983768e5 === e[6].s && 14116788e5 === e[6].e) return 0;
                        if ("Asia/Jerusalem" === i.name && 13959648e5 === e[6].s && 14118588e5 === e[6].e) return 0
                    } else if ("America/Santiago" === t) {
                        if ("America/Asuncion" === i.name && 14124816e5 === e[6].s && 1397358e6 === e[6].e) return 0;
                        if ("America/Campo_Grande" === i.name && 14136912e5 === e[6].s && 13925196e5 === e[6].e) return 0
                    } else if ("America/Montevideo" === t) {
                        if ("America/Sao_Paulo" === i.name && 14136876e5 === e[6].s && 1392516e6 === e[6].e) return 0
                    } else if ("Pacific/Auckland" === t && "Pacific/Fiji" === i.name && 14142456e5 === e[6].s && 13961016e5 === e[6].e) return 0;
                    return n
                },
                l = function (e, i) {
                    for (var r = function (t) {
                        for (var r = 0, a = 0; a < e.length; a++)
                            if (t.rules[a] && e[a]) {
                                if (!(e[a].s >= t.rules[a].s && e[a].e <= t.rules[a].e)) {
                                    r = "N/A";
                                    break
                                }
                                if (r = 0, r += Math.abs(e[a].s - t.rules[a].s), r += Math.abs(t.rules[a].e - e[a].e), r > n.MAX_SCORE) {
                                    r = "N/A";
                                    break
                                }
                            } return r = s(e, i, r, t)
                    }, a = {}, o = t.olson.dst_rules.zones, l = o.length, c = n.AMBIGUITIES[i], u = 0; l > u; u++) {
                        var d = o[u],
                            h = r(o[u]);
                        "N/A" !== h && (a[d.name] = h)
                    }
                    for (var f in a)
                        if (a.hasOwnProperty(f))
                            for (var p = 0; p < c.length; p++)
                                if (c[p] === f) return f;
                    return i
                },
                c = function (e) {
                    var n = function () {
                        for (var e = [], n = 0; n < t.olson.dst_rules.years.length; n++) {
                            var i = a(t.olson.dst_rules.years[n]);
                            e.push(i)
                        }
                        return e
                    },
                        i = function (e) {
                            for (var t = 0; t < e.length; t++)
                                if (e[t] !== !1) return !0;
                            return !1
                        },
                        r = n(),
                        o = i(r);
                    return o ? l(r, e) : e
                },
                u = function () {
                    var e = !1;
                    return e || (e = t.olson.timezones[r()], "undefined" != typeof n.AMBIGUITIES[e] && (e = c(e))), {
                        name: function () {
                            return e
                        }
                    }
                };
            return {
                determine: u
            }
        }();
        t.olson = t.olson || {}, t.olson.timezones = {
            "-720,0": "Etc/GMT+12",
            "-660,0": "Pacific/Pago_Pago",
            "-660,1,s": "Pacific/Apia",
            "-600,1": "America/Adak",
            "-600,0": "Pacific/Honolulu",
            "-570,0": "Pacific/Marquesas",
            "-540,0": "Pacific/Gambier",
            "-540,1": "America/Anchorage",
            "-480,1": "America/Los_Angeles",
            "-480,0": "Pacific/Pitcairn",
            "-420,0": "America/Phoenix",
            "-420,1": "America/Denver",
            "-360,0": "America/Guatemala",
            "-360,1": "America/Chicago",
            "-360,1,s": "Pacific/Easter",
            "-300,0": "America/Bogota",
            "-300,1": "America/New_York",
            "-270,0": "America/Caracas",
            "-240,1": "America/Halifax",
            "-240,0": "America/Santo_Domingo",
            "-240,1,s": "America/Asuncion",
            "-210,1": "America/St_Johns",
            "-180,1": "America/Godthab",
            "-180,0": "America/Argentina/Buenos_Aires",
            "-180,1,s": "America/Montevideo",
            "-120,0": "America/Noronha",
            "-120,1": "America/Noronha",
            "-60,1": "Atlantic/Azores",
            "-60,0": "Atlantic/Cape_Verde",
            "0,0": "UTC",
            "0,1": "Europe/London",
            "60,1": "Europe/Berlin",
            "60,0": "Africa/Lagos",
            "60,1,s": "Africa/Windhoek",
            "120,1": "Asia/Beirut",
            "120,0": "Africa/Johannesburg",
            "180,0": "Asia/Baghdad",
            "180,1": "Europe/Moscow",
            "210,1": "Asia/Tehran",
            "240,0": "Asia/Dubai",
            "240,1": "Asia/Baku",
            "270,0": "Asia/Kabul",
            "300,1": "Asia/Yekaterinburg",
            "300,0": "Asia/Karachi",
            "330,0": "Asia/Kolkata",
            "345,0": "Asia/Kathmandu",
            "360,0": "Asia/Dhaka",
            "360,1": "Asia/Omsk",
            "390,0": "Asia/Rangoon",
            "420,1": "Asia/Krasnoyarsk",
            "420,0": "Asia/Jakarta",
            "480,0": "Asia/Shanghai",
            "480,1": "Asia/Irkutsk",
            "525,0": "Australia/Eucla",
            "525,1,s": "Australia/Eucla",
            "540,1": "Asia/Yakutsk",
            "540,0": "Asia/Tokyo",
            "570,0": "Australia/Darwin",
            "570,1,s": "Australia/Adelaide",
            "600,0": "Australia/Brisbane",
            "600,1": "Asia/Vladivostok",
            "600,1,s": "Australia/Sydney",
            "630,1,s": "Australia/Lord_Howe",
            "660,1": "Asia/Kamchatka",
            "660,0": "Pacific/Noumea",
            "690,0": "Pacific/Norfolk",
            "720,1,s": "Pacific/Auckland",
            "720,0": "Pacific/Majuro",
            "765,1,s": "Pacific/Chatham",
            "780,0": "Pacific/Tongatapu",
            "780,1,s": "Pacific/Apia",
            "840,0": "Pacific/Kiritimati"
        }, t.olson.dst_rules = {
            years: [2008, 2009, 2010, 2011, 2012, 2013, 2014],
            zones: [{
                name: "Africa/Cairo",
                rules: [{
                    e: 12199572e5,
                    s: 12090744e5
                }, {
                    e: 1250802e6,
                    s: 1240524e6
                }, {
                    e: 12858804e5,
                    s: 12840696e5
                }, !1, !1, !1, {
                    e: 14116788e5,
                    s: 1406844e6
                }]
            }, {
                name: "Africa/Casablanca",
                rules: [{
                    e: 12202236e5,
                    s: 12122784e5
                }, {
                    e: 12508092e5,
                    s: 12438144e5
                }, {
                    e: 1281222e6,
                    s: 12727584e5
                }, {
                    e: 13120668e5,
                    s: 13017888e5
                }, {
                    e: 13489704e5,
                    s: 1345428e6
                }, {
                    e: 13828392e5,
                    s: 13761e8
                }, {
                    e: 14142888e5,
                    s: 14069448e5
                }]
            }, {
                name: "America/Asuncion",
                rules: [{
                    e: 12050316e5,
                    s: 12243888e5
                }, {
                    e: 12364812e5,
                    s: 12558384e5
                }, {
                    e: 12709548e5,
                    s: 12860784e5
                }, {
                    e: 13024044e5,
                    s: 1317528e6
                }, {
                    e: 1333854e6,
                    s: 13495824e5
                }, {
                    e: 1364094e6,
                    s: 1381032e6
                }, {
                    e: 13955436e5,
                    s: 14124816e5
                }]
            }, {
                name: "America/Campo_Grande",
                rules: [{
                    e: 12032172e5,
                    s: 12243888e5
                }, {
                    e: 12346668e5,
                    s: 12558384e5
                }, {
                    e: 12667212e5,
                    s: 1287288e6
                }, {
                    e: 12981708e5,
                    s: 13187376e5
                }, {
                    e: 13302252e5,
                    s: 1350792e6
                }, {
                    e: 136107e7,
                    s: 13822416e5
                }, {
                    e: 13925196e5,
                    s: 14136912e5
                }]
            }, {
                name: "America/Goose_Bay",
                rules: [{
                    e: 122559486e4,
                    s: 120503526e4
                }, {
                    e: 125704446e4,
                    s: 123648486e4
                }, {
                    e: 128909886e4,
                    s: 126853926e4
                }, {
                    e: 13205556e5,
                    s: 129998886e4
                }, {
                    e: 13520052e5,
                    s: 13314456e5
                }, {
                    e: 13834548e5,
                    s: 13628952e5
                }, {
                    e: 14149044e5,
                    s: 13943448e5
                }]
            }, {
                name: "America/Havana",
                rules: [{
                    e: 12249972e5,
                    s: 12056436e5
                }, {
                    e: 12564468e5,
                    s: 12364884e5
                }, {
                    e: 12885012e5,
                    s: 12685428e5
                }, {
                    e: 13211604e5,
                    s: 13005972e5
                }, {
                    e: 13520052e5,
                    s: 13332564e5
                }, {
                    e: 13834548e5,
                    s: 13628916e5
                }, {
                    e: 14149044e5,
                    s: 13943412e5
                }]
            }, {
                name: "America/Mazatlan",
                rules: [{
                    e: 1225008e6,
                    s: 12074724e5
                }, {
                    e: 12564576e5,
                    s: 1238922e6
                }, {
                    e: 1288512e6,
                    s: 12703716e5
                }, {
                    e: 13199616e5,
                    s: 13018212e5
                }, {
                    e: 13514112e5,
                    s: 13332708e5
                }, {
                    e: 13828608e5,
                    s: 13653252e5
                }, {
                    e: 14143104e5,
                    s: 13967748e5
                }]
            }, {
                name: "America/Mexico_City",
                rules: [{
                    e: 12250044e5,
                    s: 12074688e5
                }, {
                    e: 1256454e6,
                    s: 12389184e5
                }, {
                    e: 12885084e5,
                    s: 1270368e6
                }, {
                    e: 1319958e6,
                    s: 13018176e5
                }, {
                    e: 13514076e5,
                    s: 13332672e5
                }, {
                    e: 13828572e5,
                    s: 13653216e5
                }, {
                    e: 14143068e5,
                    s: 13967712e5
                }]
            }, {
                name: "America/Miquelon",
                rules: [{
                    e: 12255984e5,
                    s: 12050388e5
                }, {
                    e: 1257048e6,
                    s: 12364884e5
                }, {
                    e: 12891024e5,
                    s: 12685428e5
                }, {
                    e: 1320552e6,
                    s: 12999924e5
                }, {
                    e: 13520016e5,
                    s: 1331442e6
                }, {
                    e: 13834512e5,
                    s: 13628916e5
                }, {
                    e: 14149008e5,
                    s: 13943412e5
                }]
            }, {
                name: "America/Santa_Isabel",
                rules: [{
                    e: 12250116e5,
                    s: 1207476e6
                }, {
                    e: 12564612e5,
                    s: 12389256e5
                }, {
                    e: 12885156e5,
                    s: 12703752e5
                }, {
                    e: 13199652e5,
                    s: 13018248e5
                }, {
                    e: 13514148e5,
                    s: 13332744e5
                }, {
                    e: 13828644e5,
                    s: 13653288e5
                }, {
                    e: 1414314e6,
                    s: 13967784e5
                }]
            }, {
                name: "America/Santiago",
                rules: [{
                    e: 1206846e6,
                    s: 1223784e6
                }, {
                    e: 1237086e6,
                    s: 12552336e5
                }, {
                    e: 127035e7,
                    s: 12866832e5
                }, {
                    e: 13048236e5,
                    s: 13138992e5
                }, {
                    e: 13356684e5,
                    s: 13465584e5
                }, {
                    e: 1367118e6,
                    s: 13786128e5
                }, {
                    e: 13985676e5,
                    s: 14100624e5
                }]
            }, {
                name: "America/Sao_Paulo",
                rules: [{
                    e: 12032136e5,
                    s: 12243852e5
                }, {
                    e: 12346632e5,
                    s: 12558348e5
                }, {
                    e: 12667176e5,
                    s: 12872844e5
                }, {
                    e: 12981672e5,
                    s: 1318734e6
                }, {
                    e: 13302216e5,
                    s: 13507884e5
                }, {
                    e: 13610664e5,
                    s: 1382238e6
                }, {
                    e: 1392516e6,
                    s: 14136876e5
                }]
            }, {
                name: "Asia/Amman",
                rules: [{
                    e: 1225404e6,
                    s: 12066552e5
                }, {
                    e: 12568536e5,
                    s: 12381048e5
                }, {
                    e: 12883032e5,
                    s: 12695544e5
                }, {
                    e: 13197528e5,
                    s: 13016088e5
                }, !1, !1, {
                    e: 14147064e5,
                    s: 13959576e5
                }]
            }, {
                name: "Asia/Damascus",
                rules: [{
                    e: 12254868e5,
                    s: 120726e7
                }, {
                    e: 125685e7,
                    s: 12381048e5
                }, {
                    e: 12882996e5,
                    s: 12701592e5
                }, {
                    e: 13197492e5,
                    s: 13016088e5
                }, {
                    e: 13511988e5,
                    s: 13330584e5
                }, {
                    e: 13826484e5,
                    s: 1364508e6
                }, {
                    e: 14147028e5,
                    s: 13959576e5
                }]
            }, {
                name: "Asia/Dubai",
                rules: [!1, !1, !1, !1, !1, !1, !1]
            }, {
                name: "Asia/Gaza",
                rules: [{
                    e: 12199572e5,
                    s: 12066552e5
                }, {
                    e: 12520152e5,
                    s: 12381048e5
                }, {
                    e: 1281474e6,
                    s: 126964086e4
                }, {
                    e: 1312146e6,
                    s: 130160886e4
                }, {
                    e: 13481784e5,
                    s: 13330584e5
                }, {
                    e: 13802292e5,
                    s: 1364508e6
                }, {
                    e: 1414098e6,
                    s: 13959576e5
                }]
            }, {
                name: "Asia/Irkutsk",
                rules: [{
                    e: 12249576e5,
                    s: 12068136e5
                }, {
                    e: 12564072e5,
                    s: 12382632e5
                }, {
                    e: 12884616e5,
                    s: 12697128e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Jerusalem",
                rules: [{
                    e: 12231612e5,
                    s: 12066624e5
                }, {
                    e: 1254006e6,
                    s: 1238112e6
                }, {
                    e: 1284246e6,
                    s: 12695616e5
                }, {
                    e: 131751e7,
                    s: 1301616e6
                }, {
                    e: 13483548e5,
                    s: 13330656e5
                }, {
                    e: 13828284e5,
                    s: 13645152e5
                }, {
                    e: 1414278e6,
                    s: 13959648e5
                }]
            }, {
                name: "Asia/Kamchatka",
                rules: [{
                    e: 12249432e5,
                    s: 12067992e5
                }, {
                    e: 12563928e5,
                    s: 12382488e5
                }, {
                    e: 12884508e5,
                    s: 12696984e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Krasnoyarsk",
                rules: [{
                    e: 12249612e5,
                    s: 12068172e5
                }, {
                    e: 12564108e5,
                    s: 12382668e5
                }, {
                    e: 12884652e5,
                    s: 12697164e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Omsk",
                rules: [{
                    e: 12249648e5,
                    s: 12068208e5
                }, {
                    e: 12564144e5,
                    s: 12382704e5
                }, {
                    e: 12884688e5,
                    s: 126972e7
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Vladivostok",
                rules: [{
                    e: 12249504e5,
                    s: 12068064e5
                }, {
                    e: 12564e8,
                    s: 1238256e6
                }, {
                    e: 12884544e5,
                    s: 12697056e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Yakutsk",
                rules: [{
                    e: 1224954e6,
                    s: 120681e7
                }, {
                    e: 12564036e5,
                    s: 12382596e5
                }, {
                    e: 1288458e6,
                    s: 12697092e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Yekaterinburg",
                rules: [{
                    e: 12249684e5,
                    s: 12068244e5
                }, {
                    e: 1256418e6,
                    s: 1238274e6
                }, {
                    e: 12884724e5,
                    s: 12697236e5
                }, !1, !1, !1, !1]
            }, {
                name: "Asia/Yerevan",
                rules: [{
                    e: 1224972e6,
                    s: 1206828e6
                }, {
                    e: 12564216e5,
                    s: 12382776e5
                }, {
                    e: 1288476e6,
                    s: 12697272e5
                }, {
                    e: 13199256e5,
                    s: 13011768e5
                }, !1, !1, !1]
            }, {
                name: "Australia/Lord_Howe",
                rules: [{
                    e: 12074076e5,
                    s: 12231342e5
                }, {
                    e: 12388572e5,
                    s: 12545838e5
                }, {
                    e: 12703068e5,
                    s: 12860334e5
                }, {
                    e: 13017564e5,
                    s: 1317483e6
                }, {
                    e: 1333206e6,
                    s: 13495374e5
                }, {
                    e: 13652604e5,
                    s: 1380987e6
                }, {
                    e: 139671e7,
                    s: 14124366e5
                }]
            }, {
                name: "Australia/Perth",
                rules: [{
                    e: 12068136e5,
                    s: 12249576e5
                }, !1, !1, !1, !1, !1, !1]
            }, {
                name: "Europe/Helsinki",
                rules: [{
                    e: 12249828e5,
                    s: 12068388e5
                }, {
                    e: 12564324e5,
                    s: 12382884e5
                }, {
                    e: 12884868e5,
                    s: 1269738e6
                }, {
                    e: 13199364e5,
                    s: 13011876e5
                }, {
                    e: 1351386e6,
                    s: 13326372e5
                }, {
                    e: 13828356e5,
                    s: 13646916e5
                }, {
                    e: 14142852e5,
                    s: 13961412e5
                }]
            }, {
                name: "Europe/Minsk",
                rules: [{
                    e: 12249792e5,
                    s: 12068352e5
                }, {
                    e: 12564288e5,
                    s: 12382848e5
                }, {
                    e: 12884832e5,
                    s: 12697344e5
                }, !1, !1, !1, !1]
            }, {
                name: "Europe/Moscow",
                rules: [{
                    e: 12249756e5,
                    s: 12068316e5
                }, {
                    e: 12564252e5,
                    s: 12382812e5
                }, {
                    e: 12884796e5,
                    s: 12697308e5
                }, !1, !1, !1, !1]
            }, {
                name: "Pacific/Apia",
                rules: [!1, !1, !1, {
                    e: 13017528e5,
                    s: 13168728e5
                }, {
                    e: 13332024e5,
                    s: 13489272e5
                }, {
                    e: 13652568e5,
                    s: 13803768e5
                }, {
                    e: 13967064e5,
                    s: 14118264e5
                }]
            }, {
                name: "Pacific/Fiji",
                rules: [!1, !1, {
                    e: 12696984e5,
                    s: 12878424e5
                }, {
                    e: 13271544e5,
                    s: 1319292e6
                }, {
                    e: 1358604e6,
                    s: 13507416e5
                }, {
                    e: 139005e7,
                    s: 1382796e6
                }, {
                    e: 14215032e5,
                    s: 14148504e5
                }]
            }, {
                name: "Europe/London",
                rules: [{
                    e: 12249828e5,
                    s: 12068388e5
                }, {
                    e: 12564324e5,
                    s: 12382884e5
                }, {
                    e: 12884868e5,
                    s: 1269738e6
                }, {
                    e: 13199364e5,
                    s: 13011876e5
                }, {
                    e: 1351386e6,
                    s: 13326372e5
                }, {
                    e: 13828356e5,
                    s: 13646916e5
                }, {
                    e: 14142852e5,
                    s: 13961412e5
                }]
            }]
        }, "undefined" != typeof module && "undefined" != typeof module.exports ? module.exports = t : "undefined" != typeof define && null !== define && null != define.amd ? define([], function () {
            return t
        }) : "undefined" == typeof e ? window.jstz = t : e.jstz = t
    }(),
    function () {
        var e = window.HubstaffAuth = window.HubstaffAuth || {},
            t = "hubstaff_account_refresh",
            n = 864e5,
            i = 36e5,
            r = function () {
                Cookies.set(t, Date.now() + n, {
                    SameSite: "Lax"
                })
            },
            a = function (e) {
                var n = Cookies.get(t);
                if (void 0 === n && r(), Date.now() > parseInt(n)) {
                    r();
                    var i = new XMLHttpRequest;
                    i.open("GET", e.issuer + "/ping", !0), i.withCredentials = !0, i.send(null)
                }
            };
        e.startKeepAlive = function (e) {
            void 0 !== e.issuer && (a(e), setInterval(function () {
                a(e)
            }, i))
        }
    }(),
    function (e) {
        function t(e) {
            return e.map(function (e) {
                return e + "[required]," + e + ".required"
            }).join(",")
        }

        function n(t) {
            t.find(".form-group").removeClass("has-error"), t.find(".form-group .help-block.error-message").remove();
            var n = t.find(r),
                i = n.filter(function () {
                    return "" === e.trim(this.value)
                }),
                o = t.find(a);
            o.each(function () {
                var t = e(this),
                    n = e('input[name="' + t.attr("name") + '"]');
                n.is(":checked") || i.push(this)
            }), i.length > 0 ? (e.rails.enableFormElements(t), i.each(function () {
                var t = e(this).closest(".form-group");
                t.length > 0 && !t.hasClass("has-error") && (t.addClass("has-error"), t.append(e('<span class="help-block error-message"></span>').text("is required")))
            })) : t.trigger("submit.rails")
        }

        function i(t, n, i) {
            var r;
            try {
                r = e.parseJSON(n.responseText)
            } catch (a) {
                r = {
                    error: "An unexpected error occurred. Please try again."
                }
            }
            console.log("complete", r, t);
            var o = e(this);
            if ("errors" in r) {
                e.rails.enableFormElements(o);
                for (var s in r.errors) o.find('*[name="user[' + s + ']"][type!="hidden"]').each(function () {
                    console.log("Setting error on ", this);
                    var t = e(this).closest(".form-group");
                    t.length > 0 && (t.addClass("has-error"), t.append(e('<span class="help-block error-message"></span>').text(r.errors[s][0])))
                })
            } else if ("url" in r) {
                var l = o.data("hubstaff-signup-options");
                l && e.isFunction(l.onsubmitsuccess) ? l.onsubmitsuccess(o, r, function () {
                    document.location = r.url
                }) : document.location = r.url
            } else "csrf" in r ? (alert("Your session has expired. Please sign up again."), document.location.reload(!0)) : "error" in r && alert(r.error)
        }
        var r = t(['input[type!="checkbox"][type!="radio"]', "textarea", "select"]),
            a = t(['input[type="checkbox"]', 'input[type="radio"]']),
            o = window.HubstaffAuth = window.HubstaffAuth || {};
        o.signupForm = function (t, r) {
            var a;
            r = r || {}, e(t).each(function () {
                var t = e(this);
                if (t.data("hubstaff-signup-options", r), r.product && 0 === t.find('*[name="hubstaff[product]"]').length && (a = e('<input type="hidden"/>'), a.attr("name", "hubstaff[product]"), a.val(r.product), t.append(a)), r.extra)
                    for (var o in r.extra) a = e('<input type="hidden"/>'), a.attr("name", "hubstaff[" + o + "]"), a.val(r.extra[o]), t.append(a);
                if (0 === t.find('*[name="user[time_zone]"]').length && (a = e('<input type="hidden"/>'), a.attr("name", "user[time_zone]"), a.val("UTC"), t.append(a)), void 0 !== jstz) {
                    var s = jstz.determine();
                    t.find('*[name="user[time_zone]"]').val(s.name())
                }
                0 === t.find('*[name="user[terms]"]').length && (a = e('<input type="hidden"/>'), a.attr("name", "user[terms]"), a.val("1"), t.append(a)), 0 === t.find('*[name="user[password_confirmation]"]').length && (a = e('<input type="hidden"/>'), a.attr("name", "user[password_confirmation]"), t.append(a), t.on("ajax:before", function (e, n) {
                    var i = t.find('*[name="user[password]"]');
                    t.find('*[name="user[password_confirmation]"]').val(i.val())
                })), t.on("submit.signup", function (i) {
                    return e.rails.disableFormElements(t), e.isFunction(r.onsubmit) ? r.onsubmit(t, function () {
                        n(t)
                    }) : n(t), i.preventDefault(), i.stopPropagation(), !1
                }), t.on("ajax:complete", i)
            })
        }
    }(jQuery),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "moment"], e) : "object" == typeof exports ? module.exports = e(require("jquery"), require("moment")) : e(jQuery, moment)
    }(function (e, t) {
        function n(e) {
            return ie(e, Ke)
        }

        function i(e, t) {
            t.left && e.css({
                "border-left-width": 1,
                "margin-left": t.left - 1
            }), t.right && e.css({
                "border-right-width": 1,
                "margin-right": t.right - 1
            })
        }

        function r(e) {
            e.css({
                "margin-left": "",
                "margin-right": "",
                "border-left-width": "",
                "border-right-width": ""
            })
        }

        function a() {
            e("body").addClass("fc-not-allowed")
        }

        function o() {
            e("body").removeClass("fc-not-allowed")
        }

        function s(t, n, i) {
            var r = Math.floor(n / t.length),
                a = Math.floor(n - r * (t.length - 1)),
                o = [],
                s = [],
                c = [],
                u = 0;
            l(t), t.each(function (n, i) {
                var l = n === t.length - 1 ? a : r,
                    d = e(i).outerHeight(!0);
                l > d ? (o.push(i), s.push(d), c.push(e(i).height())) : u += d
            }), i && (n -= u, r = Math.floor(n / o.length), a = Math.floor(n - r * (o.length - 1))), e(o).each(function (t, n) {
                var i = t === o.length - 1 ? a : r,
                    l = s[t],
                    u = c[t],
                    d = i - (l - u);
                i > l && e(n).height(d)
            })
        }

        function l(e) {
            e.height("")
        }

        function c(t) {
            var n = 0;
            return t.find("> *").each(function (t, i) {
                var r = e(i).outerWidth();
                r > n && (n = r)
            }), n++, t.width(n), n
        }

        function u(e, t) {
            var n, i = e.add(t);
            return i.css({
                position: "relative",
                left: -1
            }), n = e.outerHeight() - t.outerHeight(), i.css({
                position: "",
                left: ""
            }), n
        }

        function d(t) {
            var n = t.css("position"),
                i = t.parents().filter(function () {
                    var t = e(this);
                    return /(auto|scroll)/.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                }).eq(0);
            return "fixed" !== n && i.length ? i : e(t[0].ownerDocument || document)
        }

        function h(e, t) {
            var n = e.offset(),
                i = n.left - (t ? t.left : 0),
                r = n.top - (t ? t.top : 0);
            return {
                left: i,
                right: i + e.outerWidth(),
                top: r,
                bottom: r + e.outerHeight()
            }
        }

        function f(e, t) {
            var n = e.offset(),
                i = m(e),
                r = n.left + b(e, "border-left-width") + i.left - (t ? t.left : 0),
                a = n.top + b(e, "border-top-width") + i.top - (t ? t.top : 0);
            return {
                left: r,
                right: r + e[0].clientWidth,
                top: a,
                bottom: a + e[0].clientHeight
            }
        }

        function p(e, t) {
            var n = e.offset(),
                i = n.left + b(e, "border-left-width") + b(e, "padding-left") - (t ? t.left : 0),
                r = n.top + b(e, "border-top-width") + b(e, "padding-top") - (t ? t.top : 0);
            return {
                left: i,
                right: i + e.width(),
                top: r,
                bottom: r + e.height()
            }
        }

        function m(e) {
            var t, n = e[0].offsetWidth - e[0].clientWidth,
                i = e[0].offsetHeight - e[0].clientHeight;
            return n = g(n), i = g(i), t = {
                left: 0,
                right: 0,
                top: 0,
                bottom: i
            }, v() && "rtl" == e.css("direction") ? t.left = n : t.right = n, t
        }

        function g(e) {
            return e = Math.max(0, e), e = Math.round(e)
        }

        function v() {
            return null === Ze && (Ze = y()), Ze
        }

        function y() {
            var t = e("<div><div/></div>").css({
                position: "absolute",
                top: -1e3,
                left: 0,
                border: 0,
                padding: 0,
                overflow: "scroll",
                direction: "rtl"
            }).appendTo("body"),
                n = t.children(),
                i = n.offset().left > t.offset().left;
            return t.remove(), i
        }

        function b(e, t) {
            return parseFloat(e.css(t)) || 0
        }

        function w(e) {
            return 1 == e.which && !e.ctrlKey
        }

        function _(e) {
            var t = e.originalEvent.touches;
            return t && t.length ? t[0].pageX : e.pageX
        }

        function x(e) {
            var t = e.originalEvent.touches;
            return t && t.length ? t[0].pageY : e.pageY
        }

        function k(e) {
            return /^touch/.test(e.type)
        }

        function C(e) {
            e.addClass("fc-unselectable").on("selectstart", A)
        }

        function S(e) {
            e.removeClass("fc-unselectable").off("selectstart", A)
        }

        function A(e) {
            e.preventDefault()
        }

        function T(e, t) {
            var n = {
                left: Math.max(e.left, t.left),
                right: Math.min(e.right, t.right),
                top: Math.max(e.top, t.top),
                bottom: Math.min(e.bottom, t.bottom)
            };
            return n.left < n.right && n.top < n.bottom ? n : !1
        }

        function E(e, t) {
            return {
                left: Math.min(Math.max(e.left, t.left), t.right),
                top: Math.min(Math.max(e.top, t.top), t.bottom)
            }
        }

        function D(e) {
            return {
                left: (e.left + e.right) / 2,
                top: (e.top + e.bottom) / 2
            }
        }

        function $(e, t) {
            return {
                left: e.left - t.left,
                top: e.top - t.top
            }
        }

        function M(t) {
            var n, i, r = [],
                a = [];
            for ("string" == typeof t ? a = t.split(/\s*,\s*/) : "function" == typeof t ? a = [t] : e.isArray(t) && (a = t), n = 0; n < a.length; n++) i = a[n], "string" == typeof i ? r.push("-" == i.charAt(0) ? {
                field: i.substring(1),
                order: -1
            } : {
                field: i,
                order: 1
            }) : "function" == typeof i && r.push({
                func: i
            });
            return r
        }

        function R(e, t, n) {
            var i, r;
            for (i = 0; i < n.length; i++)
                if (r = I(e, t, n[i])) return r;
            return 0
        }

        function I(e, t, n) {
            return n.func ? n.func(e, t) : P(e[n.field], t[n.field]) * (n.order || 1)
        }

        function P(t, n) {
            return t || n ? null == n ? -1 : null == t ? 1 : "string" === e.type(t) || "string" === e.type(n) ? String(t).localeCompare(String(n)) : t - n : 0
        }

        function H(e, t) {
            var n, i, r, a, o = e.start,
                s = e.end,
                l = t.start,
                c = t.end;
            return s > l && c > o ? (o >= l ? (n = o.clone(), r = !0) : (n = l.clone(), r = !1), c >= s ? (i = s.clone(), a = !0) : (i = c.clone(), a = !1), {
                start: n,
                end: i,
                isStart: r,
                isEnd: a
            }) : void 0
        }

        function O(e, n) {
            return t.duration({
                days: e.clone().stripTime().diff(n.clone().stripTime(), "days"),
                ms: e.time() - n.time()
            })
        }

        function j(e, n) {
            return t.duration({
                days: e.clone().stripTime().diff(n.clone().stripTime(), "days")
            })
        }

        function N(e, n, i) {
            return t.duration(Math.round(e.diff(n, i, !0)), i)
        }

        function z(e, t) {
            var n, i, r;
            for (n = 0; n < Je.length && (i = Je[n], r = F(i, e, t), !(r >= 1 && ge(r))); n++);
            return i
        }

        function L(e, t) {
            var n = z(e);
            return "week" === n && "object" == typeof t && t.days && (n = "day"), n
        }

        function F(e, n, i) {
            return null != i ? i.diff(n, e, !0) : t.isDuration(n) ? n.as(e) : n.end.diff(n.start, e, !0)
        }

        function B(e, t, n) {
            var i;
            return ee(n) ? (t - e) / n : (i = n.asMonths(), Math.abs(i) >= 1 && ge(i) ? t.diff(e, "months", !0) / i : t.diff(e, "days", !0) / n.asDays())
        }

        function W(e, t) {
            var n, i;
            return ee(e) || ee(t) ? e / t : (n = e.asMonths(), i = t.asMonths(), Math.abs(n) >= 1 && ge(n) && Math.abs(i) >= 1 && ge(i) ? n / i : e.asDays() / t.asDays());
        }

        function U(e, n) {
            var i;
            return ee(e) ? t.duration(e * n) : (i = e.asMonths(), Math.abs(i) >= 1 && ge(i) ? t.duration({
                months: i * n
            }) : t.duration({
                days: e.asDays() * n
            }))
        }

        function q(e) {
            return {
                start: e.start.clone(),
                end: e.end.clone()
            }
        }

        function G(e, t) {
            return e = q(e), t.start && (e.start = Y(e.start, t)), t.end && (e.end = Q(e.end, t.end)), e
        }

        function Y(e, t) {
            return e = e.clone(), t.start && (e = J(e, t.start)), t.end && e >= t.end && (e = t.end.clone().subtract(1)), e
        }

        function V(e, t) {
            return (!t.start || e >= t.start) && (!t.end || e < t.end)
        }

        function X(e, t) {
            return (!t.start || e.end >= t.start) && (!t.end || e.start < t.end)
        }

        function K(e, t) {
            return (!t.start || e.start >= t.start) && (!t.end || e.end <= t.end)
        }

        function Z(e, t) {
            return (e.start && t.start && e.start.isSame(t.start) || !e.start && !t.start) && (e.end && t.end && e.end.isSame(t.end) || !e.end && !t.end)
        }

        function Q(e, t) {
            return (e.isBefore(t) ? e : t).clone()
        }

        function J(e, t) {
            return (e.isAfter(t) ? e : t).clone()
        }

        function ee(e) {
            return Boolean(e.hours() || e.minutes() || e.seconds() || e.milliseconds())
        }

        function te(e) {
            return "[object Date]" === Object.prototype.toString.call(e) || e instanceof Date
        }

        function ne(e) {
            return /^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)
        }

        function ie(e, t) {
            var n, i, r, a, o, s, l = {};
            if (t)
                for (n = 0; n < t.length; n++) {
                    for (i = t[n], r = [], a = e.length - 1; a >= 0; a--)
                        if (o = e[a][i], "object" == typeof o) r.unshift(o);
                        else if (void 0 !== o) {
                            l[i] = o;
                            break
                        }
                    r.length && (l[i] = ie(r))
                }
            for (n = e.length - 1; n >= 0; n--) {
                s = e[n];
                for (i in s) i in l || (l[i] = s[i])
            }
            return l
        }

        function re(e) {
            var t = function () { };
            return t.prototype = e, new t
        }

        function ae(e, t) {
            for (var n in e) oe(e, n) && (t[n] = e[n])
        }

        function oe(e, t) {
            return et.call(e, t)
        }

        function se(t) {
            return /undefined|null|boolean|number|string/.test(e.type(t))
        }

        function le(t, n, i) {
            if (e.isFunction(t) && (t = [t]), t) {
                var r, a;
                for (r = 0; r < t.length; r++) a = t[r].apply(n, i) || a;
                return a
            }
        }

        function ce() {
            for (var e = 0; e < arguments.length; e++)
                if (void 0 !== arguments[e]) return arguments[e]
        }

        function ue(e) {
            return (e + "").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/'/g, "&#039;").replace(/"/g, "&quot;").replace(/\n/g, "<br />")
        }

        function de(e) {
            return e.replace(/&.*?;/g, "")
        }

        function he(t) {
            var n = [];
            return e.each(t, function (e, t) {
                null != t && n.push(e + ":" + t)
            }), n.join(";")
        }

        function fe(t) {
            var n = [];
            return e.each(t, function (e, t) {
                null != t && n.push(e + '="' + ue(t) + '"')
            }), n.join(" ")
        }

        function pe(e) {
            return e.charAt(0).toUpperCase() + e.slice(1)
        }

        function me(e, t) {
            return e - t
        }

        function ge(e) {
            return e % 1 === 0
        }

        function ve(e, t) {
            var n = e[t];
            return function () {
                return n.apply(e, arguments)
            }
        }

        function ye(e, t, n) {
            var i, r, a, o, s, l = function () {
                var c = +new Date - o;
                t > c ? i = setTimeout(l, t - c) : (i = null, n || (s = e.apply(a, r), a = r = null))
            };
            return function () {
                a = this, r = arguments, o = +new Date;
                var c = n && !i;
                return i || (i = setTimeout(l, t)), c && (s = e.apply(a, r), a = r = null), s
            }
        }

        function be(n, i, r) {
            var a, o, s, l, c = n[0],
                u = 1 == n.length && "string" == typeof c;
            return t.isMoment(c) || te(c) || void 0 === c ? l = t.apply(null, n) : (a = !1, o = !1, u ? tt.test(c) ? (c += "-01", n = [c], a = !0, o = !0) : (s = nt.exec(c)) && (a = !s[5], o = !0) : e.isArray(c) && (o = !0), l = i || a ? t.utc.apply(t, n) : t.apply(null, n), a ? (l._ambigTime = !0, l._ambigZone = !0) : r && (o ? l._ambigZone = !0 : u && l.utcOffset(c))), l._fullCalendar = !0, l
        }

        function we(e) {
            return "en" !== e.locale() ? e.clone().locale("en") : e
        }

        function _e() { }

        function xe(e, t) {
            var n;
            return oe(t, "constructor") && (n = t.constructor), "function" != typeof n && (n = t.constructor = function () {
                e.apply(this, arguments)
            }), n.prototype = re(e.prototype), ae(t, n.prototype), ae(e, n), n
        }

        function ke(e, t) {
            ae(t, e.prototype)
        }

        function Ce(e, t) {
            e.then = function (n) {
                return "function" == typeof n && n(t), e
            }
        }

        function Se(e) {
            e.then = function (t, n) {
                return "function" == typeof n && n(), e
            }
        }

        function Ae(e, t) {
            return e || t ? e && t ? e.component === t.component && Te(e, t) && Te(t, e) : !1 : !0
        }

        function Te(e, t) {
            for (var n in e)
                if (!/^(component|left|right|top|bottom)$/.test(n) && e[n] !== t[n]) return !1;
            return !0
        }

        function Ee(e) {
            return {
                start: e.start.clone(),
                end: e.end ? e.end.clone() : null,
                allDay: e.allDay
            }
        }

        function De(e) {
            var t = Me(e);
            return "background" === t || "inverse-background" === t
        }

        function $e(e) {
            return "inverse-background" === Me(e)
        }

        function Me(e) {
            return ce((e.source || {}).rendering, e.rendering)
        }

        function Re(e) {
            var t, n, i = {};
            for (t = 0; t < e.length; t++) n = e[t], (i[n._id] || (i[n._id] = [])).push(n);
            return i
        }

        function Ie(e, t) {
            return e.start - t.start
        }

        function Pe(n) {
            var i, r, a, o, s = Ve.dataAttrPrefix;
            return s && (s += "-"), i = n.data(s + "event") || null, i && (i = "object" == typeof i ? e.extend({}, i) : {}, r = i.start, null == r && (r = i.time), a = i.duration, o = i.stick, delete i.start, delete i.time, delete i.duration, delete i.stick), null == r && (r = n.data(s + "start")), null == r && (r = n.data(s + "time")), null == a && (a = n.data(s + "duration")), null == o && (o = n.data(s + "stick")), r = null != r ? t.duration(r) : null, a = null != a ? t.duration(a) : null, o = Boolean(o), {
                eventProps: i,
                startTime: r,
                duration: a,
                stick: o
            }
        }

        function He(e, t) {
            var n, i;
            for (n = 0; n < t.length; n++)
                if (i = t[n], i.leftCol <= e.rightCol && i.rightCol >= e.leftCol) return !0;
            return !1
        }

        function Oe(e, t) {
            return e.leftCol - t.leftCol
        }

        function je(e) {
            var t, n, i, r = [];
            for (t = 0; t < e.length; t++) {
                for (n = e[t], i = 0; i < r.length && Le(n, r[i]).length; i++);
                n.level = i, (r[i] || (r[i] = [])).push(n)
            }
            return r
        }

        function Ne(e) {
            var t, n, i, r, a;
            for (t = 0; t < e.length; t++)
                for (n = e[t], i = 0; i < n.length; i++)
                    for (r = n[i], r.forwardSegs = [], a = t + 1; a < e.length; a++) Le(r, e[a], r.forwardSegs)
        }

        function ze(e) {
            var t, n, i = e.forwardSegs,
                r = 0;
            if (void 0 === e.forwardPressure) {
                for (t = 0; t < i.length; t++) n = i[t], ze(n), r = Math.max(r, 1 + n.forwardPressure);
                e.forwardPressure = r
            }
        }

        function Le(e, t, n) {
            n = n || [];
            for (var i = 0; i < t.length; i++) Fe(e, t[i]) && n.push(t[i]);
            return n
        }

        function Fe(e, t) {
            return e.bottom > t.top && e.top < t.bottom
        }

        function Be(e) {
            this.items = e || []
        }

        function We(t, n) {
            function i(e) {
                n = e
            }

            function r() {
                var i = n.layout;
                m = t.opt("theme") ? "ui" : "fc", i ? (p ? p.empty() : p = this.el = e("<div class='fc-toolbar " + n.extraClasses + "'/>"), p.append(o("left")).append(o("right")).append(o("center")).append('<div class="fc-clear"/>')) : a()
            }

            function a() {
                p && (p.remove(), p = f.el = null)
            }

            function o(i) {
                var r = e('<div class="fc-' + i + '"/>'),
                    a = n.layout[i],
                    o = t.opt("customButtons") || {},
                    s = t.opt("buttonText") || {};
                return a && e.each(a.split(" "), function (n) {
                    var i, a = e(),
                        l = !0;
                    e.each(this.split(","), function (n, i) {
                        var r, c, u, d, h, f, p, v, y, b;
                        "title" == i ? (a = a.add(e("<h2>&nbsp;</h2>")), l = !1) : ((r = o[i]) ? (u = function (e) {
                            r.click && r.click.call(b[0], e)
                        }, d = "", h = r.text) : (c = t.getViewSpec(i)) ? (u = function () {
                            t.changeView(i)
                        }, g.push(i), d = c.buttonTextOverride, h = c.buttonTextDefault) : t[i] && (u = function () {
                            t[i]()
                        }, d = (t.overrides.buttonText || {})[i], h = s[i]), u && (f = r ? r.themeIcon : t.opt("themeButtonIcons")[i], p = r ? r.icon : t.opt("buttonIcons")[i], v = d ? ue(d) : f && t.opt("theme") ? "<span class='ui-icon ui-icon-" + f + "'></span>" : p && !t.opt("theme") ? "<span class='fc-icon fc-icon-" + p + "'></span>" : ue(h), y = ["fc-" + i + "-button", m + "-button", m + "-state-default"], b = e('<button type="button" class="' + y.join(" ") + '">' + v + "</button>").click(function (e) {
                            b.hasClass(m + "-state-disabled") || (u(e), (b.hasClass(m + "-state-active") || b.hasClass(m + "-state-disabled")) && b.removeClass(m + "-state-hover"))
                        }).mousedown(function () {
                            b.not("." + m + "-state-active").not("." + m + "-state-disabled").addClass(m + "-state-down")
                        }).mouseup(function () {
                            b.removeClass(m + "-state-down")
                        }).hover(function () {
                            b.not("." + m + "-state-active").not("." + m + "-state-disabled").addClass(m + "-state-hover")
                        }, function () {
                            b.removeClass(m + "-state-hover").removeClass(m + "-state-down")
                        }), a = a.add(b)))
                    }), l && a.first().addClass(m + "-corner-left").end().last().addClass(m + "-corner-right").end(), a.length > 1 ? (i = e("<div/>"), l && i.addClass("fc-button-group"), i.append(a), r.append(i)) : r.append(a)
                }), r
            }

            function s(e) {
                p && p.find("h2").text(e)
            }

            function l(e) {
                p && p.find(".fc-" + e + "-button").addClass(m + "-state-active")
            }

            function c(e) {
                p && p.find(".fc-" + e + "-button").removeClass(m + "-state-active")
            }

            function u(e) {
                p && p.find(".fc-" + e + "-button").prop("disabled", !0).addClass(m + "-state-disabled")
            }

            function d(e) {
                p && p.find(".fc-" + e + "-button").prop("disabled", !1).removeClass(m + "-state-disabled")
            }

            function h() {
                return g
            }
            var f = this;
            f.setToolbarOptions = i, f.render = r, f.removeElement = a, f.updateTitle = s, f.activateButton = l, f.deactivateButton = c, f.disableButton = u, f.enableButton = d, f.getViewsWithButtons = h, f.el = null;
            var p, m, g = []
        }

        function Ue(t) {
            e.each(Mt, function (e, n) {
                null == t[e] && (t[e] = n(t))
            })
        }

        function qe(e) {
            return t.localeData(e) || t.localeData("en")
        }

        function Ge() {
            function n(e, t) {
                return !q.opt("lazyFetching") || a(e, t) ? o(e, t) : ut.resolve(V)
            }

            function i() {
                V = r(Q), q.trigger("eventsReset", V)
            }

            function r(e) {
                var t, n, i = [];
                for (t = 0; t < e.length; t++) n = e[t], n.start.clone().stripZone() < Y && q.getEventEnd(n).stripZone() > G && i.push(n);
                return i
            }

            function a(e, t) {
                return !G || G > e || t > Y
            }

            function o(e, t) {
                return G = e, Y = t, s()
            }

            function s() {
                return c(K, "reset")
            }

            function l(e) {
                return c(_(e))
            }

            function c(e, t) {
                var n, i;
                for ("reset" === t ? Q = [] : "add" !== t && (Q = S(Q, e)), n = 0; n < e.length; n++) i = e[n], "pending" !== i._status && Z++, i._fetchId = (i._fetchId || 0) + 1, i._status = "pending";
                for (n = 0; n < e.length; n++) i = e[n], u(i, i._fetchId);
                return Z ? ut.construct(function (e) {
                    q.one("eventsReceived", e)
                }) : ut.resolve(V)
            }

            function u(t, n) {
                f(t, function (i) {
                    var r, a, o, s = e.isArray(t.events);
                    if (n === t._fetchId && "rejected" !== t._status) {
                        if (t._status = "resolved", i)
                            for (r = 0; r < i.length; r++) a = i[r], o = s ? a : H(a, t), o && Q.push.apply(Q, B(o));
                        h()
                    }
                })
            }

            function d(e) {
                var t = "pending" === e._status;
                e._status = "rejected", t && h()
            }

            function h() {
                Z--, Z || (i(Q), q.trigger("eventsReceived", V))
            }

            function f(t, n) {
                var i, r, a = Ve.sourceFetchers;
                for (i = 0; i < a.length; i++) {
                    if (r = a[i].call(q, t, G.clone(), Y.clone(), q.opt("timezone"), n), r === !0) return;
                    if ("object" == typeof r) return void f(r, n)
                }
                var o = t.events;
                if (o) e.isFunction(o) ? (q.pushLoading(), o.call(q, G.clone(), Y.clone(), q.opt("timezone"), function (e) {
                    n(e), q.popLoading()
                })) : e.isArray(o) ? n(o) : n();
                else {
                    var s = t.url;
                    if (s) {
                        var l, c = t.success,
                            u = t.error,
                            d = t.complete;
                        l = e.isFunction(t.data) ? t.data() : t.data;
                        var h = e.extend({}, l || {}),
                            p = ce(t.startParam, q.opt("startParam")),
                            m = ce(t.endParam, q.opt("endParam")),
                            g = ce(t.timezoneParam, q.opt("timezoneParam"));
                        p && (h[p] = G.format()), m && (h[m] = Y.format()), q.opt("timezone") && "local" != q.opt("timezone") && (h[g] = q.opt("timezone")), q.pushLoading(), e.ajax(e.extend({}, Rt, t, {
                            data: h,
                            success: function (t) {
                                t = t || [];
                                var i = le(c, this, arguments);
                                e.isArray(i) && (t = i), n(t)
                            },
                            error: function () {
                                le(u, this, arguments), n()
                            },
                            complete: function () {
                                le(d, this, arguments), q.popLoading()
                            }
                        }))
                    } else n()
                }
            }

            function p(e) {
                var t = m(e);
                t && (K.push(t), c([t], "add"))
            }

            function m(t) {
                var n, i, r = Ve.sourceNormalizers;
                if (e.isFunction(t) || e.isArray(t) ? n = {
                    events: t
                } : "string" == typeof t ? n = {
                    url: t
                } : "object" == typeof t && (n = e.extend({}, t)), n) {
                    for (n.className ? "string" == typeof n.className && (n.className = n.className.split(/\s+/)) : n.className = [], e.isArray(n.events) && (n.origArray = n.events, n.events = e.map(n.events, function (e) {
                        return H(e, n)
                    })), i = 0; i < r.length; i++) r[i].call(q, n);
                    return n
                }
            }

            function g(e) {
                y(x(e))
            }

            function v(e) {
                null == e ? y(K, !0) : y(_(e))
            }

            function y(t, n) {
                var r;
                for (r = 0; r < t.length; r++) d(t[r]);
                n ? (K = [], Q = []) : (K = e.grep(K, function (e) {
                    for (r = 0; r < t.length; r++)
                        if (e === t[r]) return !1;
                    return !0
                }), Q = S(Q, t)), i()
            }

            function b() {
                return K.slice(1)
            }

            function w(t) {
                return e.grep(K, function (e) {
                    return e.id && e.id === t
                })[0]
            }

            function _(t) {
                t ? e.isArray(t) || (t = [t]) : t = [];
                var n, i = [];
                for (n = 0; n < t.length; n++) i.push.apply(i, x(t[n]));
                return i
            }

            function x(t) {
                var n, i;
                for (n = 0; n < K.length; n++)
                    if (i = K[n], i === t) return [i];
                return i = w(t), i ? [i] : e.grep(K, function (e) {
                    return k(t, e)
                })
            }

            function k(e, t) {
                return e && t && C(e) == C(t)
            }

            function C(e) {
                return ("object" == typeof e ? e.origArray || e.googleCalendarId || e.url || e.events : null) || e
            }

            function S(t, n) {
                return e.grep(t, function (e) {
                    for (var t = 0; t < n.length; t++)
                        if (e.source === n[t]) return !1;
                    return !0
                })
            }

            function A(e) {
                T([e])
            }

            function T(e) {
                var t, n;
                for (t = 0; t < e.length; t++) n = e[t], n.start = q.moment(n.start), n.end ? n.end = q.moment(n.end) : n.end = null, W(n, E(n));
                i()
            }

            function E(t) {
                var n = {};
                return e.each(t, function (e, t) {
                    D(e) && void 0 !== t && se(t) && (n[e] = t)
                }), n
            }

            function D(e) {
                return !/^_|^(id|allDay|start|end)$/.test(e)
            }

            function $(e, t) {
                return M([e], t)
            }

            function M(e, t) {
                var n, r, a, o, s, l = [];
                for (a = 0; a < e.length; a++)
                    if (r = H(e[a])) {
                        for (n = B(r), o = 0; o < n.length; o++) s = n[o], s.source || (t && (X.events.push(s), s.source = X), Q.push(s));
                        l = l.concat(n)
                    } return l.length && i(), l
            }

            function R(t) {
                var n, r;
                for (null == t ? t = function () {
                    return !0
                } : e.isFunction(t) || (n = t + "", t = function (e) {
                    return e._id == n
                }), Q = e.grep(Q, t, !0), r = 0; r < K.length; r++) e.isArray(K[r].events) && (K[r].events = e.grep(K[r].events, t, !0));
                i()
            }

            function I(t) {
                return e.isFunction(t) ? e.grep(Q, t) : null != t ? (t += "", e.grep(Q, function (e) {
                    return e._id == t
                })) : Q
            }

            function P(e) {
                e.start = q.moment(e.start), e.end && (e.end = q.moment(e.end)), Ye(e)
            }

            function H(n, i) {
                var r, a, o, s = q.opt("eventDataTransform"),
                    l = {};
                if (s && (n = s(n)), i && i.eventDataTransform && (n = i.eventDataTransform(n)), e.extend(l, n), i && (l.source = i), l._id = n._id || (void 0 === n.id ? "_fc" + It++ : n.id + ""), n.className ? "string" == typeof n.className ? l.className = n.className.split(/\s+/) : l.className = n.className : l.className = [], r = n.start || n.date, a = n.end, ne(r) && (r = t.duration(r)), ne(a) && (a = t.duration(a)), n.dow || t.isDuration(r) || t.isDuration(a)) l.start = r ? t.duration(r) : null, l.end = a ? t.duration(a) : null, l._recurring = !0;
                else {
                    if (r && (r = q.moment(r), !r.isValid())) return !1;
                    a && (a = q.moment(a), a.isValid() || (a = null)), o = n.allDay, void 0 === o && (o = ce(i ? i.allDayDefault : void 0, q.opt("allDayDefault"))), z(r, a, o, l)
                }
                return q.normalizeEvent(l), l
            }

            function z(e, t, n, i) {
                i.start = e, i.end = t, i.allDay = n, L(i), Ye(i)
            }

            function L(e) {
                F(e), e.end && !e.end.isAfter(e.start) && (e.end = null), e.end || (q.opt("forceEventDuration") ? e.end = q.getDefaultEventEnd(e.allDay, e.start) : e.end = null)
            }

            function F(e) {
                null == e.allDay && (e.allDay = !(e.start.hasTime() || e.end && e.end.hasTime())), e.allDay ? (e.start.stripTime(), e.end && e.end.stripTime()) : (e.start.hasTime() || (e.start = q.applyTimezone(e.start.time(0))), e.end && !e.end.hasTime() && (e.end = q.applyTimezone(e.end.time(0))))
            }

            function B(t, n, i) {
                var r, a, o, s, l, c, u, d, h, f = [];
                if (n = n || G, i = i || Y, t)
                    if (t._recurring) {
                        if (a = t.dow)
                            for (r = {}, o = 0; o < a.length; o++) r[a[o]] = !0;
                        for (s = n.clone().stripTime(); s.isBefore(i);)(!r || r[s.day()]) && (l = t.start, c = t.end, u = s.clone(), d = null, l && (u = u.time(l)), c && (d = s.clone().time(c)), h = e.extend({}, t), z(u, d, !l && !c, h), f.push(h)), s.add(1, "days")
                    } else f.push(t);
                return f
            }

            function W(t, n, i) {
                function r(e, t) {
                    return i ? N(e, t, i) : n.allDay ? j(e, t) : O(e, t)
                }
                var a, o, s, l, c, u, d = {};
                return n = n || {}, n.start || (n.start = t.start.clone()), void 0 === n.end && (n.end = t.end ? t.end.clone() : null), null == n.allDay && (n.allDay = t.allDay), L(n), a = {
                    start: t._start.clone(),
                    end: t._end ? t._end.clone() : q.getDefaultEventEnd(t._allDay, t._start),
                    allDay: n.allDay
                }, L(a), o = null !== t._end && null === n.end, s = r(n.start, a.start), n.end ? (l = r(n.end, a.end), c = l.subtract(s)) : c = null, e.each(n, function (e, t) {
                    D(e) && void 0 !== t && (d[e] = t)
                }), u = U(I(t._id), o, n.allDay, s, c, d), {
                    dateDelta: s,
                    durationDelta: c,
                    undo: u
                }
            }

            function U(t, n, i, r, a, o) {
                var s = q.getIsAmbigTimezone(),
                    l = [];
                return r && !r.valueOf() && (r = null), a && !a.valueOf() && (a = null), e.each(t, function (t, c) {
                    var u, d;
                    u = {
                        start: c.start.clone(),
                        end: c.end ? c.end.clone() : null,
                        allDay: c.allDay
                    }, e.each(o, function (e) {
                        u[e] = c[e]
                    }), d = {
                        start: c._start,
                        end: c._end,
                        allDay: i
                    }, L(d), n ? d.end = null : a && !d.end && (d.end = q.getDefaultEventEnd(d.allDay, d.start)), r && (d.start.add(r), d.end && d.end.add(r)), a && d.end.add(a), s && !d.allDay && (r || a) && (d.start.stripZone(), d.end && d.end.stripZone()), e.extend(c, o, d), Ye(c), l.push(function () {
                        e.extend(c, u), Ye(c)
                    })
                }),
                    function () {
                        for (var e = 0; e < l.length; e++) l[e]()
                    }
            }
            var q = this;
            q.requestEvents = n, q.reportEventChange = i, q.isFetchNeeded = a, q.fetchEvents = o, q.fetchEventSources = c, q.refetchEvents = s, q.refetchEventSources = l, q.getEventSources = b, q.getEventSourceById = w, q.addEventSource = p, q.removeEventSource = g, q.removeEventSources = v, q.updateEvent = A, q.updateEvents = T, q.renderEvent = $, q.renderEvents = M, q.removeEvents = R, q.clientEvents = I, q.mutateEvent = W, q.normalizeEventDates = L, q.normalizeEventTimes = F;
            var G, Y, V, X = {
                events: []
            },
                K = [X],
                Z = 0,
                Q = [];
            e.each((q.opt("events") ? [q.opt("events")] : []).concat(q.opt("eventSources") || []), function (e, t) {
                var n = m(t);
                n && K.push(n)
            }), q.getEventCache = function () {
                return Q
            }, q.rezoneArrayEventSources = function () {
                var t, n, i;
                for (t = 0; t < K.length; t++)
                    if (n = K[t].events, e.isArray(n))
                        for (i = 0; i < n.length; i++) P(n[i])
            }, q.buildEventFromInput = H, q.expandEvent = B
        }

        function Ye(e) {
            e._allDay = e.allDay, e._start = e.start.clone(), e._end = e.end ? e.end.clone() : null
        }
        var Ve = e.fullCalendar = {
            version: "3.4.0",
            internalApiVersion: 9
        },
            Xe = Ve.views = {};
        e.fn.fullCalendar = function (t) {
            var n = Array.prototype.slice.call(arguments, 1),
                i = this;
            return this.each(function (r, a) {
                var o, s = e(a),
                    l = s.data("fullCalendar");
                "string" == typeof t ? l && e.isFunction(l[t]) && (o = l[t].apply(l, n), r || (i = o), "destroy" === t && s.removeData("fullCalendar")) : l || (l = new Tt(s, t), s.data("fullCalendar", l), l.render())
            }), i
        };
        var Ke = ["header", "footer", "buttonText", "buttonIcons", "themeButtonIcons"];
        Ve.intersectRanges = H, Ve.applyAll = le, Ve.debounce = ye, Ve.isInt = ge, Ve.htmlEscape = ue, Ve.cssToStr = he, Ve.proxy = ve, Ve.capitaliseFirstLetter = pe, Ve.getOuterRect = h, Ve.getClientRect = f, Ve.getContentRect = p, Ve.getScrollbarWidths = m;
        var Ze = null;
        Ve.preventDefault = A, Ve.intersectRects = T, Ve.parseFieldSpecs = M, Ve.compareByFieldSpecs = R, Ve.compareByFieldSpec = I, Ve.flexibleCompare = P, Ve.computeGreatestUnit = z, Ve.divideRangeByDuration = B, Ve.divideDurationByDuration = W, Ve.multiplyDuration = U, Ve.durationHasTime = ee;
        var Qe = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
            Je = ["year", "month", "week", "day", "hour", "minute", "second", "millisecond"];
        Ve.log = function () {
            var e = window.console;
            return e && e.log ? e.log.apply(e, arguments) : void 0
        }, Ve.warn = function () {
            var e = window.console;
            return e && e.warn ? e.warn.apply(e, arguments) : Ve.log.apply(Ve, arguments)
        };
        var et = {}.hasOwnProperty;
        Ve.createObject = re;
        var tt = /^\s*\d{4}-\d\d$/,
            nt = /^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,
            it = t.fn,
            rt = e.extend({}, it),
            at = t.momentProperties;
        at.push("_fullCalendar"), at.push("_ambigTime"), at.push("_ambigZone"), Ve.moment = function () {
            return be(arguments)
        }, Ve.moment.utc = function () {
            var e = be(arguments, !0);
            return e.hasTime() && e.utc(), e
        }, Ve.moment.parseZone = function () {
            return be(arguments, !0, !0)
        }, it.week = it.weeks = function (e) {
            var t = this._locale._fullCalendar_weekCalc;
            return null == e && "function" == typeof t ? t(this) : "ISO" === t ? rt.isoWeek.apply(this, arguments) : rt.week.apply(this, arguments)
        }, it.time = function (e) {
            if (!this._fullCalendar) return rt.time.apply(this, arguments);
            if (null == e) return t.duration({
                hours: this.hours(),
                minutes: this.minutes(),
                seconds: this.seconds(),
                milliseconds: this.milliseconds()
            });
            this._ambigTime = !1, t.isDuration(e) || t.isMoment(e) || (e = t.duration(e));
            var n = 0;
            return t.isDuration(e) && (n = 24 * Math.floor(e.asDays())), this.hours(n + e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())
        }, it.stripTime = function () {
            return this._ambigTime || (this.utc(!0), this.set({
                hours: 0,
                minutes: 0,
                seconds: 0,
                ms: 0
            }), this._ambigTime = !0, this._ambigZone = !0), this
        }, it.hasTime = function () {
            return !this._ambigTime
        }, it.stripZone = function () {
            var e;
            return this._ambigZone || (e = this._ambigTime, this.utc(!0), this._ambigTime = e || !1, this._ambigZone = !0), this
        }, it.hasZone = function () {
            return !this._ambigZone
        }, it.local = function (e) {
            return rt.local.call(this, this._ambigZone || e), this._ambigTime = !1, this._ambigZone = !1, this
        }, it.utc = function (e) {
            return rt.utc.call(this, e), this._ambigTime = !1, this._ambigZone = !1, this
        }, it.utcOffset = function (e) {
            return null != e && (this._ambigTime = !1, this._ambigZone = !1), rt.utcOffset.apply(this, arguments)
        }, it.format = function () {
            return this._fullCalendar && arguments[0] ? ot(this, arguments[0]) : this._ambigTime ? lt(we(this), "YYYY-MM-DD") : this._ambigZone ? lt(we(this), "YYYY-MM-DD[T]HH:mm:ss") : this._fullCalendar ? lt(we(this)) : rt.format.apply(this, arguments)
        }, it.toISOString = function () {
            return this._ambigTime ? lt(we(this), "YYYY-MM-DD") : this._ambigZone ? lt(we(this), "YYYY-MM-DD[T]HH:mm:ss") : this._fullCalendar ? rt.toISOString.apply(we(this), arguments) : rt.toISOString.apply(this, arguments)
        },
            function () {
                function e(e, t) {
                    return u(r(t).fakeFormatString, e)
                }

                function t(e, t) {
                    return rt.format.call(e, t)
                }

                function n(e, t, n, a, o) {
                    var s;
                    return e = Ve.moment.parseZone(e), t = Ve.moment.parseZone(t), s = e.localeData(), n = s.longDateFormat(n) || n, i(r(n), e, t, a || " - ", o)
                }

                function i(e, t, n, i, r) {
                    var a, o, s, l = e.sameUnits,
                        c = t.clone().stripZone(),
                        u = n.clone().stripZone(),
                        f = d(e.fakeFormatString, t),
                        p = d(e.fakeFormatString, n),
                        m = "",
                        g = "",
                        v = "",
                        y = "",
                        b = "";
                    for (a = 0; a < l.length && (!l[a] || c.isSame(u, l[a])); a++) m += f[a];
                    for (o = l.length - 1; o > a && (!l[o] || c.isSame(u, l[o])) && (o - 1 !== a || "." !== f[o]); o--) g = f[o] + g;
                    for (s = a; o >= s; s++) v += f[s], y += p[s];
                    return (v || y) && (b = r ? y + i + v : v + i + y), h(m + b + g)
                }

                function r(e) {
                    return w[e] || (w[e] = a(e))
                }

                function a(e) {
                    var t = o(e);
                    return {
                        fakeFormatString: l(t),
                        sameUnits: c(t)
                    }
                }

                function o(e) {
                    for (var t, n = [], i = /\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g; t = i.exec(e);) t[1] ? n.push.apply(n, s(t[1])) : t[2] ? n.push({
                        maybe: o(t[2])
                    }) : t[3] ? n.push({
                        token: t[3]
                    }) : t[5] && n.push.apply(n, s(t[5]));
                    return n
                }

                function s(e) {
                    return ". " === e ? [".", " "] : [e]
                }

                function l(e) {
                    var t, n, i = [];
                    for (t = 0; t < e.length; t++) n = e[t], "string" == typeof n ? i.push("[" + n + "]") : n.token ? n.token in y ? i.push(m + "[" + n.token + "]") : i.push(n.token) : n.maybe && i.push(g + l(n.maybe) + g);
                    return i.join(p)
                }

                function c(e) {
                    var t, n, i, r = [];
                    for (t = 0; t < e.length; t++) n = e[t], n.token ? (i = b[n.token.charAt(0)], r.push(i ? i.unit : "second")) : n.maybe ? r.push.apply(r, c(n.maybe)) : r.push(null);
                    return r
                }

                function u(e, t) {
                    return h(d(e, t).join(""))
                }

                function d(e, n) {
                    var i, r, a = [],
                        o = t(n, e),
                        s = o.split(p);
                    for (i = 0; i < s.length; i++) r = s[i], r.charAt(0) === m ? a.push(y[r.substring(1)](n)) : a.push(r);
                    return a
                }

                function h(e) {
                    return e.replace(v, function (e, t) {
                        return t.match(/[1-9]/) ? t : ""
                    })
                }

                function f(e) {
                    var t, n, i, r, a = o(e);
                    for (t = 0; t < a.length; t++) n = a[t], n.token && (i = b[n.token.charAt(0)], i && (!r || i.value > r.value) && (r = i));
                    return r ? r.unit : null
                }
                Ve.formatDate = e, Ve.formatRange = n, Ve.oldMomentFormat = t, Ve.queryMostGranularFormatUnit = f;
                var p = "",
                    m = "",
                    g = "",
                    v = new RegExp(g + "([^" + g + "]*)" + g, "g"),
                    y = {
                        t: function (e) {
                            return t(e, "a").charAt(0)
                        },
                        T: function (e) {
                            return t(e, "A").charAt(0)
                        }
                    },
                    b = {
                        Y: {
                            value: 1,
                            unit: "year"
                        },
                        M: {
                            value: 2,
                            unit: "month"
                        },
                        W: {
                            value: 3,
                            unit: "week"
                        },
                        w: {
                            value: 3,
                            unit: "week"
                        },
                        D: {
                            value: 4,
                            unit: "day"
                        },
                        d: {
                            value: 4,
                            unit: "day"
                        }
                    },
                    w = {}
            }();
        var ot = Ve.formatDate,
            st = Ve.formatRange,
            lt = Ve.oldMomentFormat;
        Ve.Class = _e, _e.extend = function () {
            var e, t, n = arguments.length;
            for (e = 0; n > e; e++) t = arguments[e], n - 1 > e && ke(this, t);
            return xe(this, t || {})
        }, _e.mixin = function (e) {
            ke(this, e)
        };
        var ct = _e.extend(ft, pt, {
            _props: null,
            _watchers: null,
            _globalWatchArgs: null,
            constructor: function () {
                this._watchers = {}, this._props = {}, this.applyGlobalWatchers()
            },
            applyGlobalWatchers: function () {
                var e, t = this._globalWatchArgs || [];
                for (e = 0; e < t.length; e++) this.watch.apply(this, t[e])
            },
            has: function (e) {
                return e in this._props
            },
            get: function (e) {
                return void 0 === e ? this._props : this._props[e]
            },
            set: function (e, t) {
                var n;
                "string" == typeof e ? (n = {}, n[e] = void 0 === t ? null : t) : n = e, this.setProps(n)
            },
            reset: function (e) {
                var t, n = this._props,
                    i = {};
                for (t in n) i[t] = void 0;
                for (t in e) i[t] = e[t];
                this.setProps(i)
            },
            unset: function (e) {
                var t, n, i = {};
                for (t = "string" == typeof e ? [e] : e, n = 0; n < t.length; n++) i[t[n]] = void 0;
                this.setProps(i)
            },
            setProps: function (e) {
                var t, n, i = {},
                    r = 0;
                for (t in e) n = e[t], ("object" == typeof n || n !== this._props[t]) && (i[t] = n, r++);
                if (r) {
                    this.trigger("before:batchChange", i);
                    for (t in i) n = i[t], this.trigger("before:change", t, n), this.trigger("before:change:" + t, n);
                    for (t in i) n = i[t], void 0 === n ? delete this._props[t] : this._props[t] = n, this.trigger("change:" + t, n), this.trigger("change", t, n);
                    this.trigger("batchChange", i)
                }
            },
            watch: function (e, t, n, i) {
                var r = this;
                this.unwatch(e), this._watchers[e] = this._watchDeps(t, function (t) {
                    var i = n.call(r, t);
                    i && i.then ? (r.unset(e), i.then(function (t) {
                        r.set(e, t)
                    })) : r.set(e, i)
                }, function () {
                    r.unset(e), i && i.call(r)
                })
            },
            unwatch: function (e) {
                var t = this._watchers[e];
                t && (delete this._watchers[e], t.teardown())
            },
            _watchDeps: function (e, t, n) {
                function i(e, t, i) {
                    s++, 1 === s && c === l && (h = !0, n(), h = !1)
                }

                function r(e, n, i) {
                    void 0 === n ? (i || void 0 === u[e] || c--, delete u[e]) : (i || void 0 !== u[e] || c++, u[e] = n), s--, s || c === l && (h || t(u))
                }

                function a(e, t) {
                    o.on(e, t), d.push([e, t])
                }
                var o = this,
                    s = 0,
                    l = e.length,
                    c = 0,
                    u = {},
                    d = [],
                    h = !1;
                return e.forEach(function (e) {
                    var t = !1;
                    "?" === e.charAt(0) && (e = e.substring(1), t = !0), a("before:change:" + e, function (n) {
                        i(e, n, t)
                    }), a("change:" + e, function (n) {
                        r(e, n, t)
                    })
                }), e.forEach(function (e) {
                    var t = !1;
                    "?" === e.charAt(0) && (e = e.substring(1), t = !0), o.has(e) ? (u[e] = o.get(e), c++) : t && c++
                }), c === l && t(u), {
                    teardown: function () {
                        for (var e = 0; e < d.length; e++) o.off(d[e][0], d[e][1]);
                        d = null, c === l && n()
                    },
                    flash: function () {
                        c === l && (n(), t(u))
                    }
                }
            },
            flash: function (e) {
                var t = this._watchers[e];
                t && t.flash()
            }
        });
        ct.watch = function () {
            var e = this.prototype;
            e._globalWatchArgs || (e._globalWatchArgs = []), e._globalWatchArgs.push(arguments)
        }, Ve.Model = ct;
        var ut = {
            construct: function (t) {
                var n = e.Deferred(),
                    i = n.promise();
                return "function" == typeof t && t(function (e) {
                    n.resolve(e), Ce(i, e)
                }, function () {
                    n.reject(), Se(i)
                }), i
            },
            resolve: function (t) {
                var n = e.Deferred().resolve(t),
                    i = n.promise();
                return Ce(i, t), i
            },
            reject: function () {
                var t = e.Deferred().reject(),
                    n = t.promise();
                return Se(n), n
            }
        };
        Ve.Promise = ut;
        var dt = _e.extend(ft, {
            q: null,
            isPaused: !1,
            isRunning: !1,
            constructor: function () {
                this.q = []
            },
            queue: function () {
                this.q.push.apply(this.q, arguments), this.tryStart()
            },
            pause: function () {
                this.isPaused = !0
            },
            resume: function () {
                this.isPaused = !1, this.tryStart()
            },
            tryStart: function () {
                !this.isRunning && this.canRunNext() && (this.isRunning = !0, this.trigger("start"), this.runNext())
            },
            canRunNext: function () {
                return !this.isPaused && this.q.length
            },
            runNext: function () {
                this.runTask(this.q.shift())
            },
            runTask: function (e) {
                this.runTaskFunc(e)
            },
            runTaskFunc: function (e) {
                function t() {
                    n.canRunNext() ? n.runNext() : (n.isRunning = !1, n.trigger("stop"))
                }
                var n = this,
                    i = e();
                i && i.then ? i.then(t) : t()
            }
        });
        Ve.TaskQueue = dt;
        var ht = dt.extend({
            waitsByNamespace: null,
            waitNamespace: null,
            waitId: null,
            constructor: function (e) {
                dt.call(this), this.waitsByNamespace = e || {}
            },
            queue: function (e, t, n) {
                var i, r = {
                    func: e,
                    namespace: t,
                    type: n
                };
                t && (i = this.waitsByNamespace[t]), this.waitNamespace && (t === this.waitNamespace && null != i ? this.delayWait(i) : (this.clearWait(), this.tryStart())), this.compoundTask(r) && (this.waitNamespace || null == i ? this.tryStart() : this.startWait(t, i))
            },
            startWait: function (e, t) {
                this.waitNamespace = e, this.spawnWait(t)
            },
            delayWait: function (e) {
                clearTimeout(this.waitId), this.spawnWait(e)
            },
            spawnWait: function (e) {
                var t = this;
                this.waitId = setTimeout(function () {
                    t.waitNamespace = null, t.tryStart()
                }, e)
            },
            clearWait: function () {
                this.waitNamespace && (clearTimeout(this.waitId), this.waitId = null, this.waitNamespace = null)
            },
            canRunNext: function () {
                if (!dt.prototype.canRunNext.apply(this, arguments)) return !1;
                if (this.waitNamespace) {
                    for (var e = this.q, t = 0; t < e.length; t++)
                        if (e[t].namespace !== this.waitNamespace) return !0;
                    return !1
                }
                return !0
            },
            runTask: function (e) {
                this.runTaskFunc(e.func)
            },
            compoundTask: function (e) {
                var t, n, i = this.q,
                    r = !0;
                if (e.namespace && ("destroy" === e.type || "init" === e.type)) {
                    for (t = i.length - 1; t >= 0; t--) n = i[t], n.namespace !== e.namespace || "add" !== n.type && "remove" !== n.type || i.splice(t, 1);
                    "destroy" === e.type ? i.length && (n = i[i.length - 1], n.namespace === e.namespace && ("init" === n.type ? (r = !1, i.pop()) : "destroy" === n.type && (r = !1))) : "init" === e.type && i.length && (n = i[i.length - 1], n.namespace === e.namespace && "init" === n.type && i.pop())
                }
                return r && i.push(e), r
            }
        });
        Ve.RenderQueue = ht;
        var ft = Ve.EmitterMixin = {
            on: function (t, n) {
                return e(this).on(t, this._prepareIntercept(n)), this
            },
            one: function (t, n) {
                return e(this).one(t, this._prepareIntercept(n)), this
            },
            _prepareIntercept: function (t) {
                var n = function (e, n) {
                    return t.apply(n.context || this, n.args || [])
                };
                return t.guid || (t.guid = e.guid++), n.guid = t.guid, n
            },
            off: function (t, n) {
                return e(this).off(t, n), this
            },
            trigger: function (t) {
                var n = Array.prototype.slice.call(arguments, 1);
                return e(this).triggerHandler(t, {
                    args: n
                }), this
            },
            triggerWith: function (t, n, i) {
                return e(this).triggerHandler(t, {
                    context: n,
                    args: i
                }), this
            }
        },
            pt = Ve.ListenerMixin = function () {
                var t = 0,
                    n = {
                        listenerId: null,
                        listenTo: function (t, n, i) {
                            if ("object" == typeof n)
                                for (var r in n) n.hasOwnProperty(r) && this.listenTo(t, r, n[r]);
                            else "string" == typeof n && t.on(n + "." + this.getListenerNamespace(), e.proxy(i, this))
                        },
                        stopListeningTo: function (e, t) {
                            e.off((t || "") + "." + this.getListenerNamespace())
                        },
                        getListenerNamespace: function () {
                            return null == this.listenerId && (this.listenerId = t++), "_listener" + this.listenerId
                        }
                    };
                return n
            }(),
            mt = _e.extend(pt, {
                isHidden: !0,
                options: null,
                el: null,
                margin: 10,
                constructor: function (e) {
                    this.options = e || {}
                },
                show: function () {
                    this.isHidden && (this.el || this.render(), this.el.show(), this.position(), this.isHidden = !1, this.trigger("show"))
                },
                hide: function () {
                    this.isHidden || (this.el.hide(), this.isHidden = !0, this.trigger("hide"))
                },
                render: function () {
                    var t = this,
                        n = this.options;
                    this.el = e('<div class="fc-popover"/>').addClass(n.className || "").css({
                        top: 0,
                        left: 0
                    }).append(n.content).appendTo(n.parentEl), this.el.on("click", ".fc-close", function () {
                        t.hide()
                    }), n.autoHide && this.listenTo(e(document), "mousedown", this.documentMousedown)
                },
                documentMousedown: function (t) {
                    this.el && !e(t.target).closest(this.el).length && this.hide()
                },
                removeElement: function () {
                    this.hide(), this.el && (this.el.remove(), this.el = null), this.stopListeningTo(e(document), "mousedown")
                },
                position: function () {
                    var t, n, i, r, a, o = this.options,
                        s = this.el.offsetParent().offset(),
                        l = this.el.outerWidth(),
                        c = this.el.outerHeight(),
                        u = e(window),
                        h = d(this.el);
                    r = o.top || 0, a = void 0 !== o.left ? o.left : void 0 !== o.right ? o.right - l : 0, h.is(window) || h.is(document) ? (h = u, t = 0, n = 0) : (i = h.offset(), t = i.top, n = i.left), t += u.scrollTop(), n += u.scrollLeft(), o.viewportConstrain !== !1 && (r = Math.min(r, t + h.outerHeight() - c - this.margin), r = Math.max(r, t + this.margin), a = Math.min(a, n + h.outerWidth() - l - this.margin), a = Math.max(a, n + this.margin)), this.el.css({
                        top: r - s.top,
                        left: a - s.left
                    })
                },
                trigger: function (e) {
                    this.options[e] && this.options[e].apply(this, Array.prototype.slice.call(arguments, 1))
                }
            }),
            gt = Ve.CoordCache = _e.extend({
                els: null,
                forcedOffsetParentEl: null,
                origin: null,
                boundingRect: null,
                isHorizontal: !1,
                isVertical: !1,
                lefts: null,
                rights: null,
                tops: null,
                bottoms: null,
                constructor: function (t) {
                    this.els = e(t.els), this.isHorizontal = t.isHorizontal, this.isVertical = t.isVertical, this.forcedOffsetParentEl = t.offsetParent ? e(t.offsetParent) : null
                },
                build: function () {
                    var e = this.forcedOffsetParentEl;
                    !e && this.els.length > 0 && (e = this.els.eq(0).offsetParent()), this.origin = e ? e.offset() : null, this.boundingRect = this.queryBoundingRect(), this.isHorizontal && this.buildElHorizontals(), this.isVertical && this.buildElVerticals()
                },
                clear: function () {
                    this.origin = null, this.boundingRect = null, this.lefts = null, this.rights = null, this.tops = null, this.bottoms = null
                },
                ensureBuilt: function () {
                    this.origin || this.build()
                },
                buildElHorizontals: function () {
                    var t = [],
                        n = [];
                    this.els.each(function (i, r) {
                        var a = e(r),
                            o = a.offset().left,
                            s = a.outerWidth();
                        t.push(o), n.push(o + s)
                    }), this.lefts = t, this.rights = n
                },
                buildElVerticals: function () {
                    var t = [],
                        n = [];
                    this.els.each(function (i, r) {
                        var a = e(r),
                            o = a.offset().top,
                            s = a.outerHeight();
                        t.push(o), n.push(o + s)
                    }), this.tops = t, this.bottoms = n
                },
                getHorizontalIndex: function (e) {
                    this.ensureBuilt();
                    var t, n = this.lefts,
                        i = this.rights,
                        r = n.length;
                    for (t = 0; r > t; t++)
                        if (e >= n[t] && e < i[t]) return t
                },
                getVerticalIndex: function (e) {
                    this.ensureBuilt();
                    var t, n = this.tops,
                        i = this.bottoms,
                        r = n.length;
                    for (t = 0; r > t; t++)
                        if (e >= n[t] && e < i[t]) return t
                },
                getLeftOffset: function (e) {
                    return this.ensureBuilt(), this.lefts[e]
                },
                getLeftPosition: function (e) {
                    return this.ensureBuilt(), this.lefts[e] - this.origin.left
                },
                getRightOffset: function (e) {
                    return this.ensureBuilt(), this.rights[e]
                },
                getRightPosition: function (e) {
                    return this.ensureBuilt(), this.rights[e] - this.origin.left
                },
                getWidth: function (e) {
                    return this.ensureBuilt(), this.rights[e] - this.lefts[e]
                },
                getTopOffset: function (e) {
                    return this.ensureBuilt(), this.tops[e]
                },
                getTopPosition: function (e) {
                    return this.ensureBuilt(), this.tops[e] - this.origin.top
                },
                getBottomOffset: function (e) {
                    return this.ensureBuilt(), this.bottoms[e]
                },
                getBottomPosition: function (e) {
                    return this.ensureBuilt(), this.bottoms[e] - this.origin.top
                },
                getHeight: function (e) {
                    return this.ensureBuilt(), this.bottoms[e] - this.tops[e]
                },
                queryBoundingRect: function () {
                    var e;
                    return this.els.length > 0 && (e = d(this.els.eq(0)), !e.is(document)) ? f(e) : null
                },
                isPointInBounds: function (e, t) {
                    return this.isLeftInBounds(e) && this.isTopInBounds(t)
                },
                isLeftInBounds: function (e) {
                    return !this.boundingRect || e >= this.boundingRect.left && e < this.boundingRect.right
                },
                isTopInBounds: function (e) {
                    return !this.boundingRect || e >= this.boundingRect.top && e < this.boundingRect.bottom
                }
            }),
            vt = Ve.DragListener = _e.extend(pt, {
                options: null,
                subjectEl: null,
                originX: null,
                originY: null,
                scrollEl: null,
                isInteracting: !1,
                isDistanceSurpassed: !1,
                isDelayEnded: !1,
                isDragging: !1,
                isTouch: !1,
                isGeneric: !1,
                delay: null,
                delayTimeoutId: null,
                minDistance: null,
                shouldCancelTouchScroll: !0,
                scrollAlwaysKills: !1,
                constructor: function (e) {
                    this.options = e || {}
                },
                startInteraction: function (t, n) {
                    if ("mousedown" === t.type) {
                        if (bt.get().shouldIgnoreMouse()) return;
                        if (!w(t)) return;
                        t.preventDefault()
                    }
                    this.isInteracting || (n = n || {}, this.delay = ce(n.delay, this.options.delay, 0), this.minDistance = ce(n.distance, this.options.distance, 0), this.subjectEl = this.options.subjectEl, C(e("body")), this.isInteracting = !0, this.isTouch = k(t), this.isGeneric = "dragstart" === t.type, this.isDelayEnded = !1, this.isDistanceSurpassed = !1, this.originX = _(t), this.originY = x(t), this.scrollEl = d(e(t.target)), this.bindHandlers(), this.initAutoScroll(), this.handleInteractionStart(t), this.startDelay(t), this.minDistance || this.handleDistanceSurpassed(t))
                },
                handleInteractionStart: function (e) {
                    this.trigger("interactionStart", e)
                },
                endInteraction: function (t, n) {
                    this.isInteracting && (this.endDrag(t), this.delayTimeoutId && (clearTimeout(this.delayTimeoutId),
                        this.delayTimeoutId = null), this.destroyAutoScroll(), this.unbindHandlers(), this.isInteracting = !1, this.handleInteractionEnd(t, n), S(e("body")))
                },
                handleInteractionEnd: function (e, t) {
                    this.trigger("interactionEnd", e, t || !1)
                },
                bindHandlers: function () {
                    var t = bt.get();
                    this.isGeneric ? this.listenTo(e(document), {
                        drag: this.handleMove,
                        dragstop: this.endInteraction
                    }) : this.isTouch ? this.listenTo(t, {
                        touchmove: this.handleTouchMove,
                        touchend: this.endInteraction,
                        scroll: this.handleTouchScroll
                    }) : this.listenTo(t, {
                        mousemove: this.handleMouseMove,
                        mouseup: this.endInteraction
                    }), this.listenTo(t, {
                        selectstart: A,
                        contextmenu: A
                    })
                },
                unbindHandlers: function () {
                    this.stopListeningTo(bt.get()), this.stopListeningTo(e(document))
                },
                startDrag: function (e, t) {
                    this.startInteraction(e, t), this.isDragging || (this.isDragging = !0, this.handleDragStart(e))
                },
                handleDragStart: function (e) {
                    this.trigger("dragStart", e)
                },
                handleMove: function (e) {
                    var t, n = _(e) - this.originX,
                        i = x(e) - this.originY,
                        r = this.minDistance;
                    this.isDistanceSurpassed || (t = n * n + i * i, t >= r * r && this.handleDistanceSurpassed(e)), this.isDragging && this.handleDrag(n, i, e)
                },
                handleDrag: function (e, t, n) {
                    this.trigger("drag", e, t, n), this.updateAutoScroll(n)
                },
                endDrag: function (e) {
                    this.isDragging && (this.isDragging = !1, this.handleDragEnd(e))
                },
                handleDragEnd: function (e) {
                    this.trigger("dragEnd", e)
                },
                startDelay: function (e) {
                    var t = this;
                    this.delay ? this.delayTimeoutId = setTimeout(function () {
                        t.handleDelayEnd(e)
                    }, this.delay) : this.handleDelayEnd(e)
                },
                handleDelayEnd: function (e) {
                    this.isDelayEnded = !0, this.isDistanceSurpassed && this.startDrag(e)
                },
                handleDistanceSurpassed: function (e) {
                    this.isDistanceSurpassed = !0, this.isDelayEnded && this.startDrag(e)
                },
                handleTouchMove: function (e) {
                    this.isDragging && this.shouldCancelTouchScroll && e.preventDefault(), this.handleMove(e)
                },
                handleMouseMove: function (e) {
                    this.handleMove(e)
                },
                handleTouchScroll: function (e) {
                    (!this.isDragging || this.scrollAlwaysKills) && this.endInteraction(e, !0)
                },
                trigger: function (e) {
                    this.options[e] && this.options[e].apply(this, Array.prototype.slice.call(arguments, 1)), this["_" + e] && this["_" + e].apply(this, Array.prototype.slice.call(arguments, 1))
                }
            });
        vt.mixin({
            isAutoScroll: !1,
            scrollBounds: null,
            scrollTopVel: null,
            scrollLeftVel: null,
            scrollIntervalId: null,
            scrollSensitivity: 30,
            scrollSpeed: 200,
            scrollIntervalMs: 50,
            initAutoScroll: function () {
                var e = this.scrollEl;
                this.isAutoScroll = this.options.scroll && e && !e.is(window) && !e.is(document), this.isAutoScroll && this.listenTo(e, "scroll", ye(this.handleDebouncedScroll, 100))
            },
            destroyAutoScroll: function () {
                this.endAutoScroll(), this.isAutoScroll && this.stopListeningTo(this.scrollEl, "scroll")
            },
            computeScrollBounds: function () {
                this.isAutoScroll && (this.scrollBounds = h(this.scrollEl))
            },
            updateAutoScroll: function (e) {
                var t, n, i, r, a = this.scrollSensitivity,
                    o = this.scrollBounds,
                    s = 0,
                    l = 0;
                o && (t = (a - (x(e) - o.top)) / a, n = (a - (o.bottom - x(e))) / a, i = (a - (_(e) - o.left)) / a, r = (a - (o.right - _(e))) / a, t >= 0 && 1 >= t ? s = t * this.scrollSpeed * -1 : n >= 0 && 1 >= n && (s = n * this.scrollSpeed), i >= 0 && 1 >= i ? l = i * this.scrollSpeed * -1 : r >= 0 && 1 >= r && (l = r * this.scrollSpeed)), this.setScrollVel(s, l)
            },
            setScrollVel: function (e, t) {
                this.scrollTopVel = e, this.scrollLeftVel = t, this.constrainScrollVel(), !this.scrollTopVel && !this.scrollLeftVel || this.scrollIntervalId || (this.scrollIntervalId = setInterval(ve(this, "scrollIntervalFunc"), this.scrollIntervalMs))
            },
            constrainScrollVel: function () {
                var e = this.scrollEl;
                this.scrollTopVel < 0 ? e.scrollTop() <= 0 && (this.scrollTopVel = 0) : this.scrollTopVel > 0 && e.scrollTop() + e[0].clientHeight >= e[0].scrollHeight && (this.scrollTopVel = 0), this.scrollLeftVel < 0 ? e.scrollLeft() <= 0 && (this.scrollLeftVel = 0) : this.scrollLeftVel > 0 && e.scrollLeft() + e[0].clientWidth >= e[0].scrollWidth && (this.scrollLeftVel = 0)
            },
            scrollIntervalFunc: function () {
                var e = this.scrollEl,
                    t = this.scrollIntervalMs / 1e3;
                this.scrollTopVel && e.scrollTop(e.scrollTop() + this.scrollTopVel * t), this.scrollLeftVel && e.scrollLeft(e.scrollLeft() + this.scrollLeftVel * t), this.constrainScrollVel(), this.scrollTopVel || this.scrollLeftVel || this.endAutoScroll()
            },
            endAutoScroll: function () {
                this.scrollIntervalId && (clearInterval(this.scrollIntervalId), this.scrollIntervalId = null, this.handleScrollEnd())
            },
            handleDebouncedScroll: function () {
                this.scrollIntervalId || this.handleScrollEnd()
            },
            handleScrollEnd: function () { }
        });
        var yt = vt.extend({
            component: null,
            origHit: null,
            hit: null,
            coordAdjust: null,
            constructor: function (e, t) {
                vt.call(this, t), this.component = e
            },
            handleInteractionStart: function (e) {
                var t, n, i, r = this.subjectEl;
                this.component.hitsNeeded(), this.computeScrollBounds(), e ? (n = {
                    left: _(e),
                    top: x(e)
                }, i = n, r && (t = h(r), i = E(i, t)), this.origHit = this.queryHit(i.left, i.top), r && this.options.subjectCenter && (this.origHit && (t = T(this.origHit, t) || t), i = D(t)), this.coordAdjust = $(i, n)) : (this.origHit = null, this.coordAdjust = null), vt.prototype.handleInteractionStart.apply(this, arguments)
            },
            handleDragStart: function (e) {
                var t;
                vt.prototype.handleDragStart.apply(this, arguments), t = this.queryHit(_(e), x(e)), t && this.handleHitOver(t)
            },
            handleDrag: function (e, t, n) {
                var i;
                vt.prototype.handleDrag.apply(this, arguments), i = this.queryHit(_(n), x(n)), Ae(i, this.hit) || (this.hit && this.handleHitOut(), i && this.handleHitOver(i))
            },
            handleDragEnd: function () {
                this.handleHitDone(), vt.prototype.handleDragEnd.apply(this, arguments)
            },
            handleHitOver: function (e) {
                var t = Ae(e, this.origHit);
                this.hit = e, this.trigger("hitOver", this.hit, t, this.origHit)
            },
            handleHitOut: function () {
                this.hit && (this.trigger("hitOut", this.hit), this.handleHitDone(), this.hit = null)
            },
            handleHitDone: function () {
                this.hit && this.trigger("hitDone", this.hit)
            },
            handleInteractionEnd: function () {
                vt.prototype.handleInteractionEnd.apply(this, arguments), this.origHit = null, this.hit = null, this.component.hitsNotNeeded()
            },
            handleScrollEnd: function () {
                vt.prototype.handleScrollEnd.apply(this, arguments), this.isDragging && (this.component.releaseHits(), this.component.prepareHits())
            },
            queryHit: function (e, t) {
                return this.coordAdjust && (e += this.coordAdjust.left, t += this.coordAdjust.top), this.component.queryHit(e, t)
            }
        });
        Ve.touchMouseIgnoreWait = 500;
        var bt = _e.extend(pt, ft, {
            isTouching: !1,
            mouseIgnoreDepth: 0,
            handleScrollProxy: null,
            bind: function () {
                var t = this;
                this.listenTo(e(document), {
                    touchstart: this.handleTouchStart,
                    touchcancel: this.handleTouchCancel,
                    touchend: this.handleTouchEnd,
                    mousedown: this.handleMouseDown,
                    mousemove: this.handleMouseMove,
                    mouseup: this.handleMouseUp,
                    click: this.handleClick,
                    selectstart: this.handleSelectStart,
                    contextmenu: this.handleContextMenu
                }), window.addEventListener("touchmove", this.handleTouchMoveProxy = function (n) {
                    t.handleTouchMove(e.Event(n))
                }, {
                    passive: !1
                }), window.addEventListener("scroll", this.handleScrollProxy = function (n) {
                    t.handleScroll(e.Event(n))
                }, !0)
            },
            unbind: function () {
                this.stopListeningTo(e(document)), window.removeEventListener("touchmove", this.handleTouchMoveProxy), window.removeEventListener("scroll", this.handleScrollProxy, !0)
            },
            handleTouchStart: function (e) {
                this.stopTouch(e, !0), this.isTouching = !0, this.trigger("touchstart", e)
            },
            handleTouchMove: function (e) {
                this.isTouching && this.trigger("touchmove", e)
            },
            handleTouchCancel: function (e) {
                this.isTouching && (this.trigger("touchcancel", e), this.stopTouch(e))
            },
            handleTouchEnd: function (e) {
                this.stopTouch(e)
            },
            handleMouseDown: function (e) {
                this.shouldIgnoreMouse() || this.trigger("mousedown", e)
            },
            handleMouseMove: function (e) {
                this.shouldIgnoreMouse() || this.trigger("mousemove", e)
            },
            handleMouseUp: function (e) {
                this.shouldIgnoreMouse() || this.trigger("mouseup", e)
            },
            handleClick: function (e) {
                this.shouldIgnoreMouse() || this.trigger("click", e)
            },
            handleSelectStart: function (e) {
                this.trigger("selectstart", e)
            },
            handleContextMenu: function (e) {
                this.trigger("contextmenu", e)
            },
            handleScroll: function (e) {
                this.trigger("scroll", e)
            },
            stopTouch: function (e, t) {
                this.isTouching && (this.isTouching = !1, this.trigger("touchend", e), t || this.startTouchMouseIgnore())
            },
            startTouchMouseIgnore: function () {
                var e = this,
                    t = Ve.touchMouseIgnoreWait;
                t && (this.mouseIgnoreDepth++, setTimeout(function () {
                    e.mouseIgnoreDepth--
                }, t))
            },
            shouldIgnoreMouse: function () {
                return this.isTouching || Boolean(this.mouseIgnoreDepth)
            }
        });
        ! function () {
            var e = null,
                t = 0;
            bt.get = function () {
                return e || (e = new bt, e.bind()), e
            }, bt.needed = function () {
                bt.get(), t++
            }, bt.unneeded = function () {
                t--, t || (e.unbind(), e = null)
            }
        }();
        var wt = _e.extend(pt, {
            options: null,
            sourceEl: null,
            el: null,
            parentEl: null,
            top0: null,
            left0: null,
            y0: null,
            x0: null,
            topDelta: null,
            leftDelta: null,
            isFollowing: !1,
            isHidden: !1,
            isAnimating: !1,
            constructor: function (t, n) {
                this.options = n = n || {}, this.sourceEl = t, this.parentEl = n.parentEl ? e(n.parentEl) : t.parent()
            },
            start: function (t) {
                this.isFollowing || (this.isFollowing = !0, this.y0 = x(t), this.x0 = _(t), this.topDelta = 0, this.leftDelta = 0, this.isHidden || this.updatePosition(), k(t) ? this.listenTo(e(document), "touchmove", this.handleMove) : this.listenTo(e(document), "mousemove", this.handleMove))
            },
            stop: function (t, n) {
                function i() {
                    r.isAnimating = !1, r.removeElement(), r.top0 = r.left0 = null, n && n()
                }
                var r = this,
                    a = this.options.revertDuration;
                this.isFollowing && !this.isAnimating && (this.isFollowing = !1, this.stopListeningTo(e(document)), t && a && !this.isHidden ? (this.isAnimating = !0, this.el.animate({
                    top: this.top0,
                    left: this.left0
                }, {
                    duration: a,
                    complete: i
                })) : i())
            },
            getEl: function () {
                var e = this.el;
                return e || (e = this.el = this.sourceEl.clone().addClass(this.options.additionalClass || "").css({
                    position: "absolute",
                    visibility: "",
                    display: this.isHidden ? "none" : "",
                    margin: 0,
                    right: "auto",
                    bottom: "auto",
                    width: this.sourceEl.width(),
                    height: this.sourceEl.height(),
                    opacity: this.options.opacity || "",
                    zIndex: this.options.zIndex
                }), e.addClass("fc-unselectable"), e.appendTo(this.parentEl)), e
            },
            removeElement: function () {
                this.el && (this.el.remove(), this.el = null)
            },
            updatePosition: function () {
                var e, t;
                this.getEl(), null === this.top0 && (e = this.sourceEl.offset(), t = this.el.offsetParent().offset(), this.top0 = e.top - t.top, this.left0 = e.left - t.left), this.el.css({
                    top: this.top0 + this.topDelta,
                    left: this.left0 + this.leftDelta
                })
            },
            handleMove: function (e) {
                this.topDelta = x(e) - this.y0, this.leftDelta = _(e) - this.x0, this.isHidden || this.updatePosition()
            },
            hide: function () {
                this.isHidden || (this.isHidden = !0, this.el && this.el.hide())
            },
            show: function () {
                this.isHidden && (this.isHidden = !1, this.updatePosition(), this.getEl().show())
            }
        }),
            _t = Ve.Grid = _e.extend(pt, {
                hasDayInteractions: !0,
                view: null,
                isRTL: null,
                start: null,
                end: null,
                el: null,
                elsByFill: null,
                eventTimeFormat: null,
                displayEventTime: null,
                displayEventEnd: null,
                minResizeDuration: null,
                largeUnit: null,
                dayClickListener: null,
                daySelectListener: null,
                segDragListener: null,
                segResizeListener: null,
                externalDragListener: null,
                constructor: function (e) {
                    this.view = e, this.isRTL = e.opt("isRTL"), this.elsByFill = {}, this.dayClickListener = this.buildDayClickListener(), this.daySelectListener = this.buildDaySelectListener()
                },
                computeEventTimeFormat: function () {
                    return this.view.opt("smallTimeFormat")
                },
                computeDisplayEventTime: function () {
                    return !0
                },
                computeDisplayEventEnd: function () {
                    return !0
                },
                setRange: function (e) {
                    this.start = e.start.clone(), this.end = e.end.clone(), this.rangeUpdated(), this.processRangeOptions()
                },
                rangeUpdated: function () { },
                processRangeOptions: function () {
                    var e, t, n = this.view;
                    this.eventTimeFormat = n.opt("eventTimeFormat") || n.opt("timeFormat") || this.computeEventTimeFormat(), e = n.opt("displayEventTime"), null == e && (e = this.computeDisplayEventTime()), t = n.opt("displayEventEnd"), null == t && (t = this.computeDisplayEventEnd()), this.displayEventTime = e, this.displayEventEnd = t
                },
                spanToSegs: function (e) { },
                diffDates: function (e, t) {
                    return this.largeUnit ? N(e, t, this.largeUnit) : O(e, t)
                },
                hitsNeededDepth: 0,
                hitsNeeded: function () {
                    this.hitsNeededDepth++ || this.prepareHits()
                },
                hitsNotNeeded: function () {
                    this.hitsNeededDepth && !--this.hitsNeededDepth && this.releaseHits()
                },
                prepareHits: function () { },
                releaseHits: function () { },
                queryHit: function (e, t) { },
                getSafeHitSpan: function (e) {
                    var t = this.getHitSpan(e);
                    return K(t, this.view.activeRange) ? t : null
                },
                getHitSpan: function (e) { },
                getHitEl: function (e) { },
                setElement: function (e) {
                    this.el = e, this.hasDayInteractions && (C(e), this.bindDayHandler("touchstart", this.dayTouchStart), this.bindDayHandler("mousedown", this.dayMousedown)), this.bindSegHandlers(), this.bindGlobalHandlers()
                },
                bindDayHandler: function (t, n) {
                    var i = this;
                    this.el.on(t, function (t) {
                        return e(t.target).is(i.segSelector + "," + i.segSelector + " *,.fc-more,a[data-goto]") ? void 0 : n.call(i, t)
                    })
                },
                removeElement: function () {
                    this.unbindGlobalHandlers(), this.clearDragListeners(), this.el.remove()
                },
                renderSkeleton: function () { },
                renderDates: function () { },
                unrenderDates: function () { },
                bindGlobalHandlers: function () {
                    this.listenTo(e(document), {
                        dragstart: this.externalDragStart,
                        sortstart: this.externalDragStart
                    })
                },
                unbindGlobalHandlers: function () {
                    this.stopListeningTo(e(document))
                },
                dayMousedown: function (e) {
                    var t = this.view;
                    bt.get().shouldIgnoreMouse() || (this.dayClickListener.startInteraction(e), t.opt("selectable") && this.daySelectListener.startInteraction(e, {
                        distance: t.opt("selectMinDistance")
                    }))
                },
                dayTouchStart: function (e) {
                    var t, n = this.view;
                    n.isSelected || n.selectedEvent || (t = n.opt("selectLongPressDelay"), null == t && (t = n.opt("longPressDelay")), this.dayClickListener.startInteraction(e), n.opt("selectable") && this.daySelectListener.startInteraction(e, {
                        delay: t
                    }))
                },
                buildDayClickListener: function () {
                    var e, t = this,
                        n = this.view,
                        i = new yt(this, {
                            scroll: n.opt("dragScroll"),
                            interactionStart: function () {
                                e = i.origHit
                            },
                            hitOver: function (t, n, i) {
                                n || (e = null)
                            },
                            hitOut: function () {
                                e = null
                            },
                            interactionEnd: function (i, r) {
                                var a;
                                !r && e && (a = t.getSafeHitSpan(e), a && n.triggerDayClick(a, t.getHitEl(e), i))
                            }
                        });
                    return i.shouldCancelTouchScroll = !1, i.scrollAlwaysKills = !0, i
                },
                buildDaySelectListener: function () {
                    var e, t = this,
                        n = this.view,
                        i = new yt(this, {
                            scroll: n.opt("dragScroll"),
                            interactionStart: function () {
                                e = null
                            },
                            dragStart: function () {
                                n.unselect()
                            },
                            hitOver: function (n, i, r) {
                                var o, s;
                                r && (o = t.getSafeHitSpan(r), s = t.getSafeHitSpan(n), e = o && s ? t.computeSelection(o, s) : null, e ? t.renderSelection(e) : e === !1 && a())
                            },
                            hitOut: function () {
                                e = null, t.unrenderSelection()
                            },
                            hitDone: function () {
                                o()
                            },
                            interactionEnd: function (t, i) {
                                !i && e && n.reportSelection(e, t)
                            }
                        });
                    return i
                },
                clearDragListeners: function () {
                    this.dayClickListener.endInteraction(), this.daySelectListener.endInteraction(), this.segDragListener && this.segDragListener.endInteraction(), this.segResizeListener && this.segResizeListener.endInteraction(), this.externalDragListener && this.externalDragListener.endInteraction()
                },
                renderEventLocationHelper: function (e, t) {
                    var n = this.fabricateHelperEvent(e, t);
                    return this.renderHelper(n, t)
                },
                fabricateHelperEvent: function (e, t) {
                    var n = t ? re(t.event) : {};
                    return n.start = e.start.clone(), n.end = e.end ? e.end.clone() : null, n.allDay = null, this.view.calendar.normalizeEventDates(n), n.className = (n.className || []).concat("fc-helper"), t || (n.editable = !1), n
                },
                renderHelper: function (e, t) { },
                unrenderHelper: function () { },
                renderSelection: function (e) {
                    this.renderHighlight(e)
                },
                unrenderSelection: function () {
                    this.unrenderHighlight()
                },
                computeSelection: function (e, t) {
                    var n = this.computeSelectionSpan(e, t);
                    return n && !this.view.calendar.isSelectionSpanAllowed(n) ? !1 : n
                },
                computeSelectionSpan: function (e, t) {
                    var n = [e.start, e.end, t.start, t.end];
                    return n.sort(me), {
                        start: n[0].clone(),
                        end: n[3].clone()
                    }
                },
                renderHighlight: function (e) {
                    this.renderFill("highlight", this.spanToSegs(e))
                },
                unrenderHighlight: function () {
                    this.unrenderFill("highlight")
                },
                highlightSegClasses: function () {
                    return ["fc-highlight"]
                },
                renderBusinessHours: function () { },
                unrenderBusinessHours: function () { },
                getNowIndicatorUnit: function () { },
                renderNowIndicator: function (e) { },
                unrenderNowIndicator: function () { },
                renderFill: function (e, t) { },
                unrenderFill: function (e) {
                    var t = this.elsByFill[e];
                    t && (t.remove(), delete this.elsByFill[e])
                },
                renderFillSegEls: function (t, n) {
                    var i, r = this,
                        a = this[t + "SegEl"],
                        o = "",
                        s = [];
                    if (n.length) {
                        for (i = 0; i < n.length; i++) o += this.fillSegHtml(t, n[i]);
                        e(o).each(function (t, i) {
                            var o = n[t],
                                l = e(i);
                            a && (l = a.call(r, o, l)), l && (l = e(l), l.is(r.fillSegTag) && (o.el = l, s.push(o)))
                        })
                    }
                    return s
                },
                fillSegTag: "div",
                fillSegHtml: function (e, t) {
                    var n = this[e + "SegClasses"],
                        i = this[e + "SegCss"],
                        r = n ? n.call(this, t) : [],
                        a = he(i ? i.call(this, t) : {});
                    return "<" + this.fillSegTag + (r.length ? ' class="' + r.join(" ") + '"' : "") + (a ? ' style="' + a + '"' : "") + " />"
                },
                getDayClasses: function (e, t) {
                    var n, i = this.view,
                        r = [];
                    return V(e, i.activeRange) ? (r.push("fc-" + Qe[e.day()]), 1 == i.currentRangeAs("months") && e.month() != i.currentRange.start.month() && r.push("fc-other-month"), n = i.calendar.getNow(), e.isSame(n, "day") ? (r.push("fc-today"), t !== !0 && r.push(i.highlightStateClass)) : n > e ? r.push("fc-past") : r.push("fc-future")) : r.push("fc-disabled-day"), r
                }
            });
        _t.mixin({
            segSelector: ".fc-event-container > *",
            mousedOverSeg: null,
            isDraggingSeg: !1,
            isResizingSeg: !1,
            isDraggingExternal: !1,
            segs: null,
            renderEvents: function (e) {
                var t, n = [],
                    i = [];
                for (t = 0; t < e.length; t++)(De(e[t]) ? n : i).push(e[t]);
                this.segs = [].concat(this.renderBgEvents(n), this.renderFgEvents(i))
            },
            renderBgEvents: function (e) {
                var t = this.eventsToSegs(e);
                return this.renderBgSegs(t) || t
            },
            renderFgEvents: function (e) {
                var t = this.eventsToSegs(e);
                return this.renderFgSegs(t) || t
            },
            unrenderEvents: function () {
                this.handleSegMouseout(), this.clearDragListeners(), this.unrenderFgSegs(), this.unrenderBgSegs(), this.segs = null
            },
            getEventSegs: function () {
                return this.segs || []
            },
            renderFgSegs: function (e) { },
            unrenderFgSegs: function () { },
            renderFgSegEls: function (t, n) {
                var i, r = this.view,
                    a = "",
                    o = [];
                if (t.length) {
                    for (i = 0; i < t.length; i++) a += this.fgSegHtml(t[i], n);
                    e(a).each(function (n, i) {
                        var a = t[n],
                            s = r.resolveEventEl(a.event, e(i));
                        s && (s.data("fc-seg", a), a.el = s, o.push(a))
                    })
                }
                return o
            },
            fgSegHtml: function (e, t) { },
            renderBgSegs: function (e) {
                return this.renderFill("bgEvent", e)
            },
            unrenderBgSegs: function () {
                this.unrenderFill("bgEvent")
            },
            bgEventSegEl: function (e, t) {
                return this.view.resolveEventEl(e.event, t)
            },
            bgEventSegClasses: function (e) {
                var t = e.event,
                    n = t.source || {};
                return ["fc-bgevent"].concat(t.className, n.className || [])
            },
            bgEventSegCss: function (e) {
                return {
                    "background-color": this.getSegSkinCss(e)["background-color"]
                }
            },
            businessHoursSegClasses: function (e) {
                return ["fc-nonbusiness", "fc-bgevent"]
            },
            buildBusinessHourSegs: function (e, t) {
                return this.eventsToSegs(this.buildBusinessHourEvents(e, t))
            },
            buildBusinessHourEvents: function (t, n) {
                var i, r = this.view.calendar;
                return null == n && (n = r.opt("businessHours")), i = r.computeBusinessHourEvents(t, n), !i.length && n && (i = [e.extend({}, Pt, {
                    start: this.view.activeRange.end,
                    end: this.view.activeRange.end,
                    dow: null
                })]), i
            },
            bindSegHandlers: function () {
                this.bindSegHandlersToEl(this.el)
            },
            bindSegHandlersToEl: function (e) {
                this.bindSegHandlerToEl(e, "touchstart", this.handleSegTouchStart), this.bindSegHandlerToEl(e, "mouseenter", this.handleSegMouseover), this.bindSegHandlerToEl(e, "mouseleave", this.handleSegMouseout), this.bindSegHandlerToEl(e, "mousedown", this.handleSegMousedown), this.bindSegHandlerToEl(e, "click", this.handleSegClick)
            },
            bindSegHandlerToEl: function (t, n, i) {
                var r = this;
                t.on(n, this.segSelector, function (t) {
                    var n = e(this).data("fc-seg");
                    return !n || r.isDraggingSeg || r.isResizingSeg ? void 0 : i.call(r, n, t)
                })
            },
            handleSegClick: function (e, t) {
                var n = this.view.publiclyTrigger("eventClick", e.el[0], e.event, t);
                n === !1 && t.preventDefault()
            },
            handleSegMouseover: function (e, t) {
                bt.get().shouldIgnoreMouse() || this.mousedOverSeg || (this.mousedOverSeg = e, this.view.isEventResizable(e.event) && e.el.addClass("fc-allow-mouse-resize"), this.view.publiclyTrigger("eventMouseover", e.el[0], e.event, t))
            },
            handleSegMouseout: function (e, t) {
                t = t || {}, this.mousedOverSeg && (e = e || this.mousedOverSeg, this.mousedOverSeg = null, this.view.isEventResizable(e.event) && e.el.removeClass("fc-allow-mouse-resize"), this.view.publiclyTrigger("eventMouseout", e.el[0], e.event, t))
            },
            handleSegMousedown: function (e, t) {
                var n = this.startSegResize(e, t, {
                    distance: 5
                });
                !n && this.view.isEventDraggable(e.event) && this.buildSegDragListener(e).startInteraction(t, {
                    distance: 5
                })
            },
            handleSegTouchStart: function (e, t) {
                var n, i, r = this.view,
                    a = e.event,
                    o = r.isEventSelected(a),
                    s = r.isEventDraggable(a),
                    l = r.isEventResizable(a),
                    c = !1;
                o && l && (c = this.startSegResize(e, t)), c || !s && !l || (i = r.opt("eventLongPressDelay"), null == i && (i = r.opt("longPressDelay")), n = s ? this.buildSegDragListener(e) : this.buildSegSelectListener(e), n.startInteraction(t, {
                    delay: o ? 0 : i
                }))
            },
            startSegResize: function (t, n, i) {
                return e(n.target).is(".fc-resizer") ? (this.buildSegResizeListener(t, e(n.target).is(".fc-start-resizer")).startInteraction(n, i), !0) : !1
            },
            buildSegDragListener: function (e) {
                var t, n, i, r = this,
                    s = this.view,
                    l = e.el,
                    c = e.event;
                if (this.segDragListener) return this.segDragListener;
                var u = this.segDragListener = new yt(s, {
                    scroll: s.opt("dragScroll"),
                    subjectEl: l,
                    subjectCenter: !0,
                    interactionStart: function (i) {
                        e.component = r, t = !1, n = new wt(e.el, {
                            additionalClass: "fc-dragging",
                            parentEl: s.el,
                            opacity: u.isTouch ? null : s.opt("dragOpacity"),
                            revertDuration: s.opt("dragRevertDuration"),
                            zIndex: 2
                        }), n.hide(), n.start(i)
                    },
                    dragStart: function (n) {
                        u.isTouch && !s.isEventSelected(c) && s.selectEvent(c), t = !0, r.handleSegMouseout(e, n), r.segDragStart(e, n), s.hideEvent(c)
                    },
                    hitOver: function (t, o, l) {
                        var d, h, f, p = !0;
                        e.hit && (l = e.hit), d = l.component.getSafeHitSpan(l), h = t.component.getSafeHitSpan(t), d && h ? (i = r.computeEventDrop(d, h, c), p = i && r.isEventLocationAllowed(i, c)) : p = !1, p || (i = null, a()), i && (f = s.renderDrag(i, e)) ? (f.addClass("fc-dragging"), u.isTouch || r.applyDragOpacity(f), n.hide()) : n.show(), o && (i = null)
                    },
                    hitOut: function () {
                        s.unrenderDrag(), n.show(), i = null
                    },
                    hitDone: function () {
                        o()
                    },
                    interactionEnd: function (a) {
                        delete e.component, n.stop(!i, function () {
                            t && (s.unrenderDrag(), r.segDragStop(e, a)), i ? s.reportSegDrop(e, i, r.largeUnit, l, a) : s.showEvent(c)
                        }), r.segDragListener = null
                    }
                });
                return u
            },
            buildSegSelectListener: function (e) {
                var t = this,
                    n = this.view,
                    i = e.event;
                if (this.segDragListener) return this.segDragListener;
                var r = this.segDragListener = new vt({
                    dragStart: function (e) {
                        r.isTouch && !n.isEventSelected(i) && n.selectEvent(i)
                    },
                    interactionEnd: function (e) {
                        t.segDragListener = null
                    }
                });
                return r
            },
            segDragStart: function (e, t) {
                this.isDraggingSeg = !0, this.view.publiclyTrigger("eventDragStart", e.el[0], e.event, t, {})
            },
            segDragStop: function (e, t) {
                this.isDraggingSeg = !1, this.view.publiclyTrigger("eventDragStop", e.el[0], e.event, t, {})
            },
            computeEventDrop: function (e, t, n) {
                var i, r, a = this.view.calendar,
                    o = e.start,
                    s = t.start;
                return o.hasTime() === s.hasTime() ? (i = this.diffDates(s, o), n.allDay && ee(i) ? (r = {
                    start: n.start.clone(),
                    end: a.getEventEnd(n),
                    allDay: !1
                }, a.normalizeEventTimes(r)) : r = Ee(n), r.start.add(i), r.end && r.end.add(i)) : r = {
                    start: s.clone(),
                    end: null,
                    allDay: !s.hasTime()
                }, r
            },
            applyDragOpacity: function (e) {
                var t = this.view.opt("dragOpacity");
                null != t && e.css("opacity", t)
            },
            externalDragStart: function (t, n) {
                var i, r, a = this.view;
                a.opt("droppable") && (i = e((n ? n.item : null) || t.target), r = a.opt("dropAccept"), (e.isFunction(r) ? r.call(i[0], i) : i.is(r)) && (this.isDraggingExternal || this.listenToExternalDrag(i, t, n)))
            },
            listenToExternalDrag: function (e, t, n) {
                var i, r = this,
                    s = this.view,
                    l = Pe(e),
                    c = r.externalDragListener = new yt(this, {
                        interactionStart: function () {
                            r.isDraggingExternal = !0
                        },
                        hitOver: function (e) {
                            var t = !0,
                                n = e.component.getSafeHitSpan(e);
                            n ? (i = r.computeExternalDrop(n, l), t = i && r.isExternalLocationAllowed(i, l.eventProps)) : t = !1, t || (i = null, a()), i && r.renderDrag(i)
                        },
                        hitOut: function () {
                            i = null
                        },
                        hitDone: function () {
                            o(), r.unrenderDrag()
                        },
                        interactionEnd: function (t) {
                            i && s.reportExternalDrop(l, i, e, t, n), r.isDraggingExternal = !1, r.externalDragListener = null
                        }
                    });
                c.startDrag(t)
            },
            computeExternalDrop: function (e, t) {
                var n = this.view.calendar,
                    i = {
                        start: n.applyTimezone(e.start),
                        end: null
                    };
                return t.startTime && !i.start.hasTime() && i.start.time(t.startTime), t.duration && (i.end = i.start.clone().add(t.duration)), i
            },
            renderDrag: function (e, t) { },
            unrenderDrag: function () { },
            buildSegResizeListener: function (e, t) {
                var n, i, r = this,
                    s = this.view,
                    l = s.calendar,
                    c = e.el,
                    u = e.event,
                    d = l.getEventEnd(u),
                    h = this.segResizeListener = new yt(this, {
                        scroll: s.opt("dragScroll"),
                        subjectEl: c,
                        interactionStart: function () {
                            n = !1
                        },
                        dragStart: function (t) {
                            n = !0, r.handleSegMouseout(e, t), r.segResizeStart(e, t)
                        },
                        hitOver: function (n, o, l) {
                            var c = !0,
                                h = r.getSafeHitSpan(l),
                                f = r.getSafeHitSpan(n);
                            h && f ? (i = t ? r.computeEventStartResize(h, f, u) : r.computeEventEndResize(h, f, u), c = i && r.isEventLocationAllowed(i, u)) : c = !1, c ? i.start.isSame(u.start.clone().stripZone()) && i.end.isSame(d.clone().stripZone()) && (i = null) : (i = null, a()), i && (s.hideEvent(u), r.renderEventResize(i, e))
                        },
                        hitOut: function () {
                            i = null, s.showEvent(u)
                        },
                        hitDone: function () {
                            r.unrenderEventResize(), o()
                        },
                        interactionEnd: function (t) {
                            n && r.segResizeStop(e, t), i ? s.reportSegResize(e, i, r.largeUnit, c, t) : s.showEvent(u), r.segResizeListener = null
                        }
                    });
                return h
            },
            segResizeStart: function (e, t) {
                this.isResizingSeg = !0, this.view.publiclyTrigger("eventResizeStart", e.el[0], e.event, t, {})
            },
            segResizeStop: function (e, t) {
                this.isResizingSeg = !1, this.view.publiclyTrigger("eventResizeStop", e.el[0], e.event, t, {})
            },
            computeEventStartResize: function (e, t, n) {
                return this.computeEventResize("start", e, t, n)
            },
            computeEventEndResize: function (e, t, n) {
                return this.computeEventResize("end", e, t, n)
            },
            computeEventResize: function (e, t, n, i) {
                var r, a, o = this.view.calendar,
                    s = this.diffDates(n[e], t[e]);
                return r = {
                    start: i.start.clone(),
                    end: o.getEventEnd(i),
                    allDay: i.allDay
                }, r.allDay && ee(s) && (r.allDay = !1, o.normalizeEventTimes(r)), r[e].add(s), r.start.isBefore(r.end) || (a = this.minResizeDuration || (i.allDay ? o.defaultAllDayEventDuration : o.defaultTimedEventDuration), "start" == e ? r.start = r.end.clone().subtract(a) : r.end = r.start.clone().add(a)), r
            },
            renderEventResize: function (e, t) { },
            unrenderEventResize: function () { },
            getEventTimeText: function (e, t, n) {
                return null == t && (t = this.eventTimeFormat), null == n && (n = this.displayEventEnd), this.displayEventTime && e.start.hasTime() ? n && e.end ? this.view.formatRange(e, t) : e.start.format(t) : ""
            },
            getSegClasses: function (e, t, n) {
                var i = this.view,
                    r = ["fc-event", e.isStart ? "fc-start" : "fc-not-start", e.isEnd ? "fc-end" : "fc-not-end"].concat(this.getSegCustomClasses(e));
                return t && r.push("fc-draggable"), n && r.push("fc-resizable"), i.isEventSelected(e.event) && r.push("fc-selected"), r
            },
            getSegCustomClasses: function (e) {
                var t = e.event;
                return [].concat(t.className, t.source ? t.source.className : [])
            },
            getSegSkinCss: function (e) {
                return {
                    "background-color": this.getSegBackgroundColor(e),
                    "border-color": this.getSegBorderColor(e),
                    color: this.getSegTextColor(e)
                }
            },
            getSegBackgroundColor: function (e) {
                return e.event.backgroundColor || e.event.color || this.getSegDefaultBackgroundColor(e)
            },
            getSegDefaultBackgroundColor: function (e) {
                var t = e.event.source || {};
                return t.backgroundColor || t.color || this.view.opt("eventBackgroundColor") || this.view.opt("eventColor")
            },
            getSegBorderColor: function (e) {
                return e.event.borderColor || e.event.color || this.getSegDefaultBorderColor(e)
            },
            getSegDefaultBorderColor: function (e) {
                var t = e.event.source || {};
                return t.borderColor || t.color || this.view.opt("eventBorderColor") || this.view.opt("eventColor")
            },
            getSegTextColor: function (e) {
                return e.event.textColor || this.getSegDefaultTextColor(e)
            },
            getSegDefaultTextColor: function (e) {
                var t = e.event.source || {};
                return t.textColor || this.view.opt("eventTextColor")
            },
            isEventLocationAllowed: function (e, t) {
                if (this.isEventLocationInRange(e)) {
                    var n, i = this.view.calendar,
                        r = this.eventToSpans(e);
                    if (r.length) {
                        for (n = 0; n < r.length; n++)
                            if (!i.isEventSpanAllowed(r[n], t)) return !1;
                        return !0
                    }
                }
                return !1
            },
            isExternalLocationAllowed: function (e, t) {
                if (this.isEventLocationInRange(e)) {
                    var n, i = this.view.calendar,
                        r = this.eventToSpans(e);
                    if (r.length) {
                        for (n = 0; n < r.length; n++)
                            if (!i.isExternalSpanAllowed(r[n], e, t)) return !1;
                        return !0
                    }
                }
                return !1
            },
            isEventLocationInRange: function (e) {
                return K(this.eventToRawRange(e), this.view.validRange)
            },
            eventToSegs: function (e) {
                return this.eventsToSegs([e])
            },
            eventToSpans: function (e) {
                var t = this.eventToRange(e);
                return t ? this.eventRangeToSpans(t, e) : []
            },
            eventsToSegs: function (t, n) {
                var i = this,
                    r = Re(t),
                    a = [];
                return e.each(r, function (e, t) {
                    var r, o, s = [],
                        l = [];
                    for (o = 0; o < t.length; o++) r = i.eventToRange(t[o]), r && (l.push(r), s.push(t[o]));
                    if ($e(t[0]))
                        for (l = i.invertRanges(l), o = 0; o < l.length; o++) a.push.apply(a, i.eventRangeToSegs(l[o], t[0], n));
                    else
                        for (o = 0; o < l.length; o++) a.push.apply(a, i.eventRangeToSegs(l[o], s[o], n))
                }), a
            },
            eventToRange: function (e) {
                return this.refineRawEventRange(this.eventToRawRange(e))
            },
            refineRawEventRange: function (e) {
                var t = this.view,
                    n = t.calendar,
                    i = H(e, t.activeRange);
                return i ? (n.localizeMoment(i.start), n.localizeMoment(i.end), i) : void 0
            },
            eventToRawRange: function (e) {
                var t = this.view.calendar,
                    n = e.start.clone().stripZone(),
                    i = (e.end ? e.end.clone() : t.getDefaultEventEnd(null != e.allDay ? e.allDay : !e.start.hasTime(), e.start)).stripZone();
                return {
                    start: n,
                    end: i
                }
            },
            eventRangeToSegs: function (e, t, n) {
                var i, r = this.eventRangeToSpans(e, t),
                    a = [];
                for (i = 0; i < r.length; i++) a.push.apply(a, this.eventSpanToSegs(r[i], t, n));
                return a
            },
            eventRangeToSpans: function (t, n) {
                return [e.extend({}, t)]
            },
            eventSpanToSegs: function (e, t, n) {
                var i, r, a = n ? n(e) : this.spanToSegs(e);
                for (i = 0; i < a.length; i++) r = a[i], e.isStart || (r.isStart = !1), e.isEnd || (r.isEnd = !1), r.event = t, r.eventStartMS = +e.start, r.eventDurationMS = e.end - e.start;
                return a
            },
            invertRanges: function (e) {
                var t, n, i = this.view,
                    r = i.activeRange.start.clone(),
                    a = i.activeRange.end.clone(),
                    o = [],
                    s = r;
                for (e.sort(Ie), t = 0; t < e.length; t++) n = e[t], n.start > s && o.push({
                    start: s,
                    end: n.start
                }), n.end > s && (s = n.end);
                return a > s && o.push({
                    start: s,
                    end: a
                }), o
            },
            sortEventSegs: function (e) {
                e.sort(ve(this, "compareEventSegs"))
            },
            compareEventSegs: function (e, t) {
                return e.eventStartMS - t.eventStartMS || t.eventDurationMS - e.eventDurationMS || t.event.allDay - e.event.allDay || R(e.event, t.event, this.view.eventOrderSpecs)
            }
        }), Ve.pluckEventDateProps = Ee, Ve.isBgEvent = De, Ve.dataAttrPrefix = "";
        var xt = Ve.DayTableMixin = {
            breakOnWeeks: !1,
            dayDates: null,
            dayIndices: null,
            daysPerRow: null,
            rowCnt: null,
            colCnt: null,
            colHeadFormat: null,
            updateDayTable: function () {
                for (var e, t, n, i = this.view, r = this.start.clone(), a = -1, o = [], s = []; r.isBefore(this.end);) i.isHiddenDay(r) ? o.push(a + .5) : (a++, o.push(a), s.push(r.clone())), r.add(1, "days");
                if (this.breakOnWeeks) {
                    for (t = s[0].day(), e = 1; e < s.length && s[e].day() != t; e++);
                    n = Math.ceil(s.length / e)
                } else n = 1, e = s.length;
                this.dayDates = s, this.dayIndices = o, this.daysPerRow = e, this.rowCnt = n, this.updateDayTableCols()
            },
            updateDayTableCols: function () {
                this.colCnt = this.computeColCnt(), this.colHeadFormat = this.view.opt("columnFormat") || this.computeColHeadFormat()
            },
            computeColCnt: function () {
                return this.daysPerRow
            },
            getCellDate: function (e, t) {
                return this.dayDates[this.getCellDayIndex(e, t)].clone()
            },
            getCellRange: function (e, t) {
                var n = this.getCellDate(e, t),
                    i = n.clone().add(1, "days");
                return {
                    start: n,
                    end: i
                }
            },
            getCellDayIndex: function (e, t) {
                return e * this.daysPerRow + this.getColDayIndex(t)
            },
            getColDayIndex: function (e) {
                return this.isRTL ? this.colCnt - 1 - e : e
            },
            getDateDayIndex: function (e) {
                var t = this.dayIndices,
                    n = e.diff(this.start, "days");
                return 0 > n ? t[0] - 1 : n >= t.length ? t[t.length - 1] + 1 : t[n]
            },
            computeColHeadFormat: function () {
                return this.rowCnt > 1 || this.colCnt > 10 ? "ddd" : this.colCnt > 1 ? this.view.opt("dayOfMonthFormat") : "dddd"
            },
            sliceRangeByRow: function (e) {
                var t, n, i, r, a, o = this.daysPerRow,
                    s = this.view.computeDayRange(e),
                    l = this.getDateDayIndex(s.start),
                    c = this.getDateDayIndex(s.end.clone().subtract(1, "days")),
                    u = [];
                for (t = 0; t < this.rowCnt; t++) n = t * o, i = n + o - 1, r = Math.max(l, n), a = Math.min(c, i), r = Math.ceil(r), a = Math.floor(a), a >= r && u.push({
                    row: t,
                    firstRowDayIndex: r - n,
                    lastRowDayIndex: a - n,
                    isStart: r === l,
                    isEnd: a === c
                });
                return u
            },
            sliceRangeByDay: function (e) {
                var t, n, i, r, a, o, s = this.daysPerRow,
                    l = this.view.computeDayRange(e),
                    c = this.getDateDayIndex(l.start),
                    u = this.getDateDayIndex(l.end.clone().subtract(1, "days")),
                    d = [];
                for (t = 0; t < this.rowCnt; t++)
                    for (n = t * s, i = n + s - 1, r = n; i >= r; r++) a = Math.max(c, r), o = Math.min(u, r), a = Math.ceil(a), o = Math.floor(o), o >= a && d.push({
                        row: t,
                        firstRowDayIndex: a - n,
                        lastRowDayIndex: o - n,
                        isStart: a === c,
                        isEnd: o === u
                    });
                return d
            },
            renderHeadHtml: function () {
                var e = this.view;
                return '<div class="fc-row ' + e.widgetHeaderClass + '"><table><thead>' + this.renderHeadTrHtml() + "</thead></table></div>"
            },
            renderHeadIntroHtml: function () {
                return this.renderIntroHtml()
            },
            renderHeadTrHtml: function () {
                return "<tr>" + (this.isRTL ? "" : this.renderHeadIntroHtml()) + this.renderHeadDateCellsHtml() + (this.isRTL ? this.renderHeadIntroHtml() : "") + "</tr>"
            },
            renderHeadDateCellsHtml: function () {
                var e, t, n = [];
                for (e = 0; e < this.colCnt; e++) t = this.getCellDate(0, e), n.push(this.renderHeadDateCellHtml(t));
                return n.join("")
            },
            renderHeadDateCellHtml: function (e, t, n) {
                var i = this.view,
                    r = V(e, i.activeRange),
                    a = ["fc-day-header", i.widgetHeaderClass],
                    o = ue(e.format(this.colHeadFormat));
                return 1 === this.rowCnt ? a = a.concat(this.getDayClasses(e, !0)) : a.push("fc-" + Qe[e.day()]), '<th class="' + a.join(" ") + '"' + (1 === (r && this.rowCnt) ? ' data-date="' + e.format("YYYY-MM-DD") + '"' : "") + (t > 1 ? ' colspan="' + t + '"' : "") + (n ? " " + n : "") + ">" + (r ? i.buildGotoAnchorHtml({
                    date: e,
                    forceOff: this.rowCnt > 1 || 1 === this.colCnt
                }, o) : o) + "</th>"
            },
            renderBgTrHtml: function (e) {
                return "<tr>" + (this.isRTL ? "" : this.renderBgIntroHtml(e)) + this.renderBgCellsHtml(e) + (this.isRTL ? this.renderBgIntroHtml(e) : "") + "</tr>"
            },
            renderBgIntroHtml: function (e) {
                return this.renderIntroHtml()
            },
            renderBgCellsHtml: function (e) {
                var t, n, i = [];
                for (t = 0; t < this.colCnt; t++) n = this.getCellDate(e, t), i.push(this.renderBgCellHtml(n));
                return i.join("")
            },
            renderBgCellHtml: function (e, t) {
                var n = this.view,
                    i = V(e, n.activeRange),
                    r = this.getDayClasses(e);
                return r.unshift("fc-day", n.widgetContentClass), '<td class="' + r.join(" ") + '"' + (i ? ' data-date="' + e.format("YYYY-MM-DD") + '"' : "") + (t ? " " + t : "") + "></td>"
            },
            renderIntroHtml: function () { },
            bookendCells: function (e) {
                var t = this.renderIntroHtml();
                t && (this.isRTL ? e.append(t) : e.prepend(t))
            }
        },
            kt = Ve.DayGrid = _t.extend(xt, {
                numbersVisible: !1,
                bottomCoordPadding: 0,
                rowEls: null,
                cellEls: null,
                helperEls: null,
                rowCoordCache: null,
                colCoordCache: null,
                renderDates: function (e) {
                    var t, n, i = this.view,
                        r = this.rowCnt,
                        a = this.colCnt,
                        o = "";
                    for (t = 0; r > t; t++) o += this.renderDayRowHtml(t, e);
                    for (this.el.html(o), this.rowEls = this.el.find(".fc-row"), this.cellEls = this.el.find(".fc-day, .fc-disabled-day"), this.rowCoordCache = new gt({
                        els: this.rowEls,
                        isVertical: !0
                    }), this.colCoordCache = new gt({
                        els: this.cellEls.slice(0, this.colCnt),
                        isHorizontal: !0
                    }), t = 0; r > t; t++)
                        for (n = 0; a > n; n++) i.publiclyTrigger("dayRender", null, this.getCellDate(t, n), this.getCellEl(t, n))
                },
                unrenderDates: function () {
                    this.removeSegPopover()
                },
                renderBusinessHours: function () {
                    var e = this.buildBusinessHourSegs(!0);
                    this.renderFill("businessHours", e, "bgevent")
                },
                unrenderBusinessHours: function () {
                    this.unrenderFill("businessHours")
                },
                renderDayRowHtml: function (e, t) {
                    var n = this.view,
                        i = ["fc-row", "fc-week", n.widgetContentClass];
                    return t && i.push("fc-rigid"), '<div class="' + i.join(" ") + '"><div class="fc-bg"><table>' + this.renderBgTrHtml(e) + '</table></div><div class="fc-content-skeleton"><table>' + (this.numbersVisible ? "<thead>" + this.renderNumberTrHtml(e) + "</thead>" : "") + "</table></div></div>"
                },
                renderNumberTrHtml: function (e) {
                    return "<tr>" + (this.isRTL ? "" : this.renderNumberIntroHtml(e)) + this.renderNumberCellsHtml(e) + (this.isRTL ? this.renderNumberIntroHtml(e) : "") + "</tr>"
                },
                renderNumberIntroHtml: function (e) {
                    return this.renderIntroHtml()
                },
                renderNumberCellsHtml: function (e) {
                    var t, n, i = [];
                    for (t = 0; t < this.colCnt; t++) n = this.getCellDate(e, t), i.push(this.renderNumberCellHtml(n));
                    return i.join("")
                },
                renderNumberCellHtml: function (e) {
                    var t, n, i = this.view,
                        r = "",
                        a = V(e, i.activeRange),
                        o = i.dayNumbersVisible && a;
                    return o || i.cellWeekNumbersVisible ? (t = this.getDayClasses(e), t.unshift("fc-day-top"), i.cellWeekNumbersVisible && (n = "ISO" === e._locale._fullCalendar_weekCalc ? 1 : e._locale.firstDayOfWeek()), r += '<td class="' + t.join(" ") + '"' + (a ? ' data-date="' + e.format() + '"' : "") + ">", i.cellWeekNumbersVisible && e.day() == n && (r += i.buildGotoAnchorHtml({
                        date: e,
                        type: "week"
                    }, {
                        "class": "fc-week-number"
                    }, e.format("w"))), o && (r += i.buildGotoAnchorHtml(e, {
                        "class": "fc-day-number"
                    }, e.date())), r += "</td>") : "<td/>"
                },
                computeEventTimeFormat: function () {
                    return this.view.opt("extraSmallTimeFormat")
                },
                computeDisplayEventEnd: function () {
                    return 1 == this.colCnt
                },
                rangeUpdated: function () {
                    this.updateDayTable()
                },
                spanToSegs: function (e) {
                    var t, n, i = this.sliceRangeByRow(e);
                    for (t = 0; t < i.length; t++) n = i[t], this.isRTL ? (n.leftCol = this.daysPerRow - 1 - n.lastRowDayIndex, n.rightCol = this.daysPerRow - 1 - n.firstRowDayIndex) : (n.leftCol = n.firstRowDayIndex, n.rightCol = n.lastRowDayIndex);
                    return i
                },
                prepareHits: function () {
                    this.colCoordCache.build(), this.rowCoordCache.build(), this.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding
                },
                releaseHits: function () {
                    this.colCoordCache.clear(), this.rowCoordCache.clear()
                },
                queryHit: function (e, t) {
                    if (this.colCoordCache.isLeftInBounds(e) && this.rowCoordCache.isTopInBounds(t)) {
                        var n = this.colCoordCache.getHorizontalIndex(e),
                            i = this.rowCoordCache.getVerticalIndex(t);
                        if (null != i && null != n) return this.getCellHit(i, n)
                    }
                },
                getHitSpan: function (e) {
                    return this.getCellRange(e.row, e.col)
                },
                getHitEl: function (e) {
                    return this.getCellEl(e.row, e.col)
                },
                getCellHit: function (e, t) {
                    return {
                        row: e,
                        col: t,
                        component: this,
                        left: this.colCoordCache.getLeftOffset(t),
                        right: this.colCoordCache.getRightOffset(t),
                        top: this.rowCoordCache.getTopOffset(e),
                        bottom: this.rowCoordCache.getBottomOffset(e)
                    }
                },
                getCellEl: function (e, t) {
                    return this.cellEls.eq(e * this.colCnt + t)
                },
                renderDrag: function (e, t) {
                    var n, i = this.eventToSpans(e);
                    for (n = 0; n < i.length; n++) this.renderHighlight(i[n]);
                    return t && t.component !== this ? this.renderEventLocationHelper(e, t) : void 0
                },
                unrenderDrag: function () {
                    this.unrenderHighlight(), this.unrenderHelper()
                },
                renderEventResize: function (e, t) {
                    var n, i = this.eventToSpans(e);
                    for (n = 0; n < i.length; n++) this.renderHighlight(i[n]);
                    return this.renderEventLocationHelper(e, t)
                },
                unrenderEventResize: function () {
                    this.unrenderHighlight(), this.unrenderHelper()
                },
                renderHelper: function (t, n) {
                    var i, r = [],
                        a = this.eventToSegs(t);
                    return a = this.renderFgSegEls(a), i = this.renderSegRows(a), this.rowEls.each(function (t, a) {
                        var o, s = e(a),
                            l = e('<div class="fc-helper-skeleton"><table/></div>');
                        o = n && n.row === t ? n.el.position().top : s.find(".fc-content-skeleton tbody").position().top, l.css("top", o).find("table").append(i[t].tbodyEl), s.append(l), r.push(l[0])
                    }), this.helperEls = e(r)
                },
                unrenderHelper: function () {
                    this.helperEls && (this.helperEls.remove(), this.helperEls = null)
                },
                fillSegTag: "td",
                renderFill: function (t, n, i) {
                    var r, a, o, s = [];
                    for (n = this.renderFillSegEls(t, n), r = 0; r < n.length; r++) a = n[r], o = this.renderFillRow(t, a, i), this.rowEls.eq(a.row).append(o), s.push(o[0]);
                    return this.elsByFill[t] = e(s), n
                },
                renderFillRow: function (t, n, i) {
                    var r, a, o = this.colCnt,
                        s = n.leftCol,
                        l = n.rightCol + 1;
                    return i = i || t.toLowerCase(), r = e('<div class="fc-' + i + '-skeleton"><table><tr/></table></div>'), a = r.find("tr"), s > 0 && a.append('<td colspan="' + s + '"/>'), a.append(n.el.attr("colspan", l - s)), o > l && a.append('<td colspan="' + (o - l) + '"/>'), this.bookendCells(a), r
                }
            });
        kt.mixin({
            rowStructs: null,
            unrenderEvents: function () {
                this.removeSegPopover(), _t.prototype.unrenderEvents.apply(this, arguments)
            },
            getEventSegs: function () {
                return _t.prototype.getEventSegs.call(this).concat(this.popoverSegs || [])
            },
            renderBgSegs: function (t) {
                var n = e.grep(t, function (e) {
                    return e.event.allDay
                });
                return _t.prototype.renderBgSegs.call(this, n)
            },
            renderFgSegs: function (t) {
                var n;
                return t = this.renderFgSegEls(t), n = this.rowStructs = this.renderSegRows(t), this.rowEls.each(function (t, i) {
                    e(i).find(".fc-content-skeleton > table").append(n[t].tbodyEl)
                }), t
            },
            unrenderFgSegs: function () {
                for (var e, t = this.rowStructs || []; e = t.pop();) e.tbodyEl.remove();
                this.rowStructs = null
            },
            renderSegRows: function (e) {
                var t, n, i = [];
                for (t = this.groupSegRows(e), n = 0; n < t.length; n++) i.push(this.renderSegRow(n, t[n]));
                return i
            },
            fgSegHtml: function (e, t) {
                var n, i, r = this.view,
                    a = e.event,
                    o = r.isEventDraggable(a),
                    s = !t && a.allDay && e.isStart && r.isEventResizableFromStart(a),
                    l = !t && a.allDay && e.isEnd && r.isEventResizableFromEnd(a),
                    c = this.getSegClasses(e, o, s || l),
                    u = he(this.getSegSkinCss(e)),
                    d = "";
                return c.unshift("fc-day-grid-event", "fc-h-event"), e.isStart && (n = this.getEventTimeText(a), n && (d = '<span class="fc-time">' + ue(n) + "</span>")), i = '<span class="fc-title">' + (ue(a.title || "") || "&nbsp;") + "</span>", '<a class="' + c.join(" ") + '"' + (a.url ? ' href="' + ue(a.url) + '"' : "") + (u ? ' style="' + u + '"' : "") + '><div class="fc-content">' + (this.isRTL ? i + " " + d : d + " " + i) + "</div>" + (s ? '<div class="fc-resizer fc-start-resizer" />' : "") + (l ? '<div class="fc-resizer fc-end-resizer" />' : "") + "</a>"
            },
            renderSegRow: function (t, n) {
                function i(t) {
                    for (; t > o;) u = (v[r - 1] || [])[o], u ? u.attr("rowspan", parseInt(u.attr("rowspan") || 1, 10) + 1) : (u = e("<td/>"), s.append(u)), g[r][o] = u, v[r][o] = u, o++
                }
                var r, a, o, s, l, c, u, d = this.colCnt,
                    h = this.buildSegLevels(n),
                    f = Math.max(1, h.length),
                    p = e("<tbody/>"),
                    m = [],
                    g = [],
                    v = [];
                for (r = 0; f > r; r++) {
                    if (a = h[r], o = 0, s = e("<tr/>"), m.push([]), g.push([]), v.push([]), a)
                        for (l = 0; l < a.length; l++) {
                            for (c = a[l], i(c.leftCol), u = e('<td class="fc-event-container"/>').append(c.el), c.leftCol != c.rightCol ? u.attr("colspan", c.rightCol - c.leftCol + 1) : v[r][o] = u; o <= c.rightCol;) g[r][o] = u, m[r][o] = c, o++;
                            s.append(u)
                        }
                    i(d), this.bookendCells(s), p.append(s)
                }
                return {
                    row: t,
                    tbodyEl: p,
                    cellMatrix: g,
                    segMatrix: m,
                    segLevels: h,
                    segs: n
                }
            },
            buildSegLevels: function (e) {
                var t, n, i, r = [];
                for (this.sortEventSegs(e), t = 0; t < e.length; t++) {
                    for (n = e[t], i = 0; i < r.length && He(n, r[i]); i++);
                    n.level = i, (r[i] || (r[i] = [])).push(n)
                }
                for (i = 0; i < r.length; i++) r[i].sort(Oe);
                return r
            },
            groupSegRows: function (e) {
                var t, n = [];
                for (t = 0; t < this.rowCnt; t++) n.push([]);
                for (t = 0; t < e.length; t++) n[e[t].row].push(e[t]);
                return n
            }
        }), kt.mixin({
            segPopover: null,
            popoverSegs: null,
            removeSegPopover: function () {
                this.segPopover && this.segPopover.hide()
            },
            limitRows: function (e) {
                var t, n, i = this.rowStructs || [];
                for (t = 0; t < i.length; t++) this.unlimitRow(t), n = e ? "number" == typeof e ? e : this.computeRowLevelLimit(t) : !1, n !== !1 && this.limitRow(t, n)
            },
            computeRowLevelLimit: function (t) {
                function n(t, n) {
                    a = Math.max(a, e(n).outerHeight())
                }
                var i, r, a, o = this.rowEls.eq(t),
                    s = o.height(),
                    l = this.rowStructs[t].tbodyEl.children();
                for (i = 0; i < l.length; i++)
                    if (r = l.eq(i).removeClass("fc-limited"), a = 0, r.find("> td > :first-child").each(n), r.position().top + a > s) return i;
                return !1
            },
            limitRow: function (t, n) {
                function i(i) {
                    for (; i > x;) c = b.getCellSegs(t, x, n), c.length && (h = a[n - 1][x], y = b.renderMoreLink(t, x, c), v = e("<div/>").append(y), h.append(v), _.push(v[0])), x++
                }
                var r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b = this,
                    w = this.rowStructs[t],
                    _ = [],
                    x = 0;
                if (n && n < w.segLevels.length) {
                    for (r = w.segLevels[n - 1], a = w.cellMatrix, o = w.tbodyEl.children().slice(n).addClass("fc-limited").get(), s = 0; s < r.length; s++) {
                        for (l = r[s], i(l.leftCol), d = [], u = 0; x <= l.rightCol;) c = this.getCellSegs(t, x, n), d.push(c), u += c.length, x++;
                        if (u) {
                            for (h = a[n - 1][l.leftCol], f = h.attr("rowspan") || 1, p = [], m = 0; m < d.length; m++) g = e('<td class="fc-more-cell"/>').attr("rowspan", f), c = d[m], y = this.renderMoreLink(t, l.leftCol + m, [l].concat(c)), v = e("<div/>").append(y), g.append(v), p.push(g[0]), _.push(g[0]);
                            h.addClass("fc-limited").after(e(p)), o.push(h[0])
                        }
                    }
                    i(this.colCnt), w.moreEls = e(_), w.limitedEls = e(o)
                }
            },
            unlimitRow: function (e) {
                var t = this.rowStructs[e];
                t.moreEls && (t.moreEls.remove(), t.moreEls = null), t.limitedEls && (t.limitedEls.removeClass("fc-limited"), t.limitedEls = null)
            },
            renderMoreLink: function (t, n, i) {
                var r = this,
                    a = this.view;
                return e('<a class="fc-more"/>').text(this.getMoreLinkText(i.length)).on("click", function (o) {
                    var s = a.opt("eventLimitClick"),
                        l = r.getCellDate(t, n),
                        c = e(this),
                        u = r.getCellEl(t, n),
                        d = r.getCellSegs(t, n),
                        h = r.resliceDaySegs(d, l),
                        f = r.resliceDaySegs(i, l);
                    "function" == typeof s && (s = a.publiclyTrigger("eventLimitClick", null, {
                        date: l,
                        dayEl: u,
                        moreEl: c,
                        segs: h,
                        hiddenSegs: f
                    }, o)), "popover" === s ? r.showSegPopover(t, n, c, h) : "string" == typeof s && a.calendar.zoomTo(l, s)
                })
            },
            showSegPopover: function (e, t, n, i) {
                var r, a, o = this,
                    s = this.view,
                    l = n.parent();
                r = 1 == this.rowCnt ? s.el : this.rowEls.eq(e), a = {
                    className: "fc-more-popover",
                    content: this.renderSegPopoverContent(e, t, i),
                    parentEl: this.view.el,
                    top: r.offset().top,
                    autoHide: !0,
                    viewportConstrain: s.opt("popoverViewportConstrain"),
                    hide: function () {
                        if (o.popoverSegs)
                            for (var e, t = 0; t < o.popoverSegs.length; ++t) e = o.popoverSegs[t], s.publiclyTrigger("eventDestroy", e.event, e.event, e.el);
                        o.segPopover.removeElement(), o.segPopover = null, o.popoverSegs = null
                    }
                }, this.isRTL ? a.right = l.offset().left + l.outerWidth() + 1 : a.left = l.offset().left - 1, this.segPopover = new mt(a), this.segPopover.show(), this.bindSegHandlersToEl(this.segPopover.el)
            },
            renderSegPopoverContent: function (t, n, i) {
                var r, a = this.view,
                    o = a.opt("theme"),
                    s = this.getCellDate(t, n).format(a.opt("dayPopoverFormat")),
                    l = e('<div class="fc-header ' + a.widgetHeaderClass + '"><span class="fc-close ' + (o ? "ui-icon ui-icon-closethick" : "fc-icon fc-icon-x") + '"></span><span class="fc-title">' + ue(s) + '</span><div class="fc-clear"/></div><div class="fc-body ' + a.widgetContentClass + '"><div class="fc-event-container"></div></div>'),
                    c = l.find(".fc-event-container");
                for (i = this.renderFgSegEls(i, !0), this.popoverSegs = i, r = 0; r < i.length; r++) this.hitsNeeded(), i[r].hit = this.getCellHit(t, n), this.hitsNotNeeded(), c.append(i[r].el);
                return l
            },
            resliceDaySegs: function (t, n) {
                var i = e.map(t, function (e) {
                    return e.event
                }),
                    r = n.clone(),
                    a = r.clone().add(1, "days"),
                    o = {
                        start: r,
                        end: a
                    };
                return t = this.eventsToSegs(i, function (e) {
                    var t = H(e, o);
                    return t ? [t] : []
                }), this.sortEventSegs(t), t
            },
            getMoreLinkText: function (e) {
                var t = this.view.opt("eventLimitText");
                return "function" == typeof t ? t(e) : "+" + e + " " + t
            },
            getCellSegs: function (e, t, n) {
                for (var i, r = this.rowStructs[e].segMatrix, a = n || 0, o = []; a < r.length;) i = r[a][t], i && o.push(i), a++;
                return o
            }
        });
        var Ct = Ve.TimeGrid = _t.extend(xt, {
            slotDuration: null,
            snapDuration: null,
            snapsPerSlot: null,
            labelFormat: null,
            labelInterval: null,
            colEls: null,
            slatContainerEl: null,
            slatEls: null,
            nowIndicatorEls: null,
            colCoordCache: null,
            slatCoordCache: null,
            constructor: function () {
                _t.apply(this, arguments), this.processOptions()
            },
            renderDates: function () {
                this.el.html(this.renderHtml()), this.colEls = this.el.find(".fc-day, .fc-disabled-day"), this.slatContainerEl = this.el.find(".fc-slats"), this.slatEls = this.slatContainerEl.find("tr"), this.colCoordCache = new gt({
                    els: this.colEls,
                    isHorizontal: !0
                }), this.slatCoordCache = new gt({
                    els: this.slatEls,
                    isVertical: !0
                }), this.renderContentSkeleton()
            },
            renderHtml: function () {
                return '<div class="fc-bg"><table>' + this.renderBgTrHtml(0) + '</table></div><div class="fc-slats"><table>' + this.renderSlatRowHtml() + "</table></div>"
            },
            renderSlatRowHtml: function () {
                for (var e, n, i, r = this.view, a = this.isRTL, o = "", s = t.duration(+this.view.minTime); s < this.view.maxTime;) e = this.start.clone().time(s), n = ge(W(s, this.labelInterval)), i = '<td class="fc-axis fc-time ' + r.widgetContentClass + '" ' + r.axisStyleAttr() + ">" + (n ? "<span>" + ue(e.format(this.labelFormat)) + "</span>" : "") + "</td>", o += '<tr data-time="' + e.format("HH:mm:ss") + '"' + (n ? "" : ' class="fc-minor"') + ">" + (a ? "" : i) + '<td class="' + r.widgetContentClass + '"/>' + (a ? i : "") + "</tr>", s.add(this.slotDuration);
                return o
            },
            processOptions: function () {
                var n, i = this.view,
                    r = i.opt("slotDuration"),
                    a = i.opt("snapDuration");
                r = t.duration(r), a = a ? t.duration(a) : r, this.slotDuration = r, this.snapDuration = a, this.snapsPerSlot = r / a, this.minResizeDuration = a, n = i.opt("slotLabelFormat"), e.isArray(n) && (n = n[n.length - 1]), this.labelFormat = n || i.opt("smallTimeFormat"), n = i.opt("slotLabelInterval"), this.labelInterval = n ? t.duration(n) : this.computeLabelInterval(r)
            },
            computeLabelInterval: function (e) {
                var n, i, r;
                for (n = Bt.length - 1; n >= 0; n--)
                    if (i = t.duration(Bt[n]), r = W(i, e), ge(r) && r > 1) return i;
                return t.duration(e)
            },
            computeEventTimeFormat: function () {
                return this.view.opt("noMeridiemTimeFormat")
            },
            computeDisplayEventEnd: function () {
                return !0
            },
            prepareHits: function () {
                this.colCoordCache.build(), this.slatCoordCache.build()
            },
            releaseHits: function () {
                this.colCoordCache.clear()
            },
            queryHit: function (e, t) {
                var n = this.snapsPerSlot,
                    i = this.colCoordCache,
                    r = this.slatCoordCache;
                if (i.isLeftInBounds(e) && r.isTopInBounds(t)) {
                    var a = i.getHorizontalIndex(e),
                        o = r.getVerticalIndex(t);
                    if (null != a && null != o) {
                        var s = r.getTopOffset(o),
                            l = r.getHeight(o),
                            c = (t - s) / l,
                            u = Math.floor(c * n),
                            d = o * n + u,
                            h = s + u / n * l,
                            f = s + (u + 1) / n * l;
                        return {
                            col: a,
                            snap: d,
                            component: this,
                            left: i.getLeftOffset(a),
                            right: i.getRightOffset(a),
                            top: h,
                            bottom: f
                        }
                    }
                }
            },
            getHitSpan: function (e) {
                var t, n = this.getCellDate(0, e.col),
                    i = this.computeSnapTime(e.snap);
                return n.time(i), t = n.clone().add(this.snapDuration), {
                    start: n,
                    end: t
                }
            },
            getHitEl: function (e) {
                return this.colEls.eq(e.col)
            },
            rangeUpdated: function () {
                this.updateDayTable()
            },
            computeSnapTime: function (e) {
                return t.duration(this.view.minTime + this.snapDuration * e)
            },
            spanToSegs: function (e) {
                var t, n = this.sliceRangeByTimes(e);
                for (t = 0; t < n.length; t++) this.isRTL ? n[t].col = this.daysPerRow - 1 - n[t].dayIndex : n[t].col = n[t].dayIndex;
                return n
            },
            sliceRangeByTimes: function (e) {
                var t, n, i, r, a = [];
                for (n = 0; n < this.daysPerRow; n++) i = this.dayDates[n].clone().time(0), r = {
                    start: i.clone().add(this.view.minTime),
                    end: i.clone().add(this.view.maxTime)
                }, t = H(e, r), t && (t.dayIndex = n, a.push(t));
                return a
            },
            updateSize: function (e) {
                this.slatCoordCache.build(), e && this.updateSegVerticals([].concat(this.fgSegs || [], this.bgSegs || [], this.businessSegs || []))
            },
            getTotalSlatHeight: function () {
                return this.slatContainerEl.outerHeight()
            },
            computeDateTop: function (e, n) {
                return this.computeTimeTop(t.duration(e - n.clone().stripTime()))
            },
            computeTimeTop: function (e) {
                var t, n, i = this.slatEls.length,
                    r = (e - this.view.minTime) / this.slotDuration;
                return r = Math.max(0, r), r = Math.min(i, r), t = Math.floor(r), t = Math.min(t, i - 1), n = r - t, this.slatCoordCache.getTopPosition(t) + this.slatCoordCache.getHeight(t) * n
            },
            renderDrag: function (e, t) {
                var n, i;
                if (t) return this.renderEventLocationHelper(e, t);
                for (n = this.eventToSpans(e), i = 0; i < n.length; i++) this.renderHighlight(n[i])
            },
            unrenderDrag: function () {
                this.unrenderHelper(), this.unrenderHighlight()
            },
            renderEventResize: function (e, t) {
                return this.renderEventLocationHelper(e, t)
            },
            unrenderEventResize: function () {
                this.unrenderHelper()
            },
            renderHelper: function (e, t) {
                return this.renderHelperSegs(this.eventToSegs(e), t)
            },
            unrenderHelper: function () {
                this.unrenderHelperSegs()
            },
            renderBusinessHours: function () {
                this.renderBusinessSegs(this.buildBusinessHourSegs())
            },
            unrenderBusinessHours: function () {
                this.unrenderBusinessSegs()
            },
            getNowIndicatorUnit: function () {
                return "minute"
            },
            renderNowIndicator: function (t) {
                var n, i = this.spanToSegs({
                    start: t,
                    end: t
                }),
                    r = this.computeDateTop(t, t),
                    a = [];
                for (n = 0; n < i.length; n++) a.push(e('<div data-hour="' + t.format("HH") + '"class="fc-now-indicator fc-now-indicator-line"></div>').css("top", r).appendTo(this.colContainerEls.eq(i[n].col))[0]);
                i.length > 0 && a.push(e('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top", r).appendTo(this.el.find(".fc-content-skeleton"))[0]), this.nowIndicatorEls = e(a)
            },
            unrenderNowIndicator: function () {
                this.nowIndicatorEls && (this.nowIndicatorEls.remove(), this.nowIndicatorEls = null)
            },
            renderSelection: function (e) {
                this.view.opt("selectHelper") ? this.renderEventLocationHelper(e) : this.renderHighlight(e)
            },
            unrenderSelection: function () {
                this.unrenderHelper(), this.unrenderHighlight()
            },
            renderHighlight: function (e) {
                this.renderHighlightSegs(this.spanToSegs(e))
            },
            unrenderHighlight: function () {
                this.unrenderHighlightSegs()
            }
        });
        Ct.mixin({
            colContainerEls: null,
            fgContainerEls: null,
            bgContainerEls: null,
            helperContainerEls: null,
            highlightContainerEls: null,
            businessContainerEls: null,
            fgSegs: null,
            bgSegs: null,
            helperSegs: null,
            highlightSegs: null,
            businessSegs: null,
            renderContentSkeleton: function () {
                var t, n, i = "";
                for (t = 0; t < this.colCnt; t++) i += '<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';
                n = e('<div class="fc-content-skeleton"><table><tr>' + i + "</tr></table></div>"), this.colContainerEls = n.find(".fc-content-col"), this.helperContainerEls = n.find(".fc-helper-container"), this.fgContainerEls = n.find(".fc-event-container:not(.fc-helper-container)"), this.bgContainerEls = n.find(".fc-bgevent-container"), this.highlightContainerEls = n.find(".fc-highlight-container"), this.businessContainerEls = n.find(".fc-business-container"), this.bookendCells(n.find("tr")), this.el.append(n)
            },
            renderFgSegs: function (e) {
                return e = this.renderFgSegsIntoContainers(e, this.fgContainerEls), this.fgSegs = e, e
            },
            unrenderFgSegs: function () {
                this.unrenderNamedSegs("fgSegs")
            },
            renderHelperSegs: function (t, n) {
                var i, r, a, o = [];
                for (t = this.renderFgSegsIntoContainers(t, this.helperContainerEls), i = 0; i < t.length; i++) r = t[i], n && n.col === r.col && (a = n.el, r.el.css({
                    left: a.css("left"),
                    right: a.css("right"),
                    "margin-left": a.css("margin-left"),
                    "margin-right": a.css("margin-right")
                })), o.push(r.el[0]);
                return this.helperSegs = t, e(o)
            },
            unrenderHelperSegs: function () {
                this.unrenderNamedSegs("helperSegs")
            },
            renderBgSegs: function (e) {
                return e = this.renderFillSegEls("bgEvent", e), this.updateSegVerticals(e), this.attachSegsByCol(this.groupSegsByCol(e), this.bgContainerEls), this.bgSegs = e, e
            },
            unrenderBgSegs: function () {
                this.unrenderNamedSegs("bgSegs")
            },
            renderHighlightSegs: function (e) {
                e = this.renderFillSegEls("highlight", e), this.updateSegVerticals(e), this.attachSegsByCol(this.groupSegsByCol(e), this.highlightContainerEls), this.highlightSegs = e
            },
            unrenderHighlightSegs: function () {
                this.unrenderNamedSegs("highlightSegs")
            },
            renderBusinessSegs: function (e) {
                e = this.renderFillSegEls("businessHours", e), this.updateSegVerticals(e), this.attachSegsByCol(this.groupSegsByCol(e), this.businessContainerEls), this.businessSegs = e
            },
            unrenderBusinessSegs: function () {
                this.unrenderNamedSegs("businessSegs")
            },
            groupSegsByCol: function (e) {
                var t, n = [];
                for (t = 0; t < this.colCnt; t++) n.push([]);
                for (t = 0; t < e.length; t++) n[e[t].col].push(e[t]);
                return n
            },
            attachSegsByCol: function (e, t) {
                var n, i, r;
                for (n = 0; n < this.colCnt; n++)
                    for (i = e[n], r = 0; r < i.length; r++) t.eq(n).append(i[r].el)
            },
            unrenderNamedSegs: function (e) {
                var t, n = this[e];
                if (n) {
                    for (t = 0; t < n.length; t++) n[t].el.remove();
                    this[e] = null
                }
            },
            renderFgSegsIntoContainers: function (e, t) {
                var n, i;
                for (e = this.renderFgSegEls(e), n = this.groupSegsByCol(e), i = 0; i < this.colCnt; i++) this.updateFgSegCoords(n[i]);
                return this.attachSegsByCol(n, t), e
            },
            fgSegHtml: function (e, t) {
                var n, i, r, a = this.view,
                    o = e.event,
                    s = a.isEventDraggable(o),
                    l = !t && e.isStart && a.isEventResizableFromStart(o),
                    c = !t && e.isEnd && a.isEventResizableFromEnd(o),
                    u = this.getSegClasses(e, s, l || c),
                    d = he(this.getSegSkinCss(e));
                return u.unshift("fc-time-grid-event", "fc-v-event"), a.isMultiDayEvent(o) ? (e.isStart || e.isEnd) && (n = this.getEventTimeText(e), i = this.getEventTimeText(e, "LT"), r = this.getEventTimeText(e, null, !1)) : (n = this.getEventTimeText(o), i = this.getEventTimeText(o, "LT"), r = this.getEventTimeText(o, null, !1)), '<a class="' + u.join(" ") + '"' + (o.url ? ' href="' + ue(o.url) + '"' : "") + (d ? ' style="' + d + '"' : "") + '><div class="fc-content">' + (n ? '<div class="fc-time" data-start="' + ue(r) + '" data-full="' + ue(i) + '"><span>' + ue(n) + "</span></div>" : "") + (o.title ? '<div class="fc-title">' + ue(o.title) + "</div>" : "") + '</div><div class="fc-bg"/>' + (c ? '<div class="fc-resizer fc-end-resizer" />' : "") + "</a>"
            },
            updateSegVerticals: function (e) {
                this.computeSegVerticals(e), this.assignSegVerticals(e)
            },
            computeSegVerticals: function (e) {
                var t, n, i;
                for (t = 0; t < e.length; t++) n = e[t], i = this.dayDates[n.dayIndex], n.top = this.computeDateTop(n.start, i), this.computeDateTop(n.end, i) - n.top < this.view.opt("minSegmentHeight") ? n.bottom = n.top + this.view.opt("minSegmentHeight") : n.bottom = this.computeDateTop(n.end, i)
            },
            assignSegVerticals: function (e) {
                var t, n;
                for (t = 0; t < e.length; t++) n = e[t], n.el.css(this.generateSegVerticalCss(n))
            },
            generateSegVerticalCss: function (e) {
                return {
                    top: e.top,
                    bottom: -e.bottom
                }
            },
            updateFgSegCoords: function (e) {
                this.computeSegVerticals(e), this.computeFgSegHorizontals(e), this.assignSegVerticals(e), this.assignFgSegHorizontals(e)
            },
            computeFgSegHorizontals: function (e) {
                var t, n, i;
                if (this.sortEventSegs(e), t = je(e), Ne(t), n = t[0]) {
                    for (i = 0; i < n.length; i++) ze(n[i]);
                    for (i = 0; i < n.length; i++) this.computeFgSegForwardBack(n[i], 0, 0)
                }
            },
            computeFgSegForwardBack: function (e, t, n) {
                var i, r = e.forwardSegs;
                if (void 0 === e.forwardCoord)
                    for (r.length ? (this.sortForwardSegs(r), this.computeFgSegForwardBack(r[0], t + 1, n), e.forwardCoord = r[0].backwardCoord) : e.forwardCoord = 1, e.backwardCoord = e.forwardCoord - (e.forwardCoord - n) / (t + 1), i = 0; i < r.length; i++) this.computeFgSegForwardBack(r[i], 0, e.forwardCoord)
            },
            sortForwardSegs: function (e) {
                e.sort(ve(this, "compareForwardSegs"))
            },
            compareForwardSegs: function (e, t) {
                return t.forwardPressure - e.forwardPressure || (e.backwardCoord || 0) - (t.backwardCoord || 0) || this.compareEventSegs(e, t)
            },
            assignFgSegHorizontals: function (e) {
                var t, n;
                for (t = 0; t < e.length; t++) n = e[t], n.el.css(this.generateFgSegHorizontalCss(n)), n.bottom - n.top < 30 && n.el.addClass("fc-short")
            },
            generateFgSegHorizontalCss: function (e) {
                var t, n, i = this.view.opt("slotEventOverlap"),
                    r = e.backwardCoord,
                    a = e.forwardCoord,
                    o = this.generateSegVerticalCss(e);
                return i && (a = Math.min(1, r + 2 * (a - r))), (r % 1 !== 0 || a % 1 !== 0) && (o.minWidth = "calc(" + 100 * (a - r) + "% - 2px)"), this.isRTL ? (t = 1 - a, n = r) : (t = r, n = 1 - a), o.zIndex = e.level + 1, o.left = 100 * t + "%", o.right = 100 * n + "%", i && e.forwardPressure && (o[this.isRTL ? "marginLeft" : "marginRight"] = 20), o
            }
        });
        var St = Ve.View = ct.extend({
            type: null,
            name: null,
            title: null,
            calendar: null,
            viewSpec: null,
            options: null,
            el: null,
            renderQueue: null,
            batchRenderDepth: 0,
            isDatesRendered: !1,
            isEventsRendered: !1,
            isBaseRendered: !1,
            queuedScroll: null,
            isRTL: !1,
            isSelected: !1,
            selectedEvent: null,
            eventOrderSpecs: null,
            widgetHeaderClass: null,
            widgetContentClass: null,
            highlightStateClass: null,
            nextDayThreshold: null,
            isHiddenDayHash: null,
            isNowIndicatorRendered: null,
            initialNowDate: null,
            initialNowQueriedMs: null,
            nowIndicatorTimeoutID: null,
            nowIndicatorIntervalID: null,
            minSegmentHeight: 0,
            constructor: function (e, n) {
                ct.prototype.constructor.call(this), this.calendar = e, this.viewSpec = n, this.type = n.type, this.options = n.options, this.name = this.type, this.nextDayThreshold = t.duration(this.opt("nextDayThreshold")), this.initThemingProps(), this.initHiddenDays(), this.isRTL = this.opt("isRTL"), this.eventOrderSpecs = M(this.opt("eventOrder")), this.renderQueue = this.buildRenderQueue(), this.initAutoBatchRender(), this.initialize()
            },
            buildRenderQueue: function () {
                var e = this,
                    t = new ht({
                        event: this.opt("eventRenderWait")
                    });
                return t.on("start", function () {
                    e.freezeHeight(), e.addScroll(e.queryScroll())
                }), t.on("stop", function () {
                    e.thawHeight(), e.popScroll()
                }), t
            },
            initAutoBatchRender: function () {
                var e = this;
                this.on("before:change", function () {
                    e.startBatchRender()
                }), this.on("change", function () {
                    e.stopBatchRender()
                })
            },
            startBatchRender: function () {
                this.batchRenderDepth++ || this.renderQueue.pause()
            },
            stopBatchRender: function () {
                --this.batchRenderDepth || this.renderQueue.resume()
            },
            initialize: function () { },
            opt: function (e) {
                return this.options[e]
            },
            publiclyTrigger: function (e, t) {
                var n = this.calendar;
                return n.publiclyTrigger.apply(n, [e, t || this].concat(Array.prototype.slice.call(arguments, 2), [this]))
            },
            updateTitle: function () {
                this.title = this.computeTitle(), this.calendar.setToolbarsTitle(this.title)
            },
            computeTitle: function () {
                var e;
                return e = /^(year|month)$/.test(this.currentRangeUnit) ? this.currentRange : this.activeRange, this.formatRange({
                    start: this.calendar.applyTimezone(e.start),
                    end: this.calendar.applyTimezone(e.end)
                }, this.opt("titleFormat") || this.computeTitleFormat(), this.opt("titleRangeSeparator"))
            },
            computeTitleFormat: function () {
                return "year" == this.currentRangeUnit ? "YYYY" : "month" == this.currentRangeUnit ? this.opt("monthYearFormat") : this.currentRangeAs("days") > 1 ? "ll" : "LL"
            },
            formatRange: function (e, t, n) {
                var i = e.end;
                return i.hasTime() || (i = i.clone().subtract(1)), st(e.start, i, t, n, this.opt("isRTL"))
            },
            getAllDayHtml: function () {
                return this.opt("allDayHtml") || ue(this.opt("allDayText"))
            },
            buildGotoAnchorHtml: function (t, n, i) {
                var r, a, o, s;
                return e.isPlainObject(t) ? (r = t.date, a = t.type, o = t.forceOff) : r = t, r = Ve.moment(r), s = {
                    date: r.format("YYYY-MM-DD"),
                    type: a || "day"
                }, "string" == typeof n && (i = n, n = null), n = n ? " " + fe(n) : "", i = i || "", !o && this.opt("navLinks") ? "<a" + n + ' data-goto="' + ue(JSON.stringify(s)) + '">' + i + "</a>" : "<span" + n + ">" + i + "</span>"
            },
            setElement: function (e) {
                this.el = e, this.bindGlobalHandlers(), this.bindBaseRenderHandlers(), this.renderSkeleton()
            },
            removeElement: function () {
                this.unsetDate(), this.unrenderSkeleton(), this.unbindGlobalHandlers(), this.unbindBaseRenderHandlers(), this.el.remove()
            },
            renderSkeleton: function () { },
            unrenderSkeleton: function () { },
            setDate: function (e) {
                var t = this.get("dateProfile"),
                    n = this.buildDateProfile(e, null, !0);
                return t && Z(t.activeRange, n.activeRange) || this.set("dateProfile", n), n.date
            },
            unsetDate: function () {
                this.unset("dateProfile")
            },
            requestDateRender: function (e) {
                var t = this;
                this.renderQueue.queue(function () {
                    t.executeDateRender(e)
                }, "date", "init")
            },
            requestDateUnrender: function () {
                var e = this;
                this.renderQueue.queue(function () {
                    e.executeDateUnrender()
                }, "date", "destroy")
            },
            fetchInitialEvents: function (e) {
                return this.calendar.requestEvents(e.activeRange.start, e.activeRange.end)
            },
            bindEventChanges: function () {
                this.listenTo(this.calendar, "eventsReset", this.resetEvents)
            },
            unbindEventChanges: function () {
                this.stopListeningTo(this.calendar, "eventsReset")
            },
            setEvents: function (e) {
                this.set("currentEvents", e), this.set("hasEvents", !0)
            },
            unsetEvents: function () {
                this.unset("currentEvents"), this.unset("hasEvents")
            },
            resetEvents: function (e) {
                this.startBatchRender(), this.unsetEvents(), this.setEvents(e), this.stopBatchRender()
            },
            requestEventsRender: function (e) {
                var t = this;
                this.renderQueue.queue(function () {
                    t.executeEventsRender(e)
                }, "event", "init")
            },
            requestEventsUnrender: function () {
                var e = this;
                this.renderQueue.queue(function () {
                    e.executeEventsUnrender()
                }, "event", "destroy")
            },
            executeDateRender: function (e, t) {
                this.setDateProfileForRendering(e), this.updateTitle(), this.calendar.updateToolbarButtons(), this.render && this.render(), this.renderDates(), this.updateSize(), this.renderBusinessHours(), this.startNowIndicator(), t || this.addScroll(this.computeInitialDateScroll()), this.isDatesRendered = !0, this.trigger("datesRendered")
            },
            executeDateUnrender: function () {
                this.unselect(), this.stopNowIndicator(), this.trigger("before:datesUnrendered"), this.unrenderBusinessHours(), this.unrenderDates(), this.destroy && this.destroy(), this.isDatesRendered = !1
            },
            renderDates: function () { },
            unrenderDates: function () { },
            bindBaseRenderHandlers: function () {
                var e = this;
                this.on("datesRendered.baseHandler", function () {
                    e.onBaseRender()
                }), this.on("before:datesUnrendered.baseHandler", function () {
                    e.onBeforeBaseUnrender()
                })
            },
            unbindBaseRenderHandlers: function () {
                this.off(".baseHandler")
            },
            onBaseRender: function () {
                this.applyScreenState(), this.publiclyTrigger("viewRender", this, this, this.el)
            },
            onBeforeBaseUnrender: function () {
                this.applyScreenState(), this.publiclyTrigger("viewDestroy", this, this, this.el)
            },
            bindGlobalHandlers: function () {
                this.listenTo(bt.get(), {
                    touchstart: this.processUnselect,
                    mousedown: this.handleDocumentMousedown
                })
            },
            unbindGlobalHandlers: function () {
                this.stopListeningTo(bt.get())
            },
            initThemingProps: function () {
                var e = this.opt("theme") ? "ui" : "fc";
                this.widgetHeaderClass = e + "-widget-header", this.widgetContentClass = e + "-widget-content", this.highlightStateClass = e + "-state-highlight"
            },
            renderBusinessHours: function () { },
            unrenderBusinessHours: function () { },
            startNowIndicator: function () {
                var e;
                this.opt("nowIndicator") && (e = this.getNowIndicatorUnit(), e && (this.initialNowDate = this.calendar.getNow(), this.initialNowQueriedMs = +new Date, this.renderNowIndicator(this.initialNowDate), this.isNowIndicatorRendered = !0))
            },
            stopNowIndicator: function () {
                this.isNowIndicatorRendered && (this.nowIndicatorTimeoutID && (clearTimeout(this.nowIndicatorTimeoutID), this.nowIndicatorTimeoutID = null), this.nowIndicatorIntervalID && (clearTimeout(this.nowIndicatorIntervalID), this.nowIndicatorIntervalID = null), this.unrenderNowIndicator(), this.isNowIndicatorRendered = !1)
            },
            getNowIndicatorUnit: function () { },
            renderNowIndicator: function (e) { },
            unrenderNowIndicator: function () { },
            updateSize: function (e) {
                var t;
                e && (t = this.queryScroll()), this.updateHeight(e), this.updateWidth(e), e && this.applyScroll(t)
            },
            updateWidth: function (e) { },
            updateHeight: function (e) {
                var t = this.calendar;
                this.setHeight(t.getSuggestedViewHeight(), t.isHeightAuto())
            },
            setHeight: function (e, t) { },
            addForcedScroll: function (t) {
                this.addScroll(e.extend(t, {
                    isForced: !0
                }))
            },
            addScroll: function (t) {
                var n = this.queuedScroll || (this.queuedScroll = {});
                n.isForced || e.extend(n, t)
            },
            popScroll: function () {
                this.applyQueuedScroll(), this.queuedScroll = null
            },
            applyQueuedScroll: function () {
                this.queuedScroll && this.applyScroll(this.queuedScroll)
            },
            queryScroll: function () {
                var t = {};
                return this.isDatesRendered && e.extend(t, this.queryDateScroll()), t
            },
            applyScroll: function (e) {
                this.isDatesRendered && this.applyDateScroll(e)
            },
            computeInitialDateScroll: function () {
                return {}
            },
            queryDateScroll: function () {
                return {}
            },
            applyDateScroll: function (e) { },
            freezeHeight: function () {
                this.calendar.freezeContentHeight()
            },
            thawHeight: function () {
                this.calendar.thawContentHeight()
            },
            executeEventsRender: function (e) {
                this.renderEvents(e), this.isEventsRendered = !0, this.onEventsRender()
            },
            executeEventsUnrender: function () {
                this.onBeforeEventsUnrender(), this.destroyEvents && this.destroyEvents(), this.unrenderEvents(), this.isEventsRendered = !1
            },
            onEventsRender: function () {
                this.applyScreenState(), this.renderedEventSegEach(function (e) {
                    this.publiclyTrigger("eventAfterRender", e.event, e.event, e.el)
                }), this.publiclyTrigger("eventAfterAllRender")
            },
            onBeforeEventsUnrender: function () {
                this.applyScreenState(), this.renderedEventSegEach(function (e) {
                    this.publiclyTrigger("eventDestroy", e.event, e.event, e.el)
                })
            },
            applyScreenState: function () {
                this.thawHeight(), this.freezeHeight(), this.applyQueuedScroll()
            },
            renderEvents: function (e) { },
            unrenderEvents: function () { },
            resolveEventEl: function (t, n) {
                var i = this.publiclyTrigger("eventRender", t, t, n);
                return i === !1 ? n = null : i && i !== !0 && (n = e(i)), n
            },
            showEvent: function (e) {
                this.renderedEventSegEach(function (e) {
                    e.el.css("visibility", "")
                }, e)
            },
            hideEvent: function (e) {
                this.renderedEventSegEach(function (e) {
                    e.el.css("visibility", "hidden")
                }, e)
            },
            renderedEventSegEach: function (e, t) {
                var n, i = this.getEventSegs();
                for (n = 0; n < i.length; n++) t && i[n].event._id !== t._id || i[n].el && e.call(this, i[n])
            },
            getEventSegs: function () {
                return []
            },
            isEventDraggable: function (e) {
                return this.isEventStartEditable(e)
            },
            isEventStartEditable: function (e) {
                return ce(e.startEditable, (e.source || {}).startEditable, this.opt("eventStartEditable"), this.isEventGenerallyEditable(e))
            },
            isEventGenerallyEditable: function (e) {
                return ce(e.editable, (e.source || {}).editable, this.opt("editable"))
            },
            reportSegDrop: function (e, t, n, i, r) {
                var a = this.calendar,
                    o = a.mutateSeg(e, t, n),
                    s = function () {
                        o.undo(), a.reportEventChange()
                    };
                this.triggerEventDrop(e.event, o.dateDelta, s, i, r), a.reportEventChange()
            },
            triggerEventDrop: function (e, t, n, i, r) {
                this.publiclyTrigger("eventDrop", i[0], e, t, n, r, {})
            },
            reportExternalDrop: function (t, n, i, r, a) {
                var o, s, l = t.eventProps;
                l && (o = e.extend({}, l, n), s = this.calendar.renderEvent(o, t.stick)[0]), this.triggerExternalDrop(s, n, i, r, a)
            },
            triggerExternalDrop: function (e, t, n, i, r) {
                this.publiclyTrigger("drop", n[0], t.start, i, r), e && this.publiclyTrigger("eventReceive", null, e)
            },
            renderDrag: function (e, t) { },
            unrenderDrag: function () { },
            isEventResizableFromStart: function (e) {
                return this.opt("eventResizableFromStart") && this.isEventResizable(e)
            },
            isEventResizableFromEnd: function (e) {
                return this.isEventResizable(e)
            },
            isEventResizable: function (e) {
                var t = e.source || {};
                return ce(e.durationEditable, t.durationEditable, this.opt("eventDurationEditable"), e.editable, t.editable, this.opt("editable"))
            },
            reportSegResize: function (e, t, n, i, r) {
                var a = this.calendar,
                    o = a.mutateSeg(e, t, n),
                    s = function () {
                        o.undo(), a.reportEventChange()
                    };
                this.triggerEventResize(e.event, o.durationDelta, s, i, r), a.reportEventChange()
            },
            triggerEventResize: function (e, t, n, i, r) {
                this.publiclyTrigger("eventResize", i[0], e, t, n, r, {})
            },
            select: function (e, t) {
                this.unselect(t), this.renderSelection(e), this.reportSelection(e, t)
            },
            renderSelection: function (e) { },
            reportSelection: function (e, t) {
                this.isSelected = !0, this.triggerSelect(e, t)
            },
            triggerSelect: function (e, t) {
                this.publiclyTrigger("select", null, this.calendar.applyTimezone(e.start), this.calendar.applyTimezone(e.end), t)
            },
            unselect: function (e) {
                this.isSelected && (this.isSelected = !1, this.destroySelection && this.destroySelection(), this.unrenderSelection(), this.publiclyTrigger("unselect", null, e))
            },
            unrenderSelection: function () { },
            selectEvent: function (e) {
                this.selectedEvent && this.selectedEvent === e || (this.unselectEvent(), this.renderedEventSegEach(function (e) {
                    e.el.addClass("fc-selected")
                }, e), this.selectedEvent = e)
            },
            unselectEvent: function () {
                this.selectedEvent && (this.renderedEventSegEach(function (e) {
                    e.el.removeClass("fc-selected")
                }, this.selectedEvent), this.selectedEvent = null)
            },
            isEventSelected: function (e) {
                return this.selectedEvent && this.selectedEvent._id === e._id
            },
            handleDocumentMousedown: function (e) {
                w(e) && this.processUnselect(e)
            },
            processUnselect: function (e) {
                this.processRangeUnselect(e), this.processEventUnselect(e)
            },
            processRangeUnselect: function (t) {
                var n;
                this.isSelected && this.opt("unselectAuto") && (n = this.opt("unselectCancel"), n && e(t.target).closest(n).length || this.unselect(t))
            },
            processEventUnselect: function (t) {
                this.selectedEvent && (e(t.target).closest(".fc-selected").length || this.unselectEvent())
            },
            triggerDayClick: function (e, t, n) {
                this.publiclyTrigger("dayClick", t, this.calendar.applyTimezone(e.start), n)
            },
            computeDayRange: function (e) {
                var t, n = e.start.clone().stripTime(),
                    i = e.end,
                    r = null;
                return i && (r = i.clone().stripTime(), t = +i.time(), t && t >= this.nextDayThreshold && r.add(1, "days")), (!i || n >= r) && (r = n.clone().add(1, "days")), {
                    start: n,
                    end: r
                }
            },
            isMultiDayEvent: function (e) {
                var t = this.computeDayRange(e);
                return t.end.diff(t.start, "days") > 1
            }
        });
        St.watch("displayingDates", ["dateProfile"], function (e) {
            this.requestDateRender(e.dateProfile)
        }, function () {
            this.requestDateUnrender()
        }), St.watch("initialEvents", ["dateProfile"], function (e) {
            return this.fetchInitialEvents(e.dateProfile)
        }), St.watch("bindingEvents", ["initialEvents"], function (e) {
            this.setEvents(e.initialEvents), this.bindEventChanges()
        }, function () {
            this.unbindEventChanges(), this.unsetEvents()
        }), St.watch("displayingEvents", ["displayingDates", "hasEvents"], function () {
            this.requestEventsRender(this.get("currentEvents"))
        }, function () {
            this.requestEventsUnrender()
        }), St.mixin({
            currentRange: null,
            currentRangeUnit: null,
            renderRange: null,
            activeRange: null,
            validRange: null,
            dateIncrement: null,
            minTime: null,
            maxTime: null,
            usesMinMaxTime: !1,
            start: null,
            end: null,
            intervalStart: null,
            intervalEnd: null,
            setDateProfileForRendering: function (e) {
                this.currentRange = e.currentRange, this.currentRangeUnit = e.currentRangeUnit, this.renderRange = e.renderRange, this.activeRange = e.activeRange, this.validRange = e.validRange, this.dateIncrement = e.dateIncrement, this.minTime = e.minTime, this.maxTime = e.maxTime, this.start = e.activeRange.start, this.end = e.activeRange.end, this.intervalStart = e.currentRange.start, this.intervalEnd = e.currentRange.end
            },
            buildPrevDateProfile: function (e) {
                var t = e.clone().startOf(this.currentRangeUnit).subtract(this.dateIncrement);
                return this.buildDateProfile(t, -1)
            },
            buildNextDateProfile: function (e) {
                var t = e.clone().startOf(this.currentRangeUnit).add(this.dateIncrement);
                return this.buildDateProfile(t, 1)
            },
            buildDateProfile: function (e, n, i) {
                var r, a, o, s, l = this.buildValidRange(),
                    c = null,
                    u = null;
                return i && (e = Y(e, l)), r = this.buildCurrentRangeInfo(e, n), a = this.buildRenderRange(r.range, r.unit), o = q(a), this.opt("showNonCurrentDates") || (o = G(o, r.range)), c = t.duration(this.opt("minTime")), u = t.duration(this.opt("maxTime")), this.adjustActiveRange(o, c, u), o = G(o, l), e = Y(e, o), s = X(r.range, l), {
                    validRange: l,
                    currentRange: r.range,
                    currentRangeUnit: r.unit,
                    activeRange: o,
                    renderRange: a,
                    minTime: c,
                    maxTime: u,
                    isValid: s,
                    date: e,
                    dateIncrement: this.buildDateIncrement(r.duration)
                }
            },
            buildValidRange: function () {
                return this.getRangeOption("validRange", this.calendar.getNow()) || {}
            },
            buildCurrentRangeInfo: function (e, t) {
                var n, i = null,
                    r = null,
                    a = null;
                return this.viewSpec.duration ? (i = this.viewSpec.duration, r = this.viewSpec.durationUnit, a = this.buildRangeFromDuration(e, t, i, r)) : (n = this.opt("dayCount")) ? (r = "day", a = this.buildRangeFromDayCount(e, t, n)) : (a = this.buildCustomVisibleRange(e)) ? r = z(a.start, a.end) : (i = this.getFallbackDuration(), r = z(i), a = this.buildRangeFromDuration(e, t, i, r)), this.normalizeCurrentRange(a, r), {
                    duration: i,
                    unit: r,
                    range: a
                }
            },
            getFallbackDuration: function () {
                return t.duration({
                    days: 1
                })
            },
            normalizeCurrentRange: function (e, t) {
                /^(year|month|week|day)$/.test(t) ? (e.start.stripTime(), e.end.stripTime()) : (e.start.hasTime() || e.start.time(0), e.end.hasTime() || e.end.time(0))
            },
            adjustActiveRange: function (e, t, n) {
                var i = !1;
                this.usesMinMaxTime && (0 > t && (e.start.time(0).add(t), i = !0), n > 864e5 && (e.end.time(n - 864e5), i = !0), i && (e.start.hasTime() || e.start.time(0), e.end.hasTime() || e.end.time(0)))
            },
            buildRangeFromDuration: function (e, n, i, r) {
                var a, o, s, l = this.opt("dateAlignment"),
                    c = e.clone();
                return i.as("days") <= 1 && this.isHiddenDay(c) && (c = this.skipHiddenDays(c, n), c.startOf("day")), l || (o = this.opt("dateIncrement"), o ? (s = t.duration(o), l = i > s ? L(s, o) : r) : l = r), c.startOf(l), a = c.clone().add(i), {
                    start: c,
                    end: a
                }
            },
            buildRangeFromDayCount: function (e, t, n) {
                var i, r = this.opt("dateAlignment"),
                    a = 0,
                    o = e.clone();
                r && o.startOf(r), o.startOf("day"), o = this.skipHiddenDays(o, t), i = o.clone();
                do i.add(1, "day"), this.isHiddenDay(i) || a++; while (n > a);
                return {
                    start: o,
                    end: i
                }
            },
            buildCustomVisibleRange: function (e) {
                var t = this.getRangeOption("visibleRange", this.calendar.moment(e));
                return !t || t.start && t.end ? t : null
            },
            buildRenderRange: function (e, t) {
                return this.trimHiddenDays(e)
            },
            buildDateIncrement: function (e) {
                var n, i = this.opt("dateIncrement");
                return i ? t.duration(i) : (n = this.opt("dateAlignment")) ? t.duration(1, n) : e ? e : t.duration({
                    days: 1
                })
            },
            trimHiddenDays: function (e) {
                return {
                    start: this.skipHiddenDays(e.start),
                    end: this.skipHiddenDays(e.end, -1, !0)
                }
            },
            currentRangeAs: function (e) {
                var t = this.currentRange;
                return t.end.diff(t.start, e, !0)
            },
            getRangeOption: function (e) {
                var t = this.opt(e);
                return "function" == typeof t && (t = t.apply(null, Array.prototype.slice.call(arguments, 1))), t ? this.calendar.parseRange(t) : void 0
            },
            initHiddenDays: function () {
                var t, n = this.opt("hiddenDays") || [],
                    i = [],
                    r = 0;
                for (this.opt("weekends") === !1 && n.push(0, 6), t = 0; 7 > t; t++)(i[t] = -1 !== e.inArray(t, n)) || r++;
                if (!r) throw "invalid hiddenDays";
                this.isHiddenDayHash = i
            },
            isHiddenDay: function (e) {
                return t.isMoment(e) && (e = e.day()), this.isHiddenDayHash[e]
            },
            skipHiddenDays: function (e, t, n) {
                var i = e.clone();
                for (t = t || 1; this.isHiddenDayHash[(i.day() + (n ? t : 0) + 7) % 7];) i.add(t, "days");
                return i
            }
        });
        var At = Ve.Scroller = _e.extend({
            el: null,
            scrollEl: null,
            overflowX: null,
            overflowY: null,
            constructor: function (e) {
                e = e || {}, this.overflowX = e.overflowX || e.overflow || "auto", this.overflowY = e.overflowY || e.overflow || "auto"
            },
            render: function () {
                this.el = this.renderEl(), this.applyOverflow()
            },
            renderEl: function () {
                return this.scrollEl = e('<div class="fc-scroller"></div>')
            },
            clear: function () {
                this.setHeight("auto"), this.applyOverflow()
            },
            destroy: function () {
                this.el.remove()
            },
            applyOverflow: function () {
                this.scrollEl.css({
                    "overflow-x": this.overflowX,
                    "overflow-y": this.overflowY
                })
            },
            lockOverflow: function (e) {
                var t = this.overflowX,
                    n = this.overflowY;
                e = e || this.getScrollbarWidths(), "auto" === t && (t = e.top || e.bottom || this.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth ? "scroll" : "hidden"), "auto" === n && (n = e.left || e.right || this.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight ? "scroll" : "hidden"), this.scrollEl.css({
                    "overflow-x": t,
                    "overflow-y": n
                })
            },
            setHeight: function (e) {
                this.scrollEl.height(e)
            },
            getScrollTop: function () {
                return this.scrollEl.scrollTop()
            },
            setScrollTop: function (e) {
                this.scrollEl.scrollTop(e)
            },
            getClientWidth: function () {
                return this.scrollEl[0].clientWidth
            },
            getClientHeight: function () {
                return this.scrollEl[0].clientHeight
            },
            getScrollbarWidths: function () {
                return m(this.scrollEl)
            }
        });
        Be.prototype.proxyCall = function (e) {
            var t = Array.prototype.slice.call(arguments, 1),
                n = [];
            return this.items.forEach(function (i) {
                n.push(i[e].apply(i, t))
            }), n
        };
        var Tt = Ve.Calendar = _e.extend(ft, {
            view: null,
            viewsByType: null,
            currentDate: null,
            loadingLevel: 0,
            constructor: function (e, t) {
                bt.needed(), this.el = e, this.viewsByType = {}, this.viewSpecCache = {}, this.initOptionsInternals(t), this.initMomentInternals(), this.initCurrentDate(), Ge.call(this), this.initialize()
            },
            initialize: function () { },
            getCalendar: function () {
                return this
            },
            getView: function () {
                return this.view
            },
            publiclyTrigger: function (e, t) {
                var n = Array.prototype.slice.call(arguments, 2),
                    i = this.opt(e);
                return t = t || this.el[0], this.triggerWith(e, t, n), i ? i.apply(t, n) : void 0
            },
            instantiateView: function (e) {
                var t = this.getViewSpec(e);
                return new t["class"](this, t)
            },
            isValidViewType: function (e) {
                return Boolean(this.getViewSpec(e))
            },
            changeView: function (e, t) {
                t && (t.start && t.end ? this.recordOptionOverrides({
                    visibleRange: t
                }) : this.currentDate = this.moment(t).stripZone()), this.renderView(e)
            },
            zoomTo: function (e, t) {
                var n;
                t = t || "day", n = this.getViewSpec(t) || this.getUnitViewSpec(t), this.currentDate = e.clone(), this.renderView(n ? n.type : null)
            },
            initCurrentDate: function () {
                var e = this.opt("defaultDate");
                null != e ? this.currentDate = this.moment(e).stripZone() : this.currentDate = this.getNow()
            },
            prev: function () {
                var e = this.view.buildPrevDateProfile(this.currentDate);
                e.isValid && (this.currentDate = e.date, this.renderView())
            },
            next: function () {
                var e = this.view.buildNextDateProfile(this.currentDate);
                e.isValid && (this.currentDate = e.date, this.renderView())
            },
            prevYear: function () {
                this.currentDate.add(-1, "years"), this.renderView()
            },
            nextYear: function () {
                this.currentDate.add(1, "years"), this.renderView()
            },
            today: function () {
                this.currentDate = this.getNow(), this.renderView()
            },
            gotoDate: function (e) {
                this.currentDate = this.moment(e).stripZone(), this.renderView()
            },
            incrementDate: function (e) {
                this.currentDate.add(t.duration(e)), this.renderView()
            },
            getDate: function () {
                return this.applyTimezone(this.currentDate)
            },
            pushLoading: function () {
                this.loadingLevel++ || this.publiclyTrigger("loading", null, !0, this.view)
            },
            popLoading: function () {
                --this.loadingLevel || this.publiclyTrigger("loading", null, !1, this.view)
            },
            select: function (e, t) {
                this.view.select(this.buildSelectSpan.apply(this, arguments))
            },
            unselect: function () {
                this.view && this.view.unselect()
            },
            buildSelectSpan: function (e, t) {
                var n, i = this.moment(e).stripZone();
                return n = t ? this.moment(t).stripZone() : i.hasTime() ? i.clone().add(this.defaultTimedEventDuration) : i.clone().add(this.defaultAllDayEventDuration), {
                    start: i,
                    end: n
                }
            },
            parseRange: function (e) {
                var t = null,
                    n = null;
                return e.start && (t = this.moment(e.start).stripZone()), e.end && (n = this.moment(e.end).stripZone()), t || n ? t && n && n.isBefore(t) ? null : {
                    start: t,
                    end: n
                } : null
            },
            rerenderEvents: function () {
                this.elementVisible() && this.reportEventChange()
            }
        });
        Tt.mixin({
            dirDefaults: null,
            localeDefaults: null,
            overrides: null,
            dynamicOverrides: null,
            optionsModel: null,
            initOptionsInternals: function (t) {
                this.overrides = e.extend({}, t), this.dynamicOverrides = {}, this.optionsModel = new ct, this.populateOptionsHash()
            },
            option: function (e, t) {
                var n;
                if ("string" == typeof e) {
                    if (void 0 === t) return this.optionsModel.get(e);
                    n = {}, n[e] = t, this.setOptions(n)
                } else "object" == typeof e && this.setOptions(e)
            },
            opt: function (e) {
                return this.optionsModel.get(e)
            },
            setOptions: function (e) {
                var t, n = 0;
                this.recordOptionOverrides(e);
                for (t in e) n++;
                if (1 === n) {
                    if ("height" === t || "contentHeight" === t || "aspectRatio" === t) return void this.updateSize(!0);
                    if ("defaultDate" === t) return;
                    if ("businessHours" === t) return void (this.view && (this.view.unrenderBusinessHours(), this.view.renderBusinessHours()));
                    if ("timezone" === t) return this.rezoneArrayEventSources(), void this.refetchEvents()
                }
                this.renderHeader(), this.renderFooter(), this.viewsByType = {}, this.reinitView()
            },
            populateOptionsHash: function () {
                var e, t, i, r, a;
                e = ce(this.dynamicOverrides.locale, this.overrides.locale), t = Et[e], t || (e = Tt.defaults.locale, t = Et[e] || {}), i = ce(this.dynamicOverrides.isRTL, this.overrides.isRTL, t.isRTL, Tt.defaults.isRTL), r = i ? Tt.rtlDefaults : {}, this.dirDefaults = r, this.localeDefaults = t, a = n([Tt.defaults, r, t, this.overrides, this.dynamicOverrides]), Ue(a), this.optionsModel.reset(a)
            },
            recordOptionOverrides: function (e) {
                var t;
                for (t in e) this.dynamicOverrides[t] = e[t];
                this.viewSpecCache = {}, this.populateOptionsHash()
            }
        }), Tt.mixin({
            defaultAllDayEventDuration: null,
            defaultTimedEventDuration: null,
            localeData: null,
            initMomentInternals: function () {
                var e = this;
                this.defaultAllDayEventDuration = t.duration(this.opt("defaultAllDayEventDuration")), this.defaultTimedEventDuration = t.duration(this.opt("defaultTimedEventDuration")), this.optionsModel.watch("buildingMomentLocale", ["?locale", "?monthNames", "?monthNamesShort", "?dayNames", "?dayNamesShort", "?firstDay", "?weekNumberCalculation"], function (t) {
                    var n, i = t.weekNumberCalculation,
                        r = t.firstDay;
                    "iso" === i && (i = "ISO");
                    var a = re(qe(t.locale));
                    t.monthNames && (a._months = t.monthNames), t.monthNamesShort && (a._monthsShort = t.monthNamesShort), t.dayNames && (a._weekdays = t.dayNames), t.dayNamesShort && (a._weekdaysShort = t.dayNamesShort), null == r && "ISO" === i && (r = 1), null != r && (n = re(a._week), n.dow = r, a._week = n), ("ISO" === i || "local" === i || "function" == typeof i) && (a._fullCalendar_weekCalc = i), e.localeData = a, e.currentDate && e.localizeMoment(e.currentDate)
                })
            },
            moment: function () {
                var e;
                return "local" === this.opt("timezone") ? (e = Ve.moment.apply(null, arguments), e.hasTime() && e.local()) : e = "UTC" === this.opt("timezone") ? Ve.moment.utc.apply(null, arguments) : Ve.moment.parseZone.apply(null, arguments), this.localizeMoment(e), e
            },
            localizeMoment: function (e) {
                e._locale = this.localeData
            },
            getIsAmbigTimezone: function () {
                return "local" !== this.opt("timezone") && "UTC" !== this.opt("timezone")
            },
            applyTimezone: function (e) {
                if (!e.hasTime()) return e.clone();
                var t, n = this.moment(e.toArray()),
                    i = e.time() - n.time();
                return i && (t = n.clone().add(i), e.time() - t.time() === 0 && (n = t)), n
            },
            getNow: function () {
                var e = this.opt("now");
                return "function" == typeof e && (e = e()), this.moment(e).stripZone()
            },
            humanizeDuration: function (e) {
                return e.locale(this.opt("locale")).humanize()
            },
            getEventEnd: function (e) {
                return e.end ? e.end.clone() : this.getDefaultEventEnd(e.allDay, e.start)
            },
            getDefaultEventEnd: function (e, t) {
                var n = t.clone();
                return e ? n.stripTime().add(this.defaultAllDayEventDuration) : n.add(this.defaultTimedEventDuration), this.getIsAmbigTimezone() && n.stripZone(), n
            }
        }), Tt.mixin({
            viewSpecCache: null,
            getViewSpec: function (e) {
                var t = this.viewSpecCache;
                return t[e] || (t[e] = this.buildViewSpec(e))
            },
            getUnitViewSpec: function (t) {
                var n, i, r;
                if (-1 != e.inArray(t, Je))
                    for (n = this.header.getViewsWithButtons(), e.each(Ve.views, function (e) {
                        n.push(e)
                    }), i = 0; i < n.length; i++)
                        if (r = this.getViewSpec(n[i]), r && r.singleUnit == t) return r
            },
            buildViewSpec: function (e) {
                for (var i, r, a, o, s, l = this.overrides.views || {}, c = [], u = [], d = [], h = e; h;) i = Xe[h], r = l[h], h = null, "function" == typeof i && (i = {
                    "class": i
                }), i && (c.unshift(i), u.unshift(i.defaults || {}), a = a || i.duration, h = h || i.type), r && (d.unshift(r), a = a || r.duration, h = h || r.type);
                return i = ie(c), i.type = e, i["class"] ? (a = a || this.dynamicOverrides.duration || this.overrides.duration, a && (o = t.duration(a), o.valueOf() && (s = L(o, a), i.duration = o, i.durationUnit = s, 1 === o.as(s) && (i.singleUnit = s, d.unshift(l[s] || {})))), i.defaults = n(u), i.overrides = n(d), this.buildViewSpecOptions(i), this.buildViewSpecButtonText(i, e), i) : !1
            },
            buildViewSpecOptions: function (e) {
                e.options = n([Tt.defaults, e.defaults, this.dirDefaults, this.localeDefaults, this.overrides, e.overrides, this.dynamicOverrides]), Ue(e.options)
            },
            buildViewSpecButtonText: function (e, t) {
                function n(n) {
                    var i = n.buttonText || {};
                    return i[t] || (e.buttonTextKey ? i[e.buttonTextKey] : null) || (e.singleUnit ? i[e.singleUnit] : null)
                }
                e.buttonTextOverride = n(this.dynamicOverrides) || n(this.overrides) || e.overrides.buttonText, e.buttonTextDefault = n(this.localeDefaults) || n(this.dirDefaults) || e.defaults.buttonText || n(Tt.defaults) || (e.duration ? this.humanizeDuration(e.duration) : null) || t
            }
        }), Tt.mixin({
            el: null,
            contentEl: null,
            suggestedViewHeight: null,
            windowResizeProxy: null,
            ignoreWindowResize: 0,
            render: function () {
                this.contentEl ? this.elementVisible() && (this.calcSize(), this.renderView()) : this.initialRender()
            },
            initialRender: function () {
                var t = this,
                    n = this.el;
                n.addClass("fc"), n.on("click.fc", "a[data-goto]", function (n) {
                    var i = e(this),
                        r = i.data("goto"),
                        a = t.moment(r.date),
                        o = r.type,
                        s = t.view.opt("navLink" + pe(o) + "Click");
                    "function" == typeof s ? s(a, n) : ("string" == typeof s && (o = s), t.zoomTo(a, o))
                }), this.optionsModel.watch("applyingThemeClasses", ["?theme"], function (e) {
                    n.toggleClass("ui-widget", e.theme), n.toggleClass("fc-unthemed", !e.theme)
                }), this.optionsModel.watch("applyingDirClasses", ["?isRTL", "?locale"], function (e) {
                    n.toggleClass("fc-ltr", !e.isRTL), n.toggleClass("fc-rtl", e.isRTL)
                }), this.contentEl = e("<div class='fc-view-container'/>").prependTo(n), this.initToolbars(), this.renderHeader(), this.renderFooter(), this.renderView(this.opt("defaultView")), this.opt("handleWindowResize") && e(window).resize(this.windowResizeProxy = ye(this.windowResize.bind(this), this.opt("windowResizeDelay")))
            },
            destroy: function () {
                this.view && this.view.removeElement(), this.toolbarsManager.proxyCall("removeElement"), this.contentEl.remove(), this.el.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"), this.el.off(".fc"), this.windowResizeProxy && (e(window).unbind("resize", this.windowResizeProxy), this.windowResizeProxy = null), bt.unneeded()
            },
            elementVisible: function () {
                return this.el.is(":visible")
            },
            renderView: function (t, n) {
                this.ignoreWindowResize++;
                var i = this.view && t && this.view.type !== t;
                i && (this.freezeContentHeight(), this.clearView()), !this.view && t && (this.view = this.viewsByType[t] || (this.viewsByType[t] = this.instantiateView(t)), this.view.setElement(e("<div class='fc-view fc-" + t + "-view' />").appendTo(this.contentEl)), this.toolbarsManager.proxyCall("activateButton", t)), this.view && (n && this.view.addForcedScroll(n), this.elementVisible() && (this.currentDate = this.view.setDate(this.currentDate))), i && this.thawContentHeight(), this.ignoreWindowResize--
            },
            clearView: function () {
                this.toolbarsManager.proxyCall("deactivateButton", this.view.type), this.view.removeElement(), this.view = null
            },
            reinitView: function () {
                this.ignoreWindowResize++, this.freezeContentHeight();
                var e = this.view.type,
                    t = this.view.queryScroll();
                this.clearView(), this.calcSize(), this.renderView(e, t), this.thawContentHeight(), this.ignoreWindowResize--
            },
            getSuggestedViewHeight: function () {
                return null === this.suggestedViewHeight && this.calcSize(), this.suggestedViewHeight
            },
            isHeightAuto: function () {
                return "auto" === this.opt("contentHeight") || "auto" === this.opt("height")
            },
            updateSize: function (e) {
                return this.elementVisible() ? (e && this._calcSize(), this.ignoreWindowResize++, this.view.updateSize(!0), this.ignoreWindowResize--, !0) : void 0
            },
            calcSize: function () {
                this.elementVisible() && this._calcSize()
            },
            _calcSize: function () {
                var e = this.opt("contentHeight"),
                    t = this.opt("height");
                "number" == typeof e ? this.suggestedViewHeight = e : "function" == typeof e ? this.suggestedViewHeight = e() : "number" == typeof t ? this.suggestedViewHeight = t - this.queryToolbarsHeight() : "function" == typeof t ? this.suggestedViewHeight = t() - this.queryToolbarsHeight() : "parent" === t ? this.suggestedViewHeight = this.el.parent().height() - this.queryToolbarsHeight() : this.suggestedViewHeight = Math.round(this.contentEl.width() / Math.max(this.opt("aspectRatio"), .5))
            },
            windowResize: function (e) {
                !this.ignoreWindowResize && e.target === window && this.view.renderRange && this.updateSize(!0) && this.view.publiclyTrigger("windowResize", this.el[0])
            },
            freezeContentHeight: function () {
                this.contentEl.css({
                    width: "100%",
                    height: this.contentEl.height(),
                    overflow: "hidden"
                })
            },
            thawContentHeight: function () {
                this.contentEl.css({
                    width: "",
                    height: "",
                    overflow: ""
                })
            }
        }), Tt.mixin({
            header: null,
            footer: null,
            toolbarsManager: null,
            initToolbars: function () {
                this.header = new We(this, this.computeHeaderOptions()), this.footer = new We(this, this.computeFooterOptions()), this.toolbarsManager = new Be([this.header, this.footer])
            },
            computeHeaderOptions: function () {
                return {
                    extraClasses: "fc-header-toolbar",
                    layout: this.opt("header")
                }
            },
            computeFooterOptions: function () {
                return {
                    extraClasses: "fc-footer-toolbar",
                    layout: this.opt("footer")
                }
            },
            renderHeader: function () {
                var e = this.header;
                e.setToolbarOptions(this.computeHeaderOptions()), e.render(), e.el && this.el.prepend(e.el)
            },
            renderFooter: function () {
                var e = this.footer;
                e.setToolbarOptions(this.computeFooterOptions()), e.render(), e.el && this.el.append(e.el)
            },
            setToolbarsTitle: function (e) {
                this.toolbarsManager.proxyCall("updateTitle", e)
            },
            updateToolbarButtons: function () {
                var e = this.getNow(),
                    t = this.view,
                    n = t.buildDateProfile(e),
                    i = t.buildPrevDateProfile(this.currentDate),
                    r = t.buildNextDateProfile(this.currentDate);
                this.toolbarsManager.proxyCall(n.isValid && !V(e, t.currentRange) ? "enableButton" : "disableButton", "today"), this.toolbarsManager.proxyCall(i.isValid ? "enableButton" : "disableButton", "prev"), this.toolbarsManager.proxyCall(r.isValid ? "enableButton" : "disableButton", "next")
            },
            queryToolbarsHeight: function () {
                return this.toolbarsManager.items.reduce(function (e, t) {
                    var n = t.el ? t.el.outerHeight(!0) : 0;
                    return e + n
                }, 0)
            }
        }), Tt.defaults = {
            titleRangeSeparator: " \u2013 ",
            monthYearFormat: "MMMM YYYY",
            defaultTimedEventDuration: "02:00:00",
            defaultAllDayEventDuration: {
                days: 1
            },
            forceEventDuration: !1,
            nextDayThreshold: "09:00:00",
            defaultView: "month",
            aspectRatio: 1.35,
            header: {
                left: "title",
                center: "",
                right: "today prev,next"
            },
            weekends: !0,
            weekNumbers: !1,
            weekNumberTitle: "W",
            weekNumberCalculation: "local",
            scrollTime: "06:00:00",
            minTime: "00:00:00",
            maxTime: "24:00:00",
            showNonCurrentDates: !0,
            lazyFetching: !0,
            startParam: "start",
            endParam: "end",
            timezoneParam: "timezone",
            timezone: !1,
            isRTL: !1,
            buttonText: {
                prev: "prev",
                next: "next",
                prevYear: "prev year",
                nextYear: "next year",
                year: "year",
                today: "today",
                month: "month",
                week: "week",
                day: "day"
            },
            buttonIcons: {
                prev: "left-single-arrow",
                next: "right-single-arrow",
                prevYear: "left-double-arrow",
                nextYear: "right-double-arrow"
            },
            allDayText: "all-day",
            theme: !1,
            themeButtonIcons: {
                prev: "circle-triangle-w",
                next: "circle-triangle-e",
                prevYear: "seek-prev",
                nextYear: "seek-next"
            },
            dragOpacity: .75,
            dragRevertDuration: 500,
            dragScroll: !0,
            unselectAuto: !0,
            dropAccept: "*",
            eventOrder: "title",
            eventLimit: !1,
            eventLimitText: "more",
            eventLimitClick: "popover",
            dayPopoverFormat: "LL",
            handleWindowResize: !0,
            windowResizeDelay: 100,
            longPressDelay: 1e3
        }, Tt.englishDefaults = {
            dayPopoverFormat: "dddd, MMMM D"
        }, Tt.rtlDefaults = {
            header: {
                left: "next,prev today",
                center: "",
                right: "title"
            },
            buttonIcons: {
                prev: "right-single-arrow",
                next: "left-single-arrow",
                prevYear: "right-double-arrow",
                nextYear: "left-double-arrow"
            },
            themeButtonIcons: {
                prev: "circle-triangle-e",
                next: "circle-triangle-w",
                nextYear: "seek-prev",
                prevYear: "seek-next"
            }
        };
        var Et = Ve.locales = {};
        Ve.datepickerLocale = function (t, n, i) {
            var r = Et[t] || (Et[t] = {});
            r.isRTL = i.isRTL, r.weekNumberTitle = i.weekHeader, e.each(Dt, function (e, t) {
                r[e] = t(i)
            }), e.datepicker && (e.datepicker.regional[n] = e.datepicker.regional[t] = i, e.datepicker.regional.en = e.datepicker.regional[""], e.datepicker.setDefaults(i))
        }, Ve.locale = function (t, i) {
            var r, a;
            r = Et[t] || (Et[t] = {}), i && (r = Et[t] = n([r, i])), a = qe(t), e.each($t, function (e, t) {
                null == r[e] && (r[e] = t(a, r))
            }), Tt.defaults.locale = t
        };
        var Dt = {
            buttonText: function (e) {
                return {
                    prev: de(e.prevText),
                    next: de(e.nextText),
                    today: de(e.currentText)
                }
            },
            monthYearFormat: function (e) {
                return e.showMonthAfterYear ? "YYYY[" + e.yearSuffix + "] MMMM" : "MMMM YYYY[" + e.yearSuffix + "]"
            }
        },
            $t = {
                dayOfMonthFormat: function (e, t) {
                    var n = e.longDateFormat("l");
                    return n = n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g, ""), t.isRTL ? n += " ddd" : n = "ddd " + n, n
                },
                mediumTimeFormat: function (e) {
                    return e.longDateFormat("LT").replace(/\s*a$/i, "a")
                },
                smallTimeFormat: function (e) {
                    return e.longDateFormat("LT").replace(":mm", "(:mm)").replace(/(\Wmm)$/, "($1)").replace(/\s*a$/i, "a")
                },
                extraSmallTimeFormat: function (e) {
                    return e.longDateFormat("LT").replace(":mm", "(:mm)").replace(/(\Wmm)$/, "($1)").replace(/\s*a$/i, "t")
                },
                hourFormat: function (e) {
                    return e.longDateFormat("LT").replace(":mm", "").replace(/(\Wmm)$/, "").replace(/\s*a$/i, "a")
                },
                noMeridiemTimeFormat: function (e) {
                    return e.longDateFormat("LT").replace(/\s*a$/i, "")
                }
            },
            Mt = {
                smallDayDateFormat: function (e) {
                    return e.isRTL ? "D dd" : "dd D"
                },
                weekFormat: function (e) {
                    return e.isRTL ? "w[ " + e.weekNumberTitle + "]" : "[" + e.weekNumberTitle + " ]w"
                },
                smallWeekFormat: function (e) {
                    return e.isRTL ? "w[" + e.weekNumberTitle + "]" : "[" + e.weekNumberTitle + "]w"
                }
            };
        Ve.locale("en", Tt.englishDefaults), Ve.sourceNormalizers = [], Ve.sourceFetchers = [];
        var Rt = {
            dataType: "json",
            cache: !1
        },
            It = 1;
        Tt.prototype.mutateSeg = function (e, t) {
            return this.mutateEvent(e.event, t)
        }, Tt.prototype.normalizeEvent = function (e) { }, Tt.prototype.spanContainsSpan = function (e, t) {
            var n = e.start.clone().stripZone(),
                i = this.getEventEnd(e).stripZone();
            return t.start >= n && t.end <= i
        }, Tt.prototype.getPeerEvents = function (e, t) {
            var n, i, r = this.getEventCache(),
                a = [];
            for (n = 0; n < r.length; n++) i = r[n], t && t._id === i._id || a.push(i);
            return a
        }, Tt.prototype.isEventSpanAllowed = function (e, t) {
            var n = t.source || {},
                i = this.opt("eventAllow"),
                r = ce(t.constraint, n.constraint, this.opt("eventConstraint")),
                a = ce(t.overlap, n.overlap, this.opt("eventOverlap"));
            return this.isSpanAllowed(e, r, a, t) && (!i || i(e, t) !== !1)
        }, Tt.prototype.isExternalSpanAllowed = function (t, n, i) {
            var r, a;
            return i && (r = e.extend({}, i, n), a = this.expandEvent(this.buildEventFromInput(r))[0]), a ? this.isEventSpanAllowed(t, a) : this.isSelectionSpanAllowed(t)
        }, Tt.prototype.isSelectionSpanAllowed = function (e) {
            var t = this.opt("selectAllow");
            return this.isSpanAllowed(e, this.opt("selectConstraint"), this.opt("selectOverlap")) && (!t || t(e) !== !1)
        }, Tt.prototype.isSpanAllowed = function (e, t, n, i) {
            var r, a, o, s, l, c;
            if (null != t && (r = this.constraintToEvents(t))) {
                for (a = !1, s = 0; s < r.length; s++)
                    if (this.spanContainsSpan(r[s], e)) {
                        a = !0;
                        break
                    } if (!a) return !1
            }
            for (o = this.getPeerEvents(e, i), s = 0; s < o.length; s++)
                if (l = o[s], this.eventIntersectsRange(l, e)) {
                    if (n === !1) return !1;
                    if ("function" == typeof n && !n(l, i)) return !1;
                    if (i) {
                        if (c = ce(l.overlap, (l.source || {}).overlap), c === !1) return !1;
                        if ("function" == typeof c && !c(i, l)) return !1
                    }
                } return !0
        }, Tt.prototype.constraintToEvents = function (e) {
            return "businessHours" === e ? this.getCurrentBusinessHourEvents() : "object" == typeof e ? null != e.start ? this.expandEvent(this.buildEventFromInput(e)) : null : this.clientEvents(e)
        }, Tt.prototype.eventIntersectsRange = function (e, t) {
            var n = e.start.clone().stripZone(),
                i = this.getEventEnd(e).stripZone();
            return t.start < i && t.end > n
        };
        var Pt = {
            id: "_fcBusinessHours",
            start: "09:00",
            end: "17:00",
            dow: [1, 2, 3, 4, 5],
            rendering: "inverse-background"
        };
        Tt.prototype.getCurrentBusinessHourEvents = function (e) {
            return this.computeBusinessHourEvents(e, this.opt("businessHours"))
        }, Tt.prototype.computeBusinessHourEvents = function (t, n) {
            return n === !0 ? this.expandBusinessHourEvents(t, [{}]) : e.isPlainObject(n) ? this.expandBusinessHourEvents(t, [n]) : e.isArray(n) ? this.expandBusinessHourEvents(t, n, !0) : []
        }, Tt.prototype.expandBusinessHourEvents = function (t, n, i) {
            var r, a, o = this.getView(),
                s = [];
            for (r = 0; r < n.length; r++) a = n[r], (!i || a.dow) && (a = e.extend({}, Pt, a), t && (a.start = null, a.end = null), s.push.apply(s, this.expandEvent(this.buildEventFromInput(a), o.activeRange.start, o.activeRange.end)));
            return s
        };
        var Ht = Ve.BasicView = St.extend({
            scroller: null,
            dayGridClass: kt,
            dayGrid: null,
            dayNumbersVisible: !1,
            colWeekNumbersVisible: !1,
            cellWeekNumbersVisible: !1,
            weekNumberWidth: null,
            headContainerEl: null,
            headRowEl: null,
            initialize: function () {
                this.dayGrid = this.instantiateDayGrid(), this.scroller = new At({
                    overflowX: "hidden",
                    overflowY: "auto"
                })
            },
            instantiateDayGrid: function () {
                var e = this.dayGridClass.extend(Ot);
                return new e(this)
            },
            buildRenderRange: function (e, t) {
                var n = St.prototype.buildRenderRange.apply(this, arguments);
                return /^(year|month)$/.test(t) && (n.start.startOf("week"), n.end.weekday() && n.end.add(1, "week").startOf("week")), this.trimHiddenDays(n)
            },
            renderDates: function () {
                this.dayGrid.breakOnWeeks = /year|month|week/.test(this.currentRangeUnit), this.dayGrid.setRange(this.renderRange), this.dayNumbersVisible = this.dayGrid.rowCnt > 1, this.opt("weekNumbers") && (this.opt("weekNumbersWithinDays") ? (this.cellWeekNumbersVisible = !0, this.colWeekNumbersVisible = !1) : (this.cellWeekNumbersVisible = !1, this.colWeekNumbersVisible = !0)), this.dayGrid.numbersVisible = this.dayNumbersVisible || this.cellWeekNumbersVisible || this.colWeekNumbersVisible, this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()), this.renderHead(), this.scroller.render();
                var t = this.scroller.el.addClass("fc-day-grid-container"),
                    n = e('<div class="fc-day-grid" />').appendTo(t);
                this.el.find(".fc-body > tr > td").append(t), this.dayGrid.setElement(n), this.dayGrid.renderDates(this.hasRigidRows())
            },
            renderHead: function () {
                this.headContainerEl = this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()), this.headRowEl = this.headContainerEl.find(".fc-row")
            },
            unrenderDates: function () {
                this.dayGrid.unrenderDates(), this.dayGrid.removeElement(), this.scroller.destroy()
            },
            renderBusinessHours: function () {
                this.dayGrid.renderBusinessHours()
            },
            unrenderBusinessHours: function () {
                this.dayGrid.unrenderBusinessHours()
            },
            renderSkeletonHtml: function () {
                return '<table><thead class="fc-head"><tr><td class="fc-head-container ' + this.widgetHeaderClass + '"></td></tr></thead><tbody class="fc-body"><tr><td class="' + this.widgetContentClass + '"></td></tr></tbody></table>'
            },
            weekNumberStyleAttr: function () {
                return null !== this.weekNumberWidth ? 'style="width:' + this.weekNumberWidth + 'px"' : ""
            },
            hasRigidRows: function () {
                var e = this.opt("eventLimit");
                return e && "number" != typeof e
            },
            updateWidth: function () {
                this.colWeekNumbersVisible && (this.weekNumberWidth = c(this.el.find(".fc-week-number")))
            },
            setHeight: function (e, t) {
                var n, a, o = this.opt("eventLimit");
                this.scroller.clear(), r(this.headRowEl), this.dayGrid.removeSegPopover(), o && "number" == typeof o && this.dayGrid.limitRows(o), n = this.computeScrollerHeight(e), this.setGridHeight(n, t), o && "number" != typeof o && this.dayGrid.limitRows(o), t || (this.scroller.setHeight(n), a = this.scroller.getScrollbarWidths(), (a.left || a.right) && (i(this.headRowEl, a), n = this.computeScrollerHeight(e), this.scroller.setHeight(n)), this.scroller.lockOverflow(a))
            },
            computeScrollerHeight: function (e) {
                return e - u(this.el, this.scroller.el)
            },
            setGridHeight: function (e, t) {
                t ? l(this.dayGrid.rowEls) : s(this.dayGrid.rowEls, e, !0)
            },
            computeInitialDateScroll: function () {
                return {
                    top: 0
                }
            },
            queryDateScroll: function () {
                return {
                    top: this.scroller.getScrollTop()
                }
            },
            applyDateScroll: function (e) {
                void 0 !== e.top && this.scroller.setScrollTop(e.top)
            },
            hitsNeeded: function () {
                this.dayGrid.hitsNeeded()
            },
            hitsNotNeeded: function () {
                this.dayGrid.hitsNotNeeded()
            },
            prepareHits: function () {
                this.dayGrid.prepareHits()
            },
            releaseHits: function () {
                this.dayGrid.releaseHits()
            },
            queryHit: function (e, t) {
                return this.dayGrid.queryHit(e, t)
            },
            getHitSpan: function (e) {
                return this.dayGrid.getHitSpan(e)
            },
            getHitEl: function (e) {
                return this.dayGrid.getHitEl(e)
            },
            renderEvents: function (e) {
                this.dayGrid.renderEvents(e), this.updateHeight()
            },
            getEventSegs: function () {
                return this.dayGrid.getEventSegs()
            },
            unrenderEvents: function () {
                this.dayGrid.unrenderEvents()
            },
            renderDrag: function (e, t) {
                return this.dayGrid.renderDrag(e, t)
            },
            unrenderDrag: function () {
                this.dayGrid.unrenderDrag()
            },
            renderSelection: function (e) {
                this.dayGrid.renderSelection(e)
            },
            unrenderSelection: function () {
                this.dayGrid.unrenderSelection()
            }
        }),
            Ot = {
                renderHeadIntroHtml: function () {
                    var e = this.view;
                    return e.colWeekNumbersVisible ? '<th class="fc-week-number ' + e.widgetHeaderClass + '" ' + e.weekNumberStyleAttr() + "><span>" + ue(e.opt("weekNumberTitle")) + "</span></th>" : ""
                },
                renderNumberIntroHtml: function (e) {
                    var t = this.view,
                        n = this.getCellDate(e, 0);
                    return t.colWeekNumbersVisible ? '<td class="fc-week-number" ' + t.weekNumberStyleAttr() + ">" + t.buildGotoAnchorHtml({
                        date: n,
                        type: "week",
                        forceOff: 1 === this.colCnt
                    }, n.format("w")) + "</td>" : ""
                },
                renderBgIntroHtml: function () {
                    var e = this.view;
                    return e.colWeekNumbersVisible ? '<td class="fc-week-number ' + e.widgetContentClass + '" ' + e.weekNumberStyleAttr() + "></td>" : ""
                },
                renderIntroHtml: function () {
                    var e = this.view;
                    return e.colWeekNumbersVisible ? '<td class="fc-week-number" ' + e.weekNumberStyleAttr() + "></td>" : ""
                }
            },
            jt = Ve.MonthView = Ht.extend({
                buildRenderRange: function () {
                    var e, t = Ht.prototype.buildRenderRange.apply(this, arguments);
                    return this.isFixedWeeks() && (e = Math.ceil(t.end.diff(t.start, "weeks", !0)), t.end.add(6 - e, "weeks")), t
                },
                setGridHeight: function (e, t) {
                    t && (e *= this.rowCnt / 6), s(this.dayGrid.rowEls, e, !t)
                },
                isFixedWeeks: function () {
                    return this.opt("fixedWeekCount")
                }
            });
        Xe.basic = {
            "class": Ht
        }, Xe.basicDay = {
            type: "basic",
            duration: {
                days: 1
            }
        }, Xe.basicWeek = {
            type: "basic",
            duration: {
                weeks: 1
            }
        }, Xe.month = {
            "class": jt,
            duration: {
                months: 1
            },
            defaults: {
                fixedWeekCount: !0
            }
        };
        var Nt = Ve.AgendaView = St.extend({
            scroller: null,
            timeGridClass: Ct,
            timeGrid: null,
            dayGridClass: kt,
            dayGrid: null,
            axisWidth: null,
            headContainerEl: null,
            noScrollRowEls: null,
            bottomRuleEl: null,
            usesMinMaxTime: !0,
            initialize: function () {
                this.timeGrid = this.instantiateTimeGrid(), this.opt("allDaySlot") && (this.dayGrid = this.instantiateDayGrid()), this.scroller = new At({
                    overflowX: "hidden",
                    overflowY: "auto"
                })
            },
            instantiateTimeGrid: function () {
                var e = this.timeGridClass.extend(zt);
                return new e(this)
            },
            instantiateDayGrid: function () {
                var e = this.dayGridClass.extend(Lt);
                return new e(this)
            },
            renderDates: function () {
                this.timeGrid.setRange(this.renderRange), this.dayGrid && this.dayGrid.setRange(this.renderRange), this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()), this.renderHead(), this.scroller.render();
                var t = this.scroller.el.addClass("fc-time-grid-container"),
                    n = e('<div class="fc-time-grid" />').appendTo(t);
                this.el.find(".fc-body > tr > td").append(t), this.timeGrid.setElement(n), this.timeGrid.renderDates(), this.bottomRuleEl = e('<hr class="fc-divider ' + this.widgetHeaderClass + '"/>').appendTo(this.timeGrid.el), this.dayGrid && (this.dayGrid.setElement(this.el.find(".fc-day-grid")), this.dayGrid.renderDates(), this.dayGrid.bottomCoordPadding = this.dayGrid.el.next("hr").outerHeight()), this.noScrollRowEls = this.el.find(".fc-row:not(.fc-scroller *)")
            },
            renderHead: function () {
                this.headContainerEl = this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())
            },
            unrenderDates: function () {
                this.timeGrid.unrenderDates(), this.timeGrid.removeElement(), this.dayGrid && (this.dayGrid.unrenderDates(), this.dayGrid.removeElement()), this.scroller.destroy()
            },
            renderSkeletonHtml: function () {
                return '<table><thead class="fc-head"><tr><td class="fc-head-container ' + this.widgetHeaderClass + '"></td></tr></thead><tbody class="fc-body"><tr><td class="' + this.widgetContentClass + '">' + (this.dayGrid ? '<div class="fc-day-grid"/><hr class="fc-divider ' + this.widgetHeaderClass + '"/>' : "") + "</td></tr></tbody></table>"
            },
            axisStyleAttr: function () {
                return null !== this.axisWidth ? 'style="width:' + this.axisWidth + 'px"' : ""
            },
            renderBusinessHours: function () {
                this.timeGrid.renderBusinessHours(), this.dayGrid && this.dayGrid.renderBusinessHours()
            },
            unrenderBusinessHours: function () {
                this.timeGrid.unrenderBusinessHours(), this.dayGrid && this.dayGrid.unrenderBusinessHours()
            },
            getNowIndicatorUnit: function () {
                return this.timeGrid.getNowIndicatorUnit()
            },
            renderNowIndicator: function (e) {
                this.timeGrid.renderNowIndicator(e)
            },
            unrenderNowIndicator: function () {
                this.timeGrid.unrenderNowIndicator()
            },
            updateSize: function (e) {
                this.timeGrid.updateSize(e), St.prototype.updateSize.call(this, e)
            },
            updateWidth: function () {
                this.axisWidth = c(this.el.find(".fc-axis"))
            },
            setHeight: function (e, t) {
                var n, a, o;
                this.bottomRuleEl.hide(), this.scroller.clear(), r(this.noScrollRowEls), this.dayGrid && (this.dayGrid.removeSegPopover(), n = this.opt("eventLimit"), n && "number" != typeof n && (n = Ft), n && this.dayGrid.limitRows(n)), t || (a = this.computeScrollerHeight(e), this.scroller.setHeight(a), o = this.scroller.getScrollbarWidths(), (o.left || o.right) && (i(this.noScrollRowEls, o), a = this.computeScrollerHeight(e), this.scroller.setHeight(a)), this.scroller.lockOverflow(o), this.timeGrid.getTotalSlatHeight() < a && this.bottomRuleEl.show())
            },
            computeScrollerHeight: function (e) {
                return e - u(this.el, this.scroller.el)
            },
            computeInitialDateScroll: function () {
                var e = t.duration(this.opt("scrollTime")),
                    n = this.timeGrid.computeTimeTop(e);
                return n = Math.ceil(n), n && n++, {
                    top: n
                }
            },
            queryDateScroll: function () {
                return {
                    top: this.scroller.getScrollTop()
                }
            },
            applyDateScroll: function (e) {
                void 0 !== e.top && this.scroller.setScrollTop(e.top)
            },
            hitsNeeded: function () {
                this.timeGrid.hitsNeeded(), this.dayGrid && this.dayGrid.hitsNeeded()
            },
            hitsNotNeeded: function () {
                this.timeGrid.hitsNotNeeded(), this.dayGrid && this.dayGrid.hitsNotNeeded()
            },
            prepareHits: function () {
                this.timeGrid.prepareHits(), this.dayGrid && this.dayGrid.prepareHits()
            },
            releaseHits: function () {
                this.timeGrid.releaseHits(), this.dayGrid && this.dayGrid.releaseHits()
            },
            queryHit: function (e, t) {
                var n = this.timeGrid.queryHit(e, t);
                return !n && this.dayGrid && (n = this.dayGrid.queryHit(e, t)), n
            },
            getHitSpan: function (e) {
                return e.component.getHitSpan(e)
            },
            getHitEl: function (e) {
                return e.component.getHitEl(e)
            },
            renderEvents: function (e) {
                var t, n, i = [],
                    r = [],
                    a = [];
                for (n = 0; n < e.length; n++) e[n].allDay ? i.push(e[n]) : r.push(e[n]);
                t = this.timeGrid.renderEvents(r), this.dayGrid && (a = this.dayGrid.renderEvents(i)), this.updateHeight()
            },
            getEventSegs: function () {
                return this.timeGrid.getEventSegs().concat(this.dayGrid ? this.dayGrid.getEventSegs() : [])
            },
            unrenderEvents: function () {
                this.timeGrid.unrenderEvents(), this.dayGrid && this.dayGrid.unrenderEvents()
            },
            renderDrag: function (e, t) {
                return e.start.hasTime() ? this.timeGrid.renderDrag(e, t) : this.dayGrid ? this.dayGrid.renderDrag(e, t) : void 0
            },
            unrenderDrag: function () {
                this.timeGrid.unrenderDrag(), this.dayGrid && this.dayGrid.unrenderDrag()
            },
            renderSelection: function (e) {
                e.start.hasTime() || e.end.hasTime() ? this.timeGrid.renderSelection(e) : this.dayGrid && this.dayGrid.renderSelection(e)
            },
            unrenderSelection: function () {
                this.timeGrid.unrenderSelection(), this.dayGrid && this.dayGrid.unrenderSelection()
            }
        }),
            zt = {
                renderHeadIntroHtml: function () {
                    var e, t = this.view;
                    return t.opt("weekNumbers") ? (e = this.start.format(t.opt("smallWeekFormat")), '<th class="fc-axis fc-week-number ' + t.widgetHeaderClass + '" ' + t.axisStyleAttr() + ">" + t.buildGotoAnchorHtml({
                        date: this.start,
                        type: "week",
                        forceOff: this.colCnt > 1
                    }, ue(e)) + "</th>") : '<th class="fc-axis ' + t.widgetHeaderClass + '" ' + t.axisStyleAttr() + "></th>"
                },
                renderBgIntroHtml: function () {
                    var e = this.view;
                    return '<td class="fc-axis ' + e.widgetContentClass + '" ' + e.axisStyleAttr() + "></td>"
                },
                renderIntroHtml: function () {
                    var e = this.view;
                    return '<td class="fc-axis" ' + e.axisStyleAttr() + "></td>"
                }
            },
            Lt = {
                renderBgIntroHtml: function () {
                    var e = this.view;
                    return '<td class="fc-axis ' + e.widgetContentClass + '" ' + e.axisStyleAttr() + "><span>" + e.getAllDayHtml() + "</span></td>"
                },
                renderIntroHtml: function () {
                    var e = this.view;
                    return '<td class="fc-axis" ' + e.axisStyleAttr() + "></td>"
                }
            },
            Ft = 5,
            Bt = [{
                hours: 1
            }, {
                minutes: 30
            }, {
                minutes: 15
            }, {
                seconds: 30
            }, {
                seconds: 15
            }];
        Xe.agenda = {
            "class": Nt,
            defaults: {
                allDaySlot: !0,
                slotDuration: "00:30:00",
                slotEventOverlap: !0
            }
        }, Xe.agendaDay = {
            type: "agenda",
            duration: {
                days: 1
            }
        }, Xe.agendaWeek = {
            type: "agenda",
            duration: {
                weeks: 1
            }
        };
        var Wt = St.extend({
            grid: null,
            scroller: null,
            initialize: function () {
                this.grid = new Ut(this), this.scroller = new At({
                    overflowX: "hidden",
                    overflowY: "auto"
                })
            },
            renderSkeleton: function () {
                this.el.addClass("fc-list-view " + this.widgetContentClass), this.scroller.render(), this.scroller.el.appendTo(this.el), this.grid.setElement(this.scroller.scrollEl)
            },
            unrenderSkeleton: function () {
                this.scroller.destroy()
            },
            setHeight: function (e, t) {
                this.scroller.setHeight(this.computeScrollerHeight(e))
            },
            computeScrollerHeight: function (e) {
                return e - u(this.el, this.scroller.el)
            },
            renderDates: function () {
                this.grid.setRange(this.renderRange)
            },
            renderEvents: function (e) {
                this.grid.renderEvents(e)
            },
            unrenderEvents: function () {
                this.grid.unrenderEvents()
            },
            isEventResizable: function (e) {
                return !1
            },
            isEventDraggable: function (e) {
                return !1
            }
        }),
            Ut = _t.extend({
                segSelector: ".fc-list-item",
                hasDayInteractions: !1,
                spanToSegs: function (e) {
                    for (var t, n = this.view, i = n.renderRange.start.clone().time(0), r = 0, a = []; i < n.renderRange.end;)
                        if (t = H(e, {
                            start: i,
                            end: i.clone().add(1, "day")
                        }), t && (t.dayIndex = r, a.push(t)), i.add(1, "day"), r++, t && !t.isEnd && e.end.hasTime() && e.end < i.clone().add(this.view.nextDayThreshold)) {
                            t.end = e.end.clone(), t.isEnd = !0;
                            break
                        } return a
                },
                computeEventTimeFormat: function () {
                    return this.view.opt("mediumTimeFormat")
                },
                handleSegClick: function (t, n) {
                    var i;
                    _t.prototype.handleSegClick.apply(this, arguments), e(n.target).closest("a[href]").length || (i = t.event.url, i && !n.isDefaultPrevented() && (window.location.href = i))
                },
                renderFgSegs: function (e) {
                    return e = this.renderFgSegEls(e), e.length ? this.renderSegList(e) : this.renderEmptyMessage(), e
                },
                renderEmptyMessage: function () {
                    this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">' + ue(this.view.opt("noEventsMessage")) + "</div></div></div>")
                },
                renderSegList: function (t) {
                    var n, i, r, a = this.groupSegsByDay(t),
                        o = e('<table class="fc-list-table"><tbody/></table>'),
                        s = o.find("tbody");
                    for (n = 0; n < a.length; n++)
                        if (i = a[n])
                            for (s.append(this.dayHeaderHtml(this.view.renderRange.start.clone().add(n, "days"))), this.sortEventSegs(i), r = 0; r < i.length; r++) s.append(i[r].el);
                    this.el.empty().append(o)
                },
                groupSegsByDay: function (e) {
                    var t, n, i = [];
                    for (t = 0; t < e.length; t++) n = e[t], (i[n.dayIndex] || (i[n.dayIndex] = [])).push(n);
                    return i
                },
                dayHeaderHtml: function (e) {
                    var t = this.view,
                        n = t.opt("listDayFormat"),
                        i = t.opt("listDayAltFormat");
                    return '<tr class="fc-list-heading" data-date="' + e.format("YYYY-MM-DD") + '"><td class="' + t.widgetHeaderClass + '" colspan="3">' + (n ? t.buildGotoAnchorHtml(e, {
                        "class": "fc-list-heading-main"
                    }, ue(e.format(n))) : "") + (i ? t.buildGotoAnchorHtml(e, {
                        "class": "fc-list-heading-alt"
                    }, ue(e.format(i))) : "") + "</td></tr>"
                },
                fgSegHtml: function (e) {
                    var t, n = this.view,
                        i = ["fc-list-item"].concat(this.getSegCustomClasses(e)),
                        r = this.getSegBackgroundColor(e),
                        a = e.event,
                        o = a.url;
                    return t = a.allDay ? n.getAllDayHtml() : n.isMultiDayEvent(a) ? e.isStart || e.isEnd ? ue(this.getEventTimeText(e)) : n.getAllDayHtml() : ue(this.getEventTimeText(a)), o && i.push("fc-has-url"), '<tr class="' + i.join(" ") + '">' + (this.displayEventTime ? '<td class="fc-list-item-time ' + n.widgetContentClass + '">' + (t || "") + "</td>" : "") + '<td class="fc-list-item-marker ' + n.widgetContentClass + '"><span class="fc-event-dot"' + (r ? ' style="background-color:' + r + '"' : "") + '></span></td><td class="fc-list-item-title ' + n.widgetContentClass + '"><a' + (o ? ' href="' + ue(o) + '"' : "") + ">" + ue(e.event.title || "") + "</a></td></tr>"
                }
            });
        return Xe.list = {
            "class": Wt,
            buttonTextKey: "list",
            defaults: {
                buttonText: "list",
                listDayFormat: "LL",
                noEventsMessage: "No events to display"
            }
        }, Xe.listDay = {
            type: "list",
            duration: {
                days: 1
            },
            defaults: {
                listDayFormat: "dddd"
            }
        }, Xe.listWeek = {
            type: "list",
            duration: {
                weeks: 1
            },
            defaults: {
                listDayFormat: "dddd",
                listDayAltFormat: "LL"
            }
        }, Xe.listMonth = {
            type: "list",
            duration: {
                month: 1
            },
            defaults: {
                listDayAltFormat: "dddd"
            }
        }, Xe.listYear = {
            type: "list",
            duration: {
                year: 1
            },
            defaults: {
                listDayAltFormat: "dddd"
            }
        }, Ve
    }),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "moment", "fullcalendar"], e) : "object" == typeof exports ? module.exports = e(require("jquery"), require("moment"), require("fullcalendar")) : e(jQuery, moment)
    }(function (e, t) {
        var n, i, r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b, w, _, x, k, C, S, A, T, E, D, $, M, R, I, P, H, O, j, N, z, L, F, B, W, U, q, G, Y, V, X, K, Z, Q, J, ee, te, ne, ie, re, ae, oe, se, le, ce, ue, de, he, fe, pe, me, ge, ve, ye, be, we, _e, xe, ke, Ce, Se, Ae, Te, Ee, De, $e, Me, Re, Ie, Pe, He, Oe, je, Ne, ze, Le, Fe, Be, We, Ue, qe = function (e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t) Ge.call(t, i) && (e[i] = t[i]);
            return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e
        },
            Ge = {}.hasOwnProperty,
            Ye = [].indexOf || function (e) {
                for (var t = 0, n = this.length; n > t; t++)
                    if (t in this && this[t] === e) return t;
                return -1
            },
            Ve = [].slice;
        return f = e.fullCalendar, f.schedulerVersion = "1.6.2", 9 !== f.internalApiVersion ? void f.warn("v" + f.schedulerVersion + " of FullCalendar Scheduler is incompatible with v" + f.version + " of the core.\nPlease see http://fullcalendar.io/support/ for more information.") : (i = f.Calendar, a = f.Class, Z = f.View, p = f.Grid, xe = f.intersectRanges, le = f.debounce, Se = f.isInt, be = f.getScrollbarWidths, c = f.DragListener, _e = f.htmlEscape, ne = f.computeGreatestUnit, Ne = f.proxy, ee = f.capitaliseFirstLetter, J = f.applyAll, u = f.EmitterMixin, v = f.ListenerMixin, he = f.durationHasTime, de = f.divideRangeByDuration, ue = f.divideDurationByDuration, Ee = f.multiplyDuration, Oe = f.parseFieldSpecs, te = f.compareByFieldSpecs, fe = f.flexibleCompare, ke = f.intersectRects, s = f.CoordCache, pe = f.getContentRect, me = f.getOuterRect, oe = f.createObject, k = f.Promise, q = f.TaskQueue, ge = function (e) {
            return e.find("> td").filter(function (e, t) {
                return t.rowSpan <= 1
            })
        }, d = function (t) {
            function n() {
                n.__super__.constructor.apply(this, arguments), this.requestMovingEnd = le(this.reportMovingEnd, 500)
            }
            var i, r;
            return qe(n, t), n.mixin(u), n.mixin(v), n.prototype.canvas = null, n.prototype.isScrolling = !1, n.prototype.isTouching = !1, n.prototype.isTouchedEver = !1, n.prototype.isMoving = !1, n.prototype.isTouchScrollEnabled = !0, n.prototype.preventTouchScrollHandler = null, n.prototype.render = function () {
                return n.__super__.render.apply(this, arguments), this.canvas && (this.canvas.render(), this.canvas.el.appendTo(this.scrollEl)), this.bindHandlers()
            }, n.prototype.destroy = function () {
                return n.__super__.destroy.apply(this, arguments), this.unbindHandlers()
            }, n.prototype.disableTouchScroll = function () {
                return this.isTouchScrollEnabled = !1, this.bindPreventTouchScroll()
            }, n.prototype.enableTouchScroll = function () {
                return this.isTouchScrollEnabled = !0, this.isTouching ? void 0 : this.unbindPreventTouchScroll()
            }, n.prototype.bindPreventTouchScroll = function () {
                return this.preventTouchScrollHandler ? void 0 : this.scrollEl.on("touchmove", this.preventTouchScrollHandler = f.preventDefault)
            }, n.prototype.unbindPreventTouchScroll = function () {
                return this.preventTouchScrollHandler ? (this.scrollEl.off("touchmove", this.preventTouchScrollHandler), this.preventTouchScrollHandler = null) : void 0
            }, n.prototype.bindHandlers = function () {
                return this.listenTo(this.scrollEl, {
                    scroll: this.reportScroll,
                    touchstart: this.reportTouchStart,
                    touchend: this.reportTouchEnd
                })
            }, n.prototype.unbindHandlers = function () {
                return this.stopListeningTo(this.scrollEl)
            }, n.prototype.reportScroll = function () {
                return this.isScrolling || this.reportScrollStart(), this.trigger("scroll"), this.isMoving = !0, this.requestMovingEnd()
            }, n.prototype.reportScrollStart = function () {
                return this.isScrolling ? void 0 : (this.isScrolling = !0, this.trigger("scrollStart", this.isTouching))
            }, n.prototype.requestMovingEnd = null, n.prototype.reportMovingEnd = function () {
                return this.isMoving = !1, this.isTouching ? void 0 : this.reportScrollEnd()
            }, n.prototype.reportScrollEnd = function () {
                return this.isScrolling ? (this.trigger("scrollEnd"), this.isScrolling = !1) : void 0
            }, n.prototype.reportTouchStart = function () {
                return this.isTouching = !0, this.isTouchedEver = !0
            }, n.prototype.reportTouchEnd = function () {
                return this.isTouching && (this.isTouching = !1, this.isTouchScrollEnabled && this.unbindPreventTouchScroll(), !this.isMoving) ? this.reportScrollEnd() : void 0
            }, n.prototype.getScrollLeft = function () {
                var e, t, n;
                if (e = this.scrollEl.css("direction"), t = this.scrollEl[0], n = t.scrollLeft, "rtl" === e) switch (r) {
                    case "positive":
                        n = n + t.clientWidth - t.scrollWidth;
                        break;
                    case "reverse":
                        n = -n
                }
                return n
            }, n.prototype.setScrollLeft = function (e) {
                var t, n;
                if (t = this.scrollEl.css("direction"), n = this.scrollEl[0], "rtl" === t) switch (r) {
                    case "positive":
                        e = e - n.clientWidth + n.scrollWidth;
                        break;
                    case "reverse":
                        e = -e
                }
                return n.scrollLeft = e
            }, n.prototype.getScrollFromLeft = function () {
                var e, t, n;
                if (e = this.scrollEl.css("direction"), t = this.scrollEl[0], n = t.scrollLeft, "rtl" === e) switch (r) {
                    case "negative":
                        n = n - t.clientWidth + t.scrollWidth;
                        break;
                    case "reverse":
                        n = -n - t.clientWidth + t.scrollWidth
                }
                return n
            }, n.prototype.getNativeScrollLeft = function () {
                return this.scrollEl[0].scrollLeft
            }, n.prototype.setNativeScrollLeft = function (e) {
                return this.scrollEl[0].scrollLeft = e
            }, r = null, i = function () {
                var t, n, i;
                return t = e('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"), n = t[0], i = n.scrollLeft > 0 ? "positive" : (n.scrollLeft = 1, t.scrollLeft > 0 ? "reverse" : "negative"), t.remove(), i
            }, e(function () {
                return r = i()
            }), n
        }(f.Scroller), o = function (t) {
            function n() {
                n.__super__.constructor.apply(this, arguments), "clipped-scroll" === this.overflowX && (this.overflowX = "scroll", this.isHScrollbarsClipped = !0), "clipped-scroll" === this.overflowY && (this.overflowY = "scroll", this.isVScrollbarsClipped = !0)
            }
            return qe(n, t), n.prototype.isHScrollbarsClipped = !1, n.prototype.isVScrollbarsClipped = !1, n.prototype.renderEl = function () {
                var t;
                return t = n.__super__.renderEl.apply(this, arguments), e('<div class="fc-scroller-clip" />').append(t)
            }, n.prototype.updateSize = function () {
                var e, t, n;
                return t = this.scrollEl, n = be(t), e = {
                    marginLeft: 0,
                    marginRight: 0,
                    marginTop: 0,
                    marginBottom: 0
                }, this.isHScrollbarsClipped && (e.marginTop = -n.top, e.marginBottom = -n.bottom), this.isVScrollbarsClipped && (e.marginLeft = -n.left, e.marginRight = -n.right), t.css(e), t.toggleClass("fc-no-scrollbars", (this.isHScrollbarsClipped || "hidden" === this.overflowX) && (this.isVScrollbarsClipped || "hidden" === this.overflowY) && !(n.top || n.bottom || n.left || n.right))
            }, n.prototype.getScrollbarWidths = function () {
                var e;
                return e = be(this.scrollEl), this.isHScrollbarsClipped && (e.top = 0, e.bottom = 0), this.isVScrollbarsClipped && (e.left = 0, e.right = 0), e
            }, n
        }(d), W = function () {
            function t() {
                this.gutters = {}
            }
            return t.prototype.el = null, t.prototype.contentEl = null, t.prototype.bgEl = null, t.prototype.gutters = null, t.prototype.width = null, t.prototype.minWidth = null, t.prototype.render = function () {
                return this.el = e('<div class="fc-scroller-canvas"> <div class="fc-content"></div> <div class="fc-bg"></div> </div>'), this.contentEl = this.el.find(".fc-content"), this.bgEl = this.el.find(".fc-bg")
            }, t.prototype.setGutters = function (t) {
                return t ? e.extend(this.gutters, t) : this.gutters = {}, this.updateSize()
            }, t.prototype.setWidth = function (e) {
                return this.width = e, this.updateSize()
            }, t.prototype.setMinWidth = function (e) {
                return this.minWidth = e, this.updateSize()
            }, t.prototype.clearWidth = function () {
                return this.width = null, this.minWidth = null, this.updateSize()
            }, t.prototype.updateSize = function () {
                var e;
                return e = this.gutters, this.el.toggleClass("fc-gutter-left", Boolean(e.left)).toggleClass("fc-gutter-right", Boolean(e.right)).toggleClass("fc-gutter-top", Boolean(e.top)).toggleClass("fc-gutter-bottom", Boolean(e.bottom)).css({
                    paddingLeft: e.left || "",
                    paddingRight: e.right || "",
                    paddingTop: e.top || "",
                    paddingBottom: e.bottom || "",
                    width: null != this.width ? this.width + (e.left || 0) + (e.right || 0) : "",
                    minWidth: null != this.minWidth ? this.minWidth + (e.left || 0) + (e.right || 0) : ""
                }), this.bgEl.css({
                    left: e.left || "",
                    right: e.right || "",
                    top: e.top || "",
                    bottom: e.bottom || ""
                })
            }, t
        }(), B = function () {
            function e(e, t) {
                var n, i, r, a;
                for (this.axis = e, this.scrollers = t, r = this.scrollers, n = 0, i = r.length; i > n; n++) a = r[n], this.initScroller(a)
            }
            return e.prototype.axis = null, e.prototype.scrollers = null, e.prototype.masterScroller = null, e.prototype.initScroller = function (e) {
                return e.scrollEl.on("wheel mousewheel DomMouseScroll MozMousePixelScroll", function (t) {
                    return function () {
                        t.assignMasterScroller(e)
                    }
                }(this)), e.on("scrollStart", function (t) {
                    return function () {
                        return t.masterScroller ? void 0 : t.assignMasterScroller(e)
                    }
                }(this)).on("scroll", function (t) {
                    return function () {
                        var n, i, r, a, o;
                        if (e === t.masterScroller) {
                            for (a = t.scrollers, o = [], n = 0, i = a.length; i > n; n++)
                                if (r = a[n], r !== e) switch (t.axis) {
                                    case "horizontal":
                                        o.push(r.setNativeScrollLeft(e.getNativeScrollLeft()));
                                        break;
                                    case "vertical":
                                        o.push(r.setScrollTop(e.getScrollTop()));
                                        break;
                                    default:
                                        o.push(void 0)
                                } else o.push(void 0);
                            return o
                        }
                    }
                }(this)).on("scrollEnd", function (t) {
                    return function () {
                        return e === t.masterScroller ? t.unassignMasterScroller() : void 0
                    }
                }(this))
            }, e.prototype.assignMasterScroller = function (e) {
                var t, n, i, r;
                for (this.unassignMasterScroller(), this.masterScroller = e, r = this.scrollers, t = 0, n = r.length; n > t; t++) i = r[t], i !== e && i.disableTouchScroll()
            }, e.prototype.unassignMasterScroller = function () {
                var e, t, n, i;
                if (this.masterScroller) {
                    for (i = this.scrollers, e = 0, t = i.length; t > e; e++) n = i[e], n.enableTouchScroll();
                    this.masterScroller = null
                }
            }, e.prototype.update = function () {
                var e, t, n, i, r, a, o, s, l, c, u, d, h;
                for (e = function () {
                    var e, t, n, i;
                    for (n = this.scrollers, i = [], e = 0, t = n.length; t > e; e++) d = n[e], i.push(d.getScrollbarWidths());
                    return i
                }.call(this), s = l = c = o = 0, n = 0, r = e.length; r > n; n++) h = e[n], s = Math.max(s, h.left), l = Math.max(l, h.right), c = Math.max(c, h.top), o = Math.max(o, h.bottom);
                for (u = this.scrollers, t = i = 0, a = u.length; a > i; t = ++i) d = u[t], h = e[t], d.canvas.setGutters("horizontal" === this.axis ? {
                    left: s - h.left,
                    right: l - h.right
                } : {
                    top: c - h.top,
                    bottom: o - h.bottom
                })
            }, e
        }(), L = function () {
            function t(e, t) {
                this.allowPointerEvents = null != t ? t : !1, this.scroller = e, this.sprites = [], e.on("scroll", function (t) {
                    return function () {
                        return e.isTouchedEver ? (t.isTouch = !0, t.isForcedRelative = !0) : (t.isTouch = !1, t.isForcedRelative = !1, t.handleScroll())
                    }
                }(this)), e.on("scrollEnd", function (e) {
                    return function () {
                        return e.handleScroll()
                    }
                }(this))
            }
            return t.prototype.scroller = null, t.prototype.scrollbarWidths = null, t.prototype.sprites = null, t.prototype.viewportRect = null, t.prototype.contentOffset = null, t.prototype.isHFollowing = !0, t.prototype.isVFollowing = !1, t.prototype.allowPointerEvents = !1, t.prototype.containOnNaturalLeft = !1, t.prototype.containOnNaturalRight = !1, t.prototype.minTravel = 0, t.prototype.isTouch = !1, t.prototype.isForcedRelative = !1, t.prototype.setSprites = function (t) {
                var n, i, r;
                if (this.clearSprites(), t instanceof e) return this.sprites = function () {
                    var n, i, a;
                    for (a = [], n = 0, i = t.length; i > n; n++) r = t[n], a.push(new F(e(r), this));
                    return a
                }.call(this);
                for (n = 0, i = t.length; i > n; n++) r = t[n], r.follower = this;
                return this.sprites = t
            }, t.prototype.clearSprites = function () {
                var e, t, n, i;
                for (n = this.sprites, e = 0, t = n.length; t > e; e++) i = n[e], i.clear();
                return this.sprites = []
            }, t.prototype.handleScroll = function () {
                return this.updateViewport(), this.updatePositions()
            }, t.prototype.cacheDimensions = function () {
                var e, t, n, i;
                for (this.updateViewport(), this.scrollbarWidths = this.scroller.getScrollbarWidths(), this.contentOffset = this.scroller.canvas.el.offset(), n = this.sprites, e = 0, t = n.length; t > e; e++) i = n[e], i.cacheDimensions()
            }, t.prototype.updateViewport = function () {
                var e, t, n;
                return t = this.scroller, e = t.getScrollFromLeft(), n = t.getScrollTop(), this.viewportRect = {
                    left: e,
                    right: e + t.getClientWidth(),
                    top: n,
                    bottom: n + t.getClientHeight()
                }
            }, t.prototype.forceRelative = function () {
                var e, t, n, i, r;
                if (!this.isForcedRelative) {
                    for (this.isForcedRelative = !0, n = this.sprites, i = [], e = 0, t = n.length; t > e; e++) r = n[e], r.doAbsolute ? i.push(r.assignPosition()) : i.push(void 0);
                    return i
                }
            }, t.prototype.clearForce = function () {
                var e, t, n, i, r;
                if (this.isForcedRelative && !this.isTouch) {
                    for (this.isForcedRelative = !1, n = this.sprites, i = [], e = 0, t = n.length; t > e; e++) r = n[e], i.push(r.assignPosition());
                    return i
                }
            }, t.prototype.update = function () {
                return this.cacheDimensions(), this.updatePositions()
            }, t.prototype.updatePositions = function () {
                var e, t, n, i;
                for (n = this.sprites, e = 0, t = n.length; t > e; e++) i = n[e], i.updatePosition()
            }, t.prototype.getContentRect = function (e) {
                return pe(e, this.contentOffset)
            }, t.prototype.getBoundingRect = function (e) {
                return me(e, this.contentOffset)
            }, t
        }(), F = function () {
            function e(e, t) {
                this.el = e, this.follower = null != t ? t : null, this.isBlock = "block" === this.el.css("display"), this.el.css("position", "relative")
            }
            return e.prototype.follower = null, e.prototype.el = null, e.prototype.absoluteEl = null, e.prototype.naturalRect = null, e.prototype.parentRect = null, e.prototype.containerRect = null, e.prototype.isEnabled = !0, e.prototype.isHFollowing = !1, e.prototype.isVFollowing = !1, e.prototype.doAbsolute = !1, e.prototype.isAbsolute = !1, e.prototype.isCentered = !1, e.prototype.rect = null, e.prototype.isBlock = !1, e.prototype.naturalWidth = null, e.prototype.disable = function () {
                return this.isEnabled ? (this.isEnabled = !1, this.resetPosition(), this.unabsolutize()) : void 0
            }, e.prototype.enable = function () {
                return this.isEnabled ? void 0 : (this.isEnabled = !0, this.assignPosition())
            }, e.prototype.clear = function () {
                return this.disable(), this.follower = null, this.absoluteEl = null
            }, e.prototype.cacheDimensions = function () {
                var e, t, n, i, r, a, o, s;
                return i = !1, r = !1, n = !1, this.naturalWidth = this.el.width(), this.resetPosition(), t = this.follower, o = this.naturalRect = t.getBoundingRect(this.el), s = this.el.parent(), this.parentRect = t.getBoundingRect(s), e = this.containerRect = Te(t.getContentRect(s), o), a = t.minTravel, t.containOnNaturalLeft && (e.left = o.left), t.containOnNaturalRight && (e.right = o.right), t.isHFollowing && ye(e) - ye(o) >= a && (n = "center" === this.el.css("text-align"), i = !0), t.isVFollowing && ve(e) - ve(o) >= a && (r = !0), this.isHFollowing = i, this.isVFollowing = r, this.isCentered = n
            }, e.prototype.updatePosition = function () {
                return this.computePosition(), this.assignPosition()
            }, e.prototype.resetPosition = function () {
                return this.el.css({
                    top: "",
                    left: ""
                })
            }, e.prototype.computePosition = function () {
                var e, t, n, i, r, a, o, s;
                return o = this.follower.viewportRect, n = this.parentRect, e = this.containerRect, s = ke(o, n), i = null, t = !1, s && (i = ae(this.naturalRect), a = ke(i, n), (this.isCentered && !Le(o, n) || a && !Le(o, a)) && (t = !0, this.isHFollowing && (this.isCentered ? (r = ye(i), i.left = (s.left + s.right) / 2 - r / 2, i.right = i.left + r) : we(i, o) || (t = !1), we(i, e) && (t = !1)), this.isVFollowing && (Ue(i, o) || (t = !1), Ue(i, e) && (t = !1)), Le(o, i) || (t = !1))), this.rect = i, this.doAbsolute = t
            }, e.prototype.assignPosition = function () {
                var e, t;
                return this.isEnabled ? this.rect ? this.doAbsolute && !this.follower.isForcedRelative ? (this.absolutize(), this.absoluteEl.css({
                    top: this.rect.top - this.follower.viewportRect.top + this.follower.scrollbarWidths.top,
                    left: this.rect.left - this.follower.viewportRect.left + this.follower.scrollbarWidths.left,
                    width: this.isBlock ? this.naturalWidth : ""
                })) : (t = this.rect.top - this.naturalRect.top, e = this.rect.left - this.naturalRect.left, this.unabsolutize(), this.el.toggleClass("fc-following", Boolean(t || e)).css({
                    top: t,
                    left: e
                })) : this.unabsolutize() : void 0
            }, e.prototype.absolutize = function () {
                return this.isAbsolute ? void 0 : (this.absoluteEl || (this.absoluteEl = this.buildAbsoluteEl()), this.absoluteEl.appendTo(this.follower.scroller.el), this.el.css("visibility", "hidden"), this.isAbsolute = !0)
            }, e.prototype.unabsolutize = function () {
                return this.isAbsolute ? (this.absoluteEl.detach(), this.el.css("visibility", ""), this.isAbsolute = !1) : void 0
            }, e.prototype.buildAbsoluteEl = function () {
                var e;
                return e = this.el.clone().addClass("fc-following"), e.css({
                    position: "absolute",
                    "z-index": 1e3,
                    "font-weight": this.el.css("font-weight"),
                    "font-size": this.el.css("font-size"),
                    "font-family": this.el.css("font-family"),
                    "text-decoration": this.el.css("text-decoration"),
                    color: this.el.css("color"),
                    "padding-top": this.el.css("padding-top"),
                    "padding-bottom": this.el.css("padding-bottom"),
                    "padding-left": this.el.css("padding-left"),
                    "padding-right": this.el.css("padding-right")
                }), this.follower.allowPointerEvents || e.css("pointer-events", "none"), e
            }, e
        }(), ae = function (e) {
            return {
                left: e.left,
                right: e.right,
                top: e.top,
                bottom: e.bottom
            }
        }, ye = function (e) {
            return e.right - e.left
        }, ve = function (e) {
            return e.bottom - e.top
        }, Le = function (e, t) {
            return Fe(e, t) && Be(e, t)
        }, Fe = function (e, t) {
            return t.left >= e.left && t.right <= e.right
        }, Be = function (e, t) {
            return t.top >= e.top && t.bottom <= e.bottom
        }, we = function (e, t) {
            return e.left < t.left ? (e.right = t.left + ye(e), e.left = t.left, !0) : e.right > t.right ? (e.left = t.right - ye(e), e.right = t.right, !0) : !1
        }, Ue = function (e, t) {
            return e.top < t.top ? (e.bottom = t.top + ve(e), e.top = t.top, !0) : e.bottom > t.bottom ? (e.top = t.bottom - ve(e), e.bottom = t.bottom, !0) : !1
        }, Te = function (e, t) {
            return {
                left: Math.min(e.left, t.left),
                right: Math.max(e.right, t.right),
                top: Math.min(e.top, t.top),
                bottom: Math.max(e.bottom, t.bottom)
            }
        }, r = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.prototype.resourceManager = null, n.prototype.initialize = function () {
                return this.resourceManager = new $(this)
            }, n.prototype.instantiateView = function (e) {
                var t, n;
                return t = this.getViewSpec(e), n = t["class"], this.opt("resources") && t.options.resources !== !1 && (t.queryResourceClass ? n = t.queryResourceClass(t) || n : t.resourceClass && (n = t.resourceClass)), new n(this, t)
            }, n.prototype.getResources = function () {
                return Array.prototype.slice.call(this.resourceManager.topLevelResources)
            }, n.prototype.addResource = function (e, t) {
                var n;
                null == t && (t = !1), n = this.resourceManager.addResource(e), t && this.view.scrollToResource && n.then(function (e) {
                    return function (t) {
                        return e.view.scrollToResource(t)
                    }
                }(this))
            }, n.prototype.removeResource = function (e) {
                return this.resourceManager.removeResource(e)
            }, n.prototype.refetchResources = function () {
                this.resourceManager.clear(), this.view.flash("initialResources")
            }, n.prototype.rerenderResources = function () {
                this.resourceManager.resetCurrentResources()
            }, n.prototype.isSpanAllowed = function (e, t) {
                var i, r;
                return "object" != typeof t || (i = this.getEventResourceIds(t), !i.length || e.resourceId && (r = e.resourceId, Ye.call(i, r) >= 0)) ? n.__super__.isSpanAllowed.apply(this, arguments) : !1
            }, n.prototype.mutateSeg = function (t, n, i) {
                var r, a, o, s;
                return n.resourceId && (o = (null != (s = t.resource) ? s.id : void 0) || t.resourceId, a = n.resourceId, r = this.getEventResourceIds(t.event), o !== a && (r = r.filter(function (e) {
                    return e !== o && e !== a
                }), r.push(a)), n = e.extend({}, n), this.setEventResourceIds(n, r)), this.mutateEvent(t.event, n, i)
            }, n.prototype.getPeerEvents = function (e, t) {
                var i, r, a, o, s, l, c, u, d, h, f, p, m, g;
                for (p = n.__super__.getPeerEvents.apply(this, arguments), h = e.resourceId ? [e.resourceId] : t ? this.getEventResourceIds(t) : [], i = [], a = 0, l = p.length; l > a; a++) {
                    if (f = p[a], r = !1, g = this.getEventResourceIds(f), g.length && h.length) {
                        for (o = 0, c = g.length; c > o; o++)
                            for (m = g[o], s = 0, u = h.length; u > s; s++)
                                if (d = h[s], d === m) {
                                    r = !0;
                                    break
                                }
                    } else r = !0;
                    r && i.push(f)
                }
                return i
            }, n.prototype.spanContainsSpan = function (e, t) {
                return e.resourceId && e.resourceId !== t.resourceId ? !1 : n.__super__.spanContainsSpan.apply(this, arguments)
            }, n.prototype.getCurrentBusinessHourEvents = function (e) {
                var t, i, r, a, o, s, l, c, u, d, h, f;
                for (o = this.resourceManager.getFlatResources(), i = !1, s = 0, u = o.length; u > s; s++) f = o[s], f.businessHours && (i = !0);
                if (i) {
                    for (t = [], l = 0, d = o.length; d > l; l++)
                        for (f = o[l], a = this.computeBusinessHourEvents(e, f.businessHours || this.opt("businessHours")), c = 0, h = a.length; h > c; c++) r = a[c], r.resourceId = f.id, t.push(r);
                    return t
                }
                return n.__super__.getCurrentBusinessHourEvents.apply(this, arguments)
            }, n.prototype.buildSelectSpan = function (e, t, i) {
                var r;
                return r = n.__super__.buildSelectSpan.apply(this, arguments), i && (r.resourceId = i), r
            }, n.prototype.getResourceById = function (e) {
                return this.resourceManager.getResourceById(e)
            }, n.prototype.normalizeEvent = function (e) {
                return n.__super__.normalizeEvent.apply(this, arguments), null == e.resourceId && (e.resourceId = null), null != e.resourceIds ? e.resourceIds : e.resourceIds = null
            }, n.prototype.getEventResourceId = function (e) {
                return this.getEventResourceIds(e)[0]
            }, n.prototype.getEventResourceIds = function (e) {
                var t, n, i, r, a, o, s, l;
                if (l = String(null != (a = null != (o = e[this.getEventResourceField()]) ? o : e.resourceId) ? a : "")) return [l];
                if (e.resourceIds) {
                    for (r = [], s = e.resourceIds, t = 0, n = s.length; n > t; t++) l = s[t], i = String(null != l ? l : ""), i && r.push(i);
                    return r
                }
                return []
            }, n.prototype.setEventResourceId = function (e, t) {
                return this.setEventResourceIds(e, t ? [t] : [])
            }, n.prototype.setEventResourceIds = function (e, t) {
                return e[this.getEventResourceField()] = 1 === t.length ? t[0] : null, e.resourceIds = t.length > 1 ? t : null
            }, n.prototype.getEventResourceField = function () {
                return this.opt("eventResourceField") || "resourceId"
            }, n.prototype.getResourceEvents = function (t) {
                var n;
                return n = "object" == typeof t ? t : this.getResourceById(t), n ? this.clientEvents(function (t) {
                    return function (i) {
                        return -1 !== e.inArray(n.id, t.getEventResourceIds(i))
                    }
                }(this)) : []
            }, n.prototype.getEventResource = function (e) {
                return this.getEventResources(e)[0]
            }, n.prototype.getEventResources = function (e) {
                var t, n, i, r, a, o, s;
                if (t = "object" == typeof e ? e : this.clientEvents(e)[0], s = [], t)
                    for (r = this.getEventResourceIds(t), n = 0, i = r.length; i > n; n++) o = r[n], a = this.getResourceById(o), a && s.push(a);
                return s
            }, n
        }(i), i.prototype = r.prototype, He = Z.prototype.setElement, Pe = Z.prototype.removeElement, Ie = Z.prototype.onBaseRender, i.defaults.refetchResourcesOnNavigate = !1, Z.prototype.canHandleSpecificResources = !1, Z.prototype.isDestroying = !1, Z.prototype.setElement = function () {
            return He.apply(this, arguments), this.watchResources()
        }, Z.prototype.removeElement = function () {
            return this.isDestroying = !0, this.unwatchResources(), Pe.apply(this, arguments), this.isDestroying = !1
        }, Z.prototype.onBaseRender = function () {
            return je(this.calendar.opt("schedulerLicenseKey"), this.el), Ie.apply(this, arguments)
        }, Z.prototype.watchResources = function () {
            var e, t;
            return t = [], e = ["initialResources"], this.opt("refetchResourcesOnNavigate") && t.push("dateProfile"), this.opt("filterResourcesWithEvents") && e.push("currentEvents"), this.watch("initialResources", t, function (e) {
                return function (t) {
                    return e.getInitialResources(t.dateProfile)
                }
            }(this)), this.watch("bindingResources", e, function (e) {
                return function (t) {
                    e.bindResourceChanges(t.currentEvents), e.setResources(t.initialResources, t.currentEvents)
                }
            }(this), function (e) {
                return function () {
                    e.unbindResourceChanges(), e.unsetResources()
                }
            }(this))
        }, Z.prototype.unwatchResources = function () {
            return this.unwatch("initialResources"), this.unwatch("bindingResources")
        }, Z.prototype.getInitialResources = function (e) {
            return e ? this.calendar.resourceManager.getResources(e.activeRange.start, e.activeRange.end) : this.calendar.resourceManager.getResources()
        }, Z.prototype.bindResourceChanges = function (e) {
            return this.listenTo(this.calendar.resourceManager, {
                set: function (t) {
                    return function (n) {
                        return t.setResources(n, e)
                    }
                }(this),
                unset: function (e) {
                    return function () {
                        return e.unsetResources()
                    }
                }(this),
                reset: function (t) {
                    return function (n) {
                        return t.resetResources(n, e)
                    }
                }(this),
                add: function (t) {
                    return function (n, i) {
                        return t.addResource(n, i, e)
                    }
                }(this),
                remove: function (t) {
                    return function (n, i) {
                        return t.removeResource(n, i, e)
                    }
                }(this)
            })
        }, Z.prototype.unbindResourceChanges = function () {
            return this.stopListeningTo(this.calendar.resourceManager)
        }, Z.watch("displayingEvents", ["displayingDates", "hasEvents", "currentResources"], function (e) {
            return this.requestEventsRender(this.get("currentEvents"))
        }, function () {
            return this.requestEventsUnrender()
        }), Z.prototype.setResources = function (e, t) {
            return t && (e = this.filterResourcesWithEvents(e, t)), this.set("currentResources", e), this.set("hasResources", !0), this.handleResourcesSet(e)
        }, Z.prototype.unsetResources = function () {
            return this.unset("currentResources"), this.unset("hasResources"), this.handleResourcesUnset()
        }, Z.prototype.resetResources = function (e, t) {
            return this.startBatchRender(), this.unsetResources(), this.setResources(e, t), this.stopBatchRender()
        }, Z.prototype.addResource = function (e, t, n) {
            var i;
            return this.canHandleSpecificResources ? (n && (i = this.filterResourcesWithEvents([e], n),
                i.length || (e = null)), e ? (this.set("currentResources", t), this.handleResourceAdd(e)) : void 0) : this.resetResources(t, n)
        }, Z.prototype.removeResource = function (e, t, n) {
            return this.canHandleSpecificResources ? (this.set("currentResources", t), this.handleResourceRemove(e)) : this.resetResources(t, n)
        }, Z.prototype.handleResourcesSet = function (e) { }, Z.prototype.handleResourcesUnset = function (e) { }, Z.prototype.handleResourceAdd = function (e) { }, Z.prototype.handleResourceRemove = function (e) { }, Z.prototype.filterResourcesWithEvents = function (e, t) {
            var n, i, r, a, o, s, l, c;
            for (c = {}, i = 0, a = t.length; a > i; i++)
                for (n = t[i], s = this.calendar.getEventResourceIds(n), r = 0, o = s.length; o > r; r++) l = s[r], c[l] = !0;
            return Q(e, c)
        }, Q = function (e, t) {
            var n, i, r, a, o, s;
            for (r = [], a = 0, o = e.length; o > a; a++) s = e[a], s.children.length ? (n = Q(s.children, t), (n.length || t[s.id]) && (i = oe(s), i.children = n, r.push(i))) : t[s.id] && r.push(s);
            return r
        }, De = p.prototype.getSegCustomClasses, $e = p.prototype.getSegDefaultBackgroundColor, Me = p.prototype.getSegDefaultBorderColor, Re = p.prototype.getSegDefaultTextColor, p.prototype.getSegCustomClasses = function (e) {
            var t, n, i, r, a;
            for (t = De.apply(this, arguments), r = this.getSegResources(e), n = 0, i = r.length; i > n; n++) a = r[n], t = t.concat(a.eventClassName || []);
            return t
        }, p.prototype.getSegDefaultBackgroundColor = function (e) {
            var t, n, i, r, a;
            for (r = this.getSegResources(e), n = 0, i = r.length; i > n; n++)
                for (t = r[n]; t;) {
                    if (a = t.eventBackgroundColor || t.eventColor) return a;
                    t = t._parent
                }
            return $e.apply(this, arguments)
        }, p.prototype.getSegDefaultBorderColor = function (e) {
            var t, n, i, r, a;
            for (r = this.getSegResources(e), n = 0, i = r.length; i > n; n++)
                for (t = r[n]; t;) {
                    if (a = t.eventBorderColor || t.eventColor) return a;
                    t = t._parent
                }
            return Me.apply(this, arguments)
        }, p.prototype.getSegDefaultTextColor = function (e) {
            var t, n, i, r, a;
            for (r = this.getSegResources(e), n = 0, i = r.length; i > n; n++)
                for (t = r[n]; t;) {
                    if (a = t.eventTextColor) return a;
                    t = t._parent
                }
            return Re.apply(this, arguments)
        }, p.prototype.getSegResources = function (e) {
            return e.resource ? [e.resource] : this.view.calendar.getEventResources(e.event)
        }, $ = function (t) {
            function n(e) {
                this.calendar = e, this.initializeCache()
            }
            return qe(n, t), n.mixin(u), n.resourceGuid = 1, n.ajaxDefaults = {
                dataType: "json",
                cache: !1
            }, n.prototype.calendar = null, n.prototype.fetchId = 0, n.prototype.topLevelResources = null, n.prototype.resourcesById = null, n.prototype.fetching = null, n.prototype.currentStart = null, n.prototype.currentEnd = null, n.prototype.getResources = function (e, t) {
                var n;
                return n = !e && !this.currentStart || e && this.currentStart && e.isSame(this.currentStart) && t.isSame(this.currentEnd), this.fetching && n ? this.fetching : this.fetchResources(e, t)
            }, n.prototype.fetchResources = function (e, t) {
                var n;
                return n = this.fetchId += 1, this.fetching = k.construct(function (i) {
                    return function (r, a) {
                        return i.fetchResourceInputs(function (e) {
                            return n === i.fetchId ? (i.setResources(e), r(i.topLevelResources)) : a()
                        }, e, t)
                    }
                }(this))
            }, n.prototype.fetchResourceInputs = function (t, i, r) {
                var a, o, s, l;
                switch (a = this.calendar, s = a.opt("resources"), l = a.opt("timezone"), "string" === e.type(s) && (s = {
                    url: s
                }), e.type(s)) {
                    case "function":
                        return this.calendar.pushLoading(), s(function (e) {
                            return function (n) {
                                return e.calendar.popLoading(), t(n)
                            }
                        }(this), i, r, a.opt("timezone"));
                    case "object":
                        return a.pushLoading(), o = {}, i && r && (o[a.opt("startParam")] = i.format(), o[a.opt("endParam")] = r.format(), l && "local" !== l && (o[a.opt("timezoneParam")] = l)), e.ajax(e.extend({
                            data: o
                        }, n.ajaxDefaults, s)).then(function (e) {
                            return function (e) {
                                return a.popLoading(), t(e)
                            }
                        }(this));
                    case "array":
                        return t(s);
                    default:
                        return t([])
                }
            }, n.prototype.getResourceById = function (e) {
                return this.resourcesById[e]
            }, n.prototype.getFlatResources = function () {
                var e, t;
                t = [];
                for (e in this.resourcesById) t.push(this.resourcesById[e]);
                return t
            }, n.prototype.initializeCache = function () {
                return this.topLevelResources = [], this.resourcesById = {}
            }, n.prototype.setResources = function (e) {
                var t, n, i, r, a, o, s;
                for (s = Boolean(this.topLevelResources), this.initializeCache(), a = function () {
                    var t, n, i;
                    for (i = [], t = 0, n = e.length; n > t; t++) r = e[t], i.push(this.buildResource(r));
                    return i
                }.call(this), o = function () {
                    var e, t, n;
                    for (n = [], e = 0, t = a.length; t > e; e++) i = a[e], this.addResourceToIndex(i) && n.push(i);
                    return n
                }.call(this), t = 0, n = o.length; n > t; t++) i = o[t], this.addResourceToTree(i);
                return s ? this.trigger("reset", this.topLevelResources) : this.trigger("set", this.topLevelResources), this.calendar.publiclyTrigger("resourcesSet", null, this.topLevelResources)
            }, n.prototype.resetCurrentResources = function () {
                return this.topLevelResources ? this.trigger("reset", this.topLevelResources) : void 0
            }, n.prototype.clear = function () {
                return this.topLevelResources = null, this.fetching = null
            }, n.prototype.addResource = function (e) {
                return this.fetching ? this.fetching.then(function (t) {
                    return function () {
                        var n;
                        return n = t.buildResource(e), t.addResourceToIndex(n) ? (t.addResourceToTree(n), t.trigger("add", n, t.topLevelResources), n) : !1
                    }
                }(this)) : k.reject()
            }, n.prototype.addResourceToIndex = function (e) {
                var t, n, i, r;
                if (this.resourcesById[e.id]) return !1;
                for (this.resourcesById[e.id] = e, r = e.children, n = 0, i = r.length; i > n; n++) t = r[n], this.addResourceToIndex(t);
                return !0
            }, n.prototype.addResourceToTree = function (e) {
                var t, n, i, r;
                if (!e.parent) {
                    if (n = String(null != (i = e.parentId) ? i : "")) {
                        if (t = this.resourcesById[n], !t) return !1;
                        e.parent = t, r = t.children
                    } else r = this.topLevelResources;
                    r.push(e)
                }
                return !0
            }, n.prototype.removeResource = function (e) {
                var t;
                return t = "object" == typeof e ? e.id : e, this.fetching ? this.fetching.then(function (e) {
                    return function () {
                        var n;
                        return n = e.removeResourceFromIndex(t), n && (e.removeResourceFromTree(n), e.trigger("remove", n, e.topLevelResources)), n
                    }
                }(this)) : k.reject()
            }, n.prototype.removeResourceFromIndex = function (e) {
                var t, n, i, r, a;
                if (a = this.resourcesById[e]) {
                    for (delete this.resourcesById[e], r = a.children, n = 0, i = r.length; i > n; n++) t = r[n], this.removeResourceFromIndex(t.id);
                    return a
                }
                return !1
            }, n.prototype.removeResourceFromTree = function (e, t) {
                var n, i, r, a;
                for (null == t && (t = this.topLevelResources), n = i = 0, r = t.length; r > i; n = ++i) {
                    if (a = t[n], a === e) return e.parent = null, t.splice(n, 1), !0;
                    if (this.removeResourceFromTree(e, a.children)) return !0
                }
                return !1
            }, n.prototype.buildResource = function (t) {
                var i, r, a, o, s;
                return s = e.extend({}, t), s.id = String(null != (o = t.id) ? o : "_fc" + n.resourceGuid++), a = t.eventClassName, s.eventClassName = function () {
                    switch (e.type(a)) {
                        case "string":
                            return a.split(/\s+/);
                        case "array":
                            return a;
                        default:
                            return []
                    }
                }(), s.children = function () {
                    var e, n, a, o, l;
                    for (o = null != (a = t.children) ? a : [], l = [], e = 0, n = o.length; n > e; e++) r = o[e], i = this.buildResource(r), i.parent = s, l.push(i);
                    return l
                }.call(this), s
            }, n
        }(a), i.defaults.filterResourcesWithEvents = !1, O = {
            isResourcesRendered: !1,
            resourceTextFunc: null,
            setElement: function () {
                return Z.prototype.setElement.apply(this, arguments), this.watch("displayingResources", ["hasResources"], function (e) {
                    return function () {
                        return e.requestResourcesRender(e.get("currentResources"))
                    }
                }(this), function (e) {
                    return function () {
                        return e.requestResourcesUnrender()
                    }
                }(this)), this.watch("displayingEvents", ["displayingDates", "hasEvents", "displayingResources"], function (e) {
                    return function () {
                        return e.requestEventsRender(e.get("currentEvents"))
                    }
                }(this), function (e) {
                    return function () {
                        return e.requestEventsUnrender()
                    }
                }(this))
            },
            queryScroll: function () {
                var t;
                return t = Z.prototype.queryScroll.apply(this, arguments), this.isResourcesRendered && e.extend(t, this.queryResourceScroll()), t
            },
            applyScroll: function (e) {
                return Z.prototype.applyScroll.apply(this, arguments), this.isResourcesRendered ? this.applyResourceScroll(e) : void 0
            },
            queryResourceScroll: function () {
                return {}
            },
            applyResourceScroll: function () { },
            bindBaseRenderHandlers: function () {
                var e, t;
                return t = !1, e = !1, this.on("resourcesRendered.baseHandler", function () {
                    return !t && (t = !0, e) ? this.onBaseRender() : void 0
                }), this.on("datesRendered.baseHandler", function () {
                    return !e && (e = !0, t) ? this.onBaseRender() : void 0
                }), this.on("before:resourcesUnrendered.baseHandler", function () {
                    return t ? t = !1 : void 0
                }), this.on("before:datesUnrendered.baseHandler", function () {
                    return e ? (e = !1, this.onBeforeBaseUnrender()) : void 0
                })
            },
            handleResourcesSet: function (e) { },
            handleResourcesUnset: function () { },
            handleResourceAdd: function (e) {
                return this.requestResourceRender(e)
            },
            handleResourceRemove: function (e) {
                return this.requestResourceUnrender(e)
            },
            requestResourcesRender: function (e) {
                return this.renderQueue.queue(function (t) {
                    return function () {
                        return t.executeResourcesRender(e)
                    }
                }(this), "resource", "init")
            },
            requestResourcesUnrender: function () {
                return this.renderQueue.queue(function (e) {
                    return function () {
                        return e.executeResourcesUnrender()
                    }
                }(this), "resource", "destroy")
            },
            requestResourceRender: function (e) {
                return this.renderQueue.queue(function (t) {
                    return function () {
                        return t.executeResourceRender(e)
                    }
                }(this), "resource", "add")
            },
            requestResourceUnrender: function (e) {
                return this.renderQueue.queue(function (t) {
                    return function () {
                        return t.executeResourceUnrender(e)
                    }
                }(this), "resource", "remove")
            },
            executeResourcesRender: function (e) {
                return this.renderResources(e), this.isResourcesRendered = !0, this.trigger("resourcesRendered")
            },
            executeResourcesUnrender: function () {
                return this.trigger("before:resourcesUnrendered"), this.unrenderResources(), this.isResourcesRendered = !1
            },
            executeResourceRender: function (e) {
                return this.renderResource(e)
            },
            executeResourceUnrender: function (e) {
                return this.unrenderResource(e)
            },
            renderResources: function (e) { },
            unrenderResources: function () { },
            renderResource: function (e) { },
            unrenderResource: function (e) { },
            isEventDraggable: function (e) {
                return this.isEventResourceEditable(e) || Z.prototype.isEventDraggable.call(this, e)
            },
            isEventResourceEditable: function (e) {
                var t, n, i;
                return null != (t = null != (n = null != (i = e.resourceEditable) ? i : (e.source || {}).resourceEditable) ? n : this.opt("eventResourceEditable")) ? t : this.isEventGenerallyEditable(e)
            },
            getResourceText: function (e) {
                return this.getResourceTextFunc()(e)
            },
            getResourceTextFunc: function () {
                var e;
                return this.resourceTextFunc ? this.resourceTextFunc : (e = this.opt("resourceText"), "function" != typeof e && (e = function (e) {
                    return e.title || e.id
                }), this.resourceTextFunc = e)
            },
            triggerDayClick: function (e, t, n) {
                var i;
                return i = this.calendar.resourceManager, this.publiclyTrigger("dayClick", t, this.calendar.applyTimezone(e.start), n, this, i.getResourceById(e.resourceId))
            },
            triggerSelect: function (e, t) {
                var n;
                return n = this.calendar.resourceManager, this.publiclyTrigger("select", null, this.calendar.applyTimezone(e.start), this.calendar.applyTimezone(e.end), t, this, n.getResourceById(e.resourceId))
            },
            triggerExternalDrop: function (e, t, n, i, r) {
                return this.publiclyTrigger("drop", n[0], t.start, i, r, t.resourceId), e ? this.publiclyTrigger("eventReceive", null, e) : void 0
            },
            reportExternalDrop: function () {
                var e, t, n, i;
                return t = arguments[0], e = arguments[1], n = 3 <= arguments.length ? Ve.call(arguments, 2) : [], e = this.normalizeDropLocation(e), (i = Z.prototype.reportExternalDrop).call.apply(i, [this, t, e].concat(Ve.call(n)))
            },
            normalizeDropLocation: function (t) {
                var n;
                return n = e.extend({}, t), delete n.resourceId, this.calendar.setEventResourceId(n, t.resourceId), n
            }
        }, K = e.extend({}, O, {
            setElement: function () {
                var e, t, n;
                return O.setElement.apply(this, arguments), t = !1, e = !1, n = !1, this.watch("dateProfileOnly", ["dateProfile"], function (e) {
                    return function () {
                        return n = !0
                    }
                }(this)), this.watch("displayingDatesOnly", ["dateProfile", "?currentResources"], function (e) {
                    return function (i) {
                        return i.currentResources || e.isDestroying ? void 0 : (t = !0, e.renderQueue.queue(function () {
                            return e.executeDateRender(i.dateProfile, !n), n = !1
                        }, "date", "init"))
                    }
                }(this), function (e) {
                    return function () {
                        return t ? (t = !1, e.renderQueue.queue(function () {
                            return e.executeDateUnrender()
                        }, "date", "destroy")) : void 0
                    }
                }(this)), this.watch("displayingDates", ["dateProfile", "currentResources"], function (t) {
                    return function (i) {
                        return t.isDestroying ? void 0 : (e = !0, t.renderQueue.queue(function () {
                            return t.setResourcesOnGrids(i.currentResources), t.executeDateRender(i.dateProfile, !n), n = !1, t.trigger("resourcesRendered")
                        }, "resource", "init"))
                    }
                }(this), function (t) {
                    return function () {
                        return e ? (e = !1, t.renderQueue.queue(function () {
                            return t.trigger("before:resourcesUnrendered"), t.unsetResourcesOnGrids(), t.executeDateUnrender()
                        }, "resource", "destroy")) : void 0
                    }
                }(this)), this.watch("displayingResources", ["displayingDates"], function (e) {
                    return function () {
                        return !0
                    }
                }(this))
            },
            setResourcesOnGrids: function (e) { },
            unsetResourcesOnGrids: function () { }
        }), D = {
            allowCrossResource: !0,
            eventRangeToSpans: function (t, n) {
                var i, r, a, o, s;
                if (o = this.view.calendar.getEventResourceIds(n), o.length) {
                    for (s = [], i = 0, r = o.length; r > i; i++) a = o[i], s.push(e.extend({}, t, {
                        resourceId: a
                    }));
                    return s
                }
                return f.isBgEvent(n) ? p.prototype.eventRangeToSpans.apply(this, arguments) : []
            },
            fabricateHelperEvent: function (e, t) {
                var n;
                return n = p.prototype.fabricateHelperEvent.apply(this, arguments), this.view.calendar.setEventResourceId(n, e.resourceId), n
            },
            computeEventDrop: function (e, t, n) {
                var i;
                return i = this.view.isEventStartEditable(n) ? p.prototype.computeEventDrop.apply(this, arguments) : f.pluckEventDateProps(n), i && (this.view.isEventResourceEditable(n) ? i.resourceId = t.resourceId : i.resourceId = e.resourceId), i
            },
            computeExternalDrop: function (e, t) {
                var n;
                return n = p.prototype.computeExternalDrop.apply(this, arguments), n && (n.resourceId = e.resourceId), n
            },
            computeEventResize: function (e, t, n, i) {
                var r;
                if (this.allowCrossResource || t.resourceId === n.resourceId) return r = p.prototype.computeEventResize.apply(this, arguments), r && (r.resourceId = t.resourceId), r
            },
            computeSelectionSpan: function (e, t) {
                var n;
                if (this.allowCrossResource || e.resourceId === t.resourceId) return n = p.prototype.computeSelectionSpan.apply(this, arguments), n && (n.resourceId = e.resourceId), n
            }
        }, E = {
            flattenedResources: null,
            resourceCnt: 0,
            datesAboveResources: !1,
            allowCrossResource: !1,
            setResources: function (e) {
                return this.flattenedResources = this.flattenResources(e), this.resourceCnt = this.flattenedResources.length, this.updateDayTableCols()
            },
            unsetResources: function () {
                return this.flattenedResources = null, this.resourceCnt = 0, this.updateDayTableCols()
            },
            flattenResources: function (e) {
                var t, n, i, r;
                return n = this.view.opt("resourceOrder"), n ? (t = Oe(n), r = function (e, n) {
                    return te(e, n, t)
                }) : r = null, i = [], this.accumulateResources(e, r, i), i
            },
            accumulateResources: function (e, t, n) {
                var i, r, a, o, s;
                for (t ? (s = e.slice(0), s.sort(t)) : s = e, o = [], i = 0, r = s.length; r > i; i++) a = s[i], n.push(a), o.push(this.accumulateResources(a.children, t, n));
                return o
            },
            updateDayTableCols: function () {
                return this.datesAboveResources = this.view.opt("groupByDateAndResource"), f.DayTableMixin.updateDayTableCols.call(this)
            },
            computeColCnt: function () {
                return (this.resourceCnt || 1) * this.daysPerRow
            },
            getColDayIndex: function (e) {
                return this.isRTL && (e = this.colCnt - 1 - e), this.datesAboveResources ? Math.floor(e / (this.resourceCnt || 1)) : e % this.daysPerRow
            },
            getColResource: function (e) {
                return this.flattenedResources[this.getColResourceIndex(e)]
            },
            getColResourceIndex: function (e) {
                return this.isRTL && (e = this.colCnt - 1 - e), this.datesAboveResources ? e % (this.resourceCnt || 1) : Math.floor(e / this.daysPerRow)
            },
            indicesToCol: function (e, t) {
                var n;
                return n = this.datesAboveResources ? t * (this.resourceCnt || 1) + e : e * this.daysPerRow + t, this.isRTL && (n = this.colCnt - 1 - n), n
            },
            renderHeadTrHtml: function () {
                return this.resourceCnt ? this.daysPerRow > 1 ? this.datesAboveResources ? this.renderHeadDateAndResourceHtml() : this.renderHeadResourceAndDateHtml() : this.renderHeadResourceHtml() : f.DayTableMixin.renderHeadTrHtml.call(this)
            },
            renderHeadResourceHtml: function () {
                var e, t, n, i, r;
                for (r = [], n = this.flattenedResources, e = 0, t = n.length; t > e; e++) i = n[e], r.push(this.renderHeadResourceCellHtml(i));
                return this.wrapTr(r, "renderHeadIntroHtml")
            },
            renderHeadResourceAndDateHtml: function () {
                var e, t, n, i, r, a, o, s, l, c;
                for (c = [], t = [], o = this.flattenedResources, i = 0, a = o.length; a > i; i++)
                    for (l = o[i], c.push(this.renderHeadResourceCellHtml(l, null, this.daysPerRow)), n = r = 0, s = this.daysPerRow; s > r; n = r += 1) e = this.dayDates[n].clone(), t.push(this.renderHeadResourceDateCellHtml(e, l));
                return this.wrapTr(c, "renderHeadIntroHtml") + this.wrapTr(t, "renderHeadIntroHtml")
            },
            renderHeadDateAndResourceHtml: function () {
                var e, t, n, i, r, a, o, s, l, c;
                for (t = [], c = [], n = i = 0, o = this.daysPerRow; o > i; n = i += 1)
                    for (e = this.dayDates[n].clone(), t.push(this.renderHeadDateCellHtml(e, this.resourceCnt)), s = this.flattenedResources, r = 0, a = s.length; a > r; r++) l = s[r], c.push(this.renderHeadResourceCellHtml(l, e));
                return this.wrapTr(t, "renderHeadIntroHtml") + this.wrapTr(c, "renderHeadIntroHtml")
            },
            renderHeadResourceCellHtml: function (e, t, n) {
                return '<th class="fc-resource-cell" data-resource-id="' + e.id + '"' + (t ? ' data-date="' + t.format("YYYY-MM-DD") + '"' : "") + (n > 1 ? ' colspan="' + n + '"' : "") + ">" + _e(this.view.getResourceText(e)) + "</th>"
            },
            renderHeadResourceDateCellHtml: function (e, t, n) {
                return this.renderHeadDateCellHtml(e, n, 'data-resource-id="' + t.id + '"')
            },
            processHeadResourceEls: function (t) {
                return t.find(".fc-resource-cell").each(function (t) {
                    return function (n, i) {
                        var r;
                        return r = t.datesAboveResources ? t.getColResource(n) : t.flattenedResources[t.isRTL ? t.flattenedResources.length - 1 - n : n], t.view.publiclyTrigger("resourceRender", r, r, e(i), e())
                    }
                }(this))
            },
            renderBgCellsHtml: function (e) {
                var t, n, i, r, a, o;
                if (this.resourceCnt) {
                    for (i = [], t = r = 0, a = this.colCnt; a > r; t = r += 1) n = this.getCellDate(e, t), o = this.getColResource(t), i.push(this.renderResourceBgCellHtml(n, o));
                    return i.join("")
                }
                return f.DayTableMixin.renderBgCellsHtml.call(this, e)
            },
            renderResourceBgCellHtml: function (e, t) {
                return this.renderBgCellHtml(e, 'data-resource-id="' + t.id + '"')
            },
            wrapTr: function (e, t) {
                return this.isRTL ? (e.reverse(), "<tr>" + e.join("") + this[t]() + "</tr>") : "<tr>" + this[t]() + e.join("") + "</tr>"
            },
            computePerResourceBusinessHourSegs: function (e) {
                var t, n, i, r, a, o, s, l, c, u, d, h, f, p, m;
                if (this.flattenedResources) {
                    for (n = !1, h = this.flattenedResources, o = 0, c = h.length; c > o; o++) p = h[o], p.businessHours && (n = !0);
                    if (n) {
                        for (t = [], f = this.flattenedResources, s = 0, u = f.length; u > s; s++) {
                            for (p = f[s], i = p.businessHours || this.view.calendar.opt("businessHours"), a = this.buildBusinessHourEvents(e, i), l = 0, d = a.length; d > l; l++) r = a[l], r.resourceId = p.id;
                            m = this.eventsToSegs(a), t.push.apply(t, m)
                        }
                        return t
                    }
                }
                return null
            }
        }, T = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.mixin(D), n.mixin(E), n.prototype.getHitSpan = function (e) {
                var t;
                return t = n.__super__.getHitSpan.apply(this, arguments), this.resourceCnt && (t.resourceId = this.getColResource(e.col).id), t
            }, n.prototype.spanToSegs = function (t) {
                var n, i, r, a, o, s, l, c, u, d, h, f, p;
                if (u = this.resourceCnt, i = this.datesAboveResources ? this.sliceRangeByDay(t) : this.sliceRangeByRow(t), u) {
                    for (f = [], a = 0, l = i.length; l > a; a++)
                        for (p = i[a], d = o = 0, c = u; c > o; d = o += 1) h = this.flattenedResources[d], t.resourceId && t.resourceId !== h.id || (n = e.extend({}, p), n.resource = h, this.isRTL ? (n.leftCol = this.indicesToCol(d, p.lastRowDayIndex), n.rightCol = this.indicesToCol(d, p.firstRowDayIndex)) : (n.leftCol = this.indicesToCol(d, p.firstRowDayIndex), n.rightCol = this.indicesToCol(d, p.lastRowDayIndex)), f.push(n));
                    return f
                }
                for (r = 0, s = i.length; s > r; r++) p = i[r], this.isRTL ? (p.leftCol = p.lastRowDayIndex, p.rightCol = p.firstRowDayIndex) : (p.leftCol = p.firstRowDayIndex, p.rightCol = p.lastRowDayIndex);
                return i
            }, n.prototype.renderBusinessHours = function () {
                var e;
                return e = this.computePerResourceBusinessHourSegs(!0), e ? this.renderFill("businessHours", e, "bgevent") : n.__super__.renderBusinessHours.apply(this, arguments)
            }, n
        }(f.DayGrid), I = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.mixin(D), n.mixin(E), n.prototype.getHitSpan = function (e) {
                var t;
                return t = n.__super__.getHitSpan.apply(this, arguments), this.resourceCnt && (t.resourceId = this.getColResource(e.col).id), t
            }, n.prototype.spanToSegs = function (t) {
                var n, i, r, a, o, s, l, c, u, d, h, f, p;
                if (u = this.resourceCnt, i = this.sliceRangeByTimes(t), u) {
                    for (f = [], a = 0, l = i.length; l > a; a++)
                        for (p = i[a], d = o = 0, c = u; c > o; d = o += 1) h = this.flattenedResources[d], t.resourceId && t.resourceId !== h.id || (n = e.extend({}, p), n.resource = h, n.col = this.indicesToCol(d, p.dayIndex), f.push(n));
                    return f
                }
                for (r = 0, s = i.length; s > r; r++) p = i[r], p.col = p.dayIndex;
                return i
            }, n.prototype.renderBusinessHours = function () {
                var e;
                return e = this.computePerResourceBusinessHourSegs(!1), e ? this.renderBusinessSegs(e) : n.__super__.renderBusinessHours.apply(this, arguments)
            }, n
        }(f.TimeGrid), Y = function (e) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, e), n.prototype.timeGrid = null, n.prototype.isScrolled = !1, n.prototype.usesMinMaxTime = !0, n.prototype.initialize = function () {
                return this.timeGrid = this.instantiateGrid()
            }, n.prototype.instantiateGrid = function () {
                return new G(this)
            }, n.prototype.setDateProfileForRendering = function (e) {
                return n.__super__.setDateProfileForRendering.apply(this, arguments), this.timeGrid.initScaleProps(), this.timeGrid.setRange(this.renderRange)
            }, n.prototype.getFallbackDuration = function () {
                return this.timeGrid.computeFallbackDuration()
            }, n.prototype.renderSkeleton = function () {
                return this.el.addClass("fc-timeline"), this.opt("eventOverlap") === !1 && this.el.addClass("fc-no-overlap"), this.el.html(this.renderSkeletonHtml()), this.renderTimeGridSkeleton()
            }, n.prototype.renderSkeletonHtml = function () {
                return '<table> <thead class="fc-head"> <tr> <td class="fc-time-area ' + this.widgetHeaderClass + '"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area ' + this.widgetContentClass + '"></td> </tr> </tbody> </table>'
            }, n.prototype.renderTimeGridSkeleton = function () {
                return this.timeGrid.setElement(this.el.find("tbody .fc-time-area")), this.timeGrid.headEl = this.el.find("thead .fc-time-area"), this.timeGrid.renderSkeleton(), this.isScrolled = !1, this.timeGrid.bodyScroller.on("scroll", Ne(this, "handleBodyScroll"))
            }, n.prototype.handleBodyScroll = function (e, t) {
                if (e) {
                    if (!this.isScrolled) return this.isScrolled = !0, this.el.addClass("fc-scrolled")
                } else if (this.isScrolled) return this.isScrolled = !1, this.el.removeClass("fc-scrolled")
            }, n.prototype.unrenderSkeleton = function () {
                return this.timeGrid.removeElement(), this.handleBodyScroll(0), n.__super__.unrenderSkeleton.apply(this, arguments)
            }, n.prototype.renderDates = function () {
                return this.timeGrid.renderDates()
            }, n.prototype.unrenderDates = function () {
                return this.timeGrid.unrenderDates()
            }, n.prototype.renderBusinessHours = function () {
                return this.timeGrid.renderBusinessHours()
            }, n.prototype.unrenderBusinessHours = function () {
                return this.timeGrid.unrenderBusinessHours()
            }, n.prototype.getNowIndicatorUnit = function () {
                return this.timeGrid.getNowIndicatorUnit()
            }, n.prototype.renderNowIndicator = function (e) {
                return this.timeGrid.renderNowIndicator(e)
            }, n.prototype.unrenderNowIndicator = function () {
                return this.timeGrid.unrenderNowIndicator()
            }, n.prototype.hitsNeeded = function () {
                return this.timeGrid.hitsNeeded()
            }, n.prototype.hitsNotNeeded = function () {
                return this.timeGrid.hitsNotNeeded()
            }, n.prototype.prepareHits = function () {
                return this.timeGrid.prepareHits()
            }, n.prototype.releaseHits = function () {
                return this.timeGrid.releaseHits()
            }, n.prototype.queryHit = function (e, t) {
                return this.timeGrid.queryHit(e, t)
            }, n.prototype.getHitSpan = function (e) {
                return this.timeGrid.getHitSpan(e)
            }, n.prototype.getHitEl = function (e) {
                return this.timeGrid.getHitEl(e)
            }, n.prototype.updateWidth = function () {
                return this.timeGrid.updateWidth()
            }, n.prototype.setHeight = function (e, t) {
                var n;
                return n = t ? "auto" : e - this.timeGrid.headHeight() - this.queryMiscHeight(), this.timeGrid.bodyScroller.setHeight(n)
            }, n.prototype.queryMiscHeight = function () {
                return this.el.outerHeight() - this.timeGrid.headScroller.el.outerHeight() - this.timeGrid.bodyScroller.el.outerHeight()
            }, n.prototype.computeInitialDateScroll = function () {
                var e, n;
                return e = 0, this.timeGrid.isTimeScale && (n = this.opt("scrollTime"), n && (n = t.duration(n), e = this.timeGrid.dateToCoord(this.activeRange.start.clone().time(n)))), {
                    left: e
                }
            }, n.prototype.queryDateScroll = function () {
                return {
                    left: this.timeGrid.bodyScroller.getScrollLeft()
                }
            }, n.prototype.applyDateScroll = function (e) {
                return null != e.left ? (this.timeGrid.headScroller.setScrollLeft(e.left), this.timeGrid.bodyScroller.setScrollLeft(e.left)) : void 0
            }, n.prototype.renderEvents = function (e) {
                return this.timeGrid.renderEvents(e), this.updateWidth()
            }, n.prototype.unrenderEvents = function () {
                return this.timeGrid.unrenderEvents(), this.updateWidth()
            }, n.prototype.renderDrag = function (e, t) {
                return this.timeGrid.renderDrag(e, t)
            }, n.prototype.unrenderDrag = function () {
                return this.timeGrid.unrenderDrag()
            }, n.prototype.getEventSegs = function () {
                return this.timeGrid.getEventSegs()
            }, n.prototype.renderSelection = function (e) {
                return this.timeGrid.renderSelection(e)
            }, n.prototype.unrenderSelection = function () {
                return this.timeGrid.unrenderSelection()
            }, n
        }(Z), se = f.cssToStr, G = function (t) {
            function n() {
                n.__super__.constructor.apply(this, arguments), this.slotWidth = this.opt("slotWidth")
            }
            return qe(n, t), n.prototype.slotDates = null, n.prototype.slotCnt = null, n.prototype.snapCnt = null, n.prototype.snapsPerSlot = null, n.prototype.snapDiffToIndex = null, n.prototype.snapIndexToDiff = null, n.prototype.headEl = null, n.prototype.slatContainerEl = null, n.prototype.slatEls = null, n.prototype.containerCoordCache = null, n.prototype.slatCoordCache = null, n.prototype.slatInnerCoordCache = null, n.prototype.headScroller = null, n.prototype.bodyScroller = null, n.prototype.joiner = null, n.prototype.follower = null, n.prototype.eventTitleFollower = null, n.prototype.timeWindowMs = null, n.prototype.slotDuration = null, n.prototype.snapDuration = null, n.prototype.duration = null, n.prototype.labelInterval = null, n.prototype.headerFormats = null, n.prototype.isTimeScale = null, n.prototype.largeUnit = null, n.prototype.emphasizeWeeks = !1, n.prototype.titleFollower = null, n.prototype.segContainerEl = null, n.prototype.segContainerHeight = null, n.prototype.bgSegContainerEl = null, n.prototype.helperEls = null, n.prototype.innerEl = null, n.prototype.opt = function (e) {
                return this.view.opt(e)
            }, n.prototype.isValidDate = function (e) {
                var t;
                return this.view.isHiddenDay(e) ? !1 : this.isTimeScale ? (t = e.time() - this.view.minTime, t = (t % 864e5 + 864e5) % 864e5, t < this.timeWindowMs) : !0
            }, n.prototype.computeDisplayEventTime = function () {
                return !this.isTimeScale
            }, n.prototype.computeDisplayEventEnd = function () {
                return !1
            }, n.prototype.computeEventTimeFormat = function () {
                return this.opt("extraSmallTimeFormat")
            }, n.prototype.normalizeGridDate = function (e) {
                var t;
                return this.isTimeScale ? (t = e.clone(), t.hasTime() || t.time(0)) : (t = e.clone().stripTime(), this.largeUnit && t.startOf(this.largeUnit)), t
            }, n.prototype.normalizeGridRange = function (e) {
                var t, n;
                return this.isTimeScale ? n = {
                    start: this.normalizeGridDate(e.start),
                    end: this.normalizeGridDate(e.end)
                } : (n = this.view.computeDayRange(e), this.largeUnit && (n.start.startOf(this.largeUnit), t = n.end.clone().startOf(this.largeUnit), t.isSame(n.end) && t.isAfter(n.start) || t.add(this.slotDuration), n.end = t)), n
            }, n.prototype.rangeUpdated = function () {
                var e, t;
                for (this.start = this.normalizeGridDate(this.start), this.end = this.normalizeGridDate(this.end), this.timeWindowMs = this.view.maxTime - this.view.minTime, this.isTimeScale && (this.start.add(this.view.minTime), this.end.subtract(1, "day").add(this.view.maxTime)), t = [], e = this.start.clone(); e < this.end;) this.isValidDate(e) && t.push(e.clone()), e.add(this.slotDuration);
                return this.slotDates = t, this.updateGridDates()
            }, n.prototype.updateGridDates = function () {
                var e, t, n, i, r;
                for (i = -1, t = 0, n = [], r = [], e = this.start.clone(); e < this.end;) this.isValidDate(e) ? (i++, n.push(i), r.push(t)) : n.push(i + .5), e.add(this.snapDuration), t++;
                return this.snapDiffToIndex = n, this.snapIndexToDiff = r, this.snapCnt = i + 1, this.slotCnt = this.snapCnt / this.snapsPerSlot
            }, n.prototype.spanToSegs = function (e) {
                var t, n;
                return t = this.normalizeGridRange(e), this.computeDateSnapCoverage(e.start) < this.computeDateSnapCoverage(e.end) && (n = xe(t, this)) ? (n.isStart && !this.isValidDate(n.start) && (n.isStart = !1), n.isEnd && n.end && !this.isValidDate(n.end.clone().subtract(1)) && (n.isEnd = !1), [n]) : []
            }, n.prototype.prepareHits = function () {
                return this.buildCoords()
            }, n.prototype.queryHit = function (e, t) {
                var n, i, r, a, o, s, l, c, u, d, h, f;
                return f = this.snapsPerSlot, a = this.slatCoordCache, n = this.containerCoordCache, n.isPointInBounds(e, t) && (o = a.getHorizontalIndex(e), null != o) ? (c = a.getWidth(o), this.isRTL ? (l = a.getRightOffset(o), r = (l - e) / c, i = Math.floor(r * f), u = o * f + i, h = l - i / f * c, d = h - (i + 1) / f * c) : (s = a.getLeftOffset(o), r = (e - s) / c, i = Math.floor(r * f), u = o * f + i, d = s + i / f * c, h = s + (i + 1) / f * c), {
                    snap: u,
                    component: this,
                    left: d,
                    right: h,
                    top: n.getTopOffset(0),
                    bottom: n.getBottomOffset(0)
                }) : void 0
            }, n.prototype.getHitSpan = function (e) {
                return this.getSnapRange(e.snap)
            }, n.prototype.getHitEl = function (e) {
                return this.getSnapEl(e.snap)
            }, n.prototype.getSnapRange = function (e) {
                var t, n;
                return n = this.start.clone(), n.add(Ee(this.snapDuration, this.snapIndexToDiff[e])), t = n.clone().add(this.snapDuration), {
                    start: n,
                    end: t
                }
            }, n.prototype.getSnapEl = function (e) {
                return this.slatEls.eq(Math.floor(e / this.snapsPerSlot))
            }, n.prototype.renderSkeleton = function () {
                return this.headScroller = new o({
                    overflowX: "clipped-scroll",
                    overflowY: "hidden"
                }), this.headScroller.canvas = new W, this.headScroller.render(), this.headEl.append(this.headScroller.el), this.bodyScroller = new o, this.bodyScroller.canvas = new W, this.bodyScroller.render(), this.el.append(this.bodyScroller.el), this.innerEl = this.bodyScroller.canvas.contentEl, this.slatContainerEl = e('<div class="fc-slats"/>').appendTo(this.bodyScroller.canvas.bgEl), this.segContainerEl = e('<div class="fc-event-container"/>').appendTo(this.bodyScroller.canvas.contentEl), this.bgSegContainerEl = this.bodyScroller.canvas.bgEl, this.containerCoordCache = new s({
                    els: this.bodyScroller.canvas.el,
                    isHorizontal: !0,
                    isVertical: !0
                }), this.joiner = new B("horizontal", [this.headScroller, this.bodyScroller]), this.follower = new L(this.headScroller, !0), this.eventTitleFollower = new L(this.bodyScroller), this.eventTitleFollower.minTravel = 50, this.isRTL ? this.eventTitleFollower.containOnNaturalRight = !0 : this.eventTitleFollower.containOnNaturalLeft = !0, n.__super__.renderSkeleton.apply(this, arguments)
            }, n.prototype.headColEls = null, n.prototype.slatColEls = null, n.prototype.renderDates = function () {
                var e, t, n, i, r;
                for (this.headScroller.canvas.contentEl.html(this.renderHeadHtml()), this.headColEls = this.headScroller.canvas.contentEl.find("col"), this.slatContainerEl.html(this.renderSlatHtml()), this.slatColEls = this.slatContainerEl.find("col"), this.slatEls = this.slatContainerEl.find("td"), this.slatCoordCache = new s({
                    els: this.slatEls,
                    isHorizontal: !0
                }), this.slatInnerCoordCache = new s({
                    els: this.slatEls.find("> div"),
                    isHorizontal: !0,
                    offsetParent: this.bodyScroller.canvas.el
                }), r = this.slotDates, t = n = 0, i = r.length; i > n; t = ++n) e = r[t], this.view.publiclyTrigger("dayRender", null, e, this.slatEls.eq(t));
                return this.follower ? this.follower.setSprites(this.headEl.find("tr:not(:last-child) .fc-cell-text")) : void 0
            }, n.prototype.unrenderDates = function () {
                return this.follower && this.follower.clearSprites(), this.headScroller.canvas.contentEl.empty(), this.slatContainerEl.empty(), this.headScroller.canvas.clearWidth(), this.bodyScroller.canvas.clearWidth()
            }, n.prototype.renderHeadHtml = function () {
                var e, t, n, i, r, a, o, s, l, c, u, d, h, p, m, g, v, y, b, w, _, x, k, C, S, A, T, E, D, $, M, R, I, P, H, O, j, N, z;
                for (v = this.labelInterval, r = this.headerFormats, t = function () {
                    var e, t, n;
                    for (n = [], e = 0, t = r.length; t > e; e++) i = r[e], n.push([]);
                    return n
                }(), y = null, $ = null, j = this.slotDates, O = [], P = function () {
                    var e, t, n;
                    for (n = [], e = 0, t = r.length; t > e; e++) i = r[e], n.push(f.queryMostGranularFormatUnit(i));
                    return n
                }(), p = 0, b = j.length; b > p; p++) {
                    for (n = j[p], z = n.week(), h = this.emphasizeWeeks && null !== $ && $ !== z, R = m = 0, w = r.length; w > m; R = ++m) i = r[R], I = t[R], y = I[I.length - 1], d = r.length > 1 && R < r.length - 1, E = null, d ? (N = n.format(i), y && y.text === N ? y.colspan += 1 : E = this.buildCellObject(n, N, P[R])) : !y || Se(de(this.start, n, v)) ? (N = n.format(i), E = this.buildCellObject(n, N, P[R])) : y.colspan += 1, E && (E.weekStart = h, I.push(E));
                    O.push({
                        weekStart: h
                    }), $ = z
                }
                for (l = v > this.slotDuration, u = 1 === this.slotDuration.as("days"), o = "<table>", o += "<colgroup>", g = 0, _ = j.length; _ > g; g++) n = j[g], o += "<col/>";
                for (o += "</colgroup>", o += "<tbody>", s = A = 0, x = t.length; x > A; s = ++A) {
                    for (I = t[s], c = s === t.length - 1, o += "<tr" + (l && c ? ' class="fc-chrono"' : "") + ">", T = 0, k = I.length; k > T; T++) e = I[T], a = [this.view.widgetHeaderClass], e.weekStart && a.push("fc-em-cell"), u && (a = a.concat(this.getDayClasses(e.date, !0))), o += this.renderDateCell(e, a);
                    o += "</tr>"
                }
                for (o += "</tbody></table>", H = "<table>", H += "<colgroup>", D = 0, C = O.length; C > D; D++) e = O[D], H += "<col/>";
                for (H += "</colgroup>", H += "<tbody><tr>", s = M = 0, S = O.length; S > M; s = ++M) e = O[s], n = j[s], H += this.slatCellHtml(n, e.weekStart);
                return H += "</tr></tbody></table>", this._slatHtml = H, o
            }, n.prototype.buildCellObject = function (e, t, n) {
                var i;
                return e = e.clone(), i = this.view.buildGotoAnchorHtml({
                    date: e,
                    type: n,
                    forceOff: !n
                }, {
                    "class": "fc-cell-text"
                }, _e(t)), {
                    text: t,
                    spanHtml: i,
                    date: e,
                    colspan: 1
                }
            }, n.prototype.renderSlatHtml = function () {
                return this._slatHtml
            }, n.prototype.slatCellHtml = function (e, t) {
                var n;
                return this.isTimeScale ? (n = [], n.push(Se(de(this.start, e, this.labelInterval)) ? "fc-major" : "fc-minor")) : (n = this.getDayClasses(e), n.push("fc-day")), n.unshift(this.view.widgetContentClass), t && n.push("fc-em-cell"), '<td class="' + n.join(" ") + '" data-date="' + e.format() + '"><div /></td>'
            }, n.prototype.businessHourSegs = null, n.prototype.renderBusinessHours = function () {
                var e;
                return this.largeUnit ? void 0 : (e = this.businessHourSegs = this.buildBusinessHourSegs(!this.isTimeScale), this.renderFill("businessHours", e, "bgevent"))
            }, n.prototype.unrenderBusinessHours = function () {
                return this.unrenderFill("businessHours")
            }, n.prototype.nowIndicatorEls = null, n.prototype.getNowIndicatorUnit = function () {
                return this.isTimeScale ? ne(this.slotDuration) : void 0
            }, n.prototype.renderNowIndicator = function (t) {
                var n, i, r;
                return r = [],
                    t = this.normalizeGridDate(t), t >= this.start && t < this.end && (n = this.dateToCoord(t), i = this.isRTL ? {
                        right: -n
                    } : {
                        left: n
                    }, r.push(e("<div class='fc-now-indicator fc-now-indicator-arrow'></div>").css(i).appendTo(this.headScroller.canvas.el)[0]), r.push(e("<div class='fc-now-indicator fc-now-indicator-line'></div>").css(i).appendTo(this.bodyScroller.canvas.el)[0])), this.nowIndicatorEls = e(r)
            }, n.prototype.unrenderNowIndicator = function () {
                return this.nowIndicatorEls ? (this.nowIndicatorEls.remove(), this.nowIndicatorEls = null) : void 0
            }, n.prototype.explicitSlotWidth = null, n.prototype.defaultSlotWidth = null, n.prototype.updateWidth = function () {
                var e, t, n, i, r, a;
                return i = this.headColEls, i ? (a = Math.round(this.slotWidth || (this.slotWidth = this.computeSlotWidth())), n = a * this.slotDates.length, t = "", r = a, e = this.bodyScroller.getClientWidth(), e > n && (t = e, n = "", r = Math.floor(e / this.slotDates.length))) : (n = "", t = ""), this.headScroller.canvas.setWidth(n), this.headScroller.canvas.setMinWidth(t), this.bodyScroller.canvas.setWidth(n), this.bodyScroller.canvas.setMinWidth(t), i && this.headColEls.slice(0, -1).add(this.slatColEls.slice(0, -1)).width(r), this.headScroller.updateSize(), this.bodyScroller.updateSize(), this.joiner.update(), i && (this.buildCoords(), this.updateSegPositions()), this.follower && this.follower.update(), this.eventTitleFollower ? this.eventTitleFollower.update() : void 0
            }, n.prototype.computeSlotWidth = function () {
                var t, n, i, r, a, o;
                return i = 0, n = this.headEl.find("tr:last-child th .fc-cell-text"), n.each(function (t, n) {
                    var r;
                    return r = e(n).outerWidth(), i = Math.max(i, r)
                }), t = i + 1, o = ue(this.labelInterval, this.slotDuration), a = Math.ceil(t / o), r = this.headColEls.eq(0).css("min-width"), r && (r = parseInt(r, 10), r && (a = Math.max(a, r))), a
            }, n.prototype.buildCoords = function () {
                return this.containerCoordCache.build(), this.slatCoordCache.build(), this.slatInnerCoordCache.build()
            }, n.prototype.computeDateSnapCoverage = function (e) {
                var t, n, i;
                return n = de(this.start, e, this.snapDuration), 0 > n ? 0 : n >= this.snapDiffToIndex.length ? this.snapCnt : (i = Math.floor(n), t = this.snapDiffToIndex[i], Se(t) ? t += n - i : t = Math.ceil(t), t)
            }, n.prototype.dateToCoord = function (e) {
                var t, n, i, r, a;
                return a = this.computeDateSnapCoverage(e), i = a / this.snapsPerSlot, r = Math.floor(i), r = Math.min(r, this.slotCnt - 1), n = i - r, t = this.slatInnerCoordCache, this.isRTL ? t.getRightPosition(r) - t.getWidth(r) * n - this.containerCoordCache.getWidth(0) : t.getLeftPosition(r) + t.getWidth(r) * n
            }, n.prototype.rangeToCoords = function (e) {
                return this.isRTL ? {
                    right: this.dateToCoord(e.start),
                    left: this.dateToCoord(e.end)
                } : {
                    left: this.dateToCoord(e.start),
                    right: this.dateToCoord(e.end)
                }
            }, n.prototype.headHeight = function () {
                var e;
                return e = this.headScroller.canvas.contentEl.find("table"), e.height.apply(e, arguments)
            }, n.prototype.updateSegPositions = function () {
                var e, t, n, i, r;
                for (r = (this.segs || []).concat(this.businessHourSegs || []), t = 0, n = r.length; n > t; t++) i = r[t], e = this.rangeToCoords(i), i.el.css({
                    left: i.left = e.left,
                    right: -(i.right = e.right)
                })
            }, n.prototype.renderFgSegs = function (e) {
                return e = this.renderFgSegEls(e), this.renderFgSegsInContainers([
                    [this, e]
                ]), this.updateSegFollowers(e), e
            }, n.prototype.unrenderFgSegs = function () {
                return this.clearSegFollowers(), this.unrenderFgContainers([this])
            }, n.prototype.renderFgSegsInContainers = function (e) {
                var t, n, i, r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b, w, _, x, k, C, S;
                for (i = 0, o = e.length; o > i; i++)
                    for (b = e[i], t = b[0], S = b[1], r = 0, s = S.length; s > r; r++) C = S[r], n = this.rangeToCoords(C), C.el.css({
                        left: C.left = n.left,
                        right: -(C.right = n.right)
                    });
                for (a = 0, l = e.length; l > a; a++)
                    for (w = e[a], t = w[0], S = w[1], p = 0, c = S.length; c > p; p++) C = S[p], C.el.appendTo(t.segContainerEl);
                for (m = 0, u = e.length; u > m; m++) {
                    for (_ = e[m], t = _[0], S = _[1], g = 0, d = S.length; d > g; g++) C = S[g], C.height = C.el.outerHeight(!0);
                    this.buildSegLevels(S), t.segContainerHeight = re(S)
                }
                for (k = [], v = 0, h = e.length; h > v; v++) {
                    for (x = e[v], t = x[0], S = x[1], y = 0, f = S.length; f > y; y++) C = S[y], C.el.css("top", C.top);
                    k.push(t.segContainerEl.height(t.segContainerHeight))
                }
                return k
            }, n.prototype.buildSegLevels = function (e) {
                var t, n, i, r, a, o, s, l, c, u, d, h, f, p;
                for (f = [], this.sortEventSegs(e), i = 0, o = e.length; o > i; i++) {
                    for (p = e[i], p.above = [], c = 0; c < f.length;) {
                        for (n = !1, d = f[c], r = 0, s = d.length; s > r; r++) u = d[r], We(p, u) && (p.above.push(u), n = !0);
                        if (!n) break;
                        c += 1
                    }
                    for ((f[c] || (f[c] = [])).push(p), c += 1; c < f.length;) {
                        for (h = f[c], a = 0, l = h.length; l > a; a++) t = h[a], We(p, t) && t.above.push(p);
                        c += 1
                    }
                }
                return f
            }, n.prototype.unrenderFgContainers = function (e) {
                var t, n, i, r;
                for (r = [], n = 0, i = e.length; i > n; n++) t = e[n], t.segContainerEl.empty(), t.segContainerEl.height(""), r.push(t.segContainerHeight = null);
                return r
            }, n.prototype.fgSegHtml = function (e, t) {
                var n, i, r, a, o, s;
                return i = e.event, r = this.view.isEventDraggable(i), o = e.isStart && this.view.isEventResizableFromStart(i), a = e.isEnd && this.view.isEventResizableFromEnd(i), n = this.getSegClasses(e, r, o || a), n.unshift("fc-timeline-event", "fc-h-event"), s = this.getEventTimeText(i), '<a class="' + n.join(" ") + '" style="' + se(this.getSegSkinCss(e)) + '"' + (i.url ? ' href="' + _e(i.url) + '"' : "") + '><div class="fc-content">' + (s ? '<span class="fc-time">' + _e(s) + "</span>" : "") + '<span class="fc-title">' + (i.title ? _e(i.title) : "&nbsp;") + '</span></div><div class="fc-bg" />' + (o ? '<div class="fc-resizer fc-start-resizer"></div>' : "") + (a ? '<div class="fc-resizer fc-end-resizer"></div>' : "") + "</a>"
            }, n.prototype.updateSegFollowers = function (e) {
                var t, n, i, r, a;
                if (this.eventTitleFollower) {
                    for (r = [], t = 0, n = e.length; n > t; t++) i = e[t], a = i.el.find(".fc-title"), a.length && r.push(new F(a));
                    return this.eventTitleFollower.setSprites(r)
                }
            }, n.prototype.clearSegFollowers = function () {
                return this.eventTitleFollower ? this.eventTitleFollower.clearSprites() : void 0
            }, n.prototype.segDragStart = function () {
                return n.__super__.segDragStart.apply(this, arguments), this.eventTitleFollower ? this.eventTitleFollower.forceRelative() : void 0
            }, n.prototype.segDragEnd = function () {
                return n.__super__.segDragEnd.apply(this, arguments), this.eventTitleFollower ? this.eventTitleFollower.clearForce() : void 0
            }, n.prototype.segResizeStart = function () {
                return n.__super__.segResizeStart.apply(this, arguments), this.eventTitleFollower ? this.eventTitleFollower.forceRelative() : void 0
            }, n.prototype.segResizeEnd = function () {
                return n.__super__.segResizeEnd.apply(this, arguments), this.eventTitleFollower ? this.eventTitleFollower.clearForce() : void 0
            }, n.prototype.renderHelper = function (e, t) {
                var n;
                return n = this.eventToSegs(e), n = this.renderFgSegEls(n), this.renderHelperSegsInContainers([
                    [this, n]
                ], t)
            }, n.prototype.renderHelperSegsInContainers = function (t, n) {
                var i, r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b, w;
                for (o = [], b = [], s = 0, u = t.length; u > s; s++)
                    for (m = t[s], i = m[0], w = m[1], l = 0, d = w.length; d > l; l++) y = w[l], r = this.rangeToCoords(y), y.el.css({
                        left: y.left = r.left,
                        right: -(y.right = r.right)
                    }), n && n.resourceId === (null != (g = i.resource) ? g.id : void 0) ? y.el.css("top", n.el.css("top")) : y.el.css("top", 0);
                for (c = 0, h = t.length; h > c; c++)
                    for (v = t[c], i = v[0], w = v[1], a = e('<div class="fc-event-container fc-helper-container"/>').appendTo(i.innerEl), o.push(a[0]), p = 0, f = w.length; f > p; p++) y = w[p], a.append(y.el), b.push(y.el[0]);
                return this.helperEls ? this.helperEls = this.helperEls.add(e(o)) : this.helperEls = e(o), e(b)
            }, n.prototype.unrenderHelper = function () {
                return this.helperEls ? (this.helperEls.remove(), this.helperEls = null) : void 0
            }, n.prototype.renderEventResize = function (e, t) {
                var n, i, r, a;
                for (i = this.eventToSpans(e), r = 0, a = i.length; a > r; r++) n = i[r], this.renderHighlight(n);
                return this.renderEventLocationHelper(e, t)
            }, n.prototype.unrenderEventResize = function () {
                return this.unrenderHighlight(), this.unrenderHelper()
            }, n.prototype.renderFill = function (e, t, n) {
                return t = this.renderFillSegEls(e, t), this.renderFillInContainers(e, [
                    [this, t]
                ], n), t
            }, n.prototype.renderFillInContainers = function (e, t, n) {
                var i, r, a, o, s, l;
                for (s = [], r = 0, a = t.length; a > r; r++) o = t[r], i = o[0], l = o[1], s.push(this.renderFillInContainer(e, i, l, n));
                return s
            }, n.prototype.renderFillInContainer = function (t, n, i, r) {
                var a, o, s, l, c;
                if (i.length) {
                    for (r || (r = t.toLowerCase()), a = e('<div class="fc-' + r + '-container" />').appendTo(n.bgSegContainerEl), s = 0, l = i.length; l > s; s++) c = i[s], o = this.rangeToCoords(c), c.el.css({
                        left: c.left = o.left,
                        right: -(c.right = o.right)
                    }), c.el.appendTo(a);
                    return this.elsByFill[t] ? this.elsByFill[t] = this.elsByFill[t].add(a) : this.elsByFill[t] = a
                }
            }, n.prototype.renderDrag = function (e, t) {
                var n, i, r, a;
                if (t) return this.renderEventLocationHelper(e, t);
                for (i = this.eventToSpans(e), r = 0, a = i.length; a > r; r++) n = i[r], this.renderHighlight(n);
                return null
            }, n.prototype.unrenderDrag = function () {
                return this.unrenderHelper(), this.unrenderHighlight()
            }, n
        }(p), re = function (e) {
            var t, n, i, r;
            for (i = 0, t = 0, n = e.length; n > t; t++) r = e[t], i = Math.max(i, ie(r));
            return i
        }, ie = function (e) {
            return null == e.top && (e.top = re(e.above)), e.top + e.height
        }, We = function (e, t) {
            return e.left < t.right && e.right > t.left
        }, _ = 18, b = 6, y = 200, w = 1e3, l = {
            months: 1
        }, z = [{
            years: 1
        }, {
            months: 1
        }, {
            days: 1
        }, {
            hours: 1
        }, {
            minutes: 30
        }, {
            minutes: 15
        }, {
            minutes: 10
        }, {
            minutes: 5
        }, {
            minutes: 1
        }, {
            seconds: 30
        }, {
            seconds: 15
        }, {
            seconds: 10
        }, {
            seconds: 5
        }, {
            seconds: 1
        }, {
            milliseconds: 500
        }, {
            milliseconds: 100
        }, {
            milliseconds: 10
        }, {
            milliseconds: 1
        }], G.prototype.initScaleProps = function () {
            var n, i, r;
            return this.labelInterval = this.queryDurationOption("slotLabelInterval"), this.slotDuration = this.queryDurationOption("slotDuration"), this.validateLabelAndSlot(), this.ensureLabelInterval(), this.ensureSlotDuration(), n = this.opt("slotLabelFormat"), r = e.type(n), this.headerFormats = "array" === r ? n : "string" === r ? [n] : this.computeHeaderFormats(), this.isTimeScale = he(this.slotDuration), this.largeUnit = this.isTimeScale ? void 0 : (i = ne(this.slotDuration), /year|month|week/.test(i) ? i : void 0), this.emphasizeWeeks = 1 === this.slotDuration.as("days") && this.view.currentRangeAs("weeks") >= 2 && !this.opt("businessHours"), this.snapDuration = (n = this.opt("snapDuration")) ? t.duration(n) : this.slotDuration, this.minResizeDuration = this.snapDuration, this.snapsPerSlot = ue(this.slotDuration, this.snapDuration)
        }, G.prototype.queryDurationOption = function (e) {
            var n, i;
            return i = this.opt(e), null != i && (n = t.duration(i), +n) ? n : void 0
        }, G.prototype.validateLabelAndSlot = function () {
            var e, t, n, i;
            return e = this.view.currentRange, this.labelInterval && (t = de(e.start, e.end, this.labelInterval), t > w && (f.warn("slotLabelInterval results in too many cells"), this.labelInterval = null)), this.slotDuration && (n = de(e.start, e.end, this.slotDuration), n > w && (f.warn("slotDuration results in too many cells"), this.slotDuration = null)), this.labelInterval && this.slotDuration && (i = ue(this.labelInterval, this.slotDuration), !Se(i) || 1 > i) ? (f.warn("slotLabelInterval must be a multiple of slotDuration"), this.slotDuration = null) : void 0
        }, G.prototype.computeFallbackDuration = function () {
            var e, n, i, r, a;
            if (e = null, this.labelInterval || this.slotDuration)
                for (a = this.ensureLabelInterval(), i = z.length - 1; i >= 0 && (n = z[i], e = t.duration(n), r = ue(e, a), !(r >= _)); i += -1);
            else e = t.duration(l);
            return e
        }, G.prototype.ensureLabelInterval = function () {
            var e, n, i, r, a, o, s, l, c, u;
            if (e = this.view.currentRange, o = this.labelInterval, !o) {
                if (this.slotDuration) {
                    for (i = 0, s = z.length; s > i; i++)
                        if (n = z[i], u = t.duration(n), c = ue(u, this.slotDuration), Se(c) && b >= c) {
                            o = u;
                            break
                        } o || (o = this.slotDuration)
                } else
                    for (r = 0, l = z.length; l > r && (n = z[r], o = t.duration(n), a = de(e.start, e.end, o), !(a >= _)); r++);
                this.labelInterval = o
            }
            return o
        }, G.prototype.ensureSlotDuration = function () {
            var e, n, i, r, a, o, s, l, c;
            if (e = this.view.currentRange, s = this.slotDuration, !s) {
                for (r = this.ensureLabelInterval(), i = 0, a = z.length; a > i; i++)
                    if (n = z[i], c = t.duration(n), l = ue(r, c), Se(l) && l > 1 && b >= l) {
                        s = c;
                        break
                    } s && (o = de(e.start, e.end, s), o > y && (s = null)), s || (s = r), this.slotDuration = s
            }
            return s
        }, G.prototype.computeHeaderFormats = function () {
            var e, t, n, i, r, a, o;
            switch (a = this.view, i = this.labelInterval, r = ne(i), o = this.opt("weekNumbers"), e = t = n = null, "week" !== r || o || (r = "day"), r) {
                case "year":
                    e = "YYYY";
                    break;
                case "month":
                    a.currentRangeAs("years") > 1 && (e = "YYYY"), t = "MMM";
                    break;
                case "week":
                    a.currentRangeAs("years") > 1 && (e = "YYYY"), t = this.opt("shortWeekFormat");
                    break;
                case "day":
                    a.currentRangeAs("years") > 1 ? e = this.opt("monthYearFormat") : a.currentRangeAs("months") > 1 && (e = "MMMM"), o && (t = this.opt("weekFormat")), n = "dd D";
                    break;
                case "hour":
                    o && (e = this.opt("weekFormat")), a.currentRangeAs("days") > 1 && (t = this.opt("dayOfMonthFormat")), n = this.opt("smallTimeFormat");
                    break;
                case "minute":
                    i.asMinutes() / 60 >= b ? (e = this.opt("hourFormat"), t = "[:]mm") : e = this.opt("mediumTimeFormat");
                    break;
                case "second":
                    i.asSeconds() / 60 >= b ? (e = "LT", t = "[:]ss") : e = "LTS";
                    break;
                case "millisecond":
                    e = "LTS", t = "[.]SSS"
            }
            return [].concat(e || [], t || [], n || [])
        }, f.views.timeline = {
            "class": Y,
            defaults: {
                eventResizableFromStart: !0
            }
        }, f.views.timelineDay = {
            type: "timeline",
            duration: {
                days: 1
            }
        }, f.views.timelineWeek = {
            type: "timeline",
            duration: {
                weeks: 1
            }
        }, f.views.timelineMonth = {
            type: "timeline",
            duration: {
                months: 1
            }
        }, f.views.timelineYear = {
            type: "timeline",
            duration: {
                years: 1
            }
        }, H = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.mixin(O), n.prototype.canHandleSpecificResources = !0, n.prototype.resourceGrid = null, n.prototype.tbodyHash = null, n.prototype.joiner = null, n.prototype.dividerEls = null, n.prototype.superHeaderText = null, n.prototype.isVGrouping = null, n.prototype.isHGrouping = null, n.prototype.groupSpecs = null, n.prototype.colSpecs = null, n.prototype.orderSpecs = null, n.prototype.rowHierarchy = null, n.prototype.resourceRowHash = null, n.prototype.nestingCnt = 0, n.prototype.isNesting = null, n.prototype.dividerWidth = null, n.prototype.initialize = function () {
                return n.__super__.initialize.apply(this, arguments), this.processResourceOptions(), this.resourceGrid = new U(this), this.rowHierarchy = new N(this), this.resourceRowHash = {}
            }, n.prototype.instantiateGrid = function () {
                return new P(this)
            }, n.prototype.processResourceOptions = function () {
                var e, t, n, i, r, a, o, s, l, c, u, d, h, f, p, m, g, v, y, b, w, _;
                for (e = this.opt("resourceColumns") || [], p = this.opt("resourceLabelText"), i = "Resources", _ = null, e.length ? _ = p : e.push({
                    labelText: p || i,
                    text: this.getResourceTextFunc()
                }), b = [], r = [], o = [], u = !1, c = !1, d = 0, m = e.length; m > d; d++) n = e[d], n.group ? r.push(n) : b.push(n);
                for (b[0].isMain = !0, r.length ? (o = r, u = !0) : (s = this.opt("resourceGroupField"), s && (c = !0, o.push({
                    field: s,
                    text: this.opt("resourceGroupText"),
                    render: this.opt("resourceGroupRender")
                }))), t = Oe(this.opt("resourceOrder")), w = [], h = 0, g = t.length; g > h; h++) {
                    for (y = t[h], l = !1, f = 0, v = o.length; v > f; f++)
                        if (a = o[f], a.field === y.field) {
                            a.order = y.order, l = !0;
                            break
                        } l || w.push(y)
                }
                return this.superHeaderText = _, this.isVGrouping = u, this.isHGrouping = c, this.groupSpecs = o, this.colSpecs = r.concat(b), this.orderSpecs = w
            }, n.prototype.renderSkeleton = function () {
                return n.__super__.renderSkeleton.apply(this, arguments), this.renderResourceGridSkeleton(), this.tbodyHash = {
                    spreadsheet: this.resourceGrid.tbodyEl,
                    event: this.timeGrid.tbodyEl
                }, this.joiner = new B("vertical", [this.resourceGrid.bodyScroller, this.timeGrid.bodyScroller]), this.initDividerMoving()
            }, n.prototype.renderSkeletonHtml = function () {
                return '<table> <thead class="fc-head"> <tr> <td class="fc-resource-area ' + this.widgetHeaderClass + '"></td> <td class="fc-divider fc-col-resizer ' + this.widgetHeaderClass + '"></td> <td class="fc-time-area ' + this.widgetHeaderClass + '"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area ' + this.widgetContentClass + '"></td> <td class="fc-divider fc-col-resizer ' + this.widgetHeaderClass + '"></td> <td class="fc-time-area ' + this.widgetContentClass + '"></td> </tr> </tbody> </table>'
            }, n.prototype.renderResourceGridSkeleton = function () {
                return this.resourceGrid.el = this.el.find("tbody .fc-resource-area"), this.resourceGrid.headEl = this.el.find("thead .fc-resource-area"), this.resourceGrid.renderSkeleton()
            }, n.prototype.initDividerMoving = function () {
                var e;
                return this.dividerEls = this.el.find(".fc-divider"), this.dividerWidth = null != (e = this.opt("resourceAreaWidth")) ? e : this.resourceGrid.tableWidth, null != this.dividerWidth && this.positionDivider(this.dividerWidth), this.dividerEls.on("mousedown", function (e) {
                    return function (t) {
                        return e.dividerMousedown(t)
                    }
                }(this))
            }, n.prototype.dividerMousedown = function (e) {
                var t, n, i, r, a;
                return n = this.opt("isRTL"), r = 30, i = this.el.width() - 30, a = this.getNaturalDividerWidth(), t = new c({
                    dragStart: function (e) {
                        return function () {
                            return e.dividerEls.addClass("fc-active")
                        }
                    }(this),
                    drag: function (e) {
                        return function (t, o) {
                            var s;
                            return s = n ? a - t : a + t, s = Math.max(s, r), s = Math.min(s, i), e.dividerWidth = s, e.positionDivider(s), e.updateWidth()
                        }
                    }(this),
                    dragEnd: function (e) {
                        return function () {
                            return e.dividerEls.removeClass("fc-active")
                        }
                    }(this)
                }), t.startInteraction(e)
            }, n.prototype.getNaturalDividerWidth = function () {
                return this.el.find(".fc-resource-area").width()
            }, n.prototype.positionDivider = function (e) {
                return this.el.find(".fc-resource-area").width(e)
            }, n.prototype.renderEvents = function (e) {
                return this.timeGrid.renderEvents(e), this.syncRowHeights(), this.updateWidth()
            }, n.prototype.unrenderEvents = function () {
                return this.timeGrid.unrenderEvents(), this.syncRowHeights(), this.updateWidth()
            }, n.prototype.updateWidth = function () {
                return n.__super__.updateWidth.apply(this, arguments), this.resourceGrid.updateWidth(), this.joiner.update(), this.cellFollower ? this.cellFollower.update() : void 0
            }, n.prototype.updateHeight = function (e) {
                return n.__super__.updateHeight.apply(this, arguments), e ? this.syncRowHeights() : void 0
            }, n.prototype.setHeight = function (e, t) {
                var n, i;
                return i = this.syncHeadHeights(), n = t ? "auto" : e - i - this.queryMiscHeight(), this.timeGrid.bodyScroller.setHeight(n), this.resourceGrid.bodyScroller.setHeight(n)
            }, n.prototype.queryMiscHeight = function () {
                return this.el.outerHeight() - Math.max(this.resourceGrid.headScroller.el.outerHeight(), this.timeGrid.headScroller.el.outerHeight()) - Math.max(this.resourceGrid.bodyScroller.el.outerHeight(), this.timeGrid.bodyScroller.el.outerHeight())
            }, n.prototype.syncHeadHeights = function () {
                var e;
                return this.resourceGrid.headHeight("auto"), this.timeGrid.headHeight("auto"), e = Math.max(this.resourceGrid.headHeight(), this.timeGrid.headHeight()), this.resourceGrid.headHeight(e), this.timeGrid.headHeight(e), e
            }, n.prototype.renderResources = function (e) {
                var t, n, i;
                for (this.batchRows(), t = 0, n = e.length; n > t; t++) i = e[t], this.insertResource(i);
                return this.rowHierarchy.show(), this.unbatchRows(), this.reinitializeCellFollowers()
            }, n.prototype.unrenderResources = function () {
                return this.batchRows(), this.rowHierarchy.removeChildren(), this.unbatchRows(), this.reinitializeCellFollowers()
            }, n.prototype.renderResource = function (e) {
                return this.insertResource(e), this.reinitializeCellFollowers()
            }, n.prototype.unrenderResource = function (e) {
                var t;
                return t = this.getResourceRow(e.id), t ? (this.batchRows(), t.remove(), this.unbatchRows(), this.reinitializeCellFollowers()) : void 0
            }, n.prototype.cellFollower = null, n.prototype.reinitializeCellFollowers = function () {
                var t, n, i, r, a, o;
                for (this.cellFollower && this.cellFollower.clearSprites(), this.cellFollower = new L(this.resourceGrid.bodyScroller, !0), this.cellFollower.isHFollowing = !1, this.cellFollower.isVFollowing = !0, r = [], a = this.rowHierarchy.getNodes(), n = 0, i = a.length; i > n; n++) o = a[n], o instanceof X && o.groupTd && (t = o.groupTd.find(".fc-cell-content"), t.length && r.push(t[0]));
                return this.cellFollower.setSprites(e(r))
            }, n.prototype.insertResource = function (e, t) {
                var n, i, r, a, o, s, l;
                for (l = new R(this, e), null == t && (a = e.parentId, a && (t = this.getResourceRow(a))), t ? this.insertRowAsChild(l, t) : this.insertRow(l), o = e.children, s = [], i = 0, r = o.length; r > i; i++) n = o[i], s.push(this.insertResource(n, l));
                return s
            }, n.prototype.insertRow = function (e, t, n) {
                var i;
                return null == t && (t = this.rowHierarchy), null == n && (n = this.groupSpecs), n.length ? (i = this.ensureResourceGroup(e, t, n[0]), i instanceof m ? this.insertRowAsChild(e, i) : this.insertRow(e, i, n.slice(1))) : this.insertRowAsChild(e, t)
            }, n.prototype.insertRowAsChild = function (e, t) {
                return t.addChild(e, this.computeChildRowPosition(e, t))
            }, n.prototype.computeChildRowPosition = function (e, t) {
                var n, i, r, a, o, s;
                if (this.orderSpecs.length)
                    for (o = t.children, i = r = 0, a = o.length; a > r; i = ++r)
                        if (s = o[i], n = this.compareResources(s.resource || {}, e.resource || {}), n > 0) return i;
                return null
            }, n.prototype.compareResources = function (e, t) {
                return te(e, t, this.orderSpecs)
            }, n.prototype.ensureResourceGroup = function (e, t, n) {
                var i, r, a, o, s, l, c, u, d, h, f;
                if (a = (e.resource || {})[n.field], r = null, n.order)
                    for (d = t.children, o = s = 0, c = d.length; c > s; o = ++s) {
                        if (f = d[o], i = fe(f.groupValue, a) * n.order, 0 === i) {
                            r = f;
                            break
                        }
                        if (i > 0) break
                    } else
                    for (h = t.children, o = l = 0, u = h.length; u > l; o = ++l)
                        if (f = h[o], f.groupValue === a) {
                            r = f;
                            break
                        } return r || (r = this.isVGrouping ? new X(this, n, a) : new m(this, n, a), t.addChild(r, o)), r
            }, n.prototype.pairSegsWithRows = function (e) {
                var t, n, i, r, a, o, s, l;
                for (r = [], a = {}, t = 0, n = e.length; n > t; t++) l = e[t], o = l.resourceId, o && (s = this.getResourceRow(o), s && (i = a[o], i || (i = [s, []], r.push(i), a[o] = i), i[1].push(l)));
                return r
            }, n.prototype.rowAdded = function (e) {
                var t, n;
                return e instanceof R && (this.resourceRowHash[e.resource.id] = e, this.timeGrid.assignRowBusinessHourSegs(e)), n = this.isNesting, t = Boolean(this.nestingCnt += e.depth ? 1 : 0), n !== t && (this.el.toggleClass("fc-nested", t), this.el.toggleClass("fc-flat", !t)), this.isNesting = t
            }, n.prototype.rowRemoved = function (e) {
                var t, n;
                return e instanceof R && (delete this.resourceRowHash[e.resource.id], this.timeGrid.destroyRowBusinessHourSegs(e)), n = this.isNesting, t = Boolean(this.nestingCnt -= e.depth ? 1 : 0), n !== t && (this.el.toggleClass("fc-nested", t), this.el.toggleClass("fc-flat", !t)), this.isNesting = t
            }, n.prototype.batchRowDepth = 0, n.prototype.shownRowBatch = null, n.prototype.hiddenRowBatch = null, n.prototype.batchRows = function () {
                return this.batchRowDepth++ ? void 0 : (this.shownRowBatch = [], this.hiddenRowBatch = [])
            }, n.prototype.unbatchRows = function () {
                return --this.batchRowDepth ? void 0 : (this.hiddenRowBatch.length && this.rowsHidden(this.hiddenRowBatch), this.shownRowBatch.length && this.rowsShown(this.shownRowBatch), this.hiddenRowBatch = null, this.shownRowBatch = null)
            }, n.prototype.rowShown = function (e) {
                return this.shownRowBatch ? this.shownRowBatch.push(e) : this.rowsShown([e])
            }, n.prototype.rowHidden = function (e) {
                return this.hiddenRowBatch ? this.hiddenRowBatch.push(e) : this.rowsHidden([e])
            }, n.prototype.rowsShown = function (e) {
                return this.syncRowHeights(e), this.updateWidth()
            }, n.prototype.rowsHidden = function (e) {
                return this.updateWidth()
            }, n.prototype.syncRowHeights = function (e, t) {
                var n, i, r, a, o, s, l, c, u, d;
                for (null == t && (t = !1), null == e && (e = this.getVisibleRows()), s = 0, c = e.length; c > s; s++) d = e[s], d.setTrInnerHeight("");
                for (o = function () {
                    var i, r, a;
                    for (a = [], i = 0, r = e.length; r > i; i++) d = e[i], n = d.getMaxTrInnerHeight(), t && (n += n % 2), a.push(n);
                    return a
                }(), a = l = 0, u = e.length; u > l; a = ++l) d = e[a], d.setTrInnerHeight(o[a]);
                return !t && (i = this.resourceGrid.tbodyEl.height(), r = this.timeGrid.tbodyEl.height(), Math.abs(i - r) > 1) ? this.syncRowHeights(e, !0) : void 0
            }, n.prototype.getVisibleRows = function () {
                var e, t, n, i, r;
                for (n = this.rowHierarchy.getRows(), i = [], e = 0, t = n.length; t > e; e++) r = n[e], r.isShown && i.push(r);
                return i
            }, n.prototype.getEventRows = function () {
                var e, t, n, i, r;
                for (n = this.rowHierarchy.getRows(), i = [], e = 0, t = n.length; t > e; e++) r = n[e], r instanceof h && i.push(r);
                return i
            }, n.prototype.getResourceRow = function (e) {
                return this.resourceRowHash[e]
            }, n.prototype.queryResourceScroll = function () {
                var e, t, n, i, r, a, o, s;
                for (o = {}, s = this.timeGrid.bodyScroller.scrollEl.offset().top, r = this.getVisibleRows(), n = 0, i = r.length; i > n; n++)
                    if (a = r[n], a.resource && (e = a.getTr("event"), t = e.offset().top + e.outerHeight(), t > s)) {
                        o.resourceId = a.resource.id, o.bottom = t - s;
                        break
                    } return o
            }, n.prototype.applyResourceScroll = function (e) {
                var t, n, i, r, a;
                return e.resourceId && (r = this.getResourceRow(e.resourceId), r && (t = r.getTr("event"))) ? (i = this.timeGrid.bodyScroller.canvas.el.offset().top, n = t.offset().top + t.outerHeight(), a = n - e.bottom - i, this.timeGrid.bodyScroller.setScrollTop(a), this.resourceGrid.bodyScroller.setScrollTop(a)) : void 0
            }, n.prototype.scrollToResource = function (e) {
                var t, n, i, r;
                return i = this.getResourceRow(e.id), i && (t = i.getTr("event")) ? (n = this.timeGrid.bodyScroller.canvas.el.offset().top, r = t.offset().top - n, this.timeGrid.bodyScroller.setScrollTop(r), this.resourceGrid.bodyScroller.setScrollTop(r)) : void 0
            }, n
        }(Y), P = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.mixin(D), n.prototype.eventRows = null, n.prototype.shownEventRows = null, n.prototype.tbodyEl = null, n.prototype.rowCoordCache = null, n.prototype.spanToSegs = function (e) {
                var t, i, r, a, o, s;
                if (s = n.__super__.spanToSegs.apply(this, arguments), t = this.view.calendar, a = e.resourceId)
                    for (i = 0, r = s.length; r > i; i++) o = s[i], o.resource = t.getResourceById(a), o.resourceId = a;
                return s
            }, n.prototype.prepareHits = function () {
                var e, t;
                return n.__super__.prepareHits.apply(this, arguments), this.eventRows = this.view.getEventRows(), this.shownEventRows = function () {
                    var t, n, i, r;
                    for (i = this.eventRows, r = [], t = 0, n = i.length; n > t; t++) e = i[t], e.isShown && r.push(e);
                    return r
                }.call(this), t = function () {
                    var t, n, i, r;
                    for (i = this.shownEventRows, r = [], t = 0, n = i.length; n > t; t++) e = i[t], r.push(e.getTr("event")[0]);
                    return r
                }.call(this), this.rowCoordCache = new s({
                    els: t,
                    isVertical: !0
                }), this.rowCoordCache.build()
            }, n.prototype.releaseHits = function () {
                return n.__super__.releaseHits.apply(this, arguments), this.eventRows = null, this.shownEventRows = null, this.rowCoordCache.clear()
            }, n.prototype.queryHit = function (e, t) {
                var i, r;
                return r = n.__super__.queryHit.apply(this, arguments), r && (i = this.rowCoordCache.getVerticalIndex(t), null != i) ? {
                    resourceId: this.shownEventRows[i].resource.id,
                    snap: r.snap,
                    component: this,
                    left: r.left,
                    right: r.right,
                    top: this.rowCoordCache.getTopOffset(i),
                    bottom: this.rowCoordCache.getBottomOffset(i)
                } : void 0
            }, n.prototype.getHitSpan = function (e) {
                var t;
                return t = this.getSnapRange(e.snap), t.resourceId = e.resourceId, t
            }, n.prototype.getHitEl = function (e) {
                return this.getSnapEl(e.snap)
            }, n.prototype.renderSkeleton = function () {
                var t;
                return n.__super__.renderSkeleton.apply(this, arguments), this.segContainerEl.remove(), this.segContainerEl = null, t = e('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.canvas.contentEl), this.tbodyEl = t.find("tbody")
            }, n.prototype.renderFgSegs = function (e) {
                var t, n, i, r, a, o, s;
                for (e = this.renderFgSegEls(e), o = this.view.pairSegsWithRows(e), s = [], i = 0, r = o.length; r > i; i++) a = o[i], t = a[0], n = a[1], t.fgSegs = n, t.isShown && (t.isSegsRendered = !0, s.push(a));
                return this.renderFgSegsInContainers(s), this.updateSegFollowers(e), e
            }, n.prototype.unrenderFgSegs = function () {
                var e, t, n, i;
                for (this.clearSegFollowers(), t = this.view.getEventRows(), n = 0, i = t.length; i > n; n++) e = t[n], e.fgSegs = null, e.isSegsRendered = !1;
                return this.unrenderFgContainers(t)
            }, n.prototype.unrenderBgSegs = function () {
                var e, t, i, r, a;
                for (n.__super__.unrenderBgSegs.apply(this, arguments), t = this.view.getEventRows(), a = [], i = 0, r = t.length; r > i; i++) e = t[i], a.push(e.bgSegs = null);
                return a
            }, n.prototype.rowCntWithCustomBusinessHours = 0, n.prototype.renderBusinessHours = function () {
                return this.rowCntWithCustomBusinessHours ? this.ensureIndividualBusinessHours() : n.__super__.renderBusinessHours.apply(this, arguments)
            }, n.prototype.unrenderBusinessHours = function () {
                return this.rowCntWithCustomBusinessHours ? this.clearIndividualBusinessHours() : n.__super__.unrenderBusinessHours.apply(this, arguments)
            }, n.prototype.ensureIndividualBusinessHours = function () {
                var e, t, n, i, r;
                for (n = this.view.getEventRows(), i = [], e = 0, t = n.length; t > e; e++) r = n[e], this.view.has("dateProfile") && !r.businessHourSegs && this.populateRowBusinessHoursSegs(r), r.isShown ? i.push(r.ensureBusinessHourSegsRendered()) : i.push(void 0);
                return i
            }, n.prototype.clearIndividualBusinessHours = function () {
                var e, t, n, i, r;
                for (n = this.view.getEventRows(), i = [], e = 0, t = n.length; t > e; e++) r = n[e], i.push(r.clearBusinessHourSegs());
                return i
            }, n.prototype.assignRowBusinessHourSegs = function (e) {
                return e.resource.businessHours && (this.rowCntWithCustomBusinessHours || (G.prototype.unrenderBusinessHours.call(this), this.ensureIndividualBusinessHours()), this.rowCntWithCustomBusinessHours += 1), this.view.has("dateProfile") && this.rowCntWithCustomBusinessHours ? this.populateRowBusinessHoursSegs(e) : void 0
            }, n.prototype.destroyRowBusinessHourSegs = function (e) {
                return e.clearBusinessHourSegs(), e.resource.businessHours && (this.rowCntWithCustomBusinessHours -= 1, !this.rowCntWithCustomBusinessHours) ? (this.clearIndividualBusinessHours(), G.prototype.renderBusinessHours.call(this)) : void 0
            }, n.prototype.populateRowBusinessHoursSegs = function (e) {
                var t, n, i;
                n = e.resource.businessHours || this.view.opt("businessHours"), i = this.view.calendar.computeBusinessHourEvents(!this.isTimeScale, n), t = this.eventsToSegs(i), t = this.renderFillSegEls("businessHours", t), e.businessHourSegs = t
            }, n.prototype.renderFill = function (e, t, n) {
                var i, r, a, o, s, l, c, u, d, h, f, p;
                for (t = this.renderFillSegEls(e, t), u = [], s = [], i = 0, a = t.length; a > i; i++) f = t[i], f.resourceId ? u.push(f) : s.push(f);
                for (c = this.view.pairSegsWithRows(u), p = [], r = 0, o = c.length; o > r; r++) l = c[r], d = l[0], h = l[1], "bgEvent" === e && (d.bgSegs = h), d.isShown && p.push(l);
                return s.length && p.unshift([this, s]), this.renderFillInContainers(e, p, n), t
            }, n.prototype.renderHelper = function (e, t) {
                var n, i;
                return i = this.eventToSegs(e), i = this.renderFgSegEls(i), n = this.view.pairSegsWithRows(i), this.renderHelperSegsInContainers(n, t)
            }, n
        }(G), n = 30, U = function () {
            function t(e) {
                var t;
                this.view = e, this.isRTL = this.view.opt("isRTL"), this.givenColWidths = this.colWidths = function () {
                    var e, n, i, r;
                    for (i = this.view.colSpecs, r = [], e = 0, n = i.length; n > e; e++) t = i[e], r.push(t.width);
                    return r
                }.call(this)
            }
            return t.prototype.view = null, t.prototype.headEl = null, t.prototype.el = null, t.prototype.tbodyEl = null, t.prototype.headScroller = null, t.prototype.bodyScroller = null, t.prototype.joiner = null, t.prototype.colGroupHtml = "", t.prototype.headTable = null, t.prototype.headColEls = null, t.prototype.headCellEls = null, t.prototype.bodyColEls = null, t.prototype.bodyTable = null, t.prototype.renderSkeleton = function () {
                return this.headScroller = new o({
                    overflowX: "clipped-scroll",
                    overflowY: "hidden"
                }), this.headScroller.canvas = new W, this.headScroller.render(), this.headScroller.canvas.contentEl.html(this.renderHeadHtml()), this.headEl.append(this.headScroller.el), this.bodyScroller = new o({
                    overflowY: "clipped-scroll"
                }), this.bodyScroller.canvas = new W, this.bodyScroller.render(), this.bodyScroller.canvas.contentEl.html('<div class="fc-rows"><table>' + this.colGroupHtml + "<tbody/></table></div>"), this.tbodyEl = this.bodyScroller.canvas.contentEl.find("tbody"), this.el.append(this.bodyScroller.el), this.joiner = new B("horizontal", [this.headScroller, this.bodyScroller]), this.headTable = this.headEl.find("table"), this.headColEls = this.headEl.find("col"), this.headCellEls = this.headScroller.canvas.contentEl.find("tr:last-child th"), this.bodyColEls = this.el.find("col"), this.bodyTable = this.el.find("table"), this.colMinWidths = this.computeColMinWidths(), this.applyColWidths(), this.initColResizing()
            }, t.prototype.renderHeadHtml = function () {
                var e, t, n, i, r, a, o, s, l, c, u;
                for (t = this.view.colSpecs, n = "<table>", e = "<colgroup>", o = 0, l = t.length; l > o; o++) u = t[o], e += u.isMain ? '<col class="fc-main-col"/>' : "<col/>";
                for (e += "</colgroup>", this.colGroupHtml = e, n += e, n += "<tbody>", this.view.superHeaderText && (n += '<tr class="fc-super"><th class="' + this.view.widgetHeaderClass + '" colspan="' + t.length + '"><div class="fc-cell-content"><span class="fc-cell-text">' + _e(this.view.superHeaderText) + "</span></div></th></tr>"), n += "<tr>", a = !0, i = s = 0, c = t.length; c > s; i = ++s) u = t[i], r = i === t.length - 1, n += '<th class="' + this.view.widgetHeaderClass + '"><div><div class="fc-cell-content">' + (u.isMain ? '<span class="fc-expander-space"><span class="fc-icon"></span></span>' : "") + '<span class="fc-cell-text">' + _e(u.labelText || "") + "</span></div>" + (r ? "" : '<div class="fc-col-resizer"></div>') + "</div></th>";
                return n += "</tr>", n += "</tbody></table>"
            }, t.prototype.givenColWidths = null, t.prototype.colWidths = null, t.prototype.colMinWidths = null, t.prototype.tableWidth = null, t.prototype.tableMinWidth = null, t.prototype.initColResizing = function () {
                return this.headEl.find("th .fc-col-resizer").each(function (t) {
                    return function (n, i) {
                        return i = e(i), i.on("mousedown", function (e) {
                            return t.colResizeMousedown(n, e, i)
                        })
                    }
                }(this))
            }, t.prototype.colResizeMousedown = function (e, t, i) {
                var r, a, o, s;
                return r = this.colWidths = this.queryColWidths(), r.pop(), r.push(null), s = r[e], o = Math.min(this.colMinWidths[e], n), a = new c({
                    dragStart: function (e) {
                        return function () {
                            return i.addClass("fc-active")
                        }
                    }(this),
                    drag: function (t) {
                        return function (n, i) {
                            var a;
                            return a = s + (t.isRTL ? -n : n), a = Math.max(a, o), r[e] = a, t.applyColWidths()
                        }
                    }(this),
                    dragEnd: function (e) {
                        return function () {
                            return i.removeClass("fc-active")
                        }
                    }(this)
                }), a.startInteraction(t)
            }, t.prototype.applyColWidths = function () {
                var e, t, n, i, r, a, o, s, l, c, u, d, h, f, p, m, g;
                for (n = this.colMinWidths, r = this.colWidths, e = !0, t = !1, g = 0, c = 0, h = r.length; h > c; c++) i = r[c], "number" == typeof i ? g += i : (e = !1, i && (t = !0));
                for (s = t && !this.view.isHGrouping ? "auto" : "", o = function () {
                    var e, t, n;
                    for (n = [], l = e = 0, t = r.length; t > e; l = ++e) i = r[l], n.push(null != i ? i : s);
                    return n
                }(), m = 0, l = u = 0, f = o.length; f > u; l = ++u) a = o[l], m += "number" == typeof a ? a : n[l];
                for (l = d = 0, p = o.length; p > d; l = ++d) a = o[l], this.headColEls.eq(l).width(a), this.bodyColEls.eq(l).width(a);
                return this.headScroller.canvas.setMinWidth(m), this.bodyScroller.canvas.setMinWidth(m), this.tableMinWidth = m, this.tableWidth = e ? g : void 0
            }, t.prototype.computeColMinWidths = function () {
                var e, t, i, r, a, o;
                for (r = this.givenColWidths, a = [], e = t = 0, i = r.length; i > t; e = ++t) o = r[e], "number" == typeof o ? a.push(o) : a.push(parseInt(this.headColEls.eq(e).css("min-width")) || n);
                return a
            }, t.prototype.queryColWidths = function () {
                var t, n, i, r, a;
                for (r = this.headCellEls, a = [], t = 0, n = r.length; n > t; t++) i = r[t], a.push(e(i).outerWidth());
                return a
            }, t.prototype.updateWidth = function () {
                return this.headScroller.updateSize(), this.bodyScroller.updateSize(), this.joiner.update(),
                    this.follower ? this.follower.update() : void 0
            }, t.prototype.headHeight = function () {
                var e;
                return e = this.headScroller.canvas.contentEl.find("table"), e.height.apply(e, arguments)
            }, t
        }(), N = function () {
            function t(t) {
                this.view = t, this.children = [], this.trHash = {}, this.trs = e()
            }
            return t.prototype.view = null, t.prototype.parent = null, t.prototype.prevSibling = null, t.prototype.children = null, t.prototype.depth = 0, t.prototype.hasOwnRow = !1, t.prototype.trHash = null, t.prototype.trs = null, t.prototype.isRendered = !1, t.prototype.isExpanded = !0, t.prototype.isShown = !1, t.prototype.addChild = function (e, t) {
                var n, i, r, a, o;
                for (e.remove(), n = this.children, null != t ? n.splice(t, 0, e) : (t = n.length, n.push(e)), e.prevSibling = t > 0 ? n[t - 1] : null, t < n.length - 1 && (n[t + 1].prevSibling = e), e.parent = this, e.depth = this.depth + (this.hasOwnRow ? 1 : 0), o = e.getNodes(), i = 0, r = o.length; r > i; i++) a = o[i], a.added();
                return this.isShown && this.isExpanded ? e.show() : void 0
            }, t.prototype.removeChild = function (e) {
                var t, n, i, r, a, o, s, l, c, u;
                for (t = this.children, i = !1, n = r = 0, o = t.length; o > r; n = ++r)
                    if (u = t[n], u === e) {
                        i = !0;
                        break
                    } if (i) {
                        for (n < t.length - 1 && (t[n + 1].prevSibling = e.prevSibling), t.splice(n, 1), e.recursivelyUnrender(), l = e.getNodes(), a = 0, s = l.length; s > a; a++) c = l[a], c.removed();
                        return e.parent = null, e.prevSibling = null, e
                    }
                return !1
            }, t.prototype.removeChildren = function () {
                var e, t, n, i, r, a, o;
                for (a = this.children, t = 0, i = a.length; i > t; t++) e = a[t], e.recursivelyUnrender();
                for (o = this.getDescendants(), n = 0, r = o.length; r > n; n++) e = o[n], e.removed();
                return this.children = []
            }, t.prototype.remove = function () {
                return this.parent ? this.parent.removeChild(this) : void 0
            }, t.prototype.getLastChild = function () {
                var e;
                return e = this.children, e[e.length - 1]
            }, t.prototype.getPrevRow = function () {
                var e, t;
                for (t = this; t;) {
                    if (t.prevSibling)
                        for (t = t.prevSibling; e = t.getLastChild();) t = e;
                    else t = t.parent;
                    if (t && t.hasOwnRow && t.isShown) return t
                }
                return null
            }, t.prototype.getLeadingRow = function () {
                return this.hasOwnRow ? this : this.isExpanded && this.children.length ? this.children[0].getLeadingRow() : void 0
            }, t.prototype.getRows = function (e) {
                var t, n, i, r;
                for (null == e && (e = []), this.hasOwnRow && e.push(this), r = this.children, n = 0, i = r.length; i > n; n++) t = r[n], t.getRows(e);
                return e
            }, t.prototype.getNodes = function (e) {
                var t, n, i, r;
                for (null == e && (e = []), e.push(this), r = this.children, n = 0, i = r.length; i > n; n++) t = r[n], t.getNodes(e);
                return e
            }, t.prototype.getDescendants = function () {
                var e, t, n, i, r;
                for (e = [], r = this.children, n = 0, i = r.length; i > n; n++) t = r[n], t.getNodes(e);
                return e
            }, t.prototype.render = function () {
                var t, n, i, r, a, o, s;
                if (this.trHash = {}, o = [], this.hasOwnRow) {
                    t = this.getPrevRow(), n = this.view.tbodyHash;
                    for (s in n) r = n[s], a = e("<tr/>"), this.trHash[s] = a, o.push(a[0]), i = "render" + ee(s) + "Content", this[i] && this[i](a), t ? t.trHash[s].after(a) : r.prepend(a)
                }
                return this.trs = e(o).on("click", ".fc-expander", Ne(this, "toggleExpanded")), this.isRendered = !0
            }, t.prototype.unrender = function () {
                var t, n, i, r;
                if (this.isRendered) {
                    t = this.trHash;
                    for (i in t) n = t[i], r = "unrender" + ee(i) + "Content", this[r] && this[r](n);
                    return this.trHash = {}, this.trs.remove(), this.trs = e(), this.isRendered = !1, this.isShown = !1, this.hidden()
                }
            }, t.prototype.recursivelyUnrender = function () {
                var e, t, n, i, r;
                for (this.unrender(), i = this.children, r = [], t = 0, n = i.length; n > t; t++) e = i[t], r.push(e.recursivelyUnrender());
                return r
            }, t.prototype.getTr = function (e) {
                return this.trHash[e]
            }, t.prototype.show = function () {
                var e, t, n, i, r;
                if (!this.isShown && (this.isRendered ? this.trs.css("display", "") : this.render(), this.ensureSegsRendered && this.ensureSegsRendered(), this.isExpanded ? this.indicateExpanded() : this.indicateCollapsed(), this.isShown = !0, this.shown(), this.isExpanded)) {
                    for (i = this.children, r = [], t = 0, n = i.length; n > t; t++) e = i[t], r.push(e.show());
                    return r
                }
            }, t.prototype.hide = function () {
                var e, t, n, i, r;
                if (this.isShown && (this.isRendered && this.trs.hide(), this.isShown = !1, this.hidden(), this.isExpanded)) {
                    for (i = this.children, r = [], t = 0, n = i.length; n > t; t++) e = i[t], r.push(e.hide());
                    return r
                }
            }, t.prototype.expand = function () {
                var e, t, n, i;
                if (!this.isExpanded) {
                    for (this.isExpanded = !0, this.indicateExpanded(), this.view.batchRows(), i = this.children, t = 0, n = i.length; n > t; t++) e = i[t], e.show();
                    return this.view.unbatchRows(), this.animateExpand()
                }
            }, t.prototype.collapse = function () {
                var e, t, n, i;
                if (this.isExpanded) {
                    for (this.isExpanded = !1, this.indicateCollapsed(), this.view.batchRows(), i = this.children, t = 0, n = i.length; n > t; t++) e = i[t], e.hide();
                    return this.view.unbatchRows()
                }
            }, t.prototype.toggleExpanded = function () {
                return this.isExpanded ? this.collapse() : this.expand()
            }, t.prototype.indicateExpanded = function () {
                return this.trs.find(".fc-expander .fc-icon").removeClass(this.getCollapsedIcon()).addClass(this.getExpandedIcon())
            }, t.prototype.indicateCollapsed = function () {
                return this.trs.find(".fc-expander .fc-icon").removeClass(this.getExpandedIcon()).addClass(this.getCollapsedIcon())
            }, t.prototype.enableExpanding = function () {
                return this.trs.find(".fc-expander-space").addClass("fc-expander")
            }, t.prototype.disableExpanding = function () {
                return this.trs.find(".fc-expander-space").removeClass("fc-expander").find(".fc-icon").removeClass(this.getExpandedIcon()).removeClass(this.getCollapsedIcon())
            }, t.prototype.getExpandedIcon = function () {
                return "fc-icon-down-triangle"
            }, t.prototype.getCollapsedIcon = function () {
                var e;
                return e = this.view.isRTL ? "left" : "right", "fc-icon-" + e + "-triangle"
            }, t.prototype.animateExpand = function () {
                var e, t, n;
                return n = null != (e = this.children[0]) && null != (t = e.getLeadingRow()) ? t.trs : void 0, n ? (n.addClass("fc-collapsed"), setTimeout(function () {
                    return n.addClass("fc-transitioning"), n.removeClass("fc-collapsed")
                }), n.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", function () {
                    return n.removeClass("fc-transitioning")
                })) : void 0
            }, t.prototype.getMaxTrInnerHeight = function () {
                var t;
                return t = 0, e.each(this.trHash, function (e) {
                    return function (e, n) {
                        var i;
                        return i = ge(n).find("> div:not(.fc-cell-content):first"), t = Math.max(i.height(), t)
                    }
                }(this)), t
            }, t.prototype.setTrInnerHeight = function (t) {
                return e.each(this.trHash, function (e) {
                    return function (e, n) {
                        return ge(n).find("> div:not(.fc-cell-content):first").height(t)
                    }
                }(this))
            }, t.prototype.shown = function () {
                return this.hasOwnRow ? this.rowShown(this) : void 0
            }, t.prototype.hidden = function () {
                return this.hasOwnRow ? this.rowHidden(this) : void 0
            }, t.prototype.rowShown = function (e) {
                return (this.parent || this.view).rowShown(e)
            }, t.prototype.rowHidden = function (e) {
                return (this.parent || this.view).rowHidden(e)
            }, t.prototype.added = function () {
                return this.hasOwnRow ? this.rowAdded(this) : void 0
            }, t.prototype.removed = function () {
                return this.hasOwnRow ? this.rowRemoved(this) : void 0
            }, t.prototype.rowAdded = function (e) {
                return (this.parent || this.view).rowAdded(e)
            }, t.prototype.rowRemoved = function (e) {
                return (this.parent || this.view).rowRemoved(e)
            }, t
        }(), j = function (t) {
            function n(e, t, i) {
                this.groupSpec = t, this.groupValue = i, n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.prototype.groupSpec = null, n.prototype.groupValue = null, n.prototype.rowRemoved = function (e) {
                return n.__super__.rowRemoved.apply(this, arguments), e === this || this.children.length ? void 0 : this.remove()
            }, n.prototype.renderGroupContentEl = function () {
                var t, n;
                return t = e('<div class="fc-cell-content" />').append(this.renderGroupTextEl()), n = this.groupSpec.render, "function" == typeof n && (t = n(t, this.groupValue) || t), t
            }, n.prototype.renderGroupTextEl = function () {
                var t, n;
                return n = this.groupValue || "", t = this.groupSpec.text, "function" == typeof t && (n = t(n) || n), e('<span class="fc-cell-text" />').text(n)
            }, n
        }(N), m = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.prototype.hasOwnRow = !0, n.prototype.renderSpreadsheetContent = function (t) {
                var n;
                return n = this.renderGroupContentEl(), n.prepend('<span class="fc-expander"><span class="fc-icon"></span></span>'), e('<td class="fc-divider" />').attr("colspan", this.view.colSpecs.length).append(e("<div/>").append(n)).appendTo(t)
            }, n.prototype.renderEventContent = function (e) {
                return e.append('<td class="fc-divider"> <div/> </td>')
            }, n
        }(j), X = function (t) {
            function n() {
                return n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.prototype.rowspan = 0, n.prototype.leadingTr = null, n.prototype.groupTd = null, n.prototype.rowShown = function (e) {
                return this.rowspan += 1, this.renderRowspan(), n.__super__.rowShown.apply(this, arguments)
            }, n.prototype.rowHidden = function (e) {
                return this.rowspan -= 1, this.renderRowspan(), n.__super__.rowHidden.apply(this, arguments)
            }, n.prototype.renderRowspan = function () {
                var t;
                return this.rowspan ? (this.groupTd || (this.groupTd = e('<td class="' + this.view.widgetContentClass + '"/>').append(this.renderGroupContentEl())), this.groupTd.attr("rowspan", this.rowspan), t = this.getLeadingRow().getTr("spreadsheet"), t !== this.leadingTr ? (t && t.prepend(this.groupTd), this.leadingTr = t) : void 0) : (this.groupTd && (this.groupTd.remove(), this.groupTd = null), this.leadingTr = null)
            }, n
        }(j), h = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return qe(t, e), t.prototype.hasOwnRow = !0, t.prototype.segContainerEl = null, t.prototype.segContainerHeight = null, t.prototype.innerEl = null, t.prototype.bgSegContainerEl = null, t.prototype.isSegsRendered = !1, t.prototype.isBusinessHourSegsRendered = !1, t.prototype.businessHourSegs = null, t.prototype.bgSegs = null, t.prototype.fgSegs = null, t.prototype.renderEventContent = function (e) {
                return e.html('<td class="' + this.view.widgetContentClass + '"> <div> <div class="fc-event-container" /> </div> </td>'), this.segContainerEl = e.find(".fc-event-container"), this.innerEl = this.bgSegContainerEl = e.find("td > div"), this.ensureSegsRendered()
            }, t.prototype.ensureSegsRendered = function () {
                return this.isSegsRendered ? void 0 : (this.ensureBusinessHourSegsRendered(), this.bgSegs && this.view.timeGrid.renderFillInContainer("bgEvent", this, this.bgSegs), this.fgSegs && this.view.timeGrid.renderFgSegsInContainers([
                    [this, this.fgSegs]
                ]), this.isSegsRendered = !0)
            }, t.prototype.ensureBusinessHourSegsRendered = function () {
                return this.businessHourSegs && !this.isBusinessHourSegsRendered ? (this.view.timeGrid.renderFillInContainer("businessHours", this, this.businessHourSegs, "bgevent"), this.isBusinessHourSegsRendered = !0) : void 0
            }, t.prototype.unrenderEventContent = function () {
                return this.clearBusinessHourSegs(), this.bgSegs = null, this.fgSegs = null, this.isSegsRendered = !1
            }, t.prototype.clearBusinessHourSegs = function () {
                var e, t, n, i;
                if (this.businessHourSegs) {
                    for (n = this.businessHourSegs, e = 0, t = n.length; t > e; e++) i = n[e], i.el && i.el.remove();
                    this.businessHourSegs = null
                }
                return this.isBusinessHourSegsRendered = !1
            }, t
        }(N), R = function (t) {
            function n(e, t) {
                this.resource = t, n.__super__.constructor.apply(this, arguments)
            }
            return qe(n, t), n.prototype.resource = null, n.prototype.rowAdded = function (e) {
                return n.__super__.rowAdded.apply(this, arguments), e !== this && this.isRendered && 1 === this.children.length ? (this.enableExpanding(), this.isExpanded ? this.indicateExpanded() : this.indicateCollapsed()) : void 0
            }, n.prototype.rowRemoved = function (e) {
                return n.__super__.rowRemoved.apply(this, arguments), e !== this && this.isRendered && !this.children.length ? this.disableExpanding() : void 0
            }, n.prototype.render = function () {
                return n.__super__.render.apply(this, arguments), this.children.length > 0 ? this.enableExpanding() : this.disableExpanding(), this.view.publiclyTrigger("resourceRender", this.resource, this.resource, this.getTr("spreadsheet").find("> td"), this.getTr("event").find("> td"))
            }, n.prototype.renderEventContent = function (e) {
                return n.__super__.renderEventContent.apply(this, arguments), e.attr("data-resource-id", this.resource.id)
            }, n.prototype.renderSpreadsheetContent = function (t) {
                var n, i, r, a, o, s, l, c, u;
                for (l = this.resource, s = this.view.colSpecs, a = 0, o = s.length; o > a; a++) n = s[a], n.group || (r = n.field ? l[n.field] || null : l, u = "function" == typeof n.text ? n.text(l, r) : r, i = e('<div class="fc-cell-content">' + (n.isMain ? this.renderGutterHtml() : "") + '<span class="fc-cell-text">' + (u ? _e(u) : "&nbsp;") + "</span></div>"), "function" == typeof n.render && (i = n.render(l, i, r) || i), c = e('<td class="' + this.view.widgetContentClass + '"/>').append(i), n.isMain && c.wrapInner("<div/>"), t.append(c));
                return t.attr("data-resource-id", l.id)
            }, n.prototype.renderGutterHtml = function () {
                var e, t, n, i;
                for (e = "", t = n = 0, i = this.depth; i > n; t = n += 1) e += '<span class="fc-icon"/>';
                return e += '<span class="fc-expander-space"><span class="fc-icon"></span></span>'
            }, n
        }(h), f.views.timeline.resourceClass = H, S = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return qe(t, e), t.mixin(K), t.prototype.timeGridClass = I, t.prototype.dayGridClass = T, t.prototype.renderHead = function () {
                return t.__super__.renderHead.apply(this, arguments), this.timeGrid.processHeadResourceEls(this.headContainerEl)
            }, t.prototype.setResourcesOnGrids = function (e) {
                return this.timeGrid.setResources(e), this.dayGrid ? this.dayGrid.setResources(e) : void 0
            }, t.prototype.unsetResourcesOnGrids = function () {
                return this.timeGrid.unsetResources(), this.dayGrid ? this.dayGrid.unsetResources() : void 0
            }, t
        }(f.AgendaView), f.views.agenda.queryResourceClass = function (e) {
            var t;
            return (null != (t = e.options.groupByResource || e.options.groupByDateAndResource) ? t : e.duration && 1 === e.duration.as("days")) ? S : void 0
        }, A = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return qe(t, e), t.mixin(K), t.prototype.dayGridClass = T, t.prototype.renderHead = function () {
                return t.__super__.renderHead.apply(this, arguments), this.dayGrid.processHeadResourceEls(this.headContainerEl)
            }, t.prototype.setResourcesOnGrids = function (e) {
                return this.dayGrid.setResources(e)
            }, t.prototype.unsetResourcesOnGrids = function () {
                return this.dayGrid.unsetResources()
            }, t
        }(f.BasicView), M = function (e) {
            function t() {
                return t.__super__.constructor.apply(this, arguments)
            }
            return qe(t, e), t.mixin(K), t.prototype.dayGridClass = T, t.prototype.renderHead = function () {
                return t.__super__.renderHead.apply(this, arguments), this.dayGrid.processHeadResourceEls(this.headContainerEl)
            }, t.prototype.setResourcesOnGrids = function (e) {
                return this.dayGrid.setResources(e)
            }, t.prototype.unsetResourcesOnGrids = function () {
                return this.dayGrid.unsetResources()
            }, t
        }(f.MonthView), f.views.basic.queryResourceClass = function (e) {
            var t;
            return (null != (t = e.options.groupByResource || e.options.groupByDateAndResource) ? t : e.duration && 1 === e.duration.as("days")) ? A : void 0
        }, f.views.month.queryResourceClass = function (e) {
            return e.options.groupByResource || e.options.groupByDateAndResource ? M : void 0
        }, C = "2017-04-27", V = {
            years: 1,
            weeks: 1
        }, g = "http://fullcalendar.io/scheduler/license/", x = ["GPL-My-Project-Is-Open-Source", "CC-Attribution-NonCommercial-NoDerivatives"], je = function (e, t) {
            return Ce(window.location.href) || Ae(e) || ce(t) ? void 0 : ze('Please use a valid license key. <a href="' + g + '">More Info</a>', t)
        }, Ae = function (n) {
            var i, r, a, o;
            return -1 !== e.inArray(n, x) ? !0 : (r = (n || "").match(/^(\d+)\-fcs\-(\d+)$/), r && 10 === r[1].length && (a = t.utc(1e3 * parseInt(r[2])), o = t.utc(f.mockSchedulerReleaseDate || C), o.isValid() && (i = o.clone().subtract(V), a.isAfter(i))) ? !0 : !1)
        }, Ce = function (e) {
            return Boolean(e.match(/\w+\:\/\/fullcalendar\.io\/|\/demos\/[\w-]+\.html$/))
        }, ze = function (t, n) {
            return n.append(e('<div class="fc-license-message" />').html(t))
        }, void (ce = function (e) {
            return e.find(".fc-license-message").length >= 1
        }))
    });
var GettingStarted = function (e) {
    return {
        initGettingStartedHints: function () {
            var t = e();
            if (window.location.hash) {
                var n = window.location.hash.substring(1).split("=");
                if ("getting-started" === n[0]) {
                    var i = e(".getting-started-hint").filter('*[data-getting-started-step="' + n[1] + '"]');
                    i.length > 0 && (t = i)
                }
            }
            t.each(function () {
                var t = e(this),
                    n = t.data("getting-started-step"),
                    i = "",
                    r = "",
                    a = !1;
                e("body").hasClass("gs-in-sidebar") ? (i = e("#getting-started-sidebar").find(".getting-started-" + n), r = i.hasClass("getting-started-completed")) : e("body").hasClass("gs-in-header-sub-steps") && (a = !0);
                var o = t.hasClass("getting-started-dummy-step");
                if (i.length > 0 && !r || o || a) {
                    var s = {
                        template: '<div class="popover getting-started-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
                    },
                        l = t.data("gs-content");
                    if (l) {
                        var c = e('<wrap><span class="content"></span></wrap>');
                        c.find(".content").text(l), s.content = c.text(), s.html = !0
                    }
                    DelayedPopover(t, 500, s);
                    var u = t.closest("table");
                    u.parent().hasClass("scrollable") && e(window).load(function () {
                        u.parent().off("scroll").on("scroll", function () {
                            DelayedPopover(t, 500, s)
                        })
                    })
                }
            })
        },
        initGettingStartedToggler: function () {
            var t = e("body"),
                n = e("#getting-started-toggles");
            n.on("click", ".getting-started-toggle", function (i) {
                i.preventDefault(), i.stopPropagation();
                var r = e(i.target),
                    a = r.closest("div"),
                    o = r.attr("href");
                if (a.hasClass("getting-started-show")) {
                    e(a).addClass("hidden"), n.find(".getting-started-explore").removeClass("hidden"), "sidebar" == e("body").data("gsLocation") && (e("#standard-sidebar").addClass("hidden"), e("#getting-started-sidebar").removeClass("hidden")), e(".getting-started-show").addClass("hidden"), e("#getting-started-dashboard").removeClass("hidden");
                    var s = t.data("gsLocation");
                    t.addClass("has-getting-started-on gs-in-" + s)
                } else a.hasClass("getting-started-explore") && (e(a).addClass("hidden"), n.find(".getting-started-show").removeClass("hidden"), e("#standard-sidebar").removeClass("hidden"), e("#getting-started-sidebar").addClass("hidden"), t.removeClass("has-getting-started-on"));
                o && e.ajax({
                    url: o,
                    method: "post"
                })
            })
        },
        completeStepOnClient: function (t, n) {
            var i = e(".getting-started-" + t);
            i.addClass("getting-started-completed"), n && e("*[data-getting-started-step=" + t + "]").popover("destroy")
        },
        initGettingStartedPopovers: function () {
            var t = e("body"),
                n = e("#getting-started-dashboard");
            n.on("click", ".gs-item", function (n) {
                if (n.preventDefault(), n.stopPropagation(), e(this).data("stepRoute")) {
                    var i = e(this).data("stepRoute"),
                        r = e(this).data("orgId") || "auto";
                    return void (window.location.href = i.replace("auto", r))
                }
                var a = e("<div class='gs-step-backdrop'></div>"),
                    o = e(this),
                    s = this.getBoundingClientRect(),
                    l = e(this).data("stepName");
                t.addClass("has-gs-backdrop"), a.prependTo(t), e(this).find(e(".step-nav")).removeClass("hide");
                var c = t.hasClass("gs-in-header") ? 2 : 0;
                o.clone().css({
                    width: o.width() + c,
                    height: o.height() + 4,
                    background: "#FFFFFF",
                    position: "absolute",
                    "z-index": "2000",
                    top: window.pageYOffset + s.top - 6,
                    left: s.left
                }).addClass("active").prependTo(t);
                var u = e(".gs-item.active");
                u.popover({
                    placement: "bottom",
                    container: "body",
                    html: !0,
                    selector: '[rel="popover"]',
                    content: function () {
                        return '<div class="gs-popover-loading"><div class="curtain"><div class="spinner"></div></div>'
                    }
                }).data("bs.popover").tip().addClass("gs-popover"), u.popover("show"), o.addClass("invisible"), e.get("/dashboard/getting_started/" + l).done(function (t) {
                    e(".gs-popover .popover-content").fadeOut("fast", function () {
                        e(this).html(t).fadeIn("fast")
                    })
                }).fail(function () {
                    e.jGrowl("Could not load step"), GettingStarted.clearClickedStep()
                })
            })
        },
        clearClickedStep: function (t) {
            var n = e(".gs-step-popover-inner"),
                i = n.data("stepName");
            void 0 === t && !n.data("completeOnView") || 0 !== e(".getting-started-" + i + ".getting-started-completed").length ? this.removeGsElements(t) : this.skipOrCompleteStep(n.data("userId"), i, t)
        },
        removeGsElements: function (t) {
            e("body").hasClass("has-gs-backdrop") && (e("body").removeClass("has-gs-backdrop"), e(".gs-step-backdrop").remove(), e(".gs-item").first().remove(), e(".popover").remove(), e(".step-nav").addClass("hide"), e(".gs-item").removeClass("invisible"), void 0 !== t && e(".gs-item.getting-started-" + t).trigger("click"))
        },
        skipOrCompleteStep: function (t, n, i, r) {
            var a = void 0 === r ? "completed" : "skipped";
            return e(".getting-started-" + n + ".getting-started-completed").length ? void this.removeGsElements() : void e.ajax({
                url: "/users/" + t + "/skip_step?step=" + n,
                method: "POST",
                dataType: "json",
                success: function (t) {
                    var r = e(".getting-started-" + n).last(),
                        o = e(".sidebar-nav .gs-badge .sidebar-badge");
                    r.addClass("getting-started-completed"), r.find(".gs-badge").html('<i class="hi hi-check"></i>'), o.text(o.text() - 1), e.jGrowl("Step " + a), 0 === t.incompleteGsSteps && (e("#getting-started-toggles").remove(), o.remove(), e.jGrowl("Great job! The setup menu has been completed")), e(".has-gs-backdrop").length && GettingStarted.removeGsElements(i);
                    var s = e(".getting-started-progress"),
                        l = e(".gs-item").length,
                        c = e(".gs-item:not(.getting-started-completed)").length,
                        u = l - c,
                        d = Math.round(u / l * 100);
                    s.css({
                        width: d + "%"
                    }), e(".getting-started-completion").text(d + "%")
                },
                error: function () {
                    alert("An error occurred. Please try again."), GettingStarted.removeGsElements()
                }
            })
        },
        initMain: function () {
            e("#getting-started-toggles").each(function () {
                GettingStarted.initGettingStartedHints(), GettingStarted.initGettingStartedToggler(), GettingStarted.initGettingStartedPopovers()
            })
        }
    }
}(jQuery);
$(function () {
    GettingStarted.initMain();
    var e = $(".has-getting-started-on");
    e.on("click", ".gs-step-backdrop", function () {
        GettingStarted.clearClickedStep()
    }), e.on("click", ".gs-wrapper-link", function (e) {
        e.preventDefault(), GettingStarted.clearClickedStep()
    }), e.on("click", ".close-gs-step", function () {
        GettingStarted.clearClickedStep()
    }), e.on("click", ".gs-item .step-nav", function () {
        var e = $(this).data("stepNav"),
            t = $(".gs-step-popover-inner");
        t.data("completeOnView") ? GettingStarted.clearClickedStep(e) : (GettingStarted.clearClickedStep(), $(".gs-item.getting-started-" + e).trigger("click"))
    }), e.on("click", ".gs-skip-step", function (e) {
        e.preventDefault(), e.stopPropagation();
        var t = $(this).data("userId"),
            n = $(this).data("stepName");
        GettingStarted.skipOrCompleteStep(t, n, void 0, !0)
    }), e.on("click", ".js-timer-pop-open", function (e) {
        e.preventDefault(), e.stopPropagation(), GettingStarted.clearClickedStep(), window.WebTimer.backend.toggleWidget()
    }), e.on("click", ".vue-onboarding-trigger", function (e) {
        e.preventDefault(), e.stopPropagation(), GettingStarted.clearClickedStep(), window.InvitesOnboardingStatusDialog && window.InvitesOnboardingStatusDialog.open()
    }), e.on("change", ".gs-org-form-input", function () {
        var e = $("#gs-organization-form");
        $.ajax({
            url: e.attr("action"),
            type: "POST",
            dataType: "json",
            data: e.serialize(),
            success: function () {
                "" !== $("#organization_logo_hidden").val() && $("#organization_current_logo").removeClass("hide")
            },
            error: function () {
                alert("Could not update organization")
            }
        })
    }), e.on("click", ".gs-invite-button", function (e) {
        e.preventDefault();
        var t = $("#new-invite-form");
        $.ajax({
            url: t.attr("action"),
            type: "POST",
            dataType: "json",
            data: t.serialize(),
            success: function (e) {
                if (e.success) {
                    $.jGrowl(e.invitation_message);
                    var t = $(".gs-step-popover-inner"),
                        n = t.data("stepName");
                    0 === $(".getting-started-" + n + ".getting-started-completed").length ? GettingStarted.skipOrCompleteStep(t.data("userId"), n) : GettingStarted.removeGsElements()
                } else $.jGrowl("Please check your entry and try again."), $.rails.enableElement($(".gs-invite-button"))
            },
            error: function () {
                $.jGrowl("Please check your entry and try again."), $.rails.enableElement($(".gs-invite-button"))
            }
        })
    }), $(window).on("resize", function () {
        $(".has-gs-backdrop").length && GettingStarted.clearClickedStep()
    })
});
var DashboardPopup = function (e) {
    return {
        initDashboardHints: function () {
            var t = e();
            if (window.location.hash) {
                var n = window.location.hash.substring(1).split("=");
                if ("dashboard_popup" === n[0]) {
                    var i = e(".dashboard-popup").filter('*[data-dashboard-cta="' + n[1] + '"]');
                    i.length > 0 && (t = i)
                }
            }
            t.each(function () {
                var t = e(this);
                if (t) {
                    var n = {
                        template: '<div class="popover getting-started-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
                        placement: "top"
                    },
                        i = t.data("dashboard-content");
                    if (i) {
                        var r = e('<wrap><span class="content"></span></wrap>');
                        r.find(".content").text(i), n.content = r.text(), n.html = !0
                    }
                    DelayedPopover(t, 500, n);
                    var a = t.closest("table");
                    a.parent().hasClass("scrollable") && e(window).load(function () {
                        a.parent().off("scroll").on("scroll", function () {
                            DelayedPopover(t, 500, n)
                        })
                    })
                }
            })
        },
        initMain: function () {
            e(".dashboard-popup").each(function () {
                DashboardPopup.initDashboardHints()
            }), e(document).on("click", ".js-timer-pop-open", function (t) {
                if (t.preventDefault(), e(window).width() <= 768) {
                    var n = e(this).attr("href");
                    window.location.href = n
                } else window.WebTimer.backend.toggleWidget()
            }), e(".vue-onboarding-trigger").click(function (e) {
                e.preventDefault(), window.InvitesOnboardingStatusDialog.open()
            })
        }
    }
}(jQuery);
$(function () {
    DashboardPopup.initMain()
}),
    function () {
        var e = 27,
            t = {
                $body: null,
                $window: null,
                $modal: null,
                initialize: function () {
                    t.$body = $("body"), t.$window = $(window), t.$modal = $("#intro-video-popup"), t.$modal.length && (t.showPopupAnnouncement(), t.setEscapeEvent(), t.removeNoScroll())
                },
                markSeen: function () {
                    var e = t.$modal.data("controller-action");
                    return $.ajax({
                        method: "PATCH",
                        url: "/user/dismiss_intro_video",
                        data: {
                            controller_action: e
                        },
                        dataType: "json"
                    })
                },
                closePopover: function () {
                    t.$modal.addClass("slide-down"), window.wistiaEmbed.pause(), t.markSeen()
                },
                removeNoScroll: function () {
                    t.$body.removeClass("modal-open")
                },
                setEscapeEvent: function () {
                    t.$window.on("keydown", function (n) {
                        n.which === e && (n.stopPropagation(), n.preventDefault(), t.closePopover())
                    })
                },
                showPopupAnnouncement: function () {
                    $(".close").on("click", t.closePopover), t.$modal.modal({
                        backdrop: !1
                    })
                }
            };
        $(document).ready(t.initialize)
    }(), $(function () {
        function e(e) {
            "yearly" === e ? (c.length && c.removeClass("hide"), u.length && u.addClass("hide")) : "quarterly" === e && (c.length && c.addClass("hide"), u.length && u.removeClass("hide")), "yearly" === e || "quarterly" === e ? l.length && l.fadeTo("fast", 1) : l.length && l.fadeTo("fast", .2)
        }

        function t(e) {
            var t = v.data("showCentsBasic"),
                n = v.data("showCentsPremium"),
                i = v.data("showCentsEnterprise");
            if (e.basic)
                if (t) {
                    var r = e.basic.toString().split(".");
                    d.text(r[0]), h.text(r[1])
                } else d.text(e.basic), h.text("");
            if (e.premium)
                if (n) {
                    var a = e.premium.toString().split(".");
                    f.text(a[0]), p.text(a[1])
                } else f.text(e.premium), p.text("");
            if (e.enterprise)
                if (i) {
                    var o = e.enterprise.toString().split(".");
                    m.text(o[0]), g.text(o[1])
                } else m.text(e.enterprise), g.text("")
        }

        function n(e) {
            return e
        }

        function i(e) {
            return e.basic && (e.basic = (11 * e.basic / 12).toFixed(2)), e.premium && (e.premium = (11 * e.premium / 12).toFixed(2)), e.enterprise && (e.enterprise = (11 * e.enterprise / 12).toFixed(2)), e
        }

        function r(e) {
            return e.basic && (e.basic = (10 * e.basic / 12).toFixed(2)), e.premium && (e.premium = (10 * e.premium / 12).toFixed(2)), e.enterprise && (e.enterprise = (10 * e.enterprise / 12).toFixed(2)), e
        }

        function a(e) {
            var a = {},
                o = {};
            v.length && (o = Object.assign({}, v.data("pricing")), "monthly" === e ? a = n(o) : "quarterly" === e ? a = i(o) : "yearly" === e && (a = r(o)), t(a))
        }

        function o(e) {
            var t = $(".is-yearly"),
                n = $(".is-quarterly"),
                i = $(".is-monthly");
            t.addClass("hide"), n.addClass("hide"), i.addClass("hide"), "monthly" === e ? (h.hide(), p.hide(), g.hide()) : (h.show(), p.show(), g.show()), "monthly" === e ? i.removeClass("hide") : "quarterly" === e ? n.removeClass("hide") : "yearly" === e && t.removeClass("hide")
        }
        var s = $(".pricing-frequency").data("default-time-span"),
            l = $(".months-free"),
            c = $(".months-free-inner.two"),
            u = $(".months-free-inner.one"),
            d = $(".basic-price"),
            h = $(".basic-price-cents"),
            f = $(".premium-price"),
            p = $(".premium-price-cents"),
            m = $(".enterprise-price"),
            g = $(".enterprise-price-cents"),
            v = $(".per-user-pricing");
        e(s), $(".frequency-toggle").on("click", function (t) {
            $("label.btn").removeClass("active"), $(this).parent().addClass("active"), s = t.target.id, "monthly" === s ? $(".pay-frequency").text("Paid Monthly") : "quarterly" === s ? $(".pay-frequency").text("Paid Quarterly") : $(".pay-frequency").text("Paid Annually"), o(s), e(s), a(s)
        })
    }), $(function () {
        $(".dismiss-tasks-advert").on("click", function () {
            $(".tasks-advert").hide()
        })
    });
var LearnMore = function (e) {
    return {
        trackLearnMoreClick: function () {
            e("body").on("click", "a.tasks-learn-more-button", function (t) {
                if (window.analytics) {
                    var n = e(t.target).data("source");
                    analytics.track("Hubstaff Tasks Learn more clicked", {
                        source: n
                    })
                }
            })
        },
        initDialog: function (t) {
            e(".try-tasks-button", t).on("click", function () {
                analytics && analytics.track("Hubstaff Tasks Try it now clicked")
            }), t.find(".close-tasks-dialogs").on("click", function () {
                e(".modal").modal("hide")
            })
        }
    }
}(jQuery);
AjaxDialog.registerHook("setup", "tasksLearnMoreDialog", function () {
    var e = this;
    LearnMore.initDialog(e)
}), $(function () {
    LearnMore.trackLearnMoreClick()
});
var UpgradeMat = function (e) {
    return {
        trackClick: function () {
            e("a.upgrade-welcome-mat-btn").on("click", function (t) {
                t.stopImmediatePropagation(), t.preventDefault();
                var n = e(this).attr("href");
                if ("undefined" != typeof analytics) {
                    var i = e(t.target).data("source");
                    analytics.track("Upgrade mat clicked", {
                        source: i
                    }, {}, function () {
                        window.location.href = n
                    })
                } else window.location.href = n
            })
        }
    }
}(jQuery);
$(function () {
    setupDismissWelcomeMatLinks(document), UpgradeMat.trackClick()
});
var DemoButton = function (e) {
    return {
        trackDemoClick: function () {
            e("a.demo-button").on("click", function (e) {
                window.analytics && analytics.track("Demo button clicked")
            })
        }
    }
}(jQuery);
$(function () {
    DemoButton.trackDemoClick()
}), $(function () {
    function e(e) {
        AjaxDialog.registerHook("setup", "collectionOccupationInfoDialog", function () {
            var e = this;
            e.on("hide.bs.modal", function (t) {
                if (0 === e.find("button.occupation-option.btn-primary").length) {
                    var n = e.find(".modal-content").data("url");
                    n && $.ajax({
                        url: n,
                        data: {
                            dismiss: !0
                        },
                        method: "POST",
                        dataType: "json"
                    })
                }
            })
        }), $(e).on("click", "#collect-occupation-info-modal button.occupation-option", function (e) {
            var t = $(this);
            t.removeClass("btn-default").addClass("btn-primary");
            var n = t.parents(".modal").find("button.occupation-option");
            n.prop("disabled", !0);
            var i = t.parents(".modal-content").data("url"),
                r = t.data("occupation-id");
            i && $.ajax({
                url: i,
                data: {
                    occupation_id: r
                },
                method: "POST",
                dataType: "json"
            }).done(function (e) {
                "ok" === e.status ? e.reload ? window.location.reload() : t.closest(".modal").modal("hide").delay(300) : (n.prop("disabled", !1), e.message && AjaxDialog.displayNotifications({
                    alert: e.message
                }))
            }).fail(function (e) {
                n.prop("disabled", !1), e.message && AjaxDialog.displayNotifications({
                    alert: e.message
                })
            })
        })
    }
    e(document)
}), setupEnableSettingAlertLinks(document);
var CheckoutBilling = {
    setup: function () {
        var e = CheckoutBilling.setupStripeElements(stripe),
            t = $(".payment-errors");
        if (!e) return t.text("Stripe is not configured").removeClass("hide"), void $("form#payment-form-checkout, form#payment-form-checkout input, form#payment-form-checkout select").prop("disabled", !0);
        e.forEach(function (e) {
            e.on("change", function (e) {
                e.error ? t.text(e.error.message).show() : t.hide()
            })
        });
        var n = e[0];
        n.on("change", function (e) {
            e.brand ? CheckoutBilling.setCardBrand("is-" + e.brand) : CheckoutBilling.setCardBrand("")
        });
        var i = e[2];
        return i.on("focus", function (e) {
            CheckoutBilling.setCardState("is-focused-cvc")
        }), i.on("blur", function (e) {
            CheckoutBilling.setCardState("")
        }), n
    },
    submit: function (e, t, n) {
        var i = {
            name: $("#hubstaff_card_name").val()
        },
            r = $("#intent").val();
        stripe.confirmCardSetup(r, {
            payment_method: {
                card: n,
                billing_details: i
            }
        }).then(function (n) {
            var i = $(".payment-errors");
            if (i.hide(), n.error) i.text(n.error.message).show(), $.rails.enableFormElements(e);
            else {
                var r = n.setupIntent.payment_method;
                e.find('input[name="hubstaff[stripe_token]"]').remove(), e.append($('<input type="hidden" name="hubstaff[stripe_token]" />').val(r)), t()
            }
        })
    },
    setupStripeElements: function (e) {
        var t = e.elements();
        if (!t) return !1;
        var n = {
            base: {
                color: "#7f8c8d",
                lineHeight: "1.467",
                fontFamily: '"Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif',
                fontSize: "14px",
                "::placeholder": {
                    color: "#b4bbc3"
                }
            },
            invalid: {
                color: "#E25950"
            }
        },
            i = {
                focus: "focused",
                empty: "empty",
                invalid: "has-error"
            },
            r = t.create("cardNumber", {
                style: n,
                classes: i
            });
        r.mount("#hubstaff_card_number");
        var a = t.create("cardExpiry", {
            style: n,
            classes: i
        });
        a.mount("#hubstaff_expires");
        var o = t.create("cardCvc", {
            style: n,
            classes: i
        });
        o.mount("#hubstaff_cvc");
        var s = t.create("postalCode", {
            style: n,
            classes: i
        });
        return s.mount("#hubstaff_address_zip"), [r, a, o, s]
    },
    setCardBrand: function (e) {
        var t = $("#credit-card-data");
        t.data("prevBrand") != e && (t.data("prevBrand", e), t.removeClass(), e && t.addClass(e))
    },
    setCardState: function (e) {
        var t = $("#credit-card-icon-wrapper");
        t.data("prevState") != e && (t.data("prevState", e), t.removeClass(), e && t.addClass(e))
    }
};
$(function () {
    var e;
    $(".marketing-navbar-collapse").on("shown.bs.collapse", function () {
        e = $("body").scrollTop(), $("body").scrollTop(0)
    }), $(".marketing-navbar-collapse").on("shown.bs.collapse", function () {
        $("html, body").addClass("has-mobile-menu")
    }), $(".marketing-navbar-collapse").on("hide.bs.collapse", function () {
        $("html, body").removeClass("has-mobile-menu"), setTimeout(function () {
            $("body").scrollTop(e)
        }, 0)
    })
}), $(function () {
    $reviewPromptContainer = $(".review-prompt-container"), $("#review-prompt").each(function () {
        setTimeout(function () {
            $reviewPromptContainer.slideDown(500)
        }, 750), $(".leave-review, .dismiss-review-prompt, .block-review-prompt").on("click", function () {
            $reviewPromptContainer.slideUp(500)
        })
    })
}), $(function () {
    $(".marketing-popover").hover(function (e) {
        e.target === this && $(this).find($(".popover")).fadeIn()
    }, function (e) {
        $(this).find($(".popover")).fadeOut()
    })
}), $(document).on("show.bs.modal", ".modal", function () {
    var e = 1040 + 10 * $(".modal:visible").length;
    $(this).css("z-index", e), setTimeout(function () {
        $(".modal-backdrop").not(".modal-stack").css("z-index", e - 1).addClass("modal-stack")
    }, 0)
}), $(function () {
    var e = ["project", "member", "client"];
    e.forEach(function (e) {
        $("." + e + "-dialog-trigger").click(function (t) {
            t.preventDefault();
            var n = $(this),
                i = $(this).data("initial-state-selector");
            i && (n = $(this).closest($(i)));
            var r = {
                initialState: JSON.parse(JSON.stringify($(n).data("initial-state"))),
                newForm: $(this).data("new-form"),
                selectedTab: $(this).data("selected-tab")
            },
                a = e[0].toUpperCase() + e.substring(1) + "Dialog";
            window[a].open(r)
        })
    })
});